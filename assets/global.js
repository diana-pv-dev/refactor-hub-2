"use strict";function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(i){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(i);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,a,s,n,o=[],l=!0,c=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=s.call(i)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=i.return&&(n=i.return(),Object(n)!==n))return}finally{if(c)throw a}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var i,r,a,s,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return r=!(i=!0),{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){r=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw a}}};if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),s=0,{s:t=function(){},n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var i;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function r(a,s,n){function o(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=s[t]={exports:{}},a[t][0].call(i.exports,function(e){return o(a[t][1][e]||e)},i,i.exports,r,a,s,n)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<n.length;e++)o(n[e]);return o}({1:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(){function e(){}var t=e.prototype;return t.on=function(e,t){var i;return e&&t&&((i=(i=this._events=this._events||{})[e]=i[e]||[]).includes(t)||i.push(t)),this},t.once=function(e,t){var i;return e&&t&&(this.on(e,t),((i=this._onceEvents=this._onceEvents||{})[e]=i[e]||{})[t]=!0),this},t.off=function(e,t){e=this._events&&this._events[e];return e&&e.length&&-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];var r,a=this._onceEvents&&this._onceEvents[e],s=_createForOfIteratorHelper(i);try{for(s.s();!(r=s.n()).done;){var n=r.value;a&&a[n]&&(this.off(e,n),delete a[n]),n.apply(this,t)}}catch(e){s.e(e)}finally{s.f()}}return this},t.allOff=function(){return delete this._events,delete this._onceEvents,this},e},"object"==_typeof(t)&&t.exports?t.exports=a():r.EvEmitter=a()},{}],2:[function(e,t,i){var r,a;r=this,a=function(t){var i={extend:function(e,t){return Object.assign(e,t)},modulo:function(e,t){return(e%t+t)%t},makeArray:function(e){return Array.isArray(e)?e:null==e?[]:"object"==_typeof(e)&&"number"==typeof e.length?_toConsumableArray(e):[e]},removeFrom:function(e,t){t=e.indexOf(t);-1!=t&&e.splice(t,1)},getParent:function(e,t){for(;e.parentNode&&e!=document.body;)if((e=e.parentNode).matches(t))return e},getQueryElement:function(e){return"string"==typeof e?document.querySelector(e):e},handleEvent:function(e){var t="on"+e.type;this[t]&&this[t](e)},filterFindElements:function(e,r){return(e=i.makeArray(e)).filter(function(e){return e instanceof HTMLElement}).reduce(function(e,t){var i;return r?(t.matches(r)&&e.push(t),i=t.querySelectorAll(r),e=e.concat.apply(e,_toConsumableArray(i))):e.push(t),e},[])},debounceMethod:function(e,t,i){i=i||100;var r=e.prototype[t],a=t+"Timeout";e.prototype[t]=function(){var e=this,t=(clearTimeout(this[a]),arguments);this[a]=setTimeout(function(){r.apply(e,t),delete e[a]},i)}},docReady:function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},toDashed:function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()}},o=t.console;return i.htmlInit=function(s,n){i.docReady(function(){var r="data-"+i.toDashed(n),e=document.querySelectorAll("[".concat(r,"]")),a=t.jQuery;_toConsumableArray(e).forEach(function(t){var e,i=t.getAttribute(r);try{e=i&&JSON.parse(i)}catch(e){return void(o&&o.error("Error parsing ".concat(r," on ").concat(t.className,": ").concat(e)))}i=new s(t,e);a&&a.data(t,n,i)})})},i},"object"==_typeof(t)&&t.exports?t.exports=a(r):r.fizzyUIUtils=a(r)},{}],3:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(e,a){var t=e.prototype;return t.insert=function(e,t){var i,r,a,s,n,e=this._makeCells(e);e&&e.length&&(i=this.cells.length,t=void 0===t?i:t,n=e,r=document.createDocumentFragment(),n.forEach(function(e){return r.appendChild(e.element)}),n=r,(a=t===i)?this.slider.appendChild(n):(s=this.cells[t].element,this.slider.insertBefore(n,s)),0===t?this.cells=e.concat(this.cells):a?this.cells=this.cells.concat(e):(n=this.cells.splice(t,i-t),this.cells=this.cells.concat(e).concat(n)),this._sizeCells(e),this.cellChange(t),this.positionSliderAtSelected())},t.append=function(e){this.insert(e,this.cells.length)},t.prepend=function(e){this.insert(e,0)},t.remove=function(e){var i,r=this,e=this.getCells(e);e&&e.length&&(i=this.cells.length-1,e.forEach(function(e){e.remove();var t=r.cells.indexOf(e);i=Math.min(t,i),a.removeFrom(r.cells,e)}),this.cellChange(i),this.positionSliderAtSelected())},t.cellSizeChange=function(e){var e=this.getCell(e);e&&(e.getSize(),e=this.cells.indexOf(e),this.cellChange(e))},t.cellChange=function(e){var t=this.selectedElement,t=(this._positionCells(e),this._updateWrapShiftCells(),this.setGallerySize(),this.getCell(t));t&&(this.selectedIndex=this.getCellSlideIndex(t)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[e]),this.select(this.selectedIndex)},e},"object"==_typeof(t)&&t.exports?t.exports=a(e("./core"),e("fizzy-ui-utils")):a(r.Flickity,r.fizzyUIUtils)},{"./core":6,"fizzy-ui-utils":2}],4:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(t){var e={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){var e=this,t=(this.applyDragForce(),this.applySelectedAttraction(),this.x);this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating&&requestAnimationFrame(function(){return e.animate()})},positionSlider:function(){var e=this.x;this.isWrapping&&(e=t.modulo(e,this.slideableWidth)-this.slideableWidth,this.shiftWrapCells(e)),this.setTranslateX(e,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(e,t){e+=this.cursorPosition,this.options.rightToLeft&&(e=-e);e=this.getPositionValue(e);this.slider.style.transform=t?"translate3d(".concat(e,",0,0)"):"translateX(".concat(e,")")},dispatchScrollEvent:function(){var e,t=this.slides[0];t&&(e=(t=-this.x-t.target)/this.slidesWidth,this.dispatchEvent("scroll",null,[e,t]))},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(e){return this.options.percentPosition?.01*Math.round(e/this.size.innerWidth*1e4)+"%":Math.round(e)+"px"},settle:function(e){this.isPointerDown||Math.round(100*this.x)!==Math.round(100*e)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(e){var t=this.cursorPosition+e,t=(this._shiftCells(this.beforeShiftCells,t,-1),this.size.innerWidth-(e+this.slideableWidth+this.cursorPosition));this._shiftCells(this.afterShiftCells,t,1)},_shiftCells:function(e,i,r){var a=this;e.forEach(function(e){var t=0<i?r:0;a._wrapShiftCell(e,t),i-=e.size.outerWidth})},_unshiftCells:function(e){var t=this;e&&e.length&&e.forEach(function(e){return t._wrapShiftCell(e,0)})},_wrapShiftCell:function(e,t){this._renderCellPosition(e,e.x+this.slideableWidth*t)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(e){this.velocity+=e},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){var e;this.isDraggable&&this.isPointerDown&&(e=this.dragX-this.x-this.velocity,this.applyForce(e))},applySelectedAttraction:function(){var e;this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||(e=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction,this.applyForce(e))}};return e},"object"==_typeof(t)&&t.exports?t.exports=a(e("fizzy-ui-utils")):(r.Flickity=r.Flickity||{},r.Flickity.animatePrototype=a(r.fizzyUIUtils))},{"fizzy-ui-utils":2}],5:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(e){var t="flickity-cell";function i(e){this.element=e,this.element.classList.add(t),this.x=0,this.unselect()}var r=i.prototype;return r.destroy=function(){this.unselect(),this.element.classList.remove(t),this.element.style.transform="",this.element.removeAttribute("aria-hidden")},r.getSize=function(){this.size=e(this.element)},r.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},r.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},r.remove=function(){this.element.remove()},i},"object"==_typeof(t)&&t.exports?t.exports=a(e("get-size")):(r.Flickity=r.Flickity||{},r.Flickity.Cell=a(r.getSize))},{"get-size":15}],6:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(o,e,t,l,i,c,r){var a=o.getComputedStyle,s=o.console,n=o.jQuery,d=0,p={};function u(e,t){var i,r=l.getQueryElement(e);if(r){if(this.element=r,this.element.flickityGUID)return(i=p[this.element.flickityGUID])&&i.option(t),i;n&&(this.$element=n(this.element)),this.options=_objectSpread({},this.constructor.defaults),this.option(t),this._create()}else s&&s.error("Bad element for Flickity: ".concat(r||e))}u.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},u.create={};var h=u.prototype,f=(Object.assign(h,e.prototype),h._create=function(){var e,t,i=this.options,r=i.resize,a=i.watchCSS,i=i.rightToLeft,s=this.guid=++d;for(e in this.element.flickityGUID=s,(p[s]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.beginMargin=i?"marginRight":"marginLeft",this.endMargin=i?"marginLeft":"marginRight",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),this.focusableElems=[this.element],(r||a)&&o.addEventListener("resize",this),this.options.on){var n=this.options.on[e];this.on(e,n)}for(t in u.create)u.create[t].call(this);a?this.watchCSS():this.activate()},h.option=function(e){Object.assign(this.options,e)},h.activate=function(){var e,t;this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),t=this._filterFindCellElements(this.element.children),(e=this.slider).append.apply(e,_toConsumableArray(t)),this.viewport.append(this.slider),this.element.append(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},h._createSlider=function(){var e=document.createElement("div");e.className="flickity-slider",this.slider=e},h._filterFindCellElements=function(e){return l.filterFindElements(e,this.options.cellSelector)},h.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._updateWrapShiftCells(),this.setGallerySize()},h._makeCells=function(e){return this._filterFindCellElements(e).map(function(e){return new i(e)})},h.getLastCell=function(){return this.cells[this.cells.length-1]},h.getLastSlide=function(){return this.slides[this.slides.length-1]},h.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},h._positionCells=function(e){var t,i=this,r=(this.maxCellHeight=(e=e||0)&&this.maxCellHeight||0,0);0<e&&(t=this.cells[e-1],r=t.x+t.size.outerWidth),this.cells.slice(e).forEach(function(e){e.x=r,i._renderCellPosition(e,r),r+=e.size.outerWidth,i.maxCellHeight=Math.max(e.size.outerHeight,i.maxCellHeight)}),this.slideableWidth=r,this.updateSlides(),this._containSlides(),this.slidesWidth=this.cells.length?this.getLastSlide().target-this.slides[0].target:0},h._renderCellPosition=function(e,t){t*=this.options.rightToLeft?-1:1,this.options.percentPosition&&(t*=this.size.innerWidth/e.size.width),t=this.getPositionValue(t);e.element.style.transform="translateX( ".concat(t," )")},h._sizeCells=function(e){e.forEach(function(e){return e.getSize()})},h.updateSlides=function(){var r,a,s,n,o=this;this.slides=[],this.cells.length&&(r=this.beginMargin,a=this.endMargin,s=new c(r,a,this.cellAlign),this.slides.push(s),n=this._getCanCellFit(),this.cells.forEach(function(e,t){var i;s.cells.length&&(i=s.outerWidth-s.firstMargin+(e.size.outerWidth-e.size[a]),n(t,i)||(s.updateTarget(),s=new c(r,a,o.cellAlign),o.slides.push(s))),s.addCell(e)}),s.updateTarget(),this.updateSelectedSlide())},h._getCanCellFit=function(){var t,e,i,r=this.options.groupCells;return r?"number"==typeof r?(t=parseInt(r,10),function(e){return e%t!=0}):(e=1,(r="string"==typeof r&&r.match(/^(\d+)%$/))&&(e=parseInt(r[1],10)/100),i=(this.size.innerWidth+1)*e,function(e,t){return t<=i}):function(){return!1}},h._init=h.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},h.getSize=function(){this.size=t(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign},{left:0,center:.5,right:1}),m=(h.setCellAlign=function(){var e=this.options,t=e.cellAlign,e=e.rightToLeft,i=f[t];this.cellAlign=void 0!==i?i:t,e&&(this.cellAlign=1-this.cellAlign)},h.setGallerySize=function(){var e;this.options.setGallerySize&&(e=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight,this.viewport.style.height="".concat(e,"px"))},h._updateWrapShiftCells=function(){var e,t;this.isWrapping=this.getIsWrapping(),this.isWrapping&&(this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells),t=this.cursorPosition,e=this.cells.length-1,this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1))},h.getIsWrapping=function(){var e=this.options.wrapAround;if(!e||this.slides.length<2)return!1;if("fill"===e){var t=this.slideableWidth-this.size.innerWidth;if(!(t>this.size.innerWidth)){var i,r=_createForOfIteratorHelper(this.cells);try{for(r.s();!(i=r.n()).done;)if(i.value.size.outerWidth>t)return!1}catch(e){r.e(e)}finally{r.f()}}}return!0},h._getGapCells=function(e,t,i){for(var r=[];0<e;){var a=this.cells[t];if(!a)break;r.push(a),t+=i,e-=a.size.outerWidth}return r},h._containSlides=function(){var t,i,r,a=this;this.options.contain&&!this.isWrapping&&this.cells.length&&((t=this.slideableWidth-this.getLastCell().size[this.endMargin])<this.size.innerWidth?this.slides.forEach(function(e){e.target=t*a.cellAlign}):(i=this.cursorPosition+this.cells[0].size[this.beginMargin],r=t-this.size.innerWidth*(1-this.cellAlign),this.slides.forEach(function(e){e.target=Math.max(e.target,i),e.target=Math.min(e.target,r)})))},h.dispatchEvent=function(e,t,i){var r=t?[t].concat(i):i;this.emitEvent(e,r),n&&this.$element&&(r=e+=this.options.namespaceJQueryEvents?".flickity":"",t&&((t=new n.Event(t)).type=e,r=t),this.$element.trigger(r,i))},["dragStart","dragMove","dragEnd","pointerDown","pointerMove","pointerEnd","staticClick"]),v=h.emitEvent,e=(h.emitEvent=function(e,t){var i,r;"staticClick"===e&&(i=(r=this.getParentCell(t[0].target))&&r.element,r=r&&this.cells.indexOf(r),t=t.concat(i,r)),v.call(this,e,t),m.includes(e)&&n&&this.$element&&(e+=this.options.namespaceJQueryEvents?".flickity":"",i=t.shift(0),(r=new n.Event(i)).type=e,this.$element.trigger(r,t))},h.select=function(e,t,i){this.isActive&&(e=parseInt(e,10),this._wrapSelect(e),(this.isWrapping||t)&&(e=l.modulo(e,this.slides.length)),this.slides[e])&&(t=this.selectedIndex,this.selectedIndex=e,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[e]),e!==t)&&this.dispatchEvent("change",null,[e])},h._wrapSelect=function(e){var t,i,r,a,s,n;this.isWrapping&&(t=this.selectedIndex,i=this.slideableWidth,r=this.slides.length,this.isDragSelect||(n=l.modulo(e,r),a=Math.abs(n-t),s=Math.abs(n+r-t),n=Math.abs(n-r-t),s<a?e+=r:n<a&&(e-=r)),e<0?this.x-=i:r<=e&&(this.x+=i))},h.previous=function(e,t){this.select(this.selectedIndex-1,e,t)},h.next=function(e,t){this.select(this.selectedIndex+1,e,t)},h.updateSelectedSlide=function(){var e=this.slides[this.selectedIndex];e&&(this.unselectSelectedSlide(),(this.selectedSlide=e).select(),this.selectedCells=e.cells,this.selectedElements=e.getCellElements(),this.selectedCell=e.cells[0],this.selectedElement=this.selectedElements[0])},h.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},h.selectInitialIndex=function(){var e=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(e&&"string"==typeof e)if(this.queryCell(e))return void this.selectCell(e,!1,!0);var t=0;e&&this.slides[e]&&(t=e),this.select(t,!1,!0)}},h.selectCell=function(e,t,i){var e=this.queryCell(e);e&&(e=this.getCellSlideIndex(e),this.select(e,t,i))},h.getCellSlideIndex=function(t){var e=this.slides.find(function(e){return e.cells.includes(t)});return this.slides.indexOf(e)},h.getCell=function(e){var t,i=_createForOfIteratorHelper(this.cells);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.element===e)return r}}catch(e){i.e(e)}finally{i.f()}},h.getCells=function(e){var t=this;return(e=l.makeArray(e)).map(function(e){return t.getCell(e)}).filter(Boolean)},h.getCellElements=function(){return this.cells.map(function(e){return e.element})},h.getParentCell=function(e){var t=this.getCell(e);return t||(t=e.closest(".flickity-slider > *"),this.getCell(t))},h.getAdjacentCellElements=function(e,t){if(!e)return this.selectedSlide.getCellElements();t=void 0===t?this.selectedIndex:t;var i=this.slides.length;if(i<=1+2*e)return this.getCellElements();for(var r=[],a=t-e;a<=t+e;a++){var s=this.isWrapping?l.modulo(a,i):a,s=this.slides[s];s&&(r=r.concat(s.getCellElements()))}return r},h.queryCell=function(e){return"number"==typeof e?this.cells[e]:("string"==typeof e&&!e.match(/^[#.]?[\d/]/)&&(e=this.element.querySelector(e)),this.getCell(e))},h.uiChange=function(){this.emitEvent("uiChange")},h.onresize=function(){this.watchCSS(),this.resize()},l.debounceMethod(u,"onresize",150),h.resize=function(){var e;!this.isActive||this.isAnimating||this.isDragging||(this.getSize(),this.isWrapping&&(this.x=l.modulo(this.x,this.slideableWidth)),this.positionCells(),this._updateWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),e=this.selectedElements&&this.selectedElements[0],this.selectCell(e,!1,!0))},h.watchCSS=function(){this.options.watchCSS&&(a(this.element,":after").content.includes("flickity")?this.activate():this.deactivate())},h.onkeydown=function(e){var t=document.activeElement,e=u.keyboardHandlers[e.key];this.options.accessibility&&t&&e&&this.focusableElems.some(function(e){return t===e})&&e.call(this)},u.keyboardHandlers={ArrowLeft:function(){this.uiChange(),this[this.options.rightToLeft?"next":"previous"]()},ArrowRight:function(){this.uiChange(),this[this.options.rightToLeft?"previous":"next"]()}},h.focus=function(){this.element.focus({preventScroll:!0})},h.deactivate=function(){var e;this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(e){return e.destroy()}),this.viewport.remove(),(e=this.element).append.apply(e,_toConsumableArray(this.slider.children)),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},h.destroy=function(){this.deactivate(),o.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),n&&this.$element&&n.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete p[this.guid]},Object.assign(h,r),u.data=function(e){if(e=l.getQueryElement(e))return p[e.flickityGUID]},l.htmlInit(u,"flickity"),o.jQueryBridget);return n&&e&&e("flickity",u,n),u.setJQuery=function(e){n=e},u.Cell=i,u.Slide=c,u},"object"==_typeof(t)&&t.exports?t.exports=a(r,e("ev-emitter"),e("get-size"),e("fizzy-ui-utils"),e("./cell"),e("./slide"),e("./animate")):(t=r.Flickity,r.Flickity=a(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,t.Cell,t.Slide,t.animatePrototype))},{"./animate":4,"./cell":5,"./slide":14,"ev-emitter":1,"fizzy-ui-utils":2,"get-size":15}],7:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(a,e,t,s){Object.assign(e.defaults,{draggable:">1",dragThreshold:3});var i=e.prototype;function n(){return{x:a.pageXOffset,y:a.pageYOffset}}return Object.assign(i,t.prototype),i.touchActionValue="",e.create.drag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("pointerDown",this.handlePointerDone),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.on("staticClick",this.handleStaticClick)},i.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},i.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},i.updateDraggable=function(){">1"===this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.element.classList.toggle("is-draggable",this.isDraggable)},i._uiChangeDrag=function(){delete this.isFreeScrolling},i.handlePointerDown=function(e){var t,i,r;this.isDraggable&&(t="touchstart"===e.type,i="touch"===e.pointerType,r=e.target.matches("input, textarea, select"),t||i||r||e.preventDefault(),r||this.focus(),document.activeElement!==this.element&&document.activeElement.blur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=n(),a.addEventListener("scroll",this)),this.bindActivePointerEvents(e)},i.hasDragStarted=function(e){return Math.abs(e.x)>this.options.dragThreshold},i.handlePointerUp=function(){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down")},i.handlePointerDone=function(){a.removeEventListener("scroll",this),delete this.pointerDownScroll},i.handleDragStart=function(){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),a.removeEventListener("scroll",this))},i.handleDragMove=function(e,t,i){this.isDraggable&&(e.preventDefault(),this.previousDragX=this.dragX,e=this.options.rightToLeft?-1:1,this.isWrapping&&(i.x%=this.slideableWidth),i=this.dragStartPosition+i.x*e,this.isWrapping||(i=(i=(e=Math.max(-this.slides[0].target,this.dragStartPosition))<i?.5*(i+e):i)<(e=Math.min(-this.getLastSlide().target,this.dragStartPosition))?.5*(i+e):i),this.dragX=i,this.dragMoveTime=new Date)},i.handleDragEnd=function(){var e,t,i;this.isDraggable&&((e=this.options.freeScroll)&&(this.isFreeScrolling=!0),t=this.dragEndRestingSelect(),e&&!this.isWrapping?(i=this.getRestingPosition(),this.isFreeScrolling=-i>this.slides[0].target&&-i<this.getLastSlide().target):e||t!==this.selectedIndex||(t+=this.dragEndBoostSelect()),delete this.previousDragX,this.isDragSelect=this.isWrapping,this.select(t),delete this.isDragSelect)},i.dragEndRestingSelect=function(){var e=this.getRestingPosition(),t=Math.abs(this.getSlideDistance(-e,this.selectedIndex)),i=this._getClosestResting(e,t,1),e=this._getClosestResting(e,t,-1);return(i.distance<e.distance?i:e).index},i._getClosestResting=function(e,t,i){for(var r=this.selectedIndex,a=1/0,s=this.options.contain&&!this.isWrapping?function(e,t){return e<=t}:function(e,t){return e<t};s(t,a)&&(a=t,null!==(t=this.getSlideDistance(-e,r+=i)));)t=Math.abs(t);return{distance:a,index:r-i}},i.getSlideDistance=function(e,t){var i=this.slides.length,r=this.options.wrapAround&&1<i,a=r?s.modulo(t,i):t,a=this.slides[a];return a?(r=r?this.slideableWidth*Math.floor(t/i):0,e-(a.target+r)):null},i.dragEndBoostSelect=function(){var e,t;return void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime?0:(e=this.getSlideDistance(-this.dragX,this.selectedIndex),t=this.previousDragX-this.dragX,0<e&&0<t?1:e<0&&t<0?-1:0)},i.onscroll=function(){var e=n(),t=this.pointerDownScroll.x-e.x,e=this.pointerDownScroll.y-e.y;(3<Math.abs(t)||3<Math.abs(e))&&this.pointerDone()},e},"object"==_typeof(t)&&t.exports?t.exports=a(r,e("./core"),e("unidragger"),e("fizzy-ui-utils")):r.Flickity=a(r,r.Flickity,r.Unidragger,r.fizzyUIUtils)},{"./core":6,"fizzy-ui-utils":2,unidragger:21}],8:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(e,t){return e.create.imagesLoaded=function(){this.on("activate",this.imagesLoaded)},e.prototype.imagesLoaded=function(){var i=this;this.options.imagesLoaded&&t(this.slider).on("progress",function(e,t){t=i.getParentCell(t.img);i.cellSizeChange(t&&t.element),i.options.freeScroll||i.positionSliderAtSelected()})},e},"object"==_typeof(t)&&t.exports?t.exports=a(e("./core"),e("imagesloaded")):a(r.Flickity,r.imagesLoaded)},{"./core":6,imagesloaded:16}],9:[function(e,t,i){var r;"object"==_typeof(t)&&t.exports&&(r=e("./core"),e("./drag"),e("./prev-next-button"),e("./page-dots"),e("./player"),e("./add-remove-cell"),e("./lazyload"),e("./imagesloaded"),t.exports=r)},{"./add-remove-cell":3,"./core":6,"./drag":7,"./imagesloaded":8,"./lazyload":10,"./page-dots":11,"./player":12,"./prev-next-button":13}],10:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(e,t){var a="data-flickity-lazyload",s="".concat(a,"-src"),n="".concat(a,"-srcset"),o="img[".concat(a,"], img[").concat(s,"], ")+"img[".concat(n,"], source[").concat(n,"]"),i=(e.create.lazyLoad=function(){this.on("select",this.lazyLoad),this.handleLazyLoadComplete=this.onLazyLoadComplete.bind(this)},e.prototype);function r(e){if(e.matches("img")){var t=e.getAttribute(a),i=e.getAttribute(s),r=e.getAttribute(n);if(t||i||r)return e}return _toConsumableArray(e.querySelectorAll(o))}function l(e,t){this.img=e,this.onComplete=t,this.load()}return i.lazyLoad=function(){var t=this,e=this.options.lazyLoad;e&&this.getAdjacentCellElements("number"==typeof e?e:0).map(r).flat().forEach(function(e){return new l(e,t.handleLazyLoadComplete)})},i.onLazyLoadComplete=function(e,t){e=this.getParentCell(e),e=e&&e.element;this.cellSizeChange(e),this.dispatchEvent("lazyLoad",t,e)},l.prototype.handleEvent=t.handleEvent,l.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var e=this.img.getAttribute(a)||this.img.getAttribute(s),t=this.img.getAttribute(n);this.img.src=e,t&&this.img.setAttribute("srcset",t),this.img.removeAttribute(a),this.img.removeAttribute(s),this.img.removeAttribute(n)},l.prototype.onload=function(e){this.complete(e,"flickity-lazyloaded")},l.prototype.onerror=function(e){this.complete(e,"flickity-lazyerror")},l.prototype.complete=function(e,t){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this),(this.img.parentNode.matches("picture")?this.img.parentNode:this.img).classList.add(t),this.onComplete(this.img,e)},e.LazyLoader=l,e},"object"==_typeof(t)&&t.exports?t.exports=a(e("./core"),e("fizzy-ui-utils")):a(r.Flickity,r.fizzyUIUtils)},{"./core":6,"fizzy-ui-utils":2}],11:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(e,i){function t(){this.holder=document.createElement("div"),this.holder.className="flickity-page-dots",this.dots=[]}t.prototype.setDots=function(e){e-=this.dots.length;0<e?this.addDots(e):e<0&&this.removeDots(-e)},t.prototype.addDots=function(e){var t,r=this,e=new Array(e).fill().map(function(e,t){var i=document.createElement("button"),t=(i.setAttribute("type","button"),t+1+r.dots.length);return i.className="flickity-page-dot",i.textContent="View slide ".concat(t),i});(t=this.holder).append.apply(t,_toConsumableArray(e)),this.dots=this.dots.concat(e)},t.prototype.removeDots=function(e){this.dots.splice(this.dots.length-e,e).forEach(function(e){return e.remove()})},t.prototype.updateSelected=function(e){this.selectedDot&&(this.selectedDot.classList.remove("is-selected"),this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[e],this.selectedDot.classList.add("is-selected"),this.selectedDot.setAttribute("aria-current","step"))},e.PageDots=t,Object.assign(e.defaults,{pageDots:!0}),e.create.pageDots=function(){this.options.pageDots&&(this.pageDots=new t,this.handlePageDotsClick=this.onPageDotsClick.bind(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))};var r=e.prototype;return r.activatePageDots=function(){var e;this.pageDots.setDots(this.slides.length),(e=this.focusableElems).push.apply(e,_toConsumableArray(this.pageDots.dots)),this.pageDots.holder.addEventListener("click",this.handlePageDotsClick),this.element.append(this.pageDots.holder)},r.onPageDotsClick=function(e){e=this.pageDots.dots.indexOf(e.target);-1!==e&&(this.uiChange(),this.select(e))},r.updateSelectedPageDots=function(){this.pageDots.updateSelected(this.selectedIndex)},r.updatePageDots=function(){var e,t=this;this.pageDots.dots.forEach(function(e){i.removeFrom(t.focusableElems,e)}),this.pageDots.setDots(this.slides.length),(e=this.focusableElems).push.apply(e,_toConsumableArray(this.pageDots.dots))},r.deactivatePageDots=function(){this.pageDots.holder.remove(),this.pageDots.holder.removeEventListener("click",this.handlePageDotsClick)},e.PageDots=t,e},"object"==_typeof(t)&&t.exports?t.exports=a(e("./core"),e("fizzy-ui-utils")):a(r.Flickity,r.fizzyUIUtils)},{"./core":6,"fizzy-ui-utils":2}],12:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(e){function t(e,t){this.autoPlay=e,this.onTick=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}t.prototype.play=function(){"playing"!==this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},t.prototype.tick=function(){var e,t=this;"playing"===this.state&&(e="number"==typeof this.autoPlay?this.autoPlay:3e3,this.clear(),this.timeout=setTimeout(function(){t.onTick(),t.tick()},e))},t.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},t.prototype.clear=function(){clearTimeout(this.timeout)},t.prototype.pause=function(){"playing"===this.state&&(this.state="paused",this.clear())},t.prototype.unpause=function(){"paused"===this.state&&this.play()},t.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},t.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},Object.assign(e.defaults,{pauseAutoPlayOnHover:!0}),e.create.player=function(){var e=this;this.player=new t(this.options.autoPlay,function(){e.next(!0)}),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)};var i=e.prototype;return i.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},i.playPlayer=function(){this.player.play()},i.stopPlayer=function(){this.player.stop()},i.pausePlayer=function(){this.player.pause()},i.unpausePlayer=function(){this.player.unpause()},i.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},i.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},i.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},e.Player=t,e},"object"==_typeof(t)&&t.exports?t.exports=a(e("./core")):a(r.Flickity)},{"./core":6}],13:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(e){var c="http://www.w3.org/2000/svg";function a(e,t,i){this.increment=e,this.direction=t,this.isPrevious="previous"===e,this.isLeft="left"===t,this._create(i)}a.prototype._create=function(e){var t=this.element=document.createElement("button"),i=(t.className="flickity-button flickity-prev-next-button ".concat(this.increment),this.isPrevious?"Previous":"Next"),i=(t.setAttribute("type","button"),t.setAttribute("aria-label",i),this.disable(),this.createSVG(i,e));t.append(i)},a.prototype.createSVG=function(e,t){var i,r,a,s,n=document.createElementNS(c,"svg"),o=(n.setAttribute("class","flickity-button-icon"),n.setAttribute("viewBox","0 0 100 100"),document.createElementNS(c,"title")),e=(o.append(e),document.createElementNS(c,"path")),l="string"==typeof(t=t)?t:(l=t.x0,i=t.x1,r=t.x2,a=t.x3,s=t.y1,t=t.y2,"M ".concat(l,", 50\n    L ").concat(i,", ").concat(s+50,"\n    L ").concat(r,", ").concat(t+50,"\n    L ").concat(a,", 50\n    L ").concat(r,", ").concat(50-t,"\n    L ").concat(i,", ").concat(50-s,"\n    Z"));return e.setAttribute("d",l),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180)"),n.append(o,e),n},a.prototype.enable=function(){this.element.removeAttribute("disabled")},a.prototype.disable=function(){this.element.setAttribute("disabled",!0)},Object.assign(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.create.prevNextButtons=function(){var e,t,i,r=this;this.options.prevNextButtons&&(e=(t=this.options).rightToLeft,t=t.arrowShape,i=e?"left":"right",this.prevButton=new a("previous",e?"right":"left",t),this.nextButton=new a("next",i,t),this.focusableElems.push(this.prevButton.element),this.focusableElems.push(this.nextButton.element),this.handlePrevButtonClick=function(){r.uiChange(),r.previous()},this.handleNextButtonClick=function(){r.uiChange(),r.next()},this.on("activate",this.activatePrevNextButtons),this.on("select",this.updatePrevNextButtons))};var t=e.prototype;return t.updatePrevNextButtons=function(){var e=this.slides.length?this.slides.length-1:0;this.updatePrevNextButton(this.prevButton,0),this.updatePrevNextButton(this.nextButton,e)},t.updatePrevNextButton=function(e,t){this.isWrapping&&1<this.slides.length?e.enable():(e[(t=this.selectedIndex!==t)?"enable":"disable"](),t||document.activeElement!==e.element||this.focus())},t.activatePrevNextButtons=function(){this.prevButton.element.addEventListener("click",this.handlePrevButtonClick),this.nextButton.element.addEventListener("click",this.handleNextButtonClick),this.element.append(this.prevButton.element,this.nextButton.element),this.on("deactivate",this.deactivatePrevNextButtons)},t.deactivatePrevNextButtons=function(){this.prevButton.element.remove(),this.nextButton.element.remove(),this.prevButton.element.removeEventListener("click",this.handlePrevButtonClick),this.nextButton.element.removeEventListener("click",this.handleNextButtonClick),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=a,e},"object"==_typeof(t)&&t.exports?t.exports=a(e("./core")):a(r.Flickity)},{"./core":6}],14:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(){function e(e,t,i){this.beginMargin=e,this.endMargin=t,this.cellAlign=i,this.cells=[],this.outerWidth=0,this.height=0}var t=e.prototype;return t.addCell=function(e){this.cells.push(e),this.outerWidth+=e.size.outerWidth,this.height=Math.max(e.size.outerHeight,this.height),1===this.cells.length&&(this.x=e.x,this.firstMargin=e.size[this.beginMargin])},t.updateTarget=function(){var e=this.getLastCell(),e=e?e.size[this.endMargin]:0,e=this.outerWidth-(this.firstMargin+e);this.target=this.x+this.firstMargin+e*this.cellAlign},t.getLastCell=function(){return this.cells[this.cells.length-1]},t.select=function(){this.cells.forEach(function(e){return e.select()})},t.unselect=function(){this.cells.forEach(function(e){return e.unselect()})},t.getCellElements=function(){return this.cells.map(function(e){return e.element})},e},"object"==_typeof(t)&&t.exports?t.exports=a():(r.Flickity=r.Flickity||{},r.Flickity.Slide=a())},{}],15:[function(e,t,i){var r,a;r=window,a=function(){function p(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];u.length;return function(e){var i,t,r,a,s,n,o,l,c,d;if((e="string"==typeof e?document.querySelector(e):e)&&"object"==_typeof(e)&&e.nodeType)return"none"==(i=getComputedStyle(e)).display?(t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},u.forEach(function(e){t[e]=0}),t):((r={}).width=e.offsetWidth,r.height=e.offsetHeight,e=r.isBorderBox="border-box"==i.boxSizing,u.forEach(function(e){var t=i[e],t=parseFloat(t);r[e]=isNaN(t)?0:t}),a=r.paddingLeft+r.paddingRight,s=r.paddingTop+r.paddingBottom,n=r.marginLeft+r.marginRight,o=r.marginTop+r.marginBottom,l=r.borderLeftWidth+r.borderRightWidth,c=r.borderTopWidth+r.borderBottomWidth,!1!==(d=p(i.width))&&(r.width=d+(e?0:a+l)),!1!==(d=p(i.height))&&(r.height=d+(e?0:s+c)),r.innerWidth=r.width-(a+l),r.innerHeight=r.height-(s+c),r.outerWidth=r.width+n,r.outerHeight=r.height+o,r)}},"object"==_typeof(t)&&t.exports?t.exports=a():r.getSize=a()},{}],16:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(t,e){var s=t.jQuery,n=t.console;function o(e,t,i){if(!(this instanceof o))return new o(e,t,i);var r,a=e;(a="string"==typeof e?document.querySelectorAll(e):a)?(this.elements=(r=a,Array.isArray(r)?r:"object"==_typeof(r)&&"number"==typeof r.length?_toConsumableArray(r):[r]),this.options={},"function"==typeof t?i=t:Object.assign(this.options,t),i&&this.on("always",i),this.getImages(),s&&(this.jqDeferred=new s.Deferred),setTimeout(this.check.bind(this))):n.error("Bad element for imagesLoaded ".concat(a||e))}(o.prototype=Object.create(e.prototype)).getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};var l=[1,9,11],a=(o.prototype.addElementImages=function(e){"IMG"===e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&l.includes(t)){var i,r=_createForOfIteratorHelper(e.querySelectorAll("img"));try{for(r.s();!(i=r.n()).done;){var a=i.value;this.addImage(a)}}catch(e){r.e(e)}finally{r.f()}if("string"==typeof this.options.background){var s,n=_createForOfIteratorHelper(e.querySelectorAll(this.options.background));try{for(n.s();!(s=n.n()).done;){var o=s.value;this.addElementBackgroundImages(o)}}catch(e){n.e(e)}finally{n.f()}}}},/url\((['"])?(.*?)\1\)/gi);function i(e){this.img=e}function r(e,t){this.url=e,this.element=t,this.img=new Image}return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=a.exec(t.backgroundImage);null!==i;){var r=i&&i[2];r&&this.addBackground(r,e),i=a.exec(t.backgroundImage)}},o.prototype.addImage=function(e){e=new i(e);this.images.push(e)},o.prototype.addBackground=function(e,t){e=new r(e,t);this.images.push(e)},o.prototype.check=function(){var t,r=this;this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?(t=function(e,t,i){setTimeout(function(){r.progress(e,t,i)})},this.images.forEach(function(e){e.once("progress",t),e.check()})):this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&n&&n.log("progress: ".concat(i),e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(i.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src)},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e;e=this.img.parentNode,e="PICTURE"===e.nodeName?e:this.img;this.emitEvent("progress",[this,e,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(r.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(o.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((s=e).fn.imagesLoaded=function(e,t){return new o(this,e,t).jqDeferred.promise(s(this))})})(),o},"object"==_typeof(t)&&t.exports?t.exports=a(r,e("ev-emitter")):r.imagesLoaded=a(r,r.EvEmitter)},{"ev-emitter":1}],17:[function(e,t,i){var r="undefined"!=typeof window?window:{},a=function(r,u,s){var h,f,e,m,j,n,v,t,d,N,o,B,F,i,W,l,p,g,R,y,b,w,H,E,G,q,X,V,a,c,Y,U,x,S,$,C,Q,K,Z,T,M,z,P,A,J,ee,te,ie,_,re,ae,se,ne,L,k,I,oe,D,le,ce,de,O,pe,ue,he,fe,me,ve,ge={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in f=r.lazySizesConfig||r.lazysizesConfig||{},ge)e in f||(f[e]=ge[e]);return u&&u.getElementsByClassName?(m=u.documentElement,j=r.HTMLPictureElement,v="getAttribute",t=r[n="addEventListener"].bind(r),d=r.setTimeout,N=r.requestAnimationFrame||d,o=r.requestIdleCallback,B=/^picture$/i,F=["load","error","lazyincluded","_lazyloaded"],i={},W=Array.prototype.forEach,l=function(e,t){return i[t]||(i[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),i[t].test(e[v]("class")||"")&&i[t]},p=function(e,t){l(e,t)||e.setAttribute("class",(e[v]("class")||"").trim()+" "+t)},g=function(e,t){(t=l(e,t))&&e.setAttribute("class",(e[v]("class")||"").replace(t," "))},R=function e(t,i,r){var a=r?n:"removeEventListener";r&&e(t,i),F.forEach(function(e){t[a](e,i)})},y=function(e,t,i,r,a){var s=u.createEvent("Event");return(i=i||{}).instance=h,s.initEvent(t,!r,!a),s.detail=i,e.dispatchEvent(s),s},b=function(e,t){var i;!j&&(i=r.picturefill||f.pf)?(t&&t.src&&!e[v]("srcset")&&e.setAttribute("srcset",t.src),i({reevaluate:!0,elements:[e]})):t&&t.src&&(e.src=t.src)},w=function(e,t){return(getComputedStyle(e,null)||{})[t]},H=function(e,t,i){for(i=i||e.offsetWidth;i<f.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},V=[],a=X=[],be._lsFlush=ye,E=be,c=function(i,e){return e?function(){E(i)}:function(){var e=this,t=arguments;E(function(){i.apply(e,t)})}},Y=function(e){function t(){var e=s.now()-r;e<99?d(t,99-e):(o||a)(a)}var i,r,a=function(){i=null,e()};return function(){r=s.now(),i=i||d(t,99)}},ae=/^img$/i,se=/^iframe$/i,ne="onscroll"in r&&!/(gle|ing)bot/.test(navigator.userAgent),I=-1,oe=function(e){return(A=null==A?"hidden"==w(u.body,"visibility"):A)||!("hidden"==w(e.parentNode,"visibility")&&"hidden"==w(e,"visibility"))},J=Ee,te=k=L=0,ie=f.throttleDelay,_=f.ricTimeout,re=o&&49<_?function(){o(xe,{timeout:_}),_!==f.ricTimeout&&(_=f.ricTimeout)}:c(function(){d(xe)},!0),le=c(Se),ce=function(e){le({target:e.target})},de=c(function(t,e,i,r,a){var s,n,o,l,c;(n=y(t,"lazybeforeunveil",e)).defaultPrevented||(r&&(i?p(t,f.autosizesClass):t.setAttribute("sizes",r)),i=t[v](f.srcsetAttr),r=t[v](f.srcAttr),a&&(s=(l=t.parentNode)&&B.test(l.nodeName||"")),o=e.firesLoad||"src"in t&&(i||r||s),n={target:t},p(t,f.loadingClass),o&&(clearTimeout($),$=d(we,2500),R(t,ce,!0)),s&&W.call(l.getElementsByTagName("source"),Ce),i?t.setAttribute("srcset",i):r&&!s&&(se.test(t.nodeName)?(e=r,0==(c=(l=t).getAttribute("data-load-mode")||f.iframeLoadMode)?l.contentWindow.location.replace(e):1==c&&(l.src=e)):t.src=r),a&&(i||s)&&b(t,{src:r})),t._lazyRace&&delete t._lazyRace,g(t,f.lazyClass),E(function(){var e=t.complete&&1<t.naturalWidth;o&&!e||(e&&p(t,f.fastLoadedClass),Se(n),t._lazyCache=!0,d(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&k--},!0)}),pe=Y(function(){f.loadMode=3,D()}),U={_:function(){Q=s.now(),h.elements=u.getElementsByClassName(f.lazyClass),x=u.getElementsByClassName(f.lazyClass+" "+f.preloadClass),t("scroll",D,!0),t("resize",D,!0),t("pageshow",function(e){var t;e.persisted&&(t=u.querySelectorAll("."+f.loadingClass)).length&&t.forEach&&N(function(){t.forEach(function(e){e.complete&&O(e)})})}),r.MutationObserver?new MutationObserver(D).observe(m,{childList:!0,subtree:!0,attributes:!0}):(m[n]("DOMNodeInserted",D,!0),m[n]("DOMAttrModified",D,!0),setInterval(D,999)),t("hashchange",D,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){u[n](e,D,!0)}),/d$|^c/.test(u.readyState)?Me():(t("load",Me),u[n]("DOMContentLoaded",D),d(Me,2e4)),h.elements.length?(Ee(),E._lsFlush()):D()},checkElems:D=function(e){var t;(e=!0===e)&&(_=33),ee||(ee=!0,(t=ie-(s.now()-te))<0&&(t=0),e||t<9?re():d(re,t))},unveil:O=function(e){var t,i,r,a;e._lazyRace||!(!(a="auto"==(r=(i=ae.test(e.nodeName))&&(e[v](f.sizesAttr)||e[v]("sizes"))))&&S||!i||!e[v]("src")&&!e.srcset||e.complete||l(e,f.errorClass))&&l(e,f.lazyClass)||(t=y(e,"lazyunveilread").detail,a&&ue.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,k++,de(e,t,a,r,i))},_aLSL:Te},fe=c(function(e,t,i,r){var a,s,n;if(e._lazysizesWidth=r,e.setAttribute("sizes",r+="px"),B.test(t.nodeName||""))for(s=0,n=(a=t.getElementsByTagName("source")).length;s<n;s++)a[s].setAttribute("sizes",r);i.detail.dataAttr||b(e,i.detail)}),ue={_:function(){he=u.getElementsByClassName(f.autosizesClass),t("resize",me)},checkElems:me=Y(function(){var e,t=he.length;if(t)for(e=0;e<t;e++)ze(he[e])}),updateElem:ze},ve=function e(){!e.i&&u.getElementsByClassName&&(e.i=!0,ue._(),U._())},d(function(){f.init&&ve()}),h={cfg:f,autoSizer:ue,loader:U,init:ve,uP:b,aC:p,rC:g,hC:l,fire:y,gW:H,rAF:E}):{init:function(){},cfg:f,noSupport:!0};function ye(){var e=a;for(a=X.length?V:X,q=!(G=!0);e.length;)e.shift()();G=!1}function be(e,t){G&&!t?e.apply(this,arguments):(a.push(e),q||(q=!0,(u.hidden?d:N)(ye)))}function we(e){k--,e&&!(k<0)&&e.target||(k=0)}function Ee(){var e,t,i,r,a,s,n,o,l,c,d,p=h.elements;if((C=f.loadMode)&&k<8&&(e=p.length)){for(t=0,I++;t<e;t++)if(p[t]&&!p[t]._lazyRace)if(!ne||h.prematureUnveil&&h.prematureUnveil(p[t]))O(p[t]);else if((n=p[t][v]("data-expand"))&&(a=+n)||(a=L),l||(l=!f.expand||f.expand<1?500<m.clientHeight&&500<m.clientWidth?500:370:f.expand,c=(h._defEx=l)*f.expFactor,d=f.hFac,A=null,L<c&&k<1&&2<I&&2<C&&!u.hidden?(L=c,I=0):L=1<C&&1<I&&k<6?l:0),o!==a&&(K=innerWidth+a*d,Z=innerHeight+a,s=-1*a,o=a),c=p[t].getBoundingClientRect(),(P=c.bottom)>=s&&(T=c.top)<=Z&&(z=c.right)>=s*d&&(M=c.left)<=K&&(P||z||M||T)&&(f.loadHidden||oe(p[t]))&&(S&&k<3&&!n&&(C<3||I<4)||function(e,t){var i,r=e,a=oe(e);for(T-=t,P+=t,M-=t,z+=t;a&&(r=r.offsetParent)&&r!=u.body&&r!=m;)(a=0<(w(r,"opacity")||1))&&"visible"!=w(r,"overflow")&&(i=r.getBoundingClientRect(),a=z>i.left&&M<i.right&&P>i.top-1&&T<i.bottom+1);return a}(p[t],a))){if(O(p[t]),r=!0,9<k)break}else!r&&S&&!i&&k<4&&I<4&&2<C&&(x[0]||f.preloadAfterLoad)&&(x[0]||!n&&(P||z||M||T||"auto"!=p[t][v](f.sizesAttr)))&&(i=x[0]||p[t]);i&&!r&&O(i)}}function xe(){ee=!1,te=s.now(),J()}function Se(e){var t=e.target;t._lazyCache?delete t._lazyCache:(we(e),p(t,f.loadedClass),g(t,f.loadingClass),R(t,ce),y(t,"lazyloaded"))}function Ce(e){var t,i=e[v](f.srcsetAttr);(t=f.customMedia[e[v]("data-media")||e[v]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i)}function Te(){3==f.loadMode&&(f.loadMode=2),pe()}function Me(){S||(s.now()-Q<999?d(Me,999):(S=!0,f.loadMode=3,D(),t("scroll",Te,!0)))}function ze(e,t,i){var r=e.parentNode;r&&(i=H(e,r,i),(t=y(e,"lazybeforesizes",{width:i,dataAttr:!!t})).defaultPrevented||(i=t.detail.width)&&i!==e._lazysizesWidth&&fe(e,r,t,i))}};a=a(r,r.document,Date),r.lazySizes=a,"object"==_typeof(t)&&t.exports&&(t.exports=a)},{}],18:[function(e,t,i){function r(){s(a.lazySizes),a.removeEventListener("lazyunveilread",r,!0)}var a,s;a=window,s=(s=function(e,l,c){var d,p,u,h,r,a,s,f,m;e.addEventListener&&(d=c.cfg,p=/\s+/g,u=/\s*\|\s+|\s+\|\s*/g,h=/^(.+?)(?:\s+\[\s*(.+?)\s*\])(?:\s+\[\s*(.+?)\s*\])?$/,r=/^\s*\(*\s*type\s*:\s*(.+?)\s*\)*\s*$/,a=/\(|\)|'/,s={contain:1,cover:1},f=function(e,t){var i;t&&((i=t.match(r))&&i[1]?e.setAttribute("type",i[1]):e.setAttribute("media",d.customMedia[t]||t))},m=function(e){var t,i,r;e.target._lazybgset&&(t=(e=e.target)._lazybgset,(r=e.currentSrc||e.src)&&(i=a.test(r)?JSON.stringify(r):r,(r=c.fire(t,"bgsetproxy",{src:r,useSrc:i,fullSrc:null})).defaultPrevented||(t.style.backgroundImage=r.detail.fullSrc||"url("+r.detail.useSrc+")")),e._lazybgsetLoading)&&(c.fire(t,"_lazyloaded",{},!1,!0),delete e._lazybgsetLoading)},addEventListener("lazybeforeunveil",function(e){var t,r,a,i,s,n,o;!e.defaultPrevented&&(t=e.target.getAttribute("data-bgset"))&&(n=e.target,(o=l.createElement("img")).alt="",o._lazybgsetLoading=!0,e.detail.firesLoad=!0,e=t,t=n,n=o,r=l.createElement("picture"),a=t.getAttribute(d.sizesAttr),i=t.getAttribute("data-ratio"),s=t.getAttribute("data-optimumx"),t._lazybgset&&t._lazybgset.parentNode==t&&t.removeChild(t._lazybgset),Object.defineProperty(n,"_lazybgset",{value:t,writable:!0}),Object.defineProperty(t,"_lazybgset",{value:r,writable:!0}),e=e.replace(p," ").split(u),r.style.display="none",n.className=d.lazyClass,1==e.length&&(a=a||"auto"),e.forEach(function(e){var t,i=l.createElement("source");a&&"auto"!=a&&i.setAttribute("sizes",a),(t=e.match(h))?(i.setAttribute(d.srcsetAttr,t[1]),f(i,t[2]),f(i,t[3])):i.setAttribute(d.srcsetAttr,e),r.appendChild(i)}),a&&(n.setAttribute(d.sizesAttr,a),t.removeAttribute(d.sizesAttr),t.removeAttribute("sizes")),s&&n.setAttribute("data-optimumx",s),i&&n.setAttribute("data-ratio",i),r.appendChild(n),t.appendChild(r),setTimeout(function(){c.loader.unveil(o),c.rAF(function(){c.fire(o,"_lazyloaded",{},!0,!0),o.complete&&m({target:o})})}))}),l.addEventListener("load",m,!0),e.addEventListener("lazybeforesizes",function(e){var t,i,r;e.detail.instance==c&&e.target._lazybgset&&e.detail.dataAttr&&(i=e.target._lazybgset,i=i,r=(getComputedStyle(i)||{getPropertyValue:function(){}}).getPropertyValue("background-size"),t=r=!s[r]&&s[i.style.backgroundSize]?i.style.backgroundSize:r,s[t])&&(e.target._lazysizesParentFit=t,c.rAF(function(){e.target.setAttribute("data-parent-fit",t),e.target._lazysizesParentFit&&delete e.target._lazysizesParentFit}))},!0),l.documentElement.addEventListener("lazybeforesizes",function(e){var t;!e.defaultPrevented&&e.target._lazybgset&&e.detail.instance==c&&(e.detail.width=(e=e.target._lazybgset,t=c.gW(e,e.parentNode),(!e._lazysizesWidth||t>e._lazysizesWidth)&&(e._lazysizesWidth=t),e._lazysizesWidth))}))}).bind(null,a,a.document),"object"==_typeof(t)&&t.exports?s(e("lazysizes")):"function"==typeof define&&define.amd?define(["lazysizes"],s):a.lazySizes?r():a.addEventListener("lazyunveilread",r,!0)},{lazysizes:17}],19:[function(e,t,i){var r,a,s;r="undefined"!=typeof window?window:0,a=function(l,e,i){var c,n,o,d,p,u;l.addEventListener&&(c=/\s+(\d+)(w|h)\s+(\d+)(w|h)/,n=/parent-fit["']*\s*:\s*["']*(contain|cover|width)/,o=/parent-container["']*\s*:\s*["']*(.+?)(?=(\s|$|,|'|"|;))/,d=/^picture$/i,p=i.cfg,u={getParent:function(e,t){var i=e,r=e.parentNode;return t&&"prev"!=t||!r||!d.test(r.nodeName||"")||(r=r.parentNode),i="self"!=t?"prev"==t?e.previousElementSibling:t&&(r.closest||l.jQuery)&&(r.closest?r.closest(t):jQuery(r).closest(t)[0])||r:i},getFit:function(e){var t,i,r=getComputedStyle(e,null)||{},a=r.content||r.fontFamily,s={fit:e._lazysizesParentFit||e.getAttribute("data-parent-fit")};return!s.fit&&a&&(t=a.match(n))&&(s.fit=t[1]),s.fit?(!(i=e._lazysizesParentContainer||e.getAttribute("data-parent-container"))&&a&&(t=a.match(o))&&(i=t[1]),s.parent=u.getParent(e,i)):s.fit=r.objectFit,s},getImageRatio:function(e){for(var t,i,r,a,s=e.parentNode,n=s&&d.test(s.nodeName||"")?s.querySelectorAll("source, img"):[e],o=0;o<n.length;o++)if(a=(e=n[o]).getAttribute(p.srcsetAttr)||e.getAttribute("srcset")||e.getAttribute("data-pfsrcset")||e.getAttribute("data-risrcset")||"",i=e._lsMedia||e.getAttribute("media"),i=p.customMedia[e.getAttribute("data-media")||i]||i,a&&(!i||(l.matchMedia&&matchMedia(i)||{}).matches)){(t=parseFloat(e.getAttribute("data-aspectratio")))||(a=(i=a.match(c))?"w"==i[2]?(r=i[1],i[3]):(r=i[3],i[1]):(r=e.getAttribute("width"),e.getAttribute("height")),t=r/a);break}return t},calculateSize:function(e,t){var i,r=this.getFit(e),a=r.fit,r=r.parent;return"width"==a||("contain"==a||"cover"==a)&&(i=this.getImageRatio(e))?(r?t=r.clientWidth:r=e,e=t,"width"==a?e=t:(r=t/r.clientHeight)&&("cover"==a&&r<i||"contain"==a&&i<r)&&(e=t*(i/r)),e):t}},i.parentFit=u,e.addEventListener("lazybeforesizes",function(e){var t;e.defaultPrevented||e.detail.instance!=i||(t=e.target,e.detail.width=u.calculateSize(t,e.detail.width))}))},r&&(s=function e(){a(r.lazySizes),r.removeEventListener("lazyunveilread",e,!0)},a=a.bind(null,r,r.document),"object"==_typeof(t)&&t.exports?a(e("lazysizes")):"function"==typeof define&&define.amd?define(["lazysizes"],a):r.lazySizes?s():r.addEventListener("lazyunveilread",s,!0))},{lazysizes:17}],20:[function(e,t,b){function w(e){return null!==e&&"object"===_typeof(e)&&"constructor"in e&&e.constructor===Object}function r(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Object.keys(i).forEach(function(e){void 0===t[e]?t[e]=i[e]:w(i[e])&&w(t[e])&&0<Object.keys(i[e]).length&&r(t[e],i[e])})}var S={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function L(){var e="undefined"!=typeof document?document:{};return r(e,S),e}var i,p,n,N={document:S,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function k(){var e="undefined"!=typeof window?window:{};return r(e,N),e}function C(e){return(e=void 0===e?"":e).trim().split(" ").filter(function(e){return!!e.trim()})}function T(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function y(){return Date.now()}function I(e,t){void 0===t&&(t="x");var i,r,a,s,n=k(),o=(e=e,o=k(),s=(s=!(s=o.getComputedStyle?o.getComputedStyle(e,null):s)&&e.currentStyle?e.currentStyle:s)||e.style);return n.WebKitCSSMatrix?(6<(r=o.transform||o.webkitTransform).split(",").length&&(r=r.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new n.WebKitCSSMatrix("none"===r?"":r)):i=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=n.WebKitCSSMatrix?a.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),(r="y"===t?n.WebKitCSSMatrix?a.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5]):r)||0}function h(e){return"object"===_typeof(e)&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function u(e){for(var t,i=Object(arguments.length<=0?void 0:e),r=["__proto__","constructor","prototype"],a=1;a<arguments.length;a+=1){var s=a<0||arguments.length<=a?void 0:arguments[a];if(null!=s&&(t=s,!("undefined"!=typeof window&&void 0!==window.HTMLElement?t instanceof HTMLElement:t&&(1===t.nodeType||11===t.nodeType))))for(var n=Object.keys(Object(s)).filter(function(e){return r.indexOf(e)<0}),o=0,l=n.length;o<l;o+=1){var c=n[o],d=Object.getOwnPropertyDescriptor(s,c);void 0!==d&&d.enumerable&&(h(i[c])&&h(s[c])?s[c].__swiper__?i[c]=s[c]:u(i[c],s[c]):h(i[c])||!h(s[c])||(i[c]={},s[c].__swiper__)?i[c]=s[c]:u(i[c],s[c]))}}return i}function K(e,t,i){e.style.setProperty(t,i)}function B(e){function r(e,t){return"next"===i&&t<=e||"prev"===i&&e<=t}var a,s=e.swiper,n=e.targetPosition,o=e.side,l=k(),c=-s.translate,d=null,p=s.params.speed,i=(s.wrapperEl.style.scrollSnapType="none",l.cancelAnimationFrame(s.cssModeFrameID),c<n?"next":"prev");(function e(){a=(new Date).getTime(),null===d&&(d=a);var t=Math.max(Math.min((a-d)/p,1),0),t=.5-Math.cos(t*Math.PI)/2,i=c+t*(n-c);r(i,n)&&(i=n),s.wrapperEl.scrollTo(_defineProperty({},o,i)),r(i,n)?(s.wrapperEl.style.overflow="hidden",s.wrapperEl.style.scrollSnapType="",setTimeout(function(){s.wrapperEl.style.overflow="",s.wrapperEl.scrollTo(_defineProperty({},o,i))}),l.cancelAnimationFrame(s.cssModeFrameID)):s.cssModeFrameID=l.requestAnimationFrame(e)})()}function a(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function Z(e,t){return void 0===t&&(t=""),_toConsumableArray(e.children).filter(function(e){return e.matches(t)})}function D(e){try{console.warn(e)}catch(e){}}function M(e,t){void 0===t&&(t=[]);var i,e=document.createElement(e);return(i=e.classList).add.apply(i,_toConsumableArray(Array.isArray(t)?t:C(t))),e}function O(e){var t=k(),i=L(),r=e.getBoundingClientRect(),i=i.body,a=e.clientTop||i.clientTop||0,i=e.clientLeft||i.clientLeft||0,s=e===t?t.scrollY:e.scrollTop,t=e===t?t.scrollX:e.scrollLeft;return{top:r.top+s-a,left:r.left+t-i}}function J(e,t){return k().getComputedStyle(e,null).getPropertyValue(t)}function z(e){var t,i=e;if(i){for(t=0;null!==(i=i.previousSibling);)1===i.nodeType&&(t+=1);return t}}function j(e,t){for(var i=[],r=e.parentElement;r;)t&&!r.matches(t)||i.push(r),r=r.parentElement;return i}function g(i,r){r&&i.addEventListener("transitionend",function e(t){t.target===i&&(r.call(i,t),i.removeEventListener("transitionend",e))})}function ee(e,t,i){var r=k();return i?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function P(e){return(Array.isArray(e)?e:[e]).filter(function(e){return!!e})}function F(){var e,t;return i||(e=k(),t=L(),i={smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}),i}function W(e){var t,i,r,a,s,n,o,l,c,d;return void 0===e&&(e={}),p||(e=(void 0===(e=e)?{}:e).userAgent,t=F(),i=(s=k()).navigator.platform,e=e||s.navigator.userAgent,r={ios:!1,android:!1},a=s.screen.width,s=s.screen.height,n=e.match(/(Android);?[\s\/]+([\d.]+)?/),o=e.match(/(iPad).*OS\s([\d_]+)/),l=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!o&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d="Win32"===i,i="MacIntel"===i,!o&&i&&t.touch&&0<=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(a,"x").concat(s))&&(o=(o=e.match(/(Version)\/([\d.]+)/))||[0,1,"13_0_0"]),n&&!d&&(r.os="android",r.android=!0),(o||c||l)&&(r.os="ios",r.ios=!0),p=r),p}function R(){function e(){var e=t.navigator.userAgent.toLowerCase();return 0<=e.indexOf("safari")&&e.indexOf("chrome")<0&&e.indexOf("android")<0}var t,i,r,a,s;return n||(t=k(),i=W(),r=!1,e()&&(s=String(t.navigator.userAgent)).includes("Version/")&&(a=(s=_slicedToArray(s.split("Version/")[1].split(" ")[0].split(".").map(function(e){return Number(e)}),2))[0],s=s[1],r=a<16||16===a&&s<2),a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),s=e(),n={isSafari:r||s,needPerspectiveFix:r,need3dFix:s||a&&i.ios,isWebView:a}),n}function H(e,t,i){t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)}function f(e,t,i){t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)}function d(i){if(i&&!i.destroyed&&i.params){var e=i.params.lazyPreloadPrevNext,t=i.slides.length;if(t&&e&&!(e<0)){var r,a,e=Math.min(e,t),s="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),n=i.activeIndex;if(i.params.grid&&1<i.params.grid.rows)(a=[(r=n)-e]).push.apply(a,_toConsumableArray(Array.from({length:e}).map(function(e,t){return r+s+t}))),i.slides.forEach(function(e,t){a.includes(e.column)&&G(i,t)});else{var o=n+s-1;if(i.params.rewind||i.params.loop)for(var l=n-e;l<=o+e;l+=1){var c=(l%t+t)%t;(c<n||o<c)&&G(i,c)}else for(var d=Math.max(n-e,0);d<=Math.min(o+e,t-1);d+=1)d!==n&&(o<d||d<n)&&G(i,d)}}}}var s=function(e,t){var i,r;e&&!e.destroyed&&e.params&&(i=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass)))&&(!(r=i.querySelector(".".concat(e.params.lazyPreloaderClass)))&&e.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)):requestAnimationFrame(function(){i.shadowRoot&&(r=i.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)))&&r.remove()})),r)&&r.remove()},G=function(e,t){e.slides[t]&&(e=e.slides[t].querySelector('[loading="lazy"]'))&&e.removeAttribute("loading")};function q(e){var t=e.swiper,i=e.runCallbacks,r=e.direction,e=e.step,a=t.activeIndex,s=t.previousIndex,r=(r=r)||(s<a?"next":a<s?"prev":"reset");t.emit("transition".concat(e)),i&&a!==s&&("reset"===r?t.emit("slideResetTransition".concat(e)):(t.emit("slideChangeTransition".concat(e)),"next"===r?t.emit("slideNextTransition".concat(e)):t.emit("slidePrevTransition".concat(e))))}function X(r,e){return function e(t){var i;return t&&t!==L()&&t!==k()&&((i=(t=t.assignedSlot||t).closest(r))||t.getRootNode)?i||e(t.getRootNode().host):null}(e=void 0===e?this:e)}function V(e,t,i){var r=k(),e=e.params,a=e.edgeSwipeDetection,e=e.edgeSwipeThreshold;return!a||!(i<=e||i>=r.innerWidth-e)||"prevent"===a&&(t.preventDefault(),1)}function Y(){var e,t,i,r,a=this,s=a.params,n=a.el;n&&0===n.offsetWidth||(s.breakpoints&&a.setBreakpoint(),n=a.allowSlideNext,e=a.allowSlidePrev,t=a.snapGrid,i=a.virtual&&a.params.virtual.enabled,a.allowSlideNext=!0,a.allowSlidePrev=!0,a.updateSize(),a.updateSlides(),a.updateSlidesClasses(),r=i&&s.loop,!("auto"===s.slidesPerView||1<s.slidesPerView)||!a.isEnd||a.isBeginning||a.params.centeredSlides||r?a.params.loop&&!i?a.slideToLoop(a.realIndex,0,!1,!0):a.slideTo(a.activeIndex,0,!1,!0):a.slideTo(a.slides.length-1,0,!1,!0),a.autoplay&&a.autoplay.running&&a.autoplay.paused&&(clearTimeout(a.autoplay.resizeTimeout),a.autoplay.resizeTimeout=setTimeout(function(){a.autoplay&&a.autoplay.running&&a.autoplay.paused&&a.autoplay.resume()},500)),a.allowSlidePrev=e,a.allowSlideNext=n,a.params.watchOverflow&&t!==a.snapGrid&&a.checkOverflow())}function U(e,t){var i=L(),r=e.params,a=e.el,s=e.wrapperEl,n=e.device,o=!!r.nested,l="on"===t?"addEventListener":"removeEventListener";a&&"string"!=typeof a&&(i[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),a[l]("touchstart",e.onTouchStart,{passive:!1}),a[l]("pointerdown",e.onTouchStart,{passive:!1}),i[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),i[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),i[l]("touchend",e.onTouchEnd,{passive:!0}),i[l]("pointerup",e.onTouchEnd,{passive:!0}),i[l]("pointercancel",e.onTouchEnd,{passive:!0}),i[l]("touchcancel",e.onTouchEnd,{passive:!0}),i[l]("pointerout",e.onTouchEnd,{passive:!0}),i[l]("pointerleave",e.onTouchEnd,{passive:!0}),i[l]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&a[l]("click",e.onClick,!0),r.cssMode&&s[l]("scroll",e.onScroll),r.updateOnWindowResize?e[t](n.ios||n.android?"resize orientationchange observerUpdate":"resize observerUpdate",Y,!0):e[t]("observerUpdate",Y,!0),a[l]("load",e.onLoad,{capture:!0}))}function $(e,t){return e.grid&&t.grid&&1<t.grid.rows}var Q={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1},te={eventsEmitter:{on:function(e,t,i){var r,a=this;return a.eventsListeners&&!a.destroyed&&"function"==typeof t&&(r=i?"unshift":"push",e.split(" ").forEach(function(e){a.eventsListeners[e]||(a.eventsListeners[e]=[]),a.eventsListeners[e][r](t)})),a},once:function(r,a,e){var s=this;return!s.eventsListeners||s.destroyed||"function"!=typeof a?s:(n.__emitterProxy=a,s.on(r,n,e));function n(){s.off(r,n),n.__emitterProxy&&delete n.__emitterProxy;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.apply(s,t)}},onAny:function(e,t){var i=this;return i.eventsListeners&&!i.destroyed&&"function"==typeof e&&(t=t?"unshift":"push",i.eventsAnyListeners.indexOf(e)<0)&&i.eventsAnyListeners[t](e),i},offAny:function(e){var t=this;return t.eventsListeners&&!t.destroyed&&t.eventsAnyListeners&&0<=(e=t.eventsAnyListeners.indexOf(e))&&t.eventsAnyListeners.splice(e,1),t},off:function(e,r){var a=this;return a.eventsListeners&&!a.destroyed&&a.eventsListeners&&e.split(" ").forEach(function(i){void 0===r?a.eventsListeners[i]=[]:a.eventsListeners[i]&&a.eventsListeners[i].forEach(function(e,t){(e===r||e.__emitterProxy&&e.__emitterProxy===r)&&a.eventsListeners[i].splice(t,1)})}),a},emit:function(){var e=this;if(e.eventsListeners&&!e.destroyed&&e.eventsListeners){for(var t,i,r,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];r="string"==typeof s[0]||Array.isArray(s[0])?(t=s[0],i=s.slice(1,s.length),e):(t=s[0].events,i=s[0].data,s[0].context||e),i.unshift(r),(Array.isArray(t)?t:t.split(" ")).forEach(function(t){e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(function(e){e.apply(r,[t].concat(_toConsumableArray(i)))}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(function(e){e.apply(r,i)})})}return e}},update:{updateSize:function(){var e=this,t=e.el,i=void 0!==e.params.width&&null!==e.params.width?e.params.width:t.clientWidth,r=void 0!==e.params.height&&null!==e.params.height?e.params.height:t.clientHeight;0===i&&e.isHorizontal()||0===r&&e.isVertical()||(i=i-parseInt(J(t,"padding-left")||0,10)-parseInt(J(t,"padding-right")||0,10),r=r-parseInt(J(t,"padding-top")||0,10)-parseInt(J(t,"padding-bottom")||0,10),Number.isNaN(i)&&(i=0),Number.isNaN(r)&&(r=0),Object.assign(e,{width:i,height:r,size:e.isHorizontal()?i:r}))},updateSlides:function(){var i=this;function e(e,t){return parseFloat(e.getPropertyValue(i.getDirectionLabel(t))||0)}var r=i.params,t=i.wrapperEl,j=i.slidesEl,a=i.size,s=i.rtlTranslate,n=i.wrongRTL,o=i.virtual&&r.virtual.enabled,N=(o?i.virtual:i).slides.length,l=Z(j,".".concat(i.params.slideClass,", swiper-slide")),c=(o?i.virtual.slides:l).length,d=[],p=[],u=[],h=r.slidesOffsetBefore,f=("function"==typeof h&&(h=r.slidesOffsetBefore.call(i)),r.slidesOffsetAfter),j=("function"==typeof f&&(f=r.slidesOffsetAfter.call(i)),i.snapGrid.length),B=i.slidesGrid.length,m=r.spaceBetween,v=-h,g=0,y=0;if(void 0!==a){"string"==typeof m&&0<=m.indexOf("%")?m=parseFloat(m.replace("%",""))/100*a:"string"==typeof m&&(m=parseFloat(m)),i.virtualSize=-m,l.forEach(function(e){s?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(K(t,"--swiper-centered-offset-before",""),K(t,"--swiper-centered-offset-after",""));for(var F,b,w,E,x,W,R,S=r.grid&&1<r.grid.rows&&i.grid,H=(S?i.grid.initSlides(l):i.grid&&i.grid.unsetSlides(),"auto"===r.slidesPerView&&r.breakpoints&&0<Object.keys(r.breakpoints).filter(function(e){return void 0!==r.breakpoints[e].slidesPerView}).length),C=0;C<c;C+=1){var T,M,z,G,q,P,A,_,X,L,k=void(L=0);l[C]&&(k=l[C]),S&&i.grid.updateSlide(C,k,l),l[C]&&"none"===J(k,"display")||("auto"===r.slidesPerView?(H&&(l[C].style[i.getDirectionLabel("width")]=""),_=getComputedStyle(k),T=k.style.transform,M=k.style.webkitTransform,T&&(k.style.transform="none"),M&&(k.style.webkitTransform="none"),L=r.roundLengths?i.isHorizontal()?ee(k,"width",!0):ee(k,"height",!0):(z=e(_,"width"),G=e(_,"padding-left"),q=e(_,"padding-right"),P=e(_,"margin-left"),A=e(_,"margin-right"),(_=_.getPropertyValue("box-sizing"))&&"border-box"===_?z+P+A:(X=(_=k).clientWidth,z+G+q+P+A+(_.offsetWidth-X))),T&&(k.style.transform=T),M&&(k.style.webkitTransform=M),r.roundLengths&&(L=Math.floor(L))):(L=(a-(r.slidesPerView-1)*m)/r.slidesPerView,r.roundLengths&&(L=Math.floor(L)),l[C]&&(l[C].style[i.getDirectionLabel("width")]="".concat(L,"px"))),l[C]&&(l[C].swiperSlideSize=L),u.push(L),r.centeredSlides?(v=v+L/2+g/2+m,0===g&&0!==C&&(v=v-a/2-m),0===C&&(v=v-a/2-m),Math.abs(v)<.001&&(v=0),r.roundLengths&&(v=Math.floor(v)),y%r.slidesPerGroup==0&&d.push(v),p.push(v)):(r.roundLengths&&(v=Math.floor(v)),(y-Math.min(i.params.slidesPerGroupSkip,y))%i.params.slidesPerGroup==0&&d.push(v),p.push(v),v=v+L+m),i.virtualSize+=L+m,g=L,y+=1)}if(i.virtualSize=Math.max(i.virtualSize,a)+f,s&&n&&("slide"===r.effect||"coverflow"===r.effect)&&(t.style.width="".concat(i.virtualSize+m,"px")),r.setWrapperSize&&(t.style[i.getDirectionLabel("width")]="".concat(i.virtualSize+m,"px")),S&&i.grid.updateWrapperSize(L,d),!r.centeredSlides){for(var V=[],I=0;I<d.length;I+=1){var D=d[I];r.roundLengths&&(D=Math.floor(D)),d[I]<=i.virtualSize-a&&V.push(D)}d=V,1<Math.floor(i.virtualSize-a)-Math.floor(d[d.length-1])&&d.push(i.virtualSize-a)}if(o&&r.loop){var O=u[0]+m;if(1<r.slidesPerGroup)for(var Y=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/r.slidesPerGroup),U=O*r.slidesPerGroup,$=0;$<Y;$+=1)d.push(d[d.length-1]+U);for(var Q=0;Q<i.virtual.slidesBefore+i.virtual.slidesAfter;Q+=1)1===r.slidesPerGroup&&d.push(d[d.length-1]+O),p.push(p[p.length-1]+O),i.virtualSize+=O}0===d.length&&(d=[0]),0!==m&&(F=i.isHorizontal()&&s?"marginLeft":i.getDirectionLabel("marginRight"),l.filter(function(e,t){return!(r.cssMode&&!r.loop)||t!==l.length-1}).forEach(function(e){e.style[F]="".concat(m,"px")})),r.centeredSlides&&r.centeredSlidesBounds&&(b=0,u.forEach(function(e){b+=e+(m||0)}),w=(b-=m)-a,d=d.map(function(e){return e<=0?-h:w<e?w+f:e})),r.centerInsufficientSlides&&(E=0,u.forEach(function(e){E+=e+(m||0)}),E-=m,n=(r.slidesOffsetBefore||0)+(r.slidesOffsetAfter||0),E+n<a)&&(x=(a-E-n)/2,d.forEach(function(e,t){d[t]=e-x}),p.forEach(function(e,t){p[t]=e+x})),Object.assign(i,{slides:l,snapGrid:d,slidesGrid:p,slidesSizesGrid:u}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds&&(K(t,"--swiper-centered-offset-before","".concat(-d[0],"px")),K(t,"--swiper-centered-offset-after","".concat(i.size/2-u[u.length-1]/2,"px")),W=-i.snapGrid[0],R=-i.slidesGrid[0],i.snapGrid=i.snapGrid.map(function(e){return e+W}),i.slidesGrid=i.slidesGrid.map(function(e){return e+R})),c!==N&&i.emit("slidesLengthChange"),d.length!==j&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),p.length!==B&&i.emit("slidesGridLengthChange"),r.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),o||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect||(n="".concat(r.containerModifierClass,"backface-hidden"),t=i.el.classList.contains(n),c<=r.maxBackfaceHiddenSlides?t||i.el.classList.add(n):t&&i.el.classList.remove(n))}},updateAutoHeight:function(e){function t(e){return n?a.slides[a.getSlideIndexByData(e)]:a.slides[e]}var i,r,a=this,s=[],n=a.virtual&&a.params.virtual.enabled,o=0;if("number"==typeof e?a.setTransition(e):!0===e&&a.setTransition(a.params.speed),"auto"!==a.params.slidesPerView&&1<a.params.slidesPerView)if(a.params.centeredSlides)(a.visibleSlides||[]).forEach(function(e){s.push(e)});else for(i=0;i<Math.ceil(a.params.slidesPerView);i+=1){var l=a.activeIndex+i;if(l>a.slides.length&&!n)break;s.push(t(l))}else s.push(t(a.activeIndex));for(i=0;i<s.length;i+=1)void 0!==s[i]&&(o=o<(r=s[i].offsetHeight)?r:o);!o&&0!==o||(a.wrapperEl.style.height="".concat(o,"px"))},updateSlidesOffset:function(){for(var e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0,r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-i-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,i=t.params,r=t.slides,a=t.rtlTranslate,s=t.snapGrid;if(0!==r.length){void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();var n=a?e:-e,o=(t.visibleSlidesIndexes=[],t.visibleSlides=[],i.spaceBetween);"string"==typeof o&&0<=o.indexOf("%")?o=parseFloat(o.replace("%",""))/100*t.size:"string"==typeof o&&(o=parseFloat(o));for(var l=0;l<r.length;l+=1){var c=r[l],d=c.swiperSlideOffset,p=(i.cssMode&&i.centeredSlides&&(d-=r[0].swiperSlideOffset),(n+(i.centeredSlides?t.minTranslate():0)-d)/(c.swiperSlideSize+o)),u=(n-s[0]+(i.centeredSlides?t.minTranslate():0)-d)/(c.swiperSlideSize+o),d=-(n-d),h=d+t.slidesSizesGrid[l],f=0<=d&&d<=t.size-t.slidesSizesGrid[l],d=0<=d&&d<t.size-1||1<h&&h<=t.size||d<=0&&h>=t.size;d&&(t.visibleSlides.push(c),t.visibleSlidesIndexes.push(l)),H(c,d,i.slideVisibleClass),H(c,f,i.slideFullyVisibleClass),c.progress=a?-p:p,c.originalProgress=a?-u:u}}},updateProgress:function(e){var t,i,r,a=this,s=(void 0===e&&(s=a.rtlTranslate?-1:1,e=a&&a.translate&&a.translate*s||0),a.params),n=a.maxTranslate()-a.minTranslate(),o=a.progress,l=a.isBeginning,c=a.isEnd,d=a.progressLoop,p=l,u=c;0==n?c=l=!(o=0):(o=(e-a.minTranslate())/n,l=(n=Math.abs(e-a.minTranslate())<1)||o<=0,c=(t=Math.abs(e-a.maxTranslate())<1)||1<=o,n&&(o=0),t&&(o=1)),s.loop&&(n=a.getSlideIndexByData(0),t=a.getSlideIndexByData(a.slides.length-1),n=a.slidesGrid[n],t=a.slidesGrid[t],i=a.slidesGrid[a.slidesGrid.length-1],1<(d=n<=(r=Math.abs(e))?(r-n)/i:(r+i-t)/i))&&--d,Object.assign(a,{progress:o,progressLoop:d,isBeginning:l,isEnd:c}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&a.updateSlidesProgress(e),l&&!p&&a.emit("reachBeginning toEdge"),c&&!u&&a.emit("reachEnd toEdge"),(p&&!l||u&&!c)&&a.emit("fromEdge"),a.emit("progress",o)},updateSlidesClasses:function(){function e(e){return Z(o,".".concat(n.slideClass).concat(e,", swiper-slide").concat(e))[0]}var t,i,r,a=this,s=a.slides,n=a.params,o=a.slidesEl,l=a.activeIndex,c=a.virtual&&n.virtual.enabled,d=a.grid&&n.grid&&1<n.grid.rows;c?r=n.loop?((c=(c=l-a.virtual.slidesBefore)<0?a.virtual.slides.length+c:c)>=a.virtual.slides.length&&(c-=a.virtual.slides.length),e('[data-swiper-slide-index="'.concat(c,'"]'))):e('[data-swiper-slide-index="'.concat(l,'"]')):d?(r=s.filter(function(e){return e.column===l})[0],i=s.filter(function(e){return e.column===l+1})[0],t=s.filter(function(e){return e.column===l-1})[0]):r=s[l],r&&!d&&(i=function(e,t){for(var i=[];e.nextElementSibling;){var r=e.nextElementSibling;(!t||r.matches(t))&&i.push(r),e=r}return i}(r,".".concat(n.slideClass,", swiper-slide"))[0],n.loop&&!i&&(i=s[0]),t=function(e,t){for(var i=[];e.previousElementSibling;){var r=e.previousElementSibling;(!t||r.matches(t))&&i.push(r),e=r}return i}(r,".".concat(n.slideClass,", swiper-slide"))[0],n.loop)&&0===!t&&(t=s[s.length-1]),s.forEach(function(e){f(e,e===r,n.slideActiveClass),f(e,e===i,n.slideNextClass),f(e,e===t,n.slidePrevClass)}),a.emitSlidesClasses()},updateActiveIndex:function(e){function t(e){return(e=(e-=i.virtual.slidesBefore)<0?i.virtual.slides.length+e:e)>=i.virtual.slides.length&&(e-=i.virtual.slides.length),e}var i=this,r=i.rtlTranslate?i.translate:-i.translate,a=i.snapGrid,s=i.params,n=i.activeIndex,o=i.realIndex,l=i.snapIndex,c=e;void 0===c&&(c=function(e){for(var t,i=e.slidesGrid,r=e.params,a=e.rtlTranslate?e.translate:-e.translate,s=0;s<i.length;s+=1)void 0!==i[s+1]?a>=i[s]&&a<i[s+1]-(i[s+1]-i[s])/2?t=s:a>=i[s]&&a<i[s+1]&&(t=s+1):a>=i[s]&&(t=s);return t=r.normalizeSlideIndex&&(t<0||void 0===t)?0:t}(i)),(r=0<=a.indexOf(r)?a.indexOf(r):(e=Math.min(s.slidesPerGroupSkip,c))+Math.floor((c-e)/s.slidesPerGroup))>=a.length&&(r=a.length-1),c!==n||i.params.loop?c===n&&i.params.loop&&i.virtual&&i.params.virtual.enabled?i.realIndex=t(c):(e=i.grid&&s.grid&&1<s.grid.rows,e=i.virtual&&s.virtual.enabled&&s.loop?t(c):e?(a=i.slides.filter(function(e){return e.column===c})[0],e=parseInt(a.getAttribute("data-swiper-slide-index"),10),Number.isNaN(e)&&(e=Math.max(i.slides.indexOf(a),0)),Math.floor(e/s.grid.rows)):i.slides[c]&&(a=i.slides[c].getAttribute("data-swiper-slide-index"))?parseInt(a,10):c,Object.assign(i,{previousSnapIndex:l,snapIndex:r,previousRealIndex:o,realIndex:e,previousIndex:n,activeIndex:c}),i.initialized&&d(i),i.emit("activeIndexChange"),i.emit("snapIndexChange"),(i.initialized||i.params.runCallbacksOnInit)&&(o!==e&&i.emit("realIndexChange"),i.emit("slideChange"))):r!==l&&(i.snapIndex=r,i.emit("snapIndexChange"))},updateClickedSlide:function(e,t){var i,r=this,a=r.params,s=e.closest(".".concat(a.slideClass,", swiper-slide")),n=(!s&&r.isElement&&t&&1<t.length&&t.includes(e)&&_toConsumableArray(t.slice(t.indexOf(e)+1,t.length)).forEach(function(e){!s&&e.matches&&e.matches(".".concat(a.slideClass,", swiper-slide"))&&(s=e)}),!1);if(s)for(var o=0;o<r.slides.length;o+=1)if(r.slides[o]===s){n=!0,i=o;break}s&&n?(r.clickedSlide=s,r.virtual&&r.params.virtual.enabled?r.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):r.clickedIndex=i,a.slideToClickedSlide&&void 0!==r.clickedIndex&&r.clickedIndex!==r.activeIndex&&r.slideToClickedSlide()):(r.clickedSlide=void 0,r.clickedIndex=void 0)}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,i=t.params,r=t.rtlTranslate,a=t.translate,s=t.wrapperEl;return i.virtualTranslate?r?-a:a:i.cssMode?a:(i=I(s,e),i+=t.cssOverflowAdjustment(),(i=r?-i:i)||0)},setTranslate:function(e,t){var i=this,r=i.rtlTranslate,a=i.params,s=i.wrapperEl,n=i.progress,o=0,l=0,r=(i.isHorizontal()?o=r?-e:e:l=e,a.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?o:l,a.cssMode?s[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-o:-l:a.virtualTranslate||(i.isHorizontal()?o-=i.cssOverflowAdjustment():l-=i.cssOverflowAdjustment(),s.style.transform="translate3d(".concat(o,"px, ").concat(l,"px, ").concat(0,"px)")),i.maxTranslate()-i.minTranslate());(a=0==r?0:(e-i.minTranslate())/r)!==n&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,r,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===r&&(r=!0);var s=this,n=s.params,o=s.wrapperEl;if(s.animating&&n.preventInteractionOnTransition)return!1;var l=s.minTranslate(),c=s.maxTranslate(),l=r&&l<e?l:r&&e<c?c:e;if(s.updateProgress(l),n.cssMode){r=s.isHorizontal();if(0===t)o[r?"scrollLeft":"scrollTop"]=-l;else{if(!s.support.smoothScroll)return B({swiper:s,targetPosition:-l,side:r?"left":"top"}),!0;o.scrollTo((_defineProperty(c={},r?"left":"top",-l),_defineProperty(c,"behavior","smooth"),c))}}else 0===t?(s.setTransition(0),s.setTranslate(l),i&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(l),i&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,i)&&s.emit("transitionEnd")}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd)));return!0}},transition:{setTransition:function(e,t){this.params.cssMode||(this.wrapperEl.style.transitionDuration="".concat(e,"ms"),this.wrapperEl.style.transitionDelay=0===e?"0ms":""),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this.params;i.cssMode||(i.autoHeight&&this.updateAutoHeight(),q({swiper:this,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this.params;this.animating=!1,i.cssMode||(this.setTransition(0),q({swiper:this,runCallbacks:e,direction:t,step:"End"}))}},slide:{slideTo:function(e,t,i,r,a){void 0===i&&(i=!0),"string"==typeof(e=void 0===e?0:e)&&(e=parseInt(e,10));var s=this,n=e,e=(n<0&&(n=0),s.params),o=s.snapGrid,l=s.slidesGrid,c=s.previousIndex,d=s.activeIndex,p=s.rtlTranslate,u=s.wrapperEl;if(!s.enabled&&!r&&!a||s.destroyed||s.animating&&e.preventInteractionOnTransition)return!1;void 0===t&&(t=s.params.speed);var h,a=(a=Math.min(s.params.slidesPerGroupSkip,n))+Math.floor((n-a)/s.params.slidesPerGroup),f=-o[a=a>=o.length?o.length-1:a];if(e.normalizeSlideIndex)for(var m=0;m<l.length;m+=1){var v=-Math.floor(100*f),g=Math.floor(100*l[m]),y=Math.floor(100*l[m+1]);void 0!==l[m+1]?g<=v&&v<y-(y-g)/2?n=m:g<=v&&v<y&&(n=m+1):g<=v&&(n=m)}if(s.initialized&&n!==d){if(!s.allowSlideNext&&(p?f>s.translate&&f>s.minTranslate():f<s.translate&&f<s.minTranslate()))return!1;if(!s.allowSlidePrev&&f>s.translate&&f>s.maxTranslate()&&(d||0)!==n)return!1}if(n!==(c||0)&&i&&s.emit("beforeSlideChangeStart"),s.updateProgress(f),h=d<n?"next":n<d?"prev":"reset",p&&-f===s.translate||!p&&f===s.translate)return s.updateActiveIndex(n),e.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==e.effect&&s.setTranslate(f),"reset"!==h&&(s.transitionStart(i,h),s.transitionEnd(i,h)),!1;if(e.cssMode){var b=s.isHorizontal(),w=p?f:-f;if(0===t){o=s.virtual&&s.params.virtual.enabled;o&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),o&&!s._cssModeVirtualInitialSet&&0<s.params.initialSlide?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(function(){u[b?"scrollLeft":"scrollTop"]=w})):u[b?"scrollLeft":"scrollTop"]=w,o&&requestAnimationFrame(function(){s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return B({swiper:s,targetPosition:w,side:b?"left":"top"}),!0;u.scrollTo((_defineProperty(a={},b?"left":"top",w),_defineProperty(a,"behavior","smooth"),a))}}else s.setTransition(t),s.setTranslate(f),s.updateActiveIndex(n),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(i,h),0===t?s.transitionEnd(i,h):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(i,h))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd));return!0},slideToLoop:function(e,t,i,r){void 0===i&&(i=!0),"string"==typeof(e=void 0===e?0:e)&&(e=parseInt(e,10));var a,s,n,o,l,c,d,p,u=this;if(!u.destroyed)return void 0===t&&(t=u.params.speed),a=u.grid&&u.params.grid&&1<u.params.grid.rows,p=e,u.params.loop&&(u.virtual&&u.params.virtual.enabled?p+=u.virtual.slidesBefore:(e=a?(s=p*u.params.grid.rows,u.slides.filter(function(e){return+e.getAttribute("data-swiper-slide-index")==s})[0].column):u.getSlideIndexByData(p),n=a?Math.ceil(u.slides.length/u.params.grid.rows):u.slides.length,o=u.params.centeredSlides,"auto"===(c=u.params.slidesPerView)?c=u.slidesPerViewDynamic():(c=Math.ceil(parseFloat(u.params.slidesPerView,10)),o&&c%2==0&&(c+=1)),l=n-e<c,o&&(l=l||e<Math.ceil(c/2)),(l=r&&o&&"auto"!==u.params.slidesPerView&&!a?!1:l)&&(c=o?e<u.activeIndex?"prev":"next":e-u.activeIndex-1<u.params.slidesPerView?"next":"prev",u.loopFix({direction:c,slideTo:!0,activeSlideIndex:"next"==c?e+1:e-n+1,slideRealIndex:"next"==c?u.realIndex:void 0})),p=a?(d=p*u.params.grid.rows,u.slides.filter(function(e){return+e.getAttribute("data-swiper-slide-index")==d})[0].column):u.getSlideIndexByData(p))),requestAnimationFrame(function(){u.slideTo(p,t,i,r)}),u},slideNext:function(e,t,i){void 0===t&&(t=!0);var r=this,a=r.enabled,s=r.params,n=r.animating;if(!a||r.destroyed)return r;void 0===e&&(e=r.params.speed);var a=s.slidesPerGroup,o=("auto"===s.slidesPerView&&1===s.slidesPerGroup&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1)),r.activeIndex<s.slidesPerGroupSkip?1:a),a=r.virtual&&s.virtual.enabled;if(s.loop){if(n&&!a&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame(function(){r.slideTo(r.activeIndex+o,e,t,i)}),!0}return s.rewind&&r.isEnd?r.slideTo(0,e,t,i):r.slideTo(r.activeIndex+o,e,t,i)},slidePrev:function(e,t,i){void 0===t&&(t=!0);var r=this,a=r.params,s=r.snapGrid,n=r.slidesGrid,o=r.rtlTranslate,l=r.enabled,c=r.animating;if(!l||r.destroyed)return r;if(void 0===e&&(e=r.params.speed),l=r.virtual&&a.virtual.enabled,a.loop){if(c&&!l&&a.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var p,u=d(o?r.translate:-r.translate),c=s.map(d),h=(void 0===(l=s[c.indexOf(u)-1])&&a.cssMode&&(s.forEach(function(e,t){e<=u&&(p=t)}),void 0!==p)&&(l=s[0<p?p-1:p]),0);return void 0!==l&&((h=n.indexOf(l))<0&&(h=r.activeIndex-1),"auto"===a.slidesPerView)&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(h=h-r.slidesPerViewDynamic("previous",!0)+1,h=Math.max(h,0)),a.rewind&&r.isBeginning?(o=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1,r.slideTo(o,e,t,i)):a.loop&&0===r.activeIndex&&a.cssMode?(requestAnimationFrame(function(){r.slideTo(h,e,t,i)}),!0):r.slideTo(h,e,t,i)},slideReset:function(e,t,i){if(void 0===t&&(t=!0),!this.destroyed)return void 0===e&&(e=this.params.speed),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i,r){void 0===t&&(t=!0),void 0===r&&(r=.5);var a,s,n,o,l=this;if(!l.destroyed)return void 0===e&&(e=l.params.speed),a=l.activeIndex,s=(s=Math.min(l.params.slidesPerGroupSkip,a))+Math.floor((a-s)/l.params.slidesPerGroup),(n=l.rtlTranslate?l.translate:-l.translate)>=l.snapGrid[s]?(o=l.snapGrid[s],(l.snapGrid[s+1]-o)*r<n-o&&(a+=l.params.slidesPerGroup)):n-(o=l.snapGrid[s-1])<=(l.snapGrid[s]-o)*r&&(a-=l.params.slidesPerGroup),a=Math.max(a,0),a=Math.min(a,l.slidesGrid.length-1),l.slideTo(a,e,t,i)},slideToClickedSlide:function(){var e,t,i,r,a,s,n=this;n.destroyed||(e=n.params,t=n.slidesEl,i="auto"===e.slidesPerView?n.slidesPerViewDynamic():e.slidesPerView,r=n.clickedIndex,s=n.isElement?"swiper-slide":".".concat(e.slideClass),e.loop?n.animating||(a=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(Z(t,"".concat(s,'[data-swiper-slide-index="').concat(a,'"]'))[0]),T(function(){n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(Z(t,"".concat(s,'[data-swiper-slide-index="').concat(a,'"]'))[0]),T(function(){n.slideTo(r)})):n.slideTo(r)):n.slideTo(r))}},loop:{loopCreate:function(e){var t,i,r,a,s,n=this,o=n.params,l=n.slidesEl;!o.loop||n.virtual&&n.params.virtual.enabled||(t=function(){Z(l,".".concat(o.slideClass,", swiper-slide")).forEach(function(e,t){e.setAttribute("data-swiper-slide-index",t)})},a=n.grid&&o.grid&&1<o.grid.rows,i=o.slidesPerGroup*(a?o.grid.rows:1),r=n.slides.length%i!=0,a=a&&n.slides.length%o.grid.rows!=0,s=function(e){for(var t=0;t<e;t+=1){var i=n.isElement?M("swiper-slide",[o.slideBlankClass]):M("div",[o.slideClass,o.slideBlankClass]);n.slidesEl.append(i)}},r?o.loopAddBlankSlides?(s(i-n.slides.length%i),n.recalcSlides(),n.updateSlides()):D("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"):a&&(o.loopAddBlankSlides?(s(o.grid.rows-n.slides.length%o.grid.rows),n.recalcSlides(),n.updateSlides()):D("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)")),t(),n.loopFix({slideRealIndex:e,direction:o.centeredSlides?void 0:"next"}))},loopFix:function(e){var t=(e=void 0===e?{}:e).slideRealIndex,i=void 0===(r=e.slideTo)||r,r=e.direction,a=e.setTranslate,s=e.activeSlideIndex,n=e.byController,e=e.byMousewheel,o=this;if(o.params.loop){o.emit("beforeLoopFix");var l=o.slides,c=o.allowSlidePrev,d=o.allowSlideNext,p=o.slidesEl,u=o.params,h=u.centeredSlides;if(o.allowSlidePrev=!0,o.allowSlideNext=!0,o.virtual&&u.virtual.enabled)i&&(u.centeredSlides||0!==o.snapIndex?u.centeredSlides&&o.snapIndex<u.slidesPerView?o.slideTo(o.virtual.slides.length+o.snapIndex,0,!1,!0):o.snapIndex===o.snapGrid.length-1&&o.slideTo(o.virtual.slidesBefore,0,!1,!0):o.slideTo(o.virtual.slides.length,0,!1,!0)),o.allowSlidePrev=c,o.allowSlideNext=d;else{var f,m=u.slidesPerView,v=("auto"===m?m=o.slidesPerViewDynamic():(m=Math.ceil(parseFloat(u.slidesPerView,10)),h&&m%2==0&&(m+=1)),u.slidesPerGroupAuto?m:u.slidesPerGroup),g=v,y=(g%v!=0&&(g+=v-g%v),g+=u.loopAdditionalSlides,o.loopedSlides=g,o.grid&&u.grid&&1<u.grid.rows),b=(l.length<m+g?D("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&"row"===u.grid.fill&&D("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`"),[]),w=[],E=o.activeIndex,x=(void 0===s?s=o.getSlideIndex(l.filter(function(e){return e.classList.contains(u.slideActiveClass)})[0]):E=s,"next"===r||!r),S="prev"===r||!r,C=0,T=0,M=y?Math.ceil(l.length/u.grid.rows):l.length,z=(y?l[s].column:s)+(h&&void 0===a?-m/2+.5:0);if(z<g)for(var C=Math.max(g-z,v),P=0;P<g-z;P+=1){var A=P-Math.floor(P/M)*M;if(y)for(var _=M-A-1,L=l.length-1;0<=L;--L)l[L].column===_&&b.push(L);else b.push(M-A-1)}else if(M-g<z+m)for(var T=Math.max(z-(M-2*g),v),k=0;k<T;k+=1)!function(){var i=k-Math.floor(k/M)*M;y?l.forEach(function(e,t){e.column===i&&w.push(t)}):w.push(i)}();o.__preventObserver__=!0,requestAnimationFrame(function(){o.__preventObserver__=!1}),S&&b.forEach(function(e){l[e].swiperLoopMoveDOM=!0,p.prepend(l[e]),l[e].swiperLoopMoveDOM=!1}),x&&w.forEach(function(e){l[e].swiperLoopMoveDOM=!0,p.append(l[e]),l[e].swiperLoopMoveDOM=!1}),o.recalcSlides(),"auto"===u.slidesPerView?o.updateSlides():y&&(0<b.length&&S||0<w.length&&x)&&o.slides.forEach(function(e,t){o.grid.updateSlide(t,e,o.slides)}),u.watchSlidesProgress&&o.updateSlidesOffset(),i&&(0<b.length&&S?void 0===t?(h=o.slidesGrid[E],m=o.slidesGrid[E+C]-h,e?o.setTranslate(o.translate-m):(o.slideTo(E+Math.ceil(C),0,!1,!0),a&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-m,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-m))):a&&(v=y?b.length/u.grid.rows:b.length,o.slideTo(o.activeIndex+v,0,!1,!0),o.touchEventsData.currentTranslate=o.translate):0<w.length&&x&&(void 0===t?(S=o.slidesGrid[E],h=o.slidesGrid[E-T]-S,e?o.setTranslate(o.translate-h):(o.slideTo(E-T,0,!1,!0),a&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-h,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-h))):(C=y?w.length/u.grid.rows:w.length,o.slideTo(o.activeIndex-C,0,!1,!0)))),o.allowSlidePrev=c,o.allowSlideNext=d,o.controller&&o.controller.control&&!n&&(f={slideRealIndex:t,direction:r,setTranslate:a,activeSlideIndex:s,byController:!0},Array.isArray(o.controller.control)?o.controller.control.forEach(function(e){!e.destroyed&&e.params.loop&&e.loopFix(_objectSpread(_objectSpread({},f),{},{slideTo:e.params.slidesPerView===u.slidesPerView&&i}))}):o.controller.control instanceof o.constructor&&o.controller.control.params.loop&&o.controller.control.loopFix(_objectSpread(_objectSpread({},f),{},{slideTo:o.controller.control.params.slidesPerView===u.slidesPerView&&i})))}o.emit("loopFix")}},loopDestroy:function(){var i,e=this,t=e.params,r=e.slidesEl;!t.loop||e.virtual&&e.params.virtual.enabled||(e.recalcSlides(),i=[],e.slides.forEach(function(e){var t=void 0===e.swiperSlideIndex?+e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;i[t]=e}),e.slides.forEach(function(e){e.removeAttribute("data-swiper-slide-index")}),i.forEach(function(e){r.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0))}},grabCursor:{setGrabCursor:function(e){var t,i=this;!i.params.simulateTouch||i.params.watchOverflow&&i.isLocked||i.params.cssMode||(t="container"===i.params.touchEventsTarget?i.el:i.wrapperEl,i.isElement&&(i.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=e?"grabbing":"grab",i.isElement&&requestAnimationFrame(function(){i.__preventObserver__=!1}))},unsetGrabCursor:function(){var e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(function(){e.__preventObserver__=!1}))}},events:{attachEvents:function(){var e=this,t=e.params;e.onTouchStart=function(e){var t,i,r,a,s,n=this,o=L(),l=(e.originalEvent&&(e=e.originalEvent),n.touchEventsData);if("pointerdown"===e.type){if(null!==l.pointerId&&l.pointerId!==e.pointerId)return;l.pointerId=e.pointerId}else"touchstart"===e.type&&1===e.targetTouches.length&&(l.touchId=e.targetTouches[0].identifier);"touchstart"===e.type?V(n,e,e.targetTouches[0].pageX):(t=n.params,s=n.touches,!n.enabled||!t.simulateTouch&&"mouse"===e.pointerType||n.animating&&t.preventInteractionOnTransition||(!n.animating&&t.cssMode&&t.loop&&n.loopFix(),i=e.target,"wrapper"===t.touchEventsTarget&&!n.wrapperEl.contains(i))||"which"in e&&3===e.which||"button"in e&&0<e.button||l.isTouched&&l.isMoved||(r=!!t.noSwipingClass&&""!==t.noSwipingClass,a=e.composedPath?e.composedPath():e.path,r&&e.target&&e.target.shadowRoot&&a&&(i=a[0]),r=t.noSwipingSelector||".".concat(t.noSwipingClass),a=!(!e.target||!e.target.shadowRoot),t.noSwiping&&(a?X(r,i):i.closest(r))?n.allowClick=!0:t.swipeHandler&&!i.closest(t.swipeHandler)||(s.currentX=e.pageX,s.currentY=e.pageY,a=s.currentX,r=s.currentY,V(n,e,a)&&(Object.assign(l,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=a,s.startY=r,l.touchStartTime=y(),n.allowClick=!0,n.updateSize(),n.swipeDirection=void 0,0<t.threshold&&(l.allowThresholdMove=!1),a=!0,i.matches(l.focusableElements)&&(a=!1,"SELECT"===i.nodeName)&&(l.isTouched=!1),o.activeElement&&o.activeElement.matches(l.focusableElements)&&o.activeElement!==i&&o.activeElement.blur(),s=a&&n.allowTouchMove&&t.touchStartPreventDefault,!t.touchStartForcePreventDefault&&!s||i.isContentEditable||e.preventDefault(),t.freeMode&&t.freeMode.enabled&&n.freeMode&&n.animating&&!t.cssMode&&n.freeMode.onTouchStart(),n.emit("touchStart",e)))))}.bind(e),e.onTouchMove=function(e){var t=L(),i=this,r=i.touchEventsData,a=i.params,s=i.touches,n=i.rtlTranslate,o=i.enabled;if(o&&(a.simulateTouch||"mouse"!==e.pointerType)){o=e;if("pointermove"===(o=o.originalEvent?o.originalEvent:o).type){if(null!==r.touchId)return;if(o.pointerId!==r.pointerId)return}if("touchmove"===o.type){if(!(l=_toConsumableArray(o.changedTouches).filter(function(e){return e.identifier===r.touchId})[0])||l.identifier!==r.touchId)return}else l=o;if(r.isTouched){var e=l.pageX,l=l.pageY;if(o.preventedByNestedSwiper)s.startX=e,s.startY=l;else if(i.allowTouchMove){if(a.touchReleaseOnEdges&&!a.loop)if(i.isVertical()){if(l<s.startY&&i.translate<=i.maxTranslate()||l>s.startY&&i.translate>=i.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(e<s.startX&&i.translate<=i.maxTranslate()||e>s.startX&&i.translate>=i.minTranslate())return;if(t.activeElement&&o.target===t.activeElement&&o.target.matches(r.focusableElements))r.isMoved=!0,i.allowClick=!1;else{r.allowTouchCallbacks&&i.emit("touchMove",o),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=e,s.currentY=l;var t=s.currentX-s.startX,c=s.currentY-s.startY;if(!(i.params.threshold&&Math.sqrt(Math.pow(t,2)+Math.pow(c,2))<i.params.threshold))if(void 0===r.isScrolling&&(i.isHorizontal()&&s.currentY===s.startY||i.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:25<=t*t+c*c&&(d=180*Math.atan2(Math.abs(c),Math.abs(t))/Math.PI,r.isScrolling=i.isHorizontal()?d>a.touchAngle:90-d>a.touchAngle)),r.isScrolling&&i.emit("touchMoveOpposite",o),void 0!==r.startMoving||s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0),r.isScrolling||"touchmove"===o.type&&r.preventTouchMoveFromPointerMove)r.isTouched=!1;else if(r.startMoving){i.allowClick=!1,!a.cssMode&&o.cancelable&&o.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&o.stopPropagation();var d=i.isHorizontal()?t:c,t=i.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY,c=(a.oneWayMovement&&(d=Math.abs(d)*(n?1:-1),t=Math.abs(t)*(n?1:-1)),s.diff=d,d*=a.touchRatio,n&&(d=-d,t=-t),i.touchesDirection),n=(i.swipeDirection=0<d?"prev":"next",i.touchesDirection=0<t?"prev":"next",i.params.loop&&!a.cssMode),t="next"===i.touchesDirection&&i.allowSlideNext||"prev"===i.touchesDirection&&i.allowSlidePrev;if(r.isMoved||(n&&t&&i.loopFix({direction:i.swipeDirection}),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating&&(p=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}}),i.wrapperEl.dispatchEvent(p)),r.allowMomentumBounce=!1,!a.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",o)),(new Date).getTime(),r.isMoved&&r.allowThresholdMove&&c!==i.touchesDirection&&n&&t&&1<=Math.abs(d))Object.assign(s,{startX:e,startY:l,currentX:e,currentY:l,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;else{i.emit("sliderMove",o),r.isMoved=!0,r.currentTranslate=d+r.startTranslate;var p=!0,c=a.resistanceRatio;if(a.touchReleaseOnEdges&&(c=0),0<d?(n&&t&&r.allowThresholdMove&&r.currentTranslate>(a.centeredSlides?i.minTranslate()-i.slidesSizesGrid[i.activeIndex+1]:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>i.minTranslate()&&(p=!1,a.resistance)&&(r.currentTranslate=i.minTranslate()-1+Math.pow(-i.minTranslate()+r.startTranslate+d,c))):d<0&&(n&&t&&r.allowThresholdMove&&r.currentTranslate<(a.centeredSlides?i.maxTranslate()+i.slidesSizesGrid[i.slidesSizesGrid.length-1]:i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-("auto"===a.slidesPerView?i.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),r.currentTranslate<i.maxTranslate())&&(p=!1,a.resistance)&&(r.currentTranslate=i.maxTranslate()+1-Math.pow(i.maxTranslate()-r.startTranslate-d,c)),p&&(o.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),i.allowSlidePrev||i.allowSlideNext||(r.currentTranslate=r.startTranslate),0<a.threshold){if(!(Math.abs(d)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=i.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&i.freeMode||a.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}}}}else o.target.matches(r.focusableElements)||(i.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:e,startY:l,currentX:e,currentY:l}),r.touchStartTime=y())}else r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",o)}}.bind(e),e.onTouchEnd=function(e){var t=this,i=t.touchEventsData;if("touchend"===(e=e.originalEvent?e.originalEvent:e).type||"touchcancel"===e.type){if(!(a=_toConsumableArray(e.changedTouches).filter(function(e){return e.identifier===i.touchId})[0])||a.identifier!==i.touchId)return}else{if(null!==i.touchId)return;if(e.pointerId!==i.pointerId)return;a=e}if(!["pointercancel","pointerout","pointerleave","contextmenu"].includes(e.type)||["pointercancel","contextmenu"].includes(e.type)&&(t.browser.isSafari||t.browser.isWebView)){i.pointerId=null,i.touchId=null;var r=t.params,a=t.touches,s=t.rtlTranslate,n=t.slidesGrid,o=t.enabled;if(o&&(r.simulateTouch||"mouse"!==e.pointerType))if(i.allowTouchCallbacks&&t.emit("touchEnd",e),i.allowTouchCallbacks=!1,i.isTouched){r.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var l,o=y(),c=o-i.touchStartTime;if(t.allowClick&&(m=e.path||e.composedPath&&e.composedPath(),t.updateClickedSlide(m&&m[0]||e.target,m),t.emit("tap click",e),c<300)&&o-i.lastClickTime<300&&t.emit("doubleTap doubleClick",e),i.lastClickTime=y(),T(function(){t.destroyed||(t.allowClick=!0)}),i.isTouched&&i.isMoved&&t.swipeDirection&&(0!==a.diff||i.loopSwapReset)&&(i.currentTranslate!==i.startTranslate||i.loopSwapReset)){if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,l=r.followFinger?s?t.translate:-t.translate:-i.currentTranslate,!r.cssMode)if(r.freeMode&&r.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:l});else{for(var d=l>=-t.maxTranslate()&&!t.params.loop,p=0,u=t.slidesSizesGrid[0],h=0;h<n.length;h+=h<r.slidesPerGroupSkip?1:r.slidesPerGroup){var f=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==n[h+f]?(d||l>=n[h]&&l<n[h+f])&&(u=n[(p=h)+f]-n[h]):(d||l>=n[h])&&(p=h,u=n[n.length-1]-n[n.length-2])}var m=null,o=null,a=(r.rewind&&(t.isBeginning?o=r.virtual&&r.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(m=0)),(l-n[p])/u),s=p<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;c>r.longSwipesMs?r.longSwipes?("next"===t.swipeDirection&&(a>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?m:p+s):t.slideTo(p)),"prev"===t.swipeDirection&&(a>1-r.longSwipesRatio?t.slideTo(p+s):null!==o&&a<0&&Math.abs(a)>r.longSwipesRatio?t.slideTo(o):t.slideTo(p))):t.slideTo(t.activeIndex):r.shortSwipes?t.navigation&&(e.target===t.navigation.nextEl||e.target===t.navigation.prevEl)?e.target===t.navigation.nextEl?t.slideTo(p+s):t.slideTo(p):("next"===t.swipeDirection&&t.slideTo(null!==m?m:p+s),"prev"===t.swipeDirection&&t.slideTo(null!==o?o:p)):t.slideTo(t.activeIndex)}}else i.isTouched=!1,i.isMoved=!1,i.startMoving=!1}else i.isMoved&&r.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,i.startMoving=!1}}.bind(e),e.onDocumentTouchStart=function(){this.documentTouchHandlerProceeded||(this.documentTouchHandlerProceeded=!0,this.params.touchReleaseOnEdges&&(this.el.style.touchAction="auto"))}.bind(e),t.cssMode&&(e.onScroll=function(){var e=this,t=e.wrapperEl,i=e.rtlTranslate;e.enabled&&(e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses(),(0==(t=e.maxTranslate()-e.minTranslate())?0:(e.translate-e.minTranslate())/t)!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1))}.bind(e)),e.onClick=function(e){var t=this;t.enabled&&!t.allowClick&&(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation)&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())}.bind(e),e.onLoad=function(e){var t=this;s(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}.bind(e),U(e,"on")},detachEvents:function(){U(this,"off")}},breakpoints:{setBreakpoint:function(){var e,r,t,i,a,s,n=this,o=n.realIndex,l=n.initialized,c=n.params,d=n.el,p=c.breakpoints;p&&0!==Object.keys(p).length&&(e=n.getBreakpoint(p,n.params.breakpointsBase,n.el))&&n.currentBreakpoint!==e&&(r=(e in p?p[e]:void 0)||n.originalParams,p=$(n,c),i=$(n,r),a=n.params.grabCursor,s=r.grabCursor,t=c.enabled,p&&!i?(d.classList.remove("".concat(c.containerModifierClass,"grid"),"".concat(c.containerModifierClass,"grid-column")),n.emitContainerClasses()):!p&&i&&(d.classList.add("".concat(c.containerModifierClass,"grid")),(r.grid.fill&&"column"===r.grid.fill||!r.grid.fill&&"column"===c.grid.fill)&&d.classList.add("".concat(c.containerModifierClass,"grid-column")),n.emitContainerClasses()),a&&!s?n.unsetGrabCursor():!a&&s&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(function(e){var t,i;void 0!==r[e]&&(t=c[e]&&c[e].enabled,i=r[e]&&r[e].enabled,t&&!i&&n[e].disable(),!t)&&i&&n[e].enable()}),p=r.direction&&r.direction!==c.direction,i=c.loop&&(r.slidesPerView!==c.slidesPerView||p),d=c.loop,p&&l&&n.changeDirection(),u(n.params,r),a=n.params.enabled,s=n.params.loop,Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),t&&!a?n.disable():!t&&a&&n.enable(),n.currentBreakpoint=e,n.emit("_beforeBreakpoint",r),l&&(i?(n.loopDestroy(),n.loopCreate(o),n.updateSlides()):!d&&s?(n.loopCreate(o),n.updateSlides()):d&&!s&&n.loopDestroy()),n.emit("breakpoint",r))},getBreakpoint:function(e,t,i){if(void 0===t&&(t="window"),e&&("container"!==t||i)){var r=!1,a=k(),s="window"===t?a.innerHeight:i.clientHeight,n=Object.keys(e).map(function(e){var t;return"string"==typeof e&&0===e.indexOf("@")?(t=parseFloat(e.substr(1)),{value:s*t,point:e}):{value:e,point:e}});n.sort(function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)});for(var o=0;o<n.length;o+=1){var l=n[o],c=l.point,l=l.value;"window"===t?a.matchMedia("(min-width: ".concat(l,"px)")).matches&&(r=c):l<=i.clientWidth&&(r=c)}return r||"max"}}},checkOverflow:{checkOverflow:function(){var e,t=this,i=t.isLocked,r=t.params,a=r.slidesOffsetBefore;a?(e=t.slides.length-1,e=t.slidesGrid[e]+t.slidesSizesGrid[e]+2*a,t.isLocked=t.size>e):t.isLocked=1===t.snapGrid.length,!0===r.allowSlideNext&&(t.allowSlideNext=!t.isLocked),!0===r.allowSlidePrev&&(t.allowSlidePrev=!t.isLocked),i&&i!==t.isLocked&&(t.isEnd=!1),i!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}},classes:{addClasses:function(){var i,r,e=this,t=e.classNames,a=e.params,s=e.rtl,n=e.el,o=e.device,o=(s=["initialized",a.direction,{"free-mode":e.params.freeMode&&a.freeMode.enabled},{autoheight:a.autoHeight},{rtl:s},{grid:a.grid&&1<a.grid.rows},{"grid-column":a.grid&&1<a.grid.rows&&"column"===a.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":a.cssMode},{centered:a.cssMode&&a.centeredSlides},{"watch-progress":a.watchSlidesProgress}],i=a.containerModifierClass,r=[],s.forEach(function(t){"object"===_typeof(t)?Object.keys(t).forEach(function(e){t[e]&&r.push(i+e)}):"string"==typeof t&&r.push(i+t)}),r);t.push.apply(t,_toConsumableArray(o)),(a=n.classList).add.apply(a,_toConsumableArray(t)),e.emitContainerClasses()},removeClasses:function(){var e=this.el,t=this.classNames;e&&"string"!=typeof e&&((e=e.classList).remove.apply(e,_toConsumableArray(t)),this.emitContainerClasses())}}},ie={},o=function(){function c(){var e,t;_classCallCheck(this,c);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];t=u({},t=(t=1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?r[0]:(e=r[0],r[1]))||{}),e&&!t.el&&(t.el=e);var s,n,o,l=L();return t.el&&"string"==typeof t.el&&1<l.querySelectorAll(t.el).length?(s=[],l.querySelectorAll(t.el).forEach(function(e){e=u({},t,{el:e});s.push(new c(e))}),s):((n=this).__swiper__=!0,n.support=F(),n.device=W({userAgent:t.userAgent}),n.browser=R(),n.eventsListeners={},n.eventsAnyListeners=[],n.modules=_toConsumableArray(n.__modules__),t.modules&&Array.isArray(t.modules)&&(l=n.modules).push.apply(l,_toConsumableArray(t.modules)),o={},n.modules.forEach(function(e){var r,a;e({params:t,swiper:n,extendParams:(r=t,a=o,function(e){void 0===e&&(e={});var t=Object.keys(e)[0],i=e[t];"object"===_typeof(i)&&null!==i&&(!0===r[t]&&(r[t]={enabled:!0}),"navigation"===t&&r[t]&&r[t].enabled&&!r[t].prevEl&&!r[t].nextEl&&(r[t].auto=!0),0<=["pagination","scrollbar"].indexOf(t)&&r[t]&&r[t].enabled&&!r[t].el&&(r[t].auto=!0),t in r&&"enabled"in i)&&("object"!==_typeof(r[t])||"enabled"in r[t]||(r[t].enabled=!0),r[t]||(r[t]={enabled:!1})),u(a,e)}),on:n.on.bind(n),once:n.once.bind(n),off:n.off.bind(n),emit:n.emit.bind(n)})}),l=u({},Q,o),n.params=u({},l,ie,t),n.originalParams=u({},n.params),n.passedParams=u({},t),n.params&&n.params.on&&Object.keys(n.params.on).forEach(function(e){n.on(e,n.params.on[e])}),n.params&&n.params.onAny&&n.onAny(n.params.onAny),Object.assign(n,{enabled:n.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===n.params.direction},isVertical:function(){return"vertical"===n.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment:function(){return Math.trunc(this.translate/Math.pow(2,23))*Math.pow(2,23)},allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:n.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:n.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),n.emit("_swiper"),n.params.init&&n.init(),n)}return _createClass(c,[{key:"getDirectionLabel",value:function(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}},{key:"getSlideIndex",value:function(e){var t=this.slidesEl,i=this.params,t=z(Z(t,".".concat(i.slideClass,", swiper-slide"))[0]);return z(e)-t}},{key:"getSlideIndexByData",value:function(t){return this.getSlideIndex(this.slides.filter(function(e){return+e.getAttribute("data-swiper-slide-index")===t})[0])}},{key:"recalcSlides",value:function(){var e=this.slidesEl,t=this.params;this.slides=Z(e,".".concat(t.slideClass,", swiper-slide"))}},{key:"enable",value:function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}},{key:"disable",value:function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}},{key:"setProgress",value:function(e,t){var i=this,r=(e=Math.min(Math.max(e,0),1),i.minTranslate()),a=i.maxTranslate();i.translateTo((a-r)*e+r,void 0===t?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e,t=this;t.params._emitClasses&&t.el&&(e=t.el.className.split(" ").filter(function(e){return 0===e.indexOf("swiper")||0===e.indexOf(t.params.containerModifierClass)}),t.emit("_containerClasses",e.join(" ")))}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter(function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)}).join(" ")}},{key:"emitSlidesClasses",value:function(){var i,r=this;r.params._emitClasses&&r.el&&(i=[],r.slides.forEach(function(e){var t=r.getSlideClasses(e);i.push({slideEl:e,classNames:t}),r.emit("_slideClass",e,t)}),r.emit("_slideClasses",i))}},{key:"slidesPerViewDynamic",value:function(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);var i=this,r=i.params,a=i.slides,s=i.slidesGrid,n=i.slidesSizesGrid,o=i.size,l=i.activeIndex,c=1;if("number"==typeof r.slidesPerView)return r.slidesPerView;if(r.centeredSlides){for(var d,p=a[l]?Math.ceil(a[l].swiperSlideSize):0,u=l+1;u<a.length;u+=1)a[u]&&!d&&(c+=1,o<(p+=Math.ceil(a[u].swiperSlideSize)))&&(d=!0);for(var h=l-1;0<=h;--h)a[h]&&!d&&(c+=1,o<(p+=a[h].swiperSlideSize))&&(d=!0)}else if("current"===e)for(var f=l+1;f<a.length;f+=1)(t?s[f]+n[f]-s[l]<o:s[f]-s[l]<o)&&(c+=1);else for(var m=l-1;0<=m;--m)s[l]-s[m]<o&&(c+=1);return c}},{key:"update",value:function(){var e,t,i,r=this;function a(){var e=r.rtlTranslate?-1*r.translate:r.translate,e=Math.min(Math.max(e,r.maxTranslate()),r.minTranslate());r.setTranslate(e),r.updateActiveIndex(),r.updateSlidesClasses()}r&&!r.destroyed&&(e=r.snapGrid,(t=r.params).breakpoints&&r.setBreakpoint(),_toConsumableArray(r.el.querySelectorAll('[loading="lazy"]')).forEach(function(e){e.complete&&s(r,e)}),r.updateSize(),r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),t.freeMode&&t.freeMode.enabled&&!t.cssMode?(a(),t.autoHeight&&r.updateAutoHeight()):(("auto"===t.slidesPerView||1<t.slidesPerView)&&r.isEnd&&!t.centeredSlides?(i=(r.virtual&&t.virtual.enabled?r.virtual:r).slides,r.slideTo(i.length-1,0,!1,!0)):r.slideTo(r.activeIndex,0,!1,!0))||a(),t.watchOverflow&&e!==r.snapGrid&&r.checkOverflow(),r.emit("update"))}},{key:"changeDirection",value:function(t,e){void 0===e&&(e=!0);var i=this,r=i.params.direction;return(t=t||("horizontal"===r?"vertical":"horizontal"))===r||"horizontal"!==t&&"vertical"!==t||(i.el.classList.remove("".concat(i.params.containerModifierClass).concat(r)),i.el.classList.add("".concat(i.params.containerModifierClass).concat(t)),i.emitContainerClasses(),i.params.direction=t,i.slides.forEach(function(e){"vertical"===t?e.style.width="":e.style.height=""}),i.emit("changeDirection"),e&&i.update()),i}},{key:"changeLanguageDirection",value:function(e){var t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}},{key:"mount",value:function(e){var t=this;if(!t.mounted){e=e||t.params.el;if(!(e="string"==typeof e?document.querySelector(e):e))return!1;e.swiper=t,e.parentNode&&e.parentNode.host&&e.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);var i=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},r=e&&e.shadowRoot&&e.shadowRoot.querySelector?e.shadowRoot.querySelector(i()):Z(e,i())[0];!r&&t.params.createElements&&(r=M("div",t.params.wrapperClass),e.append(r),Z(e,".".concat(t.params.slideClass)).forEach(function(e){r.append(e)})),Object.assign(t,{el:e,wrapperEl:r,slidesEl:t.isElement&&!e.parentNode.host.slideSlots?e.parentNode.host:r,hostEl:t.isElement?e.parentNode.host:e,mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===J(e,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===J(e,"direction")),wrongRTL:"-webkit-box"===J(r,"display")})}return!0}},{key:"init",value:function(e){var t=this;return t.initialized||!1!==t.mount(e)&&(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents(),e=_toConsumableArray(t.el.querySelectorAll('[loading="lazy"]')),t.isElement&&e.push.apply(e,_toConsumableArray(t.hostEl.querySelectorAll('[loading="lazy"]'))),e.forEach(function(e){e.complete?s(t,e):e.addEventListener("load",function(e){s(t,e.target)})}),d(t),t.initialized=!0,d(t),t.emit("init"),t.emit("afterInit")),t}},{key:"destroy",value:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i,r=this,a=r.params,s=r.el,n=r.wrapperEl,o=r.slides;return void 0===r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),a.loop&&r.loopDestroy(),t&&(r.removeClasses(),s&&"string"!=typeof s&&s.removeAttribute("style"),n&&n.removeAttribute("style"),o)&&o.length&&o.forEach(function(e){e.classList.remove(a.slideVisibleClass,a.slideFullyVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(function(e){r.off(e)}),!1!==e&&(r.el&&"string"!=typeof r.el&&(r.el.swiper=null),i=r,Object.keys(i).forEach(function(e){try{i[e]=null}catch(e){}try{delete i[e]}catch(e){}})),r.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){u(ie,e)}},{key:"extendedDefaults",get:function(){return ie}},{key:"defaults",get:function(){return Q}},{key:"installModule",value:function(e){var t=c.prototype.__modules__=c.prototype.__modules__?c.prototype.__modules__:[];"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}},{key:"use",value:function(e){return Array.isArray(e)?e.forEach(function(e){return c.installModule(e)}):c.installModule(e),c}}]),c}();function re(i,r,a,s){return i.params.createElements&&Object.keys(s).forEach(function(e){var t;a[e]||!0!==a.auto||((t=Z(i.el,".".concat(s[e]))[0])||((t=M("div",s[e])).className=s[e],i.el.append(t)),a[e]=t,r[e]=t)}),a}function A(e){return".".concat((e=void 0===e?"":e).trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,"."))}function ae(e){function t(e){var t;"string"==typeof e?((t=document.createElement("div")).innerHTML=e,a.append(t.children[0]),t.innerHTML=""):a.append(e)}var i=this,r=i.params,a=i.slidesEl;r.loop&&i.loopDestroy();if("object"===_typeof(e)&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&t(e[s]);else t(e);i.recalcSlides(),r.loop&&i.loopCreate(),r.observer&&!i.isElement||i.update()}function se(e){function t(e){var t;"string"==typeof e?((t=document.createElement("div")).innerHTML=e,s.prepend(t.children[0]),t.innerHTML=""):s.prepend(e)}var i=this,r=i.params,a=i.activeIndex,s=i.slidesEl,n=(r.loop&&i.loopDestroy(),a+1);if("object"===_typeof(e)&&"length"in e){for(var o=0;o<e.length;o+=1)e[o]&&t(e[o]);n=a+e.length}else t(e);i.recalcSlides(),r.loop&&i.loopCreate(),r.observer&&!i.isElement||i.update(),i.slideTo(n,0,!1)}function l(e){var t,i=e.effect,r=e.swiper,a=e.on,s=e.setTranslate,n=e.setTransition,o=e.overwriteParams,l=e.perspective,c=e.recreateShadows,d=e.getEffectParams;a("beforeInit",function(){var e;r.params.effect===i&&(r.classNames.push("".concat(r.params.containerModifierClass).concat(i)),l&&l()&&r.classNames.push("".concat(r.params.containerModifierClass,"3d")),e=o?o():{},Object.assign(r.params,e),Object.assign(r.originalParams,e))}),a("setTranslate",function(){r.params.effect===i&&s()}),a("setTransition",function(e,t){r.params.effect===i&&n(t)}),a("transitionEnd",function(){r.params.effect===i&&c&&d&&d().slideShadows&&(r.slides.forEach(function(e){e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(function(e){return e.remove()})}),c())}),a("virtualUpdate",function(){r.params.effect===i&&(r.slides.length||(t=!0),requestAnimationFrame(function(){t&&r.slides&&r.slides.length&&(s(),t=!1)}))})}function E(e,t){var i=a(t);return i!==t&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function c(e){var t,i=e.swiper,r=e.duration,a=e.transformElements,e=e.allSlides,s=i.activeIndex;i.params.virtualTranslate&&0!==r&&(t=!1,(e?a:a.filter(function(e){var t,e=e.classList.contains("swiper-slide-transform")?(t=e).parentElement||i.slides.filter(function(e){return e.shadowRoot&&e.shadowRoot===t.parentNode})[0]:e;return i.getSlideIndex(e)===s})).forEach(function(e){g(e,function(){var e;t||i&&!i.destroyed&&(t=!0,i.animating=!1,e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0}),i.wrapperEl.dispatchEvent(e))})}))}function x(e,t,i){i="swiper-slide-shadow".concat(i?"-".concat(i):"").concat(e?" swiper-slide-shadow-".concat(e):""),e=a(t),t=e.querySelector(".".concat(i.split(" ").join(".")));return t||(t=M("div",i.split(" ")),e.append(t)),t}Object.keys(te).forEach(function(t){Object.keys(te[t]).forEach(function(e){o.prototype[e]=te[t][e]})}),o.use([function(e){function s(){n&&!n.destroyed&&n.initialized&&(r("beforeResize"),r("resize"))}function t(){n&&!n.destroyed&&n.initialized&&r("orientationchange")}var n=e.swiper,i=e.on,r=e.emit,a=k(),o=null,l=null;i("init",function(){n.params.resizeObserver&&void 0!==a.ResizeObserver?n&&!n.destroyed&&n.initialized&&(o=new ResizeObserver(function(i){l=a.requestAnimationFrame(function(){var e=n.width,t=n.height,r=e,a=t;i.forEach(function(e){var t=e.contentBoxSize,i=e.contentRect,e=e.target;e&&e!==n.el||(r=i?i.width:(t[0]||t).inlineSize,a=i?i.height:(t[0]||t).blockSize)}),r===e&&a===t||s()})})).observe(n.el):(a.addEventListener("resize",s),a.addEventListener("orientationchange",t))}),i("destroy",function(){l&&a.cancelAnimationFrame(l),o&&o.unobserve&&n.el&&(o.unobserve(n.el),o=null),a.removeEventListener("resize",s),a.removeEventListener("orientationchange",t)})},function(e){function i(e,t){void 0===t&&(t={});var i=new(o.MutationObserver||o.WebkitMutationObserver)(function(e){var t;r.__preventObserver__||(1===e.length?s("observerUpdate",e[0]):(t=function(){s("observerUpdate",e[0])},o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)))});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),n.push(i)}var r=e.swiper,t=e.extendParams,a=e.on,s=e.emit,n=[],o=k();t({observer:!1,observeParents:!1,observeSlideChildren:!1}),a("init",function(){if(r.params.observer){if(r.params.observeParents)for(var e=j(r.hostEl),t=0;t<e.length;t+=1)i(e[t]);i(r.hostEl,{childList:r.params.observeSlideChildren}),i(r.wrapperEl,{attributes:!1})}}),a("destroy",function(){n.forEach(function(e){e.disconnect()}),n.splice(0,n.length)})}]),o.use([function(e){var t,P=e.swiper,i=e.extendParams,r=e.on,A=e.emit,e=(i({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}}),L()),a=(P.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]},e.createElement("div"));function _(e,t){var i,r=P.params.virtual;return r.cache&&P.virtual.cache[t]?P.virtual.cache[t]:(r.renderSlide?"string"==typeof(i=r.renderSlide.call(P,e,t))&&(a.innerHTML=i,i=a.children[0]):i=P.isElement?M("swiper-slide"):M("div",P.params.slideClass),i.setAttribute("data-swiper-slide-index",t),r.renderSlide||(i.innerHTML=e),r.cache&&(P.virtual.cache[t]=i),i)}function o(e,t){var i=P.params,r=i.slidesPerView,a=i.slidesPerGroup,s=i.centeredSlides,n=i.loop,i=i.initialSlide;if(!(t&&!n&&0<i)){var o,t=P.params.virtual,i=t.addSlidesBefore,t=t.addSlidesAfter,l=P.virtual,c=l.from,d=l.to,p=l.slides,u=l.slidesGrid,l=l.offset,h=(P.params.cssMode||P.updateActiveIndex(),P.activeIndex||0),f=P.rtlTranslate?"right":P.isHorizontal()?"left":"top",t=s?(o=Math.floor(r/2)+a+t,Math.floor(r/2)+a+i):(o=r+(a-1)+t,(n?r:a)+i),m=h-t,v=h+o,g=(n||(m=Math.max(m,0),v=Math.min(v,p.length-1)),(P.slidesGrid[m]||0)-(P.slidesGrid[0]||0));if(n&&t<=h?(m-=t,s||(g+=P.slidesGrid[0])):n&&h<t&&(m=-t,s)&&(g+=P.slidesGrid[0]),Object.assign(P.virtual,{from:m,to:v,offset:g,slidesGrid:P.slidesGrid,slidesBefore:t,slidesAfter:o}),c!==m||d!==v||e)if(P.params.virtual.renderExternal)P.params.virtual.renderExternal.call(P,{offset:g,from:m,to:v,slides:function(){for(var e=[],t=m;t<=v;t+=1)e.push(p[t]);return e}()}),P.params.virtual.renderExternalUpdate?z():A("virtualUpdate");else{var y=[],b=[],w=function(e){var t=e;return e<0?t=p.length+e:t>=p.length&&(t-=p.length),t};if(e)P.slides.filter(function(e){return e.matches(".".concat(P.params.slideClass,", swiper-slide"))}).forEach(function(e){e.remove()});else for(var E=c;E<=d;E+=1)!function(){var t;(E<m||v<E)&&(t=w(E),P.slides.filter(function(e){return e.matches(".".concat(P.params.slideClass,'[data-swiper-slide-index="').concat(t,'"], swiper-slide[data-swiper-slide-index="').concat(t,'"]'))}).forEach(function(e){e.remove()}))}();for(var x,r=n?-p.length:0,S=n?2*p.length:p.length,C=r;C<S;C+=1)m<=C&&C<=v&&(x=w(C),void 0===d||e?b.push(x):(d<C&&b.push(x),C<c&&y.push(x)));if(b.forEach(function(e){P.slidesEl.append(_(p[e],e))}),n)for(var T=y.length-1;0<=T;--T){var M=y[T];P.slidesEl.prepend(_(p[M],M))}else y.sort(function(e,t){return t-e}),y.forEach(function(e){P.slidesEl.prepend(_(p[e],e))});Z(P.slidesEl,".swiper-slide, swiper-slide").forEach(function(e){e.style[f]="".concat(g-Math.abs(P.cssOverflowAdjustment()),"px")}),z()}else P.slidesGrid!==u&&g!==l&&P.slides.forEach(function(e){e.style[f]="".concat(g-Math.abs(P.cssOverflowAdjustment()),"px")}),P.updateProgress(),A("virtualUpdate")}function z(){P.updateSlides(),P.updateProgress(),P.updateSlidesClasses(),A("virtualUpdate")}}r("beforeInit",function(){var e,t;P.params.virtual.enabled&&(void 0===P.passedParams.virtual.slides&&(t=_toConsumableArray(P.slidesEl.children).filter(function(e){return e.matches(".".concat(P.params.slideClass,", swiper-slide"))}))&&t.length&&(P.virtual.slides=_toConsumableArray(t),e=!0,t.forEach(function(e,t){e.setAttribute("data-swiper-slide-index",t),(P.virtual.cache[t]=e).remove()})),e||(P.virtual.slides=P.params.virtual.slides),P.classNames.push("".concat(P.params.containerModifierClass,"virtual")),P.params.watchSlidesProgress=!0,P.originalParams.watchSlidesProgress=!0,o(!1,!0))}),r("setTranslate",function(){P.params.virtual.enabled&&(P.params.cssMode&&!P._immediateVirtual?(clearTimeout(t),t=setTimeout(function(){o()},100)):o())}),r("init update resize",function(){P.params.virtual.enabled&&P.params.cssMode&&K(P.wrapperEl,"--swiper-virtual-size","".concat(P.virtualSize,"px"))}),Object.assign(P.virtual,{appendSlide:function(e){if("object"===_typeof(e)&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&P.virtual.slides.push(e[t]);else P.virtual.slides.push(e);o(!0)},prependSlide:function(e){var r,a,t=P.activeIndex,i=t+1,s=1;if(Array.isArray(e)){for(var n=0;n<e.length;n+=1)e[n]&&P.virtual.slides.unshift(e[n]);i=t+e.length,s=e.length}else P.virtual.slides.unshift(e);P.params.virtual.cache&&(r=P.virtual.cache,a={},Object.keys(r).forEach(function(e){var t=r[e],i=t.getAttribute("data-swiper-slide-index");i&&t.setAttribute("data-swiper-slide-index",parseInt(i,10)+s),a[parseInt(e,10)+s]=t}),P.virtual.cache=a),o(!0),P.slideTo(i,0)},removeSlide:function(t){if(null!=t){var e=P.activeIndex;if(Array.isArray(t))for(var i=t.length-1;0<=i;--i)P.params.virtual.cache&&(delete P.virtual.cache[t[i]],Object.keys(P.virtual.cache).forEach(function(e){t<e&&(P.virtual.cache[e-1]=P.virtual.cache[e],P.virtual.cache[e-1].setAttribute("data-swiper-slide-index",e-1),delete P.virtual.cache[e])})),P.virtual.slides.splice(t[i],1),t[i]<e&&--e,e=Math.max(e,0);else P.params.virtual.cache&&(delete P.virtual.cache[t],Object.keys(P.virtual.cache).forEach(function(e){t<e&&(P.virtual.cache[e-1]=P.virtual.cache[e],P.virtual.cache[e-1].setAttribute("data-swiper-slide-index",e-1),delete P.virtual.cache[e])})),P.virtual.slides.splice(t,1),t<e&&--e,e=Math.max(e,0);o(!0),P.slideTo(e,0)}},removeAllSlides:function(){P.virtual.slides=[],P.params.virtual.cache&&(P.virtual.cache={}),o(!0),P.slideTo(0,0)},update:o})},function(e){var b=e.swiper,t=e.extendParams,i=e.on,w=e.emit,E=L(),x=k();function r(e){if(b.enabled){var t=b.rtlTranslate,i=(e=e.originalEvent?e.originalEvent:e).keyCode||e.charCode,r=b.params.keyboard.pageUpDown,a=r&&33===i,r=r&&34===i,s=37===i,n=39===i,o=38===i,l=40===i;if(!b.allowSlideNext&&(b.isHorizontal()&&n||b.isVertical()&&l||r))return!1;if(!b.allowSlidePrev&&(b.isHorizontal()&&s||b.isVertical()&&o||a))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||E.activeElement&&E.activeElement.nodeName&&("input"===E.activeElement.nodeName.toLowerCase()||"textarea"===E.activeElement.nodeName.toLowerCase()))){if(b.params.keyboard.onlyInViewport&&(a||r||s||n||o||l)){var c=!1;if(0<j(b.el,".".concat(b.params.slideClass,", swiper-slide")).length&&0===j(b.el,".".concat(b.params.slideActiveClass)).length)return;for(var d=b.el,p=d.clientWidth,u=d.clientHeight,h=x.innerWidth,f=x.innerHeight,m=O(d),v=(t&&(m.left-=d.scrollLeft),[[m.left,m.top],[m.left+p,m.top],[m.left,m.top+u],[m.left+p,m.top+u]]),g=0;g<v.length;g+=1){var y=v[g];0<=y[0]&&y[0]<=h&&0<=y[1]&&y[1]<=f&&(0===y[0]&&0===y[1]||(c=!0))}if(!c)return}b.isHorizontal()?((a||r||s||n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),((r||n)&&!t||(a||s)&&t)&&b.slideNext(),((a||s)&&!t||(r||n)&&t)&&b.slidePrev()):((a||r||o||l)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),(r||l)&&b.slideNext(),(a||o)&&b.slidePrev()),w("keyPress",i)}}}function a(){b.keyboard.enabled||(E.addEventListener("keydown",r),b.keyboard.enabled=!0)}function s(){b.keyboard.enabled&&(E.removeEventListener("keydown",r),b.keyboard.enabled=!1)}t({keyboard:{enabled:!(b.keyboard={enabled:!1}),onlyInViewport:!0,pageUpDown:!0}}),i("init",function(){b.params.keyboard.enabled&&a()}),i("destroy",function(){b.keyboard.enabled&&s()}),Object.assign(b.keyboard,{enable:a,disable:s})},function(e){var u,h,f=e.swiper,t=e.extendParams,i=e.on,m=e.emit,r=k(),a=(t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),f.mousewheel={enabled:!1},y()),v=[];function s(){f.enabled&&(f.mouseEntered=!0)}function n(){f.enabled&&(f.mouseEntered=!1)}function g(e){f.params.mousewheel.thresholdDelta&&e.delta<f.params.mousewheel.thresholdDelta||f.params.mousewheel.thresholdTime&&y()-a<f.params.mousewheel.thresholdTime||6<=e.delta&&y()-a<60||(e.direction<0?f.isEnd&&!f.params.loop||f.animating||(f.slideNext(),m("scroll",e.raw)):f.isBeginning&&!f.params.loop||f.animating||(f.slidePrev(),m("scroll",e.raw)),a=(new r.Date).getTime())}function o(e){var t=e;if(f.enabled&&!e.target.closest(".".concat(f.params.mousewheel.noMousewheelClass))){var i=f.params.mousewheel,r=(f.params.cssMode&&t.preventDefault(),f.el),r=(r="container"!==f.params.mousewheel.eventsTarget?document.querySelector(f.params.mousewheel.eventsTarget):r)&&r.contains(t.target);if(!f.mouseEntered&&!r&&!i.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var r=0,a=f.rtlTranslate?-1:1,s=(p=d=l=n=0,"detail"in(s=t)&&(l=s.detail),"wheelDelta"in s&&(l=-s.wheelDelta/120),"wheelDeltaY"in s&&(l=-s.wheelDeltaY/120),"wheelDeltaX"in s&&(n=-s.wheelDeltaX/120),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(n=l,l=0),d=10*n,p=10*l,"deltaY"in s&&(p=s.deltaY),"deltaX"in s&&(d=s.deltaX),s.shiftKey&&!d&&(d=p,p=0),(d||p)&&s.deltaMode&&(1===s.deltaMode?(d*=40,p*=40):(d*=800,p*=800)),{spinX:n=d&&!n?d<1?-1:1:n,spinY:l=p&&!l?p<1?-1:1:l,pixelX:d,pixelY:p});if(i.forceToAxis)if(f.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return!0;r=-s.pixelX*a}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return!0;r=-s.pixelY}else r=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*a:-s.pixelY;if(0===r)return!0;i.invert&&(r=-r);var n=f.getTranslate()+r*i.sensitivity;if((n=n>=f.minTranslate()?f.minTranslate():n)<=f.maxTranslate()&&(n=f.maxTranslate()),(!!f.params.loop||!(n===f.minTranslate()||n===f.maxTranslate()))&&f.params.nested&&t.stopPropagation(),f.params.freeMode&&f.params.freeMode.enabled){var o={time:y(),delta:Math.abs(r),direction:Math.sign(r)},l=h&&o.time<h.time+500&&o.delta<=h.delta&&o.direction===h.direction;if(!l){h=void 0;var c,d=f.getTranslate()+r*i.sensitivity,p=f.isBeginning,a=f.isEnd;if((d=d>=f.minTranslate()?f.minTranslate():d)<=f.maxTranslate()&&(d=f.maxTranslate()),f.setTransition(0),f.setTranslate(d),f.updateProgress(),f.updateActiveIndex(),f.updateSlidesClasses(),(!p&&f.isBeginning||!a&&f.isEnd)&&f.updateSlidesClasses(),f.params.loop&&f.loopFix({direction:o.direction<0?"next":"prev",byMousewheel:!0}),f.params.freeMode.sticky&&(clearTimeout(u),u=void 0,15<=v.length&&v.shift(),s=v.length?v[v.length-1]:void 0,n=v[0],v.push(o),s&&(o.delta>s.delta||o.direction!==s.direction)?v.splice(0):15<=v.length&&o.time-n.time<500&&1<=n.delta-o.delta&&o.delta<=6&&(c=0<r?.8:.2,h=o,v.splice(0),u=T(function(){f.slideToClosest(f.params.speed,!0,void 0,c)},0)),u=u||T(function(){h=o,v.splice(0),f.slideToClosest(f.params.speed,!0,void 0,.5)},500)),l||m("scroll",t),f.params.autoplay&&f.params.autoplayDisableOnInteraction&&f.autoplay.stop(),i.releaseOnEdges&&(d===f.minTranslate()||d===f.maxTranslate()))return!0}}else{p={time:y(),delta:Math.abs(r),direction:Math.sign(r),raw:e},a=(2<=v.length&&v.shift(),v.length?v[v.length-1]:void 0);if(v.push(p),(!a||p.direction!==a.direction||p.delta>a.delta||p.time>a.time+150)&&g(p),function(e){var t=f.params.mousewheel;if(e.direction<0){if(f.isEnd&&!f.params.loop&&t.releaseOnEdges)return 1}else if(f.isBeginning&&!f.params.loop&&t.releaseOnEdges)return 1}(p))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}}function l(e){var t=f.el;(t="container"!==f.params.mousewheel.eventsTarget?document.querySelector(f.params.mousewheel.eventsTarget):t)[e]("mouseenter",s),t[e]("mouseleave",n),t[e]("wheel",o)}function c(){if(f.params.cssMode)f.wrapperEl.removeEventListener("wheel",o);else{if(f.mousewheel.enabled)return!1;l("addEventListener"),f.mousewheel.enabled=!0}return!0}function d(){if(f.params.cssMode)f.wrapperEl.addEventListener(event,o);else{if(!f.mousewheel.enabled)return!1;l("removeEventListener"),f.mousewheel.enabled=!1}return!0}i("init",function(){!f.params.mousewheel.enabled&&f.params.cssMode&&d(),f.params.mousewheel.enabled&&c()}),i("destroy",function(){f.params.cssMode&&c(),f.mousewheel.enabled&&d()}),Object.assign(f.mousewheel,{enable:c,disable:d})},function(e){var o=e.swiper,t=e.extendParams,i=e.on,l=e.emit;function a(e){var t;return!(e&&"string"==typeof e&&o.isElement&&(t=o.el.querySelector(e)))&&(e&&("string"==typeof e&&(t=_toConsumableArray(document.querySelectorAll(e))),o.params.uniqueNavElements&&"string"==typeof e&&t&&1<t.length&&1===o.el.querySelectorAll(e).length?t=o.el.querySelector(e):t&&1===t.length&&(t=t[0])),e)&&!t?e:t}function r(e,i){var r=o.params.navigation;(e=P(e)).forEach(function(e){var t;e&&((t=e.classList)[i?"add":"remove"].apply(t,_toConsumableArray(r.disabledClass.split(" "))),"BUTTON"===e.tagName&&(e.disabled=i),o.params.watchOverflow)&&o.enabled&&e.classList[o.isLocked?"add":"remove"](r.lockClass)})}function s(){var e=o.navigation,t=e.nextEl,e=e.prevEl;o.params.loop?(r(e,!1),r(t,!1)):(r(e,o.isBeginning&&!o.params.rewind),r(t,o.isEnd&&!o.params.rewind))}function n(e){e.preventDefault(),o.isBeginning&&!o.params.loop&&!o.params.rewind||(o.slidePrev(),l("navigationPrev"))}function c(e){e.preventDefault(),o.isEnd&&!o.params.loop&&!o.params.rewind||(o.slideNext(),l("navigationNext"))}function d(){var e,t,i,r=o.params.navigation;o.params.navigation=re(o,o.originalParams.navigation,o.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),(r.nextEl||r.prevEl)&&(e=a(r.nextEl),t=a(r.prevEl),Object.assign(o.navigation,{nextEl:e,prevEl:t}),e=P(e),t=P(t),i=function(e,t){e&&e.addEventListener("click","next"===t?c:n),!o.enabled&&e&&(t=e.classList).add.apply(t,_toConsumableArray(r.lockClass.split(" ")))},e.forEach(function(e){return i(e,"next")}),t.forEach(function(e){return i(e,"prev")}))}function p(){function t(e,t){e.removeEventListener("click","next"===t?c:n),(t=e.classList).remove.apply(t,_toConsumableArray(o.params.navigation.disabledClass.split(" ")))}var e=o.navigation,i=e.nextEl,e=e.prevEl,i=P(i),e=P(e);i.forEach(function(e){return t(e,"next")}),e.forEach(function(e){return t(e,"prev")})}t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),o.navigation={nextEl:null,prevEl:null},i("init",function(){(!1===o.params.navigation.enabled?u:(d(),s))()}),i("toEdge fromEdge lock unlock",function(){s()}),i("destroy",function(){p()}),i("enable disable",function(){var e=o.navigation,t=e.nextEl,e=e.prevEl,t=P(t),e=P(e);o.enabled?s():[].concat(_toConsumableArray(t),_toConsumableArray(e)).filter(function(e){return!!e}).forEach(function(e){return e.classList.add(o.params.navigation.lockClass)})}),i("click",function(e,t){var i,r=o.navigation,a=r.nextEl,s=r.prevEl,a=P(a),s=P(s),r=t.target,n=s.includes(r)||a.includes(r);o.isElement&&!n&&(t=t.path||t.composedPath&&t.composedPath())&&(n=t.find(function(e){return a.includes(e)||s.includes(e)})),!o.params.navigation.hideOnClick||n||o.pagination&&o.params.pagination&&o.params.pagination.clickable&&(o.pagination.el===r||o.pagination.el.contains(r))||(a.length?i=a[0].classList.contains(o.params.navigation.hiddenClass):s.length&&(i=s[0].classList.contains(o.params.navigation.hiddenClass)),l(!0===i?"navigationShow":"navigationHide"),[].concat(_toConsumableArray(a),_toConsumableArray(s)).filter(function(e){return!!e}).forEach(function(e){return e.classList.toggle(o.params.navigation.hiddenClass)}))});var u=function(){var e;(e=o.el.classList).add.apply(e,_toConsumableArray(o.params.navigation.navigationDisabledClass.split(" "))),p()};Object.assign(o.navigation,{enable:function(){var e;(e=o.el.classList).remove.apply(e,_toConsumableArray(o.params.navigation.navigationDisabledClass.split(" "))),d(),s()},disable:u,update:s,init:d,destroy:p})},function(e){var m,v=e.swiper,t=e.extendParams,i=e.on,g=e.emit,e="swiper-pagination",y=(t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"".concat(e,"-bullet"),bulletActiveClass:"".concat(e,"-bullet-active"),modifierClass:"".concat(e,"-"),currentClass:"".concat(e,"-current"),totalClass:"".concat(e,"-total"),hiddenClass:"".concat(e,"-hidden"),progressbarFillClass:"".concat(e,"-progressbar-fill"),progressbarOppositeClass:"".concat(e,"-progressbar-opposite"),clickableClass:"".concat(e,"-clickable"),lockClass:"".concat(e,"-lock"),horizontalClass:"".concat(e,"-horizontal"),verticalClass:"".concat(e,"-vertical"),paginationDisabledClass:"".concat(e,"-disabled")}}),v.pagination={el:null,bullets:[]},0);function b(){return!v.params.pagination.el||!v.pagination.el||Array.isArray(v.pagination.el)&&0===v.pagination.el.length}function w(e,t){var i=v.params.pagination.bulletActiveClass;(e=e&&e["".concat("prev"===t?"previous":"next","ElementSibling")])&&(e.classList.add("".concat(i,"-").concat(t)),e=e["".concat("prev"===t?"previous":"next","ElementSibling")])&&e.classList.add("".concat(i,"-").concat(t,"-").concat(t))}function r(e){var t=e.target.closest(A(v.params.pagination.bulletClass));t&&(e.preventDefault(),e=z(t)*v.params.slidesPerGroup,v.params.loop?v.realIndex!==e&&v.slideToLoop(e):v.slideTo(e))}function a(){var e=v.rtl,n=v.params.pagination;if(!b()){var o,t=P(t=v.pagination.el),i=(v.virtual&&v.params.virtual.enabled?v.virtual:v).slides.length,l=v.params.loop?Math.ceil(i/v.params.slidesPerGroup):v.snapGrid.length;if(v.params.loop?(h=v.previousRealIndex||0,o=1<v.params.slidesPerGroup?Math.floor(v.realIndex/v.params.slidesPerGroup):v.realIndex):void 0!==v.snapIndex?(o=v.snapIndex,h=v.previousSnapIndex):(h=v.previousIndex||0,o=v.activeIndex||0),"bullets"===n.type&&v.pagination.bullets&&0<v.pagination.bullets.length){var r,a,s,c,d,p=v.pagination.bullets;if(n.dynamicBullets&&(m=ee(p[0],v.isHorizontal()?"width":"height",!0),t.forEach(function(e){e.style[v.isHorizontal()?"width":"height"]="".concat(m*(n.dynamicMainBullets+4),"px")}),1<n.dynamicMainBullets&&void 0!==h&&((y+=o-(h||0))>n.dynamicMainBullets-1?y=n.dynamicMainBullets-1:y<0&&(y=0)),r=Math.max(o-y,0),s=((a=r+(Math.min(p.length,n.dynamicMainBullets)-1))+r)/2),p.forEach(function(e){var t=_toConsumableArray(["","-next","-next-next","-prev","-prev-prev","-main"].map(function(e){return"".concat(n.bulletActiveClass).concat(e)})).map(function(e){return"string"==typeof e&&e.includes(" ")?e.split(" "):e}).flat();(e=e.classList).remove.apply(e,_toConsumableArray(t))}),1<t.length)p.forEach(function(e){var t,i=z(e);i===o?(t=e.classList).add.apply(t,_toConsumableArray(n.bulletActiveClass.split(" "))):v.isElement&&e.setAttribute("part","bullet"),n.dynamicBullets&&(r<=i&&i<=a&&(t=e.classList).add.apply(t,_toConsumableArray("".concat(n.bulletActiveClass,"-main").split(" "))),i===r&&w(e,"prev"),i===a)&&w(e,"next")});else{var i=p[o];if(i&&(h=i.classList).add.apply(h,_toConsumableArray(n.bulletActiveClass.split(" "))),v.isElement&&p.forEach(function(e,t){e.setAttribute("part",t===o?"bullet-active":"bullet")}),n.dynamicBullets){for(var u,i=p[r],h=p[a],f=r;f<=a;f+=1)p[f]&&(u=p[f].classList).add.apply(u,_toConsumableArray("".concat(n.bulletActiveClass,"-main").split(" ")));w(i,"prev"),w(h,"next")}}n.dynamicBullets&&(i=Math.min(p.length,n.dynamicMainBullets+4),c=(m*i-m)/2-s*m,d=e?"right":"left",p.forEach(function(e){e.style[v.isHorizontal()?d:"top"]="".concat(c,"px")}))}t.forEach(function(e,t){var i,r,a,s;"fraction"===n.type&&(e.querySelectorAll(A(n.currentClass)).forEach(function(e){e.textContent=n.formatFractionCurrent(o+1)}),e.querySelectorAll(A(n.totalClass)).forEach(function(e){e.textContent=n.formatFractionTotal(l)})),"progressbar"===n.type&&(i=n.progressbarOpposite?v.isHorizontal()?"vertical":"horizontal":v.isHorizontal()?"horizontal":"vertical",r=(o+1)/l,s=a=1,"horizontal"===i?a=r:s=r,e.querySelectorAll(A(n.progressbarFillClass)).forEach(function(e){e.style.transform="translate3d(0,0,0) scaleX(".concat(a,") scaleY(").concat(s,")"),e.style.transitionDuration="".concat(v.params.speed,"ms")})),"custom"===n.type&&n.renderCustom?(e.innerHTML=n.renderCustom(v,o+1,l),0===t&&g("paginationRender",e)):(0===t&&g("paginationRender",e),g("paginationUpdate",e)),v.params.watchOverflow&&v.enabled&&e.classList[v.isLocked?"add":"remove"](n.lockClass)})}}function s(){var i=v.params.pagination;if(!b()){var e=v.virtual&&v.params.virtual.enabled?v.virtual.slides.length:v.grid&&1<v.params.grid.rows?v.slides.length/Math.ceil(v.params.grid.rows):v.slides.length,t=P(t=v.pagination.el),r="";if("bullets"===i.type){var a=v.params.loop?Math.ceil(e/v.params.slidesPerGroup):v.snapGrid.length;v.params.freeMode&&v.params.freeMode.enabled&&e<a&&(a=e);for(var s=0;s<a;s+=1)i.renderBullet?r+=i.renderBullet.call(v,s,i.bulletClass):r+="<".concat(i.bulletElement," ").concat(v.isElement?'part="bullet"':"",' class="').concat(i.bulletClass,'"></').concat(i.bulletElement,">")}"fraction"===i.type&&(r=i.renderFraction?i.renderFraction.call(v,i.currentClass,i.totalClass):'<span class="'.concat(i.currentClass,'"></span>')+" / "+'<span class="'.concat(i.totalClass,'"></span>')),"progressbar"===i.type&&(r=i.renderProgressbar?i.renderProgressbar.call(v,i.progressbarFillClass):'<span class="'.concat(i.progressbarFillClass,'"></span>')),v.pagination.bullets=[],t.forEach(function(e){var t;"custom"!==i.type&&(e.innerHTML=r||""),"bullets"===i.type&&(t=v.pagination.bullets).push.apply(t,_toConsumableArray(e.querySelectorAll(A(i.bulletClass))))}),"custom"!==i.type&&g("paginationRender",t[0])}}function n(){v.params.pagination=re(v,v.originalParams.pagination,v.params.pagination,{el:"swiper-pagination"});var e,i=v.params.pagination;i.el&&(e=(e=(e="string"==typeof i.el&&v.isElement?v.el.querySelector(i.el):e)||"string"!=typeof i.el?e:_toConsumableArray(document.querySelectorAll(i.el)))||i.el)&&0!==e.length&&(v.params.uniqueNavElements&&"string"==typeof i.el&&Array.isArray(e)&&1<e.length&&1<(e=_toConsumableArray(v.el.querySelectorAll(i.el))).length&&(e=e.filter(function(e){return j(e,".swiper")[0]===v.el})[0]),Array.isArray(e)&&1===e.length&&(e=e[0]),Object.assign(v.pagination,{el:e}),(e=P(e)).forEach(function(e){var t;"bullets"===i.type&&i.clickable&&(t=e.classList).add.apply(t,_toConsumableArray((i.clickableClass||"").split(" "))),e.classList.add(i.modifierClass+i.type),e.classList.add(v.isHorizontal()?i.horizontalClass:i.verticalClass),"bullets"===i.type&&i.dynamicBullets&&(e.classList.add("".concat(i.modifierClass).concat(i.type,"-dynamic")),y=0,i.dynamicMainBullets<1)&&(i.dynamicMainBullets=1),"progressbar"===i.type&&i.progressbarOpposite&&e.classList.add(i.progressbarOppositeClass),i.clickable&&e.addEventListener("click",r),v.enabled||e.classList.add(i.lockClass)}))}function o(){var e,i=v.params.pagination;b()||((e=v.pagination.el)&&(e=P(e)).forEach(function(e){var t;e.classList.remove(i.hiddenClass),e.classList.remove(i.modifierClass+i.type),e.classList.remove(v.isHorizontal()?i.horizontalClass:i.verticalClass),i.clickable&&((t=e.classList).remove.apply(t,_toConsumableArray((i.clickableClass||"").split(" "))),e.removeEventListener("click",r))}),v.pagination.bullets&&v.pagination.bullets.forEach(function(e){return(e=e.classList).remove.apply(e,_toConsumableArray(i.bulletActiveClass.split(" ")))}))}i("changeDirection",function(){var t;v.pagination&&v.pagination.el&&(t=v.params.pagination,P(v.pagination.el).forEach(function(e){e.classList.remove(t.horizontalClass,t.verticalClass),e.classList.add(v.isHorizontal()?t.horizontalClass:t.verticalClass)}))}),i("init",function(){(!1===v.params.pagination.enabled?l:(n(),s(),a))()}),i("activeIndexChange",function(){void 0===v.snapIndex&&a()}),i("snapIndexChange",function(){a()}),i("snapGridLengthChange",function(){s(),a()}),i("destroy",function(){o()}),i("enable disable",function(){var e=v.pagination.el;e&&(e=P(e)).forEach(function(e){return e.classList[v.enabled?"remove":"add"](v.params.pagination.lockClass)})}),i("lock unlock",function(){a()}),i("click",function(e,t){var t=t.target,i=P(v.pagination.el);v.params.pagination.el&&v.params.pagination.hideOnClick&&i&&0<i.length&&!t.classList.contains(v.params.pagination.bulletClass)&&(v.navigation&&(v.navigation.nextEl&&t===v.navigation.nextEl||v.navigation.prevEl&&t===v.navigation.prevEl)||(t=i[0].classList.contains(v.params.pagination.hiddenClass),g(!0===t?"paginationShow":"paginationHide"),i.forEach(function(e){return e.classList.toggle(v.params.pagination.hiddenClass)})))});var l=function(){v.el.classList.add(v.params.pagination.paginationDisabledClass);var e=v.pagination.el;e&&(e=P(e)).forEach(function(e){return e.classList.add(v.params.pagination.paginationDisabledClass)}),o()};Object.assign(v.pagination,{enable:function(){v.el.classList.remove(v.params.pagination.paginationDisabledClass);var e=v.pagination.el;e&&(e=P(e)).forEach(function(e){return e.classList.remove(v.params.pagination.paginationDisabledClass)}),n(),s(),a()},disable:l,render:s,update:a,init:n,destroy:o})},function(e){var s,n,o,r,l=e.swiper,t=e.extendParams,i=e.on,c=e.emit,d=L(),p=!1,u=null,h=null;function a(){var e,t,i,r,a,s;l.params.scrollbar.el&&l.scrollbar.el&&(r=l.scrollbar,e=l.rtlTranslate,t=r.dragEl,i=r.el,r=l.params.scrollbar,s=l.params.loop?l.progressLoop:l.progress,s=(o-(a=n))*s,e?0<(s=-s)?(a=n-s,s=0):o<-s+n&&(a=o+s):s<0?(a=n+s,s=0):o<s+n&&(a=o-s),l.isHorizontal()?(t.style.transform="translate3d(".concat(s,"px, 0, 0)"),t.style.width="".concat(a,"px")):(t.style.transform="translate3d(0px, ".concat(s,"px, 0)"),t.style.height="".concat(a,"px")),r.hide)&&(clearTimeout(u),i.style.opacity=1,u=setTimeout(function(){i.style.opacity=0,i.style.transitionDuration="400ms"},1e3))}function f(){var e,t,i;l.params.scrollbar.el&&l.scrollbar.el&&(t=(e=l.scrollbar).dragEl,i=e.el,t.style.width="",t.style.height="",o=l.isHorizontal()?i.offsetWidth:i.offsetHeight,r=l.size/(l.virtualSize+l.params.slidesOffsetBefore-(l.params.centeredSlides?l.snapGrid[0]:0)),n="auto"===l.params.scrollbar.dragSize?o*r:parseInt(l.params.scrollbar.dragSize,10),l.isHorizontal()?t.style.width="".concat(n,"px"):t.style.height="".concat(n,"px"),i.style.display=1<=r?"none":"",l.params.scrollbar.hide&&(i.style.opacity=0),l.params.watchOverflow)&&l.enabled&&e.el.classList[l.isLocked?"add":"remove"](l.params.scrollbar.lockClass)}function m(e){return l.isHorizontal()?e.clientX:e.clientY}function v(e){var t=l.scrollbar,i=l.rtlTranslate,t=t.el,e=(m(e)-O(t)[l.isHorizontal()?"left":"top"]-(null!==s?s:n/2))/(o-n),t=(e=Math.max(Math.min(e,1),0),i&&(e=1-e),l.minTranslate()+(l.maxTranslate()-l.minTranslate())*e);l.updateProgress(t),l.setTranslate(t),l.updateActiveIndex(),l.updateSlidesClasses()}function g(e){var t=l.params.scrollbar,i=l.scrollbar,r=l.wrapperEl,a=i.el,i=i.dragEl;p=!0,s=e.target===i?m(e)-e.target.getBoundingClientRect()[l.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),r.style.transitionDuration="100ms",i.style.transitionDuration="100ms",v(e),clearTimeout(h),a.style.transitionDuration="0ms",t.hide&&(a.style.opacity=1),l.params.cssMode&&(l.wrapperEl.style["scroll-snap-type"]="none"),c("scrollbarDragStart",e)}function y(e){var t=l.scrollbar,i=l.wrapperEl,r=t.el,t=t.dragEl;p&&(e.preventDefault&&e.cancelable?e.preventDefault():e.returnValue=!1,v(e),i.style.transitionDuration="0ms",r.style.transitionDuration="0ms",t.style.transitionDuration="0ms",c("scrollbarDragMove",e))}function b(e){var t=l.params.scrollbar,i=l.scrollbar,r=l.wrapperEl,a=i.el;p&&(p=!1,l.params.cssMode&&(l.wrapperEl.style["scroll-snap-type"]="",r.style.transitionDuration=""),t.hide&&(clearTimeout(h),h=T(function(){a.style.opacity=0,a.style.transitionDuration="400ms"},1e3)),c("scrollbarDragEnd",e),t.snapOnRelease)&&l.slideToClosest()}function w(e){var t,i=l.scrollbar,r=l.params,i=i.el;i&&(t=!!r.passiveListeners&&{passive:!1,capture:!1},r=!!r.passiveListeners&&{passive:!0,capture:!1},i=i)&&(i[i="on"===e?"addEventListener":"removeEventListener"]("pointerdown",g,t),d[i]("pointermove",y,t),d[i]("pointerup",b,r))}function E(){var e,t,i=l.scrollbar,r=l.el,a=(l.params.scrollbar=re(l,l.originalParams.scrollbar,l.params.scrollbar,{el:"swiper-scrollbar"}),l.params.scrollbar);if(a.el){if((e="string"==typeof a.el&&l.isElement?l.el.querySelector(a.el):e)||"string"!=typeof a.el)e=e||a.el;else if(!(e=d.querySelectorAll(a.el)).length)return;(e=0<(e=l.params.uniqueNavElements&&"string"==typeof a.el&&1<e.length&&1===r.querySelectorAll(a.el).length?r.querySelector(a.el):e).length?e[0]:e).classList.add(l.isHorizontal()?a.horizontalClass:a.verticalClass),!e||(t=e.querySelector(A(l.params.scrollbar.dragClass)))||(t=M("div",l.params.scrollbar.dragClass),e.append(t)),Object.assign(i,{el:e,dragEl:t}),a.draggable&&l.params.scrollbar.el&&l.scrollbar.el&&w("on"),e&&(r=e.classList)[l.enabled?"remove":"add"].apply(r,_toConsumableArray(C(l.params.scrollbar.lockClass)))}}function x(){var e=l.params.scrollbar,t=l.scrollbar.el;t&&(t=t.classList).remove.apply(t,_toConsumableArray(C(l.isHorizontal()?e.horizontalClass:e.verticalClass))),l.params.scrollbar.el&&l.scrollbar.el&&w("off")}t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),l.scrollbar={el:null,dragEl:null},i("changeDirection",function(){var t;l.scrollbar&&l.scrollbar.el&&(t=l.params.scrollbar,P(l.scrollbar.el).forEach(function(e){e.classList.remove(t.horizontalClass,t.verticalClass),e.classList.add(l.isHorizontal()?t.horizontalClass:t.verticalClass)}))}),i("init",function(){(!1===l.params.scrollbar.enabled?S:(E(),f(),a))()}),i("update resize observerUpdate lock unlock changeDirection",function(){f()}),i("setTranslate",function(){a()}),i("setTransition",function(e,t){t=t,l.params.scrollbar.el&&l.scrollbar.el&&(l.scrollbar.dragEl.style.transitionDuration="".concat(t,"ms"))}),i("enable disable",function(){var e=l.scrollbar.el;e&&(e=e.classList)[l.enabled?"remove":"add"].apply(e,_toConsumableArray(C(l.params.scrollbar.lockClass)))}),i("destroy",function(){x()});var S=function(){var e;(e=l.el.classList).add.apply(e,_toConsumableArray(C(l.params.scrollbar.scrollbarDisabledClass))),l.scrollbar.el&&(e=l.scrollbar.el.classList).add.apply(e,_toConsumableArray(C(l.params.scrollbar.scrollbarDisabledClass))),x()};Object.assign(l.scrollbar,{enable:function(){var e;(e=l.el.classList).remove.apply(e,_toConsumableArray(C(l.params.scrollbar.scrollbarDisabledClass))),l.scrollbar.el&&(e=l.scrollbar.el.classList).remove.apply(e,_toConsumableArray(C(l.params.scrollbar.scrollbarDisabledClass))),E(),f(),a()},disable:S,updateSize:f,setTranslate:a,init:E,destroy:x})},function(e){function s(e,t){var i=c.rtl?-1:1,r=e.getAttribute("data-swiper-parallax")||"0",a=e.getAttribute("data-swiper-parallax-x"),s=e.getAttribute("data-swiper-parallax-y"),n=e.getAttribute("data-swiper-parallax-scale"),o=e.getAttribute("data-swiper-parallax-opacity"),l=e.getAttribute("data-swiper-parallax-rotate"),i=(a||s?(a=a||"0",s=s||"0"):c.isHorizontal()?(a=r,s="0"):(s=r,a="0"),a=0<=a.indexOf("%")?"".concat(parseInt(a,10)*t*i,"%"):"".concat(a*t*i,"px"),s=0<=s.indexOf("%")?"".concat(parseInt(s,10)*t,"%"):"".concat(s*t,"px"),null!=o&&(r=o-(o-1)*(1-Math.abs(t)),e.style.opacity=r),"translate3d(".concat(a,", ").concat(s,", 0px)"));null!=n&&(o=n-(n-1)*(1-Math.abs(t)),i+=" scale(".concat(o,")")),l&&null!=l&&(i+=" rotate(".concat(l*t*-1,"deg)")),e.style.transform=i}function t(){var e=c.el,t=c.slides,r=c.progress,a=c.snapGrid,e=(c.isElement,Z(e,n));c.isElement&&e.push.apply(e,_toConsumableArray(Z(c.hostEl,n))),e.forEach(function(e){s(e,r)}),t.forEach(function(e,t){var i=e.progress;1<c.params.slidesPerGroup&&"auto"!==c.params.slidesPerView&&(i+=Math.ceil(t/2)-r*(a.length-1)),i=Math.min(Math.max(i,-1),1),e.querySelectorAll("".concat(n,", [data-swiper-parallax-rotate]")).forEach(function(e){s(e,i)})})}var c=e.swiper,i=e.extendParams,e=e.on,n=(i({parallax:{enabled:!1}}),"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]");e("beforeInit",function(){c.params.parallax.enabled&&(c.params.watchSlidesProgress=!0,c.originalParams.watchSlidesProgress=!0)}),e("init",function(){c.params.parallax.enabled&&t()}),e("setTranslate",function(){c.params.parallax.enabled&&t()}),e("setTransition",function(e,t){var i,r;c.params.parallax.enabled&&(void 0===(i=t)&&(i=c.params.speed),t=c.el,r=c.hostEl,t=_toConsumableArray(t.querySelectorAll(n)),c.isElement&&t.push.apply(t,_toConsumableArray(r.querySelectorAll(n))),t.forEach(function(e){var t=parseInt(e.getAttribute("data-swiper-parallax-duration"),10)||i;0===i&&(t=0),e.style.transitionDuration="".concat(t,"ms")}))})},function(e){var a,s,n,d=e.swiper,t=e.extendParams,i=e.on,r=e.emit,p=k(),u=(t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),d.zoom={enabled:!1},1),o=!1,l=[],h={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},f={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},c={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},m=1;function v(){var e,t,i,r;return l.length<2?1:(e=l[0].pageX,t=l[0].pageY,i=l[1].pageX,r=l[1].pageY,Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2)))}function g(){var e=d.params.zoom,t=h.imageWrapEl.getAttribute("data-swiper-zoom")||e.maxRatio;return e.limitToOriginalSize&&h.imageEl&&h.imageEl.naturalWidth?(e=h.imageEl.naturalWidth/h.imageEl.offsetWidth,Math.min(e,t)):t}function y(t){var e=d.isElement?"swiper-slide":".".concat(d.params.slideClass);return t.target.matches(e)||0<d.slides.filter(function(e){return e.contains(t.target)}).length}function b(e){if("mouse"===e.pointerType&&l.splice(0,l.length),y(e)){var t=d.params.zoom;if(s=a=!1,l.push(e),!(l.length<2)){if(a=!0,h.scaleStart=v(),!h.slideEl){h.slideEl=e.target.closest(".".concat(d.params.slideClass,", swiper-slide")),h.slideEl||(h.slideEl=d.slides[d.activeIndex]);var e=(e=h.slideEl.querySelector(".".concat(t.containerClass)))&&e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0];if(h.imageEl=e,h.imageWrapEl=e?j(h.imageEl,".".concat(t.containerClass))[0]:void 0,!h.imageWrapEl)return void(h.imageEl=void 0);h.maxRatio=g()}h.imageEl&&(e=(t=_slicedToArray(l.length<2?{x:null,y:null}:(e=h.imageEl.getBoundingClientRect(),[(l[0].pageX+(l[1].pageX-l[0].pageX)/2-e.x-p.scrollX)/u,(l[0].pageY+(l[1].pageY-l[0].pageY)/2-e.y-p.scrollY)/u]),2))[0],t=t[1],h.originX=e,h.originY=t,h.imageEl.style.transitionDuration="0ms"),o=!0}}}function w(t){var e,i,r;y(t)&&(e=d.params.zoom,i=d.zoom,0<=(r=l.findIndex(function(e){return e.pointerId===t.pointerId}))&&(l[r]=t),l.length<2||(s=!0,h.scaleMove=v(),h.imageEl&&(i.scale=h.scaleMove/h.scaleStart*u,i.scale>h.maxRatio&&(i.scale=h.maxRatio-1+Math.pow(i.scale-h.maxRatio+1,.5)),i.scale<e.minRatio&&(i.scale=e.minRatio+1-Math.pow(e.minRatio-i.scale+1,.5)),h.imageEl.style.transform="translate3d(0,0,0) scale(".concat(i.scale,")"))))}function E(t){var e,i,r;!y(t)||"mouse"===t.pointerType&&"pointerout"===t.type||(e=d.params.zoom,i=d.zoom,0<=(r=l.findIndex(function(e){return e.pointerId===t.pointerId}))&&l.splice(r,1),a&&s&&(s=a=!1,h.imageEl)&&(i.scale=Math.max(Math.min(i.scale,h.maxRatio),e.minRatio),h.imageEl.style.transitionDuration="".concat(d.params.speed,"ms"),h.imageEl.style.transform="translate3d(0,0,0) scale(".concat(i.scale,")"),u=i.scale,o=!1,1<i.scale&&h.slideEl?h.slideEl.classList.add("".concat(e.zoomedSlideClass)):i.scale<=1&&h.slideEl&&h.slideEl.classList.remove("".concat(e.zoomedSlideClass)),1===i.scale)&&(h.originX=0,h.originY=0,h.slideEl=void 0))}function x(){d.touchEventsData.preventTouchMoveFromPointerMove=!1}function S(e){if(y(e)&&(t=e,i=".".concat(d.params.zoom.containerClass),t.target.matches(i)||0<_toConsumableArray(d.hostEl.querySelectorAll(i)).filter(function(e){return e.contains(t.target)}).length)){var t,i=d.zoom;if(h.imageEl&&f.isTouched&&h.slideEl){f.isMoved||(f.width=h.imageEl.offsetWidth||h.imageEl.clientWidth,f.height=h.imageEl.offsetHeight||h.imageEl.clientHeight,f.startX=I(h.imageWrapEl,"x")||0,f.startY=I(h.imageWrapEl,"y")||0,h.slideWidth=h.slideEl.offsetWidth,h.slideHeight=h.slideEl.offsetHeight,h.imageWrapEl.style.transitionDuration="0ms");var r=f.width*i.scale,a=f.height*i.scale;if(f.minX=Math.min(h.slideWidth/2-r/2,0),f.maxX=-f.minX,f.minY=Math.min(h.slideHeight/2-a/2,0),f.maxY=-f.minY,f.touchesCurrent.x=(0<l.length?l[0]:e).pageX,f.touchesCurrent.y=(0<l.length?l[0]:e).pageY,5<Math.max(Math.abs(f.touchesCurrent.x-f.touchesStart.x),Math.abs(f.touchesCurrent.y-f.touchesStart.y))&&(d.allowClick=!1),!f.isMoved&&!o){if(d.isHorizontal()&&(Math.floor(f.minX)===Math.floor(f.startX)&&f.touchesCurrent.x<f.touchesStart.x||Math.floor(f.maxX)===Math.floor(f.startX)&&f.touchesCurrent.x>f.touchesStart.x))return f.isTouched=!1,void x();if(!d.isHorizontal()&&(Math.floor(f.minY)===Math.floor(f.startY)&&f.touchesCurrent.y<f.touchesStart.y||Math.floor(f.maxY)===Math.floor(f.startY)&&f.touchesCurrent.y>f.touchesStart.y))return f.isTouched=!1,void x()}e.cancelable&&e.preventDefault(),e.stopPropagation(),clearTimeout(n),d.touchEventsData.preventTouchMoveFromPointerMove=!0,n=setTimeout(function(){x()}),f.isMoved=!0;r=(i.scale-u)/(h.maxRatio-d.params.zoom.minRatio),a=h.originX,e=h.originY;f.currentX=f.touchesCurrent.x-f.touchesStart.x+f.startX+r*(f.width-2*a),f.currentY=f.touchesCurrent.y-f.touchesStart.y+f.startY+r*(f.height-2*e),f.currentX<f.minX&&(f.currentX=f.minX+1-Math.pow(f.minX-f.currentX+1,.8)),f.currentX>f.maxX&&(f.currentX=f.maxX-1+Math.pow(f.currentX-f.maxX+1,.8)),f.currentY<f.minY&&(f.currentY=f.minY+1-Math.pow(f.minY-f.currentY+1,.8)),f.currentY>f.maxY&&(f.currentY=f.maxY-1+Math.pow(f.currentY-f.maxY+1,.8)),c.prevPositionX||(c.prevPositionX=f.touchesCurrent.x),c.prevPositionY||(c.prevPositionY=f.touchesCurrent.y),c.prevTime||(c.prevTime=Date.now()),c.x=(f.touchesCurrent.x-c.prevPositionX)/(Date.now()-c.prevTime)/2,c.y=(f.touchesCurrent.y-c.prevPositionY)/(Date.now()-c.prevTime)/2,Math.abs(f.touchesCurrent.x-c.prevPositionX)<2&&(c.x=0),Math.abs(f.touchesCurrent.y-c.prevPositionY)<2&&(c.y=0),c.prevPositionX=f.touchesCurrent.x,c.prevPositionY=f.touchesCurrent.y,c.prevTime=Date.now(),h.imageWrapEl.style.transform="translate3d(".concat(f.currentX,"px, ").concat(f.currentY,"px,0)")}}}function C(){var e=d.zoom;h.slideEl&&d.activeIndex!==d.slides.indexOf(h.slideEl)&&(h.imageEl&&(h.imageEl.style.transform="translate3d(0,0,0) scale(1)"),h.imageWrapEl&&(h.imageWrapEl.style.transform="translate3d(0,0,0)"),h.slideEl.classList.remove("".concat(d.params.zoom.zoomedSlideClass)),e.scale=1,u=1,h.slideEl=void 0,h.imageEl=void 0,h.imageWrapEl=void 0,h.originX=0,h.originY=0)}function T(e){var t,i,r,a,s,n,o,l=d.zoom,c=d.params.zoom;h.slideEl||(e&&e.target&&(h.slideEl=e.target.closest(".".concat(d.params.slideClass,", swiper-slide"))),h.slideEl||(d.params.virtual&&d.params.virtual.enabled&&d.virtual?h.slideEl=Z(d.slidesEl,".".concat(d.params.slideActiveClass))[0]:h.slideEl=d.slides[d.activeIndex]),i=(i=h.slideEl.querySelector(".".concat(c.containerClass)))&&i.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0],h.imageEl=i,h.imageWrapEl=i?j(h.imageEl,".".concat(c.containerClass))[0]:void 0),h.imageEl&&h.imageWrapEl&&(d.params.cssMode&&(d.wrapperEl.style.overflow="hidden",d.wrapperEl.style.touchAction="none"),h.slideEl.classList.add("".concat(c.zoomedSlideClass)),i=void 0===f.touchesStart.x&&e?(t=e.pageX,e.pageY):(t=f.touchesStart.x,f.touchesStart.y),c="number"==typeof e?e:null,1===u&&c&&(i=t=void 0),o=g(),l.scale=c||o,u=c||o,!e||1===u&&c?a=r=0:(o=h.slideEl.offsetWidth,e=h.slideEl.offsetHeight,t=O(h.slideEl).left+p.scrollX+o/2-t,i=O(h.slideEl).top+p.scrollY+e/2-i,s=h.imageEl.offsetWidth||h.imageEl.clientWidth,n=h.imageEl.offsetHeight||h.imageEl.clientHeight,s=s*l.scale,n=n*l.scale,o=Math.min(o/2-s/2,0),s=Math.min(e/2-n/2,0),(e=-o)<(r=(r=t*l.scale)<o?o:r)&&(r=e),(n=-s)<(a=(a=i*l.scale)<s?s:a)&&(a=n)),c&&1===l.scale&&(h.originX=0,h.originY=0),h.imageWrapEl.style.transitionDuration="300ms",h.imageWrapEl.style.transform="translate3d(".concat(r,"px, ").concat(a,"px,0)"),h.imageEl.style.transitionDuration="300ms",h.imageEl.style.transform="translate3d(0,0,0) scale(".concat(l.scale,")"))}function M(){var e,t=d.zoom,i=d.params.zoom;h.slideEl||(d.params.virtual&&d.params.virtual.enabled&&d.virtual?h.slideEl=Z(d.slidesEl,".".concat(d.params.slideActiveClass))[0]:h.slideEl=d.slides[d.activeIndex],e=(e=h.slideEl.querySelector(".".concat(i.containerClass)))&&e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0],h.imageEl=e,h.imageWrapEl=e?j(h.imageEl,".".concat(i.containerClass))[0]:void 0),h.imageEl&&h.imageWrapEl&&(d.params.cssMode&&(d.wrapperEl.style.overflow="",d.wrapperEl.style.touchAction=""),t.scale=1,u=1,h.imageWrapEl.style.transitionDuration="300ms",h.imageWrapEl.style.transform="translate3d(0,0,0)",h.imageEl.style.transitionDuration="300ms",h.imageEl.style.transform="translate3d(0,0,0) scale(1)",h.slideEl.classList.remove("".concat(i.zoomedSlideClass)),h.slideEl=void 0,h.originX=0,h.originY=0)}function z(e){var t=d.zoom;t.scale&&1!==t.scale?M():T(e)}function P(){return{passiveListener:!!d.params.passiveListeners&&{passive:!0,capture:!1},activeListenerWithCapture:!d.params.passiveListeners||{passive:!1,capture:!0}}}function A(){var t,e=d.zoom;e.enabled||(e.enabled=!0,e=P(),t=e.passiveListener,e=e.activeListenerWithCapture,d.wrapperEl.addEventListener("pointerdown",b,t),d.wrapperEl.addEventListener("pointermove",w,e),["pointerup","pointercancel","pointerout"].forEach(function(e){d.wrapperEl.addEventListener(e,E,t)}),d.wrapperEl.addEventListener("pointermove",S,e))}function _(){var t,e=d.zoom;e.enabled&&(e.enabled=!1,e=P(),t=e.passiveListener,e=e.activeListenerWithCapture,d.wrapperEl.removeEventListener("pointerdown",b,t),d.wrapperEl.removeEventListener("pointermove",w,e),["pointerup","pointercancel","pointerout"].forEach(function(e){d.wrapperEl.removeEventListener(e,E,t)}),d.wrapperEl.removeEventListener("pointermove",S,e))}Object.defineProperty(d.zoom,"scale",{get:function(){return m},set:function(e){var t,i;m!==e&&(t=h.imageEl,i=h.slideEl,r("zoomChange",e,t,i)),m=e}}),i("init",function(){d.params.zoom.enabled&&A()}),i("destroy",function(){_()}),i("touchStart",function(e,t){var i;d.zoom.enabled&&(t=t,i=d.device,h.imageEl)&&!f.isTouched&&(i.android&&t.cancelable&&t.preventDefault(),f.isTouched=!0,i=0<l.length?l[0]:t,f.touchesStart.x=i.pageX,f.touchesStart.y=i.pageY)}),i("touchEnd",function(e,t){var i,r,a,s,n;d.zoom.enabled&&(n=d.zoom,h.imageEl)&&(f.isTouched&&f.isMoved?(f.isTouched=!1,f.isMoved=!1,s=c.x*(r=300),s=f.currentX+s,i=c.y*(a=300),i=f.currentY+i,0!==c.x&&(r=Math.abs((s-f.currentX)/c.x)),0!==c.y&&(a=Math.abs((i-f.currentY)/c.y)),r=Math.max(r,a),f.currentX=s,f.currentY=i,a=f.width*n.scale,s=f.height*n.scale,f.minX=Math.min(h.slideWidth/2-a/2,0),f.maxX=-f.minX,f.minY=Math.min(h.slideHeight/2-s/2,0),f.maxY=-f.minY,f.currentX=Math.max(Math.min(f.currentX,f.maxX),f.minX),f.currentY=Math.max(Math.min(f.currentY,f.maxY),f.minY),h.imageWrapEl.style.transitionDuration="".concat(r,"ms"),h.imageWrapEl.style.transform="translate3d(".concat(f.currentX,"px, ").concat(f.currentY,"px,0)")):(f.isTouched=!1,f.isMoved=!1))}),i("doubleTap",function(e,t){!d.animating&&d.params.zoom.enabled&&d.zoom.enabled&&d.params.zoom.toggle&&z(t)}),i("transitionEnd",function(){d.zoom.enabled&&d.params.zoom.enabled&&C()}),i("slideChange",function(){d.zoom.enabled&&d.params.zoom.enabled&&d.params.cssMode&&C()}),Object.assign(d.zoom,{enable:A,disable:_,in:T,out:M,toggle:z})},function(e){var l=e.swiper,t=e.extendParams,e=e.on;function c(e,t){var i,r,a,s,n,o=function(e,t){for(r=-1,i=e.length;1<i-r;)e[a=i+r>>1]<=t?r=a:i=a;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=o(this.x,e),s=n-1,(e-this.x[s])*(this.y[n]-this.y[s])/(this.x[n]-this.x[s])+this.y[s]):0},this}function i(){l.controller.control&&l.controller.spline&&(l.controller.spline=void 0,delete l.controller.spline)}t({controller:{control:void 0,inverse:!1,by:"slide"}}),l.controller={control:void 0},e("beforeInit",function(){var i;"undefined"!=typeof window&&("string"==typeof l.params.controller.control||l.params.controller.control instanceof HTMLElement)?(i=document.querySelector(l.params.controller.control))&&i.swiper?l.controller.control=i.swiper:i&&i.addEventListener("init",function e(t){l.controller.control=t.detail[0],l.update(),i.removeEventListener("init",e)}):l.controller.control=l.params.controller.control}),e("update",function(){i()}),e("resize",function(){i()}),e("observerUpdate",function(){i()}),e("setTranslate",function(e,t,i){l.controller.control&&!l.controller.control.destroyed&&l.controller.setTranslate(t,i)}),e("setTransition",function(e,t,i){l.controller.control&&!l.controller.control.destroyed&&l.controller.setTransition(t,i)}),Object.assign(l.controller,{setTranslate:function(e,t){var r,a,i=l.controller.control,s=l.constructor;function n(e){var t,i;e.destroyed||(t=l.rtlTranslate?-l.translate:l.translate,"slide"===l.params.controller.by&&(i=e,l.controller.spline=l.params.loop?new c(l.slidesGrid,i.slidesGrid):new c(l.snapGrid,i.snapGrid),a=-l.controller.spline.interpolate(-t)),a&&"container"!==l.params.controller.by||(r=(e.maxTranslate()-e.minTranslate())/(l.maxTranslate()-l.minTranslate()),!Number.isNaN(r)&&Number.isFinite(r)||(r=1),a=(t-l.minTranslate())*r+e.minTranslate()),l.params.controller.inverse&&(a=e.maxTranslate()-a),e.updateProgress(a),e.setTranslate(a,l),e.updateActiveIndex(),e.updateSlidesClasses())}if(Array.isArray(i))for(var o=0;o<i.length;o+=1)i[o]!==t&&i[o]instanceof s&&n(i[o]);else i instanceof s&&t!==i&&n(i)},setTransition:function(t,e){var i,r=l.constructor,a=l.controller.control;function s(e){e.destroyed||(e.setTransition(t,l),0!==t&&(e.transitionStart(),e.params.autoHeight&&T(function(){e.updateAutoHeight()}),g(e.wrapperEl,function(){a&&e.transitionEnd()})))}if(Array.isArray(a))for(i=0;i<a.length;i+=1)a[i]!==e&&a[i]instanceof r&&s(a[i]);else a instanceof r&&e!==a&&s(a)}})},function(e){var a,s,o=e.swiper,t=e.extendParams,e=e.on,l=(t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),o.a11y={clicked:!1},null),n=(new Date).getTime();function r(e){var t=l;0!==t.length&&(t.innerHTML="",t.innerHTML=e)}function c(e){(e=P(e)).forEach(function(e){e.setAttribute("tabIndex","0")})}function i(e){(e=P(e)).forEach(function(e){e.setAttribute("tabIndex","-1")})}function d(e,t){(e=P(e)).forEach(function(e){e.setAttribute("role",t)})}function p(e,t){(e=P(e)).forEach(function(e){e.setAttribute("aria-roledescription",t)})}function u(e,t){(e=P(e)).forEach(function(e){e.setAttribute("aria-label",t)})}function h(e){(e=P(e)).forEach(function(e){e.setAttribute("aria-disabled",!0)})}function f(e){(e=P(e)).forEach(function(e){e.setAttribute("aria-disabled",!1)})}function m(e){var t,i;13!==e.keyCode&&32!==e.keyCode||(t=o.params.a11y,i=e.target,o.pagination&&o.pagination.el&&(i===o.pagination.el||o.pagination.el.contains(e.target))&&!e.target.matches(A(o.params.pagination.bulletClass)))||(o.navigation&&o.navigation.prevEl&&o.navigation.nextEl&&(e=P(o.navigation.prevEl),P(o.navigation.nextEl).includes(i)&&(o.isEnd&&!o.params.loop||o.slideNext(),o.isEnd?r(t.lastSlideMessage):r(t.nextSlideMessage)),e.includes(i))&&(o.isBeginning&&!o.params.loop||o.slidePrev(),o.isBeginning?r(t.firstSlideMessage):r(t.prevSlideMessage)),o.pagination&&i.matches(A(o.params.pagination.bulletClass))&&i.click())}function v(){return o.pagination&&o.pagination.bullets&&o.pagination.bullets.length}function g(){return v()&&o.params.pagination.clickable}function y(e,t,i){var r;c(e),"BUTTON"!==e.tagName&&(d(e,"button"),e.addEventListener("keydown",m)),u(e,i),r=t,P(e).forEach(function(e){e.setAttribute("aria-controls",r)})}function b(e){s&&s!==e.target&&!s.contains(e.target)&&(a=!0),o.a11y.clicked=!0}function w(){a=!1,requestAnimationFrame(function(){requestAnimationFrame(function(){o.destroyed||(o.a11y.clicked=!1)})})}function E(e){n=(new Date).getTime()}function x(e){var t,i,r;o.a11y.clicked||(new Date).getTime()-n<100||(t=e.target.closest(".".concat(o.params.slideClass,", swiper-slide")))&&o.slides.includes(t)&&(s=t,i=o.slides.indexOf(t)===o.activeIndex,r=o.params.watchSlidesProgress&&o.visibleSlides&&o.visibleSlides.includes(t),i||r||e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||(o.isHorizontal()?o.el.scrollLeft=0:o.el.scrollTop=0,requestAnimationFrame(function(){a||(o.params.loop?o.slideToLoop(parseInt(t.getAttribute("data-swiper-slide-index")),0):o.slideTo(o.slides.indexOf(t),0),a=!1)})))}function S(){var i=o.params.a11y,r=(i.itemRoleDescriptionMessage&&p(o.slides,i.itemRoleDescriptionMessage),i.slideRole&&d(o.slides,i.slideRole),o.slides.length);i.slideLabelMessage&&o.slides.forEach(function(e,t){t=o.params.loop?parseInt(e.getAttribute("data-swiper-slide-index"),10):t;u(e,i.slideLabelMessage.replace(/\{\{index\}\}/,t+1).replace(/\{\{slidesLength\}\}/,r))})}function C(){var t,i,r=o.params.a11y,e=(o.el.append(l),o.el),e=(r.containerRoleDescriptionMessage&&p(e,r.containerRoleDescriptionMessage),r.containerMessage&&u(e,r.containerMessage),o.wrapperEl),a=r.id||e.getAttribute("id")||"swiper-wrapper-".concat("x".repeat(s=void 0===(s=16)?16:s).replace(/x/g,function(){return Math.round(16*Math.random()).toString(16)})),s=o.params.autoplay&&o.params.autoplay.enabled?"off":"polite";t=a,P(e).forEach(function(e){e.setAttribute("id",t)}),i=s,P(e).forEach(function(e){e.setAttribute("aria-live",i)}),S();var n=(e=o.navigation||{}).nextEl,e=e.prevEl,n=P(n),e=P(e);n&&n.forEach(function(e){return y(e,a,r.nextSlideMessage)}),e&&e.forEach(function(e){return y(e,a,r.prevSlideMessage)}),g()&&P(o.pagination.el).forEach(function(e){e.addEventListener("keydown",m)}),L().addEventListener("visibilitychange",E),o.el.addEventListener("focus",x,!0),o.el.addEventListener("focus",x,!0),o.el.addEventListener("pointerdown",b,!0),o.el.addEventListener("pointerup",w,!0)}e("beforeInit",function(){(l=M("span",o.params.a11y.notificationClass)).setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true")}),e("afterInit",function(){o.params.a11y.enabled&&C()}),e("slidesLengthChange snapGridLengthChange slidesGridLengthChange",function(){o.params.a11y.enabled&&S()}),e("fromEdge toEdge afterInit lock unlock",function(){var e,t;o.params.a11y.enabled&&!o.params.loop&&!o.params.rewind&&o.navigation&&(e=(t=o.navigation).nextEl,(t=t.prevEl)&&(o.isBeginning?(h(t),i):(f(t),c))(t),e)&&(o.isEnd?(h(e),i):(f(e),c))(e)}),e("paginationUpdate",function(){var t;o.params.a11y.enabled&&(t=o.params.a11y,v())&&o.pagination.bullets.forEach(function(e){o.params.pagination.clickable&&(c(e),o.params.pagination.renderBullet||(d(e,"button"),u(e,t.paginationBulletMessage.replace(/\{\{index\}\}/,z(e)+1)))),e.matches(A(o.params.pagination.bulletActiveClass))?e.setAttribute("aria-current","true"):e.removeAttribute("aria-current")})}),e("destroy",function(){var e,t;o.params.a11y.enabled&&(l&&l.remove(),e=(t=o.navigation||{}).nextEl,t=t.prevEl,e=P(e),t=P(t),e&&e.forEach(function(e){return e.removeEventListener("keydown",m)}),t&&t.forEach(function(e){return e.removeEventListener("keydown",m)}),g()&&P(o.pagination.el).forEach(function(e){e.removeEventListener("keydown",m)}),L().removeEventListener("visibilitychange",E),o.el)&&"string"!=typeof o.el&&(o.el.removeEventListener("focus",x,!0),o.el.removeEventListener("pointerdown",b,!0),o.el.removeEventListener("pointerup",w,!0))})},function(e){function t(e,t){var i,r,a=k();s&&n.params.history.enabled&&(i=n.params.url?new URL(n.params.url):a.location,t=n.virtual&&n.params.virtual.enabled?n.slidesEl.querySelector('[data-swiper-slide-index="'.concat(t,'"]')):n.slides[t],t=o(t.getAttribute("data-history")),0<n.params.history.root.length?("/"===(r=n.params.history.root)[r.length-1]&&(r=r.slice(0,r.length-1)),t="".concat(r,"/").concat(e?"".concat(e,"/"):"").concat(t)):i.pathname.includes(e)||(t="".concat(e?"".concat(e,"/"):"").concat(t)),n.params.history.keepQuery&&(t+=i.search),(r=a.history.state)&&r.value===t||(n.params.history.replaceState?a.history.replaceState({value:t},null,t):a.history.pushState({value:t},null,t)))}function i(){a=l(n.params.url),c(n.params.speed,a.value,!1)}var n=e.swiper,r=e.extendParams,e=e.on,s=(r({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}}),!1),a={},o=function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},l=function(e){var t=k(),e=e?new URL(e):t.location,t=e.pathname.slice(1).split("/").filter(function(e){return""!==e}),e=t.length;return{key:t[e-2],value:t[e-1]}},c=function(e,t,i){if(t)for(var r=0,a=n.slides.length;r<a;r+=1){var s=n.slides[r];o(s.getAttribute("data-history"))===t&&(s=n.getSlideIndex(s),n.slideTo(s,e,i))}else n.slideTo(0,e,i)};e("init",function(){var e;n.params.history.enabled&&(e=k(),n.params.history)&&(e.history&&e.history.pushState?(s=!0,((a=l(n.params.url)).key||a.value)&&c(0,a.value,n.params.runCallbacksOnInit),n.params.history.replaceState||e.addEventListener("popstate",i)):(n.params.history.enabled=!1,n.params.hashNavigation.enabled=!0))}),e("destroy",function(){var e;n.params.history.enabled&&(e=k(),n.params.history.replaceState||e.removeEventListener("popstate",i))}),e("transitionEnd _freeModeNoMomentumRelease",function(){s&&t(n.params.history.key,n.activeIndex)}),e("slideChange",function(){s&&n.params.cssMode&&t(n.params.history.key,n.activeIndex)})},function(e){function t(){s("hashChange");var e=o.location.hash.replace("#",""),t=r.virtual&&r.params.virtual.enabled?r.slidesEl.querySelector('[data-swiper-slide-index="'.concat(r.activeIndex,'"]')):r.slides[r.activeIndex];e===(t?t.getAttribute("data-hash"):"")||void 0===(t=r.params.hashNavigation.getSlideIndex(r,e))||Number.isNaN(t)||r.slideTo(t)}function i(){var e;n&&r.params.hashNavigation.enabled&&(e=(e=r.virtual&&r.params.virtual.enabled?r.slidesEl.querySelector('[data-swiper-slide-index="'.concat(r.activeIndex,'"]')):r.slides[r.activeIndex])?e.getAttribute("data-hash")||e.getAttribute("data-history"):"",r.params.hashNavigation.replaceState&&l.history&&l.history.replaceState?l.history.replaceState(null,null,"#".concat(e)||""):o.location.hash=e||"",s("hashSet"))}var r=e.swiper,a=e.extendParams,s=e.emit,e=e.on,n=!1,o=L(),l=k();a({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex:function(e,t){var i;return r.virtual&&r.params.virtual.enabled?(i=r.slides.filter(function(e){return e.getAttribute("data-hash")===t})[0])?parseInt(i.getAttribute("data-swiper-slide-index"),10):0:r.getSlideIndex(Z(r.slidesEl,".".concat(r.params.slideClass,'[data-hash="').concat(t,'"], swiper-slide[data-hash="').concat(t,'"]'))[0])}}}),e("init",function(){var e;!r.params.hashNavigation.enabled||!r.params.hashNavigation.enabled||r.params.history&&r.params.history.enabled||(n=!0,(e=o.location.hash.replace("#",""))&&(e=r.params.hashNavigation.getSlideIndex(r,e),r.slideTo(e||0,0,r.params.runCallbacksOnInit,!0)),r.params.hashNavigation.watchState&&l.addEventListener("hashchange",t))}),e("destroy",function(){r.params.hashNavigation.enabled&&r.params.hashNavigation.watchState&&l.removeEventListener("hashchange",t)}),e("transitionEnd _freeModeNoMomentumRelease",function(){n&&i()}),e("slideChange",function(){n&&r.params.cssMode&&i()})},function(e){var s,n,o,i,t,r,a,l,c,d,p=e.swiper,u=e.extendParams,h=e.on,f=e.emit,e=e.params,m=(u({autoplay:{enabled:!(p.autoplay={running:!1,paused:!1,timeLeft:0}),delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}}),e&&e.autoplay?e.autoplay.delay:3e3),v=e&&e.autoplay?e.autoplay.delay:3e3,g=(new Date).getTime();function y(e){!p||p.destroyed||!p.wrapperEl||e.target!==p.wrapperEl||(p.wrapperEl.removeEventListener("transitionend",y),d)||e.detail&&e.detail.bySwiperTouchMove||P()}function b(e){var t,i,r,a;if(!p.destroyed&&p.autoplay.running)return cancelAnimationFrame(n),T(),t=void 0===e?p.params.autoplay.delay:e,m=p.params.autoplay.delay,v=p.params.autoplay.delay,i=M(),!Number.isNaN(i)&&0<i&&void 0===e&&(v=m=t=i),o=t,r=p.params.speed,a=function(){p&&!p.destroyed&&(p.params.autoplay.reverseDirection?!p.isBeginning||p.params.loop||p.params.rewind?(p.slidePrev(r,!0,!0),f("autoplay")):p.params.autoplay.stopOnLastSlide||(p.slideTo(p.slides.length-1,r,!0,!0),f("autoplay")):!p.isEnd||p.params.loop||p.params.rewind?(p.slideNext(r,!0,!0),f("autoplay")):p.params.autoplay.stopOnLastSlide||(p.slideTo(0,r,!0,!0),f("autoplay")),p.params.cssMode)&&(g=(new Date).getTime(),requestAnimationFrame(function(){b()}))},0<t?(clearTimeout(s),s=setTimeout(function(){a()},t)):requestAnimationFrame(function(){a()}),t}function w(){g=(new Date).getTime(),p.autoplay.running=!0,b(),f("autoplayStart")}function E(){p.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(n),f("autoplayStop")}function x(){var e;!p.destroyed&&p.autoplay.running&&("hidden"===(e=L()).visibilityState&&z(c=!0),"visible"===e.visibilityState)&&P()}function S(e){"mouse"!==e.pointerType||(d=c=!0,p.animating)||p.autoplay.paused||z(!0)}function C(e){"mouse"===e.pointerType&&(d=!1,p.autoplay.paused)&&P()}var T=function e(){var t;!p.destroyed&&p.autoplay.running&&(p.autoplay.paused?i=!0:i&&(v=o,i=!1),t=p.autoplay.paused?o:g+v-(new Date).getTime(),p.autoplay.timeLeft=t,f("autoplayTimeLeft",t,t/m),n=requestAnimationFrame(function(){e()}))},M=function(){var e=p.virtual&&p.params.virtual.enabled?p.slides.filter(function(e){return e.classList.contains("swiper-slide-active")})[0]:p.slides[p.activeIndex];if(e)return parseInt(e.getAttribute("data-swiper-autoplay"),10)},z=function(e,t){!p.destroyed&&p.autoplay.running&&(clearTimeout(s),e||(c=!0),e=function(){f("autoplayPause"),p.params.autoplay.waitForTransition?p.wrapperEl.addEventListener("transitionend",y):P()},p.autoplay.paused=!0,t?(l&&(o=p.params.autoplay.delay),l=!1,e()):(t=o||p.params.autoplay.delay,o=t-((new Date).getTime()-g),p.isEnd&&o<0&&!p.params.loop||(o<0&&(o=0),e())))},P=function(){p.isEnd&&o<0&&!p.params.loop||p.destroyed||!p.autoplay.running||(g=(new Date).getTime(),c?(c=!1,b(o)):b(),p.autoplay.paused=!1,f("autoplayResume"))};h("init",function(){p.params.autoplay.enabled&&(p.params.autoplay.pauseOnMouseEnter&&(p.el.addEventListener("pointerenter",S),p.el.addEventListener("pointerleave",C)),L().addEventListener("visibilitychange",x),w())}),h("destroy",function(){p.el&&"string"!=typeof p.el&&(p.el.removeEventListener("pointerenter",S),p.el.removeEventListener("pointerleave",C)),L().removeEventListener("visibilitychange",x),p.autoplay.running&&E()}),h("_freeModeStaticRelease",function(){(r||c)&&P()}),h("_freeModeNoMomentumRelease",function(){p.params.autoplay.disableOnInteraction?E():z(!0,!0)}),h("beforeTransitionStart",function(e,t,i){!p.destroyed&&p.autoplay.running&&(i||!p.params.autoplay.disableOnInteraction?z(!0,!0):E())}),h("sliderFirstMove",function(){!p.destroyed&&p.autoplay.running&&(p.params.autoplay.disableOnInteraction?E():(c=r=!(t=!0),a=setTimeout(function(){z(r=c=!0)},200)))}),h("touchEnd",function(){!p.destroyed&&p.autoplay.running&&t&&(clearTimeout(a),clearTimeout(s),t=r=(p.params.autoplay.disableOnInteraction||r&&p.params.cssMode&&P(),!1))}),h("slideChange",function(){!p.destroyed&&p.autoplay.running&&(l=!0)}),Object.assign(p.autoplay,{start:w,stop:E,pause:z,resume:P})},function(e){var u=e.swiper,t=e.extendParams,e=e.on,i=(t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}}),!1),r=!1;function a(){var e,t,i=u.thumbs.swiper;!i||i.destroyed||(e=i.clickedIndex,(t=i.clickedSlide)&&t.classList.contains(u.params.thumbs.slideThumbActiveClass))||null!=e&&(t=i.params.loop?parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10):e,u.params.loop?u.slideToLoop(t):u.slideTo(t))}function s(){var e=u.params.thumbs;if(i)return!1;i=!0;var t=u.constructor;return e.swiper instanceof t?(u.thumbs.swiper=e.swiper,Object.assign(u.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(u.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),u.thumbs.swiper.update()):h(e.swiper)&&(e=Object.assign({},e.swiper),Object.assign(e,{watchSlidesProgress:!0,slideToClickedSlide:!1}),u.thumbs.swiper=new t(e),r=!0),u.thumbs.swiper.el.classList.add(u.params.thumbs.thumbsContainerClass),u.thumbs.swiper.on("tap",a),!0}function n(e){var t=u.thumbs.swiper;if(t&&!t.destroyed){var i="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():t.params.slidesPerView,r=1,a=u.params.thumbs.slideThumbActiveClass;if(1<u.params.slidesPerView&&!u.params.centeredSlides&&(r=u.params.slidesPerView),u.params.thumbs.multipleActiveThumbs||(r=1),r=Math.floor(r),t.slides.forEach(function(e){return e.classList.remove(a)}),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(var s=0;s<r;s+=1)Z(t.slidesEl,'[data-swiper-slide-index="'.concat(u.realIndex+s,'"]')).forEach(function(e){e.classList.add(a)});else for(var n=0;n<r;n+=1)t.slides[u.realIndex+n]&&t.slides[u.realIndex+n].classList.add(a);var o,l,c,d=u.params.thumbs.autoScrollOffset,p=d&&!t.params.loop;(u.realIndex!==t.realIndex||p)&&(o=t.activeIndex,c=t.params.loop?(l=t.slides.filter(function(e){return e.getAttribute("data-swiper-slide-index")==="".concat(u.realIndex)})[0],l=t.slides.indexOf(l),u.activeIndex>u.previousIndex?"next":"prev"):(l=u.realIndex)>u.previousIndex?"next":"prev",p&&(l+="next"===c?d:-1*d),t.visibleSlidesIndexes)&&t.visibleSlidesIndexes.indexOf(l)<0&&(t.params.centeredSlides?l=o<l?l-Math.floor(i/2)+1:l+Math.floor(i/2)-1:o<l&&t.params.slidesPerGroup,t.slideTo(l,e?0:void 0))}}u.thumbs={swiper:null},e("beforeInit",function(){var e,t,r=u.params.thumbs;r&&r.swiper&&("string"==typeof r.swiper||r.swiper instanceof HTMLElement?(e=L(),t=function(){var i="string"==typeof r.swiper?e.querySelector(r.swiper):r.swiper;return i&&i.swiper?(r.swiper=i.swiper,s(),n(!0)):i&&i.addEventListener("init",function e(t){r.swiper=t.detail[0],i.removeEventListener("init",e),s(),n(!0),r.swiper.update(),u.update()}),i},requestAnimationFrame(function e(){u.destroyed||t()||requestAnimationFrame(e)})):(s(),n(!0)))}),e("slideChange update resize observerUpdate",function(){n()}),e("setTransition",function(e,t){var i=u.thumbs.swiper;i&&!i.destroyed&&i.setTransition(t)}),e("beforeDestroy",function(){var e=u.thumbs.swiper;e&&!e.destroyed&&r&&e.destroy()}),Object.assign(u.thumbs,{init:s,update:n})},function(e){var f=e.swiper,t=e.extendParams,m=e.emit,v=e.once;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(f,{freeMode:{onTouchStart:function(){var e;f.params.cssMode||(e=f.getTranslate(),f.setTranslate(e),f.setTransition(0),f.touchEventsData.velocities.length=0,f.freeMode.onTouchEnd({currentPos:f.rtl?f.translate:-f.translate}))},onTouchMove:function(){var e,t;f.params.cssMode||(e=f.touchEventsData,t=f.touches,0===e.velocities.length&&e.velocities.push({position:t[f.isHorizontal()?"startX":"startY"],time:e.touchStartTime}),e.velocities.push({position:t[f.isHorizontal()?"currentX":"currentY"],time:y()}))},onTouchEnd:function(e){if(e=e.currentPos,!f.params.cssMode){var t=f.params,i=f.wrapperEl,r=f.rtlTranslate,a=f.snapGrid,s=f.touchEventsData,n=y()-s.touchStartTime;if(e<-f.minTranslate())f.slideTo(f.activeIndex);else if(e>-f.maxTranslate())f.slides.length<a.length?f.slideTo(a.length-1):f.slideTo(f.slides.length-1);else{if(t.freeMode.momentum){(!(1<s.velocities.length)||(e=s.velocities.pop(),d=s.velocities.pop(),c=e.position-d.position,d=e.time-d.time,f.velocity=c/d,f.velocity/=2,Math.abs(f.velocity)<t.freeMode.minimumVelocity&&(f.velocity=0),150<d)||300<y()-e.time)&&(f.velocity=0),f.velocity*=t.freeMode.momentumVelocityRatio,s.velocities.length=0;var o,l,c=1e3*t.freeMode.momentumRatio,d=f.velocity*c,p=f.translate+d,e=(r&&(p=-p),!1),d=20*Math.abs(f.velocity)*t.freeMode.momentumBounceRatio;if(p<f.maxTranslate())t.freeMode.momentumBounce?(p+f.maxTranslate()<-d&&(p=f.maxTranslate()-d),o=f.maxTranslate(),s.allowMomentumBounce=e=!0):p=f.maxTranslate(),t.loop&&t.centeredSlides&&(l=!0);else if(p>f.minTranslate())t.freeMode.momentumBounce?(p-f.minTranslate()>d&&(p=f.minTranslate()+d),o=f.minTranslate(),s.allowMomentumBounce=e=!0):p=f.minTranslate(),t.loop&&t.centeredSlides&&(l=!0);else if(t.freeMode.sticky){for(var u,h=0;h<a.length;h+=1)if(a[h]>-p){u=h;break}p=-(p=Math.abs(a[u]-p)<Math.abs(a[u-1]-p)||"next"===f.swipeDirection?a[u]:a[u-1])}if(l&&v("transitionEnd",function(){f.loopFix()}),0!==f.velocity)c=r?Math.abs((-p-f.translate)/f.velocity):Math.abs((p-f.translate)/f.velocity),t.freeMode.sticky&&(c=(d=Math.abs((r?-p:p)-f.translate))<(l=f.slidesSizesGrid[f.activeIndex])?t.speed:d<2*l?1.5*t.speed:2.5*t.speed);else if(t.freeMode.sticky)return void f.slideToClosest();t.freeMode.momentumBounce&&e?(f.updateProgress(o),f.setTransition(c),f.setTranslate(p),f.transitionStart(!0,f.swipeDirection),f.animating=!0,g(i,function(){f&&!f.destroyed&&s.allowMomentumBounce&&(m("momentumBounce"),f.setTransition(t.speed),setTimeout(function(){f.setTranslate(o),g(i,function(){f&&!f.destroyed&&f.transitionEnd()})},0))})):f.velocity?(m("_freeModeNoMomentumRelease"),f.updateProgress(p),f.setTransition(c),f.setTranslate(p),f.transitionStart(!0,f.swipeDirection),f.animating||(f.animating=!0,g(i,function(){f&&!f.destroyed&&f.transitionEnd()}))):f.updateProgress(p),f.updateActiveIndex(),f.updateSlidesClasses()}else{if(t.freeMode.sticky)return void f.slideToClosest();t.freeMode&&m("_freeModeNoMomentumRelease")}(!t.freeMode.momentum||n>=t.longSwipesMs)&&(m("_freeModeStaticRelease"),f.updateProgress(),f.updateActiveIndex(),f.updateSlidesClasses())}}}}})},function(e){function c(){var e=h.params.spaceBetween;return"string"==typeof e&&0<=e.indexOf("%")?e=parseFloat(e.replace("%",""))/100*h.size:"string"==typeof e&&(e=parseFloat(e)),e}var d,p,u,r,h=e.swiper,t=e.extendParams,e=e.on;t({grid:{rows:1,fill:"column"}}),e("init",function(){r=h.params.grid&&1<h.params.grid.rows}),e("update",function(){var e=h.params,t=h.el,i=e.grid&&1<e.grid.rows;r&&!i?(t.classList.remove("".concat(e.containerModifierClass,"grid"),"".concat(e.containerModifierClass,"grid-column")),u=1,h.emitContainerClasses()):!r&&i&&(t.classList.add("".concat(e.containerModifierClass,"grid")),"column"===e.grid.fill&&t.classList.add("".concat(e.containerModifierClass,"grid-column")),h.emitContainerClasses()),r=i}),h.grid={initSlides:function(e){var t=h.params.slidesPerView,i=h.params.grid,r=i.rows,i=i.fill,e=(h.virtual&&h.params.virtual.enabled?h.virtual.slides:e).length;u=Math.floor(e/r),d=Math.floor(e/r)===e/r?e:Math.ceil(e/r)*r,"auto"!==t&&"row"===i&&(d=Math.max(d,t*r)),p=d/r},unsetSlides:function(){h.slides&&h.slides.forEach(function(e){e.swiperSlideGridSet&&(e.style.height="",e.style[h.getDirectionLabel("margin-top")]="")})},updateSlide:function(e,t,i){var r,a,s=h.params.slidesPerGroup,n=c(),o=h.params.grid,l=o.rows,o=o.fill,i=(h.virtual&&h.params.virtual.enabled?h.virtual.slides:i).length;"row"===o&&1<s?(r=e-l*s*(a=Math.floor(e/(s*l))),i=0===a?s:Math.min(Math.ceil((i-a*l*s)/l),s),i=(a=r-(r=Math.floor(r/i))*i+a*s)+r*d/l,t.style.order=i):"column"===o?(r=e-(a=Math.floor(e/l))*l,(u<a||a===u&&r===l-1)&&l<=(r+=1)&&(r=0,a+=1)):a=e-(r=Math.floor(e/p))*p,t.row=r,t.column=a,t.style.height="calc((100% - ".concat((l-1)*n,"px) / ").concat(l,")"),t.style[h.getDirectionLabel("margin-top")]=0!==r?n&&"".concat(n,"px"):"",t.swiperSlideGridSet=!0},updateWrapperSize:function(e,t){var i=h.params,r=i.centeredSlides,a=i.roundLengths,i=c(),s=h.params.grid.rows;if(h.virtualSize=(e+i)*d,h.virtualSize=Math.ceil(h.virtualSize/s)-i,h.params.cssMode||(h.wrapperEl.style[h.getDirectionLabel("width")]="".concat(h.virtualSize+i,"px")),r){for(var n=[],o=0;o<t.length;o+=1){var l=t[o];a&&(l=Math.floor(l)),t[o]<h.virtualSize+t[0]&&n.push(l)}t.splice(0,t.length),t.push.apply(t,n)}}}},function(e){e=e.swiper,Object.assign(e,{appendSlide:ae.bind(e),prependSlide:se.bind(e),addSlide:function(e,t){var i=this,r=i.params,a=i.activeIndex,s=i.slidesEl,n=(r.loop&&(a-=i.loopedSlides,i.loopDestroy(),i.recalcSlides()),i.slides.length);if(e<=0)i.prependSlide(t);else if(n<=e)i.appendSlide(t);else{for(var o=e<a?a+1:a,l=[],c=n-1;e<=c;--c){var d=i.slides[c];d.remove(),l.unshift(d)}if("object"===_typeof(t)&&"length"in t){for(var p=0;p<t.length;p+=1)t[p]&&s.append(t[p]);o=e<a?a+t.length:a}else s.append(t);for(var u=0;u<l.length;u+=1)s.append(l[u]);i.recalcSlides(),r.loop&&i.loopCreate(),r.observer&&!i.isElement||i.update(),r.loop?i.slideTo(o+i.loopedSlides,0,!1):i.slideTo(o,0,!1)}}.bind(e),removeSlide:function(e){var t,i=this,r=i.params,a=i.activeIndex,s=(r.loop&&(a-=i.loopedSlides,i.loopDestroy()),a);if("object"===_typeof(e)&&"length"in e)for(var n=0;n<e.length;n+=1)t=e[n],i.slides[t]&&i.slides[t].remove(),t<s&&--s;else i.slides[t=e]&&i.slides[t].remove(),t<s&&--s;s=Math.max(s,0),i.recalcSlides(),r.loop&&i.loopCreate(),r.observer&&!i.isElement||i.update(),r.loop?i.slideTo(s+i.loopedSlides,0,!1):i.slideTo(s,0,!1)}.bind(e),removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}.bind(e)})},function(e){var n=e.swiper,t=e.extendParams,e=e.on;t({fadeEffect:{crossFade:!1}}),l({effect:"fade",swiper:n,on:e,setTranslate:function(){for(var e=n.slides,t=(n.params.fadeEffect,0);t<e.length;t+=1){var i=n.slides[t],r=-i.swiperSlideOffset,a=(n.params.virtualTranslate||(r-=n.translate),0),s=(n.isHorizontal()||(a=r,r=0),n.params.fadeEffect.crossFade?Math.max(1-Math.abs(i.progress),0):1+Math.min(Math.max(i.progress,-1),0)),i=E(0,i);i.style.opacity=s,i.style.transform="translate3d(".concat(r,"px, ").concat(a,"px, 0px)")}},setTransition:function(t){var e=n.slides.map(a);e.forEach(function(e){e.style.transitionDuration="".concat(t,"ms")}),c({swiper:n,duration:t,transformElements:e,allSlides:!0})},overwriteParams:function(){return{slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!n.params.cssMode}}})},function(e){function S(e,t,i){var r=i?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),a=i?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");r||(r=M("div","swiper-slide-shadow-cube swiper-slide-shadow-".concat(i?"left":"top").split(" ")),e.append(r)),a||(a=M("div","swiper-slide-shadow-cube swiper-slide-shadow-".concat(i?"right":"bottom").split(" ")),e.append(a)),r&&(r.style.opacity=Math.max(-t,0)),a&&(a.style.opacity=Math.max(t,0))}var C=e.swiper,t=e.extendParams,e=e.on;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}}),l({effect:"cube",swiper:C,on:e,setTranslate:function(){var e=C.el,t=C.wrapperEl,i=C.slides,r=C.width,a=C.height,s=C.rtlTranslate,n=C.size,o=C.browser,l=C.params.cubeEffect,c=C.isHorizontal(),d=C.virtual&&C.params.virtual.enabled,p=0;l.shadow&&(c?((x=C.wrapperEl.querySelector(".swiper-cube-shadow"))||(x=M("div","swiper-cube-shadow"),C.wrapperEl.append(x)),x.style.height="".concat(r,"px")):(x=e.querySelector(".swiper-cube-shadow"))||(x=M("div","swiper-cube-shadow"),e.append(x)));for(var u,h=0;h<i.length;h+=1){var f=i[h],m=h,v=90*(m=d?parseInt(f.getAttribute("data-swiper-slide-index"),10):m),g=Math.floor(v/360),y=(s&&(v=-v,g=Math.floor(-v/360)),Math.max(Math.min(f.progress,1),-1)),b=0,w=0,E=0,g=(m%4==0?(b=4*-g*n,E=0):(m-1)%4==0?(b=0,E=4*-g*n):(m-2)%4==0?(b=n+4*g*n,E=n):(m-3)%4==0&&(b=-n,E=3*n+4*n*g),s&&(b=-b),c||(w=b,b=0),"rotateX(".concat(c?0:-v,"deg) rotateY(").concat(c?v:0,"deg) translate3d(").concat(b,"px, ").concat(w,"px, ").concat(E,"px)"));y<=1&&-1<y&&(p=s?90*-m-90*y:90*m+90*y,C.browser)&&C.browser.need3dFix&&Math.abs(p)/90%2==1&&(p+=.001),f.style.transform=g,l.slideShadows&&S(f,y,c)}t.style.transformOrigin="50% 50% -".concat(n/2,"px"),t.style["-webkit-transform-origin"]="50% 50% -".concat(n/2,"px"),l.shadow&&(c?x.style.transform="translate3d(0px, ".concat(r/2+l.shadowOffset,"px, ").concat(-r/2,"px) rotateX(89.99deg) rotateZ(0deg) scale(").concat(l.shadowScale,")"):(e=Math.abs(p)-90*Math.floor(Math.abs(p)/90),r=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),e=l.shadowScale,r=l.shadowScale/r,u=l.shadowOffset,x.style.transform="scale3d(".concat(e,", 1, ").concat(r,") translate3d(0px, ").concat(a/2+u,"px, ").concat(-a/2/r,"px) rotateX(-89.99deg)")));var x=(o.isSafari||o.isWebView)&&o.needPerspectiveFix?-n/2:0;t.style.transform="translate3d(0px,0,".concat(x,"px) rotateX(").concat(C.isHorizontal()?0:p,"deg) rotateY(").concat(C.isHorizontal()?-p:0,"deg)"),t.style.setProperty("--swiper-cube-translate-z","".concat(x,"px"))},setTransition:function(t){var e=C.el;C.slides.forEach(function(e){e.style.transitionDuration="".concat(t,"ms"),e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(function(e){e.style.transitionDuration="".concat(t,"ms")})}),C.params.cubeEffect.shadow&&!C.isHorizontal()&&(e=e.querySelector(".swiper-cube-shadow"))&&(e.style.transitionDuration="".concat(t,"ms"))},recreateShadows:function(){var i=C.isHorizontal();C.slides.forEach(function(e){var t=Math.max(Math.min(e.progress,1),-1);S(e,t,i)})},getEffectParams:function(){return C.params.cubeEffect},perspective:function(){return!0},overwriteParams:function(){return{slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0}}})},function(e){function d(e,t){var i=p.isHorizontal()?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),r=p.isHorizontal()?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom"),i=i||x("flip",e,p.isHorizontal()?"left":"top"),r=r||x("flip",e,p.isHorizontal()?"right":"bottom");i&&(i.style.opacity=Math.max(-t,0)),r&&(r.style.opacity=Math.max(t,0))}var p=e.swiper,t=e.extendParams,e=e.on;t({flipEffect:{slideShadows:!0,limitRotation:!0}}),l({effect:"flip",swiper:p,on:e,setTranslate:function(){for(var e=p.slides,t=p.rtlTranslate,i=p.params.flipEffect,r=0;r<e.length;r+=1){var a=e[r],s=a.progress,n=(p.params.flipEffect.limitRotation&&(s=Math.max(Math.min(a.progress,1),-1)),a.swiperSlideOffset),o=-180*s,l=0,n=p.params.cssMode?-n-p.translate:-n,c=0,s=(p.isHorizontal()?t&&(o=-o):(c=n,l=-o,o=n=0),p.browser&&p.browser.need3dFix&&(Math.abs(o)/90%2==1&&(o+=.001),Math.abs(l)/90%2==1)&&(l+=.001),a.style.zIndex=-Math.abs(Math.round(s))+e.length,i.slideShadows&&d(a,s),"translate3d(".concat(n,"px, ").concat(c,"px, 0px) rotateX(").concat(l,"deg) rotateY(").concat(o,"deg)"));E(0,a).style.transform=s}},setTransition:function(t){var e=p.slides.map(a);e.forEach(function(e){e.style.transitionDuration="".concat(t,"ms"),e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(function(e){e.style.transitionDuration="".concat(t,"ms")})}),c({swiper:p,duration:t,transformElements:e})},recreateShadows:function(){p.params.flipEffect,p.slides.forEach(function(e){var t=e.progress;p.params.flipEffect.limitRotation&&(t=Math.max(Math.min(e.progress,1),-1)),d(e,t)})},getEffectParams:function(){return p.params.flipEffect},perspective:function(){return!0},overwriteParams:function(){return{slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!p.params.cssMode}}})},function(e){var w=e.swiper,t=e.extendParams,e=e.on;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),l({effect:"coverflow",swiper:w,on:e,setTranslate:function(){for(var e=w.width,t=w.height,i=w.slides,r=w.slidesSizesGrid,a=w.params.coverflowEffect,s=w.isHorizontal(),n=w.translate,o=s?e/2-n:t/2-n,l=s?a.rotate:-a.rotate,c=a.depth,d=0,p=i.length;d<p;d+=1){var u=i[d],h=r[d],f=(o-u.swiperSlideOffset-h/2)/h,f="function"==typeof a.modifier?a.modifier(f):f*a.modifier,m=s?l*f:0,v=s?0:l*f,g=-c*Math.abs(f),y=a.stretch,h=("string"==typeof y&&-1!==y.indexOf("%")&&(y=parseFloat(a.stretch)/100*h),s?0:y*f),y=s?y*f:0,b=1-(1-a.scale)*Math.abs(f),y=(Math.abs(y)<.001&&(y=0),Math.abs(h)<.001&&(h=0),Math.abs(g)<.001&&(g=0),Math.abs(m)<.001&&(m=0),Math.abs(v)<.001&&(v=0),Math.abs(b)<.001&&(b=0),w.browser&&w.browser.need3dFix&&(Math.abs(m)/90%2==1&&(m+=.001),Math.abs(v)/90%2==1)&&(v+=.001),"translate3d(".concat(y,"px,").concat(h,"px,").concat(g,"px)  rotateX(").concat(v,"deg) rotateY(").concat(m,"deg) scale(").concat(b,")"));E(0,u).style.transform=y,u.style.zIndex=1-Math.abs(Math.round(f)),a.slideShadows&&(h=s?u.querySelector(".swiper-slide-shadow-left"):u.querySelector(".swiper-slide-shadow-top"),g=s?u.querySelector(".swiper-slide-shadow-right"):u.querySelector(".swiper-slide-shadow-bottom"),h=h||x("coverflow",u,s?"left":"top"),g=g||x("coverflow",u,s?"right":"bottom"),h&&(h.style.opacity=0<f?f:0),g)&&(g.style.opacity=0<-f?-f:0)}},setTransition:function(t){w.slides.map(a).forEach(function(e){e.style.transitionDuration="".concat(t,"ms"),e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(function(e){e.style.transitionDuration="".concat(t,"ms")})})},perspective:function(){return!0},overwriteParams:function(){return{watchSlidesProgress:!0}}})},function(e){var m=e.swiper,t=e.extendParams,e=e.on;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}}),l({effect:"creative",swiper:m,on:e,setTranslate:function(){for(var d=m.slides,e=m.wrapperEl,t=m.slidesSizesGrid,p=m.params.creativeEffect,u=p.progressMultiplier,h=m.params.centeredSlides,f=(h&&(t=t[0]/2-m.params.slidesOffsetBefore||0,e.style.transform="translateX(calc(50% - ".concat(t,"px))")),0);f<d.length;f+=1)!function(){var e=d[f],t=e.progress,r=Math.min(Math.max(e.progress,-p.limitProgress),p.limitProgress),i=r,a=(h||(i=Math.min(Math.max(e.originalProgress,-p.limitProgress),p.limitProgress)),e.swiperSlideOffset),s=[m.params.cssMode?-a-m.translate:-a,0,0],n=[0,0,0],a=!1,o=(m.isHorizontal()||(s[1]=s[0],s[0]=0),{translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1}),t=(r<0?(o=p.next,a=!0):0<r&&(o=p.prev,a=!0),s.forEach(function(e,t){s[t]="calc(".concat(e,"px + (").concat("string"==typeof(e=o.translate[t])?e:"".concat(e,"px")," * ").concat(Math.abs(r*u),"))")}),n.forEach(function(e,t){var i=o.rotate[t]*Math.abs(r*u);m.browser&&m.browser.need3dFix&&Math.abs(i)/90%2==1&&(i+=.001),n[t]=i}),e.style.zIndex=-Math.abs(Math.round(t))+d.length,s.join(", ")),l="rotateX(".concat(n[0],"deg) rotateY(").concat(n[1],"deg) rotateZ(").concat(n[2],"deg)"),c="scale(".concat(i<0?1+(1-o.scale)*i*u:1-(1-o.scale)*i*u,")"),i=i<0?1+(1-o.opacity)*i*u:1-(1-o.opacity)*i*u,t="translate3d(".concat(t,") ").concat(l," ").concat(c),a=((a&&o.shadow||!a)&&(l=!(l=e.querySelector(".swiper-slide-shadow"))&&o.shadow?x("creative",e):l)&&(c=p.shadowPerProgress?r*(1/p.limitProgress):r,l.style.opacity=Math.min(Math.max(Math.abs(c),0),1)),E(0,e));a.style.transform=t,a.style.opacity=i,o.origin&&(a.style.transformOrigin=o.origin)}()},setTransition:function(t){var e=m.slides.map(a);e.forEach(function(e){e.style.transitionDuration="".concat(t,"ms"),e.querySelectorAll(".swiper-slide-shadow").forEach(function(e){e.style.transitionDuration="".concat(t,"ms")})}),c({swiper:m,duration:t,transformElements:e,allSlides:!0})},perspective:function(){return m.params.creativeEffect.perspective},overwriteParams:function(){return{watchSlidesProgress:!0,virtualTranslate:!m.params.cssMode}}})},function(e){var w=e.swiper,t=e.extendParams,e=e.on;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),l({effect:"cards",swiper:w,on:e,setTranslate:function(){for(var e=w.slides,t=w.activeIndex,i=w.rtlTranslate,r=w.params.cardsEffect,a=w.touchEventsData,s=a.startTranslate,n=a.isTouched,o=i?-w.translate:w.translate,l=0;l<e.length;l+=1){var c=e[l],d=c.progress,p=Math.min(Math.max(d,-4),4),u=c.swiperSlideOffset,u=(w.params.centeredSlides&&!w.params.cssMode&&(w.wrapperEl.style.transform="translateX(".concat(w.minTranslate(),"px)")),w.params.centeredSlides&&w.params.cssMode&&(u-=e[0].swiperSlideOffset),w.params.cssMode?-u-w.translate:-u),h=0,f=-100*Math.abs(p),m=1,v=-r.perSlideRotate*p,g=r.perSlideOffset-.75*Math.abs(p),y=w.virtual&&w.params.virtual.enabled?w.virtual.from+l:l,b=(y===t||y===t-1)&&0<p&&p<1&&(n||w.params.cssMode)&&o<s,y=(y===t||y===t+1)&&p<0&&-1<p&&(n||w.params.cssMode)&&s<o,b=((b||y)&&(v+=-28*p*(b=Math.pow(1-Math.abs((Math.abs(p)-.5)/.5),.5)),m+=-.5*b,g+=96*b,h="".concat(-25*b*Math.abs(p),"%")),u=p<0?"calc(".concat(u,"px ").concat(i?"-":"+"," (").concat(g*Math.abs(p),"%))"):0<p?"calc(".concat(u,"px ").concat(i?"-":"+"," (-").concat(g*Math.abs(p),"%))"):"".concat(u,"px"),w.isHorizontal()||(y=h,h=u,u=y),"".concat(p<0?1+(1-m)*p:1-(1-m)*p)),g="\n        translate3d(".concat(u,", ").concat(h,", ").concat(f,"px)\n        rotateZ(").concat(r.rotate?i?-v:v:0,"deg)\n        scale(").concat(b,")\n      ");r.slideShadows&&(y=(y=c.querySelector(".swiper-slide-shadow"))||x("cards",c))&&(y.style.opacity=Math.min(Math.max((Math.abs(p)-.5)/.5,0),1)),c.style.zIndex=-Math.abs(Math.round(d))+e.length,E(0,c).style.transform=g}},setTransition:function(t){var e=w.slides.map(a);e.forEach(function(e){e.style.transitionDuration="".concat(t,"ms"),e.querySelectorAll(".swiper-slide-shadow").forEach(function(e){e.style.transitionDuration="".concat(t,"ms")})}),c({swiper:w,duration:t,transformElements:e})},perspective:function(){return!0},overwriteParams:function(){return{watchSlidesProgress:!0,virtualTranslate:!w.params.cssMode}}})}]);var m=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function _(e){return"object"===_typeof(e)&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function ne(t,i){var r=["__proto__","constructor","prototype"];Object.keys(i).filter(function(e){return r.indexOf(e)<0}).forEach(function(e){void 0===t[e]||!(_(i[e])&&_(t[e])&&0<Object.keys(i[e]).length)||i[e].__swiper__?t[e]=i[e]:ne(t[e],i[e])})}function v(e){return(e=void 0===e?"":e).replace(/-[a-z]/g,function(e){return e.toUpperCase().replace("-","")})}function oe(e){function i(e){d[e]&&(d[e].destroy(),"navigation"===e?(d.isElement&&(d[e].prevEl.remove(),d[e].nextEl.remove()),y[e].prevEl=void 0,y[e].nextEl=void 0,d[e].prevEl=void 0,d[e].nextEl=void 0):(d.isElement&&d[e].el.remove(),y[e].el=void 0,d[e].el=void 0))}var t,r,a,s,n,o,l,c,d=e.swiper,p=e.slides,u=e.passedParams,h=e.changedParams,f=e.nextEl,m=e.prevEl,v=e.scrollbarEl,e=e.paginationEl,g=h.filter(function(e){return"children"!==e&&"direction"!==e&&"wrapperClass"!==e}),y=d.params,b=d.pagination,w=d.navigation,E=d.scrollbar,x=d.virtual,S=d.thumbs;h.includes("thumbs")&&u.thumbs&&u.thumbs.swiper&&y.thumbs&&!y.thumbs.swiper&&(t=!0),h.includes("controller")&&u.controller&&u.controller.control&&y.controller&&!y.controller.control&&(r=!0),h.includes("pagination")&&u.pagination&&(u.pagination.el||e)&&(y.pagination||!1===y.pagination)&&b&&!b.el&&(a=!0),h.includes("scrollbar")&&u.scrollbar&&(u.scrollbar.el||v)&&(y.scrollbar||!1===y.scrollbar)&&E&&!E.el&&(s=!0),h.includes("navigation")&&u.navigation&&(u.navigation.prevEl||m)&&(u.navigation.nextEl||f)&&(y.navigation||!1===y.navigation)&&w&&!w.prevEl&&!w.nextEl&&(n=!0);h.includes("loop")&&d.isElement&&(y.loop&&!u.loop?o=!0:!y.loop&&u.loop?l=!0:c=!0),g.forEach(function(e){var t;_(y[e])&&_(u[e])?(Object.assign(y[e],u[e]),("navigation"===e||"pagination"===e||"scrollbar"===e)&&"enabled"in u[e]&&!u[e].enabled&&i(e)):!0!==(t=u[e])&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?y[e]=u[e]:!1===t&&i(e)}),g.includes("controller")&&!r&&d.controller&&d.controller.control&&y.controller&&y.controller.control&&(d.controller.control=y.controller.control),h.includes("children")&&p&&x&&y.virtual.enabled?(x.slides=p,x.update(!0)):h.includes("virtual")&&x&&y.virtual.enabled&&(p&&(x.slides=p),x.update(!0)),h.includes("children")&&p&&y.loop&&(c=!0),t&&S.init()&&S.update(!0),r&&(d.controller.control=y.controller.control),a&&(!d.isElement||e&&"string"!=typeof e||((e=document.createElement("div")).classList.add("swiper-pagination"),e.part.add("pagination"),d.el.appendChild(e)),e&&(y.pagination.el=e),b.init(),b.render(),b.update()),s&&(!d.isElement||v&&"string"!=typeof v||((v=document.createElement("div")).classList.add("swiper-scrollbar"),v.part.add("scrollbar"),d.el.appendChild(v)),v&&(y.scrollbar.el=v),E.init(),E.updateSize(),E.setTranslate()),n&&(d.isElement&&(f&&"string"!=typeof f||((f=document.createElement("div")).classList.add("swiper-button-next"),f.innerHTML=d.hostEl.constructor.nextButtonSvg,f.part.add("button-next"),d.el.appendChild(f)),m&&"string"!=typeof m||((m=document.createElement("div")).classList.add("swiper-button-prev"),m.innerHTML=d.hostEl.constructor.prevButtonSvg,m.part.add("button-prev"),d.el.appendChild(m))),f&&(y.navigation.nextEl=f),m&&(y.navigation.prevEl=m),w.init(),w.update()),h.includes("allowSlideNext")&&(d.allowSlideNext=u.allowSlideNext),h.includes("allowSlidePrev")&&(d.allowSlidePrev=u.allowSlidePrev),h.includes("direction")&&d.changeDirection(u.direction,!1),(o||c)&&d.loopDestroy(),(l||c)&&d.loopCreate(),d.update()}function le(t){if(parseFloat(t)===Number(t))return Number(t);if("true"===t)return!0;if(""===t)return!0;if("false"===t)return!1;if("null"===t)return null;if("undefined"!==t){if("string"==typeof t&&t.includes("{")&&t.includes("}")&&t.includes('"')){var i;try{i=JSON.parse(t)}catch(e){i=t}return i}return t}}var ce=["a11y","autoplay","controller","cards-effect","coverflow-effect","creative-effect","cube-effect","fade-effect","flip-effect","free-mode","grid","hash-navigation","history","keyboard","mousewheel","navigation","pagination","parallax","scrollbar","thumbs","virtual","zoom"];function de(t,e,i){var r={},a={},s=(ne(r,Q),[].concat(m,["on"])),n=s.map(function(e){return e.replace(/_/,"")}),s=(s.forEach(function(e){e=e.replace("_",""),void 0!==t[e]&&(a[e]=t[e])}),_toConsumableArray(t.attributes));return"string"==typeof e&&void 0!==i&&s.push({name:e,value:_(i)?_objectSpread({},i):i}),s.forEach(function(t){var e,i=ce.filter(function(e){return 0===t.name.indexOf("".concat(e,"-"))})[0];i?(e=v(i),i=v(t.name.split("".concat(i,"-"))[1]),void 0===a[e]&&(a[e]={}),!0===a[e]&&(a[e]={enabled:!0}),a[e][i]=le(t.value)):(e=v(t.name),n.includes(e)&&(i=le(t.value),a[e]&&ce.includes(t.name)&&!_(i)?(a[e].constructor!==Object&&(a[e]={}),a[e].enabled=!!i):a[e]=i))}),ne(r,a),r.navigation?r.navigation=_objectSpread({prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},!0!==r.navigation?r.navigation:{}):!1===r.navigation&&delete r.navigation,r.scrollbar?r.scrollbar=_objectSpread({el:".swiper-scrollbar"},!0!==r.scrollbar?r.scrollbar:{}):!1===r.scrollbar&&delete r.scrollbar,r.pagination?r.pagination=_objectSpread({el:".swiper-pagination"},!0!==r.pagination?r.pagination:{}):!1===r.pagination&&delete r.pagination,{params:r,passedParams:a}}function pe(e,t){var i;"undefined"!=typeof CSSStyleSheet&&e.adoptedStyleSheets?((i=new CSSStyleSheet).replaceSync(t),e.adoptedStyleSheets=[i]):((i=document.createElement("style")).rel="stylesheet",i.textContent=t,e.appendChild(i))}var ue="undefined"==typeof window||"undefined"==typeof HTMLElement?_createClass(function e(){_classCallCheck(this,e)}):HTMLElement,he='<svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>\n    ',fe=function(){_inherits(i,ue);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).attachShadow({mode:"open"}),e}return _createClass(i,[{key:"cssStyles",value:function(){return[":host{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{width:100%;height:100%;margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android ::slotted(swiper-slide),.swiper-ios ::slotted(swiper-slide),.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}::slotted(swiper-slide){flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}::slotted(.swiper-slide-invisible-blank){visibility:hidden}.swiper-autoheight,.swiper-autoheight ::slotted(swiper-slide){height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden ::slotted(swiper-slide){transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d ::slotted(swiper-slide){transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode ::slotted(swiper-slide){scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode ::slotted(swiper-slide){scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered ::slotted(swiper-slide){scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal ::slotted(swiper-slide):first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical ::slotted(swiper-slide):first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-virtual ::slotted(swiper-slide){-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:host{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}::slotted(.swiper-slide-zoomed){cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode ::slotted(swiper-slide){transition-timing-function:ease-out}.swiper-fade ::slotted(swiper-slide){pointer-events:none;transition-property:opacity}.swiper-fade ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-fade ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-fade ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube{overflow:visible}.swiper-cube ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-cube.swiper-rtl ::slotted(swiper-slide){transform-origin:100% 0}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-next),.swiper-cube ::slotted(.swiper-slide-prev){pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube ::slotted(.swiper-slide-next)+::slotted(swiper-slide){pointer-events:auto;visibility:visible}.swiper-flip{overflow:visible}.swiper-flip ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-flip ::slotted(.swiper-slide-active),.swiper-flip ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-creative ::slotted(swiper-slide){-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper-cards{overflow:visible}.swiper-cards ::slotted(swiper-slide){transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}"].concat(_toConsumableArray(this.injectStyles&&Array.isArray(this.injectStyles)?this.injectStyles:[])).join("\n")}},{key:"cssLinks",value:function(){return this.injectStylesUrls||[]}},{key:"calcSlideSlots",value:function(){var e=this.slideSlots||0,t=_toConsumableArray(this.querySelectorAll("[slot^=slide-]")).map(function(e){return parseInt(e.getAttribute("slot").split("slide-")[1],10)});if(this.slideSlots=t.length?Math.max.apply(Math,_toConsumableArray(t))+1:0,this.rendered)if(this.slideSlots>e)for(var i=e;i<this.slideSlots;i+=1){var r=document.createElement("swiper-slide"),a=(r.setAttribute("part","slide slide-".concat(i+1)),document.createElement("slot"));a.setAttribute("name","slide-".concat(i+1)),r.appendChild(a),this.shadowRoot.querySelector(".swiper-wrapper").appendChild(r)}else if(this.slideSlots<e)for(var s=this.swiper.slides,n=s.length-1;0<=n;--n)n>this.slideSlots&&s[n].remove()}},{key:"render",value:function(){var e,t,i=this;this.rendered||(this.calcSlideSlots(),e=this.cssStyles(),(e=0<this.slideSlots?e.replace(/::slotted\(([a-z-0-9.]*)\)/g,"$1"):e).length&&pe(this.shadowRoot,e),this.cssLinks().forEach(function(e){var t;i.shadowRoot.querySelector('link[href="'.concat(e,'"]'))||((t=document.createElement("link")).rel="stylesheet",t.href=e,i.shadowRoot.appendChild(t))}),(e=document.createElement("div")).classList.add("swiper"),e.part="container",e.innerHTML='\n      <slot name="container-start"></slot>\n      <div class="swiper-wrapper" part="wrapper">\n        <slot></slot>\n        '.concat(Array.from({length:this.slideSlots}).map(function(e,t){return'\n        <swiper-slide part="slide slide-'.concat(t,'">\n          <slot name="slide-').concat(t,'"></slot>\n        </swiper-slide>\n        ')}).join(""),'\n      </div>\n      <slot name="container-end"></slot>\n      ').concat((t=void 0===(t=this.passedParams)?{}:t).navigation&&void 0===t.navigation.nextEl&&void 0===t.navigation.prevEl?'\n        <div part="button-prev" class="swiper-button-prev">'.concat(this.constructor.prevButtonSvg,'</div>\n        <div part="button-next" class="swiper-button-next">').concat(this.constructor.nextButtonSvg,"</div>\n      "):"","\n      ").concat((t=void 0===(t=this.passedParams)?{}:t).pagination&&void 0===t.pagination.el?'\n        <div part="pagination" class="swiper-pagination"></div>\n      ':"","\n      ").concat((t=void 0===(t=this.passedParams)?{}:t).scrollbar&&void 0===t.scrollbar.el?'\n        <div part="scrollbar" class="swiper-scrollbar"></div>\n      ':"","\n    "),this.shadowRoot.appendChild(e),this.rendered=!0)}},{key:"initialize",value:function(){var s,e,n=this;this.initialized||(this.initialized=!0,e=de(this),s=e.params,e=e.passedParams,this.swiperParams=s,this.passedParams=e,delete this.swiperParams.init,this.render(),this.swiper=new o(this.shadowRoot.querySelector(".swiper"),_objectSpread(_objectSpread(_objectSpread({},s.virtual?{}:{observer:!0,observeSlideChildren:0<this.slideSlots}),s),{},{touchEventsTarget:"container",onAny:function(e){"observerUpdate"===e&&n.calcSlideSlots();for(var t=s.eventsPrefix?"".concat(s.eventsPrefix).concat(e.toLowerCase()):e.toLowerCase(),i=arguments.length,r=new Array(1<i?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];t=new CustomEvent(t,{detail:r,bubbles:"hashChange"!==e,cancelable:!0});n.dispatchEvent(t)}})))}},{key:"connectedCallback",value:function(){this.initialized&&this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||!1!==this.init&&"false"!==this.getAttribute("init")&&this.initialize()}},{key:"disconnectedCallback",value:function(){this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||(this.swiper&&this.swiper.destroy&&this.swiper.destroy(),this.initialized=!1)}},{key:"updateSwiperOnPropChange",value:function(e,t){var i=de(this,e,t),r=i.params,i=i.passedParams;this.passedParams=i,this.swiperParams=r,this.swiper&&this.swiper.params[e]===t||oe(_objectSpread(_objectSpread(_objectSpread({swiper:this.swiper,passedParams:this.passedParams,changedParams:[v(e)]},"navigation"===e&&i[e]?{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}:{}),"pagination"===e&&i[e]?{paginationEl:".swiper-pagination"}:{}),"scrollbar"===e&&i[e]?{scrollbarEl:".swiper-scrollbar"}:{}))}},{key:"attributeChangedCallback",value:function(e,t,i){this.initialized&&this.updateSwiperOnPropChange(e,i="true"===t&&null===i?!1:i)}}],[{key:"nextButtonSvg",get:function(){return he}},{key:"prevButtonSvg",get:function(){return he.replace("/></svg>",' transform-origin="center" transform="rotate(180)"/></svg>')}},{key:"observedAttributes",get:function(){return m.filter(function(e){return e.includes("_")}).map(function(e){return e.replace(/[A-Z]/g,function(e){return"-".concat(e)}).replace("_","").toLowerCase()})}}]),i}(),me=(m.forEach(function(t){"init"!==t&&(t=t.replace("_",""),Object.defineProperty(fe.prototype,t,{configurable:!0,get:function(){return(this.passedParams||{})[t]},set:function(e){this.passedParams||(this.passedParams={}),this.passedParams[t]=e,this.initialized&&this.updateSwiperOnPropChange(t,e)}}))}),function(){_inherits(i,ue);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).attachShadow({mode:"open"}),e}return _createClass(i,[{key:"render",value:function(){var e=this.lazy||""===this.getAttribute("lazy")||"true"===this.getAttribute("lazy");pe(this.shadowRoot,"::slotted(.swiper-slide-shadow),::slotted(.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-top){position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}::slotted(.swiper-slide-shadow){background:rgba(0,0,0,.15)}::slotted(.swiper-slide-shadow-left){background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-right){background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-top){background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-bottom){background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear;width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-zoom-container){width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}::slotted(.swiper-zoom-container)>canvas,::slotted(.swiper-zoom-container)>img,::slotted(.swiper-zoom-container)>svg{max-width:100%;max-height:100%;object-fit:contain}"),this.shadowRoot.appendChild(document.createElement("slot")),e&&((e=document.createElement("div")).classList.add("swiper-lazy-preloader"),e.part.add("preloader"),this.shadowRoot.appendChild(e))}},{key:"initialize",value:function(){this.render()}},{key:"connectedCallback",value:function(){this.initialize()}}]),i}());"undefined"!=typeof window&&(window.SwiperElementRegisterParams=function(e){m.push.apply(m,_toConsumableArray(e))}),"undefined"==typeof window||(window.customElements.get("swiper-container")||window.customElements.define("swiper-container",fe),window.customElements.get("swiper-slide"))||window.customElements.define("swiper-slide",me)},{}],21:[function(e,t,i){var r,a;r="undefined"!=typeof window?window:this,a=function(a,e){function t(){}var s,i,e=t.prototype=Object.create(e.prototype),n=(e.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i="ontouchstart"in a?(s="touchstart",["touchmove","touchend","touchcancel"]):a.PointerEvent?(s="pointerdown",["pointermove","pointerup","pointercancel"]):(s="mousedown",["mousemove","mouseup"]),e.touchActionValue="none",e.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},e.unbindHandles=function(){this._bindHandles("removeEventListener","")},e._bindHandles=function(t,i){var r=this;this.handles.forEach(function(e){e[t](s,r),e[t]("click",r),a.PointerEvent&&(e.style.touchAction=i)})},e.bindActivePointerEvents=function(){var t=this;i.forEach(function(e){a.addEventListener(e,t)})},e.unbindActivePointerEvents=function(){var t=this;i.forEach(function(e){a.removeEventListener(e,t)})},e.withPointer=function(e,t){t.pointerId===this.pointerIdentifier&&this[e](t,t)},e.withTouch=function(e,t){var i,r,a=_createForOfIteratorHelper(t.changedTouches);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.identifier===this.pointerIdentifier&&(i=s)}}catch(e){a.e(e)}finally{a.f()}i&&this[e](t,i)},e.onmousedown=function(e){this.pointerDown(e,e)},e.ontouchstart=function(e){this.pointerDown(e,e.changedTouches[0])},e.onpointerdown=function(e){this.pointerDown(e,e)},["TEXTAREA","INPUT","SELECT","OPTION"]),o=["radio","checkbox","button","submit","image","file"];return e.pointerDown=function(e,t){var i=n.includes(e.target.nodeName),r=o.includes(e.target.type);this.isPointerDown||e.button||i&&!r||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[e,t]))},e.onmousemove=function(e){this.pointerMove(e,e)},e.onpointermove=function(e){this.withPointer("pointerMove",e)},e.ontouchmove=function(e){this.withTouch("pointerMove",e)},e.pointerMove=function(e,t){var i={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[e,t,i]),!this.isDragging&&this.hasDragStarted(i)&&this.dragStart(e,t),this.isDragging&&this.dragMove(e,t,i)},e.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},e.dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[e,t])},e.dragMove=function(e,t,i){this.emitEvent("dragMove",[e,t,i])},e.onmouseup=function(e){this.pointerUp(e,e)},e.onpointerup=function(e){this.withPointer("pointerUp",e)},e.ontouchend=function(e){this.withTouch("pointerUp",e)},e.pointerUp=function(e,t){this.pointerDone(),this.emitEvent("pointerUp",[e,t]),this.isDragging?this.dragEnd(e,t):this.staticClick(e,t)},e.dragEnd=function(e,t){var i=this;this.isDragging=!1,setTimeout(function(){return delete i.isPreventingClicks}),this.emitEvent("dragEnd",[e,t])},e.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},e.onpointercancel=function(e){this.withPointer("pointerCancel",e)},e.ontouchcancel=function(e){this.withTouch("pointerCancel",e)},e.pointerCancel=function(e,t){this.pointerDone(),this.emitEvent("pointerCancel",[e,t])},e.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},e.staticClick=function(e,t){var i=this,r="mouseup"===e.type;r&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[e,t]),r&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete i.isIgnoringMouseUp},400)))},t},"object"==_typeof(t)&&t.exports?t.exports=a(r,e("ev-emitter")):r.Unidragger=a(r,r.EvEmitter)},{"ev-emitter":1}],22:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(i,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(i,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(i,"v3",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(i,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(i,"v5",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(i,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return l.default}});var r=u(e("./v1.js")),a=u(e("./v3.js")),s=u(e("./v4.js")),n=u(e("./v5.js")),o=u(e("./nil.js")),l=u(e("./version.js")),c=u(e("./validate.js")),d=u(e("./stringify.js")),p=u(e("./parse.js"));function u(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":25,"./parse.js":26,"./stringify.js":30,"./v1.js":31,"./v3.js":32,"./v4.js":34,"./v5.js":35,"./validate.js":36,"./version.js":37}],23:[function(e,t,i){function p(e){return 14+(e+64>>>9<<4)+1}function u(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function o(e,t,i,r,a,s){return u((t=u(u(t,e),u(r,s)))<<a|t>>>32-a,i)}function h(e,t,i,r,a,s,n){return o(t&i|~t&r,e,t,a,s,n)}function f(e,t,i,r,a,s,n){return o(t&r|i&~r,e,t,a,s,n)}function m(e,t,i,r,a,s,n){return o(t^i^r,e,t,a,s,n)}function v(e,t,i,r,a,s,n){return o(i^(t|~r),e,t,a,s,n)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}for(var r=function(e,t){e[t>>5]|=128<<t%32,e[p(t)-1]=t;for(var i=1732584193,r=-271733879,a=-1732584194,s=271733878,n=0;n<e.length;n+=16){var o=i,l=r,c=a,d=s;i=h(i,r,a,s,e[n],7,-680876936),s=h(s,i,r,a,e[n+1],12,-389564586),a=h(a,s,i,r,e[n+2],17,606105819),r=h(r,a,s,i,e[n+3],22,-1044525330),i=h(i,r,a,s,e[n+4],7,-176418897),s=h(s,i,r,a,e[n+5],12,1200080426),a=h(a,s,i,r,e[n+6],17,-1473231341),r=h(r,a,s,i,e[n+7],22,-45705983),i=h(i,r,a,s,e[n+8],7,1770035416),s=h(s,i,r,a,e[n+9],12,-1958414417),a=h(a,s,i,r,e[n+10],17,-42063),r=h(r,a,s,i,e[n+11],22,-1990404162),i=h(i,r,a,s,e[n+12],7,1804603682),s=h(s,i,r,a,e[n+13],12,-40341101),a=h(a,s,i,r,e[n+14],17,-1502002290),r=h(r,a,s,i,e[n+15],22,1236535329),i=f(i,r,a,s,e[n+1],5,-165796510),s=f(s,i,r,a,e[n+6],9,-1069501632),a=f(a,s,i,r,e[n+11],14,643717713),r=f(r,a,s,i,e[n],20,-373897302),i=f(i,r,a,s,e[n+5],5,-701558691),s=f(s,i,r,a,e[n+10],9,38016083),a=f(a,s,i,r,e[n+15],14,-660478335),r=f(r,a,s,i,e[n+4],20,-405537848),i=f(i,r,a,s,e[n+9],5,568446438),s=f(s,i,r,a,e[n+14],9,-1019803690),a=f(a,s,i,r,e[n+3],14,-187363961),r=f(r,a,s,i,e[n+8],20,1163531501),i=f(i,r,a,s,e[n+13],5,-1444681467),s=f(s,i,r,a,e[n+2],9,-51403784),a=f(a,s,i,r,e[n+7],14,1735328473),r=f(r,a,s,i,e[n+12],20,-1926607734),i=m(i,r,a,s,e[n+5],4,-378558),s=m(s,i,r,a,e[n+8],11,-2022574463),a=m(a,s,i,r,e[n+11],16,1839030562),r=m(r,a,s,i,e[n+14],23,-35309556),i=m(i,r,a,s,e[n+1],4,-1530992060),s=m(s,i,r,a,e[n+4],11,1272893353),a=m(a,s,i,r,e[n+7],16,-155497632),r=m(r,a,s,i,e[n+10],23,-1094730640),i=m(i,r,a,s,e[n+13],4,681279174),s=m(s,i,r,a,e[n],11,-358537222),a=m(a,s,i,r,e[n+3],16,-722521979),r=m(r,a,s,i,e[n+6],23,76029189),i=m(i,r,a,s,e[n+9],4,-640364487),s=m(s,i,r,a,e[n+12],11,-421815835),a=m(a,s,i,r,e[n+15],16,530742520),r=m(r,a,s,i,e[n+2],23,-995338651),i=v(i,r,a,s,e[n],6,-198630844),s=v(s,i,r,a,e[n+7],10,1126891415),a=v(a,s,i,r,e[n+14],15,-1416354905),r=v(r,a,s,i,e[n+5],21,-57434055),i=v(i,r,a,s,e[n+12],6,1700485571),s=v(s,i,r,a,e[n+3],10,-1894986606),a=v(a,s,i,r,e[n+10],15,-1051523),r=v(r,a,s,i,e[n+1],21,-2054922799),i=v(i,r,a,s,e[n+8],6,1873313359),s=v(s,i,r,a,e[n+15],10,-30611744),a=v(a,s,i,r,e[n+6],15,-1560198380),r=v(r,a,s,i,e[n+13],21,1309151649),i=v(i,r,a,s,e[n+4],6,-145523070),s=v(s,i,r,a,e[n+11],10,-1120210379),a=v(a,s,i,r,e[n+2],15,718787259),r=v(r,a,s,i,e[n+9],21,-343485551),i=u(i,o),r=u(r,l),a=u(a,c),s=u(s,d)}return[i,r,a,s]}(function(e){if(0===e.length)return[];for(var t=8*e.length,i=new Uint32Array(p(t)),r=0;r<t;r+=8)i[r>>5]|=(255&e[r/8])<<r%32;return i}(e),8*e.length),a=[],s=32*r.length,n="0123456789abcdef",o=0;o<s;o+=8){var l=r[o>>5]>>>o%32&255,l=parseInt(n.charAt(l>>>4&15)+n.charAt(15&l),16);a.push(l)}return a}},{}],24:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);i.default={randomUUID:r}},{}],25:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default="00000000-0000-0000-0000-000000000000"},{}],26:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};i.default=function(e){var t,i;if((0,r.default)(e))return(i=new Uint8Array(16))[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i;throw TypeError("Invalid UUID")}},{"./validate.js":36}],27:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],28:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)};var r,a=new Uint8Array(16)},{}],29:[function(e,t,i){function x(e,t){return e<<t|e>>>32-t}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var a=0;a<r.length;++a)e.push(r.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,n=Math.ceil(s/16),o=new Array(n),l=0;l<n;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=e[64*l+4*d]<<24|e[64*l+4*d+1]<<16|e[64*l+4*d+2]<<8|e[64*l+4*d+3];o[l]=c}o[n-1][14]=8*(e.length-1)/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=8*(e.length-1)&4294967295;for(var p=0;p<n;++p){for(var u=new Uint32Array(80),h=0;h<16;++h)u[h]=o[p][h];for(var f=16;f<80;++f)u[f]=x(u[f-3]^u[f-8]^u[f-14]^u[f-16],1);for(var m=i[0],v=i[1],g=i[2],y=i[3],b=i[4],w=0;w<80;++w)var E=Math.floor(w/20),E=x(m,5)+function(e,t,i,r){switch(e){case 0:return t&i^~t&r;case 1:return t^i^r;case 2:return t&i^t&r^i&r;case 3:return t^i^r}}(E,v,g,y)+b+t[E]+u[w]>>>0,b=y,y=g,g=x(v,30)>>>0,v=m,m=E;i[0]=i[0]+m>>>0,i[1]=i[1]+v>>>0,i[2]=i[2]+g>>>0,i[3]=i[3]+y>>>0,i[4]=i[4]+b>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}},{}],30:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.unsafeStringify=n;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};for(var a=[],s=0;s<256;++s)a.push((s+256).toString(16).slice(1));function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]}i.default=function(e){if(e=n(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),(0,r.default)(e))return e;throw TypeError("Stringified UUID is invalid")}},{"./validate.js":36}],31:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,d,p,u=(r=e("./rng.js"))&&r.__esModule?r:{default:r},h=e("./stringify.js");var f=0,m=0;i.default=function(e,t,i){var r=t&&i||0,a=t||new Array(16),s=(e=e||{}).node||d,i=void 0!==e.clockseq?e.clockseq:p,n=(null!=s&&null!=i||(n=e.random||(e.rng||u.default)(),null==s&&(s=d=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==i&&(i=p=16383&(n[6]<<8|n[7]))),void 0!==e.msecs?e.msecs:Date.now()),o=void 0!==e.nsecs?e.nsecs:m+1,l=n-f+(o-m)/1e4;if(l<0&&void 0===e.clockseq&&(i=i+1&16383),1e4<=(o=(l<0||f<n)&&void 0===e.nsecs?0:o))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=n,p=i,l=(1e4*(268435455&(n+=122192928e5))+(m=o))%4294967296,a[r++]=l>>>24&255,a[r++]=l>>>16&255,a[r++]=l>>>8&255,a[r++]=255&l,e=n/4294967296*1e4&268435455,a[r++]=e>>>8&255,a[r++]=255&e,a[r++]=e>>>24&15|16,a[r++]=e>>>16&255,a[r++]=i>>>8|128,a[r++]=255&i;for(var c=0;c<6;++c)a[r+c]=s[c];return t||(0,h.unsafeStringify)(a)}},{"./rng.js":28,"./stringify.js":30}],32:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=a(e("./v35.js")),e=a(e("./md5.js"));function a(e){return e&&e.__esModule?e:{default:e}}r=(0,r.default)("v3",48,e.default);i.default=r},{"./md5.js":23,"./v35.js":33}],33:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.URL=i.DNS=void 0,i.default=function(e,o,l){function t(e,t,i,r){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),16!==(null==(a=t="string"==typeof t?(0,d.default)(t):t)?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(t),s.set(e,t.length),(s=l(s))[6]=15&s[6]|o,s[8]=63&s[8]|128,i){r=r||0;for(var n=0;n<16;++n)i[r+n]=s[n];return i}return(0,c.unsafeStringify)(s)}try{t.name=e}catch(e){}return t.DNS=r,t.URL=a,t};var c=e("./stringify.js"),d=(e=e("./parse.js"))&&e.__esModule?e:{default:e};var r="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a=(i.DNS=r,"6ba7b811-9dad-11d1-80b4-00c04fd430c8");i.URL=a},{"./parse.js":26,"./stringify.js":30}],34:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=r(e("./native.js")),n=r(e("./rng.js")),o=e("./stringify.js");function r(e){return e&&e.__esModule?e:{default:e}}i.default=function(e,t,i){if(s.default.randomUUID&&!t&&!e)return s.default.randomUUID();var r=(e=e||{}).random||(e.rng||n.default)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(var a=0;a<16;++a)t[i+a]=r[a];return t}return(0,o.unsafeStringify)(r)}},{"./native.js":24,"./rng.js":28,"./stringify.js":30}],35:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=a(e("./v35.js")),e=a(e("./sha1.js"));function a(e){return e&&e.__esModule?e:{default:e}}r=(0,r.default)("v5",80,e.default);i.default=r},{"./sha1.js":29,"./v35.js":33}],36:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(e=e("./regex.js"))&&e.__esModule?e:{default:e};i.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":27}],37:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(e=e("./validate.js"))&&e.__esModule?e:{default:e};i.default=function(e){if((0,r.default)(e))return parseInt(e.slice(14,15),16);throw TypeError("Invalid UUID")}},{"./validate.js":36}],38:[function(e,t,i){window.Flickity=e("flickity"),window.Uuid=e("uuid"),e("lazysizes/plugins/bgset/ls.bgset"),e("lazysizes"),e("lazysizes/plugins/parent-fit/ls.parent-fit"),window.register=e("../node_modules/swiper/swiper-element-bundle"),window.register.default,e("lazysizes"),window.PubSub=e("./scripts/pubsub"),window.debounce=function(r,a){var s,n=this;return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];clearTimeout(s),s=setTimeout(function(){return r.apply(n,t)},a)}},window.throttle=function(r,a){var s=!1,n=null;function o(){null==n?s=!1:(r.apply(void 0,_toConsumableArray(n)),n=null,setTimeout(o,a))}return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s?n=t:(r.apply(void 0,t),s=!0,setTimeout(o,a))}}},{"../node_modules/swiper/swiper-element-bundle":20,"./scripts/pubsub":39,flickity:9,lazysizes:17,"lazysizes/plugins/bgset/ls.bgset":18,"lazysizes/plugins/parent-fit/ls.parent-fit":19,uuid:22}],39:[function(e,t,i){t.exports={EVENTS:{cartUpdated:"cart-updated"},subscribers:{},subscribe:function(e,t){var i=this;return void 0===this.subscribers[e]&&(this.subscribers[e]=[]),this.subscribers[e]=[].concat(_toConsumableArray(this.subscribers[e]),[t]),function(){i.subscribers[e]=i.subscribers[e].filter(function(e){return e!==t})}},publish:function(e,t){this.subscribers[e]&&this.subscribers[e].forEach(function(e){e(t)})}}},{}]},{},[38]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZXYtZW1pdHRlci9ldi1lbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL2ZsaWNraXR5L2pzL2FuaW1hdGUuanMiLCJub2RlX21vZHVsZXMvZml6enktdWktdXRpbHMvdXRpbHMuanMiLCJub2RlX21vZHVsZXMvZmxpY2tpdHkvanMvY29yZS5qcyIsIm5vZGVfbW9kdWxlcy9mbGlja2l0eS9qcy9hZGQtcmVtb3ZlLWNlbGwuanMiLCJub2RlX21vZHVsZXMvZmxpY2tpdHkvanMvcHJldi1uZXh0LWJ1dHRvbi5qcyIsIm5vZGVfbW9kdWxlcy9zd2lwZXIvc3dpcGVyLWVsZW1lbnQtYnVuZGxlLmpzIiwibm9kZV9tb2R1bGVzL2ZsaWNraXR5L2pzL2NlbGwuanMiLCJnbG9iYWwuanMiLCJub2RlX21vZHVsZXMvZmxpY2tpdHkvanMvZHJhZy5qcyIsIm5vZGVfbW9kdWxlcy9mbGlja2l0eS9qcy9pbWFnZXNsb2FkZWQuanMiLCJub2RlX21vZHVsZXMvZmxpY2tpdHkvanMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZmxpY2tpdHkvanMvbGF6eWxvYWQuanMiLCJub2RlX21vZHVsZXMvZmxpY2tpdHkvanMvcGFnZS1kb3RzLmpzIiwibm9kZV9tb2R1bGVzL2ZsaWNraXR5L2pzL3BsYXllci5qcyIsIm5vZGVfbW9kdWxlcy9mbGlja2l0eS9qcy9zbGlkZS5qcyIsIm5vZGVfbW9kdWxlcy9nZXQtc2l6ZS9nZXQtc2l6ZS5qcyIsIm5vZGVfbW9kdWxlcy9pbWFnZXNsb2FkZWQvaW1hZ2VzbG9hZGVkLmpzIiwibm9kZV9tb2R1bGVzL2xhenlzaXplcy9sYXp5c2l6ZXMuanMiLCJub2RlX21vZHVsZXMvbGF6eXNpemVzL3BsdWdpbnMvYmdzZXQvbHMuYmdzZXQuanMiLCJub2RlX21vZHVsZXMvbGF6eXNpemVzL3BsdWdpbnMvcGFyZW50LWZpdC9scy5wYXJlbnQtZml0LmpzIiwibm9kZV9tb2R1bGVzL3VuaWRyYWdnZXIvdW5pZHJhZ2dlci5qcyIsIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L21kNS1icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9uYXRpdmUtYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvbmlsLmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9wYXJzZS5qcyIsIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvcmVnZXguanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L3JuZy1icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9zaGExLWJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L3N0cmluZ2lmeS5qcyIsIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvdjEuanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L3YzLmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC92MzUuanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L3Y0LmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC92NS5qcyIsIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvdmFsaWRhdGUuanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L3ZlcnNpb24uanMiLCJzcmMvZ2xvYmFsLmpzIiwic3JjL3NjcmlwdHMvcHVic3ViLmpzIl0sIm5hbWVzIjpbInIiLCJlIiwibiIsInQiLCJvIiwiaSIsImYiLCJjIiwicmVxdWlyZSIsInUiLCJhIiwiRXJyb3IiLCJjb2RlIiwicCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsImdsb2JhbCIsImZhY3RvcnkiLCJ3aW5kb3ciLCJ0aGlzIiwiRXZFbWl0dGVyIiwicHJvdG8iLCJwcm90b3R5cGUiLCJvbiIsImV2ZW50TmFtZSIsImxpc3RlbmVyIiwibGlzdGVuZXJzIiwiZXZlbnRzIiwiX2V2ZW50cyIsImluY2x1ZGVzIiwicHVzaCIsIm9uY2UiLCJvbmNlRXZlbnRzIiwiX29uY2VFdmVudHMiLCJvZmYiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJlbWl0RXZlbnQiLCJhcmdzIiwic2xpY2UiLCJfc3RlcCIsIm9uY2VMaXN0ZW5lcnMiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsInMiLCJkb25lIiwidmFsdWUiLCJhcHBseSIsImVyciIsImFsbE9mZiIsIl90eXBlb2YiLCIyIiwib3B0aW9ucyIsInJpZ2h0VG9MZWZ0IiwidXRpbHMiLCJiIiwiT2JqZWN0IiwiYXNzaWduIiwibnVtIiwiZGl2Iiwib2JqIiwiQXJyYXkiLCJpc0FycmF5IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJ5IiwiZWxlbSIsInNlbGVjdG9yIiwicGFyZW50Tm9kZSIsImRvY3VtZW50IiwiYm9keSIsIm1hdGNoZXMiLCJxdWVyeVNlbGVjdG9yIiwiZXZlbnQiLCJtZXRob2QiLCJ0eXBlIiwiZWxlbXMiLCJtYWtlQXJyYXkiLCJmaWx0ZXIiLCJIVE1MRWxlbWVudCIsInJlZHVjZSIsImZmRWxlbXMiLCJjaGlsZEVsZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImNvbmNhdCIsIl9jbGFzcyIsIm1ldGhvZE5hbWUiLCJ0aHJlc2hvbGQiLCJ0aW1lb3V0TmFtZSIsIl90aGlzMiIsImNsZWFyVGltZW91dCIsImFyZ3VtZW50cyIsInNldFRpbWVvdXQiLCJvbkRvY1JlYWR5IiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHIiLCJyZXBsYWNlIiwibWF0Y2giLCIkMSIsIiQyIiwidG9Mb3dlckNhc2UiLCJjb25zb2xlIiwiaHRtbEluaXQiLCJXaWRnZXRDbGFzcyIsIm5hbWVzcGFjZSIsImRvY1JlYWR5IiwiZGF0YUF0dHIiLCJ0b0Rhc2hlZCIsImRhdGFBdHRyRWxlbXMiLCJqUXVlcnkiLCJmb3JFYWNoIiwiYXR0ciIsImdldEF0dHJpYnV0ZSIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY2xhc3NOYW1lIiwiaW5zdGFuY2UiLCJkYXRhIiwiZml6enlVSVV0aWxzIiwiY2VsbHMiLCJGbGlja2l0eSIsImluc2VydCIsImxlbiIsImZyYWdtZW50IiwiaXNBcHBlbmQiLCJpbnNlcnRDZWxsRWxlbWVudCIsImVuZENlbGxzIiwiX21ha2VDZWxscyIsInVuZGVmaW5lZCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjZWxsIiwiYXBwZW5kQ2hpbGQiLCJlbGVtZW50Iiwic2xpZGVyIiwiaW5zZXJ0QmVmb3JlIiwiX3NpemVDZWxscyIsImNlbGxDaGFuZ2UiLCJwb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQiLCJhcHBlbmQiLCJwcmVwZW5kIiwicmVtb3ZlIiwibWluQ2VsbEluZGV4IiwiX3RoaXMzIiwiZ2V0Q2VsbHMiLCJNYXRoIiwibWluIiwicmVtb3ZlRnJvbSIsImNlbGxTaXplQ2hhbmdlIiwiZ2V0Q2VsbCIsImdldFNpemUiLCJjaGFuZ2VkQ2VsbEluZGV4IiwicHJldlNlbGVjdGVkRWxlbSIsInNlbGVjdGVkRWxlbWVudCIsIl9wb3NpdGlvbkNlbGxzIiwiX3VwZGF0ZVdyYXBTaGlmdENlbGxzIiwic2V0R2FsbGVyeVNpemUiLCJzZWxlY3RlZEluZGV4IiwiZ2V0Q2VsbFNsaWRlSW5kZXgiLCJzbGlkZXMiLCJzZWxlY3QiLCIuL2NvcmUiLCJmaXp6eS11aS11dGlscyIsImNyZWF0ZUVsZW1lbnQiLCJpc0FuaW1hdGluZyIsInJlc3RpbmdGcmFtZXMiLCJhbmltYXRlIiwiX3RoaXM0IiwicHJldmlvdXNYIiwiYXBwbHlEcmFnRm9yY2UiLCJhcHBseVNlbGVjdGVkQXR0cmFjdGlvbiIsIngiLCJpbnRlZ3JhdGVQaHlzaWNzIiwicG9zaXRpb25TbGlkZXIiLCJzZXR0bGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJpc1dyYXBwaW5nIiwibW9kdWxvIiwic2xpZGVhYmxlV2lkdGgiLCJzaGlmdFdyYXBDZWxscyIsInNldFRyYW5zbGF0ZVgiLCJkaXNwYXRjaFNjcm9sbEV2ZW50IiwiaXMzZCIsImN1cnNvclBvc2l0aW9uIiwidHJhbnNsYXRlWCIsImdldFBvc2l0aW9uVmFsdWUiLCJzdHlsZSIsInRyYW5zZm9ybSIsInByb2dyZXNzIiwiZmlyc3RTbGlkZSIsInBvc2l0aW9uWCIsInRhcmdldCIsInNsaWRlc1dpZHRoIiwiZGlzcGF0Y2hFdmVudCIsInNlbGVjdGVkU2xpZGUiLCJ2ZWxvY2l0eSIsInBvc2l0aW9uIiwicGVyY2VudFBvc2l0aW9uIiwicm91bmQiLCJzaXplIiwiaW5uZXJXaWR0aCIsImlzUG9pbnRlckRvd24iLCJpc0ZyZWVTY3JvbGxpbmciLCJiZWZvcmVHYXAiLCJhZnRlckdhcCIsIl9zaGlmdENlbGxzIiwiYmVmb3JlU2hpZnRDZWxscyIsImFmdGVyU2hpZnRDZWxscyIsImdhcCIsInNoaWZ0IiwiX3RoaXM1IiwiY2VsbFNoaWZ0IiwiX3dyYXBTaGlmdENlbGwiLCJvdXRlcldpZHRoIiwiX3RoaXM2IiwiX3JlbmRlckNlbGxQb3NpdGlvbiIsImdldEZyaWN0aW9uRmFjdG9yIiwiZm9yY2UiLCJkcmFnRm9yY2UiLCJpc0RyYWdnYWJsZSIsImRyYWdYIiwiYXBwbHlGb3JjZSIsInNlbGVjdGVkQXR0cmFjdGlvbiIsImFuaW1hdGVQcm90b3R5cGUiLCI1IiwiY2VsbENsYXNzTmFtZSIsIkNlbGwiLCJjbGFzc0xpc3QiLCJhZGQiLCJ1bnNlbGVjdCIsImRlc3Ryb3kiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJnZXQtc2l6ZSIsIjYiLCJTbGlkZSIsImdldENvbXB1dGVkU3R5bGUiLCJHVUlEIiwiaW5zdGFuY2VzIiwicXVlcnlFbGVtZW50IiwiZ2V0UXVlcnlFbGVtZW50IiwiZmxpY2tpdHlHVUlEIiwib3B0aW9uIiwiJGVsZW1lbnQiLCJfb2JqZWN0U3ByZWFkIiwiY29uc3RydWN0b3IiLCJkZWZhdWx0cyIsIl9jcmVhdGUiLCJhY2Nlc3NpYmlsaXR5IiwiY2VsbEFsaWduIiwiZnJlZVNjcm9sbEZyaWN0aW9uIiwiZnJpY3Rpb24iLCJuYW1lc3BhY2VKUXVlcnlFdmVudHMiLCJyZXNpemUiLCJjcmVhdGUiLCJjZWxsQWxpZ25TaG9ydGhhbmRzIiwiX3RoaXMkb3B0aW9ucyIsIndhdGNoQ1NTIiwiaWQiLCJndWlkIiwiYmVnaW5NYXJnaW4iLCJlbmRNYXJnaW4iLCJ2aWV3cG9ydCIsIl9jcmVhdGVTbGlkZXIiLCJmb2N1c2FibGVFbGVtcyIsImFjdGl2YXRlIiwib3B0cyIsIl90aGlzJHNsaWRlciIsImNlbGxFbGVtcyIsImlzQWN0aXZlIiwiX2ZpbHRlckZpbmRDZWxsRWxlbWVudHMiLCJjaGlsZHJlbiIsInJlbG9hZENlbGxzIiwidGFiSW5kZXgiLCJzZWxlY3RJbml0aWFsSW5kZXgiLCJpc0luaXRBY3RpdmF0ZWQiLCJmaWx0ZXJGaW5kRWxlbWVudHMiLCJjZWxsU2VsZWN0b3IiLCJwb3NpdGlvbkNlbGxzIiwibWFwIiwiY2VsbEVsZW0iLCJnZXRMYXN0Q2VsbCIsImdldExhc3RTbGlkZSIsInN0YXJ0Q2VsbCIsIl90aGlzNyIsImNlbGxYIiwibWF4Q2VsbEhlaWdodCIsIm1heCIsIm91dGVySGVpZ2h0IiwidXBkYXRlU2xpZGVzIiwiX2NvbnRhaW5TbGlkZXMiLCJyZW5kZXJYIiwid2lkdGgiLCJwb3NpdGlvblZhbHVlIiwic2xpZGUiLCJjYW5DZWxsRml0IiwiX3RoaXM4IiwiX2dldENhbkNlbGxGaXQiLCJzbGlkZVdpZHRoIiwiZmlyc3RNYXJnaW4iLCJ1cGRhdGVUYXJnZXQiLCJhZGRDZWxsIiwidXBkYXRlU2VsZWN0ZWRTbGlkZSIsIm51bWJlciIsInBlcmNlbnQiLCJncm91cFdpZHRoIiwiZ3JvdXBDZWxscyIsInBhcnNlSW50IiwicGVyY2VudE1hdGNoIiwiX2luaXQiLCJyZXBvc2l0aW9uIiwic2V0Q2VsbEFsaWduIiwibGVmdCIsImNlbnRlciIsInJpZ2h0IiwidW5pZHJhZ2dlckV2ZW50cyIsIl90aGlzJG9wdGlvbnMyIiwic2hvcnRoYW5kIiwiaGVpZ2h0IiwiYWRhcHRpdmVIZWlnaHQiLCJsYXN0SW5kZXgiLCJhZnRlckdhcFgiLCJnZXRJc1dyYXBwaW5nIiwiX3Vuc2hpZnRDZWxscyIsImJlZm9yZUdhcFgiLCJfZ2V0R2FwQ2VsbHMiLCJ3cmFwQXJvdW5kIiwiZ2FwV2lkdGgiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwiZ2FwWCIsImNlbGxJbmRleCIsImluY3JlbWVudCIsImNvbnRlbnRXaWR0aCIsImJlZ2luQm91bmQiLCJlbmRCb3VuZCIsIl90aGlzOSIsImNvbnRhaW4iLCJlbWl0QXJncyIsIiRldmVudCIsImpRRXZlbnQiLCJFdmVudCIsInRyaWdnZXIiLCJfZW1pdEV2ZW50IiwialF1ZXJ5QnJpZGdldCIsImNsaWNrZWRDZWxsIiwiZ2V0UGFyZW50Q2VsbCIsImlzV3JhcCIsImlzSW5zdGFudCIsIl93cmFwU2VsZWN0IiwicHJldkluZGV4Iiwic3RhcnRBbmltYXRpb24iLCJkZWx0YSIsImJhY2tXcmFwRGVsdGEiLCJmb3Jld2FyZFdyYXBEZWx0YSIsImlzRHJhZ1NlbGVjdCIsIndyYXBJbmRleCIsImFicyIsInByZXZpb3VzIiwibmV4dCIsInVuc2VsZWN0U2VsZWN0ZWRTbGlkZSIsInNlbGVjdGVkQ2VsbHMiLCJzZWxlY3RlZEVsZW1lbnRzIiwiZ2V0Q2VsbEVsZW1lbnRzIiwic2VsZWN0ZWRDZWxsIiwiaW5pdGlhbEluZGV4IiwicXVlcnlDZWxsIiwic2VsZWN0Q2VsbCIsImNlbGxTbGlkZSIsImZpbmQiLCJfc3RlcDMiLCJfaXRlcmF0b3IzIiwiX3RoaXMxMCIsIkJvb2xlYW4iLCJjbG9zZXN0IiwiZ2V0QWRqYWNlbnRDZWxsRWxlbWVudHMiLCJhZGpDb3VudCIsInNsaWRlSW5kZXgiLCJ1aUNoYW5nZSIsIm9ucmVzaXplIiwiZGVib3VuY2VNZXRob2QiLCJpc0RyYWdnaW5nIiwiY29udGVudCIsImRlYWN0aXZhdGUiLCJvbmtleWRvd24iLCJhY3RpdmVFbGVtZW50IiwiaGFuZGxlciIsImtleWJvYXJkSGFuZGxlcnMiLCJrZXkiLCJzb21lIiwiQXJyb3dMZWZ0IiwiQXJyb3dSaWdodCIsImZvY3VzIiwicHJldmVudFNjcm9sbCIsIl90aGlzJGVsZW1lbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlRGF0YSIsInNldEpRdWVyeSIsImpxIiwiX0ZsaWNraXR5IiwiLi9hbmltYXRlIiwiLi9jZWxsIiwiLi9zbGlkZSIsImV2LWVtaXR0ZXIiLCI3IiwiVW5pZHJhZ2dlciIsImRyYWdnYWJsZSIsImRyYWdUaHJlc2hvbGQiLCJnZXRTY3JvbGxQb3NpdGlvbiIsInBhZ2VYT2Zmc2V0IiwieSIsInBhZ2VZT2Zmc2V0IiwidG91Y2hBY3Rpb25WYWx1ZSIsImRyYWciLCJvbkFjdGl2YXRlRHJhZyIsIl91aUNoYW5nZURyYWciLCJvbkRlYWN0aXZhdGVEcmFnIiwidXBkYXRlRHJhZ2dhYmxlIiwiaGFuZGxlUG9pbnRlckRvd24iLCJoYW5kbGVQb2ludGVyVXAiLCJoYW5kbGVQb2ludGVyRG9uZSIsImhhbmRsZURyYWdTdGFydCIsImhhbmRsZURyYWdNb3ZlIiwiaGFuZGxlRHJhZ0VuZCIsImhhbmRsZVN0YXRpY0NsaWNrIiwiaGFuZGxlcyIsImJpbmRIYW5kbGVzIiwidW5iaW5kSGFuZGxlcyIsInRvZ2dsZSIsImlzVG91Y2hTdGFydCIsImlzVG91Y2hQb2ludGVyIiwiaXNGb2N1c05vZGUiLCJwb2ludGVyVHlwZSIsInByZXZlbnREZWZhdWx0IiwiYmx1ciIsInBvaW50ZXJEb3duU2Nyb2xsIiwiYmluZEFjdGl2ZVBvaW50ZXJFdmVudHMiLCJoYXNEcmFnU3RhcnRlZCIsIm1vdmVWZWN0b3IiLCJpc1RvdWNoU2Nyb2xsaW5nIiwiZHJhZ1N0YXJ0UG9zaXRpb24iLCJwb2ludGVyIiwicHJldmlvdXNEcmFnWCIsImRpcmVjdGlvbiIsIm9yaWdpbkJvdW5kIiwiZHJhZ01vdmVUaW1lIiwiRGF0ZSIsImZyZWVTY3JvbGwiLCJyZXN0aW5nWCIsImRyYWdFbmRSZXN0aW5nU2VsZWN0IiwiZ2V0UmVzdGluZ1Bvc2l0aW9uIiwiZHJhZ0VuZEJvb3N0U2VsZWN0IiwiZGlzdGFuY2UiLCJnZXRTbGlkZURpc3RhbmNlIiwicG9zaXRpdmVSZXN0aW5nIiwiX2dldENsb3Nlc3RSZXN0aW5nIiwibmVnYXRpdmVSZXN0aW5nIiwibWluRGlzdGFuY2UiLCJJbmZpbml0eSIsImNvbmRpdGlvbiIsImRpc3QiLCJtaW5EaXN0IiwiaXNXcmFwQXJvdW5kIiwid3JhcCIsImZsb29yIiwib25zY3JvbGwiLCJzY3JvbGwiLCJzY3JvbGxNb3ZlWCIsInNjcm9sbE1vdmVZIiwicG9pbnRlckRvbmUiLCJ1bmlkcmFnZ2VyIiwiOCIsImltYWdlc0xvYWRlZCIsIl90aGlzMTEiLCJpbWFnZSIsImltZyIsImltYWdlc2xvYWRlZCIsIjkiLCIuL2FkZC1yZW1vdmUtY2VsbCIsIi4vZHJhZyIsIi4vaW1hZ2VzbG9hZGVkIiwiLi9sYXp5bG9hZCIsIi4vcGFnZS1kb3RzIiwiLi9wbGF5ZXIiLCIuL3ByZXYtbmV4dC1idXR0b24iLCIxMCIsImxhenlBdHRyIiwibGF6eVNyY0F0dHIiLCJsYXp5U3Jjc2V0QXR0ciIsImltZ1NlbGVjdG9yIiwibGF6eUxvYWQiLCJoYW5kbGVMYXp5TG9hZENvbXBsZXRlIiwib25MYXp5TG9hZENvbXBsZXRlIiwiYmluZCIsImdldENlbGxMYXp5SW1hZ2VzIiwiY2VsbEF0dHIiLCJjZWxsU3JjQXR0ciIsImNlbGxTcmNzZXRBdHRyIiwiTGF6eUxvYWRlciIsIm9uQ29tcGxldGUiLCJsb2FkIiwiX3RoaXMxMiIsImZsYXQiLCJoYW5kbGVFdmVudCIsInNyYyIsInNyY3NldCIsIm9ubG9hZCIsImNvbXBsZXRlIiwib25lcnJvciIsIjExIiwiUGFnZURvdHMiLCJob2xkZXIiLCJkb3RzIiwic2V0RG90cyIsInNsaWRlc0xlbmd0aCIsImFkZERvdHMiLCJyZW1vdmVEb3RzIiwiY291bnQiLCJfdGhpcyRob2xkZXIiLCJfdGhpczEzIiwibmV3RG90cyIsImZpbGwiLCJpdGVtIiwiZG90IiwidGV4dENvbnRlbnQiLCJ1cGRhdGVTZWxlY3RlZCIsInNlbGVjdGVkRG90IiwicGFnZURvdHMiLCJoYW5kbGVQYWdlRG90c0NsaWNrIiwib25QYWdlRG90c0NsaWNrIiwiYWN0aXZhdGVQYWdlRG90cyIsInVwZGF0ZVNlbGVjdGVkUGFnZURvdHMiLCJ1cGRhdGVQYWdlRG90cyIsImRlYWN0aXZhdGVQYWdlRG90cyIsIl90aGlzJGZvY3VzYWJsZUVsZW1zIiwiX3RoaXMkZm9jdXNhYmxlRWxlbXMyIiwiX3RoaXMxNCIsIjEyIiwiUGxheWVyIiwiYXV0b1BsYXkiLCJvblRpY2siLCJzdGF0ZSIsIm9uVmlzaWJpbGl0eUNoYW5nZSIsInZpc2liaWxpdHlDaGFuZ2UiLCJvblZpc2liaWxpdHlQbGF5IiwidmlzaWJpbGl0eVBsYXkiLCJwbGF5IiwiaGlkZGVuIiwidGljayIsInRpbWUiLCJfdGhpczE1IiwiY2xlYXIiLCJ0aW1lb3V0Iiwic3RvcCIsInBhdXNlIiwidW5wYXVzZSIsInBhdXNlQXV0b1BsYXlPbkhvdmVyIiwicGxheWVyIiwiX3RoaXMxNiIsImFjdGl2YXRlUGxheWVyIiwic3RvcFBsYXllciIsImRlYWN0aXZhdGVQbGF5ZXIiLCJwbGF5UGxheWVyIiwicGF1c2VQbGF5ZXIiLCJ1bnBhdXNlUGxheWVyIiwib25tb3VzZWVudGVyIiwib25tb3VzZWxlYXZlIiwiMTMiLCJzdmdVUkkiLCJQcmV2TmV4dEJ1dHRvbiIsImFycm93U2hhcGUiLCJpc1ByZXZpb3VzIiwiaXNMZWZ0IiwibGFiZWwiLCJzdmciLCJkaXNhYmxlIiwiY3JlYXRlU1ZHIiwieDEiLCJ4MiIsIngzIiwieTEiLCJjcmVhdGVFbGVtZW50TlMiLCJ0aXRsZSIsInBhdGgiLCJwYXRoTW92ZW1lbnRzIiwic2hhcGUiLCJ4MCIsInkyIiwiZW5hYmxlIiwicHJldk5leHRCdXR0b25zIiwibmV4dERpcmVjdGlvbiIsIl90aGlzMTciLCJfdGhpcyRvcHRpb25zMyIsInByZXZCdXR0b24iLCJuZXh0QnV0dG9uIiwiaGFuZGxlUHJldkJ1dHRvbkNsaWNrIiwiaGFuZGxlTmV4dEJ1dHRvbkNsaWNrIiwiYWN0aXZhdGVQcmV2TmV4dEJ1dHRvbnMiLCJ1cGRhdGVQcmV2TmV4dEJ1dHRvbnMiLCJ1cGRhdGVQcmV2TmV4dEJ1dHRvbiIsImJ1dHRvbiIsImRpc2FibGVkSW5kZXgiLCJpc0VuYWJsZWQiLCJkZWFjdGl2YXRlUHJldk5leHRCdXR0b25zIiwiMTQiLCJsYXN0Q2VsbCIsImxhc3RNYXJnaW4iLCIxNSIsImdldFN0eWxlU2l6ZSIsInBhcnNlRmxvYXQiLCJpc05hTiIsIm1lYXN1cmVtZW50cyIsInBhZGRpbmdXaWR0aCIsInBhZGRpbmdIZWlnaHQiLCJtYXJnaW5XaWR0aCIsIm1hcmdpbkhlaWdodCIsImJvcmRlcldpZHRoIiwiYm9yZGVySGVpZ2h0Iiwic3R5bGVIZWlnaHQiLCJub2RlVHlwZSIsImRpc3BsYXkiLCJpbm5lckhlaWdodCIsIm1lYXN1cmVtZW50Iiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJpc0JvcmRlckJveCIsImJveFNpemluZyIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSaWdodFdpZHRoIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJCb3R0b21XaWR0aCIsInN0eWxlV2lkdGgiLCIxNiIsIiQiLCJJbWFnZXNMb2FkZWQiLCJvbkFsd2F5cyIsInF1ZXJ5RWxlbSIsImVsZW1lbnRzIiwiZ2V0SW1hZ2VzIiwianFEZWZlcnJlZCIsIkRlZmVycmVkIiwiY2hlY2siLCJpbWFnZXMiLCJhZGRFbGVtZW50SW1hZ2VzIiwiZWxlbWVudE5vZGVUeXBlcyIsInJlVVJMIiwibm9kZU5hbWUiLCJhZGRJbWFnZSIsImJhY2tncm91bmQiLCJhZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyIsIl9zdGVwNCIsIl9pdGVyYXRvcjQiLCJfc3RlcDUiLCJfaXRlcmF0b3I1IiwiY2hpbGQiLCJMb2FkaW5nSW1hZ2UiLCJCYWNrZ3JvdW5kIiwidXJsIiwiSW1hZ2UiLCJleGVjIiwiYmFja2dyb3VuZEltYWdlIiwiYWRkQmFja2dyb3VuZCIsImxvYWRpbmdJbWFnZSIsIm9uUHJvZ3Jlc3MiLCJfdGhpczE4IiwicHJvZ3Jlc3NlZENvdW50IiwiaGFzQW55QnJva2VuIiwibWVzc2FnZSIsImlzTG9hZGVkIiwibm90aWZ5IiwiZGVidWciLCJsb2ciLCJpc0NvbXBsZXRlIiwianFNZXRob2QiLCJnZXRJc0ltYWdlQ29tcGxldGUiLCJjb25maXJtIiwibmF0dXJhbFdpZHRoIiwicHJveHlJbWFnZSIsImNyb3NzT3JpZ2luIiwiY3VycmVudFNyYyIsInVuYmluZEV2ZW50cyIsIm1ha2VKUXVlcnlQbHVnaW4iLCJmbiIsInByb21pc2UiLCIxNyIsImxhenlzaXplcyIsImxhenlTaXplc0NmZyIsInByb3AiLCJkb2NFbGVtIiwic3VwcG9ydFBpY3R1cmUiLCJfYWRkRXZlbnRMaXN0ZW5lciIsIl9nZXRBdHRyaWJ1dGUiLCJyZXF1ZXN0SWRsZUNhbGxiYWNrIiwicmVnUGljdHVyZSIsImxvYWRFdmVudHMiLCJyZWdDbGFzc0NhY2hlIiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkUmVtb3ZlTG9hZEV2ZW50cyIsInRyaWdnZXJFdmVudCIsInVwZGF0ZVBvbHlmaWxsIiwiZ2V0Q1NTIiwiZ2V0V2lkdGgiLCJyQUYiLCJydW5uaW5nIiwid2FpdGluZyIsImZpcnN0Rm5zIiwic2Vjb25kRm5zIiwiZm5zIiwickFGSXQiLCJkZWJvdW5jZSIsImxvYWRlciIsInByZWxvYWRFbGVtcyIsImlzQ29tcGxldGVkIiwicmVzZXRQcmVsb2FkaW5nVGltZXIiLCJsb2FkTW9kZSIsInN0YXJ0ZWQiLCJlTHZXIiwiZWx2SCIsImVMdG9wIiwiZUxsZWZ0IiwiZUxyaWdodCIsImVMYm90dG9tIiwiaXNCb2R5SGlkZGVuIiwibGFzdFRpbWUiLCJnRGVsYXkiLCJySUNUaW1lb3V0IiwiaWRsZUNhbGxiYWNrIiwicmVnSW1nIiwicmVnSWZyYW1lIiwic3VwcG9ydFNjcm9sbCIsImN1cnJlbnRFeHBhbmQiLCJpc0xvYWRpbmciLCJsb3dSdW5zIiwiaXNWaXNpYmxlIiwidGhyb3R0bGVkQ2hlY2tFbGVtZW50cyIsInJhZmVkU3dpdGNoTG9hZGluZ0NsYXNzIiwicmFmU3dpdGNoTG9hZGluZ0NsYXNzIiwibGF6eVVudmVpbCIsInVudmVpbEVsZW1lbnQiLCJhZnRlclNjcm9sbCIsImF1dG9TaXplciIsImF1dG9zaXplc0VsZW1zIiwic2l6ZUVsZW1lbnQiLCJkZWJvdW5jZWRVcGRhdGVFbGVtZW50c1NpemVzIiwiaW5pdCIsImxhenlTaXplc0RlZmF1bHRzIiwibGF6eUNsYXNzIiwibG9hZGVkQ2xhc3MiLCJsb2FkaW5nQ2xhc3MiLCJwcmVsb2FkQ2xhc3MiLCJlcnJvckNsYXNzIiwiYXV0b3NpemVzQ2xhc3MiLCJmYXN0TG9hZGVkQ2xhc3MiLCJpZnJhbWVMb2FkTW9kZSIsInNyY0F0dHIiLCJzcmNzZXRBdHRyIiwic2l6ZXNBdHRyIiwibWluU2l6ZSIsImN1c3RvbU1lZGlhIiwiZXhwRmFjdG9yIiwiaEZhYyIsImxvYWRIaWRkZW4iLCJyaWNUaW1lb3V0IiwidGhyb3R0bGVEZWxheSIsImxhenlTaXplc0NvbmZpZyIsImxhenlzaXplc0NvbmZpZyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJkb2N1bWVudEVsZW1lbnQiLCJIVE1MUGljdHVyZUVsZW1lbnQiLCJlbGUiLCJjbHMiLCJSZWdFeHAiLCJ0ZXN0IiwidHJpbSIsInJlZyIsImRvbSIsImFjdGlvbiIsImV2dCIsIm5hbWUiLCJkZXRhaWwiLCJub0J1YmJsZXMiLCJub0NhbmNlbGFibGUiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsImVsIiwiZnVsbCIsInBvbHlmaWxsIiwicGljdHVyZWZpbGwiLCJwZiIsInJlZXZhbHVhdGUiLCJwYXJlbnQiLCJfbGF6eXNpemVzV2lkdGgiLCJyYWZCYXRjaCIsIl9sc0ZsdXNoIiwicnVuIiwic2ltcGxlIiwidGhhdCIsImZ1bmMiLCJsYXRlciIsImxhc3QiLCJub3ciLCJ0aW1lc3RhbXAiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJjaGVja0VsZW1lbnRzIiwic3dpdGNoTG9hZGluZ0NsYXNzIiwiaXNBdXRvIiwic2l6ZXMiLCJpc0ltZyIsImlzUGljdHVyZSIsImZpcmVzTG9hZCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJyZXNldFByZWxvYWRpbmciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImhhbmRsZVNvdXJjZXMiLCJjb250ZW50V2luZG93IiwibG9jYXRpb24iLCJfbGF6eVJhY2UiLCJfbGF6eUNhY2hlIiwibG9hZGluZyIsIl8iLCJsb2FkaW5nRWxlbWVudHMiLCJwZXJzaXN0ZWQiLCJNdXRhdGlvbk9ic2VydmVyIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJhdHRyaWJ1dGVzIiwic2V0SW50ZXJ2YWwiLCJjaGVja0VsZW1zIiwiaXNQcmlvcml0eSIsImRlbGF5IiwidW52ZWlsIiwidXBkYXRlRWxlbSIsIl9hTFNMIiwiYWx0TG9hZG1vZGVTY3JvbGxMaXN0bmVyIiwic291cmNlcyIsImdldFNpemVFbGVtZW50IiwiY2ZnIiwidVAiLCJhQyIsInJDIiwiaEMiLCJmaXJlIiwiZ1ciLCJub1N1cHBvcnQiLCJydW5GbnMiLCJxdWV1ZSIsImVMbGVuIiwiYXV0b0xvYWRFbGVtIiwibG9hZGVkU29tZXRoaW5nIiwiZWxlbUV4cGFuZCIsImVsZW1OZWdhdGl2ZUV4cGFuZCIsImVsZW1FeHBhbmRWYWwiLCJiZWZvcmVFeHBhbmRWYWwiLCJkZWZhdWx0RXhwYW5kIiwicHJlbG9hZEV4cGFuZCIsImxhenlsb2FkRWxlbXMiLCJwcmVtYXR1cmVVbnZlaWwiLCJleHBhbmQiLCJjbGllbnRIZWlnaHQiLCJjbGllbnRXaWR0aCIsIl9kZWZFeCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJib3R0b20iLCJ0b3AiLCJvdXRlclJlY3QiLCJ2aXNpYmxlIiwib2Zmc2V0UGFyZW50IiwicHJlbG9hZEFmdGVyTG9hZCIsInNvdXJjZSIsInNvdXJjZVNyY3NldCIsImxhenlTaXplcyIsIjE4IiwiZ2xvYmFsSW5zdGFsbCIsInJlZ1doaXRlIiwicmVnU3BsaXRTZXQiLCJyZWdTb3VyY2UiLCJyZWdUeXBlIiwicmVnQmdVcmxFc2NhcGUiLCJhbGxvd2VkQmFja2dyb3VuZFNpemUiLCJzZXRUeXBlT3JNZWRpYSIsInByb3h5TG9hZCIsImNvdmVyIiwidHlwZU1hdGNoIiwidXNlU3JjIiwiX2xhenliZ3NldCIsImJnIiwic3RyaW5naWZ5IiwiZnVsbFNyYyIsIl9sYXp5YmdzZXRMb2FkaW5nIiwicGljdHVyZSIsInJhdGlvIiwib3B0aW11bXgiLCJzZXQiLCJhbHQiLCJzZXRzIiwicmVtb3ZlQ2hpbGQiLCJkZWZpbmVQcm9wZXJ0eSIsIndyaXRhYmxlIiwic3BsaXQiLCJiZ1NpemUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiYmFja2dyb3VuZFNpemUiLCJfbGF6eXNpemVzUGFyZW50Rml0IiwiZGVmaW5lIiwiYW1kIiwiMTkiLCJyZWdEZXNjcmlwdG9ycyIsInJlZ0Nzc0ZpdCIsInJlZ0Nzc09iamVjdCIsInBhcmVudEZpdCIsImdldFBhcmVudCIsInBhcmVudFNlbCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJnZXRGaXQiLCJ0bXBNYXRjaCIsInBhcmVudE9iaiIsImNzcyIsImZvbnRGYW1pbHkiLCJmaXQiLCJfbGF6eXNpemVzUGFyZW50Q29udGFpbmVyIiwib2JqZWN0Rml0IiwiZ2V0SW1hZ2VSYXRpbyIsIm1lZGlhIiwiX2xzTWVkaWEiLCJtYXRjaE1lZGlhIiwiY2FsY3VsYXRlU2l6ZSIsImltYWdlUmF0aW8iLCJmaXRPYmoiLCJmaXRFbGVtIiwicmV0V2lkdGgiLCJkaXNwbGF5UmF0aW8iLCIyMCIsImlzT2JqZWN0JDIiLCJleHRlbmQkMiIsImtleXMiLCJzc3JEb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsImltcG9ydE5vZGUiLCJoYXNoIiwiaG9zdCIsImhvc3RuYW1lIiwiaHJlZiIsIm9yaWdpbiIsInBhdGhuYW1lIiwicHJvdG9jb2wiLCJzZWFyY2giLCJnZXREb2N1bWVudCIsImRvYyIsInN1cHBvcnQiLCJkZXZpY2VDYWNoZWQiLCJicm93c2VyIiwic3NyV2luZG93IiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsInB1c2hTdGF0ZSIsImdvIiwiYmFjayIsIkN1c3RvbUV2ZW50Iiwic2NyZWVuIiwiY2FsbGJhY2siLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImdldFdpbmRvdyIsIndpbiIsImNsYXNzZXNUb1Rva2VucyIsImNsYXNzZXMiLCJuZXh0VGljayIsImdldFRyYW5zbGF0ZSIsImF4aXMiLCJtYXRyaXgiLCJjdXJUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1NYXRyaXgiLCJjdXJTdHlsZSIsImN1cnJlbnRTdHlsZSIsIldlYktpdENTU01hdHJpeCIsIndlYmtpdFRyYW5zZm9ybSIsImpvaW4iLCJNb3pUcmFuc2Zvcm0iLCJPVHJhbnNmb3JtIiwiTXNUcmFuc2Zvcm0iLCJtc1RyYW5zZm9ybSIsInRvU3RyaW5nIiwibTQxIiwibTQyIiwiaXNPYmplY3QkMSIsImV4dGVuZCQxIiwibm9kZSIsInRvIiwibm9FeHRlbmQiLCJuZXh0U291cmNlIiwia2V5c0FycmF5IiwibmV4dEluZGV4IiwibmV4dEtleSIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiX19zd2lwZXJfXyIsInNldENTU1Byb3BlcnR5IiwidmFyTmFtZSIsInZhclZhbHVlIiwic2V0UHJvcGVydHkiLCJhbmltYXRlQ1NTTW9kZVNjcm9sbCIsIl9yZWYiLCJpc091dE9mQm91bmQiLCJjdXJyZW50IiwiZGlyIiwic3dpcGVyIiwidGFyZ2V0UG9zaXRpb24iLCJzaWRlIiwic3RhcnRQb3NpdGlvbiIsInRyYW5zbGF0ZSIsInN0YXJ0VGltZSIsImR1cmF0aW9uIiwicGFyYW1zIiwic3BlZWQiLCJ3cmFwcGVyRWwiLCJzY3JvbGxTbmFwVHlwZSIsImNzc01vZGVGcmFtZUlEIiwiZ2V0VGltZSIsImVhc2VQcm9ncmVzcyIsImNvcyIsIlBJIiwiY3VycmVudFBvc2l0aW9uIiwic2Nyb2xsVG8iLCJfZGVmaW5lUHJvcGVydHkiLCJvdmVyZmxvdyIsImdldFNsaWRlVHJhbnNmb3JtRWwiLCJzbGlkZUVsIiwic2hhZG93Um9vdCIsImVsZW1lbnRDaGlsZHJlbiIsInNob3dXYXJuaW5nIiwidGV4dCIsIndhcm4iLCJ0YWciLCJfZWwkY2xhc3NMaXN0IiwiZWxlbWVudE9mZnNldCIsImJveCIsImNsaWVudFRvcCIsImNsaWVudExlZnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxZIiwic2Nyb2xsTGVmdCIsInNjcm9sbFgiLCJlbGVtZW50U3R5bGUiLCJlbGVtZW50SW5kZXgiLCJwcmV2aW91c1NpYmxpbmciLCJlbGVtZW50UGFyZW50cyIsInBhcmVudHMiLCJwYXJlbnRFbGVtZW50IiwiZWxlbWVudFRyYW5zaXRpb25FbmQiLCJmaXJlQ2FsbEJhY2siLCJlbGVtZW50T3V0ZXJTaXplIiwiaW5jbHVkZU1hcmdpbnMiLCJtYWtlRWxlbWVudHNBcnJheSIsImdldFN1cHBvcnQiLCJzbW9vdGhTY3JvbGwiLCJ0b3VjaCIsIkRvY3VtZW50VG91Y2giLCJnZXREZXZpY2UiLCJvdmVycmlkZXMiLCJwbGF0Zm9ybSIsImRldmljZSIsInNjcmVlbldpZHRoIiwic2NyZWVuSGVpZ2h0IiwiYW5kcm9pZCIsImlwYWQiLCJpcG9kIiwiaXBob25lIiwid2luZG93cyIsIl90ZW1wIiwidWEiLCJpb3MiLCJtYWNvcyIsIm9zIiwiZ2V0QnJvd3NlciIsImlzU2FmYXJpIiwibmVlZFBlcnNwZWN0aXZlRml4IiwiaXNXZWJWaWV3IiwiaXNTYWZhcmlCcm93c2VyIiwiU3RyaW5nIiwibWFqb3IiLCJfdWEkc3BsaXQkMSRzcGxpdCQwJHMyIiwiX3NsaWNlZFRvQXJyYXkiLCJOdW1iZXIiLCJtaW5vciIsIm5lZWQzZEZpeCIsInRvZ2dsZVNsaWRlQ2xhc3NlcyQxIiwiY29udGFpbnMiLCJ0b2dnbGVTbGlkZUNsYXNzZXMiLCJwcmVsb2FkIiwiZGVzdHJveWVkIiwiYW1vdW50IiwibGF6eVByZWxvYWRQcmV2TmV4dCIsImFjdGl2ZUNvbHVtbiIsInByZWxvYWRDb2x1bW5zIiwic2xpZGVzUGVyVmlldyIsInNsaWRlc1BlclZpZXdEeW5hbWljIiwiY2VpbCIsImFjdGl2ZUluZGV4IiwiZ3JpZCIsInJvd3MiLCJmcm9tIiwiY29sdW1uIiwidW5sYXp5Iiwic2xpZGVJbmRleExhc3RJblZpZXciLCJyZXdpbmQiLCJsb29wIiwicmVhbEluZGV4IiwicHJvY2Vzc0xhenlQcmVsb2FkZXIiLCJpbWFnZUVsIiwibGF6eUVsIiwiaXNFbGVtZW50Iiwic2xpZGVDbGFzcyIsImxhenlQcmVsb2FkZXJDbGFzcyIsInRyYW5zaXRpb25FbWl0IiwicnVuQ2FsbGJhY2tzIiwic3RlcCIsInByZXZpb3VzSW5kZXgiLCJlbWl0IiwiY2xvc2VzdEVsZW1lbnQiLCJiYXNlIiwiX19jbG9zZXN0RnJvbSIsImZvdW5kIiwiYXNzaWduZWRTbG90IiwiZ2V0Um9vdE5vZGUiLCJwcmV2ZW50RWRnZVN3aXBlIiwic3RhcnRYIiwiZWRnZVN3aXBlRGV0ZWN0aW9uIiwiZWRnZVN3aXBlVGhyZXNob2xkIiwib25SZXNpemUiLCJhbGxvd1NsaWRlUHJldiIsInNuYXBHcmlkIiwiaXNWaXJ0dWFsIiwiaXNWaXJ0dWFsTG9vcCIsImJyZWFrcG9pbnRzIiwic2V0QnJlYWtwb2ludCIsImFsbG93U2xpZGVOZXh0IiwidmlydHVhbCIsImVuYWJsZWQiLCJ1cGRhdGVTaXplIiwidXBkYXRlU2xpZGVzQ2xhc3NlcyIsImlzRW5kIiwiaXNCZWdpbm5pbmciLCJjZW50ZXJlZFNsaWRlcyIsInNsaWRlVG9Mb29wIiwic2xpZGVUbyIsImF1dG9wbGF5IiwicGF1c2VkIiwicmVzaXplVGltZW91dCIsInJlc3VtZSIsIndhdGNoT3ZlcmZsb3ciLCJjaGVja092ZXJmbG93IiwiY2FwdHVyZSIsIm5lc3RlZCIsImRvbU1ldGhvZCIsIm9uRG9jdW1lbnRUb3VjaFN0YXJ0IiwicGFzc2l2ZSIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsInByZXZlbnRDbGlja3MiLCJwcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb24iLCJvbkNsaWNrIiwiY3NzTW9kZSIsIm9uU2Nyb2xsIiwidXBkYXRlT25XaW5kb3dSZXNpemUiLCJzd2lwZXJNZXRob2QiLCJvbkxvYWQiLCJpc0dyaWRFbmFibGVkIiwib25lV2F5TW92ZW1lbnQiLCJzd2lwZXJFbGVtZW50Tm9kZU5hbWUiLCJ0b3VjaEV2ZW50c1RhcmdldCIsImluaXRpYWxTbGlkZSIsInJlc2l6ZU9ic2VydmVyIiwiY3JlYXRlRWxlbWVudHMiLCJldmVudHNQcmVmaXgiLCJmb2N1c2FibGVFbGVtZW50cyIsInByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbiIsImF1dG9IZWlnaHQiLCJzZXRXcmFwcGVyU2l6ZSIsInZpcnR1YWxUcmFuc2xhdGUiLCJlZmZlY3QiLCJicmVha3BvaW50c0Jhc2UiLCJzcGFjZUJldHdlZW4iLCJzbGlkZXNQZXJHcm91cCIsInNsaWRlc1Blckdyb3VwU2tpcCIsInNsaWRlc1Blckdyb3VwQXV0byIsImNlbnRlcmVkU2xpZGVzQm91bmRzIiwic2xpZGVzT2Zmc2V0QmVmb3JlIiwic2xpZGVzT2Zmc2V0QWZ0ZXIiLCJub3JtYWxpemVTbGlkZUluZGV4IiwiY2VudGVySW5zdWZmaWNpZW50U2xpZGVzIiwicm91bmRMZW5ndGhzIiwidG91Y2hSYXRpbyIsInRvdWNoQW5nbGUiLCJzaW11bGF0ZVRvdWNoIiwic2hvcnRTd2lwZXMiLCJsb25nU3dpcGVzIiwibG9uZ1N3aXBlc1JhdGlvIiwibG9uZ1N3aXBlc01zIiwiZm9sbG93RmluZ2VyIiwiYWxsb3dUb3VjaE1vdmUiLCJ0b3VjaE1vdmVTdG9wUHJvcGFnYXRpb24iLCJ0b3VjaFN0YXJ0UHJldmVudERlZmF1bHQiLCJ0b3VjaFN0YXJ0Rm9yY2VQcmV2ZW50RGVmYXVsdCIsInRvdWNoUmVsZWFzZU9uRWRnZXMiLCJ1bmlxdWVOYXZFbGVtZW50cyIsInJlc2lzdGFuY2UiLCJyZXNpc3RhbmNlUmF0aW8iLCJ3YXRjaFNsaWRlc1Byb2dyZXNzIiwiZ3JhYkN1cnNvciIsInNsaWRlVG9DbGlja2VkU2xpZGUiLCJsb29wQWRkQmxhbmtTbGlkZXMiLCJsb29wQWRkaXRpb25hbFNsaWRlcyIsImxvb3BQcmV2ZW50c1NsaWRpbmciLCJzd2lwZUhhbmRsZXIiLCJub1N3aXBpbmciLCJub1N3aXBpbmdDbGFzcyIsIm5vU3dpcGluZ1NlbGVjdG9yIiwicGFzc2l2ZUxpc3RlbmVycyIsIm1heEJhY2tmYWNlSGlkZGVuU2xpZGVzIiwiY29udGFpbmVyTW9kaWZpZXJDbGFzcyIsInNsaWRlQmxhbmtDbGFzcyIsInNsaWRlQWN0aXZlQ2xhc3MiLCJzbGlkZVZpc2libGVDbGFzcyIsInNsaWRlRnVsbHlWaXNpYmxlQ2xhc3MiLCJzbGlkZU5leHRDbGFzcyIsInNsaWRlUHJldkNsYXNzIiwid3JhcHBlckNsYXNzIiwicnVuQ2FsbGJhY2tzT25Jbml0IiwiX2VtaXRDbGFzc2VzIiwicHJvdG90eXBlcyIsImV2ZW50c0VtaXR0ZXIiLCJwcmlvcml0eSIsInNlbGYiLCJldmVudHNMaXN0ZW5lcnMiLCJvbmNlSGFuZGxlciIsIl9fZW1pdHRlclByb3h5IiwiX2xlbiIsIl9rZXkiLCJvbkFueSIsImV2ZW50c0FueUxpc3RlbmVycyIsIm9mZkFueSIsImV2ZW50SGFuZGxlciIsImNvbnRleHQiLCJfbGVuMiIsIl9rZXkyIiwidW5zaGlmdCIsInVwZGF0ZSIsImlzSG9yaXpvbnRhbCIsImlzVmVydGljYWwiLCJnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlIiwiZ2V0RGlyZWN0aW9uTGFiZWwiLCJzbGlkZXNFbCIsInN3aXBlclNpemUiLCJydGwiLCJydGxUcmFuc2xhdGUiLCJ3cm9uZ1JUTCIsInByZXZpb3VzU2xpZGVzTGVuZ3RoIiwic2xpZGVzR3JpZCIsInNsaWRlc1NpemVzR3JpZCIsIm9mZnNldEJlZm9yZSIsIm9mZnNldEFmdGVyIiwicHJldmlvdXNTbmFwR3JpZExlbmd0aCIsInByZXZpb3VzU2xpZGVzR3JpZExlbmd0aCIsInNsaWRlUG9zaXRpb24iLCJwcmV2U2xpZGVTaXplIiwidmlydHVhbFNpemUiLCJhbGxTbGlkZXNTaXplIiwibWF4U25hcCIsImFsbFNsaWRlc09mZnNldCIsImFkZFRvU25hcEdyaWQiLCJhZGRUb1NsaWRlc0dyaWQiLCJncmlkRW5hYmxlZCIsInNob3VsZFJlc2V0U2xpZGVTaXplIiwiaW5pdFNsaWRlcyIsInVuc2V0U2xpZGVzIiwiY3VycmVudFRyYW5zZm9ybSIsImN1cnJlbnRXZWJLaXRUcmFuc2Zvcm0iLCJfc2xpZGUyIiwic2xpZGVTaXplIiwidXBkYXRlU2xpZGUiLCJzbGlkZVN0eWxlcyIsInN3aXBlclNsaWRlU2l6ZSIsInVwZGF0ZVdyYXBwZXJTaXplIiwibmV3U2xpZGVzR3JpZCIsInNsaWRlc0dyaWRJdGVtIiwiZ3JvdXBzIiwic2xpZGVzQmVmb3JlIiwic2xpZGVzQWZ0ZXIiLCJncm91cFNpemUiLCJzbGlkZVNpemVWYWx1ZSIsInNuYXAiLCJvZmZzZXRTaXplIiwic25hcEluZGV4IiwidiIsInVwZGF0ZVNsaWRlc09mZnNldCIsImJhY2tGYWNlSGlkZGVuQ2xhc3MiLCJoYXNDbGFzc0JhY2tmYWNlQ2xhc3NBZGRlZCIsInVwZGF0ZUF1dG9IZWlnaHQiLCJnZXRTbGlkZUJ5SW5kZXgiLCJnZXRTbGlkZUluZGV4QnlEYXRhIiwiYWN0aXZlU2xpZGVzIiwibmV3SGVpZ2h0Iiwic2V0VHJhbnNpdGlvbiIsInZpc2libGVTbGlkZXMiLCJtaW51c09mZnNldCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJzd2lwZXJTbGlkZU9mZnNldCIsImNzc092ZXJmbG93QWRqdXN0bWVudCIsInVwZGF0ZVNsaWRlc1Byb2dyZXNzIiwib2Zmc2V0Q2VudGVyIiwidmlzaWJsZVNsaWRlc0luZGV4ZXMiLCJzbGlkZU9mZnNldCIsInNsaWRlUHJvZ3Jlc3MiLCJtaW5UcmFuc2xhdGUiLCJvcmlnaW5hbFNsaWRlUHJvZ3Jlc3MiLCJzbGlkZUJlZm9yZSIsInNsaWRlQWZ0ZXIiLCJpc0Z1bGx5VmlzaWJsZSIsIm9yaWdpbmFsUHJvZ3Jlc3MiLCJ1cGRhdGVQcm9ncmVzcyIsImxhc3RTbGlkZVRyYW5zbGF0ZSIsInRyYW5zbGF0ZU1heCIsInRyYW5zbGF0ZUFicyIsIm11bHRpcGxpZXIiLCJ0cmFuc2xhdGVzRGlmZiIsIm1heFRyYW5zbGF0ZSIsInByb2dyZXNzTG9vcCIsIndhc0JlZ2lubmluZyIsIndhc0VuZCIsImlzQmVnaW5uaW5nUm91bmRlZCIsImlzRW5kUm91bmRlZCIsImZpcnN0U2xpZGVJbmRleCIsImxhc3RTbGlkZUluZGV4IiwiZmlyc3RTbGlkZVRyYW5zbGF0ZSIsImdldEZpbHRlcmVkU2xpZGUiLCJwcmV2U2xpZGUiLCJuZXh0U2xpZGUiLCJhY3RpdmVTbGlkZSIsIm5leHRFbHMiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJwcmV2RWxzIiwicHJldiIsImVtaXRTbGlkZXNDbGFzc2VzIiwidXBkYXRlQWN0aXZlSW5kZXgiLCJuZXdBY3RpdmVJbmRleCIsImdldFZpcnR1YWxSZWFsSW5kZXgiLCJhSW5kZXgiLCJwcmV2aW91c1JlYWxJbmRleCIsInByZXZpb3VzU25hcEluZGV4Iiwic2tpcCIsImZpcnN0U2xpZGVJbkNvbHVtbiIsImFjdGl2ZVNsaWRlSW5kZXgiLCJpbml0aWFsaXplZCIsInVwZGF0ZUNsaWNrZWRTbGlkZSIsInNsaWRlRm91bmQiLCJwYXRoRWwiLCJjbGlja2VkU2xpZGUiLCJjbGlja2VkSW5kZXgiLCJjdXJyZW50VHJhbnNsYXRlIiwic2V0VHJhbnNsYXRlIiwiYnlDb250cm9sbGVyIiwicHJldmlvdXNUcmFuc2xhdGUiLCJuZXdQcm9ncmVzcyIsInRyYW5zbGF0ZVRvIiwidHJhbnNsYXRlQm91bmRzIiwiaW50ZXJuYWwiLCJhbmltYXRpbmciLCJuZXdUcmFuc2xhdGUiLCJpc0giLCJfd3JhcHBlckVsJHNjcm9sbFRvIiwib25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kIiwidHJhbnNpdGlvbiIsInRyYW5zaXRpb25EdXJhdGlvbiIsInRyYW5zaXRpb25EZWxheSIsInRyYW5zaXRpb25TdGFydCIsInRyYW5zaXRpb25FbmQiLCJpbml0aWFsIiwibm9ybWFsaXplZFRyYW5zbGF0ZSIsIm5vcm1hbGl6ZWRHcmlkIiwibm9ybWFsaXplZEdyaWROZXh0IiwiX2ltbWVkaWF0ZVZpcnR1YWwiLCJfY3NzTW9kZVZpcnR1YWxJbml0aWFsU2V0IiwiX3dyYXBwZXJFbCRzY3JvbGxUbzIiLCJvblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCIsImNvbHMiLCJuZWVkTG9vcEZpeCIsIm5ld0luZGV4IiwidGFyZ2V0U2xpZGVJbmRleCIsImxvb3BGaXgiLCJzbGlkZVJlYWxJbmRleCIsInNsaWRlTmV4dCIsInBlckdyb3VwIiwiX2NsaWVudExlZnQiLCJzbGlkZVByZXYiLCJub3JtYWxpemUiLCJ2YWwiLCJwcmV2U25hcEluZGV4Iiwibm9ybWFsaXplZFNuYXBHcmlkIiwicHJldlNuYXAiLCJzbGlkZVJlc2V0Iiwic2xpZGVUb0Nsb3Nlc3QiLCJjdXJyZW50U25hcCIsInNsaWRlVG9JbmRleCIsInNsaWRlU2VsZWN0b3IiLCJsb29wZWRTbGlkZXMiLCJnZXRTbGlkZUluZGV4IiwibG9vcENyZWF0ZSIsInNob3VsZEZpbGxHcm91cCIsInNob3VsZEZpbGxHcmlkIiwiYWRkQmxhbmtTbGlkZXMiLCJhbW91bnRPZlNsaWRlcyIsInJlY2FsY1NsaWRlcyIsIl9yZWY0IiwiX3JlZjQkc2xpZGVUbyIsImJ5TW91c2V3aGVlbCIsImxvb3BQYXJhbXMiLCJwcmVwZW5kU2xpZGVzSW5kZXhlcyIsImFwcGVuZFNsaWRlc0luZGV4ZXMiLCJpc05leHQiLCJpc1ByZXYiLCJzbGlkZXNQcmVwZW5kZWQiLCJzbGlkZXNBcHBlbmRlZCIsImFjdGl2ZUNvbEluZGV4V2l0aFNoaWZ0IiwiY29sSW5kZXhUb1ByZXBlbmQiLCJfbG9vcCIsIl9fcHJldmVudE9ic2VydmVyX18iLCJzd2lwZXJMb29wTW92ZURPTSIsImN1cnJlbnRTbGlkZVRyYW5zbGF0ZSIsImRpZmYiLCJ0b3VjaEV2ZW50c0RhdGEiLCJzdGFydFRyYW5zbGF0ZSIsImNvbnRyb2xsZXIiLCJjb250cm9sIiwibG9vcERlc3Ryb3kiLCJuZXdTbGlkZXNPcmRlciIsInN3aXBlclNsaWRlSW5kZXgiLCJzZXRHcmFiQ3Vyc29yIiwibW92aW5nIiwiaXNMb2NrZWQiLCJjdXJzb3IiLCJ1bnNldEdyYWJDdXJzb3IiLCJhdHRhY2hFdmVudHMiLCJ0YXJnZXRFbCIsInN0YXJ0WSIsInNob3VsZFByZXZlbnREZWZhdWx0Iiwib3JpZ2luYWxFdmVudCIsInBvaW50ZXJJZCIsInRhcmdldFRvdWNoZXMiLCJ0b3VjaElkIiwiaWRlbnRpZmllciIsInBhZ2VYIiwidG91Y2hlcyIsIndoaWNoIiwiaXNUb3VjaGVkIiwiaXNNb3ZlZCIsInN3aXBpbmdDbGFzc0hhc1ZhbHVlIiwiZXZlbnRQYXRoIiwiY29tcG9zZWRQYXRoIiwiaXNUYXJnZXRTaGFkb3ciLCJhbGxvd0NsaWNrIiwiY3VycmVudFgiLCJjdXJyZW50WSIsInBhZ2VZIiwiYWxsb3dUb3VjaENhbGxiYWNrcyIsImlzU2Nyb2xsaW5nIiwic3RhcnRNb3ZpbmciLCJ0b3VjaFN0YXJ0VGltZSIsInN3aXBlRGlyZWN0aW9uIiwiYWxsb3dUaHJlc2hvbGRNb3ZlIiwiaXNDb250ZW50RWRpdGFibGUiLCJmcmVlTW9kZSIsInRhcmdldFRvdWNoIiwiY2hhbmdlZFRvdWNoZXMiLCJwcmV2ZW50ZWRCeU5lc3RlZFN3aXBlciIsInByZXZpb3VzWSIsImRpZmZYIiwiZGlmZlkiLCJzcXJ0IiwicG93IiwiYXRhbjIiLCJwcmV2ZW50VG91Y2hNb3ZlRnJvbVBvaW50ZXJNb3ZlIiwiY2FuY2VsYWJsZSIsInN0b3BQcm9wYWdhdGlvbiIsInRvdWNoZXNEaWZmIiwicHJldlRvdWNoZXNEaXJlY3Rpb24iLCJ0b3VjaGVzRGlyZWN0aW9uIiwiaXNMb29wIiwiYWxsb3dMb29wRml4IiwiYnViYmxlcyIsImJ5U3dpcGVyVG91Y2hNb3ZlIiwiYWxsb3dNb21lbnR1bUJvdW5jZSIsImxvb3BTd2FwUmVzZXQiLCJkaXNhYmxlUGFyZW50U3dpcGVyIiwiY3VycmVudFBvcyIsInRvdWNoRW5kVGltZSIsInRpbWVEaWZmIiwicGF0aFRyZWUiLCJsYXN0Q2xpY2tUaW1lIiwic3dpcGVUb0xhc3QiLCJzdG9wSW5kZXgiLCJyZXdpbmRGaXJzdEluZGV4IiwicmV3aW5kTGFzdEluZGV4IiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsImRvY3VtZW50VG91Y2hIYW5kbGVyUHJvY2VlZGVkIiwidG91Y2hBY3Rpb24iLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJkZXRhY2hFdmVudHMiLCJicmVha3BvaW50IiwiYnJlYWtwb2ludFBhcmFtcyIsIndhc0VuYWJsZWQiLCJuZWVkc1JlTG9vcCIsImhhc0xvb3AiLCJnZXRCcmVha3BvaW50IiwiY3VycmVudEJyZWFrcG9pbnQiLCJvcmlnaW5hbFBhcmFtcyIsIndhc011bHRpUm93IiwiaXNNdWx0aVJvdyIsIndhc0dyYWJDdXJzb3IiLCJpc0dyYWJDdXJzb3IiLCJlbWl0Q29udGFpbmVyQ2xhc3NlcyIsIndhc01vZHVsZUVuYWJsZWQiLCJpc01vZHVsZUVuYWJsZWQiLCJkaXJlY3Rpb25DaGFuZ2VkIiwid2FzTG9vcCIsImNoYW5nZURpcmVjdGlvbiIsImNvbnRhaW5lckVsIiwiY3VycmVudEhlaWdodCIsInBvaW50cyIsInBvaW50IiwibWluUmF0aW8iLCJzdWJzdHIiLCJzb3J0IiwiX3BvaW50cyRpIiwibGFzdFNsaWRlUmlnaHRFZGdlIiwid2FzTG9ja2VkIiwiYWRkQ2xhc3NlcyIsInByZWZpeCIsInJlc3VsdENsYXNzZXMiLCJjbGFzc05hbWVzIiwic3VmZml4ZXMiLCJlbnRyaWVzIiwiZnJlZS1tb2RlIiwiYXV0b2hlaWdodCIsImdyaWQtY29sdW1uIiwiY3NzLW1vZGUiLCJjZW50ZXJlZCIsIndhdGNoLXByb2dyZXNzIiwiX2VsJGNsYXNzTGlzdDIiLCJyZW1vdmVDbGFzc2VzIiwiX2VsJGNsYXNzTGlzdDMiLCJleHRlbmRlZERlZmF1bHRzIiwiU3dpcGVyIiwiX2NsYXNzQ2FsbENoZWNrIiwic3dpcGVycyIsImFsbE1vZHVsZXNQYXJhbXMiLCJuZXdQYXJhbXMiLCJtb2R1bGVzIiwiX19tb2R1bGVzX18iLCJfc3dpcGVyJG1vZHVsZXMiLCJtb2QiLCJleHRlbmRQYXJhbXMiLCJtb2R1bGVQYXJhbU5hbWUiLCJtb2R1bGVQYXJhbXMiLCJhdXRvIiwic3dpcGVyUGFyYW1zIiwicGFzc2VkUGFyYW1zIiwidHJ1bmMiLCJjbGlja1RpbWVvdXQiLCJ2ZWxvY2l0aWVzIiwiaW1hZ2VzVG9Mb2FkIiwiX2NyZWF0ZUNsYXNzIiwicHJvcGVydHkiLCJtYXJnaW4tdG9wIiwibWFyZ2luLWJvdHRvbSAiLCJtYXJnaW4tbGVmdCIsIm1hcmdpbi1yaWdodCIsInBhZGRpbmctbGVmdCIsInBhZGRpbmctcmlnaHQiLCJ1cGRhdGVzIiwiZ2V0U2xpZGVDbGFzc2VzIiwidmlldyIsImV4YWN0Iiwic3B2IiwiYnJlYWtMb29wIiwidHJhbnNsYXRlVmFsdWUiLCJuZXdEaXJlY3Rpb24iLCJuZWVkVXBkYXRlIiwiY3VycmVudERpcmVjdGlvbiIsIm1vdW50ZWQiLCJ0b1VwcGVyQ2FzZSIsImdldFdyYXBwZXJTZWxlY3RvciIsInNsaWRlU2xvdHMiLCJob3N0RWwiLCJtb3VudCIsImxhenlFbGVtZW50cyIsImRlbGV0ZUluc3RhbmNlIiwiY2xlYW5TdHlsZXMiLCJvYmplY3QiLCJuZXdEZWZhdWx0cyIsImdldCIsIm0iLCJpbnN0YWxsTW9kdWxlIiwiY3JlYXRlRWxlbWVudElmTm90RGVmaW5lZCIsImNoZWNrUHJvcHMiLCJjbGFzc2VzVG9TZWxlY3RvciIsImFwcGVuZFNsaWRlIiwiYXBwZW5kRWxlbWVudCIsInRlbXBET00iLCJpbm5lckhUTUwiLCJvYnNlcnZlciIsInByZXBlbmRTbGlkZSIsInByZXBlbmRFbGVtZW50IiwiZWZmZWN0SW5pdCIsInJlcXVpcmVVcGRhdGVPblZpcnR1YWwiLCJvdmVyd3JpdGVQYXJhbXMiLCJwZXJzcGVjdGl2ZSIsInJlY3JlYXRlU2hhZG93cyIsImdldEVmZmVjdFBhcmFtcyIsIm92ZXJ3cml0ZVBhcmFtc1Jlc3VsdCIsIl9zIiwic2xpZGVTaGFkb3dzIiwic2hhZG93RWwiLCJlZmZlY3RUYXJnZXQiLCJlZmZlY3RQYXJhbXMiLCJ0cmFuc2Zvcm1FbCIsImJhY2tmYWNlVmlzaWJpbGl0eSIsImVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kIiwiZXZlbnRUcmlnZ2VyZWQiLCJ0cmFuc2Zvcm1FbGVtZW50cyIsImFsbFNsaWRlcyIsImNyZWF0ZVNoYWRvdyIsInN1ZmZpeCIsInNoYWRvd0NsYXNzIiwic2hhZG93Q29udGFpbmVyIiwicHJvdG90eXBlR3JvdXAiLCJwcm90b01ldGhvZCIsInVzZSIsInJlc2l6ZUhhbmRsZXIiLCJvcmllbnRhdGlvbkNoYW5nZUhhbmRsZXIiLCJhbmltYXRpb25GcmFtZSIsIlJlc2l6ZU9ic2VydmVyIiwibmV3V2lkdGgiLCJfcmVmMiIsImNvbnRlbnRCb3hTaXplIiwiY29udGVudFJlY3QiLCJpbmxpbmVTaXplIiwiYmxvY2tTaXplIiwidW5vYnNlcnZlIiwiYXR0YWNoIiwiV2Via2l0TXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmVyVXBkYXRlIiwiY2hhcmFjdGVyRGF0YSIsIm9ic2VydmVycyIsIm9ic2VydmVQYXJlbnRzIiwib2JzZXJ2ZVNsaWRlQ2hpbGRyZW4iLCJjb250YWluZXJQYXJlbnRzIiwiZGlzY29ubmVjdCIsImNzc01vZGVUaW1lb3V0IiwiY2FjaGUiLCJyZW5kZXJTbGlkZSIsInJlbmRlckV4dGVybmFsIiwicmVuZGVyRXh0ZXJuYWxVcGRhdGUiLCJhZGRTbGlkZXNCZWZvcmUiLCJhZGRTbGlkZXNBZnRlciIsIm9mZnNldCIsImJlZm9yZUluaXQiLCJfc3dpcGVyJHBhcmFtcyIsIl9zd2lwZXIkcGFyYW1zJHZpcnR1YSIsIl9zd2lwZXIkdmlydHVhbCIsInByZXZpb3VzRnJvbSIsInByZXZpb3VzVG8iLCJwcmV2aW91c1NsaWRlc0dyaWQiLCJwcmV2aW91c09mZnNldCIsIm9mZnNldFByb3AiLCJzbGlkZXNUb1JlbmRlciIsIm9uUmVuZGVyZWQiLCJwcmVwZW5kSW5kZXhlcyIsImFwcGVuZEluZGV4ZXMiLCJfbG9vcDIiLCJsb29wRnJvbSIsImxvb3BUbyIsImRvbVNsaWRlc0Fzc2lnbmVkIiwibmV3Q2FjaGUiLCJudW1iZXJPZk5ld1NsaWRlcyIsImNhY2hlZEluZGV4IiwiY2FjaGVkRWwiLCJjYWNoZWRFbEluZGV4IiwicmVtb3ZlU2xpZGUiLCJzbGlkZXNJbmRleGVzIiwicmVtb3ZlQWxsU2xpZGVzIiwiaGFuZGxlIiwia2MiLCJrZXlDb2RlIiwiY2hhckNvZGUiLCJwYWdlVXBEb3duIiwia2V5Ym9hcmQiLCJpc1BhZ2VVcCIsImlzUGFnZURvd24iLCJpc0Fycm93TGVmdCIsImlzQXJyb3dSaWdodCIsImlzQXJyb3dVcCIsImlzQXJyb3dEb3duIiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5IiwibWV0YUtleSIsIm9ubHlJblZpZXdwb3J0IiwiaW5WaWV3Iiwic3dpcGVyV2lkdGgiLCJzd2lwZXJIZWlnaHQiLCJ3aW5kb3dXaWR0aCIsIndpbmRvd0hlaWdodCIsInN3aXBlck9mZnNldCIsInN3aXBlckNvb3JkIiwicmV0dXJuVmFsdWUiLCJsYXN0RXZlbnRCZWZvcmVTbmFwIiwibGFzdFNjcm9sbFRpbWUiLCJtb3VzZXdoZWVsIiwicmVsZWFzZU9uRWRnZXMiLCJpbnZlcnQiLCJmb3JjZVRvQXhpcyIsInNlbnNpdGl2aXR5IiwiZXZlbnRzVGFyZ2V0IiwidGhyZXNob2xkRGVsdGEiLCJ0aHJlc2hvbGRUaW1lIiwibm9Nb3VzZXdoZWVsQ2xhc3MiLCJyZWNlbnRXaGVlbEV2ZW50cyIsImhhbmRsZU1vdXNlRW50ZXIiLCJtb3VzZUVudGVyZWQiLCJoYW5kbGVNb3VzZUxlYXZlIiwiYW5pbWF0ZVNsaWRlciIsIm5ld0V2ZW50IiwicmF3IiwidGFyZ2V0RWxDb250YWluc1RhcmdldCIsInJ0bEZhY3RvciIsInBZIiwicFgiLCJzWSIsInNYIiwid2hlZWxEZWx0YSIsIndoZWVsRGVsdGFZIiwid2hlZWxEZWx0YVgiLCJIT1JJWk9OVEFMX0FYSVMiLCJkZWx0YVkiLCJkZWx0YVgiLCJkZWx0YU1vZGUiLCJzcGluWCIsInNwaW5ZIiwicGl4ZWxYIiwicGl4ZWxZIiwicG9zaXRpb25zIiwic2lnbiIsImlnbm9yZVdoZWVsRXZlbnRzIiwic25hcFRvVGhyZXNob2xkIiwic3RpY2t5IiwicHJldkV2ZW50IiwiZmlyc3RFdmVudCIsImF1dG9wbGF5RGlzYWJsZU9uSW50ZXJhY3Rpb24iLCJnZXRFbCIsInJlcyIsInRvZ2dsZUVsIiwiZGlzYWJsZWQiLCJzdWJFbCIsIl9zdWJFbCRjbGFzc0xpc3QiLCJkaXNhYmxlZENsYXNzIiwidGFnTmFtZSIsImxvY2tDbGFzcyIsIl9zd2lwZXIkbmF2aWdhdGlvbiIsIm9uUHJldkNsaWNrIiwib25OZXh0Q2xpY2siLCJpbml0QnV0dG9uIiwiX2VsJGNsYXNzTGlzdDQiLCJkZXN0cm95QnV0dG9uIiwiX2VsJGNsYXNzTGlzdDUiLCJfc3dpcGVyJG5hdmlnYXRpb24yIiwiaGlkZU9uQ2xpY2siLCJoaWRkZW5DbGFzcyIsIm5hdmlnYXRpb25EaXNhYmxlZENsYXNzIiwiX3N3aXBlciRuYXZpZ2F0aW9uMyIsImlzSGlkZGVuIiwiX3N3aXBlciRuYXZpZ2F0aW9uNCIsInRhcmdldElzQnV0dG9uIiwicGFnaW5hdGlvbiIsImNsaWNrYWJsZSIsIl9zd2lwZXIkZWwkY2xhc3NMaXN0MiIsIl9zd2lwZXIkZWwkY2xhc3NMaXN0IiwiYnVsbGV0U2l6ZSIsInBmeCIsImR5bmFtaWNCdWxsZXRJbmRleCIsImJ1bGxldEVsZW1lbnQiLCJyZW5kZXJCdWxsZXQiLCJyZW5kZXJQcm9ncmVzc2JhciIsInJlbmRlckZyYWN0aW9uIiwicmVuZGVyQ3VzdG9tIiwicHJvZ3Jlc3NiYXJPcHBvc2l0ZSIsImR5bmFtaWNCdWxsZXRzIiwiZHluYW1pY01haW5CdWxsZXRzIiwiZm9ybWF0RnJhY3Rpb25DdXJyZW50IiwiZm9ybWF0RnJhY3Rpb25Ub3RhbCIsImJ1bGxldENsYXNzIiwiYnVsbGV0QWN0aXZlQ2xhc3MiLCJtb2RpZmllckNsYXNzIiwiY3VycmVudENsYXNzIiwidG90YWxDbGFzcyIsInByb2dyZXNzYmFyRmlsbENsYXNzIiwicHJvZ3Jlc3NiYXJPcHBvc2l0ZUNsYXNzIiwiY2xpY2thYmxlQ2xhc3MiLCJob3Jpem9udGFsQ2xhc3MiLCJ2ZXJ0aWNhbENsYXNzIiwicGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MiLCJidWxsZXRzIiwiaXNQYWdpbmF0aW9uRGlzYWJsZWQiLCJzZXRTaWRlQnVsbGV0cyIsImJ1bGxldEVsIiwib25CdWxsZXRDbGljayIsInRvdGFsIiwiZmlyc3RJbmRleCIsIm1pZEluZGV4IiwiYnVsbGV0c09mZnNldCIsImNsYXNzZXNUb1JlbW92ZSIsIl9idWxsZXRFbCRjbGFzc0xpc3QiLCJidWxsZXQiLCJfYnVsbGV0JGNsYXNzTGlzdDIiLCJidWxsZXRJbmRleCIsIl9idWxsZXQkY2xhc3NMaXN0IiwiX2J1bGxldCRjbGFzc0xpc3QzIiwiX2J1bGxldHMkaSRjbGFzc0xpc3QiLCJmaXJzdERpc3BsYXllZEJ1bGxldCIsImxhc3REaXNwbGF5ZWRCdWxsZXQiLCJkeW5hbWljQnVsbGV0c0xlbmd0aCIsInN1YkVsSW5kZXgiLCJwcm9ncmVzc2JhckRpcmVjdGlvbiIsInNjYWxlIiwic2NhbGVYIiwic2NhbGVZIiwiZnJhY3Rpb25FbCIsInRvdGFsRWwiLCJwcm9ncmVzc0VsIiwicmVuZGVyIiwicGFnaW5hdGlvbkhUTUwiLCJudW1iZXJPZkJ1bGxldHMiLCJfc3dpcGVyJHBhZ2luYXRpb24kYnUiLCJfc3ViRWwkY2xhc3NMaXN0MiIsIl9zdWJFbCRjbGFzc0xpc3QzIiwiX3N1YkVsJGNsYXNzTGlzdDQiLCJkcmFnU3RhcnRQb3MiLCJkcmFnU2l6ZSIsInRyYWNrU2l6ZSIsImRpdmlkZXIiLCJkcmFnVGltZW91dCIsImRyYWdFbCIsIm5ld1NpemUiLCJuZXdQb3MiLCJzY3JvbGxiYXIiLCJoaWRlIiwib3BhY2l0eSIsImdldFBvaW50ZXJQb3NpdGlvbiIsImNsaWVudFgiLCJjbGllbnRZIiwic2V0RHJhZ1Bvc2l0aW9uIiwicG9zaXRpb25SYXRpbyIsIm9uRHJhZ1N0YXJ0Iiwib25EcmFnTW92ZSIsIm9uRHJhZ0VuZCIsInNuYXBPblJlbGVhc2UiLCJhY3RpdmVMaXN0ZW5lciIsInBhc3NpdmVMaXN0ZW5lciIsImV2ZW50TWV0aG9kIiwic3dpcGVyRWwiLCJkcmFnQ2xhc3MiLCJfZWwkY2xhc3NMaXN0NiIsIl9lbCRjbGFzc0xpc3Q3Iiwic2Nyb2xsYmFyRGlzYWJsZWRDbGFzcyIsIl9lbCRjbGFzc0xpc3Q4IiwiX3N3aXBlciRzY3JvbGxiYXIkZWwkMiIsIl9zd2lwZXIkZWwkY2xhc3NMaXN0NCIsIl9zd2lwZXIkc2Nyb2xsYmFyJGVsJCIsIl9zd2lwZXIkZWwkY2xhc3NMaXN0MyIsInNldFRyYW5zZm9ybSIsInJvdGF0ZSIsImN1cnJlbnRPcGFjaXR5IiwiY3VycmVudFNjYWxlIiwiZWxlbWVudHNTZWxlY3RvciIsInBhcmFsbGF4IiwiX3N3aXBlciIsInBhcmFsbGF4RWwiLCJwYXJhbGxheER1cmF0aW9uIiwiZmFrZUdlc3R1cmVUb3VjaGVkIiwiZmFrZUdlc3R1cmVNb3ZlZCIsImFsbG93VG91Y2hNb3ZlVGltZW91dCIsInpvb20iLCJsaW1pdFRvT3JpZ2luYWxTaXplIiwibWF4UmF0aW8iLCJjb250YWluZXJDbGFzcyIsInpvb21lZFNsaWRlQ2xhc3MiLCJpc1NjYWxpbmciLCJldkNhY2hlIiwiZ2VzdHVyZSIsIm9yaWdpblgiLCJvcmlnaW5ZIiwic2xpZGVIZWlnaHQiLCJpbWFnZVdyYXBFbCIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJ0b3VjaGVzU3RhcnQiLCJ0b3VjaGVzQ3VycmVudCIsInByZXZQb3NpdGlvblgiLCJwcmV2UG9zaXRpb25ZIiwicHJldlRpbWUiLCJnZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzIiwiZ2V0TWF4UmF0aW8iLCJpbWFnZU1heFJhdGlvIiwiZXZlbnRXaXRoaW5TbGlkZSIsIm9uR2VzdHVyZVN0YXJ0Iiwic2NhbGVTdGFydCIsIl9nZXRTY2FsZU9yaWdpbjIiLCJvbkdlc3R1cmVDaGFuZ2UiLCJwb2ludGVySW5kZXgiLCJmaW5kSW5kZXgiLCJjYWNoZWRFdiIsInNjYWxlTW92ZSIsIm9uR2VzdHVyZUVuZCIsInNjYWxlZFdpZHRoIiwic2NhbGVkSGVpZ2h0Iiwic2NhbGVSYXRpbyIsIm9uVHJhbnNpdGlvbkVuZCIsInpvb21JbiIsInRyYW5zbGF0ZVkiLCJ0cmFuc2xhdGVNaW5ZIiwidHJhbnNsYXRlTWF4WSIsInRvdWNoWSIsInRvdWNoWCIsImZvcmNlWm9vbVJhdGlvIiwiaW1hZ2VXaWR0aCIsImltYWdlSGVpZ2h0IiwidHJhbnNsYXRlTWluWCIsInRyYW5zbGF0ZU1heFgiLCJ6b29tT3V0Iiwiem9vbVRvZ2dsZSIsImdldExpc3RlbmVycyIsImFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmUiLCJfZ2V0TGlzdGVuZXJzIiwiX2dldExpc3RlbmVyczIiLCJuZXdQb3NpdGlvblkiLCJtb21lbnR1bUR1cmF0aW9uIiwibW9tZW50dW1EaXN0YW5jZVgiLCJtb21lbnR1bUR1cmF0aW9uWCIsIm5ld1Bvc2l0aW9uWCIsIm1vbWVudHVtRGlzdGFuY2VZIiwibW9tZW50dW1EdXJhdGlvblkiLCJpbiIsIm91dCIsIkxpbmVhclNwbGluZSIsIm1heEluZGV4IiwibWluSW5kZXgiLCJndWVzcyIsImkxIiwiaTMiLCJiaW5hcnlTZWFyY2giLCJhcnJheSIsImludGVycG9sYXRlIiwicmVtb3ZlU3BsaW5lIiwic3BsaW5lIiwiaW52ZXJzZSIsImJ5IiwiY29udHJvbEVsZW1lbnQiLCJvbkNvbnRyb2xsZXJTd2lwZXIiLCJfdCIsImNvbnRyb2xsZWRUcmFuc2xhdGUiLCJjb250cm9sbGVkIiwic2V0Q29udHJvbGxlZFRyYW5zbGF0ZSIsImlzRmluaXRlIiwic2V0Q29udHJvbGxlZFRyYW5zaXRpb24iLCJwcmV2ZW50Rm9jdXNIYW5kbGVyIiwiZm9jdXNUYXJnZXRTbGlkZUVsIiwibGl2ZVJlZ2lvbiIsImExMXkiLCJub3RpZmljYXRpb25DbGFzcyIsInByZXZTbGlkZU1lc3NhZ2UiLCJuZXh0U2xpZGVNZXNzYWdlIiwiZmlyc3RTbGlkZU1lc3NhZ2UiLCJsYXN0U2xpZGVNZXNzYWdlIiwicGFnaW5hdGlvbkJ1bGxldE1lc3NhZ2UiLCJzbGlkZUxhYmVsTWVzc2FnZSIsImNvbnRhaW5lck1lc3NhZ2UiLCJjb250YWluZXJSb2xlRGVzY3JpcHRpb25NZXNzYWdlIiwiaXRlbVJvbGVEZXNjcmlwdGlvbk1lc3NhZ2UiLCJzbGlkZVJvbGUiLCJjbGlja2VkIiwidmlzaWJpbGl0eUNoYW5nZWRUaW1lc3RhbXAiLCJub3RpZmljYXRpb24iLCJtYWtlRWxGb2N1c2FibGUiLCJtYWtlRWxOb3RGb2N1c2FibGUiLCJhZGRFbFJvbGUiLCJyb2xlIiwiYWRkRWxSb2xlRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImFkZEVsTGFiZWwiLCJkaXNhYmxlRWwiLCJlbmFibGVFbCIsIm9uRW50ZXJPclNwYWNlS2V5IiwiY2xpY2siLCJoYXNQYWdpbmF0aW9uIiwiaGFzQ2xpY2thYmxlUGFnaW5hdGlvbiIsImluaXROYXZFbCIsIndyYXBwZXJJZCIsImNvbnRyb2xzIiwiaGFuZGxlRm9jdXMiLCJzb3VyY2VDYXBhYmlsaXRpZXMiLCJmaXJlc1RvdWNoRXZlbnRzIiwibGl2ZSIsInJlcGVhdCIsInJhbmRvbSIsIl9yZWY1IiwiX3N3aXBlciRuYXZpZ2F0aW9uNSIsIl9yZWY2Iiwic2V0SGlzdG9yeSIsImN1cnJlbnRTdGF0ZSIsIlVSTCIsInNsdWdpZnkiLCJyb290Iiwia2VlcFF1ZXJ5Iiwic2V0SGlzdG9yeVBvcFN0YXRlIiwicGF0aHMiLCJnZXRQYXRoVmFsdWVzIiwic2Nyb2xsVG9TbGlkZSIsInVybE92ZXJyaWRlIiwicGF0aEFycmF5IiwicGFydCIsImhhc2hOYXZpZ2F0aW9uIiwib25IYXNoQ2hhbmdlIiwibmV3SGFzaCIsImFjdGl2ZVNsaWRlRWwiLCJzZXRIYXNoIiwiYWN0aXZlU2xpZGVIYXNoIiwid2F0Y2hTdGF0ZSIsInNsaWRlV2l0aEhhc2giLCJyYWYiLCJhdXRvcGxheVRpbWVMZWZ0Iiwid2FzUGF1c2VkIiwicGF1c2VkQnlUb3VjaCIsInRvdWNoU3RhcnRUaW1lb3V0Iiwic2xpZGVDaGFuZ2VkIiwicGF1c2VkQnlJbnRlcmFjdGlvbiIsInBhdXNlZEJ5UG9pbnRlckVudGVyIiwiYXV0b3BsYXlEZWxheVRvdGFsIiwidGltZUxlZnQiLCJ3YWl0Rm9yVHJhbnNpdGlvbiIsImRpc2FibGVPbkludGVyYWN0aW9uIiwic3RvcE9uTGFzdFNsaWRlIiwicmV2ZXJzZURpcmVjdGlvbiIsInBhdXNlT25Nb3VzZUVudGVyIiwiYXV0b3BsYXlEZWxheUN1cnJlbnQiLCJhdXRvcGxheVN0YXJ0VGltZSIsImRlbGF5Rm9yY2UiLCJjdXJyZW50U2xpZGVEZWxheSIsInByb2NlZWQiLCJjYWxjVGltZUxlZnQiLCJnZXRTbGlkZURlbGF5Iiwic3RhcnQiLCJ2aXNpYmlsaXR5U3RhdGUiLCJvblBvaW50ZXJFbnRlciIsIm9uUG9pbnRlckxlYXZlIiwicmVzZXQiLCJ0aHVtYnMiLCJtdWx0aXBsZUFjdGl2ZVRodW1icyIsImF1dG9TY3JvbGxPZmZzZXQiLCJzbGlkZVRodW1iQWN0aXZlQ2xhc3MiLCJ0aHVtYnNDb250YWluZXJDbGFzcyIsInN3aXBlckNyZWF0ZWQiLCJvblRodW1iQ2xpY2siLCJ0aHVtYnNTd2lwZXIiLCJ0aHVtYnNQYXJhbXMiLCJTd2lwZXJDbGFzcyIsInRodW1ic1N3aXBlclBhcmFtcyIsInRodW1ic1RvQWN0aXZhdGUiLCJ0aHVtYkFjdGl2ZUNsYXNzIiwiY3VycmVudFRodW1ic0luZGV4IiwibmV3VGh1bWJzSW5kZXgiLCJ1c2VPZmZzZXQiLCJuZXdUaHVtYnNTbGlkZSIsImdldFRodW1ic0VsZW1lbnRBbmRJbml0IiwidGh1bWJzRWxlbWVudCIsIm9uVGh1bWJzU3dpcGVyIiwid2F0Y2hGb3JUaHVtYnNUb0FwcGVhciIsIm1vbWVudHVtIiwibW9tZW50dW1SYXRpbyIsIm1vbWVudHVtQm91bmNlIiwibW9tZW50dW1Cb3VuY2VSYXRpbyIsIm1vbWVudHVtVmVsb2NpdHlSYXRpbyIsIm1pbmltdW1WZWxvY2l0eSIsImxhc3RNb3ZlRXZlbnQiLCJwb3AiLCJ2ZWxvY2l0eUV2ZW50IiwiYWZ0ZXJCb3VuY2VQb3NpdGlvbiIsImN1cnJlbnRTbGlkZVNpemUiLCJtb21lbnR1bURpc3RhbmNlIiwibmV3UG9zaXRpb24iLCJkb0JvdW5jZSIsImJvdW5jZUFtb3VudCIsIm5lZWRzTG9vcEZpeCIsImoiLCJtb3ZlRGlzdGFuY2UiLCJnZXRTcGFjZUJldHdlZW4iLCJzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzIiwic2xpZGVzUGVyUm93IiwibnVtRnVsbENvbHVtbnMiLCJfc3dpcGVyJHBhcmFtcyRncmlkIiwic3dpcGVyU2xpZGVHcmlkU2V0Iiwicm93IiwiX3N3aXBlciRwYXJhbXMkZ3JpZDIiLCJzbGlkZUluZGV4SW5Hcm91cCIsImdyb3VwSW5kZXgiLCJjb2x1bW5zSW5Hcm91cCIsIm5ld1NsaWRlT3JkZXJJbmRleCIsIm9yZGVyIiwiX3N3aXBlciRwYXJhbXMyIiwiYWRkU2xpZGUiLCJiYXNlTGVuZ3RoIiwiYWN0aXZlSW5kZXhCdWZmZXIiLCJzbGlkZXNCdWZmZXIiLCJjdXJyZW50U2xpZGUiLCJpbmRleFRvUmVtb3ZlIiwiZmFkZUVmZmVjdCIsImNyb3NzRmFkZSIsInR4IiwidHkiLCJzbGlkZU9wYWNpdHkiLCJjcmVhdGVTbGlkZVNoYWRvd3MiLCJzaGFkb3dCZWZvcmUiLCJzaGFkb3dBZnRlciIsImN1YmVFZmZlY3QiLCJzaGFkb3ciLCJzaGFkb3dPZmZzZXQiLCJzaGFkb3dTY2FsZSIsIndyYXBwZXJSb3RhdGUiLCJjdWJlU2hhZG93RWwiLCJzbGlkZUFuZ2xlIiwidHoiLCJ0cmFuc2Zvcm1PcmlnaW4iLCJzaGFkb3dBbmdsZSIsInNpbiIsInNjYWxlMSIsInNjYWxlMiIsInpGYWN0b3IiLCJmbGlwRWZmZWN0IiwibGltaXRSb3RhdGlvbiIsInJvdGF0ZVkiLCJyb3RhdGVYIiwiekluZGV4IiwiY292ZXJmbG93RWZmZWN0Iiwic3RyZXRjaCIsImRlcHRoIiwibW9kaWZpZXIiLCJjZW50ZXJPZmZzZXQiLCJvZmZzZXRNdWx0aXBsaWVyIiwidHJhbnNsYXRlWiIsInNsaWRlVHJhbnNmb3JtIiwic2hhZG93QmVmb3JlRWwiLCJzaGFkb3dBZnRlckVsIiwiY3JlYXRpdmVFZmZlY3QiLCJsaW1pdFByb2dyZXNzIiwic2hhZG93UGVyUHJvZ3Jlc3MiLCJwcm9ncmVzc011bHRpcGxpZXIiLCJpc0NlbnRlcmVkU2xpZGVzIiwibWFyZ2luIiwiX2xvb3AzIiwiY3VzdG9tIiwidHJhbnNsYXRlU3RyaW5nIiwicm90YXRlU3RyaW5nIiwic2NhbGVTdHJpbmciLCJvcGFjaXR5U3RyaW5nIiwic2hhZG93T3BhY2l0eSIsImNhcmRzRWZmZWN0IiwicGVyU2xpZGVSb3RhdGUiLCJwZXJTbGlkZU9mZnNldCIsIl9zd2lwZXIkdG91Y2hFdmVudHNEYSIsInRYIiwidFkiLCJ0WiIsInRYQWRkIiwiaXNTd2lwZVRvTmV4dCIsImlzU3dpcGVUb1ByZXYiLCJzdWJQcm9ncmVzcyIsInByZXZZIiwicGFyYW1zTGlzdCIsImlzT2JqZWN0IiwiZXh0ZW5kIiwiYXR0clRvUHJvcCIsImF0dHJOYW1lIiwibCIsInVwZGF0ZVN3aXBlciIsImRlc3Ryb3lNb2R1bGUiLCJjdXJyZW50UGFyYW1zIiwibmVlZFRodW1ic0luaXQiLCJuZWVkQ29udHJvbGxlckluaXQiLCJuZWVkUGFnaW5hdGlvbkluaXQiLCJuZWVkU2Nyb2xsYmFySW5pdCIsIm5lZWROYXZpZ2F0aW9uSW5pdCIsImxvb3BOZWVkRGVzdHJveSIsImxvb3BOZWVkRW5hYmxlIiwibG9vcE5lZWRSZWxvb3AiLCJjaGFuZ2VkUGFyYW1zIiwic2Nyb2xsYmFyRWwiLCJwYWdpbmF0aW9uRWwiLCJ1cGRhdGVQYXJhbXMiLCJuZXdWYWx1ZSIsIm5leHRCdXR0b25TdmciLCJwcmV2QnV0dG9uU3ZnIiwiZm9ybWF0VmFsdWUiLCJtb2R1bGVzUGFyYW1zTGlzdCIsImdldFBhcmFtcyIsInByb3BOYW1lIiwicHJvcFZhbHVlIiwibG9jYWxQYXJhbXNMaXN0IiwiYWxsb3dlZFBhcmFtcyIsImF0dHJzTGlzdCIsInBhcmFtTmFtZSIsIm1vZHVsZVBhcmFtIiwibVBhcmFtIiwicGFyZW50T2JqTmFtZSIsInN1Yk9iak5hbWUiLCJhZGRTdHlsZSIsInN0eWxlcyIsIkNTU1N0eWxlU2hlZXQiLCJhZG9wdGVkU3R5bGVTaGVldHMiLCJzdHlsZVNoZWV0IiwicmVwbGFjZVN5bmMiLCJyZWwiLCJDbGFzc1RvRXh0ZW5kIiwiRHVtbXlIVE1MRWxlbWVudCIsImFycm93U3ZnIiwiU3dpcGVyQ29udGFpbmVyIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiX2NyZWF0ZVN1cGVyIiwiX3RoaXMxOSIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJpbmplY3RTdHlsZXMiLCJpbmplY3RTdHlsZXNVcmxzIiwiY3VycmVudFNpZGVTbG90cyIsInNsaWRlU2xvdENoaWxkcmVuIiwicmVuZGVyZWQiLCJzbG90RWwiLCJfdGhpczIwIiwiY2FsY1NsaWRlU2xvdHMiLCJsb2NhbFN0eWxlcyIsImNzc1N0eWxlcyIsImNzc0xpbmtzIiwibGlua0VsIiwiX3RoaXMiLCJfZ2V0UGFyYW1zIiwiaW5pdGlhbGl6ZSIsIl9nZXRQYXJhbXMyIiwicHJldlZhbHVlIiwidXBkYXRlU3dpcGVyT25Qcm9wQ2hhbmdlIiwicGFyYW0iLCJTd2lwZXJTbGlkZSIsImNvbmZpZ3VyYWJsZSIsIl9zdXBlcjIiLCJfdGhpczIxIiwibGF6eSIsImxhenlEaXYiLCJTd2lwZXJFbGVtZW50UmVnaXN0ZXJQYXJhbXMiLCJjdXN0b21FbGVtZW50cyIsIjIxIiwic3RhcnRFdmVudCIsImFjdGl2ZUV2ZW50cyIsImN1cnNvck5vZGVzIiwiUG9pbnRlckV2ZW50IiwiX2JpbmRIYW5kbGVzIiwiYmluZE1ldGhvZCIsIl90aGlzMjIiLCJfdGhpczIzIiwidW5iaW5kQWN0aXZlUG9pbnRlckV2ZW50cyIsIl90aGlzMjQiLCJ3aXRoUG9pbnRlciIsInBvaW50ZXJJZGVudGlmaWVyIiwid2l0aFRvdWNoIiwiX3N0ZXA2IiwiX2l0ZXJhdG9yNiIsImNoYW5nZWRUb3VjaCIsIm9ubW91c2Vkb3duIiwicG9pbnRlckRvd24iLCJvbnRvdWNoc3RhcnQiLCJvbnBvaW50ZXJkb3duIiwiY2xpY2tUeXBlcyIsImlzQ3Vyc29yTm9kZSIsImlzQ2xpY2tUeXBlIiwicG9pbnRlckRvd25Qb2ludGVyIiwib25tb3VzZW1vdmUiLCJwb2ludGVyTW92ZSIsIm9ucG9pbnRlcm1vdmUiLCJvbnRvdWNobW92ZSIsImRyYWdTdGFydCIsImRyYWdNb3ZlIiwiaXNQcmV2ZW50aW5nQ2xpY2tzIiwib25tb3VzZXVwIiwicG9pbnRlclVwIiwib25wb2ludGVydXAiLCJvbnRvdWNoZW5kIiwiZHJhZ0VuZCIsInN0YXRpY0NsaWNrIiwiX3RoaXMyNSIsIm9ucG9pbnRlcmNhbmNlbCIsIm9udG91Y2hjYW5jZWwiLCJwb2ludGVyQ2FuY2VsIiwib25jbGljayIsIl90aGlzMjYiLCJpc01vdXNldXAiLCJpc0lnbm9yaW5nTW91c2VVcCIsIjIyIiwiX25pbCIsIl9wYXJzZSIsIl9zdHJpbmdpZnkiLCJfdiIsIl92MiIsIl92MyIsIl92NCIsIl92YWxpZGF0ZSIsIl92ZXJzaW9uIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiLi9uaWwuanMiLCIuL3BhcnNlLmpzIiwiLi9zdHJpbmdpZnkuanMiLCIuL3YxLmpzIiwiLi92My5qcyIsIi4vdjQuanMiLCIuL3Y1LmpzIiwiLi92YWxpZGF0ZS5qcyIsIi4vdmVyc2lvbi5qcyIsIjIzIiwiZ2V0T3V0cHV0TGVuZ3RoIiwiaW5wdXRMZW5ndGg4Iiwic2FmZUFkZCIsImxzdyIsIm1kNWNtbiIsInEiLCJtZDVmZiIsImQiLCJtZDVnZyIsIm1kNWhoIiwibWQ1aWkiLCJieXRlcyIsIm1zZyIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiVWludDhBcnJheSIsImNoYXJDb2RlQXQiLCJtZDVUb0hleEVuY29kZWRBcnJheSIsImlucHV0Iiwib2xkYSIsIm9sZGIiLCJvbGRjIiwib2xkZCIsImxlbmd0aDgiLCJvdXRwdXQiLCJVaW50MzJBcnJheSIsImxlbmd0aDMyIiwiaGV4VGFiIiwiaGV4IiwiY2hhckF0IiwiMjQiLCJyYW5kb21VVUlEIiwiY3J5cHRvIiwiMjUiLCIyNiIsInV1aWQiLCJhcnIiLCJUeXBlRXJyb3IiLCIyNyIsIjI4IiwiZ2V0UmFuZG9tVmFsdWVzIiwicm5kczgiLCIyOSIsIlJPVEwiLCJLIiwiSCIsIk4iLCJNIiwiVyIsIlQiLCJ6IiwiMzAiLCJ1bnNhZmVTdHJpbmdpZnkiLCJieXRlVG9IZXgiLCIzMSIsIl9ub2RlSWQiLCJfY2xvY2tzZXEiLCJfcm5nIiwiX2xhc3RNU2VjcyIsIl9sYXN0TlNlY3MiLCJidWYiLCJjbG9ja3NlcSIsIm1zZWNzIiwic2VlZEJ5dGVzIiwicm5nIiwibnNlY3MiLCJkdCIsInRsIiwidG1oIiwiLi9ybmcuanMiLCIzMiIsIl9tZCIsInYzIiwiLi9tZDUuanMiLCIuL3YzNS5qcyIsIjMzIiwiRE5TIiwidmVyc2lvbiIsImhhc2hmdW5jIiwiZ2VuZXJhdGVVVUlEIiwiX25hbWVzcGFjZSIsIjM0IiwiX25hdGl2ZSIsInJuZHMiLCIuL25hdGl2ZS5qcyIsIjM1IiwiX3NoYSIsInY1IiwiLi9zaGExLmpzIiwiMzYiLCJfcmVnZXgiLCIuL3JlZ2V4LmpzIiwiMzciLCIzOCIsIlV1aWQiLCJyZWdpc3RlciIsIlB1YlN1YiIsIndhaXQiLCJfdGhpczI3IiwiX2xlbjMiLCJfa2V5MyIsInRocm90dGxlIiwiY2IiLCJzdG9yZWRBcmdzIiwiY2hlY2tTdG9yZWRBcmdzIiwiX2xlbjQiLCJfa2V5NCIsIi4uL25vZGVfbW9kdWxlcy9zd2lwZXIvc3dpcGVyLWVsZW1lbnQtYnVuZGxlIiwiLi9zY3JpcHRzL3B1YnN1YiIsImZsaWNraXR5IiwibGF6eXNpemVzL3BsdWdpbnMvYmdzZXQvbHMuYmdzZXQiLCJsYXp5c2l6ZXMvcGx1Z2lucy9wYXJlbnQtZml0L2xzLnBhcmVudC1maXQiLCIzOSIsIkVWRU5UUyIsImNhcnRVcGRhdGVkIiwic3Vi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RSxFQUFBaUQsRUFBQXBELEVBQUF3SyxFQUFBMUssRUFBQSxHQUFBLEVBQUEsQ0FBQSxVQUFBLEVBQ0FFLEVBQUF5ekUsRUFBQXp6RSxFQUFBd3pFLEVBQUFyekUsRUFBQWlELEVBQUFvSCxFQUFBMUssRUFBQSxJQUFBLEdBQUEsU0FBQSxFQUNBc0QsRUFBQXF3RSxFQUFBcndFLEVBQUFwRCxFQUFBd3pFLEVBQUFyekUsRUFBQXFLLEVBQUExSyxHQUFBLEdBQUEsQ0FBQSxTQUFBLEVBQ0FLLEVBQUFzekUsRUFBQXR6RSxFQUFBaUQsRUFBQXBELEVBQUF3ekUsRUFBQWhwRSxFQUFBMUssRUFBQSxHQUFBLEVBQUEsQ0FBQSxTQUFBLEVBQ0EwekUsRUFBQUMsRUFBQUQsRUFBQXJ6RSxFQUFBaUQsRUFBQXBELEVBQUF3SyxFQUFBMUssRUFBQSxJQUFBLEVBQUEsUUFBQSxFQUNBRSxFQUFBeXpFLEVBQUF6ekUsRUFBQXd6RSxFQUFBcnpFLEVBQUFpRCxFQUFBb0gsRUFBQTFLLEVBQUEsSUFBQSxHQUFBLENBQUEsU0FBQSxFQUNBc0QsRUFBQXF3RSxFQUFBcndFLEVBQUFwRCxFQUFBd3pFLEVBQUFyekUsRUFBQXFLLEVBQUExSyxFQUFBLEdBQUEsR0FBQSxDQUFBLFNBQUEsRUFDQUssRUFBQXN6RSxFQUFBdHpFLEVBQUFpRCxFQUFBcEQsRUFBQXd6RSxFQUFBaHBFLEVBQUExSyxFQUFBLEdBQUEsRUFBQSxTQUFBLEVBQ0EwekUsRUFBQUMsRUFBQUQsRUFBQXJ6RSxFQUFBaUQsRUFBQXBELEVBQUF3SyxFQUFBMUssRUFBQSxJQUFBLEVBQUEsQ0FBQSxVQUFBLEVBQ0FFLEVBQUF5ekUsRUFBQXp6RSxFQUFBd3pFLEVBQUFyekUsRUFBQWlELEVBQUFvSCxFQUFBMUssRUFBQSxHQUFBLEdBQUEsQ0FBQSxTQUFBLEVBQ0FzRCxFQUFBcXdFLEVBQUFyd0UsRUFBQXBELEVBQUF3ekUsRUFBQXJ6RSxFQUFBcUssRUFBQTFLLEVBQUEsR0FBQSxHQUFBLFVBQUEsRUFDQUssRUFBQXN6RSxFQUFBdHpFLEVBQUFpRCxFQUFB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QUF2NUUsS0FPQSxPQU5BK0csS0FBQUEsSUFBQS9HLEtBQUFxNUUsWUFBQWg1RSxLQUNBTCxLQUFBcTVFLFlBQUFoNUUsR0FBQSxJQUdBTCxLQUFBcTVFLFlBQUFoNUUsR0FBQSxHQUFBNEQsT0FBQXBCLG1CQUFBN0MsS0FBQXE1RSxZQUFBaDVFLEVBQUEsRUFBQSxDQUFBczdCLEVBQUEsRUFFQSxXQUNBNDlDLEVBQUFGLFlBQUFoNUUsR0FBQWs1RSxFQUFBRixZQUFBaDVFLEdBQUFzRCxPQUFBLFNBQUE2MEUsR0FDQSxPQUFBQSxJQUFBNzhDLENBQ0EsQ0FBQSxDQUNBLENBQ0EsRUFDQTY5QyxRQUFBLFNBQUFuNUUsRUFBQStGLEdBQ0FwRyxLQUFBcTVFLFlBQUFoNUUsSUFDQUwsS0FBQXE1RSxZQUFBaDVFLEdBQUF1RixRQUFBLFNBQUErMUIsR0FDQUEsRUFBQXYxQixDQUFBLENBQ0EsQ0FBQSxDQUVBLENBQ0EsQy9CMDFlQSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyIsImZpbGUiOiJnbG9iYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqXG4gKiBFdkVtaXR0ZXIgdjIuMS4xXG4gKiBMaWwnIGV2ZW50IGVtaXR0ZXJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTIC0gQnJvd3NlcmlmeSwgV2VicGFja1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgIGdsb2JhbC5FdkVtaXR0ZXIgPSBmYWN0b3J5KCk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCkge1xuXG5mdW5jdGlvbiBFdkVtaXR0ZXIoKSB7fVxuXG5sZXQgcHJvdG8gPSBFdkVtaXR0ZXIucHJvdG90eXBlO1xuXG5wcm90by5vbiA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGxpc3RlbmVyICkge1xuICBpZiAoICFldmVudE5hbWUgfHwgIWxpc3RlbmVyICkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gc2V0IGV2ZW50cyBoYXNoXG4gIGxldCBldmVudHMgPSB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIC8vIHNldCBsaXN0ZW5lcnMgYXJyYXlcbiAgbGV0IGxpc3RlbmVycyA9IGV2ZW50c1sgZXZlbnROYW1lIF0gPSBldmVudHNbIGV2ZW50TmFtZSBdIHx8IFtdO1xuICAvLyBvbmx5IGFkZCBvbmNlXG4gIGlmICggIWxpc3RlbmVycy5pbmNsdWRlcyggbGlzdGVuZXIgKSApIHtcbiAgICBsaXN0ZW5lcnMucHVzaCggbGlzdGVuZXIgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8ub25jZSA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGxpc3RlbmVyICkge1xuICBpZiAoICFldmVudE5hbWUgfHwgIWxpc3RlbmVyICkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gYWRkIGV2ZW50XG4gIHRoaXMub24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKTtcbiAgLy8gc2V0IG9uY2UgZmxhZ1xuICAvLyBzZXQgb25jZUV2ZW50cyBoYXNoXG4gIGxldCBvbmNlRXZlbnRzID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge307XG4gIC8vIHNldCBvbmNlTGlzdGVuZXJzIG9iamVjdFxuICBsZXQgb25jZUxpc3RlbmVycyA9IG9uY2VFdmVudHNbIGV2ZW50TmFtZSBdID0gb25jZUV2ZW50c1sgZXZlbnROYW1lIF0gfHwge307XG4gIC8vIHNldCBmbGFnXG4gIG9uY2VMaXN0ZW5lcnNbIGxpc3RlbmVyIF0gPSB0cnVlO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8ub2ZmID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIGxldCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzWyBldmVudE5hbWUgXTtcbiAgaWYgKCAhbGlzdGVuZXJzIHx8ICFsaXN0ZW5lcnMubGVuZ3RoICkgcmV0dXJuIHRoaXM7XG5cbiAgbGV0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoIGxpc3RlbmVyICk7XG4gIGlmICggaW5kZXggIT0gLTEgKSB7XG4gICAgbGlzdGVuZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgYXJncyApIHtcbiAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50cyAmJiB0aGlzLl9ldmVudHNbIGV2ZW50TmFtZSBdO1xuICBpZiAoICFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGggKSByZXR1cm4gdGhpcztcblxuICAvLyBjb3B5IG92ZXIgdG8gYXZvaWQgaW50ZXJmZXJlbmNlIGlmIC5vZmYoKSBpbiBsaXN0ZW5lclxuICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoIDAgKTtcbiAgYXJncyA9IGFyZ3MgfHwgW107XG4gIC8vIG9uY2Ugc3R1ZmZcbiAgbGV0IG9uY2VMaXN0ZW5lcnMgPSB0aGlzLl9vbmNlRXZlbnRzICYmIHRoaXMuX29uY2VFdmVudHNbIGV2ZW50TmFtZSBdO1xuXG4gIGZvciAoIGxldCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMgKSB7XG4gICAgbGV0IGlzT25jZSA9IG9uY2VMaXN0ZW5lcnMgJiYgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICBpZiAoIGlzT25jZSApIHtcbiAgICAgIC8vIHJlbW92ZSBsaXN0ZW5lclxuICAgICAgLy8gcmVtb3ZlIGJlZm9yZSB0cmlnZ2VyIHRvIHByZXZlbnQgcmVjdXJzaW9uXG4gICAgICB0aGlzLm9mZiggZXZlbnROYW1lLCBsaXN0ZW5lciApO1xuICAgICAgLy8gdW5zZXQgb25jZSBmbGFnXG4gICAgICBkZWxldGUgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICB9XG4gICAgLy8gdHJpZ2dlciBsaXN0ZW5lclxuICAgIGxpc3RlbmVyLmFwcGx5KCB0aGlzLCBhcmdzICk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLmFsbE9mZiA9IGZ1bmN0aW9uKCkge1xuICBkZWxldGUgdGhpcy5fZXZlbnRzO1xuICBkZWxldGUgdGhpcy5fb25jZUV2ZW50cztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5yZXR1cm4gRXZFbWl0dGVyO1xuXG59ICkgKTtcbiIsIi8vIGFuaW1hdGVcbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSggcmVxdWlyZSgnZml6enktdWktdXRpbHMnKSApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LkZsaWNraXR5ID0gd2luZG93LkZsaWNraXR5IHx8IHt9O1xuICAgIHdpbmRvdy5GbGlja2l0eS5hbmltYXRlUHJvdG90eXBlID0gZmFjdG9yeSggd2luZG93LmZpenp5VUlVdGlscyApO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiBmYWN0b3J5KCB1dGlscyApIHtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gYW5pbWF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5sZXQgcHJvdG8gPSB7fTtcblxucHJvdG8uc3RhcnRBbmltYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgaWYgKCB0aGlzLmlzQW5pbWF0aW5nICkgcmV0dXJuO1xuXG4gIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuICB0aGlzLnJlc3RpbmdGcmFtZXMgPSAwO1xuICB0aGlzLmFuaW1hdGUoKTtcbn07XG5cbnByb3RvLmFuaW1hdGUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5hcHBseURyYWdGb3JjZSgpO1xuICB0aGlzLmFwcGx5U2VsZWN0ZWRBdHRyYWN0aW9uKCk7XG5cbiAgbGV0IHByZXZpb3VzWCA9IHRoaXMueDtcblxuICB0aGlzLmludGVncmF0ZVBoeXNpY3MoKTtcbiAgdGhpcy5wb3NpdGlvblNsaWRlcigpO1xuICB0aGlzLnNldHRsZSggcHJldmlvdXNYICk7XG4gIC8vIGFuaW1hdGUgbmV4dCBmcmFtZVxuICBpZiAoIHRoaXMuaXNBbmltYXRpbmcgKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoICgpID0+IHRoaXMuYW5pbWF0ZSgpICk7XG59O1xuXG5wcm90by5wb3NpdGlvblNsaWRlciA9IGZ1bmN0aW9uKCkge1xuICBsZXQgeCA9IHRoaXMueDtcbiAgLy8gd3JhcCBwb3NpdGlvbiBhcm91bmRcbiAgaWYgKCB0aGlzLmlzV3JhcHBpbmcgKSB7XG4gICAgeCA9IHV0aWxzLm1vZHVsbyggeCwgdGhpcy5zbGlkZWFibGVXaWR0aCApIC0gdGhpcy5zbGlkZWFibGVXaWR0aDtcbiAgICB0aGlzLnNoaWZ0V3JhcENlbGxzKCB4ICk7XG4gIH1cblxuICB0aGlzLnNldFRyYW5zbGF0ZVgoIHgsIHRoaXMuaXNBbmltYXRpbmcgKTtcbiAgdGhpcy5kaXNwYXRjaFNjcm9sbEV2ZW50KCk7XG59O1xuXG5wcm90by5zZXRUcmFuc2xhdGVYID0gZnVuY3Rpb24oIHgsIGlzM2QgKSB7XG4gIHggKz0gdGhpcy5jdXJzb3JQb3NpdGlvbjtcbiAgLy8gcmV2ZXJzZSBpZiByaWdodC10by1sZWZ0IGFuZCB1c2luZyB0cmFuc2Zvcm1cbiAgaWYgKCB0aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQgKSB4ID0gLXg7XG4gIGxldCB0cmFuc2xhdGVYID0gdGhpcy5nZXRQb3NpdGlvblZhbHVlKCB4ICk7XG4gIC8vIHVzZSAzRCB0cmFuc2Zvcm1zIGZvciBoYXJkd2FyZSBhY2NlbGVyYXRpb24gb24gaU9TXG4gIC8vIGJ1dCB1c2UgMkQgd2hlbiBzZXR0bGVkLCBmb3IgYmV0dGVyIGZvbnQtcmVuZGVyaW5nXG4gIHRoaXMuc2xpZGVyLnN0eWxlLnRyYW5zZm9ybSA9IGlzM2QgP1xuICAgIGB0cmFuc2xhdGUzZCgke3RyYW5zbGF0ZVh9LDAsMClgIDogYHRyYW5zbGF0ZVgoJHt0cmFuc2xhdGVYfSlgO1xufTtcblxucHJvdG8uZGlzcGF0Y2hTY3JvbGxFdmVudCA9IGZ1bmN0aW9uKCkge1xuICBsZXQgZmlyc3RTbGlkZSA9IHRoaXMuc2xpZGVzWzBdO1xuICBpZiAoICFmaXJzdFNsaWRlICkgcmV0dXJuO1xuXG4gIGxldCBwb3NpdGlvblggPSAtdGhpcy54IC0gZmlyc3RTbGlkZS50YXJnZXQ7XG4gIGxldCBwcm9ncmVzcyA9IHBvc2l0aW9uWCAvIHRoaXMuc2xpZGVzV2lkdGg7XG4gIHRoaXMuZGlzcGF0Y2hFdmVudCggJ3Njcm9sbCcsIG51bGwsIFsgcHJvZ3Jlc3MsIHBvc2l0aW9uWCBdICk7XG59O1xuXG5wcm90by5wb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5jZWxscy5sZW5ndGggKSByZXR1cm47XG5cbiAgdGhpcy54ID0gLXRoaXMuc2VsZWN0ZWRTbGlkZS50YXJnZXQ7XG4gIHRoaXMudmVsb2NpdHkgPSAwOyAvLyBzdG9wIHdvYmJsZVxuICB0aGlzLnBvc2l0aW9uU2xpZGVyKCk7XG59O1xuXG5wcm90by5nZXRQb3NpdGlvblZhbHVlID0gZnVuY3Rpb24oIHBvc2l0aW9uICkge1xuICBpZiAoIHRoaXMub3B0aW9ucy5wZXJjZW50UG9zaXRpb24gKSB7XG4gICAgLy8gcGVyY2VudCBwb3NpdGlvbiwgcm91bmQgdG8gMiBkaWdpdHMsIGxpa2UgMTIuMzQlXG4gICAgcmV0dXJuICggTWF0aC5yb3VuZCggKCBwb3NpdGlvbiAvIHRoaXMuc2l6ZS5pbm5lcldpZHRoICkgKiAxMDAwMCApICogMC4wMSApICsgJyUnO1xuICB9IGVsc2Uge1xuICAgIC8vIHBpeGVsIHBvc2l0aW9uaW5nXG4gICAgcmV0dXJuIE1hdGgucm91bmQoIHBvc2l0aW9uICkgKyAncHgnO1xuICB9XG59O1xuXG5wcm90by5zZXR0bGUgPSBmdW5jdGlvbiggcHJldmlvdXNYICkge1xuICAvLyBrZWVwIHRyYWNrIG9mIGZyYW1lcyB3aGVyZSB4IGhhc24ndCBtb3ZlZFxuICBsZXQgaXNSZXN0aW5nID0gIXRoaXMuaXNQb2ludGVyRG93biAmJlxuICAgICAgTWF0aC5yb3VuZCggdGhpcy54ICogMTAwICkgPT09IE1hdGgucm91bmQoIHByZXZpb3VzWCAqIDEwMCApO1xuICBpZiAoIGlzUmVzdGluZyApIHRoaXMucmVzdGluZ0ZyYW1lcysrO1xuICAvLyBzdG9wIGFuaW1hdGluZyBpZiByZXN0aW5nIGZvciAzIG9yIG1vcmUgZnJhbWVzXG4gIGlmICggdGhpcy5yZXN0aW5nRnJhbWVzID4gMiApIHtcbiAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgZGVsZXRlIHRoaXMuaXNGcmVlU2Nyb2xsaW5nO1xuICAgIC8vIHJlbmRlciBwb3NpdGlvbiB3aXRoIHRyYW5zbGF0ZVggd2hlbiBzZXR0bGVkXG4gICAgdGhpcy5wb3NpdGlvblNsaWRlcigpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggJ3NldHRsZScsIG51bGwsIFsgdGhpcy5zZWxlY3RlZEluZGV4IF0gKTtcbiAgfVxufTtcblxucHJvdG8uc2hpZnRXcmFwQ2VsbHMgPSBmdW5jdGlvbiggeCApIHtcbiAgLy8gc2hpZnQgYmVmb3JlIGNlbGxzXG4gIGxldCBiZWZvcmVHYXAgPSB0aGlzLmN1cnNvclBvc2l0aW9uICsgeDtcbiAgdGhpcy5fc2hpZnRDZWxscyggdGhpcy5iZWZvcmVTaGlmdENlbGxzLCBiZWZvcmVHYXAsIC0xICk7XG4gIC8vIHNoaWZ0IGFmdGVyIGNlbGxzXG4gIGxldCBhZnRlckdhcCA9IHRoaXMuc2l6ZS5pbm5lcldpZHRoIC0gKCB4ICsgdGhpcy5zbGlkZWFibGVXaWR0aCArIHRoaXMuY3Vyc29yUG9zaXRpb24gKTtcbiAgdGhpcy5fc2hpZnRDZWxscyggdGhpcy5hZnRlclNoaWZ0Q2VsbHMsIGFmdGVyR2FwLCAxICk7XG59O1xuXG5wcm90by5fc2hpZnRDZWxscyA9IGZ1bmN0aW9uKCBjZWxscywgZ2FwLCBzaGlmdCApIHtcbiAgY2VsbHMuZm9yRWFjaCggKCBjZWxsICkgPT4ge1xuICAgIGxldCBjZWxsU2hpZnQgPSBnYXAgPiAwID8gc2hpZnQgOiAwO1xuICAgIHRoaXMuX3dyYXBTaGlmdENlbGwoIGNlbGwsIGNlbGxTaGlmdCApO1xuICAgIGdhcCAtPSBjZWxsLnNpemUub3V0ZXJXaWR0aDtcbiAgfSApO1xufTtcblxucHJvdG8uX3Vuc2hpZnRDZWxscyA9IGZ1bmN0aW9uKCBjZWxscyApIHtcbiAgaWYgKCAhY2VsbHMgfHwgIWNlbGxzLmxlbmd0aCApIHJldHVybjtcblxuICBjZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiB0aGlzLl93cmFwU2hpZnRDZWxsKCBjZWxsLCAwICkgKTtcbn07XG5cbi8vIEBwYXJhbSB7SW50ZWdlcn0gc2hpZnQgLSAwLCAxLCBvciAtMVxucHJvdG8uX3dyYXBTaGlmdENlbGwgPSBmdW5jdGlvbiggY2VsbCwgc2hpZnQgKSB7XG4gIHRoaXMuX3JlbmRlckNlbGxQb3NpdGlvbiggY2VsbCwgY2VsbC54ICsgdGhpcy5zbGlkZWFibGVXaWR0aCAqIHNoaWZ0ICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBwaHlzaWNzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbnByb3RvLmludGVncmF0ZVBoeXNpY3MgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy54ICs9IHRoaXMudmVsb2NpdHk7XG4gIHRoaXMudmVsb2NpdHkgKj0gdGhpcy5nZXRGcmljdGlvbkZhY3RvcigpO1xufTtcblxucHJvdG8uYXBwbHlGb3JjZSA9IGZ1bmN0aW9uKCBmb3JjZSApIHtcbiAgdGhpcy52ZWxvY2l0eSArPSBmb3JjZTtcbn07XG5cbnByb3RvLmdldEZyaWN0aW9uRmFjdG9yID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAxIC0gdGhpcy5vcHRpb25zWyB0aGlzLmlzRnJlZVNjcm9sbGluZyA/ICdmcmVlU2Nyb2xsRnJpY3Rpb24nIDogJ2ZyaWN0aW9uJyBdO1xufTtcblxucHJvdG8uZ2V0UmVzdGluZ1Bvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gIC8vIG15IHRoYW5rcyB0byBTdGV2ZW4gV2l0dGVucywgd2hvIHNpbXBsaWZpZWQgdGhpcyBtYXRoIGdyZWF0bHlcbiAgcmV0dXJuIHRoaXMueCArIHRoaXMudmVsb2NpdHkgLyAoIDEgLSB0aGlzLmdldEZyaWN0aW9uRmFjdG9yKCkgKTtcbn07XG5cbnByb3RvLmFwcGx5RHJhZ0ZvcmNlID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMuaXNEcmFnZ2FibGUgfHwgIXRoaXMuaXNQb2ludGVyRG93biApIHJldHVybjtcblxuICAvLyBjaGFuZ2UgdGhlIHBvc2l0aW9uIHRvIGRyYWcgcG9zaXRpb24gYnkgYXBwbHlpbmcgZm9yY2VcbiAgbGV0IGRyYWdWZWxvY2l0eSA9IHRoaXMuZHJhZ1ggLSB0aGlzLng7XG4gIGxldCBkcmFnRm9yY2UgPSBkcmFnVmVsb2NpdHkgLSB0aGlzLnZlbG9jaXR5O1xuICB0aGlzLmFwcGx5Rm9yY2UoIGRyYWdGb3JjZSApO1xufTtcblxucHJvdG8uYXBwbHlTZWxlY3RlZEF0dHJhY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgLy8gZG8gbm90IGF0dHJhY3QgaWYgcG9pbnRlciBkb3duIG9yIG5vIHNsaWRlc1xuICBsZXQgZHJhZ0Rvd24gPSB0aGlzLmlzRHJhZ2dhYmxlICYmIHRoaXMuaXNQb2ludGVyRG93bjtcbiAgaWYgKCBkcmFnRG93biB8fCB0aGlzLmlzRnJlZVNjcm9sbGluZyB8fCAhdGhpcy5zbGlkZXMubGVuZ3RoICkgcmV0dXJuO1xuXG4gIGxldCBkaXN0YW5jZSA9IHRoaXMuc2VsZWN0ZWRTbGlkZS50YXJnZXQgKiAtMSAtIHRoaXMueDtcbiAgbGV0IGZvcmNlID0gZGlzdGFuY2UgKiB0aGlzLm9wdGlvbnMuc2VsZWN0ZWRBdHRyYWN0aW9uO1xuICB0aGlzLmFwcGx5Rm9yY2UoIGZvcmNlICk7XG59O1xuXG5yZXR1cm4gcHJvdG87XG5cbn0gKSApO1xuIiwiLyoqXG4gKiBGaXp6eSBVSSB1dGlscyB2My4wLjBcbiAqIE1JVCBsaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCBnbG9iYWwgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIGdsb2JhbC5maXp6eVVJVXRpbHMgPSBmYWN0b3J5KCBnbG9iYWwgKTtcbiAgfVxuXG59KCB0aGlzLCBmdW5jdGlvbiBmYWN0b3J5KCBnbG9iYWwgKSB7XG5cbmxldCB1dGlscyA9IHt9O1xuXG4vLyAtLS0tLSBleHRlbmQgLS0tLS0gLy9cblxuLy8gZXh0ZW5kcyBvYmplY3RzXG51dGlscy5leHRlbmQgPSBmdW5jdGlvbiggYSwgYiApIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oIGEsIGIgKTtcbn07XG5cbi8vIC0tLS0tIG1vZHVsbyAtLS0tLSAvL1xuXG51dGlscy5tb2R1bG8gPSBmdW5jdGlvbiggbnVtLCBkaXYgKSB7XG4gIHJldHVybiAoICggbnVtICUgZGl2ICkgKyBkaXYgKSAlIGRpdjtcbn07XG5cbi8vIC0tLS0tIG1ha2VBcnJheSAtLS0tLSAvL1xuXG4vLyB0dXJuIGVsZW1lbnQgb3Igbm9kZUxpc3QgaW50byBhbiBhcnJheVxudXRpbHMubWFrZUFycmF5ID0gZnVuY3Rpb24oIG9iaiApIHtcbiAgLy8gdXNlIG9iamVjdCBpZiBhbHJlYWR5IGFuIGFycmF5XG4gIGlmICggQXJyYXkuaXNBcnJheSggb2JqICkgKSByZXR1cm4gb2JqO1xuXG4gIC8vIHJldHVybiBlbXB0eSBhcnJheSBpZiB1bmRlZmluZWQgb3IgbnVsbC4gIzZcbiAgaWYgKCBvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQgKSByZXR1cm4gW107XG5cbiAgbGV0IGlzQXJyYXlMaWtlID0gdHlwZW9mIG9iaiA9PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqLmxlbmd0aCA9PSAnbnVtYmVyJztcbiAgLy8gY29udmVydCBub2RlTGlzdCB0byBhcnJheVxuICBpZiAoIGlzQXJyYXlMaWtlICkgcmV0dXJuIFsgLi4ub2JqIF07XG5cbiAgLy8gYXJyYXkgb2Ygc2luZ2xlIGluZGV4XG4gIHJldHVybiBbIG9iaiBdO1xufTtcblxuLy8gLS0tLS0gcmVtb3ZlRnJvbSAtLS0tLSAvL1xuXG51dGlscy5yZW1vdmVGcm9tID0gZnVuY3Rpb24oIGFyeSwgb2JqICkge1xuICBsZXQgaW5kZXggPSBhcnkuaW5kZXhPZiggb2JqICk7XG4gIGlmICggaW5kZXggIT0gLTEgKSB7XG4gICAgYXJ5LnNwbGljZSggaW5kZXgsIDEgKTtcbiAgfVxufTtcblxuLy8gLS0tLS0gZ2V0UGFyZW50IC0tLS0tIC8vXG5cbnV0aWxzLmdldFBhcmVudCA9IGZ1bmN0aW9uKCBlbGVtLCBzZWxlY3RvciApIHtcbiAgd2hpbGUgKCBlbGVtLnBhcmVudE5vZGUgJiYgZWxlbSAhPSBkb2N1bWVudC5ib2R5ICkge1xuICAgIGVsZW0gPSBlbGVtLnBhcmVudE5vZGU7XG4gICAgaWYgKCBlbGVtLm1hdGNoZXMoIHNlbGVjdG9yICkgKSByZXR1cm4gZWxlbTtcbiAgfVxufTtcblxuLy8gLS0tLS0gZ2V0UXVlcnlFbGVtZW50IC0tLS0tIC8vXG5cbi8vIHVzZSBlbGVtZW50IGFzIHNlbGVjdG9yIHN0cmluZ1xudXRpbHMuZ2V0UXVlcnlFbGVtZW50ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gIGlmICggdHlwZW9mIGVsZW0gPT0gJ3N0cmluZycgKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIGVsZW0gKTtcbiAgfVxuICByZXR1cm4gZWxlbTtcbn07XG5cbi8vIC0tLS0tIGhhbmRsZUV2ZW50IC0tLS0tIC8vXG5cbi8vIGVuYWJsZSAub250eXBlIHRvIHRyaWdnZXIgZnJvbSAuYWRkRXZlbnRMaXN0ZW5lciggZWxlbSwgJ3R5cGUnIClcbnV0aWxzLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICBsZXQgbWV0aG9kID0gJ29uJyArIGV2ZW50LnR5cGU7XG4gIGlmICggdGhpc1sgbWV0aG9kIF0gKSB7XG4gICAgdGhpc1sgbWV0aG9kIF0oIGV2ZW50ICk7XG4gIH1cbn07XG5cbi8vIC0tLS0tIGZpbHRlckZpbmRFbGVtZW50cyAtLS0tLSAvL1xuXG51dGlscy5maWx0ZXJGaW5kRWxlbWVudHMgPSBmdW5jdGlvbiggZWxlbXMsIHNlbGVjdG9yICkge1xuICAvLyBtYWtlIGFycmF5IG9mIGVsZW1zXG4gIGVsZW1zID0gdXRpbHMubWFrZUFycmF5KCBlbGVtcyApO1xuXG4gIHJldHVybiBlbGVtc1xuICAgIC8vIGNoZWNrIHRoYXQgZWxlbSBpcyBhbiBhY3R1YWwgZWxlbWVudFxuICAgIC5maWx0ZXIoICggZWxlbSApID0+IGVsZW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCApXG4gICAgLnJlZHVjZSggKCBmZkVsZW1zLCBlbGVtICkgPT4ge1xuICAgICAgLy8gYWRkIGVsZW0gaWYgbm8gc2VsZWN0b3JcbiAgICAgIGlmICggIXNlbGVjdG9yICkge1xuICAgICAgICBmZkVsZW1zLnB1c2goIGVsZW0gKTtcbiAgICAgICAgcmV0dXJuIGZmRWxlbXM7XG4gICAgICB9XG4gICAgICAvLyBmaWx0ZXIgJiBmaW5kIGl0ZW1zIGlmIHdlIGhhdmUgYSBzZWxlY3RvclxuICAgICAgLy8gZmlsdGVyXG4gICAgICBpZiAoIGVsZW0ubWF0Y2hlcyggc2VsZWN0b3IgKSApIHtcbiAgICAgICAgZmZFbGVtcy5wdXNoKCBlbGVtICk7XG4gICAgICB9XG4gICAgICAvLyBmaW5kIGNoaWxkcmVuXG4gICAgICBsZXQgY2hpbGRFbGVtcyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCggc2VsZWN0b3IgKTtcbiAgICAgIC8vIGNvbmNhdCBjaGlsZEVsZW1zIHRvIGZpbHRlckZvdW5kIGFycmF5XG4gICAgICBmZkVsZW1zID0gZmZFbGVtcy5jb25jYXQoIC4uLmNoaWxkRWxlbXMgKTtcbiAgICAgIHJldHVybiBmZkVsZW1zO1xuICAgIH0sIFtdICk7XG59O1xuXG4vLyAtLS0tLSBkZWJvdW5jZU1ldGhvZCAtLS0tLSAvL1xuXG51dGlscy5kZWJvdW5jZU1ldGhvZCA9IGZ1bmN0aW9uKCBfY2xhc3MsIG1ldGhvZE5hbWUsIHRocmVzaG9sZCApIHtcbiAgdGhyZXNob2xkID0gdGhyZXNob2xkIHx8IDEwMDtcbiAgLy8gb3JpZ2luYWwgbWV0aG9kXG4gIGxldCBtZXRob2QgPSBfY2xhc3MucHJvdG90eXBlWyBtZXRob2ROYW1lIF07XG4gIGxldCB0aW1lb3V0TmFtZSA9IG1ldGhvZE5hbWUgKyAnVGltZW91dCc7XG5cbiAgX2NsYXNzLnByb3RvdHlwZVsgbWV0aG9kTmFtZSBdID0gZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJUaW1lb3V0KCB0aGlzWyB0aW1lb3V0TmFtZSBdICk7XG5cbiAgICBsZXQgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aGlzWyB0aW1lb3V0TmFtZSBdID0gc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgbWV0aG9kLmFwcGx5KCB0aGlzLCBhcmdzICk7XG4gICAgICBkZWxldGUgdGhpc1sgdGltZW91dE5hbWUgXTtcbiAgICB9LCB0aHJlc2hvbGQgKTtcbiAgfTtcbn07XG5cbi8vIC0tLS0tIGRvY1JlYWR5IC0tLS0tIC8vXG5cbnV0aWxzLmRvY1JlYWR5ID0gZnVuY3Rpb24oIG9uRG9jUmVhZHkgKSB7XG4gIGxldCByZWFkeVN0YXRlID0gZG9jdW1lbnQucmVhZHlTdGF0ZTtcbiAgaWYgKCByZWFkeVN0YXRlID09ICdjb21wbGV0ZScgfHwgcmVhZHlTdGF0ZSA9PSAnaW50ZXJhY3RpdmUnICkge1xuICAgIC8vIGRvIGFzeW5jIHRvIGFsbG93IGZvciBvdGhlciBzY3JpcHRzIHRvIHJ1bi4gbWV0YWZpenp5L2ZsaWNraXR5IzQ0MVxuICAgIHNldFRpbWVvdXQoIG9uRG9jUmVhZHkgKTtcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsIG9uRG9jUmVhZHkgKTtcbiAgfVxufTtcblxuLy8gLS0tLS0gaHRtbEluaXQgLS0tLS0gLy9cblxuLy8gaHR0cDovL2JpdC5seS8zb1lMdXNjXG51dGlscy50b0Rhc2hlZCA9IGZ1bmN0aW9uKCBzdHIgKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSggLyguKShbQS1aXSkvZywgZnVuY3Rpb24oIG1hdGNoLCAkMSwgJDIgKSB7XG4gICAgcmV0dXJuICQxICsgJy0nICsgJDI7XG4gIH0gKS50b0xvd2VyQ2FzZSgpO1xufTtcblxubGV0IGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZTtcblxuLy8gYWxsb3cgdXNlciB0byBpbml0aWFsaXplIGNsYXNzZXMgdmlhIFtkYXRhLW5hbWVzcGFjZV0gb3IgLmpzLW5hbWVzcGFjZSBjbGFzc1xuLy8gaHRtbEluaXQoIFdpZGdldCwgJ3dpZGdldE5hbWUnIClcbi8vIG9wdGlvbnMgYXJlIHBhcnNlZCBmcm9tIGRhdGEtbmFtZXNwYWNlLW9wdGlvbnNcbnV0aWxzLmh0bWxJbml0ID0gZnVuY3Rpb24oIFdpZGdldENsYXNzLCBuYW1lc3BhY2UgKSB7XG4gIHV0aWxzLmRvY1JlYWR5KCBmdW5jdGlvbigpIHtcbiAgICBsZXQgZGFzaGVkTmFtZXNwYWNlID0gdXRpbHMudG9EYXNoZWQoIG5hbWVzcGFjZSApO1xuICAgIGxldCBkYXRhQXR0ciA9ICdkYXRhLScgKyBkYXNoZWROYW1lc3BhY2U7XG4gICAgbGV0IGRhdGFBdHRyRWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBgWyR7ZGF0YUF0dHJ9XWAgKTtcbiAgICBsZXQgalF1ZXJ5ID0gZ2xvYmFsLmpRdWVyeTtcblxuICAgIFsgLi4uZGF0YUF0dHJFbGVtcyBdLmZvckVhY2goICggZWxlbSApID0+IHtcbiAgICAgIGxldCBhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoIGRhdGFBdHRyICk7XG4gICAgICBsZXQgb3B0aW9ucztcbiAgICAgIHRyeSB7XG4gICAgICAgIG9wdGlvbnMgPSBhdHRyICYmIEpTT04ucGFyc2UoIGF0dHIgKTtcbiAgICAgIH0gY2F0Y2ggKCBlcnJvciApIHtcbiAgICAgICAgLy8gbG9nIGVycm9yLCBkbyBub3QgaW5pdGlhbGl6ZVxuICAgICAgICBpZiAoIGNvbnNvbGUgKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvciggYEVycm9yIHBhcnNpbmcgJHtkYXRhQXR0cn0gb24gJHtlbGVtLmNsYXNzTmFtZX06ICR7ZXJyb3J9YCApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGluaXRpYWxpemVcbiAgICAgIGxldCBpbnN0YW5jZSA9IG5ldyBXaWRnZXRDbGFzcyggZWxlbSwgb3B0aW9ucyApO1xuICAgICAgLy8gbWFrZSBhdmFpbGFibGUgdmlhICQoKS5kYXRhKCduYW1lc3BhY2UnKVxuICAgICAgaWYgKCBqUXVlcnkgKSB7XG4gICAgICAgIGpRdWVyeS5kYXRhKCBlbGVtLCBuYW1lc3BhY2UsIGluc3RhbmNlICk7XG4gICAgICB9XG4gICAgfSApO1xuXG4gIH0gKTtcbn07XG5cbi8vIC0tLS0tICAtLS0tLSAvL1xuXG5yZXR1cm4gdXRpbHM7XG5cbn0gKSApO1xuIiwiLy8gRmxpY2tpdHkgbWFpblxuLyogZXNsaW50LWRpc2FibGUgbWF4LXBhcmFtcyAqL1xuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgICB3aW5kb3csXG4gICAgICAgIHJlcXVpcmUoJ2V2LWVtaXR0ZXInKSxcbiAgICAgICAgcmVxdWlyZSgnZ2V0LXNpemUnKSxcbiAgICAgICAgcmVxdWlyZSgnZml6enktdWktdXRpbHMnKSxcbiAgICAgICAgcmVxdWlyZSgnLi9jZWxsJyksXG4gICAgICAgIHJlcXVpcmUoJy4vc2xpZGUnKSxcbiAgICAgICAgcmVxdWlyZSgnLi9hbmltYXRlJyksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIGxldCBfRmxpY2tpdHkgPSB3aW5kb3cuRmxpY2tpdHk7XG5cbiAgICB3aW5kb3cuRmxpY2tpdHkgPSBmYWN0b3J5KFxuICAgICAgICB3aW5kb3csXG4gICAgICAgIHdpbmRvdy5FdkVtaXR0ZXIsXG4gICAgICAgIHdpbmRvdy5nZXRTaXplLFxuICAgICAgICB3aW5kb3cuZml6enlVSVV0aWxzLFxuICAgICAgICBfRmxpY2tpdHkuQ2VsbCxcbiAgICAgICAgX0ZsaWNraXR5LlNsaWRlLFxuICAgICAgICBfRmxpY2tpdHkuYW5pbWF0ZVByb3RvdHlwZSxcbiAgICApO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLFxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoIHdpbmRvdywgRXZFbWl0dGVyLCBnZXRTaXplLCB1dGlscywgQ2VsbCwgU2xpZGUsIGFuaW1hdGVQcm90b3R5cGUgKSB7XG4vKiBlc2xpbnQtZW5hYmxlIG1heC1wYXJhbXMgKi9cblxuLy8gdmFyc1xuY29uc3QgeyBnZXRDb21wdXRlZFN0eWxlLCBjb25zb2xlIH0gPSB3aW5kb3c7XG5sZXQgeyBqUXVlcnkgfSA9IHdpbmRvdztcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRmxpY2tpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLy8gZ2xvYmFsbHkgdW5pcXVlIGlkZW50aWZpZXJzXG5sZXQgR1VJRCA9IDA7XG4vLyBpbnRlcm5hbCBzdG9yZSBvZiBhbGwgRmxpY2tpdHkgaW50YW5jZXNcbmxldCBpbnN0YW5jZXMgPSB7fTtcblxuZnVuY3Rpb24gRmxpY2tpdHkoIGVsZW1lbnQsIG9wdGlvbnMgKSB7XG4gIGxldCBxdWVyeUVsZW1lbnQgPSB1dGlscy5nZXRRdWVyeUVsZW1lbnQoIGVsZW1lbnQgKTtcbiAgaWYgKCAhcXVlcnlFbGVtZW50ICkge1xuICAgIGlmICggY29uc29sZSApIGNvbnNvbGUuZXJyb3IoYEJhZCBlbGVtZW50IGZvciBGbGlja2l0eTogJHtxdWVyeUVsZW1lbnQgfHwgZWxlbWVudH1gKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5lbGVtZW50ID0gcXVlcnlFbGVtZW50O1xuICAvLyBkbyBub3QgaW5pdGlhbGl6ZSB0d2ljZSBvbiBzYW1lIGVsZW1lbnRcbiAgaWYgKCB0aGlzLmVsZW1lbnQuZmxpY2tpdHlHVUlEICkge1xuICAgIGxldCBpbnN0YW5jZSA9IGluc3RhbmNlc1sgdGhpcy5lbGVtZW50LmZsaWNraXR5R1VJRCBdO1xuICAgIGlmICggaW5zdGFuY2UgKSBpbnN0YW5jZS5vcHRpb24oIG9wdGlvbnMgKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH1cblxuICAvLyBhZGQgalF1ZXJ5XG4gIGlmICggalF1ZXJ5ICkge1xuICAgIHRoaXMuJGVsZW1lbnQgPSBqUXVlcnkoIHRoaXMuZWxlbWVudCApO1xuICB9XG4gIC8vIG9wdGlvbnNcbiAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzIH07XG4gIHRoaXMub3B0aW9uKCBvcHRpb25zICk7XG5cbiAgLy8ga2ljayB0aGluZ3Mgb2ZmXG4gIHRoaXMuX2NyZWF0ZSgpO1xufVxuXG5GbGlja2l0eS5kZWZhdWx0cyA9IHtcbiAgYWNjZXNzaWJpbGl0eTogdHJ1ZSxcbiAgLy8gYWRhcHRpdmVIZWlnaHQ6IGZhbHNlLFxuICBjZWxsQWxpZ246ICdjZW50ZXInLFxuICAvLyBjZWxsU2VsZWN0b3I6IHVuZGVmaW5lZCxcbiAgLy8gY29udGFpbjogZmFsc2UsXG4gIGZyZWVTY3JvbGxGcmljdGlvbjogMC4wNzUsIC8vIGZyaWN0aW9uIHdoZW4gZnJlZS1zY3JvbGxpbmdcbiAgZnJpY3Rpb246IDAuMjgsIC8vIGZyaWN0aW9uIHdoZW4gc2VsZWN0aW5nXG4gIG5hbWVzcGFjZUpRdWVyeUV2ZW50czogdHJ1ZSxcbiAgLy8gaW5pdGlhbEluZGV4OiAwLFxuICBwZXJjZW50UG9zaXRpb246IHRydWUsXG4gIHJlc2l6ZTogdHJ1ZSxcbiAgc2VsZWN0ZWRBdHRyYWN0aW9uOiAwLjAyNSxcbiAgc2V0R2FsbGVyeVNpemU6IHRydWUsXG4gIC8vIHdhdGNoQ1NTOiBmYWxzZSxcbiAgLy8gd3JhcEFyb3VuZDogZmFsc2Vcbn07XG5cbi8vIGhhc2ggb2YgbWV0aG9kcyB0cmlnZ2VyZWQgb24gX2NyZWF0ZSgpXG5GbGlja2l0eS5jcmVhdGUgPSB7fTtcblxubGV0IHByb3RvID0gRmxpY2tpdHkucHJvdG90eXBlO1xuLy8gaW5oZXJpdCBFdmVudEVtaXR0ZXJcbk9iamVjdC5hc3NpZ24oIHByb3RvLCBFdkVtaXR0ZXIucHJvdG90eXBlICk7XG5cbnByb3RvLl9jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgbGV0IHsgcmVzaXplLCB3YXRjaENTUywgcmlnaHRUb0xlZnQgfSA9IHRoaXMub3B0aW9ucztcbiAgLy8gYWRkIGlkIGZvciBGbGlja2l0eS5kYXRhXG4gIGxldCBpZCA9IHRoaXMuZ3VpZCA9ICsrR1VJRDtcbiAgdGhpcy5lbGVtZW50LmZsaWNraXR5R1VJRCA9IGlkOyAvLyBleHBhbmRvXG4gIGluc3RhbmNlc1sgaWQgXSA9IHRoaXM7IC8vIGFzc29jaWF0ZSB2aWEgaWRcbiAgLy8gaW5pdGlhbCBwcm9wZXJ0aWVzXG4gIHRoaXMuc2VsZWN0ZWRJbmRleCA9IDA7XG4gIC8vIGhvdyBtYW55IGZyYW1lcyBzbGlkZXIgaGFzIGJlZW4gaW4gc2FtZSBwb3NpdGlvblxuICB0aGlzLnJlc3RpbmdGcmFtZXMgPSAwO1xuICAvLyBpbml0aWFsIHBoeXNpY3MgcHJvcGVydGllc1xuICB0aGlzLnggPSAwO1xuICB0aGlzLnZlbG9jaXR5ID0gMDtcbiAgdGhpcy5iZWdpbk1hcmdpbiA9IHJpZ2h0VG9MZWZ0ID8gJ21hcmdpblJpZ2h0JyA6ICdtYXJnaW5MZWZ0JztcbiAgdGhpcy5lbmRNYXJnaW4gPSByaWdodFRvTGVmdCA/ICdtYXJnaW5MZWZ0JyA6ICdtYXJnaW5SaWdodCc7XG4gIC8vIGNyZWF0ZSB2aWV3cG9ydCAmIHNsaWRlclxuICB0aGlzLnZpZXdwb3J0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRoaXMudmlld3BvcnQuY2xhc3NOYW1lID0gJ2ZsaWNraXR5LXZpZXdwb3J0JztcbiAgdGhpcy5fY3JlYXRlU2xpZGVyKCk7XG4gIC8vIHVzZWQgZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgdGhpcy5mb2N1c2FibGVFbGVtcyA9IFsgdGhpcy5lbGVtZW50IF07XG5cbiAgaWYgKCByZXNpemUgfHwgd2F0Y2hDU1MgKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCB0aGlzICk7XG4gIH1cblxuICAvLyBhZGQgbGlzdGVuZXJzIGZyb20gb24gb3B0aW9uXG4gIGZvciAoIGxldCBldmVudE5hbWUgaW4gdGhpcy5vcHRpb25zLm9uICkge1xuICAgIGxldCBsaXN0ZW5lciA9IHRoaXMub3B0aW9ucy5vblsgZXZlbnROYW1lIF07XG4gICAgdGhpcy5vbiggZXZlbnROYW1lLCBsaXN0ZW5lciApO1xuICB9XG5cbiAgZm9yICggbGV0IG1ldGhvZCBpbiBGbGlja2l0eS5jcmVhdGUgKSB7XG4gICAgRmxpY2tpdHkuY3JlYXRlWyBtZXRob2QgXS5jYWxsKCB0aGlzICk7XG4gIH1cblxuICBpZiAoIHdhdGNoQ1NTICkge1xuICAgIHRoaXMud2F0Y2hDU1MoKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmFjdGl2YXRlKCk7XG4gIH1cbn07XG5cbi8qKlxuICogc2V0IG9wdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBleHRlbmRcbiAqL1xucHJvdG8ub3B0aW9uID0gZnVuY3Rpb24oIG9wdHMgKSB7XG4gIE9iamVjdC5hc3NpZ24oIHRoaXMub3B0aW9ucywgb3B0cyApO1xufTtcblxucHJvdG8uYWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCB0aGlzLmlzQWN0aXZlICkgcmV0dXJuO1xuXG4gIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZmxpY2tpdHktZW5hYmxlZCcpO1xuICBpZiAoIHRoaXMub3B0aW9ucy5yaWdodFRvTGVmdCApIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZmxpY2tpdHktcnRsJyk7XG4gIH1cblxuICB0aGlzLmdldFNpemUoKTtcbiAgLy8gbW92ZSBpbml0aWFsIGNlbGwgZWxlbWVudHMgc28gdGhleSBjYW4gYmUgbG9hZGVkIGFzIGNlbGxzXG4gIGxldCBjZWxsRWxlbXMgPSB0aGlzLl9maWx0ZXJGaW5kQ2VsbEVsZW1lbnRzKCB0aGlzLmVsZW1lbnQuY2hpbGRyZW4gKTtcbiAgdGhpcy5zbGlkZXIuYXBwZW5kKCAuLi5jZWxsRWxlbXMgKTtcbiAgdGhpcy52aWV3cG9ydC5hcHBlbmQoIHRoaXMuc2xpZGVyICk7XG4gIHRoaXMuZWxlbWVudC5hcHBlbmQoIHRoaXMudmlld3BvcnQgKTtcbiAgLy8gZ2V0IGNlbGxzIGZyb20gY2hpbGRyZW5cbiAgdGhpcy5yZWxvYWRDZWxscygpO1xuXG4gIGlmICggdGhpcy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgKSB7XG4gICAgLy8gYWxsb3cgZWxlbWVudCB0byBmb2N1c2FibGVcbiAgICB0aGlzLmVsZW1lbnQudGFiSW5kZXggPSAwO1xuICAgIC8vIGxpc3RlbiBmb3Iga2V5IHByZXNzZXNcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCB0aGlzICk7XG4gIH1cblxuICB0aGlzLmVtaXRFdmVudCgnYWN0aXZhdGUnKTtcbiAgdGhpcy5zZWxlY3RJbml0aWFsSW5kZXgoKTtcbiAgLy8gZmxhZyBmb3IgaW5pdGlhbCBhY3RpdmF0aW9uLCBmb3IgdXNpbmcgaW5pdGlhbEluZGV4XG4gIHRoaXMuaXNJbml0QWN0aXZhdGVkID0gdHJ1ZTtcbiAgLy8gcmVhZHkgZXZlbnQuICM0OTNcbiAgdGhpcy5kaXNwYXRjaEV2ZW50KCdyZWFkeScpO1xufTtcblxuLy8gc2xpZGVyIHBvc2l0aW9ucyB0aGUgY2VsbHNcbnByb3RvLl9jcmVhdGVTbGlkZXIgPSBmdW5jdGlvbigpIHtcbiAgLy8gc2xpZGVyIGVsZW1lbnQgZG9lcyBhbGwgdGhlIHBvc2l0aW9uaW5nXG4gIGxldCBzbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgc2xpZGVyLmNsYXNzTmFtZSA9ICdmbGlja2l0eS1zbGlkZXInO1xuICB0aGlzLnNsaWRlciA9IHNsaWRlcjtcbn07XG5cbnByb3RvLl9maWx0ZXJGaW5kQ2VsbEVsZW1lbnRzID0gZnVuY3Rpb24oIGVsZW1zICkge1xuICByZXR1cm4gdXRpbHMuZmlsdGVyRmluZEVsZW1lbnRzKCBlbGVtcywgdGhpcy5vcHRpb25zLmNlbGxTZWxlY3RvciApO1xufTtcblxuLy8gZ29lcyB0aHJvdWdoIGFsbCBjaGlsZHJlblxucHJvdG8ucmVsb2FkQ2VsbHMgPSBmdW5jdGlvbigpIHtcbiAgLy8gY29sbGVjdGlvbiBvZiBpdGVtIGVsZW1lbnRzXG4gIHRoaXMuY2VsbHMgPSB0aGlzLl9tYWtlQ2VsbHMoIHRoaXMuc2xpZGVyLmNoaWxkcmVuICk7XG4gIHRoaXMucG9zaXRpb25DZWxscygpO1xuICB0aGlzLl91cGRhdGVXcmFwU2hpZnRDZWxscygpO1xuICB0aGlzLnNldEdhbGxlcnlTaXplKCk7XG59O1xuXG4vKipcbiAqIHR1cm4gZWxlbWVudHMgaW50byBGbGlja2l0eS5DZWxsc1xuICogQHBhcmFtIHtbQXJyYXksIE5vZGVMaXN0LCBIVE1MRWxlbWVudF19IGVsZW1zIC0gZWxlbWVudHMgdG8gbWFrZSBpbnRvIGNlbGxzXG4gKiBAcmV0dXJucyB7QXJyYXl9IGl0ZW1zIC0gY29sbGVjdGlvbiBvZiBuZXcgRmxpY2tpdHkgQ2VsbHNcbiAqL1xucHJvdG8uX21ha2VDZWxscyA9IGZ1bmN0aW9uKCBlbGVtcyApIHtcbiAgbGV0IGNlbGxFbGVtcyA9IHRoaXMuX2ZpbHRlckZpbmRDZWxsRWxlbWVudHMoIGVsZW1zICk7XG5cbiAgLy8gY3JlYXRlIG5ldyBDZWxscyBmb3IgY29sbGVjdGlvblxuICByZXR1cm4gY2VsbEVsZW1zLm1hcCggKCBjZWxsRWxlbSApID0+IG5ldyBDZWxsKCBjZWxsRWxlbSApICk7XG59O1xuXG5wcm90by5nZXRMYXN0Q2VsbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5jZWxsc1sgdGhpcy5jZWxscy5sZW5ndGggLSAxIF07XG59O1xuXG5wcm90by5nZXRMYXN0U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc2xpZGVzWyB0aGlzLnNsaWRlcy5sZW5ndGggLSAxIF07XG59O1xuXG4vLyBwb3NpdGlvbnMgYWxsIGNlbGxzXG5wcm90by5wb3NpdGlvbkNlbGxzID0gZnVuY3Rpb24oKSB7XG4gIC8vIHNpemUgYWxsIGNlbGxzXG4gIHRoaXMuX3NpemVDZWxscyggdGhpcy5jZWxscyApO1xuICAvLyBwb3NpdGlvbiBhbGwgY2VsbHNcbiAgdGhpcy5fcG9zaXRpb25DZWxscyggMCApO1xufTtcblxuLyoqXG4gKiBwb3NpdGlvbiBjZXJ0YWluIGNlbGxzXG4gKiBAcGFyYW0ge0ludGVnZXJ9IGluZGV4IC0gd2hpY2ggY2VsbCB0byBzdGFydCB3aXRoXG4gKi9cbnByb3RvLl9wb3NpdGlvbkNlbGxzID0gZnVuY3Rpb24oIGluZGV4ICkge1xuICBpbmRleCA9IGluZGV4IHx8IDA7XG4gIC8vIGFsc28gbWVhc3VyZSBtYXhDZWxsSGVpZ2h0XG4gIC8vIHN0YXJ0IDAgaWYgcG9zaXRpb25pbmcgYWxsIGNlbGxzXG4gIHRoaXMubWF4Q2VsbEhlaWdodCA9IGluZGV4ID8gdGhpcy5tYXhDZWxsSGVpZ2h0IHx8IDAgOiAwO1xuICBsZXQgY2VsbFggPSAwO1xuICAvLyBnZXQgY2VsbFhcbiAgaWYgKCBpbmRleCA+IDAgKSB7XG4gICAgbGV0IHN0YXJ0Q2VsbCA9IHRoaXMuY2VsbHNbIGluZGV4IC0gMSBdO1xuICAgIGNlbGxYID0gc3RhcnRDZWxsLnggKyBzdGFydENlbGwuc2l6ZS5vdXRlcldpZHRoO1xuICB9XG5cbiAgdGhpcy5jZWxscy5zbGljZSggaW5kZXggKS5mb3JFYWNoKCAoIGNlbGwgKSA9PiB7XG4gICAgY2VsbC54ID0gY2VsbFg7XG4gICAgdGhpcy5fcmVuZGVyQ2VsbFBvc2l0aW9uKCBjZWxsLCBjZWxsWCApO1xuICAgIGNlbGxYICs9IGNlbGwuc2l6ZS5vdXRlcldpZHRoO1xuICAgIHRoaXMubWF4Q2VsbEhlaWdodCA9IE1hdGgubWF4KCBjZWxsLnNpemUub3V0ZXJIZWlnaHQsIHRoaXMubWF4Q2VsbEhlaWdodCApO1xuICB9ICk7XG4gIC8vIGtlZXAgdHJhY2sgb2YgY2VsbFggZm9yIHdyYXAtYXJvdW5kXG4gIHRoaXMuc2xpZGVhYmxlV2lkdGggPSBjZWxsWDtcbiAgLy8gc2xpZGVzXG4gIHRoaXMudXBkYXRlU2xpZGVzKCk7XG4gIC8vIGNvbnRhaW4gc2xpZGVzIHRhcmdldFxuICB0aGlzLl9jb250YWluU2xpZGVzKCk7XG4gIC8vIHVwZGF0ZSBzbGlkZXNXaWR0aFxuICB0aGlzLnNsaWRlc1dpZHRoID0gdGhpcy5jZWxscy5sZW5ndGggP1xuICAgIHRoaXMuZ2V0TGFzdFNsaWRlKCkudGFyZ2V0IC0gdGhpcy5zbGlkZXNbMF0udGFyZ2V0IDogMDtcbn07XG5cbnByb3RvLl9yZW5kZXJDZWxsUG9zaXRpb24gPSBmdW5jdGlvbiggY2VsbCwgeCApIHtcbiAgLy8gcmVuZGVyIHBvc2l0aW9uIG9mIGNlbGwgd2l0aCBpbiBzbGlkZXJcbiAgbGV0IHNpZGVPZmZzZXQgPSB0aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQgPyAtMSA6IDE7XG4gIGxldCByZW5kZXJYID0geCAqIHNpZGVPZmZzZXQ7XG4gIGlmICggdGhpcy5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiApIHJlbmRlclggKj0gdGhpcy5zaXplLmlubmVyV2lkdGggLyBjZWxsLnNpemUud2lkdGg7XG4gIGxldCBwb3NpdGlvblZhbHVlID0gdGhpcy5nZXRQb3NpdGlvblZhbHVlKCByZW5kZXJYICk7XG4gIGNlbGwuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCggJHtwb3NpdGlvblZhbHVlfSApYDtcbn07XG5cbi8qKlxuICogY2VsbC5nZXRTaXplKCkgb24gbXVsdGlwbGUgY2VsbHNcbiAqIEBwYXJhbSB7QXJyYXl9IGNlbGxzIC0gY2VsbHMgdG8gc2l6ZVxuICovXG5wcm90by5fc2l6ZUNlbGxzID0gZnVuY3Rpb24oIGNlbGxzICkge1xuICBjZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiBjZWxsLmdldFNpemUoKSApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbnByb3RvLnVwZGF0ZVNsaWRlcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNsaWRlcyA9IFtdO1xuICBpZiAoICF0aGlzLmNlbGxzLmxlbmd0aCApIHJldHVybjtcblxuICBsZXQgeyBiZWdpbk1hcmdpbiwgZW5kTWFyZ2luIH0gPSB0aGlzO1xuICBsZXQgc2xpZGUgPSBuZXcgU2xpZGUoIGJlZ2luTWFyZ2luLCBlbmRNYXJnaW4sIHRoaXMuY2VsbEFsaWduICk7XG4gIHRoaXMuc2xpZGVzLnB1c2goIHNsaWRlICk7XG5cbiAgbGV0IGNhbkNlbGxGaXQgPSB0aGlzLl9nZXRDYW5DZWxsRml0KCk7XG5cbiAgdGhpcy5jZWxscy5mb3JFYWNoKCAoIGNlbGwsIGkgKSA9PiB7XG4gICAgLy8ganVzdCBhZGQgY2VsbCBpZiBmaXJzdCBjZWxsIGluIHNsaWRlXG4gICAgaWYgKCAhc2xpZGUuY2VsbHMubGVuZ3RoICkge1xuICAgICAgc2xpZGUuYWRkQ2VsbCggY2VsbCApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzbGlkZVdpZHRoID0gKCBzbGlkZS5vdXRlcldpZHRoIC0gc2xpZGUuZmlyc3RNYXJnaW4gKSArXG4gICAgICAoIGNlbGwuc2l6ZS5vdXRlcldpZHRoIC0gY2VsbC5zaXplWyBlbmRNYXJnaW4gXSApO1xuXG4gICAgaWYgKCBjYW5DZWxsRml0KCBpLCBzbGlkZVdpZHRoICkgKSB7XG4gICAgICBzbGlkZS5hZGRDZWxsKCBjZWxsICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGRvZXNuJ3QgZml0LCBuZXcgc2xpZGVcbiAgICAgIHNsaWRlLnVwZGF0ZVRhcmdldCgpO1xuXG4gICAgICBzbGlkZSA9IG5ldyBTbGlkZSggYmVnaW5NYXJnaW4sIGVuZE1hcmdpbiwgdGhpcy5jZWxsQWxpZ24gKTtcbiAgICAgIHRoaXMuc2xpZGVzLnB1c2goIHNsaWRlICk7XG4gICAgICBzbGlkZS5hZGRDZWxsKCBjZWxsICk7XG4gICAgfVxuICB9ICk7XG4gIC8vIGxhc3Qgc2xpZGVcbiAgc2xpZGUudXBkYXRlVGFyZ2V0KCk7XG4gIC8vIHVwZGF0ZSAuc2VsZWN0ZWRTbGlkZVxuICB0aGlzLnVwZGF0ZVNlbGVjdGVkU2xpZGUoKTtcbn07XG5cbnByb3RvLl9nZXRDYW5DZWxsRml0ID0gZnVuY3Rpb24oKSB7XG4gIGxldCB7IGdyb3VwQ2VsbHMgfSA9IHRoaXMub3B0aW9ucztcbiAgaWYgKCAhZ3JvdXBDZWxscyApIHJldHVybiAoKSA9PiBmYWxzZTtcblxuICBpZiAoIHR5cGVvZiBncm91cENlbGxzID09ICdudW1iZXInICkge1xuICAgIC8vIGdyb3VwIGJ5IG51bWJlci4gMyAtPiBbMCwxLDJdLCBbMyw0LDVdLCAuLi5cbiAgICBsZXQgbnVtYmVyID0gcGFyc2VJbnQoIGdyb3VwQ2VsbHMsIDEwICk7XG4gICAgcmV0dXJuICggaSApID0+ICggaSAlIG51bWJlciApICE9PSAwO1xuICB9XG4gIC8vIGRlZmF1bHQsIGdyb3VwIGJ5IHdpZHRoIG9mIHNsaWRlXG4gIGxldCBwZXJjZW50ID0gMTtcbiAgLy8gcGFyc2UgJzc1JVxuICBsZXQgcGVyY2VudE1hdGNoID0gdHlwZW9mIGdyb3VwQ2VsbHMgPT0gJ3N0cmluZycgJiYgZ3JvdXBDZWxscy5tYXRjaCggL14oXFxkKyklJC8gKTtcbiAgaWYgKCBwZXJjZW50TWF0Y2ggKSBwZXJjZW50ID0gcGFyc2VJbnQoIHBlcmNlbnRNYXRjaFsxXSwgMTAgKSAvIDEwMDtcbiAgbGV0IGdyb3VwV2lkdGggPSAoIHRoaXMuc2l6ZS5pbm5lcldpZHRoICsgMSApICogcGVyY2VudDtcbiAgcmV0dXJuICggaSwgc2xpZGVXaWR0aCApID0+IHNsaWRlV2lkdGggPD0gZ3JvdXBXaWR0aDtcbn07XG5cbi8vIGFsaWFzIF9pbml0IGZvciBqUXVlcnkgcGx1Z2luIC5mbGlja2l0eSgpXG5wcm90by5faW5pdCA9XG5wcm90by5yZXBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucG9zaXRpb25DZWxscygpO1xuICB0aGlzLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCgpO1xufTtcblxucHJvdG8uZ2V0U2l6ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNpemUgPSBnZXRTaXplKCB0aGlzLmVsZW1lbnQgKTtcbiAgdGhpcy5zZXRDZWxsQWxpZ24oKTtcbiAgdGhpcy5jdXJzb3JQb3NpdGlvbiA9IHRoaXMuc2l6ZS5pbm5lcldpZHRoICogdGhpcy5jZWxsQWxpZ247XG59O1xuXG5sZXQgY2VsbEFsaWduU2hvcnRoYW5kcyA9IHtcbiAgbGVmdDogMCxcbiAgY2VudGVyOiAwLjUsXG4gIHJpZ2h0OiAxLFxufTtcblxucHJvdG8uc2V0Q2VsbEFsaWduID0gZnVuY3Rpb24oKSB7XG4gIGxldCB7IGNlbGxBbGlnbiwgcmlnaHRUb0xlZnQgfSA9IHRoaXMub3B0aW9ucztcbiAgbGV0IHNob3J0aGFuZCA9IGNlbGxBbGlnblNob3J0aGFuZHNbIGNlbGxBbGlnbiBdO1xuICB0aGlzLmNlbGxBbGlnbiA9IHNob3J0aGFuZCAhPT0gdW5kZWZpbmVkID8gc2hvcnRoYW5kIDogY2VsbEFsaWduO1xuICBpZiAoIHJpZ2h0VG9MZWZ0ICkgdGhpcy5jZWxsQWxpZ24gPSAxIC0gdGhpcy5jZWxsQWxpZ247XG59O1xuXG5wcm90by5zZXRHYWxsZXJ5U2l6ZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aGlzLm9wdGlvbnMuc2V0R2FsbGVyeVNpemUgKSByZXR1cm47XG5cbiAgbGV0IGhlaWdodCA9IHRoaXMub3B0aW9ucy5hZGFwdGl2ZUhlaWdodCAmJiB0aGlzLnNlbGVjdGVkU2xpZGUgP1xuICAgIHRoaXMuc2VsZWN0ZWRTbGlkZS5oZWlnaHQgOiB0aGlzLm1heENlbGxIZWlnaHQ7XG4gIHRoaXMudmlld3BvcnQuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbn07XG5cbnByb3RvLl91cGRhdGVXcmFwU2hpZnRDZWxscyA9IGZ1bmN0aW9uKCkge1xuICAvLyB1cGRhdGUgaXNXcmFwcGluZ1xuICB0aGlzLmlzV3JhcHBpbmcgPSB0aGlzLmdldElzV3JhcHBpbmcoKTtcbiAgLy8gb25seSBmb3Igd3JhcC1hcm91bmRcbiAgaWYgKCAhdGhpcy5pc1dyYXBwaW5nICkgcmV0dXJuO1xuXG4gIC8vIHVuc2hpZnQgcHJldmlvdXMgY2VsbHNcbiAgdGhpcy5fdW5zaGlmdENlbGxzKCB0aGlzLmJlZm9yZVNoaWZ0Q2VsbHMgKTtcbiAgdGhpcy5fdW5zaGlmdENlbGxzKCB0aGlzLmFmdGVyU2hpZnRDZWxscyApO1xuICAvLyBnZXQgYmVmb3JlIGNlbGxzXG4gIC8vIGluaXRpYWwgZ2FwXG4gIGxldCBiZWZvcmVHYXBYID0gdGhpcy5jdXJzb3JQb3NpdGlvbjtcbiAgbGV0IGxhc3RJbmRleCA9IHRoaXMuY2VsbHMubGVuZ3RoIC0gMTtcbiAgdGhpcy5iZWZvcmVTaGlmdENlbGxzID0gdGhpcy5fZ2V0R2FwQ2VsbHMoIGJlZm9yZUdhcFgsIGxhc3RJbmRleCwgLTEgKTtcbiAgLy8gZ2V0IGFmdGVyIGNlbGxzXG4gIC8vIGVuZGluZyBnYXAgYmV0d2VlbiBsYXN0IGNlbGwgYW5kIGVuZCBvZiBnYWxsZXJ5IHZpZXdwb3J0XG4gIGxldCBhZnRlckdhcFggPSB0aGlzLnNpemUuaW5uZXJXaWR0aCAtIHRoaXMuY3Vyc29yUG9zaXRpb247XG4gIC8vIHN0YXJ0IGNsb25pbmcgYXQgZmlyc3QgY2VsbCwgd29ya2luZyBmb3J3YXJkc1xuICB0aGlzLmFmdGVyU2hpZnRDZWxscyA9IHRoaXMuX2dldEdhcENlbGxzKCBhZnRlckdhcFgsIDAsIDEgKTtcbn07XG5cbnByb3RvLmdldElzV3JhcHBpbmcgPSBmdW5jdGlvbigpIHtcbiAgbGV0IHsgd3JhcEFyb3VuZCB9ID0gdGhpcy5vcHRpb25zO1xuICBpZiAoICF3cmFwQXJvdW5kIHx8IHRoaXMuc2xpZGVzLmxlbmd0aCA8IDIgKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKCB3cmFwQXJvdW5kICE9PSAnZmlsbCcgKSByZXR1cm4gdHJ1ZTtcbiAgLy8gY2hlY2sgdGhhdCBzbGlkZXMgY2FuIGZpdFxuXG4gIGxldCBnYXBXaWR0aCA9IHRoaXMuc2xpZGVhYmxlV2lkdGggLSB0aGlzLnNpemUuaW5uZXJXaWR0aDtcbiAgaWYgKCBnYXBXaWR0aCA+IHRoaXMuc2l6ZS5pbm5lcldpZHRoICkgcmV0dXJuIHRydWU7IC8vIGdhcCAqIDJ4IGJpZywgYWxsIGdvb2RcbiAgLy8gY2hlY2sgdGhhdCBjb250ZW50IHdpZHRoIC0gc2hpZnRpbmcgY2VsbCBpcyBiaWdnZXIgdGhhbiB2aWV3cG9ydCB3aWR0aFxuICBmb3IgKCBsZXQgY2VsbCBvZiB0aGlzLmNlbGxzICkge1xuICAgIGlmICggY2VsbC5zaXplLm91dGVyV2lkdGggPiBnYXBXaWR0aCApIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbnByb3RvLl9nZXRHYXBDZWxscyA9IGZ1bmN0aW9uKCBnYXBYLCBjZWxsSW5kZXgsIGluY3JlbWVudCApIHtcbiAgLy8ga2VlcCBhZGRpbmcgY2VsbHMgdW50aWwgdGhlIGNvdmVyIHRoZSBpbml0aWFsIGdhcFxuICBsZXQgY2VsbHMgPSBbXTtcbiAgd2hpbGUgKCBnYXBYID4gMCApIHtcbiAgICBsZXQgY2VsbCA9IHRoaXMuY2VsbHNbIGNlbGxJbmRleCBdO1xuICAgIGlmICggIWNlbGwgKSBicmVhaztcblxuICAgIGNlbGxzLnB1c2goIGNlbGwgKTtcbiAgICBjZWxsSW5kZXggKz0gaW5jcmVtZW50O1xuICAgIGdhcFggLT0gY2VsbC5zaXplLm91dGVyV2lkdGg7XG4gIH1cbiAgcmV0dXJuIGNlbGxzO1xufTtcblxuLy8gLS0tLS0gY29udGFpbiAmIHdyYXAgLS0tLS0gLy9cblxuLy8gY29udGFpbiBjZWxsIHRhcmdldHMgc28gbm8gZXhjZXNzIHNsaWRpbmdcbnByb3RvLl9jb250YWluU2xpZGVzID0gZnVuY3Rpb24oKSB7XG4gIGxldCBpc0NvbnRhaW5pbmcgPSB0aGlzLm9wdGlvbnMuY29udGFpbiAmJiAhdGhpcy5pc1dyYXBwaW5nICYmXG4gICAgICB0aGlzLmNlbGxzLmxlbmd0aDtcbiAgaWYgKCAhaXNDb250YWluaW5nICkgcmV0dXJuO1xuXG4gIGxldCBjb250ZW50V2lkdGggPSB0aGlzLnNsaWRlYWJsZVdpZHRoIC0gdGhpcy5nZXRMYXN0Q2VsbCgpLnNpemVbIHRoaXMuZW5kTWFyZ2luIF07XG4gIC8vIGNvbnRlbnQgaXMgbGVzcyB0aGFuIGdhbGxlcnkgc2l6ZVxuICBsZXQgaXNDb250ZW50U21hbGxlciA9IGNvbnRlbnRXaWR0aCA8IHRoaXMuc2l6ZS5pbm5lcldpZHRoO1xuICBpZiAoIGlzQ29udGVudFNtYWxsZXIgKSB7XG4gICAgLy8gYWxsIGNlbGxzIGZpdCBpbnNpZGUgZ2FsbGVyeVxuICAgIHRoaXMuc2xpZGVzLmZvckVhY2goICggc2xpZGUgKSA9PiB7XG4gICAgICBzbGlkZS50YXJnZXQgPSBjb250ZW50V2lkdGggKiB0aGlzLmNlbGxBbGlnbjtcbiAgICB9ICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29udGFpbiB0byBib3VuZHNcbiAgICBsZXQgYmVnaW5Cb3VuZCA9IHRoaXMuY3Vyc29yUG9zaXRpb24gKyB0aGlzLmNlbGxzWzBdLnNpemVbIHRoaXMuYmVnaW5NYXJnaW4gXTtcbiAgICBsZXQgZW5kQm91bmQgPSBjb250ZW50V2lkdGggLSB0aGlzLnNpemUuaW5uZXJXaWR0aCAqICggMSAtIHRoaXMuY2VsbEFsaWduICk7XG4gICAgdGhpcy5zbGlkZXMuZm9yRWFjaCggKCBzbGlkZSApID0+IHtcbiAgICAgIHNsaWRlLnRhcmdldCA9IE1hdGgubWF4KCBzbGlkZS50YXJnZXQsIGJlZ2luQm91bmQgKTtcbiAgICAgIHNsaWRlLnRhcmdldCA9IE1hdGgubWluKCBzbGlkZS50YXJnZXQsIGVuZEJvdW5kICk7XG4gICAgfSApO1xuICB9XG59O1xuXG4vLyAtLS0tLSBldmVudHMgLS0tLS0gLy9cblxuLyoqXG4gKiBlbWl0cyBldmVudHMgdmlhIGV2ZW50RW1pdHRlciBhbmQgalF1ZXJ5IGV2ZW50c1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBuYW1lIG9mIGV2ZW50XG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIG9yaWdpbmFsIGV2ZW50XG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzIC0gZXh0cmEgYXJndW1lbnRzXG4gKi9cbnByb3RvLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGFyZ3MgKSB7XG4gIGxldCBlbWl0QXJncyA9IGV2ZW50ID8gWyBldmVudCBdLmNvbmNhdCggYXJncyApIDogYXJncztcbiAgdGhpcy5lbWl0RXZlbnQoIHR5cGUsIGVtaXRBcmdzICk7XG5cbiAgaWYgKCBqUXVlcnkgJiYgdGhpcy4kZWxlbWVudCApIHtcbiAgICAvLyBkZWZhdWx0IHRyaWdnZXIgd2l0aCB0eXBlIGlmIG5vIGV2ZW50XG4gICAgdHlwZSArPSB0aGlzLm9wdGlvbnMubmFtZXNwYWNlSlF1ZXJ5RXZlbnRzID8gJy5mbGlja2l0eScgOiAnJztcbiAgICBsZXQgJGV2ZW50ID0gdHlwZTtcbiAgICBpZiAoIGV2ZW50ICkge1xuICAgICAgLy8gY3JlYXRlIGpRdWVyeSBldmVudFxuICAgICAgbGV0IGpRRXZlbnQgPSBuZXcgalF1ZXJ5LkV2ZW50KCBldmVudCApO1xuICAgICAgalFFdmVudC50eXBlID0gdHlwZTtcbiAgICAgICRldmVudCA9IGpRRXZlbnQ7XG4gICAgfVxuICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlciggJGV2ZW50LCBhcmdzICk7XG4gIH1cbn07XG5cbmNvbnN0IHVuaWRyYWdnZXJFdmVudHMgPSBbXG4gICdkcmFnU3RhcnQnLFxuICAnZHJhZ01vdmUnLFxuICAnZHJhZ0VuZCcsXG4gICdwb2ludGVyRG93bicsXG4gICdwb2ludGVyTW92ZScsXG4gICdwb2ludGVyRW5kJyxcbiAgJ3N0YXRpY0NsaWNrJyxcbl07XG5cbmxldCBfZW1pdEV2ZW50ID0gcHJvdG8uZW1pdEV2ZW50O1xucHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgYXJncyApIHtcbiAgaWYgKCBldmVudE5hbWUgPT09ICdzdGF0aWNDbGljaycgKSB7XG4gICAgLy8gYWRkIGNlbGxFbGVtIGFuZCBjZWxsSW5kZXggYXJncyB0byBzdGF0aWNDbGlja1xuICAgIGxldCBjbGlja2VkQ2VsbCA9IHRoaXMuZ2V0UGFyZW50Q2VsbCggYXJnc1swXS50YXJnZXQgKTtcbiAgICBsZXQgY2VsbEVsZW0gPSBjbGlja2VkQ2VsbCAmJiBjbGlja2VkQ2VsbC5lbGVtZW50O1xuICAgIGxldCBjZWxsSW5kZXggPSBjbGlja2VkQ2VsbCAmJiB0aGlzLmNlbGxzLmluZGV4T2YoIGNsaWNrZWRDZWxsICk7XG4gICAgYXJncyA9IGFyZ3MuY29uY2F0KCBjZWxsRWxlbSwgY2VsbEluZGV4ICk7XG4gIH1cbiAgLy8gZG8gcmVndWxhciB0aGluZ1xuICBfZW1pdEV2ZW50LmNhbGwoIHRoaXMsIGV2ZW50TmFtZSwgYXJncyApO1xuICAvLyBkdWNrLXB1bmNoIGluIGpRdWVyeSBldmVudHMgZm9yIFVuaWRyYWdnZXIgZXZlbnRzXG4gIGxldCBpc1VuaWRyYWdnZXJFdmVudCA9IHVuaWRyYWdnZXJFdmVudHMuaW5jbHVkZXMoIGV2ZW50TmFtZSApO1xuICBpZiAoICFpc1VuaWRyYWdnZXJFdmVudCB8fCAhalF1ZXJ5IHx8ICF0aGlzLiRlbGVtZW50ICkgcmV0dXJuO1xuXG4gIGV2ZW50TmFtZSArPSB0aGlzLm9wdGlvbnMubmFtZXNwYWNlSlF1ZXJ5RXZlbnRzID8gJy5mbGlja2l0eScgOiAnJztcbiAgbGV0IGV2ZW50ID0gYXJncy5zaGlmdCggMCApO1xuICBsZXQgalFFdmVudCA9IG5ldyBqUXVlcnkuRXZlbnQoIGV2ZW50ICk7XG4gIGpRRXZlbnQudHlwZSA9IGV2ZW50TmFtZTtcbiAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCBqUUV2ZW50LCBhcmdzICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBzZWxlY3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLyoqXG4gKiBAcGFyYW0ge0ludGVnZXJ9IGluZGV4IC0gaW5kZXggb2YgdGhlIHNsaWRlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzV3JhcCAtIHdpbGwgd3JhcC1hcm91bmQgdG8gbGFzdC9maXJzdCBpZiBhdCB0aGUgZW5kXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW5zdGFudCAtIHdpbGwgaW1tZWRpYXRlbHkgc2V0IHBvc2l0aW9uIGF0IHNlbGVjdGVkIGNlbGxcbiAqL1xucHJvdG8uc2VsZWN0ID0gZnVuY3Rpb24oIGluZGV4LCBpc1dyYXAsIGlzSW5zdGFudCApIHtcbiAgaWYgKCAhdGhpcy5pc0FjdGl2ZSApIHJldHVybjtcblxuICBpbmRleCA9IHBhcnNlSW50KCBpbmRleCwgMTAgKTtcbiAgdGhpcy5fd3JhcFNlbGVjdCggaW5kZXggKTtcblxuICBpZiAoIHRoaXMuaXNXcmFwcGluZyB8fCBpc1dyYXAgKSB7XG4gICAgaW5kZXggPSB1dGlscy5tb2R1bG8oIGluZGV4LCB0aGlzLnNsaWRlcy5sZW5ndGggKTtcbiAgfVxuICAvLyBiYWlsIGlmIGludmFsaWQgaW5kZXhcbiAgaWYgKCAhdGhpcy5zbGlkZXNbIGluZGV4IF0gKSByZXR1cm47XG5cbiAgbGV0IHByZXZJbmRleCA9IHRoaXMuc2VsZWN0ZWRJbmRleDtcbiAgdGhpcy5zZWxlY3RlZEluZGV4ID0gaW5kZXg7XG4gIHRoaXMudXBkYXRlU2VsZWN0ZWRTbGlkZSgpO1xuICBpZiAoIGlzSW5zdGFudCApIHtcbiAgICB0aGlzLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCgpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuc3RhcnRBbmltYXRpb24oKTtcbiAgfVxuICBpZiAoIHRoaXMub3B0aW9ucy5hZGFwdGl2ZUhlaWdodCApIHtcbiAgICB0aGlzLnNldEdhbGxlcnlTaXplKCk7XG4gIH1cbiAgLy8gZXZlbnRzXG4gIHRoaXMuZGlzcGF0Y2hFdmVudCggJ3NlbGVjdCcsIG51bGwsIFsgaW5kZXggXSApO1xuICAvLyBjaGFuZ2UgZXZlbnQgaWYgbmV3IGluZGV4XG4gIGlmICggaW5kZXggIT09IHByZXZJbmRleCApIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoICdjaGFuZ2UnLCBudWxsLCBbIGluZGV4IF0gKTtcbiAgfVxufTtcblxuLy8gd3JhcHMgcG9zaXRpb24gZm9yIHdyYXBBcm91bmQsIHRvIG1vdmUgdG8gY2xvc2VzdCBzbGlkZS4gIzExM1xucHJvdG8uX3dyYXBTZWxlY3QgPSBmdW5jdGlvbiggaW5kZXggKSB7XG4gIGlmICggIXRoaXMuaXNXcmFwcGluZyApIHJldHVybjtcblxuICBjb25zdCB7IHNlbGVjdGVkSW5kZXgsIHNsaWRlYWJsZVdpZHRoLCBzbGlkZXM6IHsgbGVuZ3RoIH0gfSA9IHRoaXM7XG4gIC8vIHNoaWZ0IGluZGV4IGZvciB3cmFwLCBkbyBub3Qgd3JhcCBkcmFnU2VsZWN0XG4gIGlmICggIXRoaXMuaXNEcmFnU2VsZWN0ICkge1xuICAgIGxldCB3cmFwSW5kZXggPSB1dGlscy5tb2R1bG8oIGluZGV4LCBsZW5ndGggKTtcbiAgICAvLyBnbyB0byBzaG9ydGVzdFxuICAgIGxldCBkZWx0YSA9IE1hdGguYWJzKCB3cmFwSW5kZXggLSBzZWxlY3RlZEluZGV4ICk7XG4gICAgbGV0IGJhY2tXcmFwRGVsdGEgPSBNYXRoLmFicyggKCB3cmFwSW5kZXggKyBsZW5ndGggKSAtIHNlbGVjdGVkSW5kZXggKTtcbiAgICBsZXQgZm9yZXdhcmRXcmFwRGVsdGEgPSBNYXRoLmFicyggKCB3cmFwSW5kZXggLSBsZW5ndGggKSAtIHNlbGVjdGVkSW5kZXggKTtcbiAgICBpZiAoIGJhY2tXcmFwRGVsdGEgPCBkZWx0YSApIHtcbiAgICAgIGluZGV4ICs9IGxlbmd0aDtcbiAgICB9IGVsc2UgaWYgKCBmb3Jld2FyZFdyYXBEZWx0YSA8IGRlbHRhICkge1xuICAgICAgaW5kZXggLT0gbGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8vIHdyYXAgcG9zaXRpb24gc28gc2xpZGVyIGlzIHdpdGhpbiBub3JtYWwgYXJlYVxuICBpZiAoIGluZGV4IDwgMCApIHtcbiAgICB0aGlzLnggLT0gc2xpZGVhYmxlV2lkdGg7XG4gIH0gZWxzZSBpZiAoIGluZGV4ID49IGxlbmd0aCApIHtcbiAgICB0aGlzLnggKz0gc2xpZGVhYmxlV2lkdGg7XG4gIH1cbn07XG5cbnByb3RvLnByZXZpb3VzID0gZnVuY3Rpb24oIGlzV3JhcCwgaXNJbnN0YW50ICkge1xuICB0aGlzLnNlbGVjdCggdGhpcy5zZWxlY3RlZEluZGV4IC0gMSwgaXNXcmFwLCBpc0luc3RhbnQgKTtcbn07XG5cbnByb3RvLm5leHQgPSBmdW5jdGlvbiggaXNXcmFwLCBpc0luc3RhbnQgKSB7XG4gIHRoaXMuc2VsZWN0KCB0aGlzLnNlbGVjdGVkSW5kZXggKyAxLCBpc1dyYXAsIGlzSW5zdGFudCApO1xufTtcblxucHJvdG8udXBkYXRlU2VsZWN0ZWRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICBsZXQgc2xpZGUgPSB0aGlzLnNsaWRlc1sgdGhpcy5zZWxlY3RlZEluZGV4IF07XG4gIC8vIHNlbGVjdGVkSW5kZXggY291bGQgYmUgb3V0c2lkZSBvZiBzbGlkZXMsIGlmIHRyaWdnZXJlZCBiZWZvcmUgcmVzaXplKClcbiAgaWYgKCAhc2xpZGUgKSByZXR1cm47XG5cbiAgLy8gdW5zZWxlY3QgcHJldmlvdXMgc2VsZWN0ZWQgc2xpZGVcbiAgdGhpcy51bnNlbGVjdFNlbGVjdGVkU2xpZGUoKTtcbiAgLy8gdXBkYXRlIG5ldyBzZWxlY3RlZCBzbGlkZVxuICB0aGlzLnNlbGVjdGVkU2xpZGUgPSBzbGlkZTtcbiAgc2xpZGUuc2VsZWN0KCk7XG4gIHRoaXMuc2VsZWN0ZWRDZWxscyA9IHNsaWRlLmNlbGxzO1xuICB0aGlzLnNlbGVjdGVkRWxlbWVudHMgPSBzbGlkZS5nZXRDZWxsRWxlbWVudHMoKTtcbiAgLy8gSEFDSzogc2VsZWN0ZWRDZWxsICYgc2VsZWN0ZWRFbGVtZW50IGlzIGZpcnN0IGNlbGwgaW4gc2xpZGUsIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gIHRoaXMuc2VsZWN0ZWRDZWxsID0gc2xpZGUuY2VsbHNbMF07XG4gIHRoaXMuc2VsZWN0ZWRFbGVtZW50ID0gdGhpcy5zZWxlY3RlZEVsZW1lbnRzWzBdO1xufTtcblxucHJvdG8udW5zZWxlY3RTZWxlY3RlZFNsaWRlID0gZnVuY3Rpb24oKSB7XG4gIGlmICggdGhpcy5zZWxlY3RlZFNsaWRlICkgdGhpcy5zZWxlY3RlZFNsaWRlLnVuc2VsZWN0KCk7XG59O1xuXG5wcm90by5zZWxlY3RJbml0aWFsSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgbGV0IGluaXRpYWxJbmRleCA9IHRoaXMub3B0aW9ucy5pbml0aWFsSW5kZXg7XG4gIC8vIGFscmVhZHkgYWN0aXZhdGVkLCBzZWxlY3QgcHJldmlvdXMgc2VsZWN0ZWRJbmRleFxuICBpZiAoIHRoaXMuaXNJbml0QWN0aXZhdGVkICkge1xuICAgIHRoaXMuc2VsZWN0KCB0aGlzLnNlbGVjdGVkSW5kZXgsIGZhbHNlLCB0cnVlICk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHNlbGVjdCB3aXRoIHNlbGVjdG9yIHN0cmluZ1xuICBpZiAoIGluaXRpYWxJbmRleCAmJiB0eXBlb2YgaW5pdGlhbEluZGV4ID09ICdzdHJpbmcnICkge1xuICAgIGxldCBjZWxsID0gdGhpcy5xdWVyeUNlbGwoIGluaXRpYWxJbmRleCApO1xuICAgIGlmICggY2VsbCApIHtcbiAgICAgIHRoaXMuc2VsZWN0Q2VsbCggaW5pdGlhbEluZGV4LCBmYWxzZSwgdHJ1ZSApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGxldCBpbmRleCA9IDA7XG4gIC8vIHNlbGVjdCB3aXRoIG51bWJlclxuICBpZiAoIGluaXRpYWxJbmRleCAmJiB0aGlzLnNsaWRlc1sgaW5pdGlhbEluZGV4IF0gKSB7XG4gICAgaW5kZXggPSBpbml0aWFsSW5kZXg7XG4gIH1cbiAgLy8gc2VsZWN0IGluc3RhbnRseVxuICB0aGlzLnNlbGVjdCggaW5kZXgsIGZhbHNlLCB0cnVlICk7XG59O1xuXG4vKipcbiAqIHNlbGVjdCBzbGlkZSBmcm9tIG51bWJlciBvciBjZWxsIGVsZW1lbnRcbiAqIEBwYXJhbSB7W0VsZW1lbnQsIE51bWJlcl19IHZhbHVlIC0gemVyby1iYXNlZCBpbmRleCBvciBlbGVtZW50IHRvIHNlbGVjdFxuICogQHBhcmFtIHtCb29sZWFufSBpc1dyYXAgLSBlbmFibGVzIHdyYXBwaW5nIGFyb3VuZCBmb3IgZXh0cmEgaW5kZXhcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNJbnN0YW50IC0gZGlzYWJsZXMgc2xpZGUgYW5pbWF0aW9uXG4gKi9cbnByb3RvLnNlbGVjdENlbGwgPSBmdW5jdGlvbiggdmFsdWUsIGlzV3JhcCwgaXNJbnN0YW50ICkge1xuICAvLyBnZXQgY2VsbFxuICBsZXQgY2VsbCA9IHRoaXMucXVlcnlDZWxsKCB2YWx1ZSApO1xuICBpZiAoICFjZWxsICkgcmV0dXJuO1xuXG4gIGxldCBpbmRleCA9IHRoaXMuZ2V0Q2VsbFNsaWRlSW5kZXgoIGNlbGwgKTtcbiAgdGhpcy5zZWxlY3QoIGluZGV4LCBpc1dyYXAsIGlzSW5zdGFudCApO1xufTtcblxucHJvdG8uZ2V0Q2VsbFNsaWRlSW5kZXggPSBmdW5jdGlvbiggY2VsbCApIHtcbiAgLy8gZ2V0IGluZGV4IG9mIHNsaWRlIHRoYXQgaGFzIGNlbGxcbiAgbGV0IGNlbGxTbGlkZSA9IHRoaXMuc2xpZGVzLmZpbmQoICggc2xpZGUgKSA9PiBzbGlkZS5jZWxscy5pbmNsdWRlcyggY2VsbCApICk7XG4gIHJldHVybiB0aGlzLnNsaWRlcy5pbmRleE9mKCBjZWxsU2xpZGUgKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGdldCBjZWxscyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vKipcbiAqIGdldCBGbGlja2l0eS5DZWxsLCBnaXZlbiBhbiBFbGVtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0gLSBtYXRjaGluZyBjZWxsIGVsZW1lbnRcbiAqIEByZXR1cm5zIHtGbGlja2l0eS5DZWxsfSBjZWxsIC0gbWF0Y2hpbmcgY2VsbFxuICovXG5wcm90by5nZXRDZWxsID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gIC8vIGxvb3AgdGhyb3VnaCBjZWxscyB0byBnZXQgdGhlIG9uZSB0aGF0IG1hdGNoZXNcbiAgZm9yICggbGV0IGNlbGwgb2YgdGhpcy5jZWxscyApIHtcbiAgICBpZiAoIGNlbGwuZWxlbWVudCA9PT0gZWxlbSApIHJldHVybiBjZWxsO1xuICB9XG59O1xuXG4vKipcbiAqIGdldCBjb2xsZWN0aW9uIG9mIEZsaWNraXR5LkNlbGxzLCBnaXZlbiBFbGVtZW50c1xuICogQHBhcmFtIHtbRWxlbWVudCwgQXJyYXksIE5vZGVMaXN0XX0gZWxlbXMgLSBtdWx0aXBsZSBlbGVtZW50c1xuICogQHJldHVybnMge0FycmF5fSBjZWxscyAtIEZsaWNraXR5LkNlbGxzXG4gKi9cbnByb3RvLmdldENlbGxzID0gZnVuY3Rpb24oIGVsZW1zICkge1xuICBlbGVtcyA9IHV0aWxzLm1ha2VBcnJheSggZWxlbXMgKTtcbiAgcmV0dXJuIGVsZW1zLm1hcCggKCBlbGVtICkgPT4gdGhpcy5nZXRDZWxsKCBlbGVtICkgKS5maWx0ZXIoIEJvb2xlYW4gKTtcbn07XG5cbi8qKlxuICogZ2V0IGNlbGwgZWxlbWVudHNcbiAqIEByZXR1cm5zIHtBcnJheX0gY2VsbEVsZW1zXG4gKi9cbnByb3RvLmdldENlbGxFbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5jZWxscy5tYXAoICggY2VsbCApID0+IGNlbGwuZWxlbWVudCApO1xufTtcblxuLyoqXG4gKiBnZXQgcGFyZW50IGNlbGwgZnJvbSBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0gLSBjaGlsZCBlbGVtZW50XG4gKiBAcmV0dXJucyB7RmxpY2tpdC5DZWxsfSBjZWxsIC0gcGFyZW50IGNlbGxcbiAqL1xucHJvdG8uZ2V0UGFyZW50Q2VsbCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAvLyBmaXJzdCBjaGVjayBpZiBlbGVtIGlzIGNlbGxcbiAgbGV0IGNlbGwgPSB0aGlzLmdldENlbGwoIGVsZW0gKTtcbiAgaWYgKCBjZWxsICkgcmV0dXJuIGNlbGw7XG5cbiAgLy8gdHJ5IHRvIGdldCBwYXJlbnQgY2VsbCBlbGVtXG4gIGxldCBjbG9zZXN0ID0gZWxlbS5jbG9zZXN0KCcuZmxpY2tpdHktc2xpZGVyID4gKicpO1xuICByZXR1cm4gdGhpcy5nZXRDZWxsKCBjbG9zZXN0ICk7XG59O1xuXG4vKipcbiAqIGdldCBjZWxscyBhZGphY2VudCB0byBhIHNsaWRlXG4gKiBAcGFyYW0ge0ludGVnZXJ9IGFkakNvdW50IC0gbnVtYmVyIG9mIGFkamFjZW50IHNsaWRlc1xuICogQHBhcmFtIHtJbnRlZ2VyfSBpbmRleCAtIGluZGV4IG9mIHNsaWRlIHRvIHN0YXJ0XG4gKiBAcmV0dXJucyB7QXJyYXl9IGNlbGxzIC0gYXJyYXkgb2YgRmxpY2tpdHkuQ2VsbHNcbiAqL1xucHJvdG8uZ2V0QWRqYWNlbnRDZWxsRWxlbWVudHMgPSBmdW5jdGlvbiggYWRqQ291bnQsIGluZGV4ICkge1xuICBpZiAoICFhZGpDb3VudCApIHJldHVybiB0aGlzLnNlbGVjdGVkU2xpZGUuZ2V0Q2VsbEVsZW1lbnRzKCk7XG5cbiAgaW5kZXggPSBpbmRleCA9PT0gdW5kZWZpbmVkID8gdGhpcy5zZWxlY3RlZEluZGV4IDogaW5kZXg7XG5cbiAgbGV0IGxlbiA9IHRoaXMuc2xpZGVzLmxlbmd0aDtcbiAgaWYgKCAxICsgKCBhZGpDb3VudCAqIDIgKSA+PSBsZW4gKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2VsbEVsZW1lbnRzKCk7IC8vIGdldCBhbGxcbiAgfVxuXG4gIGxldCBjZWxsRWxlbXMgPSBbXTtcbiAgZm9yICggbGV0IGkgPSBpbmRleCAtIGFkakNvdW50OyBpIDw9IGluZGV4ICsgYWRqQ291bnQ7IGkrKyApIHtcbiAgICBsZXQgc2xpZGVJbmRleCA9IHRoaXMuaXNXcmFwcGluZyA/IHV0aWxzLm1vZHVsbyggaSwgbGVuICkgOiBpO1xuICAgIGxldCBzbGlkZSA9IHRoaXMuc2xpZGVzWyBzbGlkZUluZGV4IF07XG4gICAgaWYgKCBzbGlkZSApIHtcbiAgICAgIGNlbGxFbGVtcyA9IGNlbGxFbGVtcy5jb25jYXQoIHNsaWRlLmdldENlbGxFbGVtZW50cygpICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjZWxsRWxlbXM7XG59O1xuXG4vKipcbiAqIHNlbGVjdCBzbGlkZSBmcm9tIG51bWJlciBvciBjZWxsIGVsZW1lbnRcbiAqIEBwYXJhbSB7W0VsZW1lbnQsIFN0cmluZywgTnVtYmVyXX0gc2VsZWN0b3IgLSBlbGVtZW50LCBzZWxlY3RvciBzdHJpbmcsIG9yIGluZGV4XG4gKiBAcmV0dXJucyB7RmxpY2tpdHkuQ2VsbH0gLSBtYXRjaGluZyBjZWxsXG4gKi9cbnByb3RvLnF1ZXJ5Q2VsbCA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgaWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT0gJ251bWJlcicgKSB7XG4gICAgLy8gdXNlIG51bWJlciBhcyBpbmRleFxuICAgIHJldHVybiB0aGlzLmNlbGxzWyBzZWxlY3RvciBdO1xuICB9XG4gIC8vIGRvIG5vdCBzZWxlY3QgaW52YWxpZCBzZWxlY3RvcnMgZnJvbSBoYXNoOiAjMTIzLCAjLy4gIzc5MVxuICBsZXQgaXNTZWxlY3RvclN0cmluZyA9IHR5cGVvZiBzZWxlY3RvciA9PSAnc3RyaW5nJyAmJiAhc2VsZWN0b3IubWF0Y2goIC9eWyMuXT9bXFxkL10vICk7XG4gIGlmICggaXNTZWxlY3RvclN0cmluZyApIHtcbiAgICAvLyB1c2Ugc3RyaW5nIGFzIHNlbGVjdG9yLCBnZXQgZWxlbWVudFxuICAgIHNlbGVjdG9yID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICk7XG4gIH1cbiAgLy8gZ2V0IGNlbGwgZnJvbSBlbGVtZW50XG4gIHJldHVybiB0aGlzLmdldENlbGwoIHNlbGVjdG9yICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBldmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxucHJvdG8udWlDaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbWl0RXZlbnQoJ3VpQ2hhbmdlJyk7XG59O1xuXG4vLyAtLS0tLSByZXNpemUgLS0tLS0gLy9cblxucHJvdG8ub25yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy53YXRjaENTUygpO1xuICB0aGlzLnJlc2l6ZSgpO1xufTtcblxudXRpbHMuZGVib3VuY2VNZXRob2QoIEZsaWNraXR5LCAnb25yZXNpemUnLCAxNTAgKTtcblxucHJvdG8ucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gIC8vICMxMTc3IGRpc2FibGUgcmVzaXplIGJlaGF2aW9yIHdoZW4gYW5pbWF0aW5nIG9yIGRyYWdnaW5nIGZvciBpT1MgMTVcbiAgaWYgKCAhdGhpcy5pc0FjdGl2ZSB8fCB0aGlzLmlzQW5pbWF0aW5nIHx8IHRoaXMuaXNEcmFnZ2luZyApIHJldHVybjtcbiAgdGhpcy5nZXRTaXplKCk7XG4gIC8vIHdyYXAgdmFsdWVzXG4gIGlmICggdGhpcy5pc1dyYXBwaW5nICkge1xuICAgIHRoaXMueCA9IHV0aWxzLm1vZHVsbyggdGhpcy54LCB0aGlzLnNsaWRlYWJsZVdpZHRoICk7XG4gIH1cbiAgdGhpcy5wb3NpdGlvbkNlbGxzKCk7XG4gIHRoaXMuX3VwZGF0ZVdyYXBTaGlmdENlbGxzKCk7XG4gIHRoaXMuc2V0R2FsbGVyeVNpemUoKTtcbiAgdGhpcy5lbWl0RXZlbnQoJ3Jlc2l6ZScpO1xuICAvLyB1cGRhdGUgc2VsZWN0ZWQgaW5kZXggZm9yIGdyb3VwIHNsaWRlcywgaW5zdGFudFxuICAvLyBUT0RPOiBwb3NpdGlvbiBjYW4gYmUgbG9zdCBiZXR3ZWVuIGdyb3VwcyBvZiB2YXJpb3VzIG51bWJlcnNcbiAgbGV0IHNlbGVjdGVkRWxlbWVudCA9IHRoaXMuc2VsZWN0ZWRFbGVtZW50cyAmJiB0aGlzLnNlbGVjdGVkRWxlbWVudHNbMF07XG4gIHRoaXMuc2VsZWN0Q2VsbCggc2VsZWN0ZWRFbGVtZW50LCBmYWxzZSwgdHJ1ZSApO1xufTtcblxuLy8gd2F0Y2hlcyB0aGUgOmFmdGVyIHByb3BlcnR5LCBhY3RpdmF0ZXMvZGVhY3RpdmF0ZXNcbnByb3RvLndhdGNoQ1NTID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMub3B0aW9ucy53YXRjaENTUyApIHJldHVybjtcblxuICBsZXQgYWZ0ZXJDb250ZW50ID0gZ2V0Q29tcHV0ZWRTdHlsZSggdGhpcy5lbGVtZW50LCAnOmFmdGVyJyApLmNvbnRlbnQ7XG4gIC8vIGFjdGl2YXRlIGlmIDphZnRlciB7IGNvbnRlbnQ6ICdmbGlja2l0eScgfVxuICBpZiAoIGFmdGVyQ29udGVudC5pbmNsdWRlcygnZmxpY2tpdHknKSApIHtcbiAgICB0aGlzLmFjdGl2YXRlKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5kZWFjdGl2YXRlKCk7XG4gIH1cbn07XG5cbi8vIC0tLS0tIGtleWRvd24gLS0tLS0gLy9cblxuLy8gZ28gcHJldmlvdXMvbmV4dCBpZiBsZWZ0L3JpZ2h0IGtleXMgcHJlc3NlZFxucHJvdG8ub25rZXlkb3duID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICBsZXQgeyBhY3RpdmVFbGVtZW50IH0gPSBkb2N1bWVudDtcbiAgbGV0IGhhbmRsZXIgPSBGbGlja2l0eS5rZXlib2FyZEhhbmRsZXJzWyBldmVudC5rZXkgXTtcbiAgLy8gb25seSB3b3JrIGlmIGVsZW1lbnQgaXMgaW4gZm9jdXNcbiAgaWYgKCAhdGhpcy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgfHwgIWFjdGl2ZUVsZW1lbnQgfHwgIWhhbmRsZXIgKSByZXR1cm47XG5cbiAgbGV0IGlzRm9jdXNlZCA9IHRoaXMuZm9jdXNhYmxlRWxlbXMuc29tZSggKCBlbGVtICkgPT4gYWN0aXZlRWxlbWVudCA9PT0gZWxlbSApO1xuICBpZiAoIGlzRm9jdXNlZCApIGhhbmRsZXIuY2FsbCggdGhpcyApO1xufTtcblxuRmxpY2tpdHkua2V5Ym9hcmRIYW5kbGVycyA9IHtcbiAgQXJyb3dMZWZ0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnVpQ2hhbmdlKCk7XG4gICAgbGV0IGxlZnRNZXRob2QgPSB0aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQgPyAnbmV4dCcgOiAncHJldmlvdXMnO1xuICAgIHRoaXNbIGxlZnRNZXRob2QgXSgpO1xuICB9LFxuICBBcnJvd1JpZ2h0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnVpQ2hhbmdlKCk7XG4gICAgbGV0IHJpZ2h0TWV0aG9kID0gdGhpcy5vcHRpb25zLnJpZ2h0VG9MZWZ0ID8gJ3ByZXZpb3VzJyA6ICduZXh0JztcbiAgICB0aGlzWyByaWdodE1ldGhvZCBdKCk7XG4gIH0sXG59O1xuXG4vLyAtLS0tLSBmb2N1cyAtLS0tLSAvL1xuXG5wcm90by5mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmVsZW1lbnQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZGVzdHJveSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vLyBkZWFjdGl2YXRlIGFsbCBGbGlja2l0eSBmdW5jdGlvbmFsaXR5LCBidXQga2VlcCBzdHVmZiBhdmFpbGFibGVcbnByb3RvLmRlYWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5pc0FjdGl2ZSApIHJldHVybjtcblxuICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZmxpY2tpdHktZW5hYmxlZCcpO1xuICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZmxpY2tpdHktcnRsJyk7XG4gIHRoaXMudW5zZWxlY3RTZWxlY3RlZFNsaWRlKCk7XG4gIC8vIGRlc3Ryb3kgY2VsbHNcbiAgdGhpcy5jZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiBjZWxsLmRlc3Ryb3koKSApO1xuICB0aGlzLnZpZXdwb3J0LnJlbW92ZSgpO1xuICAvLyBtb3ZlIGNoaWxkIGVsZW1lbnRzIGJhY2sgaW50byBlbGVtZW50XG4gIHRoaXMuZWxlbWVudC5hcHBlbmQoIC4uLnRoaXMuc2xpZGVyLmNoaWxkcmVuICk7XG4gIGlmICggdGhpcy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgKSB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndGFiSW5kZXgnKTtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCB0aGlzICk7XG4gIH1cbiAgLy8gc2V0IGZsYWdzXG4gIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgdGhpcy5lbWl0RXZlbnQoJ2RlYWN0aXZhdGUnKTtcbn07XG5cbnByb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5kZWFjdGl2YXRlKCk7XG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAncmVzaXplJywgdGhpcyApO1xuICB0aGlzLmFsbE9mZigpO1xuICB0aGlzLmVtaXRFdmVudCgnZGVzdHJveScpO1xuICBpZiAoIGpRdWVyeSAmJiB0aGlzLiRlbGVtZW50ICkge1xuICAgIGpRdWVyeS5yZW1vdmVEYXRhKCB0aGlzLmVsZW1lbnQsICdmbGlja2l0eScgKTtcbiAgfVxuICBkZWxldGUgdGhpcy5lbGVtZW50LmZsaWNraXR5R1VJRDtcbiAgZGVsZXRlIGluc3RhbmNlc1sgdGhpcy5ndWlkIF07XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBwcm90b3R5cGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuT2JqZWN0LmFzc2lnbiggcHJvdG8sIGFuaW1hdGVQcm90b3R5cGUgKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZXh0cmFzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8qKlxuICogZ2V0IEZsaWNraXR5IGluc3RhbmNlIGZyb20gZWxlbWVudFxuICogQHBhcmFtIHtbRWxlbWVudCwgU3RyaW5nXX0gZWxlbSAtIGVsZW1lbnQgb3Igc2VsZWN0b3Igc3RyaW5nXG4gKiBAcmV0dXJucyB7RmxpY2tpdHl9IC0gRmxpY2tpdHkgaW5zdGFuY2VcbiAqL1xuRmxpY2tpdHkuZGF0YSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICBlbGVtID0gdXRpbHMuZ2V0UXVlcnlFbGVtZW50KCBlbGVtICk7XG4gIGlmICggZWxlbSApIHJldHVybiBpbnN0YW5jZXNbIGVsZW0uZmxpY2tpdHlHVUlEIF07XG59O1xuXG51dGlscy5odG1sSW5pdCggRmxpY2tpdHksICdmbGlja2l0eScgKTtcblxubGV0IHsgalF1ZXJ5QnJpZGdldCB9ID0gd2luZG93O1xuaWYgKCBqUXVlcnkgJiYgalF1ZXJ5QnJpZGdldCApIHtcbiAgalF1ZXJ5QnJpZGdldCggJ2ZsaWNraXR5JywgRmxpY2tpdHksIGpRdWVyeSApO1xufVxuXG4vLyBzZXQgaW50ZXJuYWwgalF1ZXJ5LCBmb3IgV2VicGFjayArIGpRdWVyeSB2MywgIzQ3OFxuRmxpY2tpdHkuc2V0SlF1ZXJ5ID0gZnVuY3Rpb24oIGpxICkge1xuICBqUXVlcnkgPSBqcTtcbn07XG5cbkZsaWNraXR5LkNlbGwgPSBDZWxsO1xuRmxpY2tpdHkuU2xpZGUgPSBTbGlkZTtcblxucmV0dXJuIEZsaWNraXR5O1xuXG59ICkgKTtcbiIsIi8vIGFkZCwgcmVtb3ZlIGNlbGxcbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgICAgcmVxdWlyZSgnLi9jb3JlJyksXG4gICAgICAgIHJlcXVpcmUoJ2Zpenp5LXVpLXV0aWxzJyksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIGZhY3RvcnkoXG4gICAgICAgIHdpbmRvdy5GbGlja2l0eSxcbiAgICAgICAgd2luZG93LmZpenp5VUlVdGlscyxcbiAgICApO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiBmYWN0b3J5KCBGbGlja2l0eSwgdXRpbHMgKSB7XG5cbi8vIGFwcGVuZCBjZWxscyB0byBhIGRvY3VtZW50IGZyYWdtZW50XG5mdW5jdGlvbiBnZXRDZWxsc0ZyYWdtZW50KCBjZWxscyApIHtcbiAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBjZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiBmcmFnbWVudC5hcHBlbmRDaGlsZCggY2VsbC5lbGVtZW50ICkgKTtcbiAgcmV0dXJuIGZyYWdtZW50O1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBhZGQvcmVtb3ZlIGNlbGwgcHJvdG90eXBlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmxldCBwcm90byA9IEZsaWNraXR5LnByb3RvdHlwZTtcblxuLyoqXG4gKiBJbnNlcnQsIHByZXBlbmQsIG9yIGFwcGVuZCBjZWxsc1xuICogQHBhcmFtIHtbRWxlbWVudCwgQXJyYXksIE5vZGVMaXN0XX0gZWxlbXMgLSBFbGVtZW50cyB0byBpbnNlcnRcbiAqIEBwYXJhbSB7SW50ZWdlcn0gaW5kZXggLSBaZXJvLWJhc2VkIG51bWJlciB0byBpbnNlcnRcbiAqL1xucHJvdG8uaW5zZXJ0ID0gZnVuY3Rpb24oIGVsZW1zLCBpbmRleCApIHtcbiAgbGV0IGNlbGxzID0gdGhpcy5fbWFrZUNlbGxzKCBlbGVtcyApO1xuICBpZiAoICFjZWxscyB8fCAhY2VsbHMubGVuZ3RoICkgcmV0dXJuO1xuXG4gIGxldCBsZW4gPSB0aGlzLmNlbGxzLmxlbmd0aDtcbiAgLy8gZGVmYXVsdCB0byBhcHBlbmRcbiAgaW5kZXggPSBpbmRleCA9PT0gdW5kZWZpbmVkID8gbGVuIDogaW5kZXg7XG4gIC8vIGFkZCBjZWxscyB3aXRoIGRvY3VtZW50IGZyYWdtZW50XG4gIGxldCBmcmFnbWVudCA9IGdldENlbGxzRnJhZ21lbnQoIGNlbGxzICk7XG4gIC8vIGFwcGVuZCB0byBzbGlkZXJcbiAgbGV0IGlzQXBwZW5kID0gaW5kZXggPT09IGxlbjtcbiAgaWYgKCBpc0FwcGVuZCApIHtcbiAgICB0aGlzLnNsaWRlci5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5zZXJ0Q2VsbEVsZW1lbnQgPSB0aGlzLmNlbGxzWyBpbmRleCBdLmVsZW1lbnQ7XG4gICAgdGhpcy5zbGlkZXIuaW5zZXJ0QmVmb3JlKCBmcmFnbWVudCwgaW5zZXJ0Q2VsbEVsZW1lbnQgKTtcbiAgfVxuICAvLyBhZGQgdG8gdGhpcy5jZWxsc1xuICBpZiAoIGluZGV4ID09PSAwICkge1xuICAgIC8vIHByZXBlbmQsIGFkZCB0byBzdGFydFxuICAgIHRoaXMuY2VsbHMgPSBjZWxscy5jb25jYXQoIHRoaXMuY2VsbHMgKTtcbiAgfSBlbHNlIGlmICggaXNBcHBlbmQgKSB7XG4gICAgLy8gYXBwZW5kLCBhZGQgdG8gZW5kXG4gICAgdGhpcy5jZWxscyA9IHRoaXMuY2VsbHMuY29uY2F0KCBjZWxscyApO1xuICB9IGVsc2Uge1xuICAgIC8vIGluc2VydCBpbiB0aGlzLmNlbGxzXG4gICAgbGV0IGVuZENlbGxzID0gdGhpcy5jZWxscy5zcGxpY2UoIGluZGV4LCBsZW4gLSBpbmRleCApO1xuICAgIHRoaXMuY2VsbHMgPSB0aGlzLmNlbGxzLmNvbmNhdCggY2VsbHMgKS5jb25jYXQoIGVuZENlbGxzICk7XG4gIH1cblxuICB0aGlzLl9zaXplQ2VsbHMoIGNlbGxzICk7XG4gIHRoaXMuY2VsbENoYW5nZSggaW5kZXggKTtcbiAgdGhpcy5wb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQoKTtcbn07XG5cbnByb3RvLmFwcGVuZCA9IGZ1bmN0aW9uKCBlbGVtcyApIHtcbiAgdGhpcy5pbnNlcnQoIGVsZW1zLCB0aGlzLmNlbGxzLmxlbmd0aCApO1xufTtcblxucHJvdG8ucHJlcGVuZCA9IGZ1bmN0aW9uKCBlbGVtcyApIHtcbiAgdGhpcy5pbnNlcnQoIGVsZW1zLCAwICk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBjZWxsc1xuICogQHBhcmFtIHtbRWxlbWVudCwgQXJyYXksIE5vZGVMaXN0XX0gZWxlbXMgLSBFTGVtZW50cyB0byByZW1vdmVcbiAqL1xucHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24oIGVsZW1zICkge1xuICBsZXQgY2VsbHMgPSB0aGlzLmdldENlbGxzKCBlbGVtcyApO1xuICBpZiAoICFjZWxscyB8fCAhY2VsbHMubGVuZ3RoICkgcmV0dXJuO1xuXG4gIGxldCBtaW5DZWxsSW5kZXggPSB0aGlzLmNlbGxzLmxlbmd0aCAtIDE7XG4gIC8vIHJlbW92ZSBjZWxscyBmcm9tIGNvbGxlY3Rpb24gJiBET01cbiAgY2VsbHMuZm9yRWFjaCggKCBjZWxsICkgPT4ge1xuICAgIGNlbGwucmVtb3ZlKCk7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKCBjZWxsICk7XG4gICAgbWluQ2VsbEluZGV4ID0gTWF0aC5taW4oIGluZGV4LCBtaW5DZWxsSW5kZXggKTtcbiAgICB1dGlscy5yZW1vdmVGcm9tKCB0aGlzLmNlbGxzLCBjZWxsICk7XG4gIH0gKTtcblxuICB0aGlzLmNlbGxDaGFuZ2UoIG1pbkNlbGxJbmRleCApO1xuICB0aGlzLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCgpO1xufTtcblxuLyoqXG4gKiBsb2dpYyB0byBiZSBydW4gYWZ0ZXIgYSBjZWxsJ3Mgc2l6ZSBjaGFuZ2VzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0gLSBjZWxsJ3MgZWxlbWVudFxuICovXG5wcm90by5jZWxsU2l6ZUNoYW5nZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICBsZXQgY2VsbCA9IHRoaXMuZ2V0Q2VsbCggZWxlbSApO1xuICBpZiAoICFjZWxsICkgcmV0dXJuO1xuXG4gIGNlbGwuZ2V0U2l6ZSgpO1xuXG4gIGxldCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZiggY2VsbCApO1xuICB0aGlzLmNlbGxDaGFuZ2UoIGluZGV4ICk7XG4gIC8vIGRvIG5vdCBwb3NpdGlvbiBzbGlkZXIgYWZ0ZXIgbGF6eSBsb2FkXG59O1xuXG4vKipcbiAqIGxvZ2ljIGFueSB0aW1lIGEgY2VsbCBpcyBjaGFuZ2VkOiBhZGRlZCwgcmVtb3ZlZCwgb3Igc2l6ZSBjaGFuZ2VkXG4gKiBAcGFyYW0ge0ludGVnZXJ9IGNoYW5nZWRDZWxsSW5kZXggLSBpbmRleCBvZiB0aGUgY2hhbmdlZCBjZWxsLCBvcHRpb25hbFxuICovXG5wcm90by5jZWxsQ2hhbmdlID0gZnVuY3Rpb24oIGNoYW5nZWRDZWxsSW5kZXggKSB7XG4gIGxldCBwcmV2U2VsZWN0ZWRFbGVtID0gdGhpcy5zZWxlY3RlZEVsZW1lbnQ7XG4gIHRoaXMuX3Bvc2l0aW9uQ2VsbHMoIGNoYW5nZWRDZWxsSW5kZXggKTtcbiAgdGhpcy5fdXBkYXRlV3JhcFNoaWZ0Q2VsbHMoKTtcbiAgdGhpcy5zZXRHYWxsZXJ5U2l6ZSgpO1xuICAvLyB1cGRhdGUgc2VsZWN0ZWRJbmRleCwgdHJ5IHRvIG1haW50YWluIHBvc2l0aW9uICYgc2VsZWN0IHByZXZpb3VzIHNlbGVjdGVkIGVsZW1lbnRcbiAgbGV0IGNlbGwgPSB0aGlzLmdldENlbGwoIHByZXZTZWxlY3RlZEVsZW0gKTtcbiAgaWYgKCBjZWxsICkgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5nZXRDZWxsU2xpZGVJbmRleCggY2VsbCApO1xuICB0aGlzLnNlbGVjdGVkSW5kZXggPSBNYXRoLm1pbiggdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSwgdGhpcy5zZWxlY3RlZEluZGV4ICk7XG5cbiAgdGhpcy5lbWl0RXZlbnQoICdjZWxsQ2hhbmdlJywgWyBjaGFuZ2VkQ2VsbEluZGV4IF0gKTtcbiAgLy8gcG9zaXRpb24gc2xpZGVyXG4gIHRoaXMuc2VsZWN0KCB0aGlzLnNlbGVjdGVkSW5kZXggKTtcbn07XG5cbi8vIC0tLS0tICAtLS0tLSAvL1xuXG5yZXR1cm4gRmxpY2tpdHk7XG5cbn0gKSApO1xuIiwiLy8gcHJldi9uZXh0IGJ1dHRvbnNcbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSggcmVxdWlyZSgnLi9jb3JlJykgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIGZhY3RvcnkoIHdpbmRvdy5GbGlja2l0eSApO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiBmYWN0b3J5KCBGbGlja2l0eSApIHtcblxuY29uc3Qgc3ZnVVJJID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUHJldk5leHRCdXR0b24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gUHJldk5leHRCdXR0b24oIGluY3JlbWVudCwgZGlyZWN0aW9uLCBhcnJvd1NoYXBlICkge1xuICB0aGlzLmluY3JlbWVudCA9IGluY3JlbWVudDtcbiAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gIHRoaXMuaXNQcmV2aW91cyA9IGluY3JlbWVudCA9PT0gJ3ByZXZpb3VzJztcbiAgdGhpcy5pc0xlZnQgPSBkaXJlY3Rpb24gPT09ICdsZWZ0JztcbiAgdGhpcy5fY3JlYXRlKCBhcnJvd1NoYXBlICk7XG59XG5cblByZXZOZXh0QnV0dG9uLnByb3RvdHlwZS5fY3JlYXRlID0gZnVuY3Rpb24oIGFycm93U2hhcGUgKSB7XG4gIC8vIHByb3BlcnRpZXNcbiAgbGV0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgZWxlbWVudC5jbGFzc05hbWUgPSBgZmxpY2tpdHktYnV0dG9uIGZsaWNraXR5LXByZXYtbmV4dC1idXR0b24gJHt0aGlzLmluY3JlbWVudH1gO1xuICBsZXQgbGFiZWwgPSB0aGlzLmlzUHJldmlvdXMgPyAnUHJldmlvdXMnIDogJ05leHQnO1xuICAvLyBwcmV2ZW50IGJ1dHRvbiBmcm9tIHN1Ym1pdHRpbmcgZm9ybSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTA4MzYwNzYvMTgyMTgzXG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAndHlwZScsICdidXR0b24nICk7XG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnYXJpYS1sYWJlbCcsIGxhYmVsICk7XG4gIC8vIGluaXQgYXMgZGlzYWJsZWRcbiAgdGhpcy5kaXNhYmxlKCk7XG4gIC8vIGNyZWF0ZSBhcnJvd1xuICBsZXQgc3ZnID0gdGhpcy5jcmVhdGVTVkcoIGxhYmVsLCBhcnJvd1NoYXBlICk7XG4gIGVsZW1lbnQuYXBwZW5kKCBzdmcgKTtcbn07XG5cblByZXZOZXh0QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVTVkcgPSBmdW5jdGlvbiggbGFiZWwsIGFycm93U2hhcGUgKSB7XG4gIGxldCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoIHN2Z1VSSSwgJ3N2ZycgKTtcbiAgc3ZnLnNldEF0dHJpYnV0ZSggJ2NsYXNzJywgJ2ZsaWNraXR5LWJ1dHRvbi1pY29uJyApO1xuICBzdmcuc2V0QXR0cmlidXRlKCAndmlld0JveCcsICcwIDAgMTAwIDEwMCcgKTtcbiAgLy8gYWRkIHRpdGxlICMxMTg5XG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyggc3ZnVVJJLCAndGl0bGUnICk7XG4gIHRpdGxlLmFwcGVuZCggbGFiZWwgKTtcbiAgLy8gYWRkIHBhdGhcbiAgbGV0IHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoIHN2Z1VSSSwgJ3BhdGgnICk7XG4gIGxldCBwYXRoTW92ZW1lbnRzID0gZ2V0QXJyb3dNb3ZlbWVudHMoIGFycm93U2hhcGUgKTtcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoICdkJywgcGF0aE1vdmVtZW50cyApO1xuICBwYXRoLnNldEF0dHJpYnV0ZSggJ2NsYXNzJywgJ2Fycm93JyApO1xuICAvLyByb3RhdGUgYXJyb3dcbiAgaWYgKCAhdGhpcy5pc0xlZnQgKSB7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoICd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDEwMCwgMTAwKSByb3RhdGUoMTgwKScgKTtcbiAgfVxuICBzdmcuYXBwZW5kKCB0aXRsZSwgcGF0aCApO1xuICByZXR1cm4gc3ZnO1xufTtcblxuLy8gZ2V0IFNWRyBwYXRoIG1vdm1lbWVudFxuZnVuY3Rpb24gZ2V0QXJyb3dNb3ZlbWVudHMoIHNoYXBlICkge1xuICAvLyB1c2Ugc2hhcGUgYXMgbW92ZW1lbnQgaWYgc3RyaW5nXG4gIGlmICggdHlwZW9mIHNoYXBlID09ICdzdHJpbmcnICkgcmV0dXJuIHNoYXBlO1xuXG4gIGxldCB7IHgwLCB4MSwgeDIsIHgzLCB5MSwgeTIgfSA9IHNoYXBlO1xuXG4gIC8vIGNyZWF0ZSBtb3ZlbWVudCBzdHJpbmdcbiAgcmV0dXJuIGBNICR7eDB9LCA1MFxuICAgIEwgJHt4MX0sICR7eTEgKyA1MH1cbiAgICBMICR7eDJ9LCAke3kyICsgNTB9XG4gICAgTCAke3gzfSwgNTBcbiAgICBMICR7eDJ9LCAkezUwIC0geTJ9XG4gICAgTCAke3gxfSwgJHs1MCAtIHkxfVxuICAgIFpgO1xufVxuXG4vLyAtLS0tLSAgLS0tLS0gLy9cblxuUHJldk5leHRCdXR0b24ucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xufTtcblxuUHJldk5leHRCdXR0b24ucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSggJ2Rpc2FibGVkJywgdHJ1ZSApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRmxpY2tpdHkgcHJvdG90eXBlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbk9iamVjdC5hc3NpZ24oIEZsaWNraXR5LmRlZmF1bHRzLCB7XG4gIHByZXZOZXh0QnV0dG9uczogdHJ1ZSxcbiAgYXJyb3dTaGFwZToge1xuICAgIHgwOiAxMCxcbiAgICB4MTogNjAsIHkxOiA1MCxcbiAgICB4MjogNzAsIHkyOiA0MCxcbiAgICB4MzogMzAsXG4gIH0sXG59ICk7XG5cbkZsaWNraXR5LmNyZWF0ZS5wcmV2TmV4dEJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5vcHRpb25zLnByZXZOZXh0QnV0dG9ucyApIHJldHVybjtcblxuICBsZXQgeyByaWdodFRvTGVmdCwgYXJyb3dTaGFwZSB9ID0gdGhpcy5vcHRpb25zO1xuICBsZXQgcHJldkRpcmVjdGlvbiA9IHJpZ2h0VG9MZWZ0ID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgbGV0IG5leHREaXJlY3Rpb24gPSByaWdodFRvTGVmdCA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gIHRoaXMucHJldkJ1dHRvbiA9IG5ldyBQcmV2TmV4dEJ1dHRvbiggJ3ByZXZpb3VzJywgcHJldkRpcmVjdGlvbiwgYXJyb3dTaGFwZSApO1xuICB0aGlzLm5leHRCdXR0b24gPSBuZXcgUHJldk5leHRCdXR0b24oICduZXh0JywgbmV4dERpcmVjdGlvbiwgYXJyb3dTaGFwZSApO1xuICB0aGlzLmZvY3VzYWJsZUVsZW1zLnB1c2goIHRoaXMucHJldkJ1dHRvbi5lbGVtZW50ICk7XG4gIHRoaXMuZm9jdXNhYmxlRWxlbXMucHVzaCggdGhpcy5uZXh0QnV0dG9uLmVsZW1lbnQgKTtcblxuICB0aGlzLmhhbmRsZVByZXZCdXR0b25DbGljayA9ICgpID0+IHtcbiAgICB0aGlzLnVpQ2hhbmdlKCk7XG4gICAgdGhpcy5wcmV2aW91cygpO1xuICB9O1xuXG4gIHRoaXMuaGFuZGxlTmV4dEJ1dHRvbkNsaWNrID0gKCkgPT4ge1xuICAgIHRoaXMudWlDaGFuZ2UoKTtcbiAgICB0aGlzLm5leHQoKTtcbiAgfTtcblxuICB0aGlzLm9uKCAnYWN0aXZhdGUnLCB0aGlzLmFjdGl2YXRlUHJldk5leHRCdXR0b25zICk7XG4gIHRoaXMub24oICdzZWxlY3QnLCB0aGlzLnVwZGF0ZVByZXZOZXh0QnV0dG9ucyApO1xufTtcblxubGV0IHByb3RvID0gRmxpY2tpdHkucHJvdG90eXBlO1xuXG5wcm90by51cGRhdGVQcmV2TmV4dEJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcbiAgbGV0IGxhc3RJbmRleCA9IHRoaXMuc2xpZGVzLmxlbmd0aCA/IHRoaXMuc2xpZGVzLmxlbmd0aCAtIDEgOiAwO1xuICB0aGlzLnVwZGF0ZVByZXZOZXh0QnV0dG9uKCB0aGlzLnByZXZCdXR0b24sIDAgKTtcbiAgdGhpcy51cGRhdGVQcmV2TmV4dEJ1dHRvbiggdGhpcy5uZXh0QnV0dG9uLCBsYXN0SW5kZXggKTtcbn07XG5cbnByb3RvLnVwZGF0ZVByZXZOZXh0QnV0dG9uID0gZnVuY3Rpb24oIGJ1dHRvbiwgZGlzYWJsZWRJbmRleCApIHtcbiAgLy8gZW5hYmxlIGlzIHdyYXBBcm91bmQgYW5kIGF0IGxlYXN0IDIgc2xpZGVzXG4gIGlmICggdGhpcy5pc1dyYXBwaW5nICYmIHRoaXMuc2xpZGVzLmxlbmd0aCA+IDEgKSB7XG4gICAgYnV0dG9uLmVuYWJsZSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBpc0VuYWJsZWQgPSB0aGlzLnNlbGVjdGVkSW5kZXggIT09IGRpc2FibGVkSW5kZXg7XG4gIGJ1dHRvblsgaXNFbmFibGVkID8gJ2VuYWJsZScgOiAnZGlzYWJsZScgXSgpO1xuICAvLyBpZiBkaXNhYmxpbmcgYnV0dG9uIHRoYXQgaXMgZm9jdXNlZCxcbiAgLy8gc2hpZnQgZm9jdXMgdG8gZWxlbWVudCB0byBtYWludGFpbiBrZXlib2FyZCBhY2Nlc3NpYmlsaXR5XG4gIGxldCBpc0Rpc2FibGVkRm9jdXNlZCA9ICFpc0VuYWJsZWQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gYnV0dG9uLmVsZW1lbnQ7XG4gIGlmICggaXNEaXNhYmxlZEZvY3VzZWQgKSB0aGlzLmZvY3VzKCk7XG59O1xuXG5wcm90by5hY3RpdmF0ZVByZXZOZXh0QnV0dG9ucyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnByZXZCdXR0b24uZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCB0aGlzLmhhbmRsZVByZXZCdXR0b25DbGljayApO1xuICB0aGlzLm5leHRCdXR0b24uZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCB0aGlzLmhhbmRsZU5leHRCdXR0b25DbGljayApO1xuICB0aGlzLmVsZW1lbnQuYXBwZW5kKCB0aGlzLnByZXZCdXR0b24uZWxlbWVudCwgdGhpcy5uZXh0QnV0dG9uLmVsZW1lbnQgKTtcbiAgdGhpcy5vbiggJ2RlYWN0aXZhdGUnLCB0aGlzLmRlYWN0aXZhdGVQcmV2TmV4dEJ1dHRvbnMgKTtcbn07XG5cbnByb3RvLmRlYWN0aXZhdGVQcmV2TmV4dEJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wcmV2QnV0dG9uLmVsZW1lbnQucmVtb3ZlKCk7XG4gIHRoaXMubmV4dEJ1dHRvbi5lbGVtZW50LnJlbW92ZSgpO1xuICB0aGlzLnByZXZCdXR0b24uZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnY2xpY2snLCB0aGlzLmhhbmRsZVByZXZCdXR0b25DbGljayApO1xuICB0aGlzLm5leHRCdXR0b24uZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnY2xpY2snLCB0aGlzLmhhbmRsZU5leHRCdXR0b25DbGljayApO1xuICB0aGlzLm9mZiggJ2RlYWN0aXZhdGUnLCB0aGlzLmRlYWN0aXZhdGVQcmV2TmV4dEJ1dHRvbnMgKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5GbGlja2l0eS5QcmV2TmV4dEJ1dHRvbiA9IFByZXZOZXh0QnV0dG9uO1xuXG5yZXR1cm4gRmxpY2tpdHk7XG5cbn0gKSApO1xuIiwiLyoqXG4gKiBTd2lwZXIgQ3VzdG9tIEVsZW1lbnQgMTEuMS40XG4gKiBNb3N0IG1vZGVybiBtb2JpbGUgdG91Y2ggc2xpZGVyIGFuZCBmcmFtZXdvcmsgd2l0aCBoYXJkd2FyZSBhY2NlbGVyYXRlZCB0cmFuc2l0aW9uc1xuICogaHR0cHM6Ly9zd2lwZXJqcy5jb21cbiAqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDI0IFZsYWRpbWlyIEtoYXJsYW1waWRpXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKlxuICogUmVsZWFzZWQgb246IE1heSAzMCwgMjAyNFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogU1NSIFdpbmRvdyA0LjAuMlxuICAgKiBCZXR0ZXIgaGFuZGxpbmcgZm9yIHdpbmRvdyBvYmplY3QgaW4gU1NSIGVudmlyb25tZW50XG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2xpbWl0czR3ZWIvc3NyLXdpbmRvd1xuICAgKlxuICAgKiBDb3B5cmlnaHQgMjAyMSwgVmxhZGltaXIgS2hhcmxhbXBpZGlcbiAgICpcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUXG4gICAqXG4gICAqIFJlbGVhc2VkIG9uOiBEZWNlbWJlciAxMywgMjAyMVxuICAgKi9cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgZnVuY3Rpb24gaXNPYmplY3QkMihvYmopIHtcbiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmICdjb25zdHJ1Y3RvcicgaW4gb2JqICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xuICB9XG4gIGZ1bmN0aW9uIGV4dGVuZCQyKHRhcmdldCwgc3JjKSB7XG4gICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7XG4gICAgICB0YXJnZXQgPSB7fTtcbiAgICB9XG4gICAgaWYgKHNyYyA9PT0gdm9pZCAwKSB7XG4gICAgICBzcmMgPSB7fTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMoc3JjKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRhcmdldFtrZXldID09PSAndW5kZWZpbmVkJykgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTtlbHNlIGlmIChpc09iamVjdCQyKHNyY1trZXldKSAmJiBpc09iamVjdCQyKHRhcmdldFtrZXldKSAmJiBPYmplY3Qua2V5cyhzcmNba2V5XSkubGVuZ3RoID4gMCkge1xuICAgICAgICBleHRlbmQkMih0YXJnZXRba2V5XSwgc3JjW2tleV0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHNzckRvY3VtZW50ID0ge1xuICAgIGJvZHk6IHt9LFxuICAgIGFkZEV2ZW50TGlzdGVuZXIoKSB7fSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKCkge30sXG4gICAgYWN0aXZlRWxlbWVudDoge1xuICAgICAgYmx1cigpIHt9LFxuICAgICAgbm9kZU5hbWU6ICcnXG4gICAgfSxcbiAgICBxdWVyeVNlbGVjdG9yKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBxdWVyeVNlbGVjdG9yQWxsKCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH0sXG4gICAgZ2V0RWxlbWVudEJ5SWQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGNyZWF0ZUV2ZW50KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdEV2ZW50KCkge31cbiAgICAgIH07XG4gICAgfSxcbiAgICBjcmVhdGVFbGVtZW50KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICBjaGlsZE5vZGVzOiBbXSxcbiAgICAgICAgc3R5bGU6IHt9LFxuICAgICAgICBzZXRBdHRyaWJ1dGUoKSB7fSxcbiAgICAgICAgZ2V0RWxlbWVudHNCeVRhZ05hbWUoKSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgY3JlYXRlRWxlbWVudE5TKCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgaW1wb3J0Tm9kZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgbG9jYXRpb246IHtcbiAgICAgIGhhc2g6ICcnLFxuICAgICAgaG9zdDogJycsXG4gICAgICBob3N0bmFtZTogJycsXG4gICAgICBocmVmOiAnJyxcbiAgICAgIG9yaWdpbjogJycsXG4gICAgICBwYXRobmFtZTogJycsXG4gICAgICBwcm90b2NvbDogJycsXG4gICAgICBzZWFyY2g6ICcnXG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBnZXREb2N1bWVudCgpIHtcbiAgICBjb25zdCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQgOiB7fTtcbiAgICBleHRlbmQkMihkb2MsIHNzckRvY3VtZW50KTtcbiAgICByZXR1cm4gZG9jO1xuICB9XG4gIGNvbnN0IHNzcldpbmRvdyA9IHtcbiAgICBkb2N1bWVudDogc3NyRG9jdW1lbnQsXG4gICAgbmF2aWdhdG9yOiB7XG4gICAgICB1c2VyQWdlbnQ6ICcnXG4gICAgfSxcbiAgICBsb2NhdGlvbjoge1xuICAgICAgaGFzaDogJycsXG4gICAgICBob3N0OiAnJyxcbiAgICAgIGhvc3RuYW1lOiAnJyxcbiAgICAgIGhyZWY6ICcnLFxuICAgICAgb3JpZ2luOiAnJyxcbiAgICAgIHBhdGhuYW1lOiAnJyxcbiAgICAgIHByb3RvY29sOiAnJyxcbiAgICAgIHNlYXJjaDogJydcbiAgICB9LFxuICAgIGhpc3Rvcnk6IHtcbiAgICAgIHJlcGxhY2VTdGF0ZSgpIHt9LFxuICAgICAgcHVzaFN0YXRlKCkge30sXG4gICAgICBnbygpIHt9LFxuICAgICAgYmFjaygpIHt9XG4gICAgfSxcbiAgICBDdXN0b21FdmVudDogZnVuY3Rpb24gQ3VzdG9tRXZlbnQoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGFkZEV2ZW50TGlzdGVuZXIoKSB7fSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKCkge30sXG4gICAgZ2V0Q29tcHV0ZWRTdHlsZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGdldFByb3BlcnR5VmFsdWUoKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgSW1hZ2UoKSB7fSxcbiAgICBEYXRlKCkge30sXG4gICAgc2NyZWVuOiB7fSxcbiAgICBzZXRUaW1lb3V0KCkge30sXG4gICAgY2xlYXJUaW1lb3V0KCkge30sXG4gICAgbWF0Y2hNZWRpYSgpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykge1xuICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwKTtcbiAgICB9LFxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKSB7XG4gICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBnZXRXaW5kb3coKSB7XG4gICAgY29uc3Qgd2luID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB7fTtcbiAgICBleHRlbmQkMih3aW4sIHNzcldpbmRvdyk7XG4gICAgcmV0dXJuIHdpbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsYXNzZXNUb1Rva2VucyhjbGFzc2VzKSB7XG4gICAgaWYgKGNsYXNzZXMgPT09IHZvaWQgMCkge1xuICAgICAgY2xhc3NlcyA9ICcnO1xuICAgIH1cbiAgICByZXR1cm4gY2xhc3Nlcy50cmltKCkuc3BsaXQoJyAnKS5maWx0ZXIoYyA9PiAhIWMudHJpbSgpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZVByb3BzKG9iaikge1xuICAgIGNvbnN0IG9iamVjdCA9IG9iajtcbiAgICBPYmplY3Qua2V5cyhvYmplY3QpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gbm8gZ2V0dGVyIGZvciBvYmplY3RcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGRlbGV0ZSBvYmplY3Rba2V5XTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIGdvdCB3cm9uZ1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIG5leHRUaWNrKGNhbGxiYWNrLCBkZWxheSkge1xuICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWxheSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSk7XG4gIH1cbiAgZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiBEYXRlLm5vdygpO1xuICB9XG4gIGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUkMShlbCkge1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGxldCBzdHlsZTtcbiAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUpIHtcbiAgICAgIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpO1xuICAgIH1cbiAgICBpZiAoIXN0eWxlICYmIGVsLmN1cnJlbnRTdHlsZSkge1xuICAgICAgc3R5bGUgPSBlbC5jdXJyZW50U3R5bGU7XG4gICAgfVxuICAgIGlmICghc3R5bGUpIHtcbiAgICAgIHN0eWxlID0gZWwuc3R5bGU7XG4gICAgfVxuICAgIHJldHVybiBzdHlsZTtcbiAgfVxuICBmdW5jdGlvbiBnZXRUcmFuc2xhdGUoZWwsIGF4aXMpIHtcbiAgICBpZiAoYXhpcyA9PT0gdm9pZCAwKSB7XG4gICAgICBheGlzID0gJ3gnO1xuICAgIH1cbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBsZXQgbWF0cml4O1xuICAgIGxldCBjdXJUcmFuc2Zvcm07XG4gICAgbGV0IHRyYW5zZm9ybU1hdHJpeDtcbiAgICBjb25zdCBjdXJTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUkMShlbCk7XG4gICAgaWYgKHdpbmRvdy5XZWJLaXRDU1NNYXRyaXgpIHtcbiAgICAgIGN1clRyYW5zZm9ybSA9IGN1clN0eWxlLnRyYW5zZm9ybSB8fCBjdXJTdHlsZS53ZWJraXRUcmFuc2Zvcm07XG4gICAgICBpZiAoY3VyVHJhbnNmb3JtLnNwbGl0KCcsJykubGVuZ3RoID4gNikge1xuICAgICAgICBjdXJUcmFuc2Zvcm0gPSBjdXJUcmFuc2Zvcm0uc3BsaXQoJywgJykubWFwKGEgPT4gYS5yZXBsYWNlKCcsJywgJy4nKSkuam9pbignLCAnKTtcbiAgICAgIH1cbiAgICAgIC8vIFNvbWUgb2xkIHZlcnNpb25zIG9mIFdlYmtpdCBjaG9rZSB3aGVuICdub25lJyBpcyBwYXNzZWQ7IHBhc3NcbiAgICAgIC8vIGVtcHR5IHN0cmluZyBpbnN0ZWFkIGluIHRoaXMgY2FzZVxuICAgICAgdHJhbnNmb3JtTWF0cml4ID0gbmV3IHdpbmRvdy5XZWJLaXRDU1NNYXRyaXgoY3VyVHJhbnNmb3JtID09PSAnbm9uZScgPyAnJyA6IGN1clRyYW5zZm9ybSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zZm9ybU1hdHJpeCA9IGN1clN0eWxlLk1velRyYW5zZm9ybSB8fCBjdXJTdHlsZS5PVHJhbnNmb3JtIHx8IGN1clN0eWxlLk1zVHJhbnNmb3JtIHx8IGN1clN0eWxlLm1zVHJhbnNmb3JtIHx8IGN1clN0eWxlLnRyYW5zZm9ybSB8fCBjdXJTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd0cmFuc2Zvcm0nKS5yZXBsYWNlKCd0cmFuc2xhdGUoJywgJ21hdHJpeCgxLCAwLCAwLCAxLCcpO1xuICAgICAgbWF0cml4ID0gdHJhbnNmb3JtTWF0cml4LnRvU3RyaW5nKCkuc3BsaXQoJywnKTtcbiAgICB9XG4gICAgaWYgKGF4aXMgPT09ICd4Jykge1xuICAgICAgLy8gTGF0ZXN0IENocm9tZSBhbmQgd2Via2l0cyBGaXhcbiAgICAgIGlmICh3aW5kb3cuV2ViS2l0Q1NTTWF0cml4KSBjdXJUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1NYXRyaXgubTQxO1xuICAgICAgLy8gQ3JhenkgSUUxMCBNYXRyaXhcbiAgICAgIGVsc2UgaWYgKG1hdHJpeC5sZW5ndGggPT09IDE2KSBjdXJUcmFuc2Zvcm0gPSBwYXJzZUZsb2F0KG1hdHJpeFsxMl0pO1xuICAgICAgLy8gTm9ybWFsIEJyb3dzZXJzXG4gICAgICBlbHNlIGN1clRyYW5zZm9ybSA9IHBhcnNlRmxvYXQobWF0cml4WzRdKTtcbiAgICB9XG4gICAgaWYgKGF4aXMgPT09ICd5Jykge1xuICAgICAgLy8gTGF0ZXN0IENocm9tZSBhbmQgd2Via2l0cyBGaXhcbiAgICAgIGlmICh3aW5kb3cuV2ViS2l0Q1NTTWF0cml4KSBjdXJUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1NYXRyaXgubTQyO1xuICAgICAgLy8gQ3JhenkgSUUxMCBNYXRyaXhcbiAgICAgIGVsc2UgaWYgKG1hdHJpeC5sZW5ndGggPT09IDE2KSBjdXJUcmFuc2Zvcm0gPSBwYXJzZUZsb2F0KG1hdHJpeFsxM10pO1xuICAgICAgLy8gTm9ybWFsIEJyb3dzZXJzXG4gICAgICBlbHNlIGN1clRyYW5zZm9ybSA9IHBhcnNlRmxvYXQobWF0cml4WzVdKTtcbiAgICB9XG4gICAgcmV0dXJuIGN1clRyYW5zZm9ybSB8fCAwO1xuICB9XG4gIGZ1bmN0aW9uIGlzT2JqZWN0JDEobykge1xuICAgIHJldHVybiB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiYgbyAhPT0gbnVsbCAmJiBvLmNvbnN0cnVjdG9yICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSkgPT09ICdPYmplY3QnO1xuICB9XG4gIGZ1bmN0aW9uIGlzTm9kZShub2RlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuSFRNTEVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMSB8fCBub2RlLm5vZGVUeXBlID09PSAxMSk7XG4gIH1cbiAgZnVuY3Rpb24gZXh0ZW5kJDEoKSB7XG4gICAgY29uc3QgdG8gPSBPYmplY3QoYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdKTtcbiAgICBjb25zdCBub0V4dGVuZCA9IFsnX19wcm90b19fJywgJ2NvbnN0cnVjdG9yJywgJ3Byb3RvdHlwZSddO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBuZXh0U291cmNlID0gaSA8IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA8PSBpID8gdW5kZWZpbmVkIDogYXJndW1lbnRzW2ldO1xuICAgICAgaWYgKG5leHRTb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBuZXh0U291cmNlICE9PSBudWxsICYmICFpc05vZGUobmV4dFNvdXJjZSkpIHtcbiAgICAgICAgY29uc3Qga2V5c0FycmF5ID0gT2JqZWN0LmtleXMoT2JqZWN0KG5leHRTb3VyY2UpKS5maWx0ZXIoa2V5ID0+IG5vRXh0ZW5kLmluZGV4T2Yoa2V5KSA8IDApO1xuICAgICAgICBmb3IgKGxldCBuZXh0SW5kZXggPSAwLCBsZW4gPSBrZXlzQXJyYXkubGVuZ3RoOyBuZXh0SW5kZXggPCBsZW47IG5leHRJbmRleCArPSAxKSB7XG4gICAgICAgICAgY29uc3QgbmV4dEtleSA9IGtleXNBcnJheVtuZXh0SW5kZXhdO1xuICAgICAgICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG5leHRTb3VyY2UsIG5leHRLZXkpO1xuICAgICAgICAgIGlmIChkZXNjICE9PSB1bmRlZmluZWQgJiYgZGVzYy5lbnVtZXJhYmxlKSB7XG4gICAgICAgICAgICBpZiAoaXNPYmplY3QkMSh0b1tuZXh0S2V5XSkgJiYgaXNPYmplY3QkMShuZXh0U291cmNlW25leHRLZXldKSkge1xuICAgICAgICAgICAgICBpZiAobmV4dFNvdXJjZVtuZXh0S2V5XS5fX3N3aXBlcl9fKSB7XG4gICAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dGVuZCQxKHRvW25leHRLZXldLCBuZXh0U291cmNlW25leHRLZXldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNPYmplY3QkMSh0b1tuZXh0S2V5XSkgJiYgaXNPYmplY3QkMShuZXh0U291cmNlW25leHRLZXldKSkge1xuICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IHt9O1xuICAgICAgICAgICAgICBpZiAobmV4dFNvdXJjZVtuZXh0S2V5XS5fX3N3aXBlcl9fKSB7XG4gICAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dGVuZCQxKHRvW25leHRLZXldLCBuZXh0U291cmNlW25leHRLZXldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG87XG4gIH1cbiAgZnVuY3Rpb24gc2V0Q1NTUHJvcGVydHkoZWwsIHZhck5hbWUsIHZhclZhbHVlKSB7XG4gICAgZWwuc3R5bGUuc2V0UHJvcGVydHkodmFyTmFtZSwgdmFyVmFsdWUpO1xuICB9XG4gIGZ1bmN0aW9uIGFuaW1hdGVDU1NNb2RlU2Nyb2xsKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgdGFyZ2V0UG9zaXRpb24sXG4gICAgICBzaWRlXG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgY29uc3Qgc3RhcnRQb3NpdGlvbiA9IC1zd2lwZXIudHJhbnNsYXRlO1xuICAgIGxldCBzdGFydFRpbWUgPSBudWxsO1xuICAgIGxldCB0aW1lO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gc3dpcGVyLnBhcmFtcy5zcGVlZDtcbiAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gJ25vbmUnO1xuICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShzd2lwZXIuY3NzTW9kZUZyYW1lSUQpO1xuICAgIGNvbnN0IGRpciA9IHRhcmdldFBvc2l0aW9uID4gc3RhcnRQb3NpdGlvbiA/ICduZXh0JyA6ICdwcmV2JztcbiAgICBjb25zdCBpc091dE9mQm91bmQgPSAoY3VycmVudCwgdGFyZ2V0KSA9PiB7XG4gICAgICByZXR1cm4gZGlyID09PSAnbmV4dCcgJiYgY3VycmVudCA+PSB0YXJnZXQgfHwgZGlyID09PSAncHJldicgJiYgY3VycmVudCA8PSB0YXJnZXQ7XG4gICAgfTtcbiAgICBjb25zdCBhbmltYXRlID0gKCkgPT4ge1xuICAgICAgdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgaWYgKHN0YXJ0VGltZSA9PT0gbnVsbCkge1xuICAgICAgICBzdGFydFRpbWUgPSB0aW1lO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1heChNYXRoLm1pbigodGltZSAtIHN0YXJ0VGltZSkgLyBkdXJhdGlvbiwgMSksIDApO1xuICAgICAgY29uc3QgZWFzZVByb2dyZXNzID0gMC41IC0gTWF0aC5jb3MocHJvZ3Jlc3MgKiBNYXRoLlBJKSAvIDI7XG4gICAgICBsZXQgY3VycmVudFBvc2l0aW9uID0gc3RhcnRQb3NpdGlvbiArIGVhc2VQcm9ncmVzcyAqICh0YXJnZXRQb3NpdGlvbiAtIHN0YXJ0UG9zaXRpb24pO1xuICAgICAgaWYgKGlzT3V0T2ZCb3VuZChjdXJyZW50UG9zaXRpb24sIHRhcmdldFBvc2l0aW9uKSkge1xuICAgICAgICBjdXJyZW50UG9zaXRpb24gPSB0YXJnZXRQb3NpdGlvbjtcbiAgICAgIH1cbiAgICAgIHN3aXBlci53cmFwcGVyRWwuc2Nyb2xsVG8oe1xuICAgICAgICBbc2lkZV06IGN1cnJlbnRQb3NpdGlvblxuICAgICAgfSk7XG4gICAgICBpZiAoaXNPdXRPZkJvdW5kKGN1cnJlbnRQb3NpdGlvbiwgdGFyZ2V0UG9zaXRpb24pKSB7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5zY3JvbGxTbmFwVHlwZSA9ICcnO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zY3JvbGxUbyh7XG4gICAgICAgICAgICBbc2lkZV06IGN1cnJlbnRQb3NpdGlvblxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHN3aXBlci5jc3NNb2RlRnJhbWVJRCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHN3aXBlci5jc3NNb2RlRnJhbWVJRCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgfTtcbiAgICBhbmltYXRlKCk7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKSB7XG4gICAgcmV0dXJuIHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS10cmFuc2Zvcm0nKSB8fCBzbGlkZUVsLnNoYWRvd1Jvb3QgJiYgc2xpZGVFbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtdHJhbnNmb3JtJykgfHwgc2xpZGVFbDtcbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50Q2hpbGRyZW4oZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICBpZiAoc2VsZWN0b3IgPT09IHZvaWQgMCkge1xuICAgICAgc2VsZWN0b3IgPSAnJztcbiAgICB9XG4gICAgcmV0dXJuIFsuLi5lbGVtZW50LmNoaWxkcmVuXS5maWx0ZXIoZWwgPT4gZWwubWF0Y2hlcyhzZWxlY3RvcikpO1xuICB9XG4gIGZ1bmN0aW9uIHNob3dXYXJuaW5nKHRleHQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS53YXJuKHRleHQpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gZXJyXG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc2VzKSB7XG4gICAgaWYgKGNsYXNzZXMgPT09IHZvaWQgMCkge1xuICAgICAgY2xhc3NlcyA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKC4uLihBcnJheS5pc0FycmF5KGNsYXNzZXMpID8gY2xhc3NlcyA6IGNsYXNzZXNUb1Rva2VucyhjbGFzc2VzKSkpO1xuICAgIHJldHVybiBlbDtcbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50T2Zmc2V0KGVsKSB7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgIGNvbnN0IGJveCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIGNvbnN0IGNsaWVudFRvcCA9IGVsLmNsaWVudFRvcCB8fCBib2R5LmNsaWVudFRvcCB8fCAwO1xuICAgIGNvbnN0IGNsaWVudExlZnQgPSBlbC5jbGllbnRMZWZ0IHx8IGJvZHkuY2xpZW50TGVmdCB8fCAwO1xuICAgIGNvbnN0IHNjcm9sbFRvcCA9IGVsID09PSB3aW5kb3cgPyB3aW5kb3cuc2Nyb2xsWSA6IGVsLnNjcm9sbFRvcDtcbiAgICBjb25zdCBzY3JvbGxMZWZ0ID0gZWwgPT09IHdpbmRvdyA/IHdpbmRvdy5zY3JvbGxYIDogZWwuc2Nyb2xsTGVmdDtcbiAgICByZXR1cm4ge1xuICAgICAgdG9wOiBib3gudG9wICsgc2Nyb2xsVG9wIC0gY2xpZW50VG9wLFxuICAgICAgbGVmdDogYm94LmxlZnQgKyBzY3JvbGxMZWZ0IC0gY2xpZW50TGVmdFxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZWxlbWVudFByZXZBbGwoZWwsIHNlbGVjdG9yKSB7XG4gICAgY29uc3QgcHJldkVscyA9IFtdO1xuICAgIHdoaWxlIChlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgICBjb25zdCBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChwcmV2Lm1hdGNoZXMoc2VsZWN0b3IpKSBwcmV2RWxzLnB1c2gocHJldik7XG4gICAgICB9IGVsc2UgcHJldkVscy5wdXNoKHByZXYpO1xuICAgICAgZWwgPSBwcmV2O1xuICAgIH1cbiAgICByZXR1cm4gcHJldkVscztcbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50TmV4dEFsbChlbCwgc2VsZWN0b3IpIHtcbiAgICBjb25zdCBuZXh0RWxzID0gW107XG4gICAgd2hpbGUgKGVsLm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgY29uc3QgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChuZXh0Lm1hdGNoZXMoc2VsZWN0b3IpKSBuZXh0RWxzLnB1c2gobmV4dCk7XG4gICAgICB9IGVsc2UgbmV4dEVscy5wdXNoKG5leHQpO1xuICAgICAgZWwgPSBuZXh0O1xuICAgIH1cbiAgICByZXR1cm4gbmV4dEVscztcbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50U3R5bGUoZWwsIHByb3ApIHtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG4gIH1cbiAgZnVuY3Rpb24gZWxlbWVudEluZGV4KGVsKSB7XG4gICAgbGV0IGNoaWxkID0gZWw7XG4gICAgbGV0IGk7XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBpID0gMDtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgd2hpbGUgKChjaGlsZCA9IGNoaWxkLnByZXZpb3VzU2libGluZykgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSAxKSBpICs9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50UGFyZW50cyhlbCwgc2VsZWN0b3IpIHtcbiAgICBjb25zdCBwYXJlbnRzID0gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBsZXQgcGFyZW50ID0gZWwucGFyZW50RWxlbWVudDsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICBpZiAocGFyZW50Lm1hdGNoZXMoc2VsZWN0b3IpKSBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgfVxuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRzO1xuICB9XG4gIGZ1bmN0aW9uIGVsZW1lbnRUcmFuc2l0aW9uRW5kKGVsLCBjYWxsYmFjaykge1xuICAgIGZ1bmN0aW9uIGZpcmVDYWxsQmFjayhlKSB7XG4gICAgICBpZiAoZS50YXJnZXQgIT09IGVsKSByZXR1cm47XG4gICAgICBjYWxsYmFjay5jYWxsKGVsLCBlKTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmaXJlQ2FsbEJhY2spO1xuICAgIH1cbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmaXJlQ2FsbEJhY2spO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50T3V0ZXJTaXplKGVsLCBzaXplLCBpbmNsdWRlTWFyZ2lucykge1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGlmIChpbmNsdWRlTWFyZ2lucykge1xuICAgICAgcmV0dXJuIGVsW3NpemUgPT09ICd3aWR0aCcgPyAnb2Zmc2V0V2lkdGgnIDogJ29mZnNldEhlaWdodCddICsgcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShzaXplID09PSAnd2lkdGgnID8gJ21hcmdpbi1yaWdodCcgOiAnbWFyZ2luLXRvcCcpKSArIHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoc2l6ZSA9PT0gJ3dpZHRoJyA/ICdtYXJnaW4tbGVmdCcgOiAnbWFyZ2luLWJvdHRvbScpKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsLm9mZnNldFdpZHRoO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VFbGVtZW50c0FycmF5KGVsKSB7XG4gICAgcmV0dXJuIChBcnJheS5pc0FycmF5KGVsKSA/IGVsIDogW2VsXSkuZmlsdGVyKGUgPT4gISFlKTtcbiAgfVxuXG4gIGxldCBzdXBwb3J0O1xuICBmdW5jdGlvbiBjYWxjU3VwcG9ydCgpIHtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNtb290aFNjcm9sbDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiAnc2Nyb2xsQmVoYXZpb3InIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxcbiAgICAgIHRvdWNoOiAhISgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaClcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGdldFN1cHBvcnQoKSB7XG4gICAgaWYgKCFzdXBwb3J0KSB7XG4gICAgICBzdXBwb3J0ID0gY2FsY1N1cHBvcnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cHBvcnQ7XG4gIH1cblxuICBsZXQgZGV2aWNlQ2FjaGVkO1xuICBmdW5jdGlvbiBjYWxjRGV2aWNlKF90ZW1wKSB7XG4gICAgbGV0IHtcbiAgICAgIHVzZXJBZ2VudFxuICAgIH0gPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcDtcbiAgICBjb25zdCBzdXBwb3J0ID0gZ2V0U3VwcG9ydCgpO1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGNvbnN0IHBsYXRmb3JtID0gd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybTtcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudCB8fCB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICBjb25zdCBkZXZpY2UgPSB7XG4gICAgICBpb3M6IGZhbHNlLFxuICAgICAgYW5kcm9pZDogZmFsc2VcbiAgICB9O1xuICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LnNjcmVlbi53aWR0aDtcbiAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSB3aW5kb3cuc2NyZWVuLmhlaWdodDtcbiAgICBjb25zdCBhbmRyb2lkID0gdWEubWF0Y2goLyhBbmRyb2lkKTs/W1xcc1xcL10rKFtcXGQuXSspPy8pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgbGV0IGlwYWQgPSB1YS5tYXRjaCgvKGlQYWQpLipPU1xccyhbXFxkX10rKS8pO1xuICAgIGNvbnN0IGlwb2QgPSB1YS5tYXRjaCgvKGlQb2QpKC4qT1NcXHMoW1xcZF9dKykpPy8pO1xuICAgIGNvbnN0IGlwaG9uZSA9ICFpcGFkICYmIHVhLm1hdGNoKC8oaVBob25lXFxzT1N8aU9TKVxccyhbXFxkX10rKS8pO1xuICAgIGNvbnN0IHdpbmRvd3MgPSBwbGF0Zm9ybSA9PT0gJ1dpbjMyJztcbiAgICBsZXQgbWFjb3MgPSBwbGF0Zm9ybSA9PT0gJ01hY0ludGVsJztcblxuICAgIC8vIGlQYWRPcyAxMyBmaXhcbiAgICBjb25zdCBpUGFkU2NyZWVucyA9IFsnMTAyNHgxMzY2JywgJzEzNjZ4MTAyNCcsICc4MzR4MTE5NCcsICcxMTk0eDgzNCcsICc4MzR4MTExMicsICcxMTEyeDgzNCcsICc3Njh4MTAyNCcsICcxMDI0eDc2OCcsICc4MjB4MTE4MCcsICcxMTgweDgyMCcsICc4MTB4MTA4MCcsICcxMDgweDgxMCddO1xuICAgIGlmICghaXBhZCAmJiBtYWNvcyAmJiBzdXBwb3J0LnRvdWNoICYmIGlQYWRTY3JlZW5zLmluZGV4T2YoYCR7c2NyZWVuV2lkdGh9eCR7c2NyZWVuSGVpZ2h0fWApID49IDApIHtcbiAgICAgIGlwYWQgPSB1YS5tYXRjaCgvKFZlcnNpb24pXFwvKFtcXGQuXSspLyk7XG4gICAgICBpZiAoIWlwYWQpIGlwYWQgPSBbMCwgMSwgJzEzXzBfMCddO1xuICAgICAgbWFjb3MgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBBbmRyb2lkXG4gICAgaWYgKGFuZHJvaWQgJiYgIXdpbmRvd3MpIHtcbiAgICAgIGRldmljZS5vcyA9ICdhbmRyb2lkJztcbiAgICAgIGRldmljZS5hbmRyb2lkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGlwYWQgfHwgaXBob25lIHx8IGlwb2QpIHtcbiAgICAgIGRldmljZS5vcyA9ICdpb3MnO1xuICAgICAgZGV2aWNlLmlvcyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gRXhwb3J0IG9iamVjdFxuICAgIHJldHVybiBkZXZpY2U7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0RGV2aWNlKG92ZXJyaWRlcykge1xuICAgIGlmIChvdmVycmlkZXMgPT09IHZvaWQgMCkge1xuICAgICAgb3ZlcnJpZGVzID0ge307XG4gICAgfVxuICAgIGlmICghZGV2aWNlQ2FjaGVkKSB7XG4gICAgICBkZXZpY2VDYWNoZWQgPSBjYWxjRGV2aWNlKG92ZXJyaWRlcyk7XG4gICAgfVxuICAgIHJldHVybiBkZXZpY2VDYWNoZWQ7XG4gIH1cblxuICBsZXQgYnJvd3NlcjtcbiAgZnVuY3Rpb24gY2FsY0Jyb3dzZXIoKSB7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgY29uc3QgZGV2aWNlID0gZ2V0RGV2aWNlKCk7XG4gICAgbGV0IG5lZWRQZXJzcGVjdGl2ZUZpeCA9IGZhbHNlO1xuICAgIGZ1bmN0aW9uIGlzU2FmYXJpKCkge1xuICAgICAgY29uc3QgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHVhLmluZGV4T2YoJ3NhZmFyaScpID49IDAgJiYgdWEuaW5kZXhPZignY2hyb21lJykgPCAwICYmIHVhLmluZGV4T2YoJ2FuZHJvaWQnKSA8IDA7XG4gICAgfVxuICAgIGlmIChpc1NhZmFyaSgpKSB7XG4gICAgICBjb25zdCB1YSA9IFN0cmluZyh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICBpZiAodWEuaW5jbHVkZXMoJ1ZlcnNpb24vJykpIHtcbiAgICAgICAgY29uc3QgW21ham9yLCBtaW5vcl0gPSB1YS5zcGxpdCgnVmVyc2lvbi8nKVsxXS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJykubWFwKG51bSA9PiBOdW1iZXIobnVtKSk7XG4gICAgICAgIG5lZWRQZXJzcGVjdGl2ZUZpeCA9IG1ham9yIDwgMTYgfHwgbWFqb3IgPT09IDE2ICYmIG1pbm9yIDwgMjtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaXNXZWJWaWV3ID0gLyhpUGhvbmV8aVBvZHxpUGFkKS4qQXBwbGVXZWJLaXQoPyEuKlNhZmFyaSkvaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICBjb25zdCBpc1NhZmFyaUJyb3dzZXIgPSBpc1NhZmFyaSgpO1xuICAgIGNvbnN0IG5lZWQzZEZpeCA9IGlzU2FmYXJpQnJvd3NlciB8fCBpc1dlYlZpZXcgJiYgZGV2aWNlLmlvcztcbiAgICByZXR1cm4ge1xuICAgICAgaXNTYWZhcmk6IG5lZWRQZXJzcGVjdGl2ZUZpeCB8fCBpc1NhZmFyaUJyb3dzZXIsXG4gICAgICBuZWVkUGVyc3BlY3RpdmVGaXgsXG4gICAgICBuZWVkM2RGaXgsXG4gICAgICBpc1dlYlZpZXdcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGdldEJyb3dzZXIoKSB7XG4gICAgaWYgKCFicm93c2VyKSB7XG4gICAgICBicm93c2VyID0gY2FsY0Jyb3dzZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIGJyb3dzZXI7XG4gIH1cblxuICBmdW5jdGlvbiBSZXNpemUoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIGVtaXRcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBsZXQgb2JzZXJ2ZXIgPSBudWxsO1xuICAgIGxldCBhbmltYXRpb25GcmFtZSA9IG51bGw7XG4gICAgY29uc3QgcmVzaXplSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5pbml0aWFsaXplZCkgcmV0dXJuO1xuICAgICAgZW1pdCgnYmVmb3JlUmVzaXplJyk7XG4gICAgICBlbWl0KCdyZXNpemUnKTtcbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZU9ic2VydmVyID0gKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmluaXRpYWxpemVkKSByZXR1cm47XG4gICAgICBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihlbnRyaWVzID0+IHtcbiAgICAgICAgYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodFxuICAgICAgICAgIH0gPSBzd2lwZXI7XG4gICAgICAgICAgbGV0IG5ld1dpZHRoID0gd2lkdGg7XG4gICAgICAgICAgbGV0IG5ld0hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICBlbnRyaWVzLmZvckVhY2goX3JlZjIgPT4ge1xuICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgY29udGVudEJveFNpemUsXG4gICAgICAgICAgICAgIGNvbnRlbnRSZWN0LFxuICAgICAgICAgICAgICB0YXJnZXRcbiAgICAgICAgICAgIH0gPSBfcmVmMjtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0ICE9PSBzd2lwZXIuZWwpIHJldHVybjtcbiAgICAgICAgICAgIG5ld1dpZHRoID0gY29udGVudFJlY3QgPyBjb250ZW50UmVjdC53aWR0aCA6IChjb250ZW50Qm94U2l6ZVswXSB8fCBjb250ZW50Qm94U2l6ZSkuaW5saW5lU2l6ZTtcbiAgICAgICAgICAgIG5ld0hlaWdodCA9IGNvbnRlbnRSZWN0ID8gY29udGVudFJlY3QuaGVpZ2h0IDogKGNvbnRlbnRCb3hTaXplWzBdIHx8IGNvbnRlbnRCb3hTaXplKS5ibG9ja1NpemU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKG5ld1dpZHRoICE9PSB3aWR0aCB8fCBuZXdIZWlnaHQgIT09IGhlaWdodCkge1xuICAgICAgICAgICAgcmVzaXplSGFuZGxlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoc3dpcGVyLmVsKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZU9ic2VydmVyID0gKCkgPT4ge1xuICAgICAgaWYgKGFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAob2JzZXJ2ZXIgJiYgb2JzZXJ2ZXIudW5vYnNlcnZlICYmIHN3aXBlci5lbCkge1xuICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoc3dpcGVyLmVsKTtcbiAgICAgICAgb2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb3JpZW50YXRpb25DaGFuZ2VIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmluaXRpYWxpemVkKSByZXR1cm47XG4gICAgICBlbWl0KCdvcmllbnRhdGlvbmNoYW5nZScpO1xuICAgIH07XG4gICAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5yZXNpemVPYnNlcnZlciAmJiB0eXBlb2Ygd2luZG93LlJlc2l6ZU9ic2VydmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjcmVhdGVPYnNlcnZlcigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlcik7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBvcmllbnRhdGlvbkNoYW5nZUhhbmRsZXIpO1xuICAgIH0pO1xuICAgIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgICAgcmVtb3ZlT2JzZXJ2ZXIoKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVIYW5kbGVyKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIG9yaWVudGF0aW9uQ2hhbmdlSGFuZGxlcik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBPYnNlcnZlcihfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uLFxuICAgICAgZW1pdFxuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IG9ic2VydmVycyA9IFtdO1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGNvbnN0IGF0dGFjaCA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgY29uc3QgT2JzZXJ2ZXJGdW5jID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYmtpdE11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBPYnNlcnZlckZ1bmMobXV0YXRpb25zID0+IHtcbiAgICAgICAgLy8gVGhlIG9ic2VydmVyVXBkYXRlIGV2ZW50IHNob3VsZCBvbmx5IGJlIHRyaWdnZXJlZFxuICAgICAgICAvLyBvbmNlIGRlc3BpdGUgdGhlIG51bWJlciBvZiBtdXRhdGlvbnMuICBBZGRpdGlvbmFsXG4gICAgICAgIC8vIHRyaWdnZXJzIGFyZSByZWR1bmRhbnQgYW5kIGFyZSB2ZXJ5IGNvc3RseVxuICAgICAgICBpZiAoc3dpcGVyLl9fcHJldmVudE9ic2VydmVyX18pIHJldHVybjtcbiAgICAgICAgaWYgKG11dGF0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBlbWl0KCdvYnNlcnZlclVwZGF0ZScsIG11dGF0aW9uc1swXSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9ic2VydmVyVXBkYXRlID0gZnVuY3Rpb24gb2JzZXJ2ZXJVcGRhdGUoKSB7XG4gICAgICAgICAgZW1pdCgnb2JzZXJ2ZXJVcGRhdGUnLCBtdXRhdGlvbnNbMF0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUob2JzZXJ2ZXJVcGRhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KG9ic2VydmVyVXBkYXRlLCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkTGlzdDogdHlwZW9mIG9wdGlvbnMuY2hpbGRMaXN0ID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLmNoaWxkTGlzdCxcbiAgICAgICAgY2hhcmFjdGVyRGF0YTogdHlwZW9mIG9wdGlvbnMuY2hhcmFjdGVyRGF0YSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy5jaGFyYWN0ZXJEYXRhXG4gICAgICB9KTtcbiAgICAgIG9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcbiAgICB9O1xuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMub2JzZXJ2ZXIpIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLm9ic2VydmVQYXJlbnRzKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclBhcmVudHMgPSBlbGVtZW50UGFyZW50cyhzd2lwZXIuaG9zdEVsKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250YWluZXJQYXJlbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgYXR0YWNoKGNvbnRhaW5lclBhcmVudHNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBPYnNlcnZlIGNvbnRhaW5lclxuICAgICAgYXR0YWNoKHN3aXBlci5ob3N0RWwsIHtcbiAgICAgICAgY2hpbGRMaXN0OiBzd2lwZXIucGFyYW1zLm9ic2VydmVTbGlkZUNoaWxkcmVuXG4gICAgICB9KTtcblxuICAgICAgLy8gT2JzZXJ2ZSB3cmFwcGVyXG4gICAgICBhdHRhY2goc3dpcGVyLndyYXBwZXJFbCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgICAgb2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4ge1xuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB9KTtcbiAgICAgIG9ic2VydmVycy5zcGxpY2UoMCwgb2JzZXJ2ZXJzLmxlbmd0aCk7XG4gICAgfTtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgb2JzZXJ2ZXI6IGZhbHNlLFxuICAgICAgb2JzZXJ2ZVBhcmVudHM6IGZhbHNlLFxuICAgICAgb2JzZXJ2ZVNsaWRlQ2hpbGRyZW46IGZhbHNlXG4gICAgfSk7XG4gICAgb24oJ2luaXQnLCBpbml0KTtcbiAgICBvbignZGVzdHJveScsIGRlc3Ryb3kpO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cblxuICB2YXIgZXZlbnRzRW1pdHRlciA9IHtcbiAgICBvbihldmVudHMsIGhhbmRsZXIsIHByaW9yaXR5KSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMgfHwgc2VsZi5kZXN0cm95ZWQpIHJldHVybiBzZWxmO1xuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gc2VsZjtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IHByaW9yaXR5ID8gJ3Vuc2hpZnQnIDogJ3B1c2gnO1xuICAgICAgZXZlbnRzLnNwbGl0KCcgJykuZm9yRWFjaChldmVudCA9PiB7XG4gICAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdKSBzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0gPSBbXTtcbiAgICAgICAgc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdW21ldGhvZF0oaGFuZGxlcik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG4gICAgb25jZShldmVudHMsIGhhbmRsZXIsIHByaW9yaXR5KSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMgfHwgc2VsZi5kZXN0cm95ZWQpIHJldHVybiBzZWxmO1xuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gc2VsZjtcbiAgICAgIGZ1bmN0aW9uIG9uY2VIYW5kbGVyKCkge1xuICAgICAgICBzZWxmLm9mZihldmVudHMsIG9uY2VIYW5kbGVyKTtcbiAgICAgICAgaWYgKG9uY2VIYW5kbGVyLl9fZW1pdHRlclByb3h5KSB7XG4gICAgICAgICAgZGVsZXRlIG9uY2VIYW5kbGVyLl9fZW1pdHRlclByb3h5O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlci5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIG9uY2VIYW5kbGVyLl9fZW1pdHRlclByb3h5ID0gaGFuZGxlcjtcbiAgICAgIHJldHVybiBzZWxmLm9uKGV2ZW50cywgb25jZUhhbmRsZXIsIHByaW9yaXR5KTtcbiAgICB9LFxuICAgIG9uQW55KGhhbmRsZXIsIHByaW9yaXR5KSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMgfHwgc2VsZi5kZXN0cm95ZWQpIHJldHVybiBzZWxmO1xuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gc2VsZjtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IHByaW9yaXR5ID8gJ3Vuc2hpZnQnIDogJ3B1c2gnO1xuICAgICAgaWYgKHNlbGYuZXZlbnRzQW55TGlzdGVuZXJzLmluZGV4T2YoaGFuZGxlcikgPCAwKSB7XG4gICAgICAgIHNlbGYuZXZlbnRzQW55TGlzdGVuZXJzW21ldGhvZF0oaGFuZGxlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuICAgIG9mZkFueShoYW5kbGVyKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMgfHwgc2VsZi5kZXN0cm95ZWQpIHJldHVybiBzZWxmO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0FueUxpc3RlbmVycykgcmV0dXJuIHNlbGY7XG4gICAgICBjb25zdCBpbmRleCA9IHNlbGYuZXZlbnRzQW55TGlzdGVuZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBzZWxmLmV2ZW50c0FueUxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcbiAgICBvZmYoZXZlbnRzLCBoYW5kbGVyKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMgfHwgc2VsZi5kZXN0cm95ZWQpIHJldHVybiBzZWxmO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycykgcmV0dXJuIHNlbGY7XG4gICAgICBldmVudHMuc3BsaXQoJyAnKS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgICAgIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XS5mb3JFYWNoKChldmVudEhhbmRsZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnRIYW5kbGVyID09PSBoYW5kbGVyIHx8IGV2ZW50SGFuZGxlci5fX2VtaXR0ZXJQcm94eSAmJiBldmVudEhhbmRsZXIuX19lbWl0dGVyUHJveHkgPT09IGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcbiAgICBlbWl0KCkge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBpZiAoIXNlbGYuZXZlbnRzTGlzdGVuZXJzIHx8IHNlbGYuZGVzdHJveWVkKSByZXR1cm4gc2VsZjtcbiAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMpIHJldHVybiBzZWxmO1xuICAgICAgbGV0IGV2ZW50cztcbiAgICAgIGxldCBkYXRhO1xuICAgICAgbGV0IGNvbnRleHQ7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnc3RyaW5nJyB8fCBBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICAgIGV2ZW50cyA9IGFyZ3NbMF07XG4gICAgICAgIGRhdGEgPSBhcmdzLnNsaWNlKDEsIGFyZ3MubGVuZ3RoKTtcbiAgICAgICAgY29udGV4dCA9IHNlbGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudHMgPSBhcmdzWzBdLmV2ZW50cztcbiAgICAgICAgZGF0YSA9IGFyZ3NbMF0uZGF0YTtcbiAgICAgICAgY29udGV4dCA9IGFyZ3NbMF0uY29udGV4dCB8fCBzZWxmO1xuICAgICAgfVxuICAgICAgZGF0YS51bnNoaWZ0KGNvbnRleHQpO1xuICAgICAgY29uc3QgZXZlbnRzQXJyYXkgPSBBcnJheS5pc0FycmF5KGV2ZW50cykgPyBldmVudHMgOiBldmVudHMuc3BsaXQoJyAnKTtcbiAgICAgIGV2ZW50c0FycmF5LmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICBpZiAoc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnMgJiYgc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnMubGVuZ3RoKSB7XG4gICAgICAgICAgc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnMuZm9yRWFjaChldmVudEhhbmRsZXIgPT4ge1xuICAgICAgICAgICAgZXZlbnRIYW5kbGVyLmFwcGx5KGNvbnRleHQsIFtldmVudCwgLi4uZGF0YV0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmV2ZW50c0xpc3RlbmVycyAmJiBzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgICAgICBzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0uZm9yRWFjaChldmVudEhhbmRsZXIgPT4ge1xuICAgICAgICAgICAgZXZlbnRIYW5kbGVyLmFwcGx5KGNvbnRleHQsIGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiB1cGRhdGVTaXplKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgbGV0IHdpZHRoO1xuICAgIGxldCBoZWlnaHQ7XG4gICAgY29uc3QgZWwgPSBzd2lwZXIuZWw7XG4gICAgaWYgKHR5cGVvZiBzd2lwZXIucGFyYW1zLndpZHRoICE9PSAndW5kZWZpbmVkJyAmJiBzd2lwZXIucGFyYW1zLndpZHRoICE9PSBudWxsKSB7XG4gICAgICB3aWR0aCA9IHN3aXBlci5wYXJhbXMud2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpZHRoID0gZWwuY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3dpcGVyLnBhcmFtcy5oZWlnaHQgIT09ICd1bmRlZmluZWQnICYmIHN3aXBlci5wYXJhbXMuaGVpZ2h0ICE9PSBudWxsKSB7XG4gICAgICBoZWlnaHQgPSBzd2lwZXIucGFyYW1zLmhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgaGVpZ2h0ID0gZWwuY2xpZW50SGVpZ2h0O1xuICAgIH1cbiAgICBpZiAod2lkdGggPT09IDAgJiYgc3dpcGVyLmlzSG9yaXpvbnRhbCgpIHx8IGhlaWdodCA9PT0gMCAmJiBzd2lwZXIuaXNWZXJ0aWNhbCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU3VidHJhY3QgcGFkZGluZ3NcbiAgICB3aWR0aCA9IHdpZHRoIC0gcGFyc2VJbnQoZWxlbWVudFN0eWxlKGVsLCAncGFkZGluZy1sZWZ0JykgfHwgMCwgMTApIC0gcGFyc2VJbnQoZWxlbWVudFN0eWxlKGVsLCAncGFkZGluZy1yaWdodCcpIHx8IDAsIDEwKTtcbiAgICBoZWlnaHQgPSBoZWlnaHQgLSBwYXJzZUludChlbGVtZW50U3R5bGUoZWwsICdwYWRkaW5nLXRvcCcpIHx8IDAsIDEwKSAtIHBhcnNlSW50KGVsZW1lbnRTdHlsZShlbCwgJ3BhZGRpbmctYm90dG9tJykgfHwgMCwgMTApO1xuICAgIGlmIChOdW1iZXIuaXNOYU4od2lkdGgpKSB3aWR0aCA9IDA7XG4gICAgaWYgKE51bWJlci5pc05hTihoZWlnaHQpKSBoZWlnaHQgPSAwO1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIHNpemU6IHN3aXBlci5pc0hvcml6b250YWwoKSA/IHdpZHRoIDogaGVpZ2h0XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVTbGlkZXMoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBmdW5jdGlvbiBnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlKG5vZGUsIGxhYmVsKSB7XG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLmdldFByb3BlcnR5VmFsdWUoc3dpcGVyLmdldERpcmVjdGlvbkxhYmVsKGxhYmVsKSkgfHwgMCk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXM7XG4gICAgY29uc3Qge1xuICAgICAgd3JhcHBlckVsLFxuICAgICAgc2xpZGVzRWwsXG4gICAgICBzaXplOiBzd2lwZXJTaXplLFxuICAgICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgICB3cm9uZ1JUTFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgaXNWaXJ0dWFsID0gc3dpcGVyLnZpcnR1YWwgJiYgcGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgICBjb25zdCBwcmV2aW91c1NsaWRlc0xlbmd0aCA9IGlzVmlydHVhbCA/IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggOiBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcbiAgICBjb25zdCBzbGlkZXMgPSBlbGVtZW50Q2hpbGRyZW4oc2xpZGVzRWwsIGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICBjb25zdCBzbGlkZXNMZW5ndGggPSBpc1ZpcnR1YWwgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogc2xpZGVzLmxlbmd0aDtcbiAgICBsZXQgc25hcEdyaWQgPSBbXTtcbiAgICBjb25zdCBzbGlkZXNHcmlkID0gW107XG4gICAgY29uc3Qgc2xpZGVzU2l6ZXNHcmlkID0gW107XG4gICAgbGV0IG9mZnNldEJlZm9yZSA9IHBhcmFtcy5zbGlkZXNPZmZzZXRCZWZvcmU7XG4gICAgaWYgKHR5cGVvZiBvZmZzZXRCZWZvcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9mZnNldEJlZm9yZSA9IHBhcmFtcy5zbGlkZXNPZmZzZXRCZWZvcmUuY2FsbChzd2lwZXIpO1xuICAgIH1cbiAgICBsZXQgb2Zmc2V0QWZ0ZXIgPSBwYXJhbXMuc2xpZGVzT2Zmc2V0QWZ0ZXI7XG4gICAgaWYgKHR5cGVvZiBvZmZzZXRBZnRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb2Zmc2V0QWZ0ZXIgPSBwYXJhbXMuc2xpZGVzT2Zmc2V0QWZ0ZXIuY2FsbChzd2lwZXIpO1xuICAgIH1cbiAgICBjb25zdCBwcmV2aW91c1NuYXBHcmlkTGVuZ3RoID0gc3dpcGVyLnNuYXBHcmlkLmxlbmd0aDtcbiAgICBjb25zdCBwcmV2aW91c1NsaWRlc0dyaWRMZW5ndGggPSBzd2lwZXIuc2xpZGVzR3JpZC5sZW5ndGg7XG4gICAgbGV0IHNwYWNlQmV0d2VlbiA9IHBhcmFtcy5zcGFjZUJldHdlZW47XG4gICAgbGV0IHNsaWRlUG9zaXRpb24gPSAtb2Zmc2V0QmVmb3JlO1xuICAgIGxldCBwcmV2U2xpZGVTaXplID0gMDtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGlmICh0eXBlb2Ygc3dpcGVyU2l6ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzcGFjZUJldHdlZW4gPT09ICdzdHJpbmcnICYmIHNwYWNlQmV0d2Vlbi5pbmRleE9mKCclJykgPj0gMCkge1xuICAgICAgc3BhY2VCZXR3ZWVuID0gcGFyc2VGbG9hdChzcGFjZUJldHdlZW4ucmVwbGFjZSgnJScsICcnKSkgLyAxMDAgKiBzd2lwZXJTaXplO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwYWNlQmV0d2VlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHNwYWNlQmV0d2VlbiA9IHBhcnNlRmxvYXQoc3BhY2VCZXR3ZWVuKTtcbiAgICB9XG4gICAgc3dpcGVyLnZpcnR1YWxTaXplID0gLXNwYWNlQmV0d2VlbjtcblxuICAgIC8vIHJlc2V0IG1hcmdpbnNcbiAgICBzbGlkZXMuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgIGlmIChydGwpIHtcbiAgICAgICAgc2xpZGVFbC5zdHlsZS5tYXJnaW5MZWZ0ID0gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZUVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gJyc7XG4gICAgICB9XG4gICAgICBzbGlkZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcnO1xuICAgICAgc2xpZGVFbC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcbiAgICB9KTtcblxuICAgIC8vIHJlc2V0IGNzc01vZGUgb2Zmc2V0c1xuICAgIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgcGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHNldENTU1Byb3BlcnR5KHdyYXBwZXJFbCwgJy0tc3dpcGVyLWNlbnRlcmVkLW9mZnNldC1iZWZvcmUnLCAnJyk7XG4gICAgICBzZXRDU1NQcm9wZXJ0eSh3cmFwcGVyRWwsICctLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYWZ0ZXInLCAnJyk7XG4gICAgfVxuICAgIGNvbnN0IGdyaWRFbmFibGVkID0gcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDEgJiYgc3dpcGVyLmdyaWQ7XG4gICAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICBzd2lwZXIuZ3JpZC5pbml0U2xpZGVzKHNsaWRlcyk7XG4gICAgfSBlbHNlIGlmIChzd2lwZXIuZ3JpZCkge1xuICAgICAgc3dpcGVyLmdyaWQudW5zZXRTbGlkZXMoKTtcbiAgICB9XG5cbiAgICAvLyBDYWxjIHNsaWRlc1xuICAgIGxldCBzbGlkZVNpemU7XG4gICAgY29uc3Qgc2hvdWxkUmVzZXRTbGlkZVNpemUgPSBwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nICYmIHBhcmFtcy5icmVha3BvaW50cyAmJiBPYmplY3Qua2V5cyhwYXJhbXMuYnJlYWtwb2ludHMpLmZpbHRlcihrZXkgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiBwYXJhbXMuYnJlYWtwb2ludHNba2V5XS5zbGlkZXNQZXJWaWV3ICE9PSAndW5kZWZpbmVkJztcbiAgICB9KS5sZW5ndGggPiAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHNsaWRlU2l6ZSA9IDA7XG4gICAgICBsZXQgc2xpZGU7XG4gICAgICBpZiAoc2xpZGVzW2ldKSBzbGlkZSA9IHNsaWRlc1tpXTtcbiAgICAgIGlmIChncmlkRW5hYmxlZCkge1xuICAgICAgICBzd2lwZXIuZ3JpZC51cGRhdGVTbGlkZShpLCBzbGlkZSwgc2xpZGVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChzbGlkZXNbaV0gJiYgZWxlbWVudFN0eWxlKHNsaWRlLCAnZGlzcGxheScpID09PSAnbm9uZScpIGNvbnRpbnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICAgIGlmIChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nKSB7XG4gICAgICAgIGlmIChzaG91bGRSZXNldFNsaWRlU2l6ZSkge1xuICAgICAgICAgIHNsaWRlc1tpXS5zdHlsZVtzd2lwZXIuZ2V0RGlyZWN0aW9uTGFiZWwoJ3dpZHRoJyldID0gYGA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2xpZGVTdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKHNsaWRlKTtcbiAgICAgICAgY29uc3QgY3VycmVudFRyYW5zZm9ybSA9IHNsaWRlLnN0eWxlLnRyYW5zZm9ybTtcbiAgICAgICAgY29uc3QgY3VycmVudFdlYktpdFRyYW5zZm9ybSA9IHNsaWRlLnN0eWxlLndlYmtpdFRyYW5zZm9ybTtcbiAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICBzbGlkZS5zdHlsZS50cmFuc2Zvcm0gPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRXZWJLaXRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICBzbGlkZS5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5yb3VuZExlbmd0aHMpIHtcbiAgICAgICAgICBzbGlkZVNpemUgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBlbGVtZW50T3V0ZXJTaXplKHNsaWRlLCAnd2lkdGgnLCB0cnVlKSA6IGVsZW1lbnRPdXRlclNpemUoc2xpZGUsICdoZWlnaHQnLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICBjb25zdCB3aWR0aCA9IGdldERpcmVjdGlvblByb3BlcnR5VmFsdWUoc2xpZGVTdHlsZXMsICd3aWR0aCcpO1xuICAgICAgICAgIGNvbnN0IHBhZGRpbmdMZWZ0ID0gZ2V0RGlyZWN0aW9uUHJvcGVydHlWYWx1ZShzbGlkZVN0eWxlcywgJ3BhZGRpbmctbGVmdCcpO1xuICAgICAgICAgIGNvbnN0IHBhZGRpbmdSaWdodCA9IGdldERpcmVjdGlvblByb3BlcnR5VmFsdWUoc2xpZGVTdHlsZXMsICdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgICAgICAgY29uc3QgbWFyZ2luTGVmdCA9IGdldERpcmVjdGlvblByb3BlcnR5VmFsdWUoc2xpZGVTdHlsZXMsICdtYXJnaW4tbGVmdCcpO1xuICAgICAgICAgIGNvbnN0IG1hcmdpblJpZ2h0ID0gZ2V0RGlyZWN0aW9uUHJvcGVydHlWYWx1ZShzbGlkZVN0eWxlcywgJ21hcmdpbi1yaWdodCcpO1xuICAgICAgICAgIGNvbnN0IGJveFNpemluZyA9IHNsaWRlU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2JveC1zaXppbmcnKTtcbiAgICAgICAgICBpZiAoYm94U2l6aW5nICYmIGJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnKSB7XG4gICAgICAgICAgICBzbGlkZVNpemUgPSB3aWR0aCArIG1hcmdpbkxlZnQgKyBtYXJnaW5SaWdodDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICBjbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgb2Zmc2V0V2lkdGhcbiAgICAgICAgICAgIH0gPSBzbGlkZTtcbiAgICAgICAgICAgIHNsaWRlU2l6ZSA9IHdpZHRoICsgcGFkZGluZ0xlZnQgKyBwYWRkaW5nUmlnaHQgKyBtYXJnaW5MZWZ0ICsgbWFyZ2luUmlnaHQgKyAob2Zmc2V0V2lkdGggLSBjbGllbnRXaWR0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50VHJhbnNmb3JtKSB7XG4gICAgICAgICAgc2xpZGUuc3R5bGUudHJhbnNmb3JtID0gY3VycmVudFRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFdlYktpdFRyYW5zZm9ybSkge1xuICAgICAgICAgIHNsaWRlLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IGN1cnJlbnRXZWJLaXRUcmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5yb3VuZExlbmd0aHMpIHNsaWRlU2l6ZSA9IE1hdGguZmxvb3Ioc2xpZGVTaXplKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlU2l6ZSA9IChzd2lwZXJTaXplIC0gKHBhcmFtcy5zbGlkZXNQZXJWaWV3IC0gMSkgKiBzcGFjZUJldHdlZW4pIC8gcGFyYW1zLnNsaWRlc1BlclZpZXc7XG4gICAgICAgIGlmIChwYXJhbXMucm91bmRMZW5ndGhzKSBzbGlkZVNpemUgPSBNYXRoLmZsb29yKHNsaWRlU2l6ZSk7XG4gICAgICAgIGlmIChzbGlkZXNbaV0pIHtcbiAgICAgICAgICBzbGlkZXNbaV0uc3R5bGVbc3dpcGVyLmdldERpcmVjdGlvbkxhYmVsKCd3aWR0aCcpXSA9IGAke3NsaWRlU2l6ZX1weGA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzbGlkZXNbaV0pIHtcbiAgICAgICAgc2xpZGVzW2ldLnN3aXBlclNsaWRlU2l6ZSA9IHNsaWRlU2l6ZTtcbiAgICAgIH1cbiAgICAgIHNsaWRlc1NpemVzR3JpZC5wdXNoKHNsaWRlU2l6ZSk7XG4gICAgICBpZiAocGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIHNsaWRlUG9zaXRpb24gPSBzbGlkZVBvc2l0aW9uICsgc2xpZGVTaXplIC8gMiArIHByZXZTbGlkZVNpemUgLyAyICsgc3BhY2VCZXR3ZWVuO1xuICAgICAgICBpZiAocHJldlNsaWRlU2l6ZSA9PT0gMCAmJiBpICE9PSAwKSBzbGlkZVBvc2l0aW9uID0gc2xpZGVQb3NpdGlvbiAtIHN3aXBlclNpemUgLyAyIC0gc3BhY2VCZXR3ZWVuO1xuICAgICAgICBpZiAoaSA9PT0gMCkgc2xpZGVQb3NpdGlvbiA9IHNsaWRlUG9zaXRpb24gLSBzd2lwZXJTaXplIC8gMiAtIHNwYWNlQmV0d2VlbjtcbiAgICAgICAgaWYgKE1hdGguYWJzKHNsaWRlUG9zaXRpb24pIDwgMSAvIDEwMDApIHNsaWRlUG9zaXRpb24gPSAwO1xuICAgICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykgc2xpZGVQb3NpdGlvbiA9IE1hdGguZmxvb3Ioc2xpZGVQb3NpdGlvbik7XG4gICAgICAgIGlmIChpbmRleCAlIHBhcmFtcy5zbGlkZXNQZXJHcm91cCA9PT0gMCkgc25hcEdyaWQucHVzaChzbGlkZVBvc2l0aW9uKTtcbiAgICAgICAgc2xpZGVzR3JpZC5wdXNoKHNsaWRlUG9zaXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHBhcmFtcy5yb3VuZExlbmd0aHMpIHNsaWRlUG9zaXRpb24gPSBNYXRoLmZsb29yKHNsaWRlUG9zaXRpb24pO1xuICAgICAgICBpZiAoKGluZGV4IC0gTWF0aC5taW4oc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIGluZGV4KSkgJSBzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAwKSBzbmFwR3JpZC5wdXNoKHNsaWRlUG9zaXRpb24pO1xuICAgICAgICBzbGlkZXNHcmlkLnB1c2goc2xpZGVQb3NpdGlvbik7XG4gICAgICAgIHNsaWRlUG9zaXRpb24gPSBzbGlkZVBvc2l0aW9uICsgc2xpZGVTaXplICsgc3BhY2VCZXR3ZWVuO1xuICAgICAgfVxuICAgICAgc3dpcGVyLnZpcnR1YWxTaXplICs9IHNsaWRlU2l6ZSArIHNwYWNlQmV0d2VlbjtcbiAgICAgIHByZXZTbGlkZVNpemUgPSBzbGlkZVNpemU7XG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cbiAgICBzd2lwZXIudmlydHVhbFNpemUgPSBNYXRoLm1heChzd2lwZXIudmlydHVhbFNpemUsIHN3aXBlclNpemUpICsgb2Zmc2V0QWZ0ZXI7XG4gICAgaWYgKHJ0bCAmJiB3cm9uZ1JUTCAmJiAocGFyYW1zLmVmZmVjdCA9PT0gJ3NsaWRlJyB8fCBwYXJhbXMuZWZmZWN0ID09PSAnY292ZXJmbG93JykpIHtcbiAgICAgIHdyYXBwZXJFbC5zdHlsZS53aWR0aCA9IGAke3N3aXBlci52aXJ0dWFsU2l6ZSArIHNwYWNlQmV0d2Vlbn1weGA7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuc2V0V3JhcHBlclNpemUpIHtcbiAgICAgIHdyYXBwZXJFbC5zdHlsZVtzd2lwZXIuZ2V0RGlyZWN0aW9uTGFiZWwoJ3dpZHRoJyldID0gYCR7c3dpcGVyLnZpcnR1YWxTaXplICsgc3BhY2VCZXR3ZWVufXB4YDtcbiAgICB9XG4gICAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICBzd2lwZXIuZ3JpZC51cGRhdGVXcmFwcGVyU2l6ZShzbGlkZVNpemUsIHNuYXBHcmlkKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgbGFzdCBncmlkIGVsZW1lbnRzIGRlcGVuZGluZyBvbiB3aWR0aFxuICAgIGlmICghcGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICBjb25zdCBuZXdTbGlkZXNHcmlkID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNuYXBHcmlkLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGxldCBzbGlkZXNHcmlkSXRlbSA9IHNuYXBHcmlkW2ldO1xuICAgICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykgc2xpZGVzR3JpZEl0ZW0gPSBNYXRoLmZsb29yKHNsaWRlc0dyaWRJdGVtKTtcbiAgICAgICAgaWYgKHNuYXBHcmlkW2ldIDw9IHN3aXBlci52aXJ0dWFsU2l6ZSAtIHN3aXBlclNpemUpIHtcbiAgICAgICAgICBuZXdTbGlkZXNHcmlkLnB1c2goc2xpZGVzR3JpZEl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzbmFwR3JpZCA9IG5ld1NsaWRlc0dyaWQ7XG4gICAgICBpZiAoTWF0aC5mbG9vcihzd2lwZXIudmlydHVhbFNpemUgLSBzd2lwZXJTaXplKSAtIE1hdGguZmxvb3Ioc25hcEdyaWRbc25hcEdyaWQubGVuZ3RoIC0gMV0pID4gMSkge1xuICAgICAgICBzbmFwR3JpZC5wdXNoKHN3aXBlci52aXJ0dWFsU2l6ZSAtIHN3aXBlclNpemUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNWaXJ0dWFsICYmIHBhcmFtcy5sb29wKSB7XG4gICAgICBjb25zdCBzaXplID0gc2xpZGVzU2l6ZXNHcmlkWzBdICsgc3BhY2VCZXR3ZWVuO1xuICAgICAgaWYgKHBhcmFtcy5zbGlkZXNQZXJHcm91cCA+IDEpIHtcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gTWF0aC5jZWlsKChzd2lwZXIudmlydHVhbC5zbGlkZXNCZWZvcmUgKyBzd2lwZXIudmlydHVhbC5zbGlkZXNBZnRlcikgLyBwYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICAgICAgICBjb25zdCBncm91cFNpemUgPSBzaXplICogcGFyYW1zLnNsaWRlc1Blckdyb3VwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3VwczsgaSArPSAxKSB7XG4gICAgICAgICAgc25hcEdyaWQucHVzaChzbmFwR3JpZFtzbmFwR3JpZC5sZW5ndGggLSAxXSArIGdyb3VwU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dpcGVyLnZpcnR1YWwuc2xpZGVzQmVmb3JlICsgc3dpcGVyLnZpcnR1YWwuc2xpZGVzQWZ0ZXI7IGkgKz0gMSkge1xuICAgICAgICBpZiAocGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAxKSB7XG4gICAgICAgICAgc25hcEdyaWQucHVzaChzbmFwR3JpZFtzbmFwR3JpZC5sZW5ndGggLSAxXSArIHNpemUpO1xuICAgICAgICB9XG4gICAgICAgIHNsaWRlc0dyaWQucHVzaChzbGlkZXNHcmlkW3NsaWRlc0dyaWQubGVuZ3RoIC0gMV0gKyBzaXplKTtcbiAgICAgICAgc3dpcGVyLnZpcnR1YWxTaXplICs9IHNpemU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzbmFwR3JpZC5sZW5ndGggPT09IDApIHNuYXBHcmlkID0gWzBdO1xuICAgIGlmIChzcGFjZUJldHdlZW4gIT09IDApIHtcbiAgICAgIGNvbnN0IGtleSA9IHN3aXBlci5pc0hvcml6b250YWwoKSAmJiBydGwgPyAnbWFyZ2luTGVmdCcgOiBzd2lwZXIuZ2V0RGlyZWN0aW9uTGFiZWwoJ21hcmdpblJpZ2h0Jyk7XG4gICAgICBzbGlkZXMuZmlsdGVyKChfLCBzbGlkZUluZGV4KSA9PiB7XG4gICAgICAgIGlmICghcGFyYW1zLmNzc01vZGUgfHwgcGFyYW1zLmxvb3ApIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoc2xpZGVJbmRleCA9PT0gc2xpZGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KS5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICBzbGlkZUVsLnN0eWxlW2tleV0gPSBgJHtzcGFjZUJldHdlZW59cHhgO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgcGFyYW1zLmNlbnRlcmVkU2xpZGVzQm91bmRzKSB7XG4gICAgICBsZXQgYWxsU2xpZGVzU2l6ZSA9IDA7XG4gICAgICBzbGlkZXNTaXplc0dyaWQuZm9yRWFjaChzbGlkZVNpemVWYWx1ZSA9PiB7XG4gICAgICAgIGFsbFNsaWRlc1NpemUgKz0gc2xpZGVTaXplVmFsdWUgKyAoc3BhY2VCZXR3ZWVuIHx8IDApO1xuICAgICAgfSk7XG4gICAgICBhbGxTbGlkZXNTaXplIC09IHNwYWNlQmV0d2VlbjtcbiAgICAgIGNvbnN0IG1heFNuYXAgPSBhbGxTbGlkZXNTaXplIC0gc3dpcGVyU2l6ZTtcbiAgICAgIHNuYXBHcmlkID0gc25hcEdyaWQubWFwKHNuYXAgPT4ge1xuICAgICAgICBpZiAoc25hcCA8PSAwKSByZXR1cm4gLW9mZnNldEJlZm9yZTtcbiAgICAgICAgaWYgKHNuYXAgPiBtYXhTbmFwKSByZXR1cm4gbWF4U25hcCArIG9mZnNldEFmdGVyO1xuICAgICAgICByZXR1cm4gc25hcDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLmNlbnRlckluc3VmZmljaWVudFNsaWRlcykge1xuICAgICAgbGV0IGFsbFNsaWRlc1NpemUgPSAwO1xuICAgICAgc2xpZGVzU2l6ZXNHcmlkLmZvckVhY2goc2xpZGVTaXplVmFsdWUgPT4ge1xuICAgICAgICBhbGxTbGlkZXNTaXplICs9IHNsaWRlU2l6ZVZhbHVlICsgKHNwYWNlQmV0d2VlbiB8fCAwKTtcbiAgICAgIH0pO1xuICAgICAgYWxsU2xpZGVzU2l6ZSAtPSBzcGFjZUJldHdlZW47XG4gICAgICBjb25zdCBvZmZzZXRTaXplID0gKHBhcmFtcy5zbGlkZXNPZmZzZXRCZWZvcmUgfHwgMCkgKyAocGFyYW1zLnNsaWRlc09mZnNldEFmdGVyIHx8IDApO1xuICAgICAgaWYgKGFsbFNsaWRlc1NpemUgKyBvZmZzZXRTaXplIDwgc3dpcGVyU2l6ZSkge1xuICAgICAgICBjb25zdCBhbGxTbGlkZXNPZmZzZXQgPSAoc3dpcGVyU2l6ZSAtIGFsbFNsaWRlc1NpemUgLSBvZmZzZXRTaXplKSAvIDI7XG4gICAgICAgIHNuYXBHcmlkLmZvckVhY2goKHNuYXAsIHNuYXBJbmRleCkgPT4ge1xuICAgICAgICAgIHNuYXBHcmlkW3NuYXBJbmRleF0gPSBzbmFwIC0gYWxsU2xpZGVzT2Zmc2V0O1xuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVzR3JpZC5mb3JFYWNoKChzbmFwLCBzbmFwSW5kZXgpID0+IHtcbiAgICAgICAgICBzbGlkZXNHcmlkW3NuYXBJbmRleF0gPSBzbmFwICsgYWxsU2xpZGVzT2Zmc2V0O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICAgIHNsaWRlcyxcbiAgICAgIHNuYXBHcmlkLFxuICAgICAgc2xpZGVzR3JpZCxcbiAgICAgIHNsaWRlc1NpemVzR3JpZFxuICAgIH0pO1xuICAgIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgcGFyYW1zLmNzc01vZGUgJiYgIXBhcmFtcy5jZW50ZXJlZFNsaWRlc0JvdW5kcykge1xuICAgICAgc2V0Q1NTUHJvcGVydHkod3JhcHBlckVsLCAnLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWJlZm9yZScsIGAkey1zbmFwR3JpZFswXX1weGApO1xuICAgICAgc2V0Q1NTUHJvcGVydHkod3JhcHBlckVsLCAnLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWFmdGVyJywgYCR7c3dpcGVyLnNpemUgLyAyIC0gc2xpZGVzU2l6ZXNHcmlkW3NsaWRlc1NpemVzR3JpZC5sZW5ndGggLSAxXSAvIDJ9cHhgKTtcbiAgICAgIGNvbnN0IGFkZFRvU25hcEdyaWQgPSAtc3dpcGVyLnNuYXBHcmlkWzBdO1xuICAgICAgY29uc3QgYWRkVG9TbGlkZXNHcmlkID0gLXN3aXBlci5zbGlkZXNHcmlkWzBdO1xuICAgICAgc3dpcGVyLnNuYXBHcmlkID0gc3dpcGVyLnNuYXBHcmlkLm1hcCh2ID0+IHYgKyBhZGRUb1NuYXBHcmlkKTtcbiAgICAgIHN3aXBlci5zbGlkZXNHcmlkID0gc3dpcGVyLnNsaWRlc0dyaWQubWFwKHYgPT4gdiArIGFkZFRvU2xpZGVzR3JpZCk7XG4gICAgfVxuICAgIGlmIChzbGlkZXNMZW5ndGggIT09IHByZXZpb3VzU2xpZGVzTGVuZ3RoKSB7XG4gICAgICBzd2lwZXIuZW1pdCgnc2xpZGVzTGVuZ3RoQ2hhbmdlJyk7XG4gICAgfVxuICAgIGlmIChzbmFwR3JpZC5sZW5ndGggIT09IHByZXZpb3VzU25hcEdyaWRMZW5ndGgpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cpIHN3aXBlci5jaGVja092ZXJmbG93KCk7XG4gICAgICBzd2lwZXIuZW1pdCgnc25hcEdyaWRMZW5ndGhDaGFuZ2UnKTtcbiAgICB9XG4gICAgaWYgKHNsaWRlc0dyaWQubGVuZ3RoICE9PSBwcmV2aW91c1NsaWRlc0dyaWRMZW5ndGgpIHtcbiAgICAgIHN3aXBlci5lbWl0KCdzbGlkZXNHcmlkTGVuZ3RoQ2hhbmdlJyk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcykge1xuICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc09mZnNldCgpO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgnc2xpZGVzVXBkYXRlZCcpO1xuICAgIGlmICghaXNWaXJ0dWFsICYmICFwYXJhbXMuY3NzTW9kZSAmJiAocGFyYW1zLmVmZmVjdCA9PT0gJ3NsaWRlJyB8fCBwYXJhbXMuZWZmZWN0ID09PSAnZmFkZScpKSB7XG4gICAgICBjb25zdCBiYWNrRmFjZUhpZGRlbkNsYXNzID0gYCR7cGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9YmFja2ZhY2UtaGlkZGVuYDtcbiAgICAgIGNvbnN0IGhhc0NsYXNzQmFja2ZhY2VDbGFzc0FkZGVkID0gc3dpcGVyLmVsLmNsYXNzTGlzdC5jb250YWlucyhiYWNrRmFjZUhpZGRlbkNsYXNzKTtcbiAgICAgIGlmIChzbGlkZXNMZW5ndGggPD0gcGFyYW1zLm1heEJhY2tmYWNlSGlkZGVuU2xpZGVzKSB7XG4gICAgICAgIGlmICghaGFzQ2xhc3NCYWNrZmFjZUNsYXNzQWRkZWQpIHN3aXBlci5lbC5jbGFzc0xpc3QuYWRkKGJhY2tGYWNlSGlkZGVuQ2xhc3MpO1xuICAgICAgfSBlbHNlIGlmIChoYXNDbGFzc0JhY2tmYWNlQ2xhc3NBZGRlZCkge1xuICAgICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LnJlbW92ZShiYWNrRmFjZUhpZGRlbkNsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVBdXRvSGVpZ2h0KHNwZWVkKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCBhY3RpdmVTbGlkZXMgPSBbXTtcbiAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgICBsZXQgbmV3SGVpZ2h0ID0gMDtcbiAgICBsZXQgaTtcbiAgICBpZiAodHlwZW9mIHNwZWVkID09PSAnbnVtYmVyJykge1xuICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24oc3BlZWQpO1xuICAgIH0gZWxzZSBpZiAoc3BlZWQgPT09IHRydWUpIHtcbiAgICAgIHN3aXBlci5zZXRUcmFuc2l0aW9uKHN3aXBlci5wYXJhbXMuc3BlZWQpO1xuICAgIH1cbiAgICBjb25zdCBnZXRTbGlkZUJ5SW5kZXggPSBpbmRleCA9PiB7XG4gICAgICBpZiAoaXNWaXJ0dWFsKSB7XG4gICAgICAgIHJldHVybiBzd2lwZXIuc2xpZGVzW3N3aXBlci5nZXRTbGlkZUluZGV4QnlEYXRhKGluZGV4KV07XG4gICAgICB9XG4gICAgICByZXR1cm4gc3dpcGVyLnNsaWRlc1tpbmRleF07XG4gICAgfTtcbiAgICAvLyBGaW5kIHNsaWRlcyBjdXJyZW50bHkgaW4gdmlld1xuICAgIGlmIChzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgIT09ICdhdXRvJyAmJiBzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxKSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jZW50ZXJlZFNsaWRlcykge1xuICAgICAgICAoc3dpcGVyLnZpc2libGVTbGlkZXMgfHwgW10pLmZvckVhY2goc2xpZGUgPT4ge1xuICAgICAgICAgIGFjdGl2ZVNsaWRlcy5wdXNoKHNsaWRlKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgTWF0aC5jZWlsKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyk7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3dpcGVyLmFjdGl2ZUluZGV4ICsgaTtcbiAgICAgICAgICBpZiAoaW5kZXggPiBzd2lwZXIuc2xpZGVzLmxlbmd0aCAmJiAhaXNWaXJ0dWFsKSBicmVhaztcbiAgICAgICAgICBhY3RpdmVTbGlkZXMucHVzaChnZXRTbGlkZUJ5SW5kZXgoaW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhY3RpdmVTbGlkZXMucHVzaChnZXRTbGlkZUJ5SW5kZXgoc3dpcGVyLmFjdGl2ZUluZGV4KSk7XG4gICAgfVxuXG4gICAgLy8gRmluZCBuZXcgaGVpZ2h0IGZyb20gaGlnaGVzdCBzbGlkZSBpbiB2aWV3XG4gICAgZm9yIChpID0gMDsgaSA8IGFjdGl2ZVNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKHR5cGVvZiBhY3RpdmVTbGlkZXNbaV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGFjdGl2ZVNsaWRlc1tpXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIG5ld0hlaWdodCA9IGhlaWdodCA+IG5ld0hlaWdodCA/IGhlaWdodCA6IG5ld0hlaWdodDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgSGVpZ2h0XG4gICAgaWYgKG5ld0hlaWdodCB8fCBuZXdIZWlnaHQgPT09IDApIHN3aXBlci53cmFwcGVyRWwuc3R5bGUuaGVpZ2h0ID0gYCR7bmV3SGVpZ2h0fXB4YDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNsaWRlc09mZnNldCgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHNsaWRlcyA9IHN3aXBlci5zbGlkZXM7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgbWludXNPZmZzZXQgPSBzd2lwZXIuaXNFbGVtZW50ID8gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gc3dpcGVyLndyYXBwZXJFbC5vZmZzZXRMZWZ0IDogc3dpcGVyLndyYXBwZXJFbC5vZmZzZXRUb3AgOiAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBzbGlkZXNbaV0uc3dpcGVyU2xpZGVPZmZzZXQgPSAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gc2xpZGVzW2ldLm9mZnNldExlZnQgOiBzbGlkZXNbaV0ub2Zmc2V0VG9wKSAtIG1pbnVzT2Zmc2V0IC0gc3dpcGVyLmNzc092ZXJmbG93QWRqdXN0bWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRvZ2dsZVNsaWRlQ2xhc3NlcyQxID0gKHNsaWRlRWwsIGNvbmRpdGlvbiwgY2xhc3NOYW1lKSA9PiB7XG4gICAgaWYgKGNvbmRpdGlvbiAmJiAhc2xpZGVFbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgc2xpZGVFbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfSBlbHNlIGlmICghY29uZGl0aW9uICYmIHNsaWRlRWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgIHNsaWRlRWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gdXBkYXRlU2xpZGVzUHJvZ3Jlc3ModHJhbnNsYXRlKSB7XG4gICAgaWYgKHRyYW5zbGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB0cmFuc2xhdGUgPSB0aGlzICYmIHRoaXMudHJhbnNsYXRlIHx8IDA7XG4gICAgfVxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcztcbiAgICBjb25zdCB7XG4gICAgICBzbGlkZXMsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIHNuYXBHcmlkXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoc2xpZGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGlmICh0eXBlb2Ygc2xpZGVzWzBdLnN3aXBlclNsaWRlT2Zmc2V0ID09PSAndW5kZWZpbmVkJykgc3dpcGVyLnVwZGF0ZVNsaWRlc09mZnNldCgpO1xuICAgIGxldCBvZmZzZXRDZW50ZXIgPSAtdHJhbnNsYXRlO1xuICAgIGlmIChydGwpIG9mZnNldENlbnRlciA9IHRyYW5zbGF0ZTtcbiAgICBzd2lwZXIudmlzaWJsZVNsaWRlc0luZGV4ZXMgPSBbXTtcbiAgICBzd2lwZXIudmlzaWJsZVNsaWRlcyA9IFtdO1xuICAgIGxldCBzcGFjZUJldHdlZW4gPSBwYXJhbXMuc3BhY2VCZXR3ZWVuO1xuICAgIGlmICh0eXBlb2Ygc3BhY2VCZXR3ZWVuID09PSAnc3RyaW5nJyAmJiBzcGFjZUJldHdlZW4uaW5kZXhPZignJScpID49IDApIHtcbiAgICAgIHNwYWNlQmV0d2VlbiA9IHBhcnNlRmxvYXQoc3BhY2VCZXR3ZWVuLnJlcGxhY2UoJyUnLCAnJykpIC8gMTAwICogc3dpcGVyLnNpemU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BhY2VCZXR3ZWVuID09PSAnc3RyaW5nJykge1xuICAgICAgc3BhY2VCZXR3ZWVuID0gcGFyc2VGbG9hdChzcGFjZUJldHdlZW4pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3Qgc2xpZGUgPSBzbGlkZXNbaV07XG4gICAgICBsZXQgc2xpZGVPZmZzZXQgPSBzbGlkZS5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgIGlmIChwYXJhbXMuY3NzTW9kZSAmJiBwYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgc2xpZGVPZmZzZXQgLT0gc2xpZGVzWzBdLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgfVxuICAgICAgY29uc3Qgc2xpZGVQcm9ncmVzcyA9IChvZmZzZXRDZW50ZXIgKyAocGFyYW1zLmNlbnRlcmVkU2xpZGVzID8gc3dpcGVyLm1pblRyYW5zbGF0ZSgpIDogMCkgLSBzbGlkZU9mZnNldCkgLyAoc2xpZGUuc3dpcGVyU2xpZGVTaXplICsgc3BhY2VCZXR3ZWVuKTtcbiAgICAgIGNvbnN0IG9yaWdpbmFsU2xpZGVQcm9ncmVzcyA9IChvZmZzZXRDZW50ZXIgLSBzbmFwR3JpZFswXSArIChwYXJhbXMuY2VudGVyZWRTbGlkZXMgPyBzd2lwZXIubWluVHJhbnNsYXRlKCkgOiAwKSAtIHNsaWRlT2Zmc2V0KSAvIChzbGlkZS5zd2lwZXJTbGlkZVNpemUgKyBzcGFjZUJldHdlZW4pO1xuICAgICAgY29uc3Qgc2xpZGVCZWZvcmUgPSAtKG9mZnNldENlbnRlciAtIHNsaWRlT2Zmc2V0KTtcbiAgICAgIGNvbnN0IHNsaWRlQWZ0ZXIgPSBzbGlkZUJlZm9yZSArIHN3aXBlci5zbGlkZXNTaXplc0dyaWRbaV07XG4gICAgICBjb25zdCBpc0Z1bGx5VmlzaWJsZSA9IHNsaWRlQmVmb3JlID49IDAgJiYgc2xpZGVCZWZvcmUgPD0gc3dpcGVyLnNpemUgLSBzd2lwZXIuc2xpZGVzU2l6ZXNHcmlkW2ldO1xuICAgICAgY29uc3QgaXNWaXNpYmxlID0gc2xpZGVCZWZvcmUgPj0gMCAmJiBzbGlkZUJlZm9yZSA8IHN3aXBlci5zaXplIC0gMSB8fCBzbGlkZUFmdGVyID4gMSAmJiBzbGlkZUFmdGVyIDw9IHN3aXBlci5zaXplIHx8IHNsaWRlQmVmb3JlIDw9IDAgJiYgc2xpZGVBZnRlciA+PSBzd2lwZXIuc2l6ZTtcbiAgICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgICAgc3dpcGVyLnZpc2libGVTbGlkZXMucHVzaChzbGlkZSk7XG4gICAgICAgIHN3aXBlci52aXNpYmxlU2xpZGVzSW5kZXhlcy5wdXNoKGkpO1xuICAgICAgfVxuICAgICAgdG9nZ2xlU2xpZGVDbGFzc2VzJDEoc2xpZGUsIGlzVmlzaWJsZSwgcGFyYW1zLnNsaWRlVmlzaWJsZUNsYXNzKTtcbiAgICAgIHRvZ2dsZVNsaWRlQ2xhc3NlcyQxKHNsaWRlLCBpc0Z1bGx5VmlzaWJsZSwgcGFyYW1zLnNsaWRlRnVsbHlWaXNpYmxlQ2xhc3MpO1xuICAgICAgc2xpZGUucHJvZ3Jlc3MgPSBydGwgPyAtc2xpZGVQcm9ncmVzcyA6IHNsaWRlUHJvZ3Jlc3M7XG4gICAgICBzbGlkZS5vcmlnaW5hbFByb2dyZXNzID0gcnRsID8gLW9yaWdpbmFsU2xpZGVQcm9ncmVzcyA6IG9yaWdpbmFsU2xpZGVQcm9ncmVzcztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyh0cmFuc2xhdGUpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmICh0eXBlb2YgdHJhbnNsYXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgbXVsdGlwbGllciA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyAtMSA6IDE7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIHRyYW5zbGF0ZSA9IHN3aXBlciAmJiBzd2lwZXIudHJhbnNsYXRlICYmIHN3aXBlci50cmFuc2xhdGUgKiBtdWx0aXBsaWVyIHx8IDA7XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXM7XG4gICAgY29uc3QgdHJhbnNsYXRlc0RpZmYgPSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBzd2lwZXIubWluVHJhbnNsYXRlKCk7XG4gICAgbGV0IHtcbiAgICAgIHByb2dyZXNzLFxuICAgICAgaXNCZWdpbm5pbmcsXG4gICAgICBpc0VuZCxcbiAgICAgIHByb2dyZXNzTG9vcFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3Qgd2FzQmVnaW5uaW5nID0gaXNCZWdpbm5pbmc7XG4gICAgY29uc3Qgd2FzRW5kID0gaXNFbmQ7XG4gICAgaWYgKHRyYW5zbGF0ZXNEaWZmID09PSAwKSB7XG4gICAgICBwcm9ncmVzcyA9IDA7XG4gICAgICBpc0JlZ2lubmluZyA9IHRydWU7XG4gICAgICBpc0VuZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2dyZXNzID0gKHRyYW5zbGF0ZSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKSkgLyB0cmFuc2xhdGVzRGlmZjtcbiAgICAgIGNvbnN0IGlzQmVnaW5uaW5nUm91bmRlZCA9IE1hdGguYWJzKHRyYW5zbGF0ZSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKSkgPCAxO1xuICAgICAgY29uc3QgaXNFbmRSb3VuZGVkID0gTWF0aC5hYnModHJhbnNsYXRlIC0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSA8IDE7XG4gICAgICBpc0JlZ2lubmluZyA9IGlzQmVnaW5uaW5nUm91bmRlZCB8fCBwcm9ncmVzcyA8PSAwO1xuICAgICAgaXNFbmQgPSBpc0VuZFJvdW5kZWQgfHwgcHJvZ3Jlc3MgPj0gMTtcbiAgICAgIGlmIChpc0JlZ2lubmluZ1JvdW5kZWQpIHByb2dyZXNzID0gMDtcbiAgICAgIGlmIChpc0VuZFJvdW5kZWQpIHByb2dyZXNzID0gMTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBjb25zdCBmaXJzdFNsaWRlSW5kZXggPSBzd2lwZXIuZ2V0U2xpZGVJbmRleEJ5RGF0YSgwKTtcbiAgICAgIGNvbnN0IGxhc3RTbGlkZUluZGV4ID0gc3dpcGVyLmdldFNsaWRlSW5kZXhCeURhdGEoc3dpcGVyLnNsaWRlcy5sZW5ndGggLSAxKTtcbiAgICAgIGNvbnN0IGZpcnN0U2xpZGVUcmFuc2xhdGUgPSBzd2lwZXIuc2xpZGVzR3JpZFtmaXJzdFNsaWRlSW5kZXhdO1xuICAgICAgY29uc3QgbGFzdFNsaWRlVHJhbnNsYXRlID0gc3dpcGVyLnNsaWRlc0dyaWRbbGFzdFNsaWRlSW5kZXhdO1xuICAgICAgY29uc3QgdHJhbnNsYXRlTWF4ID0gc3dpcGVyLnNsaWRlc0dyaWRbc3dpcGVyLnNsaWRlc0dyaWQubGVuZ3RoIC0gMV07XG4gICAgICBjb25zdCB0cmFuc2xhdGVBYnMgPSBNYXRoLmFicyh0cmFuc2xhdGUpO1xuICAgICAgaWYgKHRyYW5zbGF0ZUFicyA+PSBmaXJzdFNsaWRlVHJhbnNsYXRlKSB7XG4gICAgICAgIHByb2dyZXNzTG9vcCA9ICh0cmFuc2xhdGVBYnMgLSBmaXJzdFNsaWRlVHJhbnNsYXRlKSAvIHRyYW5zbGF0ZU1heDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2dyZXNzTG9vcCA9ICh0cmFuc2xhdGVBYnMgKyB0cmFuc2xhdGVNYXggLSBsYXN0U2xpZGVUcmFuc2xhdGUpIC8gdHJhbnNsYXRlTWF4O1xuICAgICAgfVxuICAgICAgaWYgKHByb2dyZXNzTG9vcCA+IDEpIHByb2dyZXNzTG9vcCAtPSAxO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgICAgcHJvZ3Jlc3MsXG4gICAgICBwcm9ncmVzc0xvb3AsXG4gICAgICBpc0JlZ2lubmluZyxcbiAgICAgIGlzRW5kXG4gICAgfSk7XG4gICAgaWYgKHBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzIHx8IHBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBwYXJhbXMuYXV0b0hlaWdodCkgc3dpcGVyLnVwZGF0ZVNsaWRlc1Byb2dyZXNzKHRyYW5zbGF0ZSk7XG4gICAgaWYgKGlzQmVnaW5uaW5nICYmICF3YXNCZWdpbm5pbmcpIHtcbiAgICAgIHN3aXBlci5lbWl0KCdyZWFjaEJlZ2lubmluZyB0b0VkZ2UnKTtcbiAgICB9XG4gICAgaWYgKGlzRW5kICYmICF3YXNFbmQpIHtcbiAgICAgIHN3aXBlci5lbWl0KCdyZWFjaEVuZCB0b0VkZ2UnKTtcbiAgICB9XG4gICAgaWYgKHdhc0JlZ2lubmluZyAmJiAhaXNCZWdpbm5pbmcgfHwgd2FzRW5kICYmICFpc0VuZCkge1xuICAgICAgc3dpcGVyLmVtaXQoJ2Zyb21FZGdlJyk7XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCdwcm9ncmVzcycsIHByb2dyZXNzKTtcbiAgfVxuXG4gIGNvbnN0IHRvZ2dsZVNsaWRlQ2xhc3NlcyA9IChzbGlkZUVsLCBjb25kaXRpb24sIGNsYXNzTmFtZSkgPT4ge1xuICAgIGlmIChjb25kaXRpb24gJiYgIXNsaWRlRWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgIHNsaWRlRWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgIH0gZWxzZSBpZiAoIWNvbmRpdGlvbiAmJiBzbGlkZUVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgICBzbGlkZUVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIHVwZGF0ZVNsaWRlc0NsYXNzZXMoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBzbGlkZXMsXG4gICAgICBwYXJhbXMsXG4gICAgICBzbGlkZXNFbCxcbiAgICAgIGFjdGl2ZUluZGV4XG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgIGNvbnN0IGdyaWRFbmFibGVkID0gc3dpcGVyLmdyaWQgJiYgcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDE7XG4gICAgY29uc3QgZ2V0RmlsdGVyZWRTbGlkZSA9IHNlbGVjdG9yID0+IHtcbiAgICAgIHJldHVybiBlbGVtZW50Q2hpbGRyZW4oc2xpZGVzRWwsIGAuJHtwYXJhbXMuc2xpZGVDbGFzc30ke3NlbGVjdG9yfSwgc3dpcGVyLXNsaWRlJHtzZWxlY3Rvcn1gKVswXTtcbiAgICB9O1xuICAgIGxldCBhY3RpdmVTbGlkZTtcbiAgICBsZXQgcHJldlNsaWRlO1xuICAgIGxldCBuZXh0U2xpZGU7XG4gICAgaWYgKGlzVmlydHVhbCkge1xuICAgICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICAgIGxldCBzbGlkZUluZGV4ID0gYWN0aXZlSW5kZXggLSBzd2lwZXIudmlydHVhbC5zbGlkZXNCZWZvcmU7XG4gICAgICAgIGlmIChzbGlkZUluZGV4IDwgMCkgc2xpZGVJbmRleCA9IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggKyBzbGlkZUluZGV4O1xuICAgICAgICBpZiAoc2xpZGVJbmRleCA+PSBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoKSBzbGlkZUluZGV4IC09IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGg7XG4gICAgICAgIGFjdGl2ZVNsaWRlID0gZ2V0RmlsdGVyZWRTbGlkZShgW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzbGlkZUluZGV4fVwiXWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlU2xpZGUgPSBnZXRGaWx0ZXJlZFNsaWRlKGBbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke2FjdGl2ZUluZGV4fVwiXWApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZ3JpZEVuYWJsZWQpIHtcbiAgICAgICAgYWN0aXZlU2xpZGUgPSBzbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5jb2x1bW4gPT09IGFjdGl2ZUluZGV4KVswXTtcbiAgICAgICAgbmV4dFNsaWRlID0gc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuY29sdW1uID09PSBhY3RpdmVJbmRleCArIDEpWzBdO1xuICAgICAgICBwcmV2U2xpZGUgPSBzbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5jb2x1bW4gPT09IGFjdGl2ZUluZGV4IC0gMSlbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RpdmVTbGlkZSA9IHNsaWRlc1thY3RpdmVJbmRleF07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhY3RpdmVTbGlkZSkge1xuICAgICAgaWYgKCFncmlkRW5hYmxlZCkge1xuICAgICAgICAvLyBOZXh0IFNsaWRlXG4gICAgICAgIG5leHRTbGlkZSA9IGVsZW1lbnROZXh0QWxsKGFjdGl2ZVNsaWRlLCBgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKVswXTtcbiAgICAgICAgaWYgKHBhcmFtcy5sb29wICYmICFuZXh0U2xpZGUpIHtcbiAgICAgICAgICBuZXh0U2xpZGUgPSBzbGlkZXNbMF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmV2IFNsaWRlXG4gICAgICAgIHByZXZTbGlkZSA9IGVsZW1lbnRQcmV2QWxsKGFjdGl2ZVNsaWRlLCBgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKVswXTtcbiAgICAgICAgaWYgKHBhcmFtcy5sb29wICYmICFwcmV2U2xpZGUgPT09IDApIHtcbiAgICAgICAgICBwcmV2U2xpZGUgPSBzbGlkZXNbc2xpZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgdG9nZ2xlU2xpZGVDbGFzc2VzKHNsaWRlRWwsIHNsaWRlRWwgPT09IGFjdGl2ZVNsaWRlLCBwYXJhbXMuc2xpZGVBY3RpdmVDbGFzcyk7XG4gICAgICB0b2dnbGVTbGlkZUNsYXNzZXMoc2xpZGVFbCwgc2xpZGVFbCA9PT0gbmV4dFNsaWRlLCBwYXJhbXMuc2xpZGVOZXh0Q2xhc3MpO1xuICAgICAgdG9nZ2xlU2xpZGVDbGFzc2VzKHNsaWRlRWwsIHNsaWRlRWwgPT09IHByZXZTbGlkZSwgcGFyYW1zLnNsaWRlUHJldkNsYXNzKTtcbiAgICB9KTtcbiAgICBzd2lwZXIuZW1pdFNsaWRlc0NsYXNzZXMoKTtcbiAgfVxuXG4gIGNvbnN0IHByb2Nlc3NMYXp5UHJlbG9hZGVyID0gKHN3aXBlciwgaW1hZ2VFbCkgPT4ge1xuICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5wYXJhbXMpIHJldHVybjtcbiAgICBjb25zdCBzbGlkZVNlbGVjdG9yID0gKCkgPT4gc3dpcGVyLmlzRWxlbWVudCA/IGBzd2lwZXItc2xpZGVgIDogYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31gO1xuICAgIGNvbnN0IHNsaWRlRWwgPSBpbWFnZUVsLmNsb3Nlc3Qoc2xpZGVTZWxlY3RvcigpKTtcbiAgICBpZiAoc2xpZGVFbCkge1xuICAgICAgbGV0IGxhenlFbCA9IHNsaWRlRWwucXVlcnlTZWxlY3RvcihgLiR7c3dpcGVyLnBhcmFtcy5sYXp5UHJlbG9hZGVyQ2xhc3N9YCk7XG4gICAgICBpZiAoIWxhenlFbCAmJiBzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgIGlmIChzbGlkZUVsLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICBsYXp5RWwgPSBzbGlkZUVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihgLiR7c3dpcGVyLnBhcmFtcy5sYXp5UHJlbG9hZGVyQ2xhc3N9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaW5pdCBsYXRlclxuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2xpZGVFbC5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgIGxhenlFbCA9IHNsaWRlRWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGAuJHtzd2lwZXIucGFyYW1zLmxhenlQcmVsb2FkZXJDbGFzc31gKTtcbiAgICAgICAgICAgICAgaWYgKGxhenlFbCkgbGF6eUVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobGF6eUVsKSBsYXp5RWwucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bmxhenkgPSAoc3dpcGVyLCBpbmRleCkgPT4ge1xuICAgIGlmICghc3dpcGVyLnNsaWRlc1tpbmRleF0pIHJldHVybjtcbiAgICBjb25zdCBpbWFnZUVsID0gc3dpcGVyLnNsaWRlc1tpbmRleF0ucXVlcnlTZWxlY3RvcignW2xvYWRpbmc9XCJsYXp5XCJdJyk7XG4gICAgaWYgKGltYWdlRWwpIGltYWdlRWwucmVtb3ZlQXR0cmlidXRlKCdsb2FkaW5nJyk7XG4gIH07XG4gIGNvbnN0IHByZWxvYWQgPSBzd2lwZXIgPT4ge1xuICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5wYXJhbXMpIHJldHVybjtcbiAgICBsZXQgYW1vdW50ID0gc3dpcGVyLnBhcmFtcy5sYXp5UHJlbG9hZFByZXZOZXh0O1xuICAgIGNvbnN0IGxlbiA9IHN3aXBlci5zbGlkZXMubGVuZ3RoO1xuICAgIGlmICghbGVuIHx8ICFhbW91bnQgfHwgYW1vdW50IDwgMCkgcmV0dXJuO1xuICAgIGFtb3VudCA9IE1hdGgubWluKGFtb3VudCwgbGVuKTtcbiAgICBjb25zdCBzbGlkZXNQZXJWaWV3ID0gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgPyBzd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IE1hdGguY2VpbChzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcpO1xuICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gc3dpcGVyLmFjdGl2ZUluZGV4O1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmdyaWQgJiYgc3dpcGVyLnBhcmFtcy5ncmlkLnJvd3MgPiAxKSB7XG4gICAgICBjb25zdCBhY3RpdmVDb2x1bW4gPSBhY3RpdmVJbmRleDtcbiAgICAgIGNvbnN0IHByZWxvYWRDb2x1bW5zID0gW2FjdGl2ZUNvbHVtbiAtIGFtb3VudF07XG4gICAgICBwcmVsb2FkQ29sdW1ucy5wdXNoKC4uLkFycmF5LmZyb20oe1xuICAgICAgICBsZW5ndGg6IGFtb3VudFxuICAgICAgfSkubWFwKChfLCBpKSA9PiB7XG4gICAgICAgIHJldHVybiBhY3RpdmVDb2x1bW4gKyBzbGlkZXNQZXJWaWV3ICsgaTtcbiAgICAgIH0pKTtcbiAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaCgoc2xpZGVFbCwgaSkgPT4ge1xuICAgICAgICBpZiAocHJlbG9hZENvbHVtbnMuaW5jbHVkZXMoc2xpZGVFbC5jb2x1bW4pKSB1bmxhenkoc3dpcGVyLCBpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzbGlkZUluZGV4TGFzdEluVmlldyA9IGFjdGl2ZUluZGV4ICsgc2xpZGVzUGVyVmlldyAtIDE7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMucmV3aW5kIHx8IHN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZUluZGV4IC0gYW1vdW50OyBpIDw9IHNsaWRlSW5kZXhMYXN0SW5WaWV3ICsgYW1vdW50OyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgcmVhbEluZGV4ID0gKGkgJSBsZW4gKyBsZW4pICUgbGVuO1xuICAgICAgICBpZiAocmVhbEluZGV4IDwgYWN0aXZlSW5kZXggfHwgcmVhbEluZGV4ID4gc2xpZGVJbmRleExhc3RJblZpZXcpIHVubGF6eShzd2lwZXIsIHJlYWxJbmRleCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1heChhY3RpdmVJbmRleCAtIGFtb3VudCwgMCk7IGkgPD0gTWF0aC5taW4oc2xpZGVJbmRleExhc3RJblZpZXcgKyBhbW91bnQsIGxlbiAtIDEpOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGkgIT09IGFjdGl2ZUluZGV4ICYmIChpID4gc2xpZGVJbmRleExhc3RJblZpZXcgfHwgaSA8IGFjdGl2ZUluZGV4KSkge1xuICAgICAgICAgIHVubGF6eShzd2lwZXIsIGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldEFjdGl2ZUluZGV4QnlUcmFuc2xhdGUoc3dpcGVyKSB7XG4gICAgY29uc3Qge1xuICAgICAgc2xpZGVzR3JpZCxcbiAgICAgIHBhcmFtc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgdHJhbnNsYXRlID0gc3dpcGVyLnJ0bFRyYW5zbGF0ZSA/IHN3aXBlci50cmFuc2xhdGUgOiAtc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICBsZXQgYWN0aXZlSW5kZXg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNHcmlkLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAodHlwZW9mIHNsaWRlc0dyaWRbaSArIDFdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHJhbnNsYXRlID49IHNsaWRlc0dyaWRbaV0gJiYgdHJhbnNsYXRlIDwgc2xpZGVzR3JpZFtpICsgMV0gLSAoc2xpZGVzR3JpZFtpICsgMV0gLSBzbGlkZXNHcmlkW2ldKSAvIDIpIHtcbiAgICAgICAgICBhY3RpdmVJbmRleCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRlID49IHNsaWRlc0dyaWRbaV0gJiYgdHJhbnNsYXRlIDwgc2xpZGVzR3JpZFtpICsgMV0pIHtcbiAgICAgICAgICBhY3RpdmVJbmRleCA9IGkgKyAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0ZSA+PSBzbGlkZXNHcmlkW2ldKSB7XG4gICAgICAgIGFjdGl2ZUluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTm9ybWFsaXplIHNsaWRlSW5kZXhcbiAgICBpZiAocGFyYW1zLm5vcm1hbGl6ZVNsaWRlSW5kZXgpIHtcbiAgICAgIGlmIChhY3RpdmVJbmRleCA8IDAgfHwgdHlwZW9mIGFjdGl2ZUluZGV4ID09PSAndW5kZWZpbmVkJykgYWN0aXZlSW5kZXggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlSW5kZXg7XG4gIH1cbiAgZnVuY3Rpb24gdXBkYXRlQWN0aXZlSW5kZXgobmV3QWN0aXZlSW5kZXgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyBzd2lwZXIudHJhbnNsYXRlIDogLXN3aXBlci50cmFuc2xhdGU7XG4gICAgY29uc3Qge1xuICAgICAgc25hcEdyaWQsXG4gICAgICBwYXJhbXMsXG4gICAgICBhY3RpdmVJbmRleDogcHJldmlvdXNJbmRleCxcbiAgICAgIHJlYWxJbmRleDogcHJldmlvdXNSZWFsSW5kZXgsXG4gICAgICBzbmFwSW5kZXg6IHByZXZpb3VzU25hcEluZGV4XG4gICAgfSA9IHN3aXBlcjtcbiAgICBsZXQgYWN0aXZlSW5kZXggPSBuZXdBY3RpdmVJbmRleDtcbiAgICBsZXQgc25hcEluZGV4O1xuICAgIGNvbnN0IGdldFZpcnR1YWxSZWFsSW5kZXggPSBhSW5kZXggPT4ge1xuICAgICAgbGV0IHJlYWxJbmRleCA9IGFJbmRleCAtIHN3aXBlci52aXJ0dWFsLnNsaWRlc0JlZm9yZTtcbiAgICAgIGlmIChyZWFsSW5kZXggPCAwKSB7XG4gICAgICAgIHJlYWxJbmRleCA9IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggKyByZWFsSW5kZXg7XG4gICAgICB9XG4gICAgICBpZiAocmVhbEluZGV4ID49IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGgpIHtcbiAgICAgICAgcmVhbEluZGV4IC09IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVhbEluZGV4O1xuICAgIH07XG4gICAgaWYgKHR5cGVvZiBhY3RpdmVJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGFjdGl2ZUluZGV4ID0gZ2V0QWN0aXZlSW5kZXhCeVRyYW5zbGF0ZShzd2lwZXIpO1xuICAgIH1cbiAgICBpZiAoc25hcEdyaWQuaW5kZXhPZih0cmFuc2xhdGUpID49IDApIHtcbiAgICAgIHNuYXBJbmRleCA9IHNuYXBHcmlkLmluZGV4T2YodHJhbnNsYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2tpcCA9IE1hdGgubWluKHBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIGFjdGl2ZUluZGV4KTtcbiAgICAgIHNuYXBJbmRleCA9IHNraXAgKyBNYXRoLmZsb29yKChhY3RpdmVJbmRleCAtIHNraXApIC8gcGFyYW1zLnNsaWRlc1Blckdyb3VwKTtcbiAgICB9XG4gICAgaWYgKHNuYXBJbmRleCA+PSBzbmFwR3JpZC5sZW5ndGgpIHNuYXBJbmRleCA9IHNuYXBHcmlkLmxlbmd0aCAtIDE7XG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSBwcmV2aW91c0luZGV4ICYmICFzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgIGlmIChzbmFwSW5kZXggIT09IHByZXZpb3VzU25hcEluZGV4KSB7XG4gICAgICAgIHN3aXBlci5zbmFwSW5kZXggPSBzbmFwSW5kZXg7XG4gICAgICAgIHN3aXBlci5lbWl0KCdzbmFwSW5kZXhDaGFuZ2UnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSBwcmV2aW91c0luZGV4ICYmIHN3aXBlci5wYXJhbXMubG9vcCAmJiBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgc3dpcGVyLnJlYWxJbmRleCA9IGdldFZpcnR1YWxSZWFsSW5kZXgoYWN0aXZlSW5kZXgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBncmlkRW5hYmxlZCA9IHN3aXBlci5ncmlkICYmIHBhcmFtcy5ncmlkICYmIHBhcmFtcy5ncmlkLnJvd3MgPiAxO1xuXG4gICAgLy8gR2V0IHJlYWwgaW5kZXhcbiAgICBsZXQgcmVhbEluZGV4O1xuICAgIGlmIChzd2lwZXIudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHBhcmFtcy5sb29wKSB7XG4gICAgICByZWFsSW5kZXggPSBnZXRWaXJ0dWFsUmVhbEluZGV4KGFjdGl2ZUluZGV4KTtcbiAgICB9IGVsc2UgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICBjb25zdCBmaXJzdFNsaWRlSW5Db2x1bW4gPSBzd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuY29sdW1uID09PSBhY3RpdmVJbmRleClbMF07XG4gICAgICBsZXQgYWN0aXZlU2xpZGVJbmRleCA9IHBhcnNlSW50KGZpcnN0U2xpZGVJbkNvbHVtbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JyksIDEwKTtcbiAgICAgIGlmIChOdW1iZXIuaXNOYU4oYWN0aXZlU2xpZGVJbmRleCkpIHtcbiAgICAgICAgYWN0aXZlU2xpZGVJbmRleCA9IE1hdGgubWF4KHN3aXBlci5zbGlkZXMuaW5kZXhPZihmaXJzdFNsaWRlSW5Db2x1bW4pLCAwKTtcbiAgICAgIH1cbiAgICAgIHJlYWxJbmRleCA9IE1hdGguZmxvb3IoYWN0aXZlU2xpZGVJbmRleCAvIHBhcmFtcy5ncmlkLnJvd3MpO1xuICAgIH0gZWxzZSBpZiAoc3dpcGVyLnNsaWRlc1thY3RpdmVJbmRleF0pIHtcbiAgICAgIGNvbnN0IHNsaWRlSW5kZXggPSBzd2lwZXIuc2xpZGVzW2FjdGl2ZUluZGV4XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4Jyk7XG4gICAgICBpZiAoc2xpZGVJbmRleCkge1xuICAgICAgICByZWFsSW5kZXggPSBwYXJzZUludChzbGlkZUluZGV4LCAxMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWFsSW5kZXggPSBhY3RpdmVJbmRleDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVhbEluZGV4ID0gYWN0aXZlSW5kZXg7XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgICBwcmV2aW91c1NuYXBJbmRleCxcbiAgICAgIHNuYXBJbmRleCxcbiAgICAgIHByZXZpb3VzUmVhbEluZGV4LFxuICAgICAgcmVhbEluZGV4LFxuICAgICAgcHJldmlvdXNJbmRleCxcbiAgICAgIGFjdGl2ZUluZGV4XG4gICAgfSk7XG4gICAgaWYgKHN3aXBlci5pbml0aWFsaXplZCkge1xuICAgICAgcHJlbG9hZChzd2lwZXIpO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgnYWN0aXZlSW5kZXhDaGFuZ2UnKTtcbiAgICBzd2lwZXIuZW1pdCgnc25hcEluZGV4Q2hhbmdlJyk7XG4gICAgaWYgKHN3aXBlci5pbml0aWFsaXplZCB8fCBzd2lwZXIucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCkge1xuICAgICAgaWYgKHByZXZpb3VzUmVhbEluZGV4ICE9PSByZWFsSW5kZXgpIHtcbiAgICAgICAgc3dpcGVyLmVtaXQoJ3JlYWxJbmRleENoYW5nZScpO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmVtaXQoJ3NsaWRlQ2hhbmdlJyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQ2xpY2tlZFNsaWRlKGVsLCBwYXRoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zO1xuICAgIGxldCBzbGlkZSA9IGVsLmNsb3Nlc3QoYC4ke3BhcmFtcy5zbGlkZUNsYXNzfSwgc3dpcGVyLXNsaWRlYCk7XG4gICAgaWYgKCFzbGlkZSAmJiBzd2lwZXIuaXNFbGVtZW50ICYmIHBhdGggJiYgcGF0aC5sZW5ndGggPiAxICYmIHBhdGguaW5jbHVkZXMoZWwpKSB7XG4gICAgICBbLi4ucGF0aC5zbGljZShwYXRoLmluZGV4T2YoZWwpICsgMSwgcGF0aC5sZW5ndGgpXS5mb3JFYWNoKHBhdGhFbCA9PiB7XG4gICAgICAgIGlmICghc2xpZGUgJiYgcGF0aEVsLm1hdGNoZXMgJiYgcGF0aEVsLm1hdGNoZXMoYC4ke3BhcmFtcy5zbGlkZUNsYXNzfSwgc3dpcGVyLXNsaWRlYCkpIHtcbiAgICAgICAgICBzbGlkZSA9IHBhdGhFbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBzbGlkZUZvdW5kID0gZmFsc2U7XG4gICAgbGV0IHNsaWRlSW5kZXg7XG4gICAgaWYgKHNsaWRlKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3aXBlci5zbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKHN3aXBlci5zbGlkZXNbaV0gPT09IHNsaWRlKSB7XG4gICAgICAgICAgc2xpZGVGb3VuZCA9IHRydWU7XG4gICAgICAgICAgc2xpZGVJbmRleCA9IGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNsaWRlICYmIHNsaWRlRm91bmQpIHtcbiAgICAgIHN3aXBlci5jbGlja2VkU2xpZGUgPSBzbGlkZTtcbiAgICAgIGlmIChzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgICBzd2lwZXIuY2xpY2tlZEluZGV4ID0gcGFyc2VJbnQoc2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuY2xpY2tlZEluZGV4ID0gc2xpZGVJbmRleDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVyLmNsaWNrZWRTbGlkZSA9IHVuZGVmaW5lZDtcbiAgICAgIHN3aXBlci5jbGlja2VkSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwYXJhbXMuc2xpZGVUb0NsaWNrZWRTbGlkZSAmJiBzd2lwZXIuY2xpY2tlZEluZGV4ICE9PSB1bmRlZmluZWQgJiYgc3dpcGVyLmNsaWNrZWRJbmRleCAhPT0gc3dpcGVyLmFjdGl2ZUluZGV4KSB7XG4gICAgICBzd2lwZXIuc2xpZGVUb0NsaWNrZWRTbGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciB1cGRhdGUgPSB7XG4gICAgdXBkYXRlU2l6ZSxcbiAgICB1cGRhdGVTbGlkZXMsXG4gICAgdXBkYXRlQXV0b0hlaWdodCxcbiAgICB1cGRhdGVTbGlkZXNPZmZzZXQsXG4gICAgdXBkYXRlU2xpZGVzUHJvZ3Jlc3MsXG4gICAgdXBkYXRlUHJvZ3Jlc3MsXG4gICAgdXBkYXRlU2xpZGVzQ2xhc3NlcyxcbiAgICB1cGRhdGVBY3RpdmVJbmRleCxcbiAgICB1cGRhdGVDbGlja2VkU2xpZGVcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRTd2lwZXJUcmFuc2xhdGUoYXhpcykge1xuICAgIGlmIChheGlzID09PSB2b2lkIDApIHtcbiAgICAgIGF4aXMgPSB0aGlzLmlzSG9yaXpvbnRhbCgpID8gJ3gnIDogJ3knO1xuICAgIH1cbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsLFxuICAgICAgdHJhbnNsYXRlLFxuICAgICAgd3JhcHBlckVsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAocGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUpIHtcbiAgICAgIHJldHVybiBydGwgPyAtdHJhbnNsYXRlIDogdHJhbnNsYXRlO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHJldHVybiB0cmFuc2xhdGU7XG4gICAgfVxuICAgIGxldCBjdXJyZW50VHJhbnNsYXRlID0gZ2V0VHJhbnNsYXRlKHdyYXBwZXJFbCwgYXhpcyk7XG4gICAgY3VycmVudFRyYW5zbGF0ZSArPSBzd2lwZXIuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCk7XG4gICAgaWYgKHJ0bCkgY3VycmVudFRyYW5zbGF0ZSA9IC1jdXJyZW50VHJhbnNsYXRlO1xuICAgIHJldHVybiBjdXJyZW50VHJhbnNsYXRlIHx8IDA7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUcmFuc2xhdGUodHJhbnNsYXRlLCBieUNvbnRyb2xsZXIpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsLFxuICAgICAgcGFyYW1zLFxuICAgICAgd3JhcHBlckVsLFxuICAgICAgcHJvZ3Jlc3NcbiAgICB9ID0gc3dpcGVyO1xuICAgIGxldCB4ID0gMDtcbiAgICBsZXQgeSA9IDA7XG4gICAgY29uc3QgeiA9IDA7XG4gICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgeCA9IHJ0bCA/IC10cmFuc2xhdGUgOiB0cmFuc2xhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHkgPSB0cmFuc2xhdGU7XG4gICAgfVxuICAgIGlmIChwYXJhbXMucm91bmRMZW5ndGhzKSB7XG4gICAgICB4ID0gTWF0aC5mbG9vcih4KTtcbiAgICAgIHkgPSBNYXRoLmZsb29yKHkpO1xuICAgIH1cbiAgICBzd2lwZXIucHJldmlvdXNUcmFuc2xhdGUgPSBzd2lwZXIudHJhbnNsYXRlO1xuICAgIHN3aXBlci50cmFuc2xhdGUgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyB4IDogeTtcbiAgICBpZiAocGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHdyYXBwZXJFbFtzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAnc2Nyb2xsTGVmdCcgOiAnc2Nyb2xsVG9wJ10gPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAteCA6IC15O1xuICAgIH0gZWxzZSBpZiAoIXBhcmFtcy52aXJ0dWFsVHJhbnNsYXRlKSB7XG4gICAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIHggLT0gc3dpcGVyLmNzc092ZXJmbG93QWRqdXN0bWVudCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeSAtPSBzd2lwZXIuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCk7XG4gICAgICB9XG4gICAgICB3cmFwcGVyRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7eH1weCwgJHt5fXB4LCAke3p9cHgpYDtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSBwcm9ncmVzc1xuICAgIGxldCBuZXdQcm9ncmVzcztcbiAgICBjb25zdCB0cmFuc2xhdGVzRGlmZiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICBpZiAodHJhbnNsYXRlc0RpZmYgPT09IDApIHtcbiAgICAgIG5ld1Byb2dyZXNzID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3UHJvZ3Jlc3MgPSAodHJhbnNsYXRlIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSAvIHRyYW5zbGF0ZXNEaWZmO1xuICAgIH1cbiAgICBpZiAobmV3UHJvZ3Jlc3MgIT09IHByb2dyZXNzKSB7XG4gICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3ModHJhbnNsYXRlKTtcbiAgICB9XG4gICAgc3dpcGVyLmVtaXQoJ3NldFRyYW5zbGF0ZScsIHN3aXBlci50cmFuc2xhdGUsIGJ5Q29udHJvbGxlcik7XG4gIH1cblxuICBmdW5jdGlvbiBtaW5UcmFuc2xhdGUoKSB7XG4gICAgcmV0dXJuIC10aGlzLnNuYXBHcmlkWzBdO1xuICB9XG5cbiAgZnVuY3Rpb24gbWF4VHJhbnNsYXRlKCkge1xuICAgIHJldHVybiAtdGhpcy5zbmFwR3JpZFt0aGlzLnNuYXBHcmlkLmxlbmd0aCAtIDFdO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlVG8odHJhbnNsYXRlLCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCB0cmFuc2xhdGVCb3VuZHMsIGludGVybmFsKSB7XG4gICAgaWYgKHRyYW5zbGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB0cmFuc2xhdGUgPSAwO1xuICAgIH1cbiAgICBpZiAoc3BlZWQgPT09IHZvaWQgMCkge1xuICAgICAgc3BlZWQgPSB0aGlzLnBhcmFtcy5zcGVlZDtcbiAgICB9XG4gICAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHJhbnNsYXRlQm91bmRzID09PSB2b2lkIDApIHtcbiAgICAgIHRyYW5zbGF0ZUJvdW5kcyA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgd3JhcHBlckVsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoc3dpcGVyLmFuaW1hdGluZyAmJiBwYXJhbXMucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IG1pblRyYW5zbGF0ZSA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICBjb25zdCBtYXhUcmFuc2xhdGUgPSBzd2lwZXIubWF4VHJhbnNsYXRlKCk7XG4gICAgbGV0IG5ld1RyYW5zbGF0ZTtcbiAgICBpZiAodHJhbnNsYXRlQm91bmRzICYmIHRyYW5zbGF0ZSA+IG1pblRyYW5zbGF0ZSkgbmV3VHJhbnNsYXRlID0gbWluVHJhbnNsYXRlO2Vsc2UgaWYgKHRyYW5zbGF0ZUJvdW5kcyAmJiB0cmFuc2xhdGUgPCBtYXhUcmFuc2xhdGUpIG5ld1RyYW5zbGF0ZSA9IG1heFRyYW5zbGF0ZTtlbHNlIG5ld1RyYW5zbGF0ZSA9IHRyYW5zbGF0ZTtcblxuICAgIC8vIFVwZGF0ZSBwcm9ncmVzc1xuICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhuZXdUcmFuc2xhdGUpO1xuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgY29uc3QgaXNIID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgaWYgKHNwZWVkID09PSAwKSB7XG4gICAgICAgIHdyYXBwZXJFbFtpc0ggPyAnc2Nyb2xsTGVmdCcgOiAnc2Nyb2xsVG9wJ10gPSAtbmV3VHJhbnNsYXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFzd2lwZXIuc3VwcG9ydC5zbW9vdGhTY3JvbGwpIHtcbiAgICAgICAgICBhbmltYXRlQ1NTTW9kZVNjcm9sbCh7XG4gICAgICAgICAgICBzd2lwZXIsXG4gICAgICAgICAgICB0YXJnZXRQb3NpdGlvbjogLW5ld1RyYW5zbGF0ZSxcbiAgICAgICAgICAgIHNpZGU6IGlzSCA/ICdsZWZ0JyA6ICd0b3AnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlckVsLnNjcm9sbFRvKHtcbiAgICAgICAgICBbaXNIID8gJ2xlZnQnIDogJ3RvcCddOiAtbmV3VHJhbnNsYXRlLFxuICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoc3BlZWQgPT09IDApIHtcbiAgICAgIHN3aXBlci5zZXRUcmFuc2l0aW9uKDApO1xuICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZShuZXdUcmFuc2xhdGUpO1xuICAgICAgaWYgKHJ1bkNhbGxiYWNrcykge1xuICAgICAgICBzd2lwZXIuZW1pdCgnYmVmb3JlVHJhbnNpdGlvblN0YXJ0Jywgc3BlZWQsIGludGVybmFsKTtcbiAgICAgICAgc3dpcGVyLmVtaXQoJ3RyYW5zaXRpb25FbmQnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24oc3BlZWQpO1xuICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZShuZXdUcmFuc2xhdGUpO1xuICAgICAgaWYgKHJ1bkNhbGxiYWNrcykge1xuICAgICAgICBzd2lwZXIuZW1pdCgnYmVmb3JlVHJhbnNpdGlvblN0YXJ0Jywgc3BlZWQsIGludGVybmFsKTtcbiAgICAgICAgc3dpcGVyLmVtaXQoJ3RyYW5zaXRpb25TdGFydCcpO1xuICAgICAgfVxuICAgICAgaWYgKCFzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICAgIHN3aXBlci5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICBpZiAoIXN3aXBlci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpIHtcbiAgICAgICAgICBzd2lwZXIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gdHJhbnNpdGlvbkVuZChlKSB7XG4gICAgICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgIT09IHRoaXMpIHJldHVybjtcbiAgICAgICAgICAgIHN3aXBlci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHN3aXBlci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgICAgICAgICAgc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCA9IG51bGw7XG4gICAgICAgICAgICBkZWxldGUgc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZDtcbiAgICAgICAgICAgIHN3aXBlci5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChydW5DYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgc3dpcGVyLmVtaXQoJ3RyYW5zaXRpb25FbmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHN3aXBlci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHZhciB0cmFuc2xhdGUgPSB7XG4gICAgZ2V0VHJhbnNsYXRlOiBnZXRTd2lwZXJUcmFuc2xhdGUsXG4gICAgc2V0VHJhbnNsYXRlLFxuICAgIG1pblRyYW5zbGF0ZSxcbiAgICBtYXhUcmFuc2xhdGUsXG4gICAgdHJhbnNsYXRlVG9cbiAgfTtcblxuICBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmICghc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gZHVyYXRpb24gPT09IDAgPyBgMG1zYCA6ICcnO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgnc2V0VHJhbnNpdGlvbicsIGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkVtaXQoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBydW5DYWxsYmFja3MsXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBzdGVwXG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3Qge1xuICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICBwcmV2aW91c0luZGV4XG4gICAgfSA9IHN3aXBlcjtcbiAgICBsZXQgZGlyID0gZGlyZWN0aW9uO1xuICAgIGlmICghZGlyKSB7XG4gICAgICBpZiAoYWN0aXZlSW5kZXggPiBwcmV2aW91c0luZGV4KSBkaXIgPSAnbmV4dCc7ZWxzZSBpZiAoYWN0aXZlSW5kZXggPCBwcmV2aW91c0luZGV4KSBkaXIgPSAncHJldic7ZWxzZSBkaXIgPSAncmVzZXQnO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdChgdHJhbnNpdGlvbiR7c3RlcH1gKTtcbiAgICBpZiAocnVuQ2FsbGJhY2tzICYmIGFjdGl2ZUluZGV4ICE9PSBwcmV2aW91c0luZGV4KSB7XG4gICAgICBpZiAoZGlyID09PSAncmVzZXQnKSB7XG4gICAgICAgIHN3aXBlci5lbWl0KGBzbGlkZVJlc2V0VHJhbnNpdGlvbiR7c3RlcH1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmVtaXQoYHNsaWRlQ2hhbmdlVHJhbnNpdGlvbiR7c3RlcH1gKTtcbiAgICAgIGlmIChkaXIgPT09ICduZXh0Jykge1xuICAgICAgICBzd2lwZXIuZW1pdChgc2xpZGVOZXh0VHJhbnNpdGlvbiR7c3RlcH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci5lbWl0KGBzbGlkZVByZXZUcmFuc2l0aW9uJHtzdGVwfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25TdGFydChydW5DYWxsYmFja3MsIGRpcmVjdGlvbikge1xuICAgIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXNcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgIGlmIChwYXJhbXMuYXV0b0hlaWdodCkge1xuICAgICAgc3dpcGVyLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgICB9XG4gICAgdHJhbnNpdGlvbkVtaXQoe1xuICAgICAgc3dpcGVyLFxuICAgICAgcnVuQ2FsbGJhY2tzLFxuICAgICAgZGlyZWN0aW9uLFxuICAgICAgc3RlcDogJ1N0YXJ0J1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkVuZChydW5DYWxsYmFja3MsIGRpcmVjdGlvbikge1xuICAgIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXNcbiAgICB9ID0gc3dpcGVyO1xuICAgIHN3aXBlci5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICBpZiAocGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbigwKTtcbiAgICB0cmFuc2l0aW9uRW1pdCh7XG4gICAgICBzd2lwZXIsXG4gICAgICBydW5DYWxsYmFja3MsXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBzdGVwOiAnRW5kJ1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIHRyYW5zaXRpb24gPSB7XG4gICAgc2V0VHJhbnNpdGlvbixcbiAgICB0cmFuc2l0aW9uU3RhcnQsXG4gICAgdHJhbnNpdGlvbkVuZFxuICB9O1xuXG4gIGZ1bmN0aW9uIHNsaWRlVG8oaW5kZXgsIHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsLCBpbml0aWFsKSB7XG4gICAgaWYgKGluZGV4ID09PSB2b2lkIDApIHtcbiAgICAgIGluZGV4ID0gMDtcbiAgICB9XG4gICAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGluZGV4ID09PSAnc3RyaW5nJykge1xuICAgICAgaW5kZXggPSBwYXJzZUludChpbmRleCwgMTApO1xuICAgIH1cbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGxldCBzbGlkZUluZGV4ID0gaW5kZXg7XG4gICAgaWYgKHNsaWRlSW5kZXggPCAwKSBzbGlkZUluZGV4ID0gMDtcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICBzbmFwR3JpZCxcbiAgICAgIHNsaWRlc0dyaWQsXG4gICAgICBwcmV2aW91c0luZGV4LFxuICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIHdyYXBwZXJFbCxcbiAgICAgIGVuYWJsZWRcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghZW5hYmxlZCAmJiAhaW50ZXJuYWwgJiYgIWluaXRpYWwgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCBzd2lwZXIuYW5pbWF0aW5nICYmIHBhcmFtcy5wcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb24pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzcGVlZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHNwZWVkID0gc3dpcGVyLnBhcmFtcy5zcGVlZDtcbiAgICB9XG4gICAgY29uc3Qgc2tpcCA9IE1hdGgubWluKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwLCBzbGlkZUluZGV4KTtcbiAgICBsZXQgc25hcEluZGV4ID0gc2tpcCArIE1hdGguZmxvb3IoKHNsaWRlSW5kZXggLSBza2lwKSAvIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICAgIGlmIChzbmFwSW5kZXggPj0gc25hcEdyaWQubGVuZ3RoKSBzbmFwSW5kZXggPSBzbmFwR3JpZC5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHRyYW5zbGF0ZSA9IC1zbmFwR3JpZFtzbmFwSW5kZXhdO1xuICAgIC8vIE5vcm1hbGl6ZSBzbGlkZUluZGV4XG4gICAgaWYgKHBhcmFtcy5ub3JtYWxpemVTbGlkZUluZGV4KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlc0dyaWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFRyYW5zbGF0ZSA9IC1NYXRoLmZsb29yKHRyYW5zbGF0ZSAqIDEwMCk7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRHcmlkID0gTWF0aC5mbG9vcihzbGlkZXNHcmlkW2ldICogMTAwKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEdyaWROZXh0ID0gTWF0aC5mbG9vcihzbGlkZXNHcmlkW2kgKyAxXSAqIDEwMCk7XG4gICAgICAgIGlmICh0eXBlb2Ygc2xpZGVzR3JpZFtpICsgMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKG5vcm1hbGl6ZWRUcmFuc2xhdGUgPj0gbm9ybWFsaXplZEdyaWQgJiYgbm9ybWFsaXplZFRyYW5zbGF0ZSA8IG5vcm1hbGl6ZWRHcmlkTmV4dCAtIChub3JtYWxpemVkR3JpZE5leHQgLSBub3JtYWxpemVkR3JpZCkgLyAyKSB7XG4gICAgICAgICAgICBzbGlkZUluZGV4ID0gaTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWRUcmFuc2xhdGUgPj0gbm9ybWFsaXplZEdyaWQgJiYgbm9ybWFsaXplZFRyYW5zbGF0ZSA8IG5vcm1hbGl6ZWRHcmlkTmV4dCkge1xuICAgICAgICAgICAgc2xpZGVJbmRleCA9IGkgKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChub3JtYWxpemVkVHJhbnNsYXRlID49IG5vcm1hbGl6ZWRHcmlkKSB7XG4gICAgICAgICAgc2xpZGVJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRGlyZWN0aW9ucyBsb2Nrc1xuICAgIGlmIChzd2lwZXIuaW5pdGlhbGl6ZWQgJiYgc2xpZGVJbmRleCAhPT0gYWN0aXZlSW5kZXgpIHtcbiAgICAgIGlmICghc3dpcGVyLmFsbG93U2xpZGVOZXh0ICYmIChydGwgPyB0cmFuc2xhdGUgPiBzd2lwZXIudHJhbnNsYXRlICYmIHRyYW5zbGF0ZSA+IHN3aXBlci5taW5UcmFuc2xhdGUoKSA6IHRyYW5zbGF0ZSA8IHN3aXBlci50cmFuc2xhdGUgJiYgdHJhbnNsYXRlIDwgc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlUHJldiAmJiB0cmFuc2xhdGUgPiBzd2lwZXIudHJhbnNsYXRlICYmIHRyYW5zbGF0ZSA+IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkge1xuICAgICAgICBpZiAoKGFjdGl2ZUluZGV4IHx8IDApICE9PSBzbGlkZUluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzbGlkZUluZGV4ICE9PSAocHJldmlvdXNJbmRleCB8fCAwKSAmJiBydW5DYWxsYmFja3MpIHtcbiAgICAgIHN3aXBlci5lbWl0KCdiZWZvcmVTbGlkZUNoYW5nZVN0YXJ0Jyk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHByb2dyZXNzXG4gICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKHRyYW5zbGF0ZSk7XG4gICAgbGV0IGRpcmVjdGlvbjtcbiAgICBpZiAoc2xpZGVJbmRleCA+IGFjdGl2ZUluZGV4KSBkaXJlY3Rpb24gPSAnbmV4dCc7ZWxzZSBpZiAoc2xpZGVJbmRleCA8IGFjdGl2ZUluZGV4KSBkaXJlY3Rpb24gPSAncHJldic7ZWxzZSBkaXJlY3Rpb24gPSAncmVzZXQnO1xuXG4gICAgLy8gVXBkYXRlIEluZGV4XG4gICAgaWYgKHJ0bCAmJiAtdHJhbnNsYXRlID09PSBzd2lwZXIudHJhbnNsYXRlIHx8ICFydGwgJiYgdHJhbnNsYXRlID09PSBzd2lwZXIudHJhbnNsYXRlKSB7XG4gICAgICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoc2xpZGVJbmRleCk7XG4gICAgICAvLyBVcGRhdGUgSGVpZ2h0XG4gICAgICBpZiAocGFyYW1zLmF1dG9IZWlnaHQpIHtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgICAgIH1cbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICBpZiAocGFyYW1zLmVmZmVjdCAhPT0gJ3NsaWRlJykge1xuICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKHRyYW5zbGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoZGlyZWN0aW9uICE9PSAncmVzZXQnKSB7XG4gICAgICAgIHN3aXBlci50cmFuc2l0aW9uU3RhcnQocnVuQ2FsbGJhY2tzLCBkaXJlY3Rpb24pO1xuICAgICAgICBzd2lwZXIudHJhbnNpdGlvbkVuZChydW5DYWxsYmFja3MsIGRpcmVjdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgY29uc3QgaXNIID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgY29uc3QgdCA9IHJ0bCA/IHRyYW5zbGF0ZSA6IC10cmFuc2xhdGU7XG4gICAgICBpZiAoc3BlZWQgPT09IDApIHtcbiAgICAgICAgY29uc3QgaXNWaXJ0dWFsID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gJ25vbmUnO1xuICAgICAgICAgIHN3aXBlci5faW1tZWRpYXRlVmlydHVhbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVmlydHVhbCAmJiAhc3dpcGVyLl9jc3NNb2RlVmlydHVhbEluaXRpYWxTZXQgJiYgc3dpcGVyLnBhcmFtcy5pbml0aWFsU2xpZGUgPiAwKSB7XG4gICAgICAgICAgc3dpcGVyLl9jc3NNb2RlVmlydHVhbEluaXRpYWxTZXQgPSB0cnVlO1xuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB3cmFwcGVyRWxbaXNIID8gJ3Njcm9sbExlZnQnIDogJ3Njcm9sbFRvcCddID0gdDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3cmFwcGVyRWxbaXNIID8gJ3Njcm9sbExlZnQnIDogJ3Njcm9sbFRvcCddID0gdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNWaXJ0dWFsKSB7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSAnJztcbiAgICAgICAgICAgIHN3aXBlci5faW1tZWRpYXRlVmlydHVhbCA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXN3aXBlci5zdXBwb3J0LnNtb290aFNjcm9sbCkge1xuICAgICAgICAgIGFuaW1hdGVDU1NNb2RlU2Nyb2xsKHtcbiAgICAgICAgICAgIHN3aXBlcixcbiAgICAgICAgICAgIHRhcmdldFBvc2l0aW9uOiB0LFxuICAgICAgICAgICAgc2lkZTogaXNIID8gJ2xlZnQnIDogJ3RvcCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB3cmFwcGVyRWwuc2Nyb2xsVG8oe1xuICAgICAgICAgIFtpc0ggPyAnbGVmdCcgOiAndG9wJ106IHQsXG4gICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHN3aXBlci5zZXRUcmFuc2l0aW9uKHNwZWVkKTtcbiAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKHRyYW5zbGF0ZSk7XG4gICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KHNsaWRlSW5kZXgpO1xuICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgc3dpcGVyLmVtaXQoJ2JlZm9yZVRyYW5zaXRpb25TdGFydCcsIHNwZWVkLCBpbnRlcm5hbCk7XG4gICAgc3dpcGVyLnRyYW5zaXRpb25TdGFydChydW5DYWxsYmFja3MsIGRpcmVjdGlvbik7XG4gICAgaWYgKHNwZWVkID09PSAwKSB7XG4gICAgICBzd2lwZXIudHJhbnNpdGlvbkVuZChydW5DYWxsYmFja3MsIGRpcmVjdGlvbik7XG4gICAgfSBlbHNlIGlmICghc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IHRydWU7XG4gICAgICBpZiAoIXN3aXBlci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCkge1xuICAgICAgICBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKGUpIHtcbiAgICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSB0aGlzKSByZXR1cm47XG4gICAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgc3dpcGVyLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgICBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBudWxsO1xuICAgICAgICAgIGRlbGV0ZSBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQ7XG4gICAgICAgICAgc3dpcGVyLnRyYW5zaXRpb25FbmQocnVuQ2FsbGJhY2tzLCBkaXJlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgc3dpcGVyLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgc3dpcGVyLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBzbGlkZVRvTG9vcChpbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpIHtcbiAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkge1xuICAgICAgaW5kZXggPSAwO1xuICAgIH1cbiAgICBpZiAocnVuQ2FsbGJhY2tzID09PSB2b2lkIDApIHtcbiAgICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaW5kZXggPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBpbmRleEFzTnVtYmVyID0gcGFyc2VJbnQoaW5kZXgsIDEwKTtcbiAgICAgIGluZGV4ID0gaW5kZXhBc051bWJlcjtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgIGlmICh0eXBlb2Ygc3BlZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzcGVlZCA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gICAgfVxuICAgIGNvbnN0IGdyaWRFbmFibGVkID0gc3dpcGVyLmdyaWQgJiYgc3dpcGVyLnBhcmFtcy5ncmlkICYmIHN3aXBlci5wYXJhbXMuZ3JpZC5yb3dzID4gMTtcbiAgICBsZXQgbmV3SW5kZXggPSBpbmRleDtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICBpZiAoc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIG5ld0luZGV4ID0gbmV3SW5kZXggKyBzd2lwZXIudmlydHVhbC5zbGlkZXNCZWZvcmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgdGFyZ2V0U2xpZGVJbmRleDtcbiAgICAgICAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IG5ld0luZGV4ICogc3dpcGVyLnBhcmFtcy5ncmlkLnJvd3M7XG4gICAgICAgICAgdGFyZ2V0U2xpZGVJbmRleCA9IHN3aXBlci5zbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JykgKiAxID09PSBzbGlkZUluZGV4KVswXS5jb2x1bW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0U2xpZGVJbmRleCA9IHN3aXBlci5nZXRTbGlkZUluZGV4QnlEYXRhKG5ld0luZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb2xzID0gZ3JpZEVuYWJsZWQgPyBNYXRoLmNlaWwoc3dpcGVyLnNsaWRlcy5sZW5ndGggLyBzd2lwZXIucGFyYW1zLmdyaWQucm93cykgOiBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGNlbnRlcmVkU2xpZGVzXG4gICAgICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgICAgICBsZXQgc2xpZGVzUGVyVmlldyA9IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICAgICAgaWYgKHNsaWRlc1BlclZpZXcgPT09ICdhdXRvJykge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXcgPSBzd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbGlkZXNQZXJWaWV3ID0gTWF0aC5jZWlsKHBhcnNlRmxvYXQoc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3LCAxMCkpO1xuICAgICAgICAgIGlmIChjZW50ZXJlZFNsaWRlcyAmJiBzbGlkZXNQZXJWaWV3ICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldyA9IHNsaWRlc1BlclZpZXcgKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbmVlZExvb3BGaXggPSBjb2xzIC0gdGFyZ2V0U2xpZGVJbmRleCA8IHNsaWRlc1BlclZpZXc7XG4gICAgICAgIGlmIChjZW50ZXJlZFNsaWRlcykge1xuICAgICAgICAgIG5lZWRMb29wRml4ID0gbmVlZExvb3BGaXggfHwgdGFyZ2V0U2xpZGVJbmRleCA8IE1hdGguY2VpbChzbGlkZXNQZXJWaWV3IC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVybmFsICYmIGNlbnRlcmVkU2xpZGVzICYmIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyAhPT0gJ2F1dG8nICYmICFncmlkRW5hYmxlZCkge1xuICAgICAgICAgIG5lZWRMb29wRml4ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lZWRMb29wRml4KSB7XG4gICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gY2VudGVyZWRTbGlkZXMgPyB0YXJnZXRTbGlkZUluZGV4IDwgc3dpcGVyLmFjdGl2ZUluZGV4ID8gJ3ByZXYnIDogJ25leHQnIDogdGFyZ2V0U2xpZGVJbmRleCAtIHN3aXBlci5hY3RpdmVJbmRleCAtIDEgPCBzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgPyAnbmV4dCcgOiAncHJldic7XG4gICAgICAgICAgc3dpcGVyLmxvb3BGaXgoe1xuICAgICAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICAgICAgc2xpZGVUbzogdHJ1ZSxcbiAgICAgICAgICAgIGFjdGl2ZVNsaWRlSW5kZXg6IGRpcmVjdGlvbiA9PT0gJ25leHQnID8gdGFyZ2V0U2xpZGVJbmRleCArIDEgOiB0YXJnZXRTbGlkZUluZGV4IC0gY29scyArIDEsXG4gICAgICAgICAgICBzbGlkZVJlYWxJbmRleDogZGlyZWN0aW9uID09PSAnbmV4dCcgPyBzd2lwZXIucmVhbEluZGV4IDogdW5kZWZpbmVkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IG5ld0luZGV4ICogc3dpcGVyLnBhcmFtcy5ncmlkLnJvd3M7XG4gICAgICAgICAgbmV3SW5kZXggPSBzd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpICogMSA9PT0gc2xpZGVJbmRleClbMF0uY29sdW1uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0luZGV4ID0gc3dpcGVyLmdldFNsaWRlSW5kZXhCeURhdGEobmV3SW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBzd2lwZXIuc2xpZGVUbyhuZXdJbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICAgIH0pO1xuICAgIHJldHVybiBzd2lwZXI7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIgKi9cbiAgZnVuY3Rpb24gc2xpZGVOZXh0KHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKSB7XG4gICAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIGVuYWJsZWQsXG4gICAgICBwYXJhbXMsXG4gICAgICBhbmltYXRpbmdcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghZW5hYmxlZCB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm4gc3dpcGVyO1xuICAgIGlmICh0eXBlb2Ygc3BlZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzcGVlZCA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gICAgfVxuICAgIGxldCBwZXJHcm91cCA9IHBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICBpZiAocGFyYW1zLnNsaWRlc1BlclZpZXcgPT09ICdhdXRvJyAmJiBwYXJhbXMuc2xpZGVzUGVyR3JvdXAgPT09IDEgJiYgcGFyYW1zLnNsaWRlc1Blckdyb3VwQXV0bykge1xuICAgICAgcGVyR3JvdXAgPSBNYXRoLm1heChzd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoJ2N1cnJlbnQnLCB0cnVlKSwgMSk7XG4gICAgfVxuICAgIGNvbnN0IGluY3JlbWVudCA9IHN3aXBlci5hY3RpdmVJbmRleCA8IHBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAgPyAxIDogcGVyR3JvdXA7XG4gICAgY29uc3QgaXNWaXJ0dWFsID0gc3dpcGVyLnZpcnR1YWwgJiYgcGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgIGlmIChhbmltYXRpbmcgJiYgIWlzVmlydHVhbCAmJiBwYXJhbXMubG9vcFByZXZlbnRzU2xpZGluZykgcmV0dXJuIGZhbHNlO1xuICAgICAgc3dpcGVyLmxvb3BGaXgoe1xuICAgICAgICBkaXJlY3Rpb246ICduZXh0J1xuICAgICAgfSk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIHN3aXBlci5fY2xpZW50TGVmdCA9IHN3aXBlci53cmFwcGVyRWwuY2xpZW50TGVmdDtcbiAgICAgIGlmIChzd2lwZXIuYWN0aXZlSW5kZXggPT09IHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMSAmJiBwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCArIGluY3JlbWVudCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwYXJhbXMucmV3aW5kICYmIHN3aXBlci5pc0VuZCkge1xuICAgICAgcmV0dXJuIHN3aXBlci5zbGlkZVRvKDAsIHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCArIGluY3JlbWVudCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICB9XG5cbiAgLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBcIm9mZlwiICovXG4gIGZ1bmN0aW9uIHNsaWRlUHJldihzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCkge1xuICAgIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICBzbmFwR3JpZCxcbiAgICAgIHNsaWRlc0dyaWQsXG4gICAgICBydGxUcmFuc2xhdGUsXG4gICAgICBlbmFibGVkLFxuICAgICAgYW5pbWF0aW5nXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoIWVuYWJsZWQgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuIHN3aXBlcjtcbiAgICBpZiAodHlwZW9mIHNwZWVkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3BlZWQgPSBzd2lwZXIucGFyYW1zLnNwZWVkO1xuICAgIH1cbiAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgaWYgKGFuaW1hdGluZyAmJiAhaXNWaXJ0dWFsICYmIHBhcmFtcy5sb29wUHJldmVudHNTbGlkaW5nKSByZXR1cm4gZmFsc2U7XG4gICAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICAgIGRpcmVjdGlvbjogJ3ByZXYnXG4gICAgICB9KTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgc3dpcGVyLl9jbGllbnRMZWZ0ID0gc3dpcGVyLndyYXBwZXJFbC5jbGllbnRMZWZ0O1xuICAgIH1cbiAgICBjb25zdCB0cmFuc2xhdGUgPSBydGxUcmFuc2xhdGUgPyBzd2lwZXIudHJhbnNsYXRlIDogLXN3aXBlci50cmFuc2xhdGU7XG4gICAgZnVuY3Rpb24gbm9ybWFsaXplKHZhbCkge1xuICAgICAgaWYgKHZhbCA8IDApIHJldHVybiAtTWF0aC5mbG9vcihNYXRoLmFicyh2YWwpKTtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHZhbCk7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRUcmFuc2xhdGUgPSBub3JtYWxpemUodHJhbnNsYXRlKTtcbiAgICBjb25zdCBub3JtYWxpemVkU25hcEdyaWQgPSBzbmFwR3JpZC5tYXAodmFsID0+IG5vcm1hbGl6ZSh2YWwpKTtcbiAgICBsZXQgcHJldlNuYXAgPSBzbmFwR3JpZFtub3JtYWxpemVkU25hcEdyaWQuaW5kZXhPZihub3JtYWxpemVkVHJhbnNsYXRlKSAtIDFdO1xuICAgIGlmICh0eXBlb2YgcHJldlNuYXAgPT09ICd1bmRlZmluZWQnICYmIHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBsZXQgcHJldlNuYXBJbmRleDtcbiAgICAgIHNuYXBHcmlkLmZvckVhY2goKHNuYXAsIHNuYXBJbmRleCkgPT4ge1xuICAgICAgICBpZiAobm9ybWFsaXplZFRyYW5zbGF0ZSA+PSBzbmFwKSB7XG4gICAgICAgICAgLy8gcHJldlNuYXAgPSBzbmFwO1xuICAgICAgICAgIHByZXZTbmFwSW5kZXggPSBzbmFwSW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBwcmV2U25hcEluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBwcmV2U25hcCA9IHNuYXBHcmlkW3ByZXZTbmFwSW5kZXggPiAwID8gcHJldlNuYXBJbmRleCAtIDEgOiBwcmV2U25hcEluZGV4XTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHByZXZJbmRleCA9IDA7XG4gICAgaWYgKHR5cGVvZiBwcmV2U25hcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHByZXZJbmRleCA9IHNsaWRlc0dyaWQuaW5kZXhPZihwcmV2U25hcCk7XG4gICAgICBpZiAocHJldkluZGV4IDwgMCkgcHJldkluZGV4ID0gc3dpcGVyLmFjdGl2ZUluZGV4IC0gMTtcbiAgICAgIGlmIChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nICYmIHBhcmFtcy5zbGlkZXNQZXJHcm91cCA9PT0gMSAmJiBwYXJhbXMuc2xpZGVzUGVyR3JvdXBBdXRvKSB7XG4gICAgICAgIHByZXZJbmRleCA9IHByZXZJbmRleCAtIHN3aXBlci5zbGlkZXNQZXJWaWV3RHluYW1pYygncHJldmlvdXMnLCB0cnVlKSArIDE7XG4gICAgICAgIHByZXZJbmRleCA9IE1hdGgubWF4KHByZXZJbmRleCwgMCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwYXJhbXMucmV3aW5kICYmIHN3aXBlci5pc0JlZ2lubmluZykge1xuICAgICAgY29uc3QgbGFzdEluZGV4ID0gc3dpcGVyLnBhcmFtcy52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHN3aXBlci52aXJ0dWFsID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCAtIDEgOiBzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDE7XG4gICAgICByZXR1cm4gc3dpcGVyLnNsaWRlVG8obGFzdEluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gICAgfSBlbHNlIGlmIChwYXJhbXMubG9vcCAmJiBzd2lwZXIuYWN0aXZlSW5kZXggPT09IDAgJiYgcGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHByZXZJbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHN3aXBlci5zbGlkZVRvKHByZXZJbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICB9XG5cbiAgLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBcIm9mZlwiICovXG4gIGZ1bmN0aW9uIHNsaWRlUmVzZXQoc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpIHtcbiAgICBpZiAocnVuQ2FsbGJhY2tzID09PSB2b2lkIDApIHtcbiAgICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICBpZiAodHlwZW9mIHNwZWVkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3BlZWQgPSBzd2lwZXIucGFyYW1zLnNwZWVkO1xuICAgIH1cbiAgICByZXR1cm4gc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIgKi9cbiAgZnVuY3Rpb24gc2xpZGVUb0Nsb3Nlc3Qoc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwsIHRocmVzaG9sZCkge1xuICAgIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRocmVzaG9sZCA9PT0gdm9pZCAwKSB7XG4gICAgICB0aHJlc2hvbGQgPSAwLjU7XG4gICAgfVxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICBpZiAodHlwZW9mIHNwZWVkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3BlZWQgPSBzd2lwZXIucGFyYW1zLnNwZWVkO1xuICAgIH1cbiAgICBsZXQgaW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgY29uc3Qgc2tpcCA9IE1hdGgubWluKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwLCBpbmRleCk7XG4gICAgY29uc3Qgc25hcEluZGV4ID0gc2tpcCArIE1hdGguZmxvb3IoKGluZGV4IC0gc2tpcCkgLyBzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwKTtcbiAgICBjb25zdCB0cmFuc2xhdGUgPSBzd2lwZXIucnRsVHJhbnNsYXRlID8gc3dpcGVyLnRyYW5zbGF0ZSA6IC1zd2lwZXIudHJhbnNsYXRlO1xuICAgIGlmICh0cmFuc2xhdGUgPj0gc3dpcGVyLnNuYXBHcmlkW3NuYXBJbmRleF0pIHtcbiAgICAgIC8vIFRoZSBjdXJyZW50IHRyYW5zbGF0ZSBpcyBvbiBvciBhZnRlciB0aGUgY3VycmVudCBzbmFwIGluZGV4LCBzbyB0aGUgY2hvaWNlXG4gICAgICAvLyBpcyBiZXR3ZWVuIHRoZSBjdXJyZW50IGluZGV4IGFuZCB0aGUgb25lIGFmdGVyIGl0LlxuICAgICAgY29uc3QgY3VycmVudFNuYXAgPSBzd2lwZXIuc25hcEdyaWRbc25hcEluZGV4XTtcbiAgICAgIGNvbnN0IG5leHRTbmFwID0gc3dpcGVyLnNuYXBHcmlkW3NuYXBJbmRleCArIDFdO1xuICAgICAgaWYgKHRyYW5zbGF0ZSAtIGN1cnJlbnRTbmFwID4gKG5leHRTbmFwIC0gY3VycmVudFNuYXApICogdGhyZXNob2xkKSB7XG4gICAgICAgIGluZGV4ICs9IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZSBjdXJyZW50IHRyYW5zbGF0ZSBpcyBiZWZvcmUgdGhlIGN1cnJlbnQgc25hcCBpbmRleCwgc28gdGhlIGNob2ljZVxuICAgICAgLy8gaXMgYmV0d2VlbiB0aGUgY3VycmVudCBpbmRleCBhbmQgdGhlIG9uZSBiZWZvcmUgaXQuXG4gICAgICBjb25zdCBwcmV2U25hcCA9IHN3aXBlci5zbmFwR3JpZFtzbmFwSW5kZXggLSAxXTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTbmFwID0gc3dpcGVyLnNuYXBHcmlkW3NuYXBJbmRleF07XG4gICAgICBpZiAodHJhbnNsYXRlIC0gcHJldlNuYXAgPD0gKGN1cnJlbnRTbmFwIC0gcHJldlNuYXApICogdGhyZXNob2xkKSB7XG4gICAgICAgIGluZGV4IC09IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgICB9XG4gICAgfVxuICAgIGluZGV4ID0gTWF0aC5tYXgoaW5kZXgsIDApO1xuICAgIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHN3aXBlci5zbGlkZXNHcmlkLmxlbmd0aCAtIDEpO1xuICAgIHJldHVybiBzd2lwZXIuc2xpZGVUbyhpbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2xpZGVUb0NsaWNrZWRTbGlkZSgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmIChzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgc2xpZGVzRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IHNsaWRlc1BlclZpZXcgPSBwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nID8gc3dpcGVyLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiBwYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICBsZXQgc2xpZGVUb0luZGV4ID0gc3dpcGVyLmNsaWNrZWRJbmRleDtcbiAgICBsZXQgcmVhbEluZGV4O1xuICAgIGNvbnN0IHNsaWRlU2VsZWN0b3IgPSBzd2lwZXIuaXNFbGVtZW50ID8gYHN3aXBlci1zbGlkZWAgOiBgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9YDtcbiAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgIGlmIChzd2lwZXIuYW5pbWF0aW5nKSByZXR1cm47XG4gICAgICByZWFsSW5kZXggPSBwYXJzZUludChzd2lwZXIuY2xpY2tlZFNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSwgMTApO1xuICAgICAgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcykge1xuICAgICAgICBpZiAoc2xpZGVUb0luZGV4IDwgc3dpcGVyLmxvb3BlZFNsaWRlcyAtIHNsaWRlc1BlclZpZXcgLyAyIHx8IHNsaWRlVG9JbmRleCA+IHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gc3dpcGVyLmxvb3BlZFNsaWRlcyArIHNsaWRlc1BlclZpZXcgLyAyKSB7XG4gICAgICAgICAgc3dpcGVyLmxvb3BGaXgoKTtcbiAgICAgICAgICBzbGlkZVRvSW5kZXggPSBzd2lwZXIuZ2V0U2xpZGVJbmRleChlbGVtZW50Q2hpbGRyZW4oc2xpZGVzRWwsIGAke3NsaWRlU2VsZWN0b3J9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtyZWFsSW5kZXh9XCJdYClbMF0pO1xuICAgICAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHNsaWRlVG9JbmRleCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzbGlkZVRvSW5kZXggPiBzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIHNsaWRlc1BlclZpZXcpIHtcbiAgICAgICAgc3dpcGVyLmxvb3BGaXgoKTtcbiAgICAgICAgc2xpZGVUb0luZGV4ID0gc3dpcGVyLmdldFNsaWRlSW5kZXgoZWxlbWVudENoaWxkcmVuKHNsaWRlc0VsLCBgJHtzbGlkZVNlbGVjdG9yfVtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7cmVhbEluZGV4fVwiXWApWzBdKTtcbiAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHNsaWRlVG9JbmRleCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICB9XG4gIH1cblxuICB2YXIgc2xpZGUgPSB7XG4gICAgc2xpZGVUbyxcbiAgICBzbGlkZVRvTG9vcCxcbiAgICBzbGlkZU5leHQsXG4gICAgc2xpZGVQcmV2LFxuICAgIHNsaWRlUmVzZXQsXG4gICAgc2xpZGVUb0Nsb3Nlc3QsXG4gICAgc2xpZGVUb0NsaWNrZWRTbGlkZVxuICB9O1xuXG4gIGZ1bmN0aW9uIGxvb3BDcmVhdGUoc2xpZGVSZWFsSW5kZXgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHNsaWRlc0VsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoIXBhcmFtcy5sb29wIHx8IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG4gICAgY29uc3QgaW5pdFNsaWRlcyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHNsaWRlcyA9IGVsZW1lbnRDaGlsZHJlbihzbGlkZXNFbCwgYC4ke3BhcmFtcy5zbGlkZUNsYXNzfSwgc3dpcGVyLXNsaWRlYCk7XG4gICAgICBzbGlkZXMuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnLCBpbmRleCk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGdyaWRFbmFibGVkID0gc3dpcGVyLmdyaWQgJiYgcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDE7XG4gICAgY29uc3Qgc2xpZGVzUGVyR3JvdXAgPSBwYXJhbXMuc2xpZGVzUGVyR3JvdXAgKiAoZ3JpZEVuYWJsZWQgPyBwYXJhbXMuZ3JpZC5yb3dzIDogMSk7XG4gICAgY29uc3Qgc2hvdWxkRmlsbEdyb3VwID0gc3dpcGVyLnNsaWRlcy5sZW5ndGggJSBzbGlkZXNQZXJHcm91cCAhPT0gMDtcbiAgICBjb25zdCBzaG91bGRGaWxsR3JpZCA9IGdyaWRFbmFibGVkICYmIHN3aXBlci5zbGlkZXMubGVuZ3RoICUgcGFyYW1zLmdyaWQucm93cyAhPT0gMDtcbiAgICBjb25zdCBhZGRCbGFua1NsaWRlcyA9IGFtb3VudE9mU2xpZGVzID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50T2ZTbGlkZXM7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBzbGlkZUVsID0gc3dpcGVyLmlzRWxlbWVudCA/IGNyZWF0ZUVsZW1lbnQoJ3N3aXBlci1zbGlkZScsIFtwYXJhbXMuc2xpZGVCbGFua0NsYXNzXSkgOiBjcmVhdGVFbGVtZW50KCdkaXYnLCBbcGFyYW1zLnNsaWRlQ2xhc3MsIHBhcmFtcy5zbGlkZUJsYW5rQ2xhc3NdKTtcbiAgICAgICAgc3dpcGVyLnNsaWRlc0VsLmFwcGVuZChzbGlkZUVsKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChzaG91bGRGaWxsR3JvdXApIHtcbiAgICAgIGlmIChwYXJhbXMubG9vcEFkZEJsYW5rU2xpZGVzKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlc1RvQWRkID0gc2xpZGVzUGVyR3JvdXAgLSBzd2lwZXIuc2xpZGVzLmxlbmd0aCAlIHNsaWRlc1Blckdyb3VwO1xuICAgICAgICBhZGRCbGFua1NsaWRlcyhzbGlkZXNUb0FkZCk7XG4gICAgICAgIHN3aXBlci5yZWNhbGNTbGlkZXMoKTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2hvd1dhcm5pbmcoJ1N3aXBlciBMb29wIFdhcm5pbmc6IFRoZSBudW1iZXIgb2Ygc2xpZGVzIGlzIG5vdCBldmVuIHRvIHNsaWRlc1Blckdyb3VwLCBsb29wIG1vZGUgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseS4gWW91IG5lZWQgdG8gYWRkIG1vcmUgc2xpZGVzIChvciBtYWtlIGR1cGxpY2F0ZXMsIG9yIGVtcHR5IHNsaWRlcyknKTtcbiAgICAgIH1cbiAgICAgIGluaXRTbGlkZXMoKTtcbiAgICB9IGVsc2UgaWYgKHNob3VsZEZpbGxHcmlkKSB7XG4gICAgICBpZiAocGFyYW1zLmxvb3BBZGRCbGFua1NsaWRlcykge1xuICAgICAgICBjb25zdCBzbGlkZXNUb0FkZCA9IHBhcmFtcy5ncmlkLnJvd3MgLSBzd2lwZXIuc2xpZGVzLmxlbmd0aCAlIHBhcmFtcy5ncmlkLnJvd3M7XG4gICAgICAgIGFkZEJsYW5rU2xpZGVzKHNsaWRlc1RvQWRkKTtcbiAgICAgICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaG93V2FybmluZygnU3dpcGVyIExvb3AgV2FybmluZzogVGhlIG51bWJlciBvZiBzbGlkZXMgaXMgbm90IGV2ZW4gdG8gZ3JpZC5yb3dzLCBsb29wIG1vZGUgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseS4gWW91IG5lZWQgdG8gYWRkIG1vcmUgc2xpZGVzIChvciBtYWtlIGR1cGxpY2F0ZXMsIG9yIGVtcHR5IHNsaWRlcyknKTtcbiAgICAgIH1cbiAgICAgIGluaXRTbGlkZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5pdFNsaWRlcygpO1xuICAgIH1cbiAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICBzbGlkZVJlYWxJbmRleCxcbiAgICAgIGRpcmVjdGlvbjogcGFyYW1zLmNlbnRlcmVkU2xpZGVzID8gdW5kZWZpbmVkIDogJ25leHQnXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBsb29wRml4KF90ZW1wKSB7XG4gICAgbGV0IHtcbiAgICAgIHNsaWRlUmVhbEluZGV4LFxuICAgICAgc2xpZGVUbyA9IHRydWUsXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBzZXRUcmFuc2xhdGUsXG4gICAgICBhY3RpdmVTbGlkZUluZGV4LFxuICAgICAgYnlDb250cm9sbGVyLFxuICAgICAgYnlNb3VzZXdoZWVsXG4gICAgfSA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wO1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmxvb3ApIHJldHVybjtcbiAgICBzd2lwZXIuZW1pdCgnYmVmb3JlTG9vcEZpeCcpO1xuICAgIGNvbnN0IHtcbiAgICAgIHNsaWRlcyxcbiAgICAgIGFsbG93U2xpZGVQcmV2LFxuICAgICAgYWxsb3dTbGlkZU5leHQsXG4gICAgICBzbGlkZXNFbCxcbiAgICAgIHBhcmFtc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3Qge1xuICAgICAgY2VudGVyZWRTbGlkZXNcbiAgICB9ID0gcGFyYW1zO1xuICAgIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IHRydWU7XG4gICAgc3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gdHJ1ZTtcbiAgICBpZiAoc3dpcGVyLnZpcnR1YWwgJiYgcGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgaWYgKHNsaWRlVG8pIHtcbiAgICAgICAgaWYgKCFwYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgc3dpcGVyLnNuYXBJbmRleCA9PT0gMCkge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGgsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgc3dpcGVyLnNuYXBJbmRleCA8IHBhcmFtcy5zbGlkZXNQZXJWaWV3KSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCArIHN3aXBlci5zbmFwSW5kZXgsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChzd2lwZXIuc25hcEluZGV4ID09PSBzd2lwZXIuc25hcEdyaWQubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci52aXJ0dWFsLnNsaWRlc0JlZm9yZSwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzd2lwZXIuYWxsb3dTbGlkZVByZXYgPSBhbGxvd1NsaWRlUHJldjtcbiAgICAgIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IGFsbG93U2xpZGVOZXh0O1xuICAgICAgc3dpcGVyLmVtaXQoJ2xvb3BGaXgnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHNsaWRlc1BlclZpZXcgPSBwYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICBpZiAoc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nKSB7XG4gICAgICBzbGlkZXNQZXJWaWV3ID0gc3dpcGVyLnNsaWRlc1BlclZpZXdEeW5hbWljKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlc1BlclZpZXcgPSBNYXRoLmNlaWwocGFyc2VGbG9hdChwYXJhbXMuc2xpZGVzUGVyVmlldywgMTApKTtcbiAgICAgIGlmIChjZW50ZXJlZFNsaWRlcyAmJiBzbGlkZXNQZXJWaWV3ICUgMiA9PT0gMCkge1xuICAgICAgICBzbGlkZXNQZXJWaWV3ID0gc2xpZGVzUGVyVmlldyArIDE7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNsaWRlc1Blckdyb3VwID0gcGFyYW1zLnNsaWRlc1Blckdyb3VwQXV0byA/IHNsaWRlc1BlclZpZXcgOiBwYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgbGV0IGxvb3BlZFNsaWRlcyA9IHNsaWRlc1Blckdyb3VwO1xuICAgIGlmIChsb29wZWRTbGlkZXMgJSBzbGlkZXNQZXJHcm91cCAhPT0gMCkge1xuICAgICAgbG9vcGVkU2xpZGVzICs9IHNsaWRlc1Blckdyb3VwIC0gbG9vcGVkU2xpZGVzICUgc2xpZGVzUGVyR3JvdXA7XG4gICAgfVxuICAgIGxvb3BlZFNsaWRlcyArPSBwYXJhbXMubG9vcEFkZGl0aW9uYWxTbGlkZXM7XG4gICAgc3dpcGVyLmxvb3BlZFNsaWRlcyA9IGxvb3BlZFNsaWRlcztcbiAgICBjb25zdCBncmlkRW5hYmxlZCA9IHN3aXBlci5ncmlkICYmIHBhcmFtcy5ncmlkICYmIHBhcmFtcy5ncmlkLnJvd3MgPiAxO1xuICAgIGlmIChzbGlkZXMubGVuZ3RoIDwgc2xpZGVzUGVyVmlldyArIGxvb3BlZFNsaWRlcykge1xuICAgICAgc2hvd1dhcm5pbmcoJ1N3aXBlciBMb29wIFdhcm5pbmc6IFRoZSBudW1iZXIgb2Ygc2xpZGVzIGlzIG5vdCBlbm91Z2ggZm9yIGxvb3AgbW9kZSwgaXQgd2lsbCBiZSBkaXNhYmxlZCBhbmQgbm90IGZ1bmN0aW9uIHByb3Blcmx5LiBZb3UgbmVlZCB0byBhZGQgbW9yZSBzbGlkZXMgKG9yIG1ha2UgZHVwbGljYXRlcykgb3IgbG93ZXIgdGhlIHZhbHVlcyBvZiBzbGlkZXNQZXJWaWV3IGFuZCBzbGlkZXNQZXJHcm91cCBwYXJhbWV0ZXJzJyk7XG4gICAgfSBlbHNlIGlmIChncmlkRW5hYmxlZCAmJiBwYXJhbXMuZ3JpZC5maWxsID09PSAncm93Jykge1xuICAgICAgc2hvd1dhcm5pbmcoJ1N3aXBlciBMb29wIFdhcm5pbmc6IExvb3AgbW9kZSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGdyaWQuZmlsbCA9IGByb3dgJyk7XG4gICAgfVxuICAgIGNvbnN0IHByZXBlbmRTbGlkZXNJbmRleGVzID0gW107XG4gICAgY29uc3QgYXBwZW5kU2xpZGVzSW5kZXhlcyA9IFtdO1xuICAgIGxldCBhY3RpdmVJbmRleCA9IHN3aXBlci5hY3RpdmVJbmRleDtcbiAgICBpZiAodHlwZW9mIGFjdGl2ZVNsaWRlSW5kZXggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBhY3RpdmVTbGlkZUluZGV4ID0gc3dpcGVyLmdldFNsaWRlSW5kZXgoc2xpZGVzLmZpbHRlcihlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMocGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3MpKVswXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdGl2ZUluZGV4ID0gYWN0aXZlU2xpZGVJbmRleDtcbiAgICB9XG4gICAgY29uc3QgaXNOZXh0ID0gZGlyZWN0aW9uID09PSAnbmV4dCcgfHwgIWRpcmVjdGlvbjtcbiAgICBjb25zdCBpc1ByZXYgPSBkaXJlY3Rpb24gPT09ICdwcmV2JyB8fCAhZGlyZWN0aW9uO1xuICAgIGxldCBzbGlkZXNQcmVwZW5kZWQgPSAwO1xuICAgIGxldCBzbGlkZXNBcHBlbmRlZCA9IDA7XG4gICAgY29uc3QgY29scyA9IGdyaWRFbmFibGVkID8gTWF0aC5jZWlsKHNsaWRlcy5sZW5ndGggLyBwYXJhbXMuZ3JpZC5yb3dzKSA6IHNsaWRlcy5sZW5ndGg7XG4gICAgY29uc3QgYWN0aXZlQ29sSW5kZXggPSBncmlkRW5hYmxlZCA/IHNsaWRlc1thY3RpdmVTbGlkZUluZGV4XS5jb2x1bW4gOiBhY3RpdmVTbGlkZUluZGV4O1xuICAgIGNvbnN0IGFjdGl2ZUNvbEluZGV4V2l0aFNoaWZ0ID0gYWN0aXZlQ29sSW5kZXggKyAoY2VudGVyZWRTbGlkZXMgJiYgdHlwZW9mIHNldFRyYW5zbGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyAtc2xpZGVzUGVyVmlldyAvIDIgKyAwLjUgOiAwKTtcbiAgICAvLyBwcmVwZW5kIGxhc3Qgc2xpZGVzIGJlZm9yZSBzdGFydFxuICAgIGlmIChhY3RpdmVDb2xJbmRleFdpdGhTaGlmdCA8IGxvb3BlZFNsaWRlcykge1xuICAgICAgc2xpZGVzUHJlcGVuZGVkID0gTWF0aC5tYXgobG9vcGVkU2xpZGVzIC0gYWN0aXZlQ29sSW5kZXhXaXRoU2hpZnQsIHNsaWRlc1Blckdyb3VwKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9vcGVkU2xpZGVzIC0gYWN0aXZlQ29sSW5kZXhXaXRoU2hpZnQ7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGkgLSBNYXRoLmZsb29yKGkgLyBjb2xzKSAqIGNvbHM7XG4gICAgICAgIGlmIChncmlkRW5hYmxlZCkge1xuICAgICAgICAgIGNvbnN0IGNvbEluZGV4VG9QcmVwZW5kID0gY29scyAtIGluZGV4IC0gMTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gc2xpZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgICAgICBpZiAoc2xpZGVzW2ldLmNvbHVtbiA9PT0gY29sSW5kZXhUb1ByZXBlbmQpIHByZXBlbmRTbGlkZXNJbmRleGVzLnB1c2goaSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHNsaWRlcy5mb3JFYWNoKChzbGlkZSwgc2xpZGVJbmRleCkgPT4ge1xuICAgICAgICAgIC8vICAgaWYgKHNsaWRlLmNvbHVtbiA9PT0gY29sSW5kZXhUb1ByZXBlbmQpIHByZXBlbmRTbGlkZXNJbmRleGVzLnB1c2goc2xpZGVJbmRleCk7XG4gICAgICAgICAgLy8gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJlcGVuZFNsaWRlc0luZGV4ZXMucHVzaChjb2xzIC0gaW5kZXggLSAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYWN0aXZlQ29sSW5kZXhXaXRoU2hpZnQgKyBzbGlkZXNQZXJWaWV3ID4gY29scyAtIGxvb3BlZFNsaWRlcykge1xuICAgICAgc2xpZGVzQXBwZW5kZWQgPSBNYXRoLm1heChhY3RpdmVDb2xJbmRleFdpdGhTaGlmdCAtIChjb2xzIC0gbG9vcGVkU2xpZGVzICogMiksIHNsaWRlc1Blckdyb3VwKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzQXBwZW5kZWQ7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGkgLSBNYXRoLmZsb29yKGkgLyBjb2xzKSAqIGNvbHM7XG4gICAgICAgIGlmIChncmlkRW5hYmxlZCkge1xuICAgICAgICAgIHNsaWRlcy5mb3JFYWNoKChzbGlkZSwgc2xpZGVJbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNsaWRlLmNvbHVtbiA9PT0gaW5kZXgpIGFwcGVuZFNsaWRlc0luZGV4ZXMucHVzaChzbGlkZUluZGV4KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHBlbmRTbGlkZXNJbmRleGVzLnB1c2goaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXBlci5fX3ByZXZlbnRPYnNlcnZlcl9fID0gdHJ1ZTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgc3dpcGVyLl9fcHJldmVudE9ic2VydmVyX18gPSBmYWxzZTtcbiAgICB9KTtcbiAgICBpZiAoaXNQcmV2KSB7XG4gICAgICBwcmVwZW5kU2xpZGVzSW5kZXhlcy5mb3JFYWNoKGluZGV4ID0+IHtcbiAgICAgICAgc2xpZGVzW2luZGV4XS5zd2lwZXJMb29wTW92ZURPTSA9IHRydWU7XG4gICAgICAgIHNsaWRlc0VsLnByZXBlbmQoc2xpZGVzW2luZGV4XSk7XG4gICAgICAgIHNsaWRlc1tpbmRleF0uc3dpcGVyTG9vcE1vdmVET00gPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNOZXh0KSB7XG4gICAgICBhcHBlbmRTbGlkZXNJbmRleGVzLmZvckVhY2goaW5kZXggPT4ge1xuICAgICAgICBzbGlkZXNbaW5kZXhdLnN3aXBlckxvb3BNb3ZlRE9NID0gdHJ1ZTtcbiAgICAgICAgc2xpZGVzRWwuYXBwZW5kKHNsaWRlc1tpbmRleF0pO1xuICAgICAgICBzbGlkZXNbaW5kZXhdLnN3aXBlckxvb3BNb3ZlRE9NID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgIGlmIChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nKSB7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgfSBlbHNlIGlmIChncmlkRW5hYmxlZCAmJiAocHJlcGVuZFNsaWRlc0luZGV4ZXMubGVuZ3RoID4gMCAmJiBpc1ByZXYgfHwgYXBwZW5kU2xpZGVzSW5kZXhlcy5sZW5ndGggPiAwICYmIGlzTmV4dCkpIHtcbiAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIHNsaWRlSW5kZXgpID0+IHtcbiAgICAgICAgc3dpcGVyLmdyaWQudXBkYXRlU2xpZGUoc2xpZGVJbmRleCwgc2xpZGUsIHN3aXBlci5zbGlkZXMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcykge1xuICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc09mZnNldCgpO1xuICAgIH1cbiAgICBpZiAoc2xpZGVUbykge1xuICAgICAgaWYgKHByZXBlbmRTbGlkZXNJbmRleGVzLmxlbmd0aCA+IDAgJiYgaXNQcmV2KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2xpZGVSZWFsSW5kZXggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlVHJhbnNsYXRlID0gc3dpcGVyLnNsaWRlc0dyaWRbYWN0aXZlSW5kZXhdO1xuICAgICAgICAgIGNvbnN0IG5ld1NsaWRlVHJhbnNsYXRlID0gc3dpcGVyLnNsaWRlc0dyaWRbYWN0aXZlSW5kZXggKyBzbGlkZXNQcmVwZW5kZWRdO1xuICAgICAgICAgIGNvbnN0IGRpZmYgPSBuZXdTbGlkZVRyYW5zbGF0ZSAtIGN1cnJlbnRTbGlkZVRyYW5zbGF0ZTtcbiAgICAgICAgICBpZiAoYnlNb3VzZXdoZWVsKSB7XG4gICAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKHN3aXBlci50cmFuc2xhdGUgLSBkaWZmKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG8oYWN0aXZlSW5kZXggKyBNYXRoLmNlaWwoc2xpZGVzUHJlcGVuZGVkKSwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgaWYgKHNldFRyYW5zbGF0ZSkge1xuICAgICAgICAgICAgICBzd2lwZXIudG91Y2hFdmVudHNEYXRhLnN0YXJ0VHJhbnNsYXRlID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5zdGFydFRyYW5zbGF0ZSAtIGRpZmY7XG4gICAgICAgICAgICAgIHN3aXBlci50b3VjaEV2ZW50c0RhdGEuY3VycmVudFRyYW5zbGF0ZSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGEuY3VycmVudFRyYW5zbGF0ZSAtIGRpZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzZXRUcmFuc2xhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaWZ0ID0gZ3JpZEVuYWJsZWQgPyBwcmVwZW5kU2xpZGVzSW5kZXhlcy5sZW5ndGggLyBwYXJhbXMuZ3JpZC5yb3dzIDogcHJlcGVuZFNsaWRlc0luZGV4ZXMubGVuZ3RoO1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4ICsgc2hpZnQsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIHN3aXBlci50b3VjaEV2ZW50c0RhdGEuY3VycmVudFRyYW5zbGF0ZSA9IHN3aXBlci50cmFuc2xhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFwcGVuZFNsaWRlc0luZGV4ZXMubGVuZ3RoID4gMCAmJiBpc05leHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzbGlkZVJlYWxJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGVUcmFuc2xhdGUgPSBzd2lwZXIuc2xpZGVzR3JpZFthY3RpdmVJbmRleF07XG4gICAgICAgICAgY29uc3QgbmV3U2xpZGVUcmFuc2xhdGUgPSBzd2lwZXIuc2xpZGVzR3JpZFthY3RpdmVJbmRleCAtIHNsaWRlc0FwcGVuZGVkXTtcbiAgICAgICAgICBjb25zdCBkaWZmID0gbmV3U2xpZGVUcmFuc2xhdGUgLSBjdXJyZW50U2xpZGVUcmFuc2xhdGU7XG4gICAgICAgICAgaWYgKGJ5TW91c2V3aGVlbCkge1xuICAgICAgICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZShzd2lwZXIudHJhbnNsYXRlIC0gZGlmZik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZVRvKGFjdGl2ZUluZGV4IC0gc2xpZGVzQXBwZW5kZWQsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChzZXRUcmFuc2xhdGUpIHtcbiAgICAgICAgICAgICAgc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5zdGFydFRyYW5zbGF0ZSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGEuc3RhcnRUcmFuc2xhdGUgLSBkaWZmO1xuICAgICAgICAgICAgICBzd2lwZXIudG91Y2hFdmVudHNEYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBzd2lwZXIudG91Y2hFdmVudHNEYXRhLmN1cnJlbnRUcmFuc2xhdGUgLSBkaWZmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzaGlmdCA9IGdyaWRFbmFibGVkID8gYXBwZW5kU2xpZGVzSW5kZXhlcy5sZW5ndGggLyBwYXJhbXMuZ3JpZC5yb3dzIDogYXBwZW5kU2xpZGVzSW5kZXhlcy5sZW5ndGg7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4IC0gc2hpZnQsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzd2lwZXIuYWxsb3dTbGlkZVByZXYgPSBhbGxvd1NsaWRlUHJldjtcbiAgICBzd2lwZXIuYWxsb3dTbGlkZU5leHQgPSBhbGxvd1NsaWRlTmV4dDtcbiAgICBpZiAoc3dpcGVyLmNvbnRyb2xsZXIgJiYgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCAmJiAhYnlDb250cm9sbGVyKSB7XG4gICAgICBjb25zdCBsb29wUGFyYW1zID0ge1xuICAgICAgICBzbGlkZVJlYWxJbmRleCxcbiAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICBzZXRUcmFuc2xhdGUsXG4gICAgICAgIGFjdGl2ZVNsaWRlSW5kZXgsXG4gICAgICAgIGJ5Q29udHJvbGxlcjogdHJ1ZVxuICAgICAgfTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wpKSB7XG4gICAgICAgIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wuZm9yRWFjaChjID0+IHtcbiAgICAgICAgICBpZiAoIWMuZGVzdHJveWVkICYmIGMucGFyYW1zLmxvb3ApIGMubG9vcEZpeCh7XG4gICAgICAgICAgICAuLi5sb29wUGFyYW1zLFxuICAgICAgICAgICAgc2xpZGVUbzogYy5wYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gcGFyYW1zLnNsaWRlc1BlclZpZXcgPyBzbGlkZVRvIDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgaW5zdGFuY2VvZiBzd2lwZXIuY29uc3RydWN0b3IgJiYgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbC5wYXJhbXMubG9vcCkge1xuICAgICAgICBzd2lwZXIuY29udHJvbGxlci5jb250cm9sLmxvb3BGaXgoe1xuICAgICAgICAgIC4uLmxvb3BQYXJhbXMsXG4gICAgICAgICAgc2xpZGVUbzogc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbC5wYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gcGFyYW1zLnNsaWRlc1BlclZpZXcgPyBzbGlkZVRvIDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCdsb29wRml4Jyk7XG4gIH1cblxuICBmdW5jdGlvbiBsb29wRGVzdHJveSgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHNsaWRlc0VsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoIXBhcmFtcy5sb29wIHx8IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG4gICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgIGNvbnN0IG5ld1NsaWRlc09yZGVyID0gW107XG4gICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSB0eXBlb2Ygc2xpZGVFbC5zd2lwZXJTbGlkZUluZGV4ID09PSAndW5kZWZpbmVkJyA/IHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpICogMSA6IHNsaWRlRWwuc3dpcGVyU2xpZGVJbmRleDtcbiAgICAgIG5ld1NsaWRlc09yZGVyW2luZGV4XSA9IHNsaWRlRWw7XG4gICAgfSk7XG4gICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgc2xpZGVFbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4Jyk7XG4gICAgfSk7XG4gICAgbmV3U2xpZGVzT3JkZXIuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgIHNsaWRlc0VsLmFwcGVuZChzbGlkZUVsKTtcbiAgICB9KTtcbiAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnJlYWxJbmRleCwgMCk7XG4gIH1cblxuICB2YXIgbG9vcCA9IHtcbiAgICBsb29wQ3JlYXRlLFxuICAgIGxvb3BGaXgsXG4gICAgbG9vcERlc3Ryb3lcbiAgfTtcblxuICBmdW5jdGlvbiBzZXRHcmFiQ3Vyc29yKG1vdmluZykge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLnNpbXVsYXRlVG91Y2ggfHwgc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHN3aXBlci5pc0xvY2tlZCB8fCBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICBjb25zdCBlbCA9IHN3aXBlci5wYXJhbXMudG91Y2hFdmVudHNUYXJnZXQgPT09ICdjb250YWluZXInID8gc3dpcGVyLmVsIDogc3dpcGVyLndyYXBwZXJFbDtcbiAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgc3dpcGVyLl9fcHJldmVudE9ic2VydmVyX18gPSB0cnVlO1xuICAgIH1cbiAgICBlbC5zdHlsZS5jdXJzb3IgPSAnbW92ZSc7XG4gICAgZWwuc3R5bGUuY3Vyc29yID0gbW92aW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJztcbiAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgc3dpcGVyLl9fcHJldmVudE9ic2VydmVyX18gPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVuc2V0R3JhYkN1cnNvcigpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc3dpcGVyLmlzTG9ja2VkIHx8IHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgc3dpcGVyLl9fcHJldmVudE9ic2VydmVyX18gPSB0cnVlO1xuICAgIH1cbiAgICBzd2lwZXJbc3dpcGVyLnBhcmFtcy50b3VjaEV2ZW50c1RhcmdldCA9PT0gJ2NvbnRhaW5lcicgPyAnZWwnIDogJ3dyYXBwZXJFbCddLnN0eWxlLmN1cnNvciA9ICcnO1xuICAgIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBzd2lwZXIuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGdyYWJDdXJzb3IgPSB7XG4gICAgc2V0R3JhYkN1cnNvcixcbiAgICB1bnNldEdyYWJDdXJzb3JcbiAgfTtcblxuICAvLyBNb2RpZmllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU0NTIwNTU0L2N1c3RvbS1lbGVtZW50LWdldHJvb3Rub2RlLWNsb3Nlc3QtZnVuY3Rpb24tY3Jvc3NpbmctbXVsdGlwbGUtcGFyZW50LXNoYWRvd2RcbiAgZnVuY3Rpb24gY2xvc2VzdEVsZW1lbnQoc2VsZWN0b3IsIGJhc2UpIHtcbiAgICBpZiAoYmFzZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXNlID0gdGhpcztcbiAgICB9XG4gICAgZnVuY3Rpb24gX19jbG9zZXN0RnJvbShlbCkge1xuICAgICAgaWYgKCFlbCB8fCBlbCA9PT0gZ2V0RG9jdW1lbnQoKSB8fCBlbCA9PT0gZ2V0V2luZG93KCkpIHJldHVybiBudWxsO1xuICAgICAgaWYgKGVsLmFzc2lnbmVkU2xvdCkgZWwgPSBlbC5hc3NpZ25lZFNsb3Q7XG4gICAgICBjb25zdCBmb3VuZCA9IGVsLmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICAgICAgaWYgKCFmb3VuZCAmJiAhZWwuZ2V0Um9vdE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZm91bmQgfHwgX19jbG9zZXN0RnJvbShlbC5nZXRSb290Tm9kZSgpLmhvc3QpO1xuICAgIH1cbiAgICByZXR1cm4gX19jbG9zZXN0RnJvbShiYXNlKTtcbiAgfVxuICBmdW5jdGlvbiBwcmV2ZW50RWRnZVN3aXBlKHN3aXBlciwgZXZlbnQsIHN0YXJ0WCkge1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgZWRnZVN3aXBlRGV0ZWN0aW9uID0gcGFyYW1zLmVkZ2VTd2lwZURldGVjdGlvbjtcbiAgICBjb25zdCBlZGdlU3dpcGVUaHJlc2hvbGQgPSBwYXJhbXMuZWRnZVN3aXBlVGhyZXNob2xkO1xuICAgIGlmIChlZGdlU3dpcGVEZXRlY3Rpb24gJiYgKHN0YXJ0WCA8PSBlZGdlU3dpcGVUaHJlc2hvbGQgfHwgc3RhcnRYID49IHdpbmRvdy5pbm5lcldpZHRoIC0gZWRnZVN3aXBlVGhyZXNob2xkKSkge1xuICAgICAgaWYgKGVkZ2VTd2lwZURldGVjdGlvbiA9PT0gJ3ByZXZlbnQnKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZXZlbnQpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICBsZXQgZSA9IGV2ZW50O1xuICAgIGlmIChlLm9yaWdpbmFsRXZlbnQpIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgY29uc3QgZGF0YSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGE7XG4gICAgaWYgKGUudHlwZSA9PT0gJ3BvaW50ZXJkb3duJykge1xuICAgICAgaWYgKGRhdGEucG9pbnRlcklkICE9PSBudWxsICYmIGRhdGEucG9pbnRlcklkICE9PSBlLnBvaW50ZXJJZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkYXRhLnBvaW50ZXJJZCA9IGUucG9pbnRlcklkO1xuICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZGF0YS50b3VjaElkID0gZS50YXJnZXRUb3VjaGVzWzBdLmlkZW50aWZpZXI7XG4gICAgfVxuICAgIGlmIChlLnR5cGUgPT09ICd0b3VjaHN0YXJ0Jykge1xuICAgICAgLy8gZG9uJ3QgcHJvY2VlZCB0b3VjaCBldmVudFxuICAgICAgcHJldmVudEVkZ2VTd2lwZShzd2lwZXIsIGUsIGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHRvdWNoZXMsXG4gICAgICBlbmFibGVkXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoIWVuYWJsZWQpIHJldHVybjtcbiAgICBpZiAoIXBhcmFtcy5zaW11bGF0ZVRvdWNoICYmIGUucG9pbnRlclR5cGUgPT09ICdtb3VzZScpIHJldHVybjtcbiAgICBpZiAoc3dpcGVyLmFuaW1hdGluZyAmJiBwYXJhbXMucHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghc3dpcGVyLmFuaW1hdGluZyAmJiBwYXJhbXMuY3NzTW9kZSAmJiBwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLmxvb3BGaXgoKTtcbiAgICB9XG4gICAgbGV0IHRhcmdldEVsID0gZS50YXJnZXQ7XG4gICAgaWYgKHBhcmFtcy50b3VjaEV2ZW50c1RhcmdldCA9PT0gJ3dyYXBwZXInKSB7XG4gICAgICBpZiAoIXN3aXBlci53cmFwcGVyRWwuY29udGFpbnModGFyZ2V0RWwpKSByZXR1cm47XG4gICAgfVxuICAgIGlmICgnd2hpY2gnIGluIGUgJiYgZS53aGljaCA9PT0gMykgcmV0dXJuO1xuICAgIGlmICgnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uID4gMCkgcmV0dXJuO1xuICAgIGlmIChkYXRhLmlzVG91Y2hlZCAmJiBkYXRhLmlzTW92ZWQpIHJldHVybjtcblxuICAgIC8vIGNoYW5nZSB0YXJnZXQgZWwgZm9yIHNoYWRvdyByb290IGNvbXBvbmVudFxuICAgIGNvbnN0IHN3aXBpbmdDbGFzc0hhc1ZhbHVlID0gISFwYXJhbXMubm9Td2lwaW5nQ2xhc3MgJiYgcGFyYW1zLm5vU3dpcGluZ0NsYXNzICE9PSAnJztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBldmVudFBhdGggPSBlLmNvbXBvc2VkUGF0aCA/IGUuY29tcG9zZWRQYXRoKCkgOiBlLnBhdGg7XG4gICAgaWYgKHN3aXBpbmdDbGFzc0hhc1ZhbHVlICYmIGUudGFyZ2V0ICYmIGUudGFyZ2V0LnNoYWRvd1Jvb3QgJiYgZXZlbnRQYXRoKSB7XG4gICAgICB0YXJnZXRFbCA9IGV2ZW50UGF0aFswXTtcbiAgICB9XG4gICAgY29uc3Qgbm9Td2lwaW5nU2VsZWN0b3IgPSBwYXJhbXMubm9Td2lwaW5nU2VsZWN0b3IgPyBwYXJhbXMubm9Td2lwaW5nU2VsZWN0b3IgOiBgLiR7cGFyYW1zLm5vU3dpcGluZ0NsYXNzfWA7XG4gICAgY29uc3QgaXNUYXJnZXRTaGFkb3cgPSAhIShlLnRhcmdldCAmJiBlLnRhcmdldC5zaGFkb3dSb290KTtcblxuICAgIC8vIHVzZSBjbG9zZXN0RWxlbWVudCBmb3Igc2hhZG93IHJvb3QgZWxlbWVudCB0byBnZXQgdGhlIGFjdHVhbCBjbG9zZXN0IGZvciBuZXN0ZWQgc2hhZG93IHJvb3QgZWxlbWVudFxuICAgIGlmIChwYXJhbXMubm9Td2lwaW5nICYmIChpc1RhcmdldFNoYWRvdyA/IGNsb3Nlc3RFbGVtZW50KG5vU3dpcGluZ1NlbGVjdG9yLCB0YXJnZXRFbCkgOiB0YXJnZXRFbC5jbG9zZXN0KG5vU3dpcGluZ1NlbGVjdG9yKSkpIHtcbiAgICAgIHN3aXBlci5hbGxvd0NsaWNrID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5zd2lwZUhhbmRsZXIpIHtcbiAgICAgIGlmICghdGFyZ2V0RWwuY2xvc2VzdChwYXJhbXMuc3dpcGVIYW5kbGVyKSkgcmV0dXJuO1xuICAgIH1cbiAgICB0b3VjaGVzLmN1cnJlbnRYID0gZS5wYWdlWDtcbiAgICB0b3VjaGVzLmN1cnJlbnRZID0gZS5wYWdlWTtcbiAgICBjb25zdCBzdGFydFggPSB0b3VjaGVzLmN1cnJlbnRYO1xuICAgIGNvbnN0IHN0YXJ0WSA9IHRvdWNoZXMuY3VycmVudFk7XG5cbiAgICAvLyBEbyBOT1Qgc3RhcnQgaWYgaU9TIGVkZ2Ugc3dpcGUgaXMgZGV0ZWN0ZWQuIE90aGVyd2lzZSBpT1MgYXBwIGNhbm5vdCBzd2lwZS10by1nby1iYWNrIGFueW1vcmVcblxuICAgIGlmICghcHJldmVudEVkZ2VTd2lwZShzd2lwZXIsIGUsIHN0YXJ0WCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihkYXRhLCB7XG4gICAgICBpc1RvdWNoZWQ6IHRydWUsXG4gICAgICBpc01vdmVkOiBmYWxzZSxcbiAgICAgIGFsbG93VG91Y2hDYWxsYmFja3M6IHRydWUsXG4gICAgICBpc1Njcm9sbGluZzogdW5kZWZpbmVkLFxuICAgICAgc3RhcnRNb3Zpbmc6IHVuZGVmaW5lZFxuICAgIH0pO1xuICAgIHRvdWNoZXMuc3RhcnRYID0gc3RhcnRYO1xuICAgIHRvdWNoZXMuc3RhcnRZID0gc3RhcnRZO1xuICAgIGRhdGEudG91Y2hTdGFydFRpbWUgPSBub3coKTtcbiAgICBzd2lwZXIuYWxsb3dDbGljayA9IHRydWU7XG4gICAgc3dpcGVyLnVwZGF0ZVNpemUoKTtcbiAgICBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgaWYgKHBhcmFtcy50aHJlc2hvbGQgPiAwKSBkYXRhLmFsbG93VGhyZXNob2xkTW92ZSA9IGZhbHNlO1xuICAgIGxldCBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgaWYgKHRhcmdldEVsLm1hdGNoZXMoZGF0YS5mb2N1c2FibGVFbGVtZW50cykpIHtcbiAgICAgIHByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG4gICAgICBpZiAodGFyZ2V0RWwubm9kZU5hbWUgPT09ICdTRUxFQ1QnKSB7XG4gICAgICAgIGRhdGEuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubWF0Y2hlcyhkYXRhLmZvY3VzYWJsZUVsZW1lbnRzKSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSB0YXJnZXRFbCkge1xuICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgfVxuICAgIGNvbnN0IHNob3VsZFByZXZlbnREZWZhdWx0ID0gcHJldmVudERlZmF1bHQgJiYgc3dpcGVyLmFsbG93VG91Y2hNb3ZlICYmIHBhcmFtcy50b3VjaFN0YXJ0UHJldmVudERlZmF1bHQ7XG4gICAgaWYgKChwYXJhbXMudG91Y2hTdGFydEZvcmNlUHJldmVudERlZmF1bHQgfHwgc2hvdWxkUHJldmVudERlZmF1bHQpICYmICF0YXJnZXRFbC5pc0NvbnRlbnRFZGl0YWJsZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLmZyZWVNb2RlICYmIHBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmIHN3aXBlci5mcmVlTW9kZSAmJiBzd2lwZXIuYW5pbWF0aW5nICYmICFwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc3dpcGVyLmZyZWVNb2RlLm9uVG91Y2hTdGFydCgpO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgndG91Y2hTdGFydCcsIGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaE1vdmUoZXZlbnQpIHtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCBkYXRhID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YTtcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICB0b3VjaGVzLFxuICAgICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgICBlbmFibGVkXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoIWVuYWJsZWQpIHJldHVybjtcbiAgICBpZiAoIXBhcmFtcy5zaW11bGF0ZVRvdWNoICYmIGV2ZW50LnBvaW50ZXJUeXBlID09PSAnbW91c2UnKSByZXR1cm47XG4gICAgbGV0IGUgPSBldmVudDtcbiAgICBpZiAoZS5vcmlnaW5hbEV2ZW50KSBlID0gZS5vcmlnaW5hbEV2ZW50O1xuICAgIGlmIChlLnR5cGUgPT09ICdwb2ludGVybW92ZScpIHtcbiAgICAgIGlmIChkYXRhLnRvdWNoSWQgIT09IG51bGwpIHJldHVybjsgLy8gcmV0dXJuIGZyb20gcG9pbnRlciBpZiB3ZSB1c2UgdG91Y2hcbiAgICAgIGNvbnN0IGlkID0gZS5wb2ludGVySWQ7XG4gICAgICBpZiAoaWQgIT09IGRhdGEucG9pbnRlcklkKSByZXR1cm47XG4gICAgfVxuICAgIGxldCB0YXJnZXRUb3VjaDtcbiAgICBpZiAoZS50eXBlID09PSAndG91Y2htb3ZlJykge1xuICAgICAgdGFyZ2V0VG91Y2ggPSBbLi4uZS5jaGFuZ2VkVG91Y2hlc10uZmlsdGVyKHQgPT4gdC5pZGVudGlmaWVyID09PSBkYXRhLnRvdWNoSWQpWzBdO1xuICAgICAgaWYgKCF0YXJnZXRUb3VjaCB8fCB0YXJnZXRUb3VjaC5pZGVudGlmaWVyICE9PSBkYXRhLnRvdWNoSWQpIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0VG91Y2ggPSBlO1xuICAgIH1cbiAgICBpZiAoIWRhdGEuaXNUb3VjaGVkKSB7XG4gICAgICBpZiAoZGF0YS5zdGFydE1vdmluZyAmJiBkYXRhLmlzU2Nyb2xsaW5nKSB7XG4gICAgICAgIHN3aXBlci5lbWl0KCd0b3VjaE1vdmVPcHBvc2l0ZScsIGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYWdlWCA9IHRhcmdldFRvdWNoLnBhZ2VYO1xuICAgIGNvbnN0IHBhZ2VZID0gdGFyZ2V0VG91Y2gucGFnZVk7XG4gICAgaWYgKGUucHJldmVudGVkQnlOZXN0ZWRTd2lwZXIpIHtcbiAgICAgIHRvdWNoZXMuc3RhcnRYID0gcGFnZVg7XG4gICAgICB0b3VjaGVzLnN0YXJ0WSA9IHBhZ2VZO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXN3aXBlci5hbGxvd1RvdWNoTW92ZSkge1xuICAgICAgaWYgKCFlLnRhcmdldC5tYXRjaGVzKGRhdGEuZm9jdXNhYmxlRWxlbWVudHMpKSB7XG4gICAgICAgIHN3aXBlci5hbGxvd0NsaWNrID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5pc1RvdWNoZWQpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0b3VjaGVzLCB7XG4gICAgICAgICAgc3RhcnRYOiBwYWdlWCxcbiAgICAgICAgICBzdGFydFk6IHBhZ2VZLFxuICAgICAgICAgIGN1cnJlbnRYOiBwYWdlWCxcbiAgICAgICAgICBjdXJyZW50WTogcGFnZVlcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEudG91Y2hTdGFydFRpbWUgPSBub3coKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy50b3VjaFJlbGVhc2VPbkVkZ2VzICYmICFwYXJhbXMubG9vcCkge1xuICAgICAgaWYgKHN3aXBlci5pc1ZlcnRpY2FsKCkpIHtcbiAgICAgICAgLy8gVmVydGljYWxcbiAgICAgICAgaWYgKHBhZ2VZIDwgdG91Y2hlcy5zdGFydFkgJiYgc3dpcGVyLnRyYW5zbGF0ZSA8PSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgfHwgcGFnZVkgPiB0b3VjaGVzLnN0YXJ0WSAmJiBzd2lwZXIudHJhbnNsYXRlID49IHN3aXBlci5taW5UcmFuc2xhdGUoKSkge1xuICAgICAgICAgIGRhdGEuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICAgICAgZGF0YS5pc01vdmVkID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHBhZ2VYIDwgdG91Y2hlcy5zdGFydFggJiYgc3dpcGVyLnRyYW5zbGF0ZSA8PSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgfHwgcGFnZVggPiB0b3VjaGVzLnN0YXJ0WCAmJiBzd2lwZXIudHJhbnNsYXRlID49IHN3aXBlci5taW5UcmFuc2xhdGUoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZS50YXJnZXQubWF0Y2hlcyhkYXRhLmZvY3VzYWJsZUVsZW1lbnRzKSkge1xuICAgICAgICBkYXRhLmlzTW92ZWQgPSB0cnVlO1xuICAgICAgICBzd2lwZXIuYWxsb3dDbGljayA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkYXRhLmFsbG93VG91Y2hDYWxsYmFja3MpIHtcbiAgICAgIHN3aXBlci5lbWl0KCd0b3VjaE1vdmUnLCBlKTtcbiAgICB9XG4gICAgdG91Y2hlcy5wcmV2aW91c1ggPSB0b3VjaGVzLmN1cnJlbnRYO1xuICAgIHRvdWNoZXMucHJldmlvdXNZID0gdG91Y2hlcy5jdXJyZW50WTtcbiAgICB0b3VjaGVzLmN1cnJlbnRYID0gcGFnZVg7XG4gICAgdG91Y2hlcy5jdXJyZW50WSA9IHBhZ2VZO1xuICAgIGNvbnN0IGRpZmZYID0gdG91Y2hlcy5jdXJyZW50WCAtIHRvdWNoZXMuc3RhcnRYO1xuICAgIGNvbnN0IGRpZmZZID0gdG91Y2hlcy5jdXJyZW50WSAtIHRvdWNoZXMuc3RhcnRZO1xuICAgIGlmIChzd2lwZXIucGFyYW1zLnRocmVzaG9sZCAmJiBNYXRoLnNxcnQoZGlmZlggKiogMiArIGRpZmZZICoqIDIpIDwgc3dpcGVyLnBhcmFtcy50aHJlc2hvbGQpIHJldHVybjtcbiAgICBpZiAodHlwZW9mIGRhdGEuaXNTY3JvbGxpbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsZXQgdG91Y2hBbmdsZTtcbiAgICAgIGlmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkgJiYgdG91Y2hlcy5jdXJyZW50WSA9PT0gdG91Y2hlcy5zdGFydFkgfHwgc3dpcGVyLmlzVmVydGljYWwoKSAmJiB0b3VjaGVzLmN1cnJlbnRYID09PSB0b3VjaGVzLnN0YXJ0WCkge1xuICAgICAgICBkYXRhLmlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgaWYgKGRpZmZYICogZGlmZlggKyBkaWZmWSAqIGRpZmZZID49IDI1KSB7XG4gICAgICAgICAgdG91Y2hBbmdsZSA9IE1hdGguYXRhbjIoTWF0aC5hYnMoZGlmZlkpLCBNYXRoLmFicyhkaWZmWCkpICogMTgwIC8gTWF0aC5QSTtcbiAgICAgICAgICBkYXRhLmlzU2Nyb2xsaW5nID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gdG91Y2hBbmdsZSA+IHBhcmFtcy50b3VjaEFuZ2xlIDogOTAgLSB0b3VjaEFuZ2xlID4gcGFyYW1zLnRvdWNoQW5nbGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEuaXNTY3JvbGxpbmcpIHtcbiAgICAgIHN3aXBlci5lbWl0KCd0b3VjaE1vdmVPcHBvc2l0ZScsIGUpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuc3RhcnRNb3ZpbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodG91Y2hlcy5jdXJyZW50WCAhPT0gdG91Y2hlcy5zdGFydFggfHwgdG91Y2hlcy5jdXJyZW50WSAhPT0gdG91Y2hlcy5zdGFydFkpIHtcbiAgICAgICAgZGF0YS5zdGFydE1vdmluZyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkYXRhLmlzU2Nyb2xsaW5nIHx8IGUudHlwZSA9PT0gJ3RvdWNobW92ZScgJiYgZGF0YS5wcmV2ZW50VG91Y2hNb3ZlRnJvbVBvaW50ZXJNb3ZlKSB7XG4gICAgICBkYXRhLmlzVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWRhdGEuc3RhcnRNb3ZpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpcGVyLmFsbG93Q2xpY2sgPSBmYWxzZTtcbiAgICBpZiAoIXBhcmFtcy5jc3NNb2RlICYmIGUuY2FuY2VsYWJsZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnRvdWNoTW92ZVN0b3BQcm9wYWdhdGlvbiAmJiAhcGFyYW1zLm5lc3RlZCkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgbGV0IGRpZmYgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBkaWZmWCA6IGRpZmZZO1xuICAgIGxldCB0b3VjaGVzRGlmZiA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/IHRvdWNoZXMuY3VycmVudFggLSB0b3VjaGVzLnByZXZpb3VzWCA6IHRvdWNoZXMuY3VycmVudFkgLSB0b3VjaGVzLnByZXZpb3VzWTtcbiAgICBpZiAocGFyYW1zLm9uZVdheU1vdmVtZW50KSB7XG4gICAgICBkaWZmID0gTWF0aC5hYnMoZGlmZikgKiAocnRsID8gMSA6IC0xKTtcbiAgICAgIHRvdWNoZXNEaWZmID0gTWF0aC5hYnModG91Y2hlc0RpZmYpICogKHJ0bCA/IDEgOiAtMSk7XG4gICAgfVxuICAgIHRvdWNoZXMuZGlmZiA9IGRpZmY7XG4gICAgZGlmZiAqPSBwYXJhbXMudG91Y2hSYXRpbztcbiAgICBpZiAocnRsKSB7XG4gICAgICBkaWZmID0gLWRpZmY7XG4gICAgICB0b3VjaGVzRGlmZiA9IC10b3VjaGVzRGlmZjtcbiAgICB9XG4gICAgY29uc3QgcHJldlRvdWNoZXNEaXJlY3Rpb24gPSBzd2lwZXIudG91Y2hlc0RpcmVjdGlvbjtcbiAgICBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPSBkaWZmID4gMCA/ICdwcmV2JyA6ICduZXh0JztcbiAgICBzd2lwZXIudG91Y2hlc0RpcmVjdGlvbiA9IHRvdWNoZXNEaWZmID4gMCA/ICdwcmV2JyA6ICduZXh0JztcbiAgICBjb25zdCBpc0xvb3AgPSBzd2lwZXIucGFyYW1zLmxvb3AgJiYgIXBhcmFtcy5jc3NNb2RlO1xuICAgIGNvbnN0IGFsbG93TG9vcEZpeCA9IHN3aXBlci50b3VjaGVzRGlyZWN0aW9uID09PSAnbmV4dCcgJiYgc3dpcGVyLmFsbG93U2xpZGVOZXh0IHx8IHN3aXBlci50b3VjaGVzRGlyZWN0aW9uID09PSAncHJldicgJiYgc3dpcGVyLmFsbG93U2xpZGVQcmV2O1xuICAgIGlmICghZGF0YS5pc01vdmVkKSB7XG4gICAgICBpZiAoaXNMb29wICYmIGFsbG93TG9vcEZpeCkge1xuICAgICAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICAgICAgZGlyZWN0aW9uOiBzd2lwZXIuc3dpcGVEaXJlY3Rpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBkYXRhLnN0YXJ0VHJhbnNsYXRlID0gc3dpcGVyLmdldFRyYW5zbGF0ZSgpO1xuICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24oMCk7XG4gICAgICBpZiAoc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgICBjb25zdCBldnQgPSBuZXcgd2luZG93LkN1c3RvbUV2ZW50KCd0cmFuc2l0aW9uZW5kJywge1xuICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGJ5U3dpcGVyVG91Y2hNb3ZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICB9XG4gICAgICBkYXRhLmFsbG93TW9tZW50dW1Cb3VuY2UgPSBmYWxzZTtcbiAgICAgIC8vIEdyYWIgQ3Vyc29yXG4gICAgICBpZiAocGFyYW1zLmdyYWJDdXJzb3IgJiYgKHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9PT0gdHJ1ZSB8fCBzd2lwZXIuYWxsb3dTbGlkZVByZXYgPT09IHRydWUpKSB7XG4gICAgICAgIHN3aXBlci5zZXRHcmFiQ3Vyc29yKHRydWUpO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmVtaXQoJ3NsaWRlckZpcnN0TW92ZScsIGUpO1xuICAgIH1cbiAgICBsZXQgbG9vcEZpeGVkO1xuICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGlmIChkYXRhLmlzTW92ZWQgJiYgZGF0YS5hbGxvd1RocmVzaG9sZE1vdmUgJiYgcHJldlRvdWNoZXNEaXJlY3Rpb24gIT09IHN3aXBlci50b3VjaGVzRGlyZWN0aW9uICYmIGlzTG9vcCAmJiBhbGxvd0xvb3BGaXggJiYgTWF0aC5hYnMoZGlmZikgPj0gMSkge1xuICAgICAgT2JqZWN0LmFzc2lnbih0b3VjaGVzLCB7XG4gICAgICAgIHN0YXJ0WDogcGFnZVgsXG4gICAgICAgIHN0YXJ0WTogcGFnZVksXG4gICAgICAgIGN1cnJlbnRYOiBwYWdlWCxcbiAgICAgICAgY3VycmVudFk6IHBhZ2VZLFxuICAgICAgICBzdGFydFRyYW5zbGF0ZTogZGF0YS5jdXJyZW50VHJhbnNsYXRlXG4gICAgICB9KTtcbiAgICAgIGRhdGEubG9vcFN3YXBSZXNldCA9IHRydWU7XG4gICAgICBkYXRhLnN0YXJ0VHJhbnNsYXRlID0gZGF0YS5jdXJyZW50VHJhbnNsYXRlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgnc2xpZGVyTW92ZScsIGUpO1xuICAgIGRhdGEuaXNNb3ZlZCA9IHRydWU7XG4gICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGlmZiArIGRhdGEuc3RhcnRUcmFuc2xhdGU7XG4gICAgbGV0IGRpc2FibGVQYXJlbnRTd2lwZXIgPSB0cnVlO1xuICAgIGxldCByZXNpc3RhbmNlUmF0aW8gPSBwYXJhbXMucmVzaXN0YW5jZVJhdGlvO1xuICAgIGlmIChwYXJhbXMudG91Y2hSZWxlYXNlT25FZGdlcykge1xuICAgICAgcmVzaXN0YW5jZVJhdGlvID0gMDtcbiAgICB9XG4gICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICBpZiAoaXNMb29wICYmIGFsbG93TG9vcEZpeCAmJiAhbG9vcEZpeGVkICYmIGRhdGEuYWxsb3dUaHJlc2hvbGRNb3ZlICYmIGRhdGEuY3VycmVudFRyYW5zbGF0ZSA+IChwYXJhbXMuY2VudGVyZWRTbGlkZXMgPyBzd2lwZXIubWluVHJhbnNsYXRlKCkgLSBzd2lwZXIuc2xpZGVzU2l6ZXNHcmlkW3N3aXBlci5hY3RpdmVJbmRleCArIDFdIDogc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSkge1xuICAgICAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICAgICAgZGlyZWN0aW9uOiAncHJldicsXG4gICAgICAgICAgc2V0VHJhbnNsYXRlOiB0cnVlLFxuICAgICAgICAgIGFjdGl2ZVNsaWRlSW5kZXg6IDBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5jdXJyZW50VHJhbnNsYXRlID4gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSB7XG4gICAgICAgIGRpc2FibGVQYXJlbnRTd2lwZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHBhcmFtcy5yZXNpc3RhbmNlKSB7XG4gICAgICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpIC0gMSArICgtc3dpcGVyLm1pblRyYW5zbGF0ZSgpICsgZGF0YS5zdGFydFRyYW5zbGF0ZSArIGRpZmYpICoqIHJlc2lzdGFuY2VSYXRpbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlmZiA8IDApIHtcbiAgICAgIGlmIChpc0xvb3AgJiYgYWxsb3dMb29wRml4ICYmICFsb29wRml4ZWQgJiYgZGF0YS5hbGxvd1RocmVzaG9sZE1vdmUgJiYgZGF0YS5jdXJyZW50VHJhbnNsYXRlIDwgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyA/IHN3aXBlci5tYXhUcmFuc2xhdGUoKSArIHN3aXBlci5zbGlkZXNTaXplc0dyaWRbc3dpcGVyLnNsaWRlc1NpemVzR3JpZC5sZW5ndGggLSAxXSA6IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkpIHtcbiAgICAgICAgc3dpcGVyLmxvb3BGaXgoe1xuICAgICAgICAgIGRpcmVjdGlvbjogJ25leHQnLFxuICAgICAgICAgIHNldFRyYW5zbGF0ZTogdHJ1ZSxcbiAgICAgICAgICBhY3RpdmVTbGlkZUluZGV4OiBzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nID8gc3dpcGVyLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiBNYXRoLmNlaWwocGFyc2VGbG9hdChwYXJhbXMuc2xpZGVzUGVyVmlldywgMTApKSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5jdXJyZW50VHJhbnNsYXRlIDwgc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSB7XG4gICAgICAgIGRpc2FibGVQYXJlbnRTd2lwZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHBhcmFtcy5yZXNpc3RhbmNlKSB7XG4gICAgICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpICsgMSAtIChzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBkYXRhLnN0YXJ0VHJhbnNsYXRlIC0gZGlmZikgKiogcmVzaXN0YW5jZVJhdGlvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkaXNhYmxlUGFyZW50U3dpcGVyKSB7XG4gICAgICBlLnByZXZlbnRlZEJ5TmVzdGVkU3dpcGVyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBEaXJlY3Rpb25zIGxvY2tzXG4gICAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZU5leHQgJiYgc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAnbmV4dCcgJiYgZGF0YS5jdXJyZW50VHJhbnNsYXRlIDwgZGF0YS5zdGFydFRyYW5zbGF0ZSkge1xuICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgICB9XG4gICAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZVByZXYgJiYgc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAncHJldicgJiYgZGF0YS5jdXJyZW50VHJhbnNsYXRlID4gZGF0YS5zdGFydFRyYW5zbGF0ZSkge1xuICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgICB9XG4gICAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZVByZXYgJiYgIXN3aXBlci5hbGxvd1NsaWRlTmV4dCkge1xuICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgICB9XG5cbiAgICAvLyBUaHJlc2hvbGRcbiAgICBpZiAocGFyYW1zLnRocmVzaG9sZCA+IDApIHtcbiAgICAgIGlmIChNYXRoLmFicyhkaWZmKSA+IHBhcmFtcy50aHJlc2hvbGQgfHwgZGF0YS5hbGxvd1RocmVzaG9sZE1vdmUpIHtcbiAgICAgICAgaWYgKCFkYXRhLmFsbG93VGhyZXNob2xkTW92ZSkge1xuICAgICAgICAgIGRhdGEuYWxsb3dUaHJlc2hvbGRNb3ZlID0gdHJ1ZTtcbiAgICAgICAgICB0b3VjaGVzLnN0YXJ0WCA9IHRvdWNoZXMuY3VycmVudFg7XG4gICAgICAgICAgdG91Y2hlcy5zdGFydFkgPSB0b3VjaGVzLmN1cnJlbnRZO1xuICAgICAgICAgIGRhdGEuY3VycmVudFRyYW5zbGF0ZSA9IGRhdGEuc3RhcnRUcmFuc2xhdGU7XG4gICAgICAgICAgdG91Y2hlcy5kaWZmID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gdG91Y2hlcy5jdXJyZW50WCAtIHRvdWNoZXMuc3RhcnRYIDogdG91Y2hlcy5jdXJyZW50WSAtIHRvdWNoZXMuc3RhcnRZO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXBhcmFtcy5mb2xsb3dGaW5nZXIgfHwgcGFyYW1zLmNzc01vZGUpIHJldHVybjtcblxuICAgIC8vIFVwZGF0ZSBhY3RpdmUgaW5kZXggaW4gZnJlZSBtb2RlXG4gICAgaWYgKHBhcmFtcy5mcmVlTW9kZSAmJiBwYXJhbXMuZnJlZU1vZGUuZW5hYmxlZCAmJiBzd2lwZXIuZnJlZU1vZGUgfHwgcGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MpIHtcbiAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5mcmVlTW9kZSAmJiBwYXJhbXMuZnJlZU1vZGUuZW5hYmxlZCAmJiBzd2lwZXIuZnJlZU1vZGUpIHtcbiAgICAgIHN3aXBlci5mcmVlTW9kZS5vblRvdWNoTW92ZSgpO1xuICAgIH1cbiAgICAvLyBVcGRhdGUgcHJvZ3Jlc3NcbiAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MoZGF0YS5jdXJyZW50VHJhbnNsYXRlKTtcbiAgICAvLyBVcGRhdGUgdHJhbnNsYXRlXG4gICAgc3dpcGVyLnNldFRyYW5zbGF0ZShkYXRhLmN1cnJlbnRUcmFuc2xhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaEVuZChldmVudCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3QgZGF0YSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGE7XG4gICAgbGV0IGUgPSBldmVudDtcbiAgICBpZiAoZS5vcmlnaW5hbEV2ZW50KSBlID0gZS5vcmlnaW5hbEV2ZW50O1xuICAgIGxldCB0YXJnZXRUb3VjaDtcbiAgICBjb25zdCBpc1RvdWNoRXZlbnQgPSBlLnR5cGUgPT09ICd0b3VjaGVuZCcgfHwgZS50eXBlID09PSAndG91Y2hjYW5jZWwnO1xuICAgIGlmICghaXNUb3VjaEV2ZW50KSB7XG4gICAgICBpZiAoZGF0YS50b3VjaElkICE9PSBudWxsKSByZXR1cm47IC8vIHJldHVybiBmcm9tIHBvaW50ZXIgaWYgd2UgdXNlIHRvdWNoXG4gICAgICBpZiAoZS5wb2ludGVySWQgIT09IGRhdGEucG9pbnRlcklkKSByZXR1cm47XG4gICAgICB0YXJnZXRUb3VjaCA9IGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldFRvdWNoID0gWy4uLmUuY2hhbmdlZFRvdWNoZXNdLmZpbHRlcih0ID0+IHQuaWRlbnRpZmllciA9PT0gZGF0YS50b3VjaElkKVswXTtcbiAgICAgIGlmICghdGFyZ2V0VG91Y2ggfHwgdGFyZ2V0VG91Y2guaWRlbnRpZmllciAhPT0gZGF0YS50b3VjaElkKSByZXR1cm47XG4gICAgfVxuICAgIGlmIChbJ3BvaW50ZXJjYW5jZWwnLCAncG9pbnRlcm91dCcsICdwb2ludGVybGVhdmUnLCAnY29udGV4dG1lbnUnXS5pbmNsdWRlcyhlLnR5cGUpKSB7XG4gICAgICBjb25zdCBwcm9jZWVkID0gWydwb2ludGVyY2FuY2VsJywgJ2NvbnRleHRtZW51J10uaW5jbHVkZXMoZS50eXBlKSAmJiAoc3dpcGVyLmJyb3dzZXIuaXNTYWZhcmkgfHwgc3dpcGVyLmJyb3dzZXIuaXNXZWJWaWV3KTtcbiAgICAgIGlmICghcHJvY2VlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGRhdGEucG9pbnRlcklkID0gbnVsbDtcbiAgICBkYXRhLnRvdWNoSWQgPSBudWxsO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHRvdWNoZXMsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIHNsaWRlc0dyaWQsXG4gICAgICBlbmFibGVkXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoIWVuYWJsZWQpIHJldHVybjtcbiAgICBpZiAoIXBhcmFtcy5zaW11bGF0ZVRvdWNoICYmIGUucG9pbnRlclR5cGUgPT09ICdtb3VzZScpIHJldHVybjtcbiAgICBpZiAoZGF0YS5hbGxvd1RvdWNoQ2FsbGJhY2tzKSB7XG4gICAgICBzd2lwZXIuZW1pdCgndG91Y2hFbmQnLCBlKTtcbiAgICB9XG4gICAgZGF0YS5hbGxvd1RvdWNoQ2FsbGJhY2tzID0gZmFsc2U7XG4gICAgaWYgKCFkYXRhLmlzVG91Y2hlZCkge1xuICAgICAgaWYgKGRhdGEuaXNNb3ZlZCAmJiBwYXJhbXMuZ3JhYkN1cnNvcikge1xuICAgICAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcihmYWxzZSk7XG4gICAgICB9XG4gICAgICBkYXRhLmlzTW92ZWQgPSBmYWxzZTtcbiAgICAgIGRhdGEuc3RhcnRNb3ZpbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gR3JhYiBDdXJzb3JcbiAgICBpZiAocGFyYW1zLmdyYWJDdXJzb3IgJiYgZGF0YS5pc01vdmVkICYmIGRhdGEuaXNUb3VjaGVkICYmIChzd2lwZXIuYWxsb3dTbGlkZU5leHQgPT09IHRydWUgfHwgc3dpcGVyLmFsbG93U2xpZGVQcmV2ID09PSB0cnVlKSkge1xuICAgICAgc3dpcGVyLnNldEdyYWJDdXJzb3IoZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIFRpbWUgZGlmZlxuICAgIGNvbnN0IHRvdWNoRW5kVGltZSA9IG5vdygpO1xuICAgIGNvbnN0IHRpbWVEaWZmID0gdG91Y2hFbmRUaW1lIC0gZGF0YS50b3VjaFN0YXJ0VGltZTtcblxuICAgIC8vIFRhcCwgZG91YmxlVGFwLCBDbGlja1xuICAgIGlmIChzd2lwZXIuYWxsb3dDbGljaykge1xuICAgICAgY29uc3QgcGF0aFRyZWUgPSBlLnBhdGggfHwgZS5jb21wb3NlZFBhdGggJiYgZS5jb21wb3NlZFBhdGgoKTtcbiAgICAgIHN3aXBlci51cGRhdGVDbGlja2VkU2xpZGUocGF0aFRyZWUgJiYgcGF0aFRyZWVbMF0gfHwgZS50YXJnZXQsIHBhdGhUcmVlKTtcbiAgICAgIHN3aXBlci5lbWl0KCd0YXAgY2xpY2snLCBlKTtcbiAgICAgIGlmICh0aW1lRGlmZiA8IDMwMCAmJiB0b3VjaEVuZFRpbWUgLSBkYXRhLmxhc3RDbGlja1RpbWUgPCAzMDApIHtcbiAgICAgICAgc3dpcGVyLmVtaXQoJ2RvdWJsZVRhcCBkb3VibGVDbGljaycsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBkYXRhLmxhc3RDbGlja1RpbWUgPSBub3coKTtcbiAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5kZXN0cm95ZWQpIHN3aXBlci5hbGxvd0NsaWNrID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBpZiAoIWRhdGEuaXNUb3VjaGVkIHx8ICFkYXRhLmlzTW92ZWQgfHwgIXN3aXBlci5zd2lwZURpcmVjdGlvbiB8fCB0b3VjaGVzLmRpZmYgPT09IDAgJiYgIWRhdGEubG9vcFN3YXBSZXNldCB8fCBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPT09IGRhdGEuc3RhcnRUcmFuc2xhdGUgJiYgIWRhdGEubG9vcFN3YXBSZXNldCkge1xuICAgICAgZGF0YS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgIGRhdGEuaXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgZGF0YS5zdGFydE1vdmluZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkYXRhLmlzVG91Y2hlZCA9IGZhbHNlO1xuICAgIGRhdGEuaXNNb3ZlZCA9IGZhbHNlO1xuICAgIGRhdGEuc3RhcnRNb3ZpbmcgPSBmYWxzZTtcbiAgICBsZXQgY3VycmVudFBvcztcbiAgICBpZiAocGFyYW1zLmZvbGxvd0Zpbmdlcikge1xuICAgICAgY3VycmVudFBvcyA9IHJ0bCA/IHN3aXBlci50cmFuc2xhdGUgOiAtc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBvcyA9IC1kYXRhLmN1cnJlbnRUcmFuc2xhdGU7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLmZyZWVNb2RlICYmIHBhcmFtcy5mcmVlTW9kZS5lbmFibGVkKSB7XG4gICAgICBzd2lwZXIuZnJlZU1vZGUub25Ub3VjaEVuZCh7XG4gICAgICAgIGN1cnJlbnRQb3NcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgY3VycmVudCBzbGlkZVxuICAgIGNvbnN0IHN3aXBlVG9MYXN0ID0gY3VycmVudFBvcyA+PSAtc3dpcGVyLm1heFRyYW5zbGF0ZSgpICYmICFzd2lwZXIucGFyYW1zLmxvb3A7XG4gICAgbGV0IHN0b3BJbmRleCA9IDA7XG4gICAgbGV0IGdyb3VwU2l6ZSA9IHN3aXBlci5zbGlkZXNTaXplc0dyaWRbMF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNHcmlkLmxlbmd0aDsgaSArPSBpIDwgcGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCA/IDEgOiBwYXJhbXMuc2xpZGVzUGVyR3JvdXApIHtcbiAgICAgIGNvbnN0IGluY3JlbWVudCA9IGkgPCBwYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwIC0gMSA/IDEgOiBwYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgICBpZiAodHlwZW9mIHNsaWRlc0dyaWRbaSArIGluY3JlbWVudF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChzd2lwZVRvTGFzdCB8fCBjdXJyZW50UG9zID49IHNsaWRlc0dyaWRbaV0gJiYgY3VycmVudFBvcyA8IHNsaWRlc0dyaWRbaSArIGluY3JlbWVudF0pIHtcbiAgICAgICAgICBzdG9wSW5kZXggPSBpO1xuICAgICAgICAgIGdyb3VwU2l6ZSA9IHNsaWRlc0dyaWRbaSArIGluY3JlbWVudF0gLSBzbGlkZXNHcmlkW2ldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN3aXBlVG9MYXN0IHx8IGN1cnJlbnRQb3MgPj0gc2xpZGVzR3JpZFtpXSkge1xuICAgICAgICBzdG9wSW5kZXggPSBpO1xuICAgICAgICBncm91cFNpemUgPSBzbGlkZXNHcmlkW3NsaWRlc0dyaWQubGVuZ3RoIC0gMV0gLSBzbGlkZXNHcmlkW3NsaWRlc0dyaWQubGVuZ3RoIC0gMl07XG4gICAgICB9XG4gICAgfVxuICAgIGxldCByZXdpbmRGaXJzdEluZGV4ID0gbnVsbDtcbiAgICBsZXQgcmV3aW5kTGFzdEluZGV4ID0gbnVsbDtcbiAgICBpZiAocGFyYW1zLnJld2luZCkge1xuICAgICAgaWYgKHN3aXBlci5pc0JlZ2lubmluZykge1xuICAgICAgICByZXdpbmRMYXN0SW5kZXggPSBwYXJhbXMudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHN3aXBlci52aXJ0dWFsID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCAtIDEgOiBzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDE7XG4gICAgICB9IGVsc2UgaWYgKHN3aXBlci5pc0VuZCkge1xuICAgICAgICByZXdpbmRGaXJzdEluZGV4ID0gMDtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRmluZCBjdXJyZW50IHNsaWRlIHNpemVcbiAgICBjb25zdCByYXRpbyA9IChjdXJyZW50UG9zIC0gc2xpZGVzR3JpZFtzdG9wSW5kZXhdKSAvIGdyb3VwU2l6ZTtcbiAgICBjb25zdCBpbmNyZW1lbnQgPSBzdG9wSW5kZXggPCBwYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwIC0gMSA/IDEgOiBwYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgaWYgKHRpbWVEaWZmID4gcGFyYW1zLmxvbmdTd2lwZXNNcykge1xuICAgICAgLy8gTG9uZyB0b3VjaGVzXG4gICAgICBpZiAoIXBhcmFtcy5sb25nU3dpcGVzKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICduZXh0Jykge1xuICAgICAgICBpZiAocmF0aW8gPj0gcGFyYW1zLmxvbmdTd2lwZXNSYXRpbykgc3dpcGVyLnNsaWRlVG8ocGFyYW1zLnJld2luZCAmJiBzd2lwZXIuaXNFbmQgPyByZXdpbmRGaXJzdEluZGV4IDogc3RvcEluZGV4ICsgaW5jcmVtZW50KTtlbHNlIHN3aXBlci5zbGlkZVRvKHN0b3BJbmRleCk7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAncHJldicpIHtcbiAgICAgICAgaWYgKHJhdGlvID4gMSAtIHBhcmFtcy5sb25nU3dpcGVzUmF0aW8pIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzdG9wSW5kZXggKyBpbmNyZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKHJld2luZExhc3RJbmRleCAhPT0gbnVsbCAmJiByYXRpbyA8IDAgJiYgTWF0aC5hYnMocmF0aW8pID4gcGFyYW1zLmxvbmdTd2lwZXNSYXRpbykge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHJld2luZExhc3RJbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3RvcEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaG9ydCBzd2lwZXNcbiAgICAgIGlmICghcGFyYW1zLnNob3J0U3dpcGVzKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzTmF2QnV0dG9uVGFyZ2V0ID0gc3dpcGVyLm5hdmlnYXRpb24gJiYgKGUudGFyZ2V0ID09PSBzd2lwZXIubmF2aWdhdGlvbi5uZXh0RWwgfHwgZS50YXJnZXQgPT09IHN3aXBlci5uYXZpZ2F0aW9uLnByZXZFbCk7XG4gICAgICBpZiAoIWlzTmF2QnV0dG9uVGFyZ2V0KSB7XG4gICAgICAgIGlmIChzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICduZXh0Jykge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHJld2luZEZpcnN0SW5kZXggIT09IG51bGwgPyByZXdpbmRGaXJzdEluZGV4IDogc3RvcEluZGV4ICsgaW5jcmVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAncHJldicpIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhyZXdpbmRMYXN0SW5kZXggIT09IG51bGwgPyByZXdpbmRMYXN0SW5kZXggOiBzdG9wSW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzd2lwZXIubmF2aWdhdGlvbi5uZXh0RWwpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3RvcEluZGV4ICsgaW5jcmVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHN0b3BJbmRleCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICBlbFxuICAgIH0gPSBzd2lwZXI7XG4gICAgaWYgKGVsICYmIGVsLm9mZnNldFdpZHRoID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBCcmVha3BvaW50c1xuICAgIGlmIChwYXJhbXMuYnJlYWtwb2ludHMpIHtcbiAgICAgIHN3aXBlci5zZXRCcmVha3BvaW50KCk7XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBsb2Nrc1xuICAgIGNvbnN0IHtcbiAgICAgIGFsbG93U2xpZGVOZXh0LFxuICAgICAgYWxsb3dTbGlkZVByZXYsXG4gICAgICBzbmFwR3JpZFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgaXNWaXJ0dWFsID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG5cbiAgICAvLyBEaXNhYmxlIGxvY2tzIG9uIHJlc2l6ZVxuICAgIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IHRydWU7XG4gICAgc3dpcGVyLmFsbG93U2xpZGVQcmV2ID0gdHJ1ZTtcbiAgICBzd2lwZXIudXBkYXRlU2l6ZSgpO1xuICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIGNvbnN0IGlzVmlydHVhbExvb3AgPSBpc1ZpcnR1YWwgJiYgcGFyYW1zLmxvb3A7XG4gICAgaWYgKChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nIHx8IHBhcmFtcy5zbGlkZXNQZXJWaWV3ID4gMSkgJiYgc3dpcGVyLmlzRW5kICYmICFzd2lwZXIuaXNCZWdpbm5pbmcgJiYgIXN3aXBlci5wYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgIWlzVmlydHVhbExvb3ApIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMSwgMCwgZmFsc2UsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wICYmICFpc1ZpcnR1YWwpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG9Mb29wKHN3aXBlci5yZWFsSW5kZXgsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3dpcGVyLmF1dG9wbGF5ICYmIHN3aXBlci5hdXRvcGxheS5ydW5uaW5nICYmIHN3aXBlci5hdXRvcGxheS5wYXVzZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChzd2lwZXIuYXV0b3BsYXkucmVzaXplVGltZW91dCk7XG4gICAgICBzd2lwZXIuYXV0b3BsYXkucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoc3dpcGVyLmF1dG9wbGF5ICYmIHN3aXBlci5hdXRvcGxheS5ydW5uaW5nICYmIHN3aXBlci5hdXRvcGxheS5wYXVzZWQpIHtcbiAgICAgICAgICBzd2lwZXIuYXV0b3BsYXkucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwMCk7XG4gICAgfVxuICAgIC8vIFJldHVybiBsb2NrcyBhZnRlciByZXNpemVcbiAgICBzd2lwZXIuYWxsb3dTbGlkZVByZXYgPSBhbGxvd1NsaWRlUHJldjtcbiAgICBzd2lwZXIuYWxsb3dTbGlkZU5leHQgPSBhbGxvd1NsaWRlTmV4dDtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHNuYXBHcmlkICE9PSBzd2lwZXIuc25hcEdyaWQpIHtcbiAgICAgIHN3aXBlci5jaGVja092ZXJmbG93KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG4gICAgaWYgKCFzd2lwZXIuYWxsb3dDbGljaykge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMucHJldmVudENsaWNrcykgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMucHJldmVudENsaWNrc1Byb3BhZ2F0aW9uICYmIHN3aXBlci5hbmltYXRpbmcpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNjcm9sbCgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHdyYXBwZXJFbCxcbiAgICAgIHJ0bFRyYW5zbGF0ZSxcbiAgICAgIGVuYWJsZWRcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghZW5hYmxlZCkgcmV0dXJuO1xuICAgIHN3aXBlci5wcmV2aW91c1RyYW5zbGF0ZSA9IHN3aXBlci50cmFuc2xhdGU7XG4gICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgc3dpcGVyLnRyYW5zbGF0ZSA9IC13cmFwcGVyRWwuc2Nyb2xsTGVmdDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVyLnRyYW5zbGF0ZSA9IC13cmFwcGVyRWwuc2Nyb2xsVG9wO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBpZiAoc3dpcGVyLnRyYW5zbGF0ZSA9PT0gMCkgc3dpcGVyLnRyYW5zbGF0ZSA9IDA7XG4gICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICBsZXQgbmV3UHJvZ3Jlc3M7XG4gICAgY29uc3QgdHJhbnNsYXRlc0RpZmYgPSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBzd2lwZXIubWluVHJhbnNsYXRlKCk7XG4gICAgaWYgKHRyYW5zbGF0ZXNEaWZmID09PSAwKSB7XG4gICAgICBuZXdQcm9ncmVzcyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1Byb2dyZXNzID0gKHN3aXBlci50cmFuc2xhdGUgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIC8gdHJhbnNsYXRlc0RpZmY7XG4gICAgfVxuICAgIGlmIChuZXdQcm9ncmVzcyAhPT0gc3dpcGVyLnByb2dyZXNzKSB7XG4gICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MocnRsVHJhbnNsYXRlID8gLXN3aXBlci50cmFuc2xhdGUgOiBzd2lwZXIudHJhbnNsYXRlKTtcbiAgICB9XG4gICAgc3dpcGVyLmVtaXQoJ3NldFRyYW5zbGF0ZScsIHN3aXBlci50cmFuc2xhdGUsIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTG9hZChlKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBwcm9jZXNzTGF6eVByZWxvYWRlcihzd2lwZXIsIGUudGFyZ2V0KTtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlIHx8IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyAhPT0gJ2F1dG8nICYmICFzd2lwZXIucGFyYW1zLmF1dG9IZWlnaHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpcGVyLnVwZGF0ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Eb2N1bWVudFRvdWNoU3RhcnQoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoc3dpcGVyLmRvY3VtZW50VG91Y2hIYW5kbGVyUHJvY2VlZGVkKSByZXR1cm47XG4gICAgc3dpcGVyLmRvY3VtZW50VG91Y2hIYW5kbGVyUHJvY2VlZGVkID0gdHJ1ZTtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy50b3VjaFJlbGVhc2VPbkVkZ2VzKSB7XG4gICAgICBzd2lwZXIuZWwuc3R5bGUudG91Y2hBY3Rpb24gPSAnYXV0byc7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZXZlbnRzID0gKHN3aXBlciwgbWV0aG9kKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIGVsLFxuICAgICAgd3JhcHBlckVsLFxuICAgICAgZGV2aWNlXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBjYXB0dXJlID0gISFwYXJhbXMubmVzdGVkO1xuICAgIGNvbnN0IGRvbU1ldGhvZCA9IG1ldGhvZCA9PT0gJ29uJyA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdyZW1vdmVFdmVudExpc3RlbmVyJztcbiAgICBjb25zdCBzd2lwZXJNZXRob2QgPSBtZXRob2Q7XG4gICAgaWYgKCFlbCB8fCB0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSByZXR1cm47XG5cbiAgICAvLyBUb3VjaCBFdmVudHNcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKCd0b3VjaHN0YXJ0Jywgc3dpcGVyLm9uRG9jdW1lbnRUb3VjaFN0YXJ0LCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZSxcbiAgICAgIGNhcHR1cmVcbiAgICB9KTtcbiAgICBlbFtkb21NZXRob2RdKCd0b3VjaHN0YXJ0Jywgc3dpcGVyLm9uVG91Y2hTdGFydCwge1xuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICBlbFtkb21NZXRob2RdKCdwb2ludGVyZG93bicsIHN3aXBlci5vblRvdWNoU3RhcnQsIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgndG91Y2htb3ZlJywgc3dpcGVyLm9uVG91Y2hNb3ZlLCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZSxcbiAgICAgIGNhcHR1cmVcbiAgICB9KTtcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKCdwb2ludGVybW92ZScsIHN3aXBlci5vblRvdWNoTW92ZSwge1xuICAgICAgcGFzc2l2ZTogZmFsc2UsXG4gICAgICBjYXB0dXJlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgndG91Y2hlbmQnLCBzd2lwZXIub25Ub3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGRvY3VtZW50W2RvbU1ldGhvZF0oJ3BvaW50ZXJ1cCcsIHN3aXBlci5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgncG9pbnRlcmNhbmNlbCcsIHN3aXBlci5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgndG91Y2hjYW5jZWwnLCBzd2lwZXIub25Ub3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGRvY3VtZW50W2RvbU1ldGhvZF0oJ3BvaW50ZXJvdXQnLCBzd2lwZXIub25Ub3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGRvY3VtZW50W2RvbU1ldGhvZF0oJ3BvaW50ZXJsZWF2ZScsIHN3aXBlci5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgnY29udGV4dG1lbnUnLCBzd2lwZXIub25Ub3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgLy8gUHJldmVudCBMaW5rcyBDbGlja3NcbiAgICBpZiAocGFyYW1zLnByZXZlbnRDbGlja3MgfHwgcGFyYW1zLnByZXZlbnRDbGlja3NQcm9wYWdhdGlvbikge1xuICAgICAgZWxbZG9tTWV0aG9kXSgnY2xpY2snLCBzd2lwZXIub25DbGljaywgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgd3JhcHBlckVsW2RvbU1ldGhvZF0oJ3Njcm9sbCcsIHN3aXBlci5vblNjcm9sbCk7XG4gICAgfVxuXG4gICAgLy8gUmVzaXplIGhhbmRsZXJcbiAgICBpZiAocGFyYW1zLnVwZGF0ZU9uV2luZG93UmVzaXplKSB7XG4gICAgICBzd2lwZXJbc3dpcGVyTWV0aG9kXShkZXZpY2UuaW9zIHx8IGRldmljZS5hbmRyb2lkID8gJ3Jlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZSBvYnNlcnZlclVwZGF0ZScgOiAncmVzaXplIG9ic2VydmVyVXBkYXRlJywgb25SZXNpemUsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXJbc3dpcGVyTWV0aG9kXSgnb2JzZXJ2ZXJVcGRhdGUnLCBvblJlc2l6ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gSW1hZ2VzIGxvYWRlclxuICAgIGVsW2RvbU1ldGhvZF0oJ2xvYWQnLCBzd2lwZXIub25Mb2FkLCB7XG4gICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSk7XG4gIH07XG4gIGZ1bmN0aW9uIGF0dGFjaEV2ZW50cygpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgc3dpcGVyLm9uVG91Y2hTdGFydCA9IG9uVG91Y2hTdGFydC5iaW5kKHN3aXBlcik7XG4gICAgc3dpcGVyLm9uVG91Y2hNb3ZlID0gb25Ub3VjaE1vdmUuYmluZChzd2lwZXIpO1xuICAgIHN3aXBlci5vblRvdWNoRW5kID0gb25Ub3VjaEVuZC5iaW5kKHN3aXBlcik7XG4gICAgc3dpcGVyLm9uRG9jdW1lbnRUb3VjaFN0YXJ0ID0gb25Eb2N1bWVudFRvdWNoU3RhcnQuYmluZChzd2lwZXIpO1xuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc3dpcGVyLm9uU2Nyb2xsID0gb25TY3JvbGwuYmluZChzd2lwZXIpO1xuICAgIH1cbiAgICBzd2lwZXIub25DbGljayA9IG9uQ2xpY2suYmluZChzd2lwZXIpO1xuICAgIHN3aXBlci5vbkxvYWQgPSBvbkxvYWQuYmluZChzd2lwZXIpO1xuICAgIGV2ZW50cyhzd2lwZXIsICdvbicpO1xuICB9XG4gIGZ1bmN0aW9uIGRldGFjaEV2ZW50cygpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGV2ZW50cyhzd2lwZXIsICdvZmYnKTtcbiAgfVxuICB2YXIgZXZlbnRzJDEgPSB7XG4gICAgYXR0YWNoRXZlbnRzLFxuICAgIGRldGFjaEV2ZW50c1xuICB9O1xuXG4gIGNvbnN0IGlzR3JpZEVuYWJsZWQgPSAoc3dpcGVyLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gc3dpcGVyLmdyaWQgJiYgcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDE7XG4gIH07XG4gIGZ1bmN0aW9uIHNldEJyZWFrcG9pbnQoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICByZWFsSW5kZXgsXG4gICAgICBpbml0aWFsaXplZCxcbiAgICAgIHBhcmFtcyxcbiAgICAgIGVsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBicmVha3BvaW50cyA9IHBhcmFtcy5icmVha3BvaW50cztcbiAgICBpZiAoIWJyZWFrcG9pbnRzIHx8IGJyZWFrcG9pbnRzICYmIE9iamVjdC5rZXlzKGJyZWFrcG9pbnRzKS5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIC8vIEdldCBicmVha3BvaW50IGZvciB3aW5kb3cgd2lkdGggYW5kIHVwZGF0ZSBwYXJhbWV0ZXJzXG4gICAgY29uc3QgYnJlYWtwb2ludCA9IHN3aXBlci5nZXRCcmVha3BvaW50KGJyZWFrcG9pbnRzLCBzd2lwZXIucGFyYW1zLmJyZWFrcG9pbnRzQmFzZSwgc3dpcGVyLmVsKTtcbiAgICBpZiAoIWJyZWFrcG9pbnQgfHwgc3dpcGVyLmN1cnJlbnRCcmVha3BvaW50ID09PSBicmVha3BvaW50KSByZXR1cm47XG4gICAgY29uc3QgYnJlYWtwb2ludE9ubHlQYXJhbXMgPSBicmVha3BvaW50IGluIGJyZWFrcG9pbnRzID8gYnJlYWtwb2ludHNbYnJlYWtwb2ludF0gOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgYnJlYWtwb2ludFBhcmFtcyA9IGJyZWFrcG9pbnRPbmx5UGFyYW1zIHx8IHN3aXBlci5vcmlnaW5hbFBhcmFtcztcbiAgICBjb25zdCB3YXNNdWx0aVJvdyA9IGlzR3JpZEVuYWJsZWQoc3dpcGVyLCBwYXJhbXMpO1xuICAgIGNvbnN0IGlzTXVsdGlSb3cgPSBpc0dyaWRFbmFibGVkKHN3aXBlciwgYnJlYWtwb2ludFBhcmFtcyk7XG4gICAgY29uc3Qgd2FzR3JhYkN1cnNvciA9IHN3aXBlci5wYXJhbXMuZ3JhYkN1cnNvcjtcbiAgICBjb25zdCBpc0dyYWJDdXJzb3IgPSBicmVha3BvaW50UGFyYW1zLmdyYWJDdXJzb3I7XG4gICAgY29uc3Qgd2FzRW5hYmxlZCA9IHBhcmFtcy5lbmFibGVkO1xuICAgIGlmICh3YXNNdWx0aVJvdyAmJiAhaXNNdWx0aVJvdykge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkYCwgYCR7cGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9Z3JpZC1jb2x1bW5gKTtcbiAgICAgIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICAgIH0gZWxzZSBpZiAoIXdhc011bHRpUm93ICYmIGlzTXVsdGlSb3cpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoYCR7cGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9Z3JpZGApO1xuICAgICAgaWYgKGJyZWFrcG9pbnRQYXJhbXMuZ3JpZC5maWxsICYmIGJyZWFrcG9pbnRQYXJhbXMuZ3JpZC5maWxsID09PSAnY29sdW1uJyB8fCAhYnJlYWtwb2ludFBhcmFtcy5ncmlkLmZpbGwgJiYgcGFyYW1zLmdyaWQuZmlsbCA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkLWNvbHVtbmApO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmVtaXRDb250YWluZXJDbGFzc2VzKCk7XG4gICAgfVxuICAgIGlmICh3YXNHcmFiQ3Vyc29yICYmICFpc0dyYWJDdXJzb3IpIHtcbiAgICAgIHN3aXBlci51bnNldEdyYWJDdXJzb3IoKTtcbiAgICB9IGVsc2UgaWYgKCF3YXNHcmFiQ3Vyc29yICYmIGlzR3JhYkN1cnNvcikge1xuICAgICAgc3dpcGVyLnNldEdyYWJDdXJzb3IoKTtcbiAgICB9XG5cbiAgICAvLyBUb2dnbGUgbmF2aWdhdGlvbiwgcGFnaW5hdGlvbiwgc2Nyb2xsYmFyXG4gICAgWyduYXZpZ2F0aW9uJywgJ3BhZ2luYXRpb24nLCAnc2Nyb2xsYmFyJ10uZm9yRWFjaChwcm9wID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYnJlYWtwb2ludFBhcmFtc1twcm9wXSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICAgIGNvbnN0IHdhc01vZHVsZUVuYWJsZWQgPSBwYXJhbXNbcHJvcF0gJiYgcGFyYW1zW3Byb3BdLmVuYWJsZWQ7XG4gICAgICBjb25zdCBpc01vZHVsZUVuYWJsZWQgPSBicmVha3BvaW50UGFyYW1zW3Byb3BdICYmIGJyZWFrcG9pbnRQYXJhbXNbcHJvcF0uZW5hYmxlZDtcbiAgICAgIGlmICh3YXNNb2R1bGVFbmFibGVkICYmICFpc01vZHVsZUVuYWJsZWQpIHtcbiAgICAgICAgc3dpcGVyW3Byb3BdLmRpc2FibGUoKTtcbiAgICAgIH1cbiAgICAgIGlmICghd2FzTW9kdWxlRW5hYmxlZCAmJiBpc01vZHVsZUVuYWJsZWQpIHtcbiAgICAgICAgc3dpcGVyW3Byb3BdLmVuYWJsZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGRpcmVjdGlvbkNoYW5nZWQgPSBicmVha3BvaW50UGFyYW1zLmRpcmVjdGlvbiAmJiBicmVha3BvaW50UGFyYW1zLmRpcmVjdGlvbiAhPT0gcGFyYW1zLmRpcmVjdGlvbjtcbiAgICBjb25zdCBuZWVkc1JlTG9vcCA9IHBhcmFtcy5sb29wICYmIChicmVha3BvaW50UGFyYW1zLnNsaWRlc1BlclZpZXcgIT09IHBhcmFtcy5zbGlkZXNQZXJWaWV3IHx8IGRpcmVjdGlvbkNoYW5nZWQpO1xuICAgIGNvbnN0IHdhc0xvb3AgPSBwYXJhbXMubG9vcDtcbiAgICBpZiAoZGlyZWN0aW9uQ2hhbmdlZCAmJiBpbml0aWFsaXplZCkge1xuICAgICAgc3dpcGVyLmNoYW5nZURpcmVjdGlvbigpO1xuICAgIH1cbiAgICBleHRlbmQkMShzd2lwZXIucGFyYW1zLCBicmVha3BvaW50UGFyYW1zKTtcbiAgICBjb25zdCBpc0VuYWJsZWQgPSBzd2lwZXIucGFyYW1zLmVuYWJsZWQ7XG4gICAgY29uc3QgaGFzTG9vcCA9IHN3aXBlci5wYXJhbXMubG9vcDtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgICAgYWxsb3dUb3VjaE1vdmU6IHN3aXBlci5wYXJhbXMuYWxsb3dUb3VjaE1vdmUsXG4gICAgICBhbGxvd1NsaWRlTmV4dDogc3dpcGVyLnBhcmFtcy5hbGxvd1NsaWRlTmV4dCxcbiAgICAgIGFsbG93U2xpZGVQcmV2OiBzd2lwZXIucGFyYW1zLmFsbG93U2xpZGVQcmV2XG4gICAgfSk7XG4gICAgaWYgKHdhc0VuYWJsZWQgJiYgIWlzRW5hYmxlZCkge1xuICAgICAgc3dpcGVyLmRpc2FibGUoKTtcbiAgICB9IGVsc2UgaWYgKCF3YXNFbmFibGVkICYmIGlzRW5hYmxlZCkge1xuICAgICAgc3dpcGVyLmVuYWJsZSgpO1xuICAgIH1cbiAgICBzd2lwZXIuY3VycmVudEJyZWFrcG9pbnQgPSBicmVha3BvaW50O1xuICAgIHN3aXBlci5lbWl0KCdfYmVmb3JlQnJlYWtwb2ludCcsIGJyZWFrcG9pbnRQYXJhbXMpO1xuICAgIGlmIChpbml0aWFsaXplZCkge1xuICAgICAgaWYgKG5lZWRzUmVMb29wKSB7XG4gICAgICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgICAgICBzd2lwZXIubG9vcENyZWF0ZShyZWFsSW5kZXgpO1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICB9IGVsc2UgaWYgKCF3YXNMb29wICYmIGhhc0xvb3ApIHtcbiAgICAgICAgc3dpcGVyLmxvb3BDcmVhdGUocmVhbEluZGV4KTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlcygpO1xuICAgICAgfSBlbHNlIGlmICh3YXNMb29wICYmICFoYXNMb29wKSB7XG4gICAgICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgnYnJlYWtwb2ludCcsIGJyZWFrcG9pbnRQYXJhbXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QnJlYWtwb2ludChicmVha3BvaW50cywgYmFzZSwgY29udGFpbmVyRWwpIHtcbiAgICBpZiAoYmFzZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXNlID0gJ3dpbmRvdyc7XG4gICAgfVxuICAgIGlmICghYnJlYWtwb2ludHMgfHwgYmFzZSA9PT0gJ2NvbnRhaW5lcicgJiYgIWNvbnRhaW5lckVsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGxldCBicmVha3BvaW50ID0gZmFsc2U7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgY29uc3QgY3VycmVudEhlaWdodCA9IGJhc2UgPT09ICd3aW5kb3cnID8gd2luZG93LmlubmVySGVpZ2h0IDogY29udGFpbmVyRWwuY2xpZW50SGVpZ2h0O1xuICAgIGNvbnN0IHBvaW50cyA9IE9iamVjdC5rZXlzKGJyZWFrcG9pbnRzKS5tYXAocG9pbnQgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBwb2ludCA9PT0gJ3N0cmluZycgJiYgcG9pbnQuaW5kZXhPZignQCcpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IG1pblJhdGlvID0gcGFyc2VGbG9hdChwb2ludC5zdWJzdHIoMSkpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGN1cnJlbnRIZWlnaHQgKiBtaW5SYXRpbztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBwb2ludFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHBvaW50LFxuICAgICAgICBwb2ludFxuICAgICAgfTtcbiAgICB9KTtcbiAgICBwb2ludHMuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYS52YWx1ZSwgMTApIC0gcGFyc2VJbnQoYi52YWx1ZSwgMTApKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBwb2ludCxcbiAgICAgICAgdmFsdWVcbiAgICAgIH0gPSBwb2ludHNbaV07XG4gICAgICBpZiAoYmFzZSA9PT0gJ3dpbmRvdycpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKGAobWluLXdpZHRoOiAke3ZhbHVlfXB4KWApLm1hdGNoZXMpIHtcbiAgICAgICAgICBicmVha3BvaW50ID0gcG9pbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPD0gY29udGFpbmVyRWwuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgYnJlYWtwb2ludCA9IHBvaW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYnJlYWtwb2ludCB8fCAnbWF4JztcbiAgfVxuXG4gIHZhciBicmVha3BvaW50cyA9IHtcbiAgICBzZXRCcmVha3BvaW50LFxuICAgIGdldEJyZWFrcG9pbnRcbiAgfTtcblxuICBmdW5jdGlvbiBwcmVwYXJlQ2xhc3NlcyhlbnRyaWVzLCBwcmVmaXgpIHtcbiAgICBjb25zdCByZXN1bHRDbGFzc2VzID0gW107XG4gICAgZW50cmllcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICBPYmplY3Qua2V5cyhpdGVtKS5mb3JFYWNoKGNsYXNzTmFtZXMgPT4ge1xuICAgICAgICAgIGlmIChpdGVtW2NsYXNzTmFtZXNdKSB7XG4gICAgICAgICAgICByZXN1bHRDbGFzc2VzLnB1c2gocHJlZml4ICsgY2xhc3NOYW1lcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlc3VsdENsYXNzZXMucHVzaChwcmVmaXggKyBpdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0Q2xhc3NlcztcbiAgfVxuICBmdW5jdGlvbiBhZGRDbGFzc2VzKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgY2xhc3NOYW1lcyxcbiAgICAgIHBhcmFtcyxcbiAgICAgIHJ0bCxcbiAgICAgIGVsLFxuICAgICAgZGV2aWNlXG4gICAgfSA9IHN3aXBlcjtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICBjb25zdCBzdWZmaXhlcyA9IHByZXBhcmVDbGFzc2VzKFsnaW5pdGlhbGl6ZWQnLCBwYXJhbXMuZGlyZWN0aW9uLCB7XG4gICAgICAnZnJlZS1tb2RlJzogc3dpcGVyLnBhcmFtcy5mcmVlTW9kZSAmJiBwYXJhbXMuZnJlZU1vZGUuZW5hYmxlZFxuICAgIH0sIHtcbiAgICAgICdhdXRvaGVpZ2h0JzogcGFyYW1zLmF1dG9IZWlnaHRcbiAgICB9LCB7XG4gICAgICAncnRsJzogcnRsXG4gICAgfSwge1xuICAgICAgJ2dyaWQnOiBwYXJhbXMuZ3JpZCAmJiBwYXJhbXMuZ3JpZC5yb3dzID4gMVxuICAgIH0sIHtcbiAgICAgICdncmlkLWNvbHVtbic6IHBhcmFtcy5ncmlkICYmIHBhcmFtcy5ncmlkLnJvd3MgPiAxICYmIHBhcmFtcy5ncmlkLmZpbGwgPT09ICdjb2x1bW4nXG4gICAgfSwge1xuICAgICAgJ2FuZHJvaWQnOiBkZXZpY2UuYW5kcm9pZFxuICAgIH0sIHtcbiAgICAgICdpb3MnOiBkZXZpY2UuaW9zXG4gICAgfSwge1xuICAgICAgJ2Nzcy1tb2RlJzogcGFyYW1zLmNzc01vZGVcbiAgICB9LCB7XG4gICAgICAnY2VudGVyZWQnOiBwYXJhbXMuY3NzTW9kZSAmJiBwYXJhbXMuY2VudGVyZWRTbGlkZXNcbiAgICB9LCB7XG4gICAgICAnd2F0Y2gtcHJvZ3Jlc3MnOiBwYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzc1xuICAgIH1dLCBwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcyk7XG4gICAgY2xhc3NOYW1lcy5wdXNoKC4uLnN1ZmZpeGVzKTtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzTmFtZXMpO1xuICAgIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcygpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIGVsLFxuICAgICAgY2xhc3NOYW1lc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgaWYgKCFlbCB8fCB0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSByZXR1cm47XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc05hbWVzKTtcbiAgICBzd2lwZXIuZW1pdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgfVxuXG4gIHZhciBjbGFzc2VzID0ge1xuICAgIGFkZENsYXNzZXMsXG4gICAgcmVtb3ZlQ2xhc3Nlc1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNoZWNrT3ZlcmZsb3coKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBpc0xvY2tlZDogd2FzTG9ja2VkLFxuICAgICAgcGFyYW1zXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCB7XG4gICAgICBzbGlkZXNPZmZzZXRCZWZvcmVcbiAgICB9ID0gcGFyYW1zO1xuICAgIGlmIChzbGlkZXNPZmZzZXRCZWZvcmUpIHtcbiAgICAgIGNvbnN0IGxhc3RTbGlkZUluZGV4ID0gc3dpcGVyLnNsaWRlcy5sZW5ndGggLSAxO1xuICAgICAgY29uc3QgbGFzdFNsaWRlUmlnaHRFZGdlID0gc3dpcGVyLnNsaWRlc0dyaWRbbGFzdFNsaWRlSW5kZXhdICsgc3dpcGVyLnNsaWRlc1NpemVzR3JpZFtsYXN0U2xpZGVJbmRleF0gKyBzbGlkZXNPZmZzZXRCZWZvcmUgKiAyO1xuICAgICAgc3dpcGVyLmlzTG9ja2VkID0gc3dpcGVyLnNpemUgPiBsYXN0U2xpZGVSaWdodEVkZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlci5pc0xvY2tlZCA9IHN3aXBlci5zbmFwR3JpZC5sZW5ndGggPT09IDE7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuYWxsb3dTbGlkZU5leHQgPT09IHRydWUpIHtcbiAgICAgIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9ICFzd2lwZXIuaXNMb2NrZWQ7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuYWxsb3dTbGlkZVByZXYgPT09IHRydWUpIHtcbiAgICAgIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9ICFzd2lwZXIuaXNMb2NrZWQ7XG4gICAgfVxuICAgIGlmICh3YXNMb2NrZWQgJiYgd2FzTG9ja2VkICE9PSBzd2lwZXIuaXNMb2NrZWQpIHtcbiAgICAgIHN3aXBlci5pc0VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAod2FzTG9ja2VkICE9PSBzd2lwZXIuaXNMb2NrZWQpIHtcbiAgICAgIHN3aXBlci5lbWl0KHN3aXBlci5pc0xvY2tlZCA/ICdsb2NrJyA6ICd1bmxvY2snKTtcbiAgICB9XG4gIH1cbiAgdmFyIGNoZWNrT3ZlcmZsb3ckMSA9IHtcbiAgICBjaGVja092ZXJmbG93XG4gIH07XG5cbiAgdmFyIGRlZmF1bHRzID0ge1xuICAgIGluaXQ6IHRydWUsXG4gICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgb25lV2F5TW92ZW1lbnQ6IGZhbHNlLFxuICAgIHN3aXBlckVsZW1lbnROb2RlTmFtZTogJ1NXSVBFUi1DT05UQUlORVInLFxuICAgIHRvdWNoRXZlbnRzVGFyZ2V0OiAnd3JhcHBlcicsXG4gICAgaW5pdGlhbFNsaWRlOiAwLFxuICAgIHNwZWVkOiAzMDAsXG4gICAgY3NzTW9kZTogZmFsc2UsXG4gICAgdXBkYXRlT25XaW5kb3dSZXNpemU6IHRydWUsXG4gICAgcmVzaXplT2JzZXJ2ZXI6IHRydWUsXG4gICAgbmVzdGVkOiBmYWxzZSxcbiAgICBjcmVhdGVFbGVtZW50czogZmFsc2UsXG4gICAgZXZlbnRzUHJlZml4OiAnc3dpcGVyJyxcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGZvY3VzYWJsZUVsZW1lbnRzOiAnaW5wdXQsIHNlbGVjdCwgb3B0aW9uLCB0ZXh0YXJlYSwgYnV0dG9uLCB2aWRlbywgbGFiZWwnLFxuICAgIC8vIE92ZXJyaWRlc1xuICAgIHdpZHRoOiBudWxsLFxuICAgIGhlaWdodDogbnVsbCxcbiAgICAvL1xuICAgIHByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbjogZmFsc2UsXG4gICAgLy8gc3NyXG4gICAgdXNlckFnZW50OiBudWxsLFxuICAgIHVybDogbnVsbCxcbiAgICAvLyBUbyBzdXBwb3J0IGlPUydzIHN3aXBlLXRvLWdvLWJhY2sgZ2VzdHVyZSAod2hlbiBiZWluZyB1c2VkIGluLWFwcCkuXG4gICAgZWRnZVN3aXBlRGV0ZWN0aW9uOiBmYWxzZSxcbiAgICBlZGdlU3dpcGVUaHJlc2hvbGQ6IDIwLFxuICAgIC8vIEF1dG9oZWlnaHRcbiAgICBhdXRvSGVpZ2h0OiBmYWxzZSxcbiAgICAvLyBTZXQgd3JhcHBlciB3aWR0aFxuICAgIHNldFdyYXBwZXJTaXplOiBmYWxzZSxcbiAgICAvLyBWaXJ0dWFsIFRyYW5zbGF0ZVxuICAgIHZpcnR1YWxUcmFuc2xhdGU6IGZhbHNlLFxuICAgIC8vIEVmZmVjdHNcbiAgICBlZmZlY3Q6ICdzbGlkZScsXG4gICAgLy8gJ3NsaWRlJyBvciAnZmFkZScgb3IgJ2N1YmUnIG9yICdjb3ZlcmZsb3cnIG9yICdmbGlwJ1xuXG4gICAgLy8gQnJlYWtwb2ludHNcbiAgICBicmVha3BvaW50czogdW5kZWZpbmVkLFxuICAgIGJyZWFrcG9pbnRzQmFzZTogJ3dpbmRvdycsXG4gICAgLy8gU2xpZGVzIGdyaWRcbiAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICBzbGlkZXNQZXJHcm91cDogMSxcbiAgICBzbGlkZXNQZXJHcm91cFNraXA6IDAsXG4gICAgc2xpZGVzUGVyR3JvdXBBdXRvOiBmYWxzZSxcbiAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXG4gICAgY2VudGVyZWRTbGlkZXNCb3VuZHM6IGZhbHNlLFxuICAgIHNsaWRlc09mZnNldEJlZm9yZTogMCxcbiAgICAvLyBpbiBweFxuICAgIHNsaWRlc09mZnNldEFmdGVyOiAwLFxuICAgIC8vIGluIHB4XG4gICAgbm9ybWFsaXplU2xpZGVJbmRleDogdHJ1ZSxcbiAgICBjZW50ZXJJbnN1ZmZpY2llbnRTbGlkZXM6IGZhbHNlLFxuICAgIC8vIERpc2FibGUgc3dpcGVyIGFuZCBoaWRlIG5hdmlnYXRpb24gd2hlbiBjb250YWluZXIgbm90IG92ZXJmbG93XG4gICAgd2F0Y2hPdmVyZmxvdzogdHJ1ZSxcbiAgICAvLyBSb3VuZCBsZW5ndGhcbiAgICByb3VuZExlbmd0aHM6IGZhbHNlLFxuICAgIC8vIFRvdWNoZXNcbiAgICB0b3VjaFJhdGlvOiAxLFxuICAgIHRvdWNoQW5nbGU6IDQ1LFxuICAgIHNpbXVsYXRlVG91Y2g6IHRydWUsXG4gICAgc2hvcnRTd2lwZXM6IHRydWUsXG4gICAgbG9uZ1N3aXBlczogdHJ1ZSxcbiAgICBsb25nU3dpcGVzUmF0aW86IDAuNSxcbiAgICBsb25nU3dpcGVzTXM6IDMwMCxcbiAgICBmb2xsb3dGaW5nZXI6IHRydWUsXG4gICAgYWxsb3dUb3VjaE1vdmU6IHRydWUsXG4gICAgdGhyZXNob2xkOiA1LFxuICAgIHRvdWNoTW92ZVN0b3BQcm9wYWdhdGlvbjogZmFsc2UsXG4gICAgdG91Y2hTdGFydFByZXZlbnREZWZhdWx0OiB0cnVlLFxuICAgIHRvdWNoU3RhcnRGb3JjZVByZXZlbnREZWZhdWx0OiBmYWxzZSxcbiAgICB0b3VjaFJlbGVhc2VPbkVkZ2VzOiBmYWxzZSxcbiAgICAvLyBVbmlxdWUgTmF2aWdhdGlvbiBFbGVtZW50c1xuICAgIHVuaXF1ZU5hdkVsZW1lbnRzOiB0cnVlLFxuICAgIC8vIFJlc2lzdGFuY2VcbiAgICByZXNpc3RhbmNlOiB0cnVlLFxuICAgIHJlc2lzdGFuY2VSYXRpbzogMC44NSxcbiAgICAvLyBQcm9ncmVzc1xuICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IGZhbHNlLFxuICAgIC8vIEN1cnNvclxuICAgIGdyYWJDdXJzb3I6IGZhbHNlLFxuICAgIC8vIENsaWNrc1xuICAgIHByZXZlbnRDbGlja3M6IHRydWUsXG4gICAgcHJldmVudENsaWNrc1Byb3BhZ2F0aW9uOiB0cnVlLFxuICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IGZhbHNlLFxuICAgIC8vIGxvb3BcbiAgICBsb29wOiBmYWxzZSxcbiAgICBsb29wQWRkQmxhbmtTbGlkZXM6IHRydWUsXG4gICAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDAsXG4gICAgbG9vcFByZXZlbnRzU2xpZGluZzogdHJ1ZSxcbiAgICAvLyByZXdpbmRcbiAgICByZXdpbmQ6IGZhbHNlLFxuICAgIC8vIFN3aXBpbmcvbm8gc3dpcGluZ1xuICAgIGFsbG93U2xpZGVQcmV2OiB0cnVlLFxuICAgIGFsbG93U2xpZGVOZXh0OiB0cnVlLFxuICAgIHN3aXBlSGFuZGxlcjogbnVsbCxcbiAgICAvLyAnLnN3aXBlLWhhbmRsZXInLFxuICAgIG5vU3dpcGluZzogdHJ1ZSxcbiAgICBub1N3aXBpbmdDbGFzczogJ3N3aXBlci1uby1zd2lwaW5nJyxcbiAgICBub1N3aXBpbmdTZWxlY3RvcjogbnVsbCxcbiAgICAvLyBQYXNzaXZlIExpc3RlbmVyc1xuICAgIHBhc3NpdmVMaXN0ZW5lcnM6IHRydWUsXG4gICAgbWF4QmFja2ZhY2VIaWRkZW5TbGlkZXM6IDEwLFxuICAgIC8vIE5TXG4gICAgY29udGFpbmVyTW9kaWZpZXJDbGFzczogJ3N3aXBlci0nLFxuICAgIC8vIE5FV1xuICAgIHNsaWRlQ2xhc3M6ICdzd2lwZXItc2xpZGUnLFxuICAgIHNsaWRlQmxhbmtDbGFzczogJ3N3aXBlci1zbGlkZS1ibGFuaycsXG4gICAgc2xpZGVBY3RpdmVDbGFzczogJ3N3aXBlci1zbGlkZS1hY3RpdmUnLFxuICAgIHNsaWRlVmlzaWJsZUNsYXNzOiAnc3dpcGVyLXNsaWRlLXZpc2libGUnLFxuICAgIHNsaWRlRnVsbHlWaXNpYmxlQ2xhc3M6ICdzd2lwZXItc2xpZGUtZnVsbHktdmlzaWJsZScsXG4gICAgc2xpZGVOZXh0Q2xhc3M6ICdzd2lwZXItc2xpZGUtbmV4dCcsXG4gICAgc2xpZGVQcmV2Q2xhc3M6ICdzd2lwZXItc2xpZGUtcHJldicsXG4gICAgd3JhcHBlckNsYXNzOiAnc3dpcGVyLXdyYXBwZXInLFxuICAgIGxhenlQcmVsb2FkZXJDbGFzczogJ3N3aXBlci1sYXp5LXByZWxvYWRlcicsXG4gICAgbGF6eVByZWxvYWRQcmV2TmV4dDogMCxcbiAgICAvLyBDYWxsYmFja3NcbiAgICBydW5DYWxsYmFja3NPbkluaXQ6IHRydWUsXG4gICAgLy8gSW50ZXJuYWxzXG4gICAgX2VtaXRDbGFzc2VzOiBmYWxzZVxuICB9O1xuXG4gIGZ1bmN0aW9uIG1vZHVsZUV4dGVuZFBhcmFtcyhwYXJhbXMsIGFsbE1vZHVsZXNQYXJhbXMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gZXh0ZW5kUGFyYW1zKG9iaikge1xuICAgICAgaWYgKG9iaiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG9iaiA9IHt9O1xuICAgICAgfVxuICAgICAgY29uc3QgbW9kdWxlUGFyYW1OYW1lID0gT2JqZWN0LmtleXMob2JqKVswXTtcbiAgICAgIGNvbnN0IG1vZHVsZVBhcmFtcyA9IG9ialttb2R1bGVQYXJhbU5hbWVdO1xuICAgICAgaWYgKHR5cGVvZiBtb2R1bGVQYXJhbXMgIT09ICdvYmplY3QnIHx8IG1vZHVsZVBhcmFtcyA9PT0gbnVsbCkge1xuICAgICAgICBleHRlbmQkMShhbGxNb2R1bGVzUGFyYW1zLCBvYmopO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocGFyYW1zW21vZHVsZVBhcmFtTmFtZV0gPT09IHRydWUpIHtcbiAgICAgICAgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0gPSB7XG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKG1vZHVsZVBhcmFtTmFtZSA9PT0gJ25hdmlnYXRpb24nICYmIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdICYmIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdLmVuYWJsZWQgJiYgIXBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdLnByZXZFbCAmJiAhcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0ubmV4dEVsKSB7XG4gICAgICAgIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdLmF1dG8gPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKFsncGFnaW5hdGlvbicsICdzY3JvbGxiYXInXS5pbmRleE9mKG1vZHVsZVBhcmFtTmFtZSkgPj0gMCAmJiBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSAmJiBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXS5lbmFibGVkICYmICFwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXS5lbCkge1xuICAgICAgICBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXS5hdXRvID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghKG1vZHVsZVBhcmFtTmFtZSBpbiBwYXJhbXMgJiYgJ2VuYWJsZWQnIGluIG1vZHVsZVBhcmFtcykpIHtcbiAgICAgICAgZXh0ZW5kJDEoYWxsTW9kdWxlc1BhcmFtcywgb2JqKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSA9PT0gJ29iamVjdCcgJiYgISgnZW5hYmxlZCcgaW4gcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0pKSB7XG4gICAgICAgIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSkgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0gPSB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgZXh0ZW5kJDEoYWxsTW9kdWxlc1BhcmFtcywgb2JqKTtcbiAgICB9O1xuICB9XG5cbiAgLyogZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOiBcIm9mZlwiICovXG4gIGNvbnN0IHByb3RvdHlwZXMgPSB7XG4gICAgZXZlbnRzRW1pdHRlcixcbiAgICB1cGRhdGUsXG4gICAgdHJhbnNsYXRlLFxuICAgIHRyYW5zaXRpb24sXG4gICAgc2xpZGUsXG4gICAgbG9vcCxcbiAgICBncmFiQ3Vyc29yLFxuICAgIGV2ZW50czogZXZlbnRzJDEsXG4gICAgYnJlYWtwb2ludHMsXG4gICAgY2hlY2tPdmVyZmxvdzogY2hlY2tPdmVyZmxvdyQxLFxuICAgIGNsYXNzZXNcbiAgfTtcbiAgY29uc3QgZXh0ZW5kZWREZWZhdWx0cyA9IHt9O1xuICBjbGFzcyBTd2lwZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgbGV0IGVsO1xuICAgICAgbGV0IHBhcmFtcztcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxICYmIGFyZ3NbMF0uY29uc3RydWN0b3IgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3NbMF0pLnNsaWNlKDgsIC0xKSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgcGFyYW1zID0gYXJnc1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFtlbCwgcGFyYW1zXSA9IGFyZ3M7XG4gICAgICB9XG4gICAgICBpZiAoIXBhcmFtcykgcGFyYW1zID0ge307XG4gICAgICBwYXJhbXMgPSBleHRlbmQkMSh7fSwgcGFyYW1zKTtcbiAgICAgIGlmIChlbCAmJiAhcGFyYW1zLmVsKSBwYXJhbXMuZWwgPSBlbDtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgIGlmIChwYXJhbXMuZWwgJiYgdHlwZW9mIHBhcmFtcy5lbCA9PT0gJ3N0cmluZycgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChwYXJhbXMuZWwpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY29uc3Qgc3dpcGVycyA9IFtdO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBhcmFtcy5lbCkuZm9yRWFjaChjb250YWluZXJFbCA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gZXh0ZW5kJDEoe30sIHBhcmFtcywge1xuICAgICAgICAgICAgZWw6IGNvbnRhaW5lckVsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3dpcGVycy5wdXNoKG5ldyBTd2lwZXIobmV3UGFyYW1zKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RydWN0b3ItcmV0dXJuXG4gICAgICAgIHJldHVybiBzd2lwZXJzO1xuICAgICAgfVxuXG4gICAgICAvLyBTd2lwZXIgSW5zdGFuY2VcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBzd2lwZXIuX19zd2lwZXJfXyA9IHRydWU7XG4gICAgICBzd2lwZXIuc3VwcG9ydCA9IGdldFN1cHBvcnQoKTtcbiAgICAgIHN3aXBlci5kZXZpY2UgPSBnZXREZXZpY2Uoe1xuICAgICAgICB1c2VyQWdlbnQ6IHBhcmFtcy51c2VyQWdlbnRcbiAgICAgIH0pO1xuICAgICAgc3dpcGVyLmJyb3dzZXIgPSBnZXRCcm93c2VyKCk7XG4gICAgICBzd2lwZXIuZXZlbnRzTGlzdGVuZXJzID0ge307XG4gICAgICBzd2lwZXIuZXZlbnRzQW55TGlzdGVuZXJzID0gW107XG4gICAgICBzd2lwZXIubW9kdWxlcyA9IFsuLi5zd2lwZXIuX19tb2R1bGVzX19dO1xuICAgICAgaWYgKHBhcmFtcy5tb2R1bGVzICYmIEFycmF5LmlzQXJyYXkocGFyYW1zLm1vZHVsZXMpKSB7XG4gICAgICAgIHN3aXBlci5tb2R1bGVzLnB1c2goLi4ucGFyYW1zLm1vZHVsZXMpO1xuICAgICAgfVxuICAgICAgY29uc3QgYWxsTW9kdWxlc1BhcmFtcyA9IHt9O1xuICAgICAgc3dpcGVyLm1vZHVsZXMuZm9yRWFjaChtb2QgPT4ge1xuICAgICAgICBtb2Qoe1xuICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICBzd2lwZXIsXG4gICAgICAgICAgZXh0ZW5kUGFyYW1zOiBtb2R1bGVFeHRlbmRQYXJhbXMocGFyYW1zLCBhbGxNb2R1bGVzUGFyYW1zKSxcbiAgICAgICAgICBvbjogc3dpcGVyLm9uLmJpbmQoc3dpcGVyKSxcbiAgICAgICAgICBvbmNlOiBzd2lwZXIub25jZS5iaW5kKHN3aXBlciksXG4gICAgICAgICAgb2ZmOiBzd2lwZXIub2ZmLmJpbmQoc3dpcGVyKSxcbiAgICAgICAgICBlbWl0OiBzd2lwZXIuZW1pdC5iaW5kKHN3aXBlcilcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRXh0ZW5kIGRlZmF1bHRzIHdpdGggbW9kdWxlcyBwYXJhbXNcbiAgICAgIGNvbnN0IHN3aXBlclBhcmFtcyA9IGV4dGVuZCQxKHt9LCBkZWZhdWx0cywgYWxsTW9kdWxlc1BhcmFtcyk7XG5cbiAgICAgIC8vIEV4dGVuZCBkZWZhdWx0cyB3aXRoIHBhc3NlZCBwYXJhbXNcbiAgICAgIHN3aXBlci5wYXJhbXMgPSBleHRlbmQkMSh7fSwgc3dpcGVyUGFyYW1zLCBleHRlbmRlZERlZmF1bHRzLCBwYXJhbXMpO1xuICAgICAgc3dpcGVyLm9yaWdpbmFsUGFyYW1zID0gZXh0ZW5kJDEoe30sIHN3aXBlci5wYXJhbXMpO1xuICAgICAgc3dpcGVyLnBhc3NlZFBhcmFtcyA9IGV4dGVuZCQxKHt9LCBwYXJhbXMpO1xuXG4gICAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcyAmJiBzd2lwZXIucGFyYW1zLm9uKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHN3aXBlci5wYXJhbXMub24pLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgICBzd2lwZXIub24oZXZlbnROYW1lLCBzd2lwZXIucGFyYW1zLm9uW2V2ZW50TmFtZV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zICYmIHN3aXBlci5wYXJhbXMub25BbnkpIHtcbiAgICAgICAgc3dpcGVyLm9uQW55KHN3aXBlci5wYXJhbXMub25BbnkpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeHRlbmQgU3dpcGVyXG4gICAgICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgICAgICBlbmFibGVkOiBzd2lwZXIucGFyYW1zLmVuYWJsZWQsXG4gICAgICAgIGVsLFxuICAgICAgICAvLyBDbGFzc2VzXG4gICAgICAgIGNsYXNzTmFtZXM6IFtdLFxuICAgICAgICAvLyBTbGlkZXNcbiAgICAgICAgc2xpZGVzOiBbXSxcbiAgICAgICAgc2xpZGVzR3JpZDogW10sXG4gICAgICAgIHNuYXBHcmlkOiBbXSxcbiAgICAgICAgc2xpZGVzU2l6ZXNHcmlkOiBbXSxcbiAgICAgICAgLy8gaXNEaXJlY3Rpb25cbiAgICAgICAgaXNIb3Jpem9udGFsKCkge1xuICAgICAgICAgIHJldHVybiBzd2lwZXIucGFyYW1zLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICB9LFxuICAgICAgICBpc1ZlcnRpY2FsKCkge1xuICAgICAgICAgIHJldHVybiBzd2lwZXIucGFyYW1zLmRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJztcbiAgICAgICAgfSxcbiAgICAgICAgLy8gSW5kZXhlc1xuICAgICAgICBhY3RpdmVJbmRleDogMCxcbiAgICAgICAgcmVhbEluZGV4OiAwLFxuICAgICAgICAvL1xuICAgICAgICBpc0JlZ2lubmluZzogdHJ1ZSxcbiAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAvLyBQcm9wc1xuICAgICAgICB0cmFuc2xhdGU6IDAsXG4gICAgICAgIHByZXZpb3VzVHJhbnNsYXRlOiAwLFxuICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgdmVsb2NpdHk6IDAsXG4gICAgICAgIGFuaW1hdGluZzogZmFsc2UsXG4gICAgICAgIGNzc092ZXJmbG93QWRqdXN0bWVudCgpIHtcbiAgICAgICAgICAvLyBSZXR1cm5zIDAgdW5sZXNzIGB0cmFuc2xhdGVgIGlzID4gMioqMjNcbiAgICAgICAgICAvLyBTaG91bGQgYmUgc3VidHJhY3RlZCBmcm9tIGNzcyB2YWx1ZXMgdG8gcHJldmVudCBvdmVyZmxvd1xuICAgICAgICAgIHJldHVybiBNYXRoLnRydW5jKHRoaXMudHJhbnNsYXRlIC8gMiAqKiAyMykgKiAyICoqIDIzO1xuICAgICAgICB9LFxuICAgICAgICAvLyBMb2Nrc1xuICAgICAgICBhbGxvd1NsaWRlTmV4dDogc3dpcGVyLnBhcmFtcy5hbGxvd1NsaWRlTmV4dCxcbiAgICAgICAgYWxsb3dTbGlkZVByZXY6IHN3aXBlci5wYXJhbXMuYWxsb3dTbGlkZVByZXYsXG4gICAgICAgIC8vIFRvdWNoIEV2ZW50c1xuICAgICAgICB0b3VjaEV2ZW50c0RhdGE6IHtcbiAgICAgICAgICBpc1RvdWNoZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpc01vdmVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgYWxsb3dUb3VjaENhbGxiYWNrczogdW5kZWZpbmVkLFxuICAgICAgICAgIHRvdWNoU3RhcnRUaW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgaXNTY3JvbGxpbmc6IHVuZGVmaW5lZCxcbiAgICAgICAgICBjdXJyZW50VHJhbnNsYXRlOiB1bmRlZmluZWQsXG4gICAgICAgICAgc3RhcnRUcmFuc2xhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBhbGxvd1RocmVzaG9sZE1vdmU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAvLyBGb3JtIGVsZW1lbnRzIHRvIG1hdGNoXG4gICAgICAgICAgZm9jdXNhYmxlRWxlbWVudHM6IHN3aXBlci5wYXJhbXMuZm9jdXNhYmxlRWxlbWVudHMsXG4gICAgICAgICAgLy8gTGFzdCBjbGljayB0aW1lXG4gICAgICAgICAgbGFzdENsaWNrVGltZTogMCxcbiAgICAgICAgICBjbGlja1RpbWVvdXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAvLyBWZWxvY2l0aWVzXG4gICAgICAgICAgdmVsb2NpdGllczogW10sXG4gICAgICAgICAgYWxsb3dNb21lbnR1bUJvdW5jZTogdW5kZWZpbmVkLFxuICAgICAgICAgIHN0YXJ0TW92aW5nOiB1bmRlZmluZWQsXG4gICAgICAgICAgcG9pbnRlcklkOiBudWxsLFxuICAgICAgICAgIHRvdWNoSWQ6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQ2xpY2tzXG4gICAgICAgIGFsbG93Q2xpY2s6IHRydWUsXG4gICAgICAgIC8vIFRvdWNoZXNcbiAgICAgICAgYWxsb3dUb3VjaE1vdmU6IHN3aXBlci5wYXJhbXMuYWxsb3dUb3VjaE1vdmUsXG4gICAgICAgIHRvdWNoZXM6IHtcbiAgICAgICAgICBzdGFydFg6IDAsXG4gICAgICAgICAgc3RhcnRZOiAwLFxuICAgICAgICAgIGN1cnJlbnRYOiAwLFxuICAgICAgICAgIGN1cnJlbnRZOiAwLFxuICAgICAgICAgIGRpZmY6IDBcbiAgICAgICAgfSxcbiAgICAgICAgLy8gSW1hZ2VzXG4gICAgICAgIGltYWdlc1RvTG9hZDogW10sXG4gICAgICAgIGltYWdlc0xvYWRlZDogMFxuICAgICAgfSk7XG4gICAgICBzd2lwZXIuZW1pdCgnX3N3aXBlcicpO1xuXG4gICAgICAvLyBJbml0XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5pbml0KSB7XG4gICAgICAgIHN3aXBlci5pbml0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiBhcHAgaW5zdGFuY2VcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdHJ1Y3Rvci1yZXR1cm5cbiAgICAgIHJldHVybiBzd2lwZXI7XG4gICAgfVxuICAgIGdldERpcmVjdGlvbkxhYmVsKHByb3BlcnR5KSB7XG4gICAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgICByZXR1cm4gcHJvcGVydHk7XG4gICAgICB9XG4gICAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgIHJldHVybiB7XG4gICAgICAgICd3aWR0aCc6ICdoZWlnaHQnLFxuICAgICAgICAnbWFyZ2luLXRvcCc6ICdtYXJnaW4tbGVmdCcsXG4gICAgICAgICdtYXJnaW4tYm90dG9tICc6ICdtYXJnaW4tcmlnaHQnLFxuICAgICAgICAnbWFyZ2luLWxlZnQnOiAnbWFyZ2luLXRvcCcsXG4gICAgICAgICdtYXJnaW4tcmlnaHQnOiAnbWFyZ2luLWJvdHRvbScsXG4gICAgICAgICdwYWRkaW5nLWxlZnQnOiAncGFkZGluZy10b3AnLFxuICAgICAgICAncGFkZGluZy1yaWdodCc6ICdwYWRkaW5nLWJvdHRvbScsXG4gICAgICAgICdtYXJnaW5SaWdodCc6ICdtYXJnaW5Cb3R0b20nXG4gICAgICB9W3Byb3BlcnR5XTtcbiAgICB9XG4gICAgZ2V0U2xpZGVJbmRleChzbGlkZUVsKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNsaWRlc0VsLFxuICAgICAgICBwYXJhbXNcbiAgICAgIH0gPSB0aGlzO1xuICAgICAgY29uc3Qgc2xpZGVzID0gZWxlbWVudENoaWxkcmVuKHNsaWRlc0VsLCBgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICAgIGNvbnN0IGZpcnN0U2xpZGVJbmRleCA9IGVsZW1lbnRJbmRleChzbGlkZXNbMF0pO1xuICAgICAgcmV0dXJuIGVsZW1lbnRJbmRleChzbGlkZUVsKSAtIGZpcnN0U2xpZGVJbmRleDtcbiAgICB9XG4gICAgZ2V0U2xpZGVJbmRleEJ5RGF0YShpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2xpZGVJbmRleCh0aGlzLnNsaWRlcy5maWx0ZXIoc2xpZGVFbCA9PiBzbGlkZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSAqIDEgPT09IGluZGV4KVswXSk7XG4gICAgfVxuICAgIHJlY2FsY1NsaWRlcygpIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNsaWRlc0VsLFxuICAgICAgICBwYXJhbXNcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBzd2lwZXIuc2xpZGVzID0gZWxlbWVudENoaWxkcmVuKHNsaWRlc0VsLCBgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICB9XG4gICAgZW5hYmxlKCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGlmIChzd2lwZXIuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgc3dpcGVyLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuZ3JhYkN1cnNvcikge1xuICAgICAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcigpO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmVtaXQoJ2VuYWJsZScpO1xuICAgIH1cbiAgICBkaXNhYmxlKCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHN3aXBlci5lbmFibGVkID0gZmFsc2U7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5ncmFiQ3Vyc29yKSB7XG4gICAgICAgIHN3aXBlci51bnNldEdyYWJDdXJzb3IoKTtcbiAgICAgIH1cbiAgICAgIHN3aXBlci5lbWl0KCdkaXNhYmxlJyk7XG4gICAgfVxuICAgIHNldFByb2dyZXNzKHByb2dyZXNzLCBzcGVlZCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIHByb2dyZXNzID0gTWF0aC5taW4oTWF0aC5tYXgocHJvZ3Jlc3MsIDApLCAxKTtcbiAgICAgIGNvbnN0IG1pbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICAgIGNvbnN0IG1heCA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKTtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSAobWF4IC0gbWluKSAqIHByb2dyZXNzICsgbWluO1xuICAgICAgc3dpcGVyLnRyYW5zbGF0ZVRvKGN1cnJlbnQsIHR5cGVvZiBzcGVlZCA9PT0gJ3VuZGVmaW5lZCcgPyAwIDogc3BlZWQpO1xuICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIH1cbiAgICBlbWl0Q29udGFpbmVyQ2xhc3NlcygpIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuX2VtaXRDbGFzc2VzIHx8ICFzd2lwZXIuZWwpIHJldHVybjtcbiAgICAgIGNvbnN0IGNscyA9IHN3aXBlci5lbC5jbGFzc05hbWUuc3BsaXQoJyAnKS5maWx0ZXIoY2xhc3NOYW1lID0+IHtcbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZS5pbmRleE9mKCdzd2lwZXInKSA9PT0gMCB8fCBjbGFzc05hbWUuaW5kZXhPZihzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3MpID09PSAwO1xuICAgICAgfSk7XG4gICAgICBzd2lwZXIuZW1pdCgnX2NvbnRhaW5lckNsYXNzZXMnLCBjbHMuam9pbignICcpKTtcbiAgICB9XG4gICAgZ2V0U2xpZGVDbGFzc2VzKHNsaWRlRWwpIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuICcnO1xuICAgICAgcmV0dXJuIHNsaWRlRWwuY2xhc3NOYW1lLnNwbGl0KCcgJykuZmlsdGVyKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIHJldHVybiBjbGFzc05hbWUuaW5kZXhPZignc3dpcGVyLXNsaWRlJykgPT09IDAgfHwgY2xhc3NOYW1lLmluZGV4T2Yoc3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzKSA9PT0gMDtcbiAgICAgIH0pLmpvaW4oJyAnKTtcbiAgICB9XG4gICAgZW1pdFNsaWRlc0NsYXNzZXMoKSB7XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLl9lbWl0Q2xhc3NlcyB8fCAhc3dpcGVyLmVsKSByZXR1cm47XG4gICAgICBjb25zdCB1cGRhdGVzID0gW107XG4gICAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBzd2lwZXIuZ2V0U2xpZGVDbGFzc2VzKHNsaWRlRWwpO1xuICAgICAgICB1cGRhdGVzLnB1c2goe1xuICAgICAgICAgIHNsaWRlRWwsXG4gICAgICAgICAgY2xhc3NOYW1lc1xuICAgICAgICB9KTtcbiAgICAgICAgc3dpcGVyLmVtaXQoJ19zbGlkZUNsYXNzJywgc2xpZGVFbCwgY2xhc3NOYW1lcyk7XG4gICAgICB9KTtcbiAgICAgIHN3aXBlci5lbWl0KCdfc2xpZGVDbGFzc2VzJywgdXBkYXRlcyk7XG4gICAgfVxuICAgIHNsaWRlc1BlclZpZXdEeW5hbWljKHZpZXcsIGV4YWN0KSB7XG4gICAgICBpZiAodmlldyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHZpZXcgPSAnY3VycmVudCc7XG4gICAgICB9XG4gICAgICBpZiAoZXhhY3QgPT09IHZvaWQgMCkge1xuICAgICAgICBleGFjdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBzbGlkZXMsXG4gICAgICAgIHNsaWRlc0dyaWQsXG4gICAgICAgIHNsaWRlc1NpemVzR3JpZCxcbiAgICAgICAgc2l6ZTogc3dpcGVyU2l6ZSxcbiAgICAgICAgYWN0aXZlSW5kZXhcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBsZXQgc3B2ID0gMTtcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zLnNsaWRlc1BlclZpZXcgPT09ICdudW1iZXInKSByZXR1cm4gcGFyYW1zLnNsaWRlc1BlclZpZXc7XG4gICAgICBpZiAocGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIGxldCBzbGlkZVNpemUgPSBzbGlkZXNbYWN0aXZlSW5kZXhdID8gTWF0aC5jZWlsKHNsaWRlc1thY3RpdmVJbmRleF0uc3dpcGVyU2xpZGVTaXplKSA6IDA7XG4gICAgICAgIGxldCBicmVha0xvb3A7XG4gICAgICAgIGZvciAobGV0IGkgPSBhY3RpdmVJbmRleCArIDE7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoc2xpZGVzW2ldICYmICFicmVha0xvb3ApIHtcbiAgICAgICAgICAgIHNsaWRlU2l6ZSArPSBNYXRoLmNlaWwoc2xpZGVzW2ldLnN3aXBlclNsaWRlU2l6ZSk7XG4gICAgICAgICAgICBzcHYgKz0gMTtcbiAgICAgICAgICAgIGlmIChzbGlkZVNpemUgPiBzd2lwZXJTaXplKSBicmVha0xvb3AgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gYWN0aXZlSW5kZXggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgIGlmIChzbGlkZXNbaV0gJiYgIWJyZWFrTG9vcCkge1xuICAgICAgICAgICAgc2xpZGVTaXplICs9IHNsaWRlc1tpXS5zd2lwZXJTbGlkZVNpemU7XG4gICAgICAgICAgICBzcHYgKz0gMTtcbiAgICAgICAgICAgIGlmIChzbGlkZVNpemUgPiBzd2lwZXJTaXplKSBicmVha0xvb3AgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIGlmICh2aWV3ID09PSAnY3VycmVudCcpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gYWN0aXZlSW5kZXggKyAxOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBzbGlkZUluVmlldyA9IGV4YWN0ID8gc2xpZGVzR3JpZFtpXSArIHNsaWRlc1NpemVzR3JpZFtpXSAtIHNsaWRlc0dyaWRbYWN0aXZlSW5kZXhdIDwgc3dpcGVyU2l6ZSA6IHNsaWRlc0dyaWRbaV0gLSBzbGlkZXNHcmlkW2FjdGl2ZUluZGV4XSA8IHN3aXBlclNpemU7XG4gICAgICAgICAgICBpZiAoc2xpZGVJblZpZXcpIHtcbiAgICAgICAgICAgICAgc3B2ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHByZXZpb3VzXG4gICAgICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZUluZGV4IC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlSW5WaWV3ID0gc2xpZGVzR3JpZFthY3RpdmVJbmRleF0gLSBzbGlkZXNHcmlkW2ldIDwgc3dpcGVyU2l6ZTtcbiAgICAgICAgICAgIGlmIChzbGlkZUluVmlldykge1xuICAgICAgICAgICAgICBzcHYgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzcHY7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNuYXBHcmlkLFxuICAgICAgICBwYXJhbXNcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICAvLyBCcmVha3BvaW50c1xuICAgICAgaWYgKHBhcmFtcy5icmVha3BvaW50cykge1xuICAgICAgICBzd2lwZXIuc2V0QnJlYWtwb2ludCgpO1xuICAgICAgfVxuICAgICAgWy4uLnN3aXBlci5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbbG9hZGluZz1cImxhenlcIl0nKV0uZm9yRWFjaChpbWFnZUVsID0+IHtcbiAgICAgICAgaWYgKGltYWdlRWwuY29tcGxldGUpIHtcbiAgICAgICAgICBwcm9jZXNzTGF6eVByZWxvYWRlcihzd2lwZXIsIGltYWdlRWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHN3aXBlci51cGRhdGVTaXplKCk7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MoKTtcbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICBmdW5jdGlvbiBzZXRUcmFuc2xhdGUoKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZVZhbHVlID0gc3dpcGVyLnJ0bFRyYW5zbGF0ZSA/IHN3aXBlci50cmFuc2xhdGUgKiAtMSA6IHN3aXBlci50cmFuc2xhdGU7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zbGF0ZSA9IE1hdGgubWluKE1hdGgubWF4KHRyYW5zbGF0ZVZhbHVlLCBzd2lwZXIubWF4VHJhbnNsYXRlKCkpLCBzd2lwZXIubWluVHJhbnNsYXRlKCkpO1xuICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKG5ld1RyYW5zbGF0ZSk7XG4gICAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgfVxuICAgICAgbGV0IHRyYW5zbGF0ZWQ7XG4gICAgICBpZiAocGFyYW1zLmZyZWVNb2RlICYmIHBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmICFwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICAgICAgaWYgKHBhcmFtcy5hdXRvSGVpZ2h0KSB7XG4gICAgICAgICAgc3dpcGVyLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nIHx8IHBhcmFtcy5zbGlkZXNQZXJWaWV3ID4gMSkgJiYgc3dpcGVyLmlzRW5kICYmICFwYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgICBjb25zdCBzbGlkZXMgPSBzd2lwZXIudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzIDogc3dpcGVyLnNsaWRlcztcbiAgICAgICAgICB0cmFuc2xhdGVkID0gc3dpcGVyLnNsaWRlVG8oc2xpZGVzLmxlbmd0aCAtIDEsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cmFuc2xhdGVkID0gc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4LCAwLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0cmFuc2xhdGVkKSB7XG4gICAgICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiBzbmFwR3JpZCAhPT0gc3dpcGVyLnNuYXBHcmlkKSB7XG4gICAgICAgIHN3aXBlci5jaGVja092ZXJmbG93KCk7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgfVxuICAgIGNoYW5nZURpcmVjdGlvbihuZXdEaXJlY3Rpb24sIG5lZWRVcGRhdGUpIHtcbiAgICAgIGlmIChuZWVkVXBkYXRlID09PSB2b2lkIDApIHtcbiAgICAgICAgbmVlZFVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgY29uc3QgY3VycmVudERpcmVjdGlvbiA9IHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uO1xuICAgICAgaWYgKCFuZXdEaXJlY3Rpb24pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIG5ld0RpcmVjdGlvbiA9IGN1cnJlbnREaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG4gICAgICB9XG4gICAgICBpZiAobmV3RGlyZWN0aW9uID09PSBjdXJyZW50RGlyZWN0aW9uIHx8IG5ld0RpcmVjdGlvbiAhPT0gJ2hvcml6b250YWwnICYmIG5ld0RpcmVjdGlvbiAhPT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICByZXR1cm4gc3dpcGVyO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmVsLmNsYXNzTGlzdC5yZW1vdmUoYCR7c3dpcGVyLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfSR7Y3VycmVudERpcmVjdGlvbn1gKTtcbiAgICAgIHN3aXBlci5lbC5jbGFzc0xpc3QuYWRkKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc30ke25ld0RpcmVjdGlvbn1gKTtcbiAgICAgIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICAgICAgc3dpcGVyLnBhcmFtcy5kaXJlY3Rpb24gPSBuZXdEaXJlY3Rpb247XG4gICAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgIGlmIChuZXdEaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICBzbGlkZUVsLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2xpZGVFbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBzd2lwZXIuZW1pdCgnY2hhbmdlRGlyZWN0aW9uJyk7XG4gICAgICBpZiAobmVlZFVwZGF0ZSkgc3dpcGVyLnVwZGF0ZSgpO1xuICAgICAgcmV0dXJuIHN3aXBlcjtcbiAgICB9XG4gICAgY2hhbmdlTGFuZ3VhZ2VEaXJlY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgaWYgKHN3aXBlci5ydGwgJiYgZGlyZWN0aW9uID09PSAncnRsJyB8fCAhc3dpcGVyLnJ0bCAmJiBkaXJlY3Rpb24gPT09ICdsdHInKSByZXR1cm47XG4gICAgICBzd2lwZXIucnRsID0gZGlyZWN0aW9uID09PSAncnRsJztcbiAgICAgIHN3aXBlci5ydGxUcmFuc2xhdGUgPSBzd2lwZXIucGFyYW1zLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnICYmIHN3aXBlci5ydGw7XG4gICAgICBpZiAoc3dpcGVyLnJ0bCkge1xuICAgICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LmFkZChgJHtzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9cnRsYCk7XG4gICAgICAgIHN3aXBlci5lbC5kaXIgPSAncnRsJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci5lbC5jbGFzc0xpc3QucmVtb3ZlKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ydGxgKTtcbiAgICAgICAgc3dpcGVyLmVsLmRpciA9ICdsdHInO1xuICAgICAgfVxuICAgICAgc3dpcGVyLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBtb3VudChlbGVtZW50KSB7XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgaWYgKHN3aXBlci5tb3VudGVkKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgLy8gRmluZCBlbFxuICAgICAgbGV0IGVsID0gZWxlbWVudCB8fCBzd2lwZXIucGFyYW1zLmVsO1xuICAgICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKTtcbiAgICAgIH1cbiAgICAgIGlmICghZWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgZWwuc3dpcGVyID0gc3dpcGVyO1xuICAgICAgaWYgKGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5ob3N0ICYmIGVsLnBhcmVudE5vZGUuaG9zdC5ub2RlTmFtZSA9PT0gc3dpcGVyLnBhcmFtcy5zd2lwZXJFbGVtZW50Tm9kZU5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICBzd2lwZXIuaXNFbGVtZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdldFdyYXBwZXJTZWxlY3RvciA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGAuJHsoc3dpcGVyLnBhcmFtcy53cmFwcGVyQ2xhc3MgfHwgJycpLnRyaW0oKS5zcGxpdCgnICcpLmpvaW4oJy4nKX1gO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGdldFdyYXBwZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChlbCAmJiBlbC5zaGFkb3dSb290ICYmIGVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3Rvcikge1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihnZXRXcmFwcGVyU2VsZWN0b3IoKSk7XG4gICAgICAgICAgLy8gQ2hpbGRyZW4gbmVlZHMgdG8gcmV0dXJuIHNsb3QgaXRlbXNcbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50Q2hpbGRyZW4oZWwsIGdldFdyYXBwZXJTZWxlY3RvcigpKVswXTtcbiAgICAgIH07XG4gICAgICAvLyBGaW5kIFdyYXBwZXJcbiAgICAgIGxldCB3cmFwcGVyRWwgPSBnZXRXcmFwcGVyKCk7XG4gICAgICBpZiAoIXdyYXBwZXJFbCAmJiBzd2lwZXIucGFyYW1zLmNyZWF0ZUVsZW1lbnRzKSB7XG4gICAgICAgIHdyYXBwZXJFbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN3aXBlci5wYXJhbXMud3JhcHBlckNsYXNzKTtcbiAgICAgICAgZWwuYXBwZW5kKHdyYXBwZXJFbCk7XG4gICAgICAgIGVsZW1lbnRDaGlsZHJlbihlbCwgYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31gKS5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAgIHdyYXBwZXJFbC5hcHBlbmQoc2xpZGVFbCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICAgICAgZWwsXG4gICAgICAgIHdyYXBwZXJFbCxcbiAgICAgICAgc2xpZGVzRWw6IHN3aXBlci5pc0VsZW1lbnQgJiYgIWVsLnBhcmVudE5vZGUuaG9zdC5zbGlkZVNsb3RzID8gZWwucGFyZW50Tm9kZS5ob3N0IDogd3JhcHBlckVsLFxuICAgICAgICBob3N0RWw6IHN3aXBlci5pc0VsZW1lbnQgPyBlbC5wYXJlbnROb2RlLmhvc3QgOiBlbCxcbiAgICAgICAgbW91bnRlZDogdHJ1ZSxcbiAgICAgICAgLy8gUlRMXG4gICAgICAgIHJ0bDogZWwuZGlyLnRvTG93ZXJDYXNlKCkgPT09ICdydGwnIHx8IGVsZW1lbnRTdHlsZShlbCwgJ2RpcmVjdGlvbicpID09PSAncnRsJyxcbiAgICAgICAgcnRsVHJhbnNsYXRlOiBzd2lwZXIucGFyYW1zLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnICYmIChlbC5kaXIudG9Mb3dlckNhc2UoKSA9PT0gJ3J0bCcgfHwgZWxlbWVudFN0eWxlKGVsLCAnZGlyZWN0aW9uJykgPT09ICdydGwnKSxcbiAgICAgICAgd3JvbmdSVEw6IGVsZW1lbnRTdHlsZSh3cmFwcGVyRWwsICdkaXNwbGF5JykgPT09ICctd2Via2l0LWJveCdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGluaXQoZWwpIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBpZiAoc3dpcGVyLmluaXRpYWxpemVkKSByZXR1cm4gc3dpcGVyO1xuICAgICAgY29uc3QgbW91bnRlZCA9IHN3aXBlci5tb3VudChlbCk7XG4gICAgICBpZiAobW91bnRlZCA9PT0gZmFsc2UpIHJldHVybiBzd2lwZXI7XG4gICAgICBzd2lwZXIuZW1pdCgnYmVmb3JlSW5pdCcpO1xuXG4gICAgICAvLyBTZXQgYnJlYWtwb2ludFxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuYnJlYWtwb2ludHMpIHtcbiAgICAgICAgc3dpcGVyLnNldEJyZWFrcG9pbnQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIENsYXNzZXNcbiAgICAgIHN3aXBlci5hZGRDbGFzc2VzKCk7XG5cbiAgICAgIC8vIFVwZGF0ZSBzaXplXG4gICAgICBzd2lwZXIudXBkYXRlU2l6ZSgpO1xuXG4gICAgICAvLyBVcGRhdGUgc2xpZGVzXG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93KSB7XG4gICAgICAgIHN3aXBlci5jaGVja092ZXJmbG93KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBHcmFiIEN1cnNvclxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuZ3JhYkN1cnNvciAmJiBzd2lwZXIuZW5hYmxlZCkge1xuICAgICAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBTbGlkZSBUbyBJbml0aWFsIFNsaWRlXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wICYmIHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5wYXJhbXMuaW5pdGlhbFNsaWRlICsgc3dpcGVyLnZpcnR1YWwuc2xpZGVzQmVmb3JlLCAwLCBzd2lwZXIucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCwgZmFsc2UsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnBhcmFtcy5pbml0aWFsU2xpZGUsIDAsIHN3aXBlci5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0LCBmYWxzZSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBsb29wXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIHN3aXBlci5sb29wQ3JlYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEF0dGFjaCBldmVudHNcbiAgICAgIHN3aXBlci5hdHRhY2hFdmVudHMoKTtcbiAgICAgIGNvbnN0IGxhenlFbGVtZW50cyA9IFsuLi5zd2lwZXIuZWwucXVlcnlTZWxlY3RvckFsbCgnW2xvYWRpbmc9XCJsYXp5XCJdJyldO1xuICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgbGF6eUVsZW1lbnRzLnB1c2goLi4uc3dpcGVyLmhvc3RFbC5xdWVyeVNlbGVjdG9yQWxsKCdbbG9hZGluZz1cImxhenlcIl0nKSk7XG4gICAgICB9XG4gICAgICBsYXp5RWxlbWVudHMuZm9yRWFjaChpbWFnZUVsID0+IHtcbiAgICAgICAgaWYgKGltYWdlRWwuY29tcGxldGUpIHtcbiAgICAgICAgICBwcm9jZXNzTGF6eVByZWxvYWRlcihzd2lwZXIsIGltYWdlRWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGUgPT4ge1xuICAgICAgICAgICAgcHJvY2Vzc0xhenlQcmVsb2FkZXIoc3dpcGVyLCBlLnRhcmdldCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcHJlbG9hZChzd2lwZXIpO1xuXG4gICAgICAvLyBJbml0IEZsYWdcbiAgICAgIHN3aXBlci5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICBwcmVsb2FkKHN3aXBlcik7XG5cbiAgICAgIC8vIEVtaXRcbiAgICAgIHN3aXBlci5lbWl0KCdpbml0Jyk7XG4gICAgICBzd2lwZXIuZW1pdCgnYWZ0ZXJJbml0Jyk7XG4gICAgICByZXR1cm4gc3dpcGVyO1xuICAgIH1cbiAgICBkZXN0cm95KGRlbGV0ZUluc3RhbmNlLCBjbGVhblN0eWxlcykge1xuICAgICAgaWYgKGRlbGV0ZUluc3RhbmNlID09PSB2b2lkIDApIHtcbiAgICAgICAgZGVsZXRlSW5zdGFuY2UgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGNsZWFuU3R5bGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgY2xlYW5TdHlsZXMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBlbCxcbiAgICAgICAgd3JhcHBlckVsLFxuICAgICAgICBzbGlkZXNcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBpZiAodHlwZW9mIHN3aXBlci5wYXJhbXMgPT09ICd1bmRlZmluZWQnIHx8IHN3aXBlci5kZXN0cm95ZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdCgnYmVmb3JlRGVzdHJveScpO1xuXG4gICAgICAvLyBJbml0IEZsYWdcbiAgICAgIHN3aXBlci5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAvLyBEZXRhY2ggZXZlbnRzXG4gICAgICBzd2lwZXIuZGV0YWNoRXZlbnRzKCk7XG5cbiAgICAgIC8vIERlc3Ryb3kgbG9vcFxuICAgICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbnVwIHN0eWxlc1xuICAgICAgaWYgKGNsZWFuU3R5bGVzKSB7XG4gICAgICAgIHN3aXBlci5yZW1vdmVDbGFzc2VzKCk7XG4gICAgICAgIGlmIChlbCAmJiB0eXBlb2YgZWwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3cmFwcGVyRWwpIHtcbiAgICAgICAgICB3cmFwcGVyRWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzbGlkZXMgJiYgc2xpZGVzLmxlbmd0aCkge1xuICAgICAgICAgIHNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAgICAgc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKHBhcmFtcy5zbGlkZVZpc2libGVDbGFzcywgcGFyYW1zLnNsaWRlRnVsbHlWaXNpYmxlQ2xhc3MsIHBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzLCBwYXJhbXMuc2xpZGVOZXh0Q2xhc3MsIHBhcmFtcy5zbGlkZVByZXZDbGFzcyk7XG4gICAgICAgICAgICBzbGlkZUVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIHNsaWRlRWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdCgnZGVzdHJveScpO1xuXG4gICAgICAvLyBEZXRhY2ggZW1pdHRlciBldmVudHNcbiAgICAgIE9iamVjdC5rZXlzKHN3aXBlci5ldmVudHNMaXN0ZW5lcnMpLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgc3dpcGVyLm9mZihldmVudE5hbWUpO1xuICAgICAgfSk7XG4gICAgICBpZiAoZGVsZXRlSW5zdGFuY2UgIT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChzd2lwZXIuZWwgJiYgdHlwZW9mIHN3aXBlci5lbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBzd2lwZXIuZWwuc3dpcGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGVQcm9wcyhzd2lwZXIpO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGV4dGVuZERlZmF1bHRzKG5ld0RlZmF1bHRzKSB7XG4gICAgICBleHRlbmQkMShleHRlbmRlZERlZmF1bHRzLCBuZXdEZWZhdWx0cyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgZXh0ZW5kZWREZWZhdWx0cygpIHtcbiAgICAgIHJldHVybiBleHRlbmRlZERlZmF1bHRzO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRzKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRzO1xuICAgIH1cbiAgICBzdGF0aWMgaW5zdGFsbE1vZHVsZShtb2QpIHtcbiAgICAgIGlmICghU3dpcGVyLnByb3RvdHlwZS5fX21vZHVsZXNfXykgU3dpcGVyLnByb3RvdHlwZS5fX21vZHVsZXNfXyA9IFtdO1xuICAgICAgY29uc3QgbW9kdWxlcyA9IFN3aXBlci5wcm90b3R5cGUuX19tb2R1bGVzX187XG4gICAgICBpZiAodHlwZW9mIG1vZCA9PT0gJ2Z1bmN0aW9uJyAmJiBtb2R1bGVzLmluZGV4T2YobW9kKSA8IDApIHtcbiAgICAgICAgbW9kdWxlcy5wdXNoKG1vZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyB1c2UobW9kdWxlKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgIG1vZHVsZS5mb3JFYWNoKG0gPT4gU3dpcGVyLmluc3RhbGxNb2R1bGUobSkpO1xuICAgICAgICByZXR1cm4gU3dpcGVyO1xuICAgICAgfVxuICAgICAgU3dpcGVyLmluc3RhbGxNb2R1bGUobW9kdWxlKTtcbiAgICAgIHJldHVybiBTd2lwZXI7XG4gICAgfVxuICB9XG4gIE9iamVjdC5rZXlzKHByb3RvdHlwZXMpLmZvckVhY2gocHJvdG90eXBlR3JvdXAgPT4ge1xuICAgIE9iamVjdC5rZXlzKHByb3RvdHlwZXNbcHJvdG90eXBlR3JvdXBdKS5mb3JFYWNoKHByb3RvTWV0aG9kID0+IHtcbiAgICAgIFN3aXBlci5wcm90b3R5cGVbcHJvdG9NZXRob2RdID0gcHJvdG90eXBlc1twcm90b3R5cGVHcm91cF1bcHJvdG9NZXRob2RdO1xuICAgIH0pO1xuICB9KTtcbiAgU3dpcGVyLnVzZShbUmVzaXplLCBPYnNlcnZlcl0pO1xuXG4gIGZ1bmN0aW9uIFZpcnR1YWwoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvbixcbiAgICAgIGVtaXRcbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgdmlydHVhbDoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgc2xpZGVzOiBbXSxcbiAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgIHJlbmRlclNsaWRlOiBudWxsLFxuICAgICAgICByZW5kZXJFeHRlcm5hbDogbnVsbCxcbiAgICAgICAgcmVuZGVyRXh0ZXJuYWxVcGRhdGU6IHRydWUsXG4gICAgICAgIGFkZFNsaWRlc0JlZm9yZTogMCxcbiAgICAgICAgYWRkU2xpZGVzQWZ0ZXI6IDBcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgY3NzTW9kZVRpbWVvdXQ7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgIHN3aXBlci52aXJ0dWFsID0ge1xuICAgICAgY2FjaGU6IHt9LFxuICAgICAgZnJvbTogdW5kZWZpbmVkLFxuICAgICAgdG86IHVuZGVmaW5lZCxcbiAgICAgIHNsaWRlczogW10sXG4gICAgICBvZmZzZXQ6IDAsXG4gICAgICBzbGlkZXNHcmlkOiBbXVxuICAgIH07XG4gICAgY29uc3QgdGVtcERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGZ1bmN0aW9uIHJlbmRlclNsaWRlKHNsaWRlLCBpbmRleCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy52aXJ0dWFsO1xuICAgICAgaWYgKHBhcmFtcy5jYWNoZSAmJiBzd2lwZXIudmlydHVhbC5jYWNoZVtpbmRleF0pIHtcbiAgICAgICAgcmV0dXJuIHN3aXBlci52aXJ0dWFsLmNhY2hlW2luZGV4XTtcbiAgICAgIH1cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgbGV0IHNsaWRlRWw7XG4gICAgICBpZiAocGFyYW1zLnJlbmRlclNsaWRlKSB7XG4gICAgICAgIHNsaWRlRWwgPSBwYXJhbXMucmVuZGVyU2xpZGUuY2FsbChzd2lwZXIsIHNsaWRlLCBpbmRleCk7XG4gICAgICAgIGlmICh0eXBlb2Ygc2xpZGVFbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0ZW1wRE9NLmlubmVySFRNTCA9IHNsaWRlRWw7XG4gICAgICAgICAgc2xpZGVFbCA9IHRlbXBET00uY2hpbGRyZW5bMF07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICBzbGlkZUVsID0gY3JlYXRlRWxlbWVudCgnc3dpcGVyLXNsaWRlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZUVsID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzKTtcbiAgICAgIH1cbiAgICAgIHNsaWRlRWwuc2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIGluZGV4KTtcbiAgICAgIGlmICghcGFyYW1zLnJlbmRlclNsaWRlKSB7XG4gICAgICAgIHNsaWRlRWwuaW5uZXJIVE1MID0gc2xpZGU7XG4gICAgICB9XG4gICAgICBpZiAocGFyYW1zLmNhY2hlKSB7XG4gICAgICAgIHN3aXBlci52aXJ0dWFsLmNhY2hlW2luZGV4XSA9IHNsaWRlRWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xpZGVFbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlKGZvcmNlLCBiZWZvcmVJbml0KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNsaWRlc1BlclZpZXcsXG4gICAgICAgIHNsaWRlc1Blckdyb3VwLFxuICAgICAgICBjZW50ZXJlZFNsaWRlcyxcbiAgICAgICAgbG9vcDogaXNMb29wLFxuICAgICAgICBpbml0aWFsU2xpZGVcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgICAgaWYgKGJlZm9yZUluaXQgJiYgIWlzTG9vcCAmJiBpbml0aWFsU2xpZGUgPiAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgYWRkU2xpZGVzQmVmb3JlLFxuICAgICAgICBhZGRTbGlkZXNBZnRlclxuICAgICAgfSA9IHN3aXBlci5wYXJhbXMudmlydHVhbDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZnJvbTogcHJldmlvdXNGcm9tLFxuICAgICAgICB0bzogcHJldmlvdXNUbyxcbiAgICAgICAgc2xpZGVzLFxuICAgICAgICBzbGlkZXNHcmlkOiBwcmV2aW91c1NsaWRlc0dyaWQsXG4gICAgICAgIG9mZnNldDogcHJldmlvdXNPZmZzZXRcbiAgICAgIH0gPSBzd2lwZXIudmlydHVhbDtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgfVxuICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXggfHwgMDtcbiAgICAgIGxldCBvZmZzZXRQcm9wO1xuICAgICAgaWYgKHN3aXBlci5ydGxUcmFuc2xhdGUpIG9mZnNldFByb3AgPSAncmlnaHQnO2Vsc2Ugb2Zmc2V0UHJvcCA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/ICdsZWZ0JyA6ICd0b3AnO1xuICAgICAgbGV0IHNsaWRlc0FmdGVyO1xuICAgICAgbGV0IHNsaWRlc0JlZm9yZTtcbiAgICAgIGlmIChjZW50ZXJlZFNsaWRlcykge1xuICAgICAgICBzbGlkZXNBZnRlciA9IE1hdGguZmxvb3Ioc2xpZGVzUGVyVmlldyAvIDIpICsgc2xpZGVzUGVyR3JvdXAgKyBhZGRTbGlkZXNBZnRlcjtcbiAgICAgICAgc2xpZGVzQmVmb3JlID0gTWF0aC5mbG9vcihzbGlkZXNQZXJWaWV3IC8gMikgKyBzbGlkZXNQZXJHcm91cCArIGFkZFNsaWRlc0JlZm9yZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlc0FmdGVyID0gc2xpZGVzUGVyVmlldyArIChzbGlkZXNQZXJHcm91cCAtIDEpICsgYWRkU2xpZGVzQWZ0ZXI7XG4gICAgICAgIHNsaWRlc0JlZm9yZSA9IChpc0xvb3AgPyBzbGlkZXNQZXJWaWV3IDogc2xpZGVzUGVyR3JvdXApICsgYWRkU2xpZGVzQmVmb3JlO1xuICAgICAgfVxuICAgICAgbGV0IGZyb20gPSBhY3RpdmVJbmRleCAtIHNsaWRlc0JlZm9yZTtcbiAgICAgIGxldCB0byA9IGFjdGl2ZUluZGV4ICsgc2xpZGVzQWZ0ZXI7XG4gICAgICBpZiAoIWlzTG9vcCkge1xuICAgICAgICBmcm9tID0gTWF0aC5tYXgoZnJvbSwgMCk7XG4gICAgICAgIHRvID0gTWF0aC5taW4odG8sIHNsaWRlcy5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIGxldCBvZmZzZXQgPSAoc3dpcGVyLnNsaWRlc0dyaWRbZnJvbV0gfHwgMCkgLSAoc3dpcGVyLnNsaWRlc0dyaWRbMF0gfHwgMCk7XG4gICAgICBpZiAoaXNMb29wICYmIGFjdGl2ZUluZGV4ID49IHNsaWRlc0JlZm9yZSkge1xuICAgICAgICBmcm9tIC09IHNsaWRlc0JlZm9yZTtcbiAgICAgICAgaWYgKCFjZW50ZXJlZFNsaWRlcykgb2Zmc2V0ICs9IHN3aXBlci5zbGlkZXNHcmlkWzBdO1xuICAgICAgfSBlbHNlIGlmIChpc0xvb3AgJiYgYWN0aXZlSW5kZXggPCBzbGlkZXNCZWZvcmUpIHtcbiAgICAgICAgZnJvbSA9IC1zbGlkZXNCZWZvcmU7XG4gICAgICAgIGlmIChjZW50ZXJlZFNsaWRlcykgb2Zmc2V0ICs9IHN3aXBlci5zbGlkZXNHcmlkWzBdO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmFzc2lnbihzd2lwZXIudmlydHVhbCwge1xuICAgICAgICBmcm9tLFxuICAgICAgICB0byxcbiAgICAgICAgb2Zmc2V0LFxuICAgICAgICBzbGlkZXNHcmlkOiBzd2lwZXIuc2xpZGVzR3JpZCxcbiAgICAgICAgc2xpZGVzQmVmb3JlLFxuICAgICAgICBzbGlkZXNBZnRlclxuICAgICAgfSk7XG4gICAgICBmdW5jdGlvbiBvblJlbmRlcmVkKCkge1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcygpO1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgICBlbWl0KCd2aXJ0dWFsVXBkYXRlJyk7XG4gICAgICB9XG4gICAgICBpZiAocHJldmlvdXNGcm9tID09PSBmcm9tICYmIHByZXZpb3VzVG8gPT09IHRvICYmICFmb3JjZSkge1xuICAgICAgICBpZiAoc3dpcGVyLnNsaWRlc0dyaWQgIT09IHByZXZpb3VzU2xpZGVzR3JpZCAmJiBvZmZzZXQgIT09IHByZXZpb3VzT2Zmc2V0KSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAgICAgc2xpZGVFbC5zdHlsZVtvZmZzZXRQcm9wXSA9IGAke29mZnNldCAtIE1hdGguYWJzKHN3aXBlci5jc3NPdmVyZmxvd0FkanVzdG1lbnQoKSl9cHhgO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcygpO1xuICAgICAgICBlbWl0KCd2aXJ0dWFsVXBkYXRlJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwucmVuZGVyRXh0ZXJuYWwpIHtcbiAgICAgICAgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLnJlbmRlckV4dGVybmFsLmNhbGwoc3dpcGVyLCB7XG4gICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgIGZyb20sXG4gICAgICAgICAgdG8sXG4gICAgICAgICAgc2xpZGVzOiBmdW5jdGlvbiBnZXRTbGlkZXMoKSB7XG4gICAgICAgICAgICBjb25zdCBzbGlkZXNUb1JlbmRlciA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgPD0gdG87IGkgKz0gMSkge1xuICAgICAgICAgICAgICBzbGlkZXNUb1JlbmRlci5wdXNoKHNsaWRlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2xpZGVzVG9SZW5kZXI7XG4gICAgICAgICAgfSgpXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy52aXJ0dWFsLnJlbmRlckV4dGVybmFsVXBkYXRlKSB7XG4gICAgICAgICAgb25SZW5kZXJlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtaXQoJ3ZpcnR1YWxVcGRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBwcmVwZW5kSW5kZXhlcyA9IFtdO1xuICAgICAgY29uc3QgYXBwZW5kSW5kZXhlcyA9IFtdO1xuICAgICAgY29uc3QgZ2V0U2xpZGVJbmRleCA9IGluZGV4ID0+IHtcbiAgICAgICAgbGV0IHNsaWRlSW5kZXggPSBpbmRleDtcbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgIHNsaWRlSW5kZXggPSBzbGlkZXMubGVuZ3RoICsgaW5kZXg7XG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVJbmRleCA+PSBzbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgc2xpZGVJbmRleCA9IHNsaWRlSW5kZXggLSBzbGlkZXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzbGlkZUluZGV4O1xuICAgICAgfTtcbiAgICAgIGlmIChmb3JjZSkge1xuICAgICAgICBzd2lwZXIuc2xpZGVzLmZpbHRlcihlbCA9PiBlbC5tYXRjaGVzKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKSkuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgICAgICBzbGlkZUVsLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBwcmV2aW91c0Zyb207IGkgPD0gcHJldmlvdXNUbzsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKGkgPCBmcm9tIHx8IGkgPiB0bykge1xuICAgICAgICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IGdldFNsaWRlSW5kZXgoaSk7XG4gICAgICAgICAgICBzd2lwZXIuc2xpZGVzLmZpbHRlcihlbCA9PiBlbC5tYXRjaGVzKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzbGlkZUluZGV4fVwiXSwgc3dpcGVyLXNsaWRlW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzbGlkZUluZGV4fVwiXWApKS5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAgICAgICBzbGlkZUVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBsb29wRnJvbSA9IGlzTG9vcCA/IC1zbGlkZXMubGVuZ3RoIDogMDtcbiAgICAgIGNvbnN0IGxvb3BUbyA9IGlzTG9vcCA/IHNsaWRlcy5sZW5ndGggKiAyIDogc2xpZGVzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSBsb29wRnJvbTsgaSA8IGxvb3BUbzsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpID49IGZyb20gJiYgaSA8PSB0bykge1xuICAgICAgICAgIGNvbnN0IHNsaWRlSW5kZXggPSBnZXRTbGlkZUluZGV4KGkpO1xuICAgICAgICAgIGlmICh0eXBlb2YgcHJldmlvdXNUbyA9PT0gJ3VuZGVmaW5lZCcgfHwgZm9yY2UpIHtcbiAgICAgICAgICAgIGFwcGVuZEluZGV4ZXMucHVzaChzbGlkZUluZGV4KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGkgPiBwcmV2aW91c1RvKSBhcHBlbmRJbmRleGVzLnB1c2goc2xpZGVJbmRleCk7XG4gICAgICAgICAgICBpZiAoaSA8IHByZXZpb3VzRnJvbSkgcHJlcGVuZEluZGV4ZXMucHVzaChzbGlkZUluZGV4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFwcGVuZEluZGV4ZXMuZm9yRWFjaChpbmRleCA9PiB7XG4gICAgICAgIHN3aXBlci5zbGlkZXNFbC5hcHBlbmQocmVuZGVyU2xpZGUoc2xpZGVzW2luZGV4XSwgaW5kZXgpKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGlzTG9vcCkge1xuICAgICAgICBmb3IgKGxldCBpID0gcHJlcGVuZEluZGV4ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHByZXBlbmRJbmRleGVzW2ldO1xuICAgICAgICAgIHN3aXBlci5zbGlkZXNFbC5wcmVwZW5kKHJlbmRlclNsaWRlKHNsaWRlc1tpbmRleF0sIGluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXBlbmRJbmRleGVzLnNvcnQoKGEsIGIpID0+IGIgLSBhKTtcbiAgICAgICAgcHJlcGVuZEluZGV4ZXMuZm9yRWFjaChpbmRleCA9PiB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlc0VsLnByZXBlbmQocmVuZGVyU2xpZGUoc2xpZGVzW2luZGV4XSwgaW5kZXgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbGVtZW50Q2hpbGRyZW4oc3dpcGVyLnNsaWRlc0VsLCAnLnN3aXBlci1zbGlkZSwgc3dpcGVyLXNsaWRlJykuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgICAgc2xpZGVFbC5zdHlsZVtvZmZzZXRQcm9wXSA9IGAke29mZnNldCAtIE1hdGguYWJzKHN3aXBlci5jc3NPdmVyZmxvd0FkanVzdG1lbnQoKSl9cHhgO1xuICAgICAgfSk7XG4gICAgICBvblJlbmRlcmVkKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFwcGVuZFNsaWRlKHNsaWRlcykge1xuICAgICAgaWYgKHR5cGVvZiBzbGlkZXMgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIHNsaWRlcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChzbGlkZXNbaV0pIHN3aXBlci52aXJ0dWFsLnNsaWRlcy5wdXNoKHNsaWRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcy5wdXNoKHNsaWRlcyk7XG4gICAgICB9XG4gICAgICB1cGRhdGUodHJ1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZXBlbmRTbGlkZShzbGlkZXMpIHtcbiAgICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gc3dpcGVyLmFjdGl2ZUluZGV4O1xuICAgICAgbGV0IG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXggKyAxO1xuICAgICAgbGV0IG51bWJlck9mTmV3U2xpZGVzID0gMTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNsaWRlcykpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoc2xpZGVzW2ldKSBzd2lwZXIudmlydHVhbC5zbGlkZXMudW5zaGlmdChzbGlkZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXggKyBzbGlkZXMubGVuZ3RoO1xuICAgICAgICBudW1iZXJPZk5ld1NsaWRlcyA9IHNsaWRlcy5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIudmlydHVhbC5zbGlkZXMudW5zaGlmdChzbGlkZXMpO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbC5jYWNoZSkge1xuICAgICAgICBjb25zdCBjYWNoZSA9IHN3aXBlci52aXJ0dWFsLmNhY2hlO1xuICAgICAgICBjb25zdCBuZXdDYWNoZSA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhjYWNoZSkuZm9yRWFjaChjYWNoZWRJbmRleCA9PiB7XG4gICAgICAgICAgY29uc3QgY2FjaGVkRWwgPSBjYWNoZVtjYWNoZWRJbmRleF07XG4gICAgICAgICAgY29uc3QgY2FjaGVkRWxJbmRleCA9IGNhY2hlZEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKTtcbiAgICAgICAgICBpZiAoY2FjaGVkRWxJbmRleCkge1xuICAgICAgICAgICAgY2FjaGVkRWwuc2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIHBhcnNlSW50KGNhY2hlZEVsSW5kZXgsIDEwKSArIG51bWJlck9mTmV3U2xpZGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3Q2FjaGVbcGFyc2VJbnQoY2FjaGVkSW5kZXgsIDEwKSArIG51bWJlck9mTmV3U2xpZGVzXSA9IGNhY2hlZEVsO1xuICAgICAgICB9KTtcbiAgICAgICAgc3dpcGVyLnZpcnR1YWwuY2FjaGUgPSBuZXdDYWNoZTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZSh0cnVlKTtcbiAgICAgIHN3aXBlci5zbGlkZVRvKG5ld0FjdGl2ZUluZGV4LCAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlU2xpZGUoc2xpZGVzSW5kZXhlcykge1xuICAgICAgaWYgKHR5cGVvZiBzbGlkZXNJbmRleGVzID09PSAndW5kZWZpbmVkJyB8fCBzbGlkZXNJbmRleGVzID09PSBudWxsKSByZXR1cm47XG4gICAgICBsZXQgYWN0aXZlSW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzbGlkZXNJbmRleGVzKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gc2xpZGVzSW5kZXhlcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwuY2FjaGUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzd2lwZXIudmlydHVhbC5jYWNoZVtzbGlkZXNJbmRleGVzW2ldXTtcbiAgICAgICAgICAgIC8vIHNoaWZ0IGNhY2hlIGluZGV4ZXNcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN3aXBlci52aXJ0dWFsLmNhY2hlKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgIGlmIChrZXkgPiBzbGlkZXNJbmRleGVzKSB7XG4gICAgICAgICAgICAgICAgc3dpcGVyLnZpcnR1YWwuY2FjaGVba2V5IC0gMV0gPSBzd2lwZXIudmlydHVhbC5jYWNoZVtrZXldO1xuICAgICAgICAgICAgICAgIHN3aXBlci52aXJ0dWFsLmNhY2hlW2tleSAtIDFdLnNldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnLCBrZXkgLSAxKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgc3dpcGVyLnZpcnR1YWwuY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcy5zcGxpY2Uoc2xpZGVzSW5kZXhlc1tpXSwgMSk7XG4gICAgICAgICAgaWYgKHNsaWRlc0luZGV4ZXNbaV0gPCBhY3RpdmVJbmRleCkgYWN0aXZlSW5kZXggLT0gMTtcbiAgICAgICAgICBhY3RpdmVJbmRleCA9IE1hdGgubWF4KGFjdGl2ZUluZGV4LCAwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbC5jYWNoZSkge1xuICAgICAgICAgIGRlbGV0ZSBzd2lwZXIudmlydHVhbC5jYWNoZVtzbGlkZXNJbmRleGVzXTtcbiAgICAgICAgICAvLyBzaGlmdCBjYWNoZSBpbmRleGVzXG4gICAgICAgICAgT2JqZWN0LmtleXMoc3dpcGVyLnZpcnR1YWwuY2FjaGUpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPiBzbGlkZXNJbmRleGVzKSB7XG4gICAgICAgICAgICAgIHN3aXBlci52aXJ0dWFsLmNhY2hlW2tleSAtIDFdID0gc3dpcGVyLnZpcnR1YWwuY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgc3dpcGVyLnZpcnR1YWwuY2FjaGVba2V5IC0gMV0uc2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIGtleSAtIDEpO1xuICAgICAgICAgICAgICBkZWxldGUgc3dpcGVyLnZpcnR1YWwuY2FjaGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzd2lwZXIudmlydHVhbC5zbGlkZXMuc3BsaWNlKHNsaWRlc0luZGV4ZXMsIDEpO1xuICAgICAgICBpZiAoc2xpZGVzSW5kZXhlcyA8IGFjdGl2ZUluZGV4KSBhY3RpdmVJbmRleCAtPSAxO1xuICAgICAgICBhY3RpdmVJbmRleCA9IE1hdGgubWF4KGFjdGl2ZUluZGV4LCAwKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZSh0cnVlKTtcbiAgICAgIHN3aXBlci5zbGlkZVRvKGFjdGl2ZUluZGV4LCAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlQWxsU2xpZGVzKCkge1xuICAgICAgc3dpcGVyLnZpcnR1YWwuc2xpZGVzID0gW107XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmNhY2hlKSB7XG4gICAgICAgIHN3aXBlci52aXJ0dWFsLmNhY2hlID0ge307XG4gICAgICB9XG4gICAgICB1cGRhdGUodHJ1ZSk7XG4gICAgICBzd2lwZXIuc2xpZGVUbygwLCAwKTtcbiAgICB9XG4gICAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG4gICAgICBsZXQgZG9tU2xpZGVzQXNzaWduZWQ7XG4gICAgICBpZiAodHlwZW9mIHN3aXBlci5wYXNzZWRQYXJhbXMudmlydHVhbC5zbGlkZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlcyA9IFsuLi5zd2lwZXIuc2xpZGVzRWwuY2hpbGRyZW5dLmZpbHRlcihlbCA9PiBlbC5tYXRjaGVzKGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKSk7XG4gICAgICAgIGlmIChzbGlkZXMgJiYgc2xpZGVzLmxlbmd0aCkge1xuICAgICAgICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcyA9IFsuLi5zbGlkZXNdO1xuICAgICAgICAgIGRvbVNsaWRlc0Fzc2lnbmVkID0gdHJ1ZTtcbiAgICAgICAgICBzbGlkZXMuZm9yRWFjaCgoc2xpZGVFbCwgc2xpZGVJbmRleCkgPT4ge1xuICAgICAgICAgICAgc2xpZGVFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4Jywgc2xpZGVJbmRleCk7XG4gICAgICAgICAgICBzd2lwZXIudmlydHVhbC5jYWNoZVtzbGlkZUluZGV4XSA9IHNsaWRlRWw7XG4gICAgICAgICAgICBzbGlkZUVsLnJlbW92ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWRvbVNsaWRlc0Fzc2lnbmVkKSB7XG4gICAgICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcyA9IHN3aXBlci5wYXJhbXMudmlydHVhbC5zbGlkZXM7XG4gICAgICB9XG4gICAgICBzd2lwZXIuY2xhc3NOYW1lcy5wdXNoKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc312aXJ0dWFsYCk7XG4gICAgICBzd2lwZXIucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgc3dpcGVyLm9yaWdpbmFsUGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgdXBkYXRlKGZhbHNlLCB0cnVlKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNsYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSAmJiAhc3dpcGVyLl9pbW1lZGlhdGVWaXJ0dWFsKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChjc3NNb2RlVGltZW91dCk7XG4gICAgICAgIGNzc01vZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignaW5pdCB1cGRhdGUgcmVzaXplJywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzZXRDU1NQcm9wZXJ0eShzd2lwZXIud3JhcHBlckVsLCAnLS1zd2lwZXItdmlydHVhbC1zaXplJywgYCR7c3dpcGVyLnZpcnR1YWxTaXplfXB4YCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIudmlydHVhbCwge1xuICAgICAgYXBwZW5kU2xpZGUsXG4gICAgICBwcmVwZW5kU2xpZGUsXG4gICAgICByZW1vdmVTbGlkZSxcbiAgICAgIHJlbW92ZUFsbFNsaWRlcyxcbiAgICAgIHVwZGF0ZVxuICAgIH0pO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbiAgZnVuY3Rpb24gS2V5Ym9hcmQoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvbixcbiAgICAgIGVtaXRcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgc3dpcGVyLmtleWJvYXJkID0ge1xuICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICB9O1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBrZXlib2FyZDoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgb25seUluVmlld3BvcnQ6IHRydWUsXG4gICAgICAgIHBhZ2VVcERvd246IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiBoYW5kbGUoZXZlbnQpIHtcbiAgICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcnRsVHJhbnNsYXRlOiBydGxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBsZXQgZSA9IGV2ZW50O1xuICAgICAgaWYgKGUub3JpZ2luYWxFdmVudCkgZSA9IGUub3JpZ2luYWxFdmVudDsgLy8ganF1ZXJ5IGZpeFxuICAgICAgY29uc3Qga2MgPSBlLmtleUNvZGUgfHwgZS5jaGFyQ29kZTtcbiAgICAgIGNvbnN0IHBhZ2VVcERvd24gPSBzd2lwZXIucGFyYW1zLmtleWJvYXJkLnBhZ2VVcERvd247XG4gICAgICBjb25zdCBpc1BhZ2VVcCA9IHBhZ2VVcERvd24gJiYga2MgPT09IDMzO1xuICAgICAgY29uc3QgaXNQYWdlRG93biA9IHBhZ2VVcERvd24gJiYga2MgPT09IDM0O1xuICAgICAgY29uc3QgaXNBcnJvd0xlZnQgPSBrYyA9PT0gMzc7XG4gICAgICBjb25zdCBpc0Fycm93UmlnaHQgPSBrYyA9PT0gMzk7XG4gICAgICBjb25zdCBpc0Fycm93VXAgPSBrYyA9PT0gMzg7XG4gICAgICBjb25zdCBpc0Fycm93RG93biA9IGtjID09PSA0MDtcbiAgICAgIC8vIERpcmVjdGlvbnMgbG9ja3NcbiAgICAgIGlmICghc3dpcGVyLmFsbG93U2xpZGVOZXh0ICYmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkgJiYgaXNBcnJvd1JpZ2h0IHx8IHN3aXBlci5pc1ZlcnRpY2FsKCkgJiYgaXNBcnJvd0Rvd24gfHwgaXNQYWdlRG93bikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZVByZXYgJiYgKHN3aXBlci5pc0hvcml6b250YWwoKSAmJiBpc0Fycm93TGVmdCB8fCBzd2lwZXIuaXNWZXJ0aWNhbCgpICYmIGlzQXJyb3dVcCB8fCBpc1BhZ2VVcCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGUuc2hpZnRLZXkgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZSAmJiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnIHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RleHRhcmVhJykpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmtleWJvYXJkLm9ubHlJblZpZXdwb3J0ICYmIChpc1BhZ2VVcCB8fCBpc1BhZ2VEb3duIHx8IGlzQXJyb3dMZWZ0IHx8IGlzQXJyb3dSaWdodCB8fCBpc0Fycm93VXAgfHwgaXNBcnJvd0Rvd24pKSB7XG4gICAgICAgIGxldCBpblZpZXcgPSBmYWxzZTtcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBzd2lwZXIgc2hvdWxkIGJlIGluc2lkZSBvZiB2aXNpYmxlIGFyZWEgb2Ygd2luZG93XG4gICAgICAgIGlmIChlbGVtZW50UGFyZW50cyhzd2lwZXIuZWwsIGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKS5sZW5ndGggPiAwICYmIGVsZW1lbnRQYXJlbnRzKHN3aXBlci5lbCwgYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVBY3RpdmVDbGFzc31gKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsID0gc3dpcGVyLmVsO1xuICAgICAgICBjb25zdCBzd2lwZXJXaWR0aCA9IGVsLmNsaWVudFdpZHRoO1xuICAgICAgICBjb25zdCBzd2lwZXJIZWlnaHQgPSBlbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGNvbnN0IHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgY29uc3Qgc3dpcGVyT2Zmc2V0ID0gZWxlbWVudE9mZnNldChlbCk7XG4gICAgICAgIGlmIChydGwpIHN3aXBlck9mZnNldC5sZWZ0IC09IGVsLnNjcm9sbExlZnQ7XG4gICAgICAgIGNvbnN0IHN3aXBlckNvb3JkID0gW1tzd2lwZXJPZmZzZXQubGVmdCwgc3dpcGVyT2Zmc2V0LnRvcF0sIFtzd2lwZXJPZmZzZXQubGVmdCArIHN3aXBlcldpZHRoLCBzd2lwZXJPZmZzZXQudG9wXSwgW3N3aXBlck9mZnNldC5sZWZ0LCBzd2lwZXJPZmZzZXQudG9wICsgc3dpcGVySGVpZ2h0XSwgW3N3aXBlck9mZnNldC5sZWZ0ICsgc3dpcGVyV2lkdGgsIHN3aXBlck9mZnNldC50b3AgKyBzd2lwZXJIZWlnaHRdXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2lwZXJDb29yZC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IHBvaW50ID0gc3dpcGVyQ29vcmRbaV07XG4gICAgICAgICAgaWYgKHBvaW50WzBdID49IDAgJiYgcG9pbnRbMF0gPD0gd2luZG93V2lkdGggJiYgcG9pbnRbMV0gPj0gMCAmJiBwb2ludFsxXSA8PSB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgIGlmIChwb2ludFswXSA9PT0gMCAmJiBwb2ludFsxXSA9PT0gMCkgY29udGludWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgIGluVmlldyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW5WaWV3KSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICBpZiAoaXNQYWdlVXAgfHwgaXNQYWdlRG93biB8fCBpc0Fycm93TGVmdCB8fCBpc0Fycm93UmlnaHQpIHtcbiAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaXNQYWdlRG93biB8fCBpc0Fycm93UmlnaHQpICYmICFydGwgfHwgKGlzUGFnZVVwIHx8IGlzQXJyb3dMZWZ0KSAmJiBydGwpIHN3aXBlci5zbGlkZU5leHQoKTtcbiAgICAgICAgaWYgKChpc1BhZ2VVcCB8fCBpc0Fycm93TGVmdCkgJiYgIXJ0bCB8fCAoaXNQYWdlRG93biB8fCBpc0Fycm93UmlnaHQpICYmIHJ0bCkgc3dpcGVyLnNsaWRlUHJldigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzUGFnZVVwIHx8IGlzUGFnZURvd24gfHwgaXNBcnJvd1VwIHx8IGlzQXJyb3dEb3duKSB7XG4gICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtlbHNlIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQYWdlRG93biB8fCBpc0Fycm93RG93bikgc3dpcGVyLnNsaWRlTmV4dCgpO1xuICAgICAgICBpZiAoaXNQYWdlVXAgfHwgaXNBcnJvd1VwKSBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgICB9XG4gICAgICBlbWl0KCdrZXlQcmVzcycsIGtjKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIGlmIChzd2lwZXIua2V5Ym9hcmQuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZSk7XG4gICAgICBzd2lwZXIua2V5Ym9hcmQuZW5hYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICBpZiAoIXN3aXBlci5rZXlib2FyZC5lbmFibGVkKSByZXR1cm47XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlKTtcbiAgICAgIHN3aXBlci5rZXlib2FyZC5lbmFibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIG9uKCdpbml0JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMua2V5Ym9hcmQuZW5hYmxlZCkge1xuICAgICAgICBlbmFibGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIua2V5Ym9hcmQuZW5hYmxlZCkge1xuICAgICAgICBkaXNhYmxlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIua2V5Ym9hcmQsIHtcbiAgICAgIGVuYWJsZSxcbiAgICAgIGRpc2FibGVcbiAgICB9KTtcbiAgfVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtcmV0dXJuICovXG4gIGZ1bmN0aW9uIE1vdXNld2hlZWwoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvbixcbiAgICAgIGVtaXRcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgbW91c2V3aGVlbDoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgcmVsZWFzZU9uRWRnZXM6IGZhbHNlLFxuICAgICAgICBpbnZlcnQ6IGZhbHNlLFxuICAgICAgICBmb3JjZVRvQXhpczogZmFsc2UsXG4gICAgICAgIHNlbnNpdGl2aXR5OiAxLFxuICAgICAgICBldmVudHNUYXJnZXQ6ICdjb250YWluZXInLFxuICAgICAgICB0aHJlc2hvbGREZWx0YTogbnVsbCxcbiAgICAgICAgdGhyZXNob2xkVGltZTogbnVsbCxcbiAgICAgICAgbm9Nb3VzZXdoZWVsQ2xhc3M6ICdzd2lwZXItbm8tbW91c2V3aGVlbCdcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzd2lwZXIubW91c2V3aGVlbCA9IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgfTtcbiAgICBsZXQgdGltZW91dDtcbiAgICBsZXQgbGFzdFNjcm9sbFRpbWUgPSBub3coKTtcbiAgICBsZXQgbGFzdEV2ZW50QmVmb3JlU25hcDtcbiAgICBjb25zdCByZWNlbnRXaGVlbEV2ZW50cyA9IFtdO1xuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZShlKSB7XG4gICAgICAvLyBSZWFzb25hYmxlIGRlZmF1bHRzXG4gICAgICBjb25zdCBQSVhFTF9TVEVQID0gMTA7XG4gICAgICBjb25zdCBMSU5FX0hFSUdIVCA9IDQwO1xuICAgICAgY29uc3QgUEFHRV9IRUlHSFQgPSA4MDA7XG4gICAgICBsZXQgc1ggPSAwO1xuICAgICAgbGV0IHNZID0gMDsgLy8gc3BpblgsIHNwaW5ZXG4gICAgICBsZXQgcFggPSAwO1xuICAgICAgbGV0IHBZID0gMDsgLy8gcGl4ZWxYLCBwaXhlbFlcblxuICAgICAgLy8gTGVnYWN5XG4gICAgICBpZiAoJ2RldGFpbCcgaW4gZSkge1xuICAgICAgICBzWSA9IGUuZGV0YWlsO1xuICAgICAgfVxuICAgICAgaWYgKCd3aGVlbERlbHRhJyBpbiBlKSB7XG4gICAgICAgIHNZID0gLWUud2hlZWxEZWx0YSAvIDEyMDtcbiAgICAgIH1cbiAgICAgIGlmICgnd2hlZWxEZWx0YVknIGluIGUpIHtcbiAgICAgICAgc1kgPSAtZS53aGVlbERlbHRhWSAvIDEyMDtcbiAgICAgIH1cbiAgICAgIGlmICgnd2hlZWxEZWx0YVgnIGluIGUpIHtcbiAgICAgICAgc1ggPSAtZS53aGVlbERlbHRhWCAvIDEyMDtcbiAgICAgIH1cblxuICAgICAgLy8gc2lkZSBzY3JvbGxpbmcgb24gRkYgd2l0aCBET01Nb3VzZVNjcm9sbFxuICAgICAgaWYgKCdheGlzJyBpbiBlICYmIGUuYXhpcyA9PT0gZS5IT1JJWk9OVEFMX0FYSVMpIHtcbiAgICAgICAgc1ggPSBzWTtcbiAgICAgICAgc1kgPSAwO1xuICAgICAgfVxuICAgICAgcFggPSBzWCAqIFBJWEVMX1NURVA7XG4gICAgICBwWSA9IHNZICogUElYRUxfU1RFUDtcbiAgICAgIGlmICgnZGVsdGFZJyBpbiBlKSB7XG4gICAgICAgIHBZID0gZS5kZWx0YVk7XG4gICAgICB9XG4gICAgICBpZiAoJ2RlbHRhWCcgaW4gZSkge1xuICAgICAgICBwWCA9IGUuZGVsdGFYO1xuICAgICAgfVxuICAgICAgaWYgKGUuc2hpZnRLZXkgJiYgIXBYKSB7XG4gICAgICAgIC8vIGlmIHVzZXIgc2Nyb2xscyB3aXRoIHNoaWZ0IGhlIHdhbnRzIGhvcml6b250YWwgc2Nyb2xsXG4gICAgICAgIHBYID0gcFk7XG4gICAgICAgIHBZID0gMDtcbiAgICAgIH1cbiAgICAgIGlmICgocFggfHwgcFkpICYmIGUuZGVsdGFNb2RlKSB7XG4gICAgICAgIGlmIChlLmRlbHRhTW9kZSA9PT0gMSkge1xuICAgICAgICAgIC8vIGRlbHRhIGluIExJTkUgdW5pdHNcbiAgICAgICAgICBwWCAqPSBMSU5FX0hFSUdIVDtcbiAgICAgICAgICBwWSAqPSBMSU5FX0hFSUdIVDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBkZWx0YSBpbiBQQUdFIHVuaXRzXG4gICAgICAgICAgcFggKj0gUEFHRV9IRUlHSFQ7XG4gICAgICAgICAgcFkgKj0gUEFHRV9IRUlHSFQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmFsbC1iYWNrIGlmIHNwaW4gY2Fubm90IGJlIGRldGVybWluZWRcbiAgICAgIGlmIChwWCAmJiAhc1gpIHtcbiAgICAgICAgc1ggPSBwWCA8IDEgPyAtMSA6IDE7XG4gICAgICB9XG4gICAgICBpZiAocFkgJiYgIXNZKSB7XG4gICAgICAgIHNZID0gcFkgPCAxID8gLTEgOiAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3Bpblg6IHNYLFxuICAgICAgICBzcGluWTogc1ksXG4gICAgICAgIHBpeGVsWDogcFgsXG4gICAgICAgIHBpeGVsWTogcFlcbiAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG4gICAgICBzd2lwZXIubW91c2VFbnRlcmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlTW91c2VMZWF2ZSgpIHtcbiAgICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHN3aXBlci5tb3VzZUVudGVyZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYW5pbWF0ZVNsaWRlcihuZXdFdmVudCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC50aHJlc2hvbGREZWx0YSAmJiBuZXdFdmVudC5kZWx0YSA8IHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC50aHJlc2hvbGREZWx0YSkge1xuICAgICAgICAvLyBQcmV2ZW50IGlmIGRlbHRhIG9mIHdoZWVsIHNjcm9sbCBkZWx0YSBpcyBiZWxvdyBjb25maWd1cmVkIHRocmVzaG9sZFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLnRocmVzaG9sZFRpbWUgJiYgbm93KCkgLSBsYXN0U2Nyb2xsVGltZSA8IHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC50aHJlc2hvbGRUaW1lKSB7XG4gICAgICAgIC8vIFByZXZlbnQgaWYgdGltZSBiZXR3ZWVuIHNjcm9sbHMgaXMgYmVsb3cgY29uZmlndXJlZCB0aHJlc2hvbGRcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgbW92ZW1lbnQgaXMgTk9UIGJpZyBlbm91Z2ggYW5kXG4gICAgICAvLyBpZiB0aGUgbGFzdCB0aW1lIHRoZSB1c2VyIHNjcm9sbGVkIHdhcyB0b28gY2xvc2UgdG8gdGhlIGN1cnJlbnQgb25lIChhdm9pZCBjb250aW51b3VzbHkgdHJpZ2dlcmluZyB0aGUgc2xpZGVyKTpcbiAgICAgIC8vICAgRG9uJ3QgZ28gYW55IGZ1cnRoZXIgKGF2b2lkIGluc2lnbmlmaWNhbnQgc2Nyb2xsIG1vdmVtZW50KS5cbiAgICAgIGlmIChuZXdFdmVudC5kZWx0YSA+PSA2ICYmIG5vdygpIC0gbGFzdFNjcm9sbFRpbWUgPCA2MCkge1xuICAgICAgICAvLyBSZXR1cm4gZmFsc2UgYXMgYSBkZWZhdWx0XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gSWYgdXNlciBpcyBzY3JvbGxpbmcgdG93YXJkcyB0aGUgZW5kOlxuICAgICAgLy8gICBJZiB0aGUgc2xpZGVyIGhhc24ndCBoaXQgdGhlIGxhdGVzdCBzbGlkZSBvclxuICAgICAgLy8gICBpZiB0aGUgc2xpZGVyIGlzIGEgbG9vcCBhbmRcbiAgICAgIC8vICAgaWYgdGhlIHNsaWRlciBpc24ndCBtb3ZpbmcgcmlnaHQgbm93OlxuICAgICAgLy8gICAgIEdvIHRvIG5leHQgc2xpZGUgYW5kXG4gICAgICAvLyAgICAgZW1pdCBhIHNjcm9sbCBldmVudC5cbiAgICAgIC8vIEVsc2UgKHRoZSB1c2VyIGlzIHNjcm9sbGluZyB0b3dhcmRzIHRoZSBiZWdpbm5pbmcpIGFuZFxuICAgICAgLy8gaWYgdGhlIHNsaWRlciBoYXNuJ3QgaGl0IHRoZSBmaXJzdCBzbGlkZSBvclxuICAgICAgLy8gaWYgdGhlIHNsaWRlciBpcyBhIGxvb3AgYW5kXG4gICAgICAvLyBpZiB0aGUgc2xpZGVyIGlzbid0IG1vdmluZyByaWdodCBub3c6XG4gICAgICAvLyAgIEdvIHRvIHByZXYgc2xpZGUgYW5kXG4gICAgICAvLyAgIGVtaXQgYSBzY3JvbGwgZXZlbnQuXG4gICAgICBpZiAobmV3RXZlbnQuZGlyZWN0aW9uIDwgMCkge1xuICAgICAgICBpZiAoKCFzd2lwZXIuaXNFbmQgfHwgc3dpcGVyLnBhcmFtcy5sb29wKSAmJiAhc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgICAgIHN3aXBlci5zbGlkZU5leHQoKTtcbiAgICAgICAgICBlbWl0KCdzY3JvbGwnLCBuZXdFdmVudC5yYXcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCghc3dpcGVyLmlzQmVnaW5uaW5nIHx8IHN3aXBlci5wYXJhbXMubG9vcCkgJiYgIXN3aXBlci5hbmltYXRpbmcpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlUHJldigpO1xuICAgICAgICBlbWl0KCdzY3JvbGwnLCBuZXdFdmVudC5yYXcpO1xuICAgICAgfVxuICAgICAgLy8gSWYgeW91IGdvdCBoZXJlIGlzIGJlY2F1c2UgYW4gYW5pbWF0aW9uIGhhcyBiZWVuIHRyaWdnZXJlZCBzbyBzdG9yZSB0aGUgY3VycmVudCB0aW1lXG4gICAgICBsYXN0U2Nyb2xsVGltZSA9IG5ldyB3aW5kb3cuRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIC8vIFJldHVybiBmYWxzZSBhcyBhIGRlZmF1bHRcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVsZWFzZVNjcm9sbChuZXdFdmVudCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsO1xuICAgICAgaWYgKG5ld0V2ZW50LmRpcmVjdGlvbiA8IDApIHtcbiAgICAgICAgaWYgKHN3aXBlci5pc0VuZCAmJiAhc3dpcGVyLnBhcmFtcy5sb29wICYmIHBhcmFtcy5yZWxlYXNlT25FZGdlcykge1xuICAgICAgICAgIC8vIFJldHVybiB0cnVlIHRvIGFuaW1hdGUgc2Nyb2xsIG9uIGVkZ2VzXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3dpcGVyLmlzQmVnaW5uaW5nICYmICFzd2lwZXIucGFyYW1zLmxvb3AgJiYgcGFyYW1zLnJlbGVhc2VPbkVkZ2VzKSB7XG4gICAgICAgIC8vIFJldHVybiB0cnVlIHRvIGFuaW1hdGUgc2Nyb2xsIG9uIGVkZ2VzXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGUoZXZlbnQpIHtcbiAgICAgIGxldCBlID0gZXZlbnQ7XG4gICAgICBsZXQgZGlzYWJsZVBhcmVudFN3aXBlciA9IHRydWU7XG4gICAgICBpZiAoIXN3aXBlci5lbmFibGVkKSByZXR1cm47XG5cbiAgICAgIC8vIElnbm9yZSBldmVudCBpZiB0aGUgdGFyZ2V0IG9yIGl0cyBwYXJlbnRzIGhhdmUgdGhlIHN3aXBlci1uby1tb3VzZXdoZWVsIGNsYXNzXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoYC4ke3N3aXBlci5wYXJhbXMubW91c2V3aGVlbC5ub01vdXNld2hlZWxDbGFzc31gKSkgcmV0dXJuO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICBsZXQgdGFyZ2V0RWwgPSBzd2lwZXIuZWw7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCAhPT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgdGFyZ2V0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQpO1xuICAgICAgfVxuICAgICAgY29uc3QgdGFyZ2V0RWxDb250YWluc1RhcmdldCA9IHRhcmdldEVsICYmIHRhcmdldEVsLmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgIGlmICghc3dpcGVyLm1vdXNlRW50ZXJlZCAmJiAhdGFyZ2V0RWxDb250YWluc1RhcmdldCAmJiAhcGFyYW1zLnJlbGVhc2VPbkVkZ2VzKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChlLm9yaWdpbmFsRXZlbnQpIGUgPSBlLm9yaWdpbmFsRXZlbnQ7IC8vIGpxdWVyeSBmaXhcbiAgICAgIGxldCBkZWx0YSA9IDA7XG4gICAgICBjb25zdCBydGxGYWN0b3IgPSBzd2lwZXIucnRsVHJhbnNsYXRlID8gLTEgOiAxO1xuICAgICAgY29uc3QgZGF0YSA9IG5vcm1hbGl6ZShlKTtcbiAgICAgIGlmIChwYXJhbXMuZm9yY2VUb0F4aXMpIHtcbiAgICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgIGlmIChNYXRoLmFicyhkYXRhLnBpeGVsWCkgPiBNYXRoLmFicyhkYXRhLnBpeGVsWSkpIGRlbHRhID0gLWRhdGEucGl4ZWxYICogcnRsRmFjdG9yO2Vsc2UgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoZGF0YS5waXhlbFkpID4gTWF0aC5hYnMoZGF0YS5waXhlbFgpKSBkZWx0YSA9IC1kYXRhLnBpeGVsWTtlbHNlIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsdGEgPSBNYXRoLmFicyhkYXRhLnBpeGVsWCkgPiBNYXRoLmFicyhkYXRhLnBpeGVsWSkgPyAtZGF0YS5waXhlbFggKiBydGxGYWN0b3IgOiAtZGF0YS5waXhlbFk7XG4gICAgICB9XG4gICAgICBpZiAoZGVsdGEgPT09IDApIHJldHVybiB0cnVlO1xuICAgICAgaWYgKHBhcmFtcy5pbnZlcnQpIGRlbHRhID0gLWRlbHRhO1xuXG4gICAgICAvLyBHZXQgdGhlIHNjcm9sbCBwb3NpdGlvbnNcbiAgICAgIGxldCBwb3NpdGlvbnMgPSBzd2lwZXIuZ2V0VHJhbnNsYXRlKCkgKyBkZWx0YSAqIHBhcmFtcy5zZW5zaXRpdml0eTtcbiAgICAgIGlmIChwb3NpdGlvbnMgPj0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSBwb3NpdGlvbnMgPSBzd2lwZXIubWluVHJhbnNsYXRlKCk7XG4gICAgICBpZiAocG9zaXRpb25zIDw9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkgcG9zaXRpb25zID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpO1xuXG4gICAgICAvLyBXaGVuIGxvb3AgaXMgdHJ1ZTpcbiAgICAgIC8vICAgICB0aGUgZGlzYWJsZVBhcmVudFN3aXBlciB3aWxsIGJlIHRydWUuXG4gICAgICAvLyBXaGVuIGxvb3AgaXMgZmFsc2U6XG4gICAgICAvLyAgICAgaWYgdGhlIHNjcm9sbCBwb3NpdGlvbnMgaXMgbm90IG9uIGVkZ2UsXG4gICAgICAvLyAgICAgdGhlbiB0aGUgZGlzYWJsZVBhcmVudFN3aXBlciB3aWxsIGJlIHRydWUuXG4gICAgICAvLyAgICAgaWYgdGhlIHNjcm9sbCBvbiBlZGdlIHBvc2l0aW9ucyxcbiAgICAgIC8vICAgICB0aGVuIHRoZSBkaXNhYmxlUGFyZW50U3dpcGVyIHdpbGwgYmUgZmFsc2UuXG4gICAgICBkaXNhYmxlUGFyZW50U3dpcGVyID0gc3dpcGVyLnBhcmFtcy5sb29wID8gdHJ1ZSA6ICEocG9zaXRpb25zID09PSBzd2lwZXIubWluVHJhbnNsYXRlKCkgfHwgcG9zaXRpb25zID09PSBzd2lwZXIubWF4VHJhbnNsYXRlKCkpO1xuICAgICAgaWYgKGRpc2FibGVQYXJlbnRTd2lwZXIgJiYgc3dpcGVyLnBhcmFtcy5uZXN0ZWQpIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuZnJlZU1vZGUgfHwgIXN3aXBlci5wYXJhbXMuZnJlZU1vZGUuZW5hYmxlZCkge1xuICAgICAgICAvLyBSZWdpc3RlciB0aGUgbmV3IGV2ZW50IGluIGEgdmFyaWFibGUgd2hpY2ggc3RvcmVzIHRoZSByZWxldmFudCBkYXRhXG4gICAgICAgIGNvbnN0IG5ld0V2ZW50ID0ge1xuICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgIGRlbHRhOiBNYXRoLmFicyhkZWx0YSksXG4gICAgICAgICAgZGlyZWN0aW9uOiBNYXRoLnNpZ24oZGVsdGEpLFxuICAgICAgICAgIHJhdzogZXZlbnRcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBLZWVwIHRoZSBtb3N0IHJlY2VudCBldmVudHNcbiAgICAgICAgaWYgKHJlY2VudFdoZWVsRXZlbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgcmVjZW50V2hlZWxFdmVudHMuc2hpZnQoKTsgLy8gb25seSBzdG9yZSB0aGUgbGFzdCBOIGV2ZW50c1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJldkV2ZW50ID0gcmVjZW50V2hlZWxFdmVudHMubGVuZ3RoID8gcmVjZW50V2hlZWxFdmVudHNbcmVjZW50V2hlZWxFdmVudHMubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgICAgIHJlY2VudFdoZWVsRXZlbnRzLnB1c2gobmV3RXZlbnQpO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBwcmV2aW91cyByZWNvcmRlZCBldmVudDpcbiAgICAgICAgLy8gICBJZiBkaXJlY3Rpb24gaGFzIGNoYW5nZWQgb3JcbiAgICAgICAgLy8gICBpZiB0aGUgc2Nyb2xsIGlzIHF1aWNrZXIgdGhhbiB0aGUgcHJldmlvdXMgb25lOlxuICAgICAgICAvLyAgICAgQW5pbWF0ZSB0aGUgc2xpZGVyLlxuICAgICAgICAvLyBFbHNlICh0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoZSB3aGVlbCBpcyBtb3ZlZCk6XG4gICAgICAgIC8vICAgICBBbmltYXRlIHRoZSBzbGlkZXIuXG4gICAgICAgIGlmIChwcmV2RXZlbnQpIHtcbiAgICAgICAgICBpZiAobmV3RXZlbnQuZGlyZWN0aW9uICE9PSBwcmV2RXZlbnQuZGlyZWN0aW9uIHx8IG5ld0V2ZW50LmRlbHRhID4gcHJldkV2ZW50LmRlbHRhIHx8IG5ld0V2ZW50LnRpbWUgPiBwcmV2RXZlbnQudGltZSArIDE1MCkge1xuICAgICAgICAgICAgYW5pbWF0ZVNsaWRlcihuZXdFdmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFuaW1hdGVTbGlkZXIobmV3RXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgaXQncyB0aW1lIHRvIHJlbGVhc2UgdGhlIHNjcm9sbDpcbiAgICAgICAgLy8gICBSZXR1cm4gbm93IHNvIHlvdSBkb24ndCBoaXQgdGhlIHByZXZlbnREZWZhdWx0LlxuICAgICAgICBpZiAocmVsZWFzZVNjcm9sbChuZXdFdmVudCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRnJlZW1vZGUgb3Igc2Nyb2xsQ29udGFpbmVyOlxuXG4gICAgICAgIC8vIElmIHdlIHJlY2VudGx5IHNuYXBwZWQgYWZ0ZXIgYSBtb21lbnR1bSBzY3JvbGwsIHRoZW4gaWdub3JlIHdoZWVsIGV2ZW50c1xuICAgICAgICAvLyB0byBnaXZlIHRpbWUgZm9yIHRoZSBkZWNlbGVyYXRpb24gdG8gZmluaXNoLiBTdG9wIGlnbm9yaW5nIGFmdGVyIDUwMCBtc2Vjc1xuICAgICAgICAvLyBvciBpZiBpdCdzIGEgbmV3IHNjcm9sbCAobGFyZ2VyIGRlbHRhIG9yIGludmVyc2Ugc2lnbiBhcyBsYXN0IGV2ZW50IGJlZm9yZVxuICAgICAgICAvLyBhbiBlbmQtb2YtbW9tZW50dW0gc25hcCkuXG4gICAgICAgIGNvbnN0IG5ld0V2ZW50ID0ge1xuICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgIGRlbHRhOiBNYXRoLmFicyhkZWx0YSksXG4gICAgICAgICAgZGlyZWN0aW9uOiBNYXRoLnNpZ24oZGVsdGEpXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGlnbm9yZVdoZWVsRXZlbnRzID0gbGFzdEV2ZW50QmVmb3JlU25hcCAmJiBuZXdFdmVudC50aW1lIDwgbGFzdEV2ZW50QmVmb3JlU25hcC50aW1lICsgNTAwICYmIG5ld0V2ZW50LmRlbHRhIDw9IGxhc3RFdmVudEJlZm9yZVNuYXAuZGVsdGEgJiYgbmV3RXZlbnQuZGlyZWN0aW9uID09PSBsYXN0RXZlbnRCZWZvcmVTbmFwLmRpcmVjdGlvbjtcbiAgICAgICAgaWYgKCFpZ25vcmVXaGVlbEV2ZW50cykge1xuICAgICAgICAgIGxhc3RFdmVudEJlZm9yZVNuYXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbGV0IHBvc2l0aW9uID0gc3dpcGVyLmdldFRyYW5zbGF0ZSgpICsgZGVsdGEgKiBwYXJhbXMuc2Vuc2l0aXZpdHk7XG4gICAgICAgICAgY29uc3Qgd2FzQmVnaW5uaW5nID0gc3dpcGVyLmlzQmVnaW5uaW5nO1xuICAgICAgICAgIGNvbnN0IHdhc0VuZCA9IHN3aXBlci5pc0VuZDtcbiAgICAgICAgICBpZiAocG9zaXRpb24gPj0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSBwb3NpdGlvbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICAgICAgICBpZiAocG9zaXRpb24gPD0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSBwb3NpdGlvbiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKTtcbiAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbigwKTtcbiAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKHBvc2l0aW9uKTtcbiAgICAgICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoKTtcbiAgICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgICAgIGlmICghd2FzQmVnaW5uaW5nICYmIHN3aXBlci5pc0JlZ2lubmluZyB8fCAhd2FzRW5kICYmIHN3aXBlci5pc0VuZCkge1xuICAgICAgICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgICAgICAgc3dpcGVyLmxvb3BGaXgoe1xuICAgICAgICAgICAgICBkaXJlY3Rpb246IG5ld0V2ZW50LmRpcmVjdGlvbiA8IDAgPyAnbmV4dCcgOiAncHJldicsXG4gICAgICAgICAgICAgIGJ5TW91c2V3aGVlbDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICAgICAgLy8gV2hlbiB3aGVlbCBzY3JvbGxpbmcgc3RhcnRzIHdpdGggc3RpY2t5IChha2Egc25hcCkgZW5hYmxlZCwgdGhlbiBkZXRlY3RcbiAgICAgICAgICAgIC8vIHRoZSBlbmQgb2YgYSBtb21lbnR1bSBzY3JvbGwgYnkgc3RvcmluZyByZWNlbnQgKE49MTU/KSB3aGVlbCBldmVudHMuXG4gICAgICAgICAgICAvLyAxLiBkbyBhbGwgTiBldmVudHMgaGF2ZSBkZWNyZWFzaW5nIG9yIHNhbWUgKGFic29sdXRlIHZhbHVlKSBkZWx0YT9cbiAgICAgICAgICAgIC8vIDIuIGRpZCBhbGwgTiBldmVudHMgYXJyaXZlIGluIHRoZSBsYXN0IE0gKE09NTAwPykgbXNlY3M/XG4gICAgICAgICAgICAvLyAzLiBkb2VzIHRoZSBlYXJsaWVzdCBldmVudCBoYXZlIGFuIChhYnNvbHV0ZSB2YWx1ZSkgZGVsdGEgdGhhdCdzXG4gICAgICAgICAgICAvLyAgICBhdCBsZWFzdCBQIChQPTE/KSBsYXJnZXIgdGhhbiB0aGUgbW9zdCByZWNlbnQgZXZlbnQncyBkZWx0YT9cbiAgICAgICAgICAgIC8vIDQuIGRvZXMgdGhlIGxhdGVzdCBldmVudCBoYXZlIGEgZGVsdGEgdGhhdCdzIHNtYWxsZXIgdGhhbiBRIChRPTY/KSBwaXhlbHM/XG4gICAgICAgICAgICAvLyBJZiAxLTQgYXJlIFwieWVzXCIgdGhlbiB3ZSdyZSBuZWFyIHRoZSBlbmQgb2YgYSBtb21lbnR1bSBzY3JvbGwgZGVjZWxlcmF0aW9uLlxuICAgICAgICAgICAgLy8gU25hcCBpbW1lZGlhdGVseSBhbmQgaWdub3JlIHJlbWFpbmluZyB3aGVlbCBldmVudHMgaW4gdGhpcyBzY3JvbGwuXG4gICAgICAgICAgICAvLyBTZWUgY29tbWVudCBhYm92ZSBmb3IgXCJyZW1haW5pbmcgd2hlZWwgZXZlbnRzIGluIHRoaXMgc2Nyb2xsXCIgZGV0ZXJtaW5hdGlvbi5cbiAgICAgICAgICAgIC8vIElmIDEtNCBhcmVuJ3Qgc2F0aXNmaWVkLCB0aGVuIHdhaXQgdG8gc25hcCB1bnRpbCA1MDBtcyBhZnRlciB0aGUgbGFzdCBldmVudC5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAocmVjZW50V2hlZWxFdmVudHMubGVuZ3RoID49IDE1KSB7XG4gICAgICAgICAgICAgIHJlY2VudFdoZWVsRXZlbnRzLnNoaWZ0KCk7IC8vIG9ubHkgc3RvcmUgdGhlIGxhc3QgTiBldmVudHNcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcHJldkV2ZW50ID0gcmVjZW50V2hlZWxFdmVudHMubGVuZ3RoID8gcmVjZW50V2hlZWxFdmVudHNbcmVjZW50V2hlZWxFdmVudHMubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBmaXJzdEV2ZW50ID0gcmVjZW50V2hlZWxFdmVudHNbMF07XG4gICAgICAgICAgICByZWNlbnRXaGVlbEV2ZW50cy5wdXNoKG5ld0V2ZW50KTtcbiAgICAgICAgICAgIGlmIChwcmV2RXZlbnQgJiYgKG5ld0V2ZW50LmRlbHRhID4gcHJldkV2ZW50LmRlbHRhIHx8IG5ld0V2ZW50LmRpcmVjdGlvbiAhPT0gcHJldkV2ZW50LmRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgICAgLy8gSW5jcmVhc2luZyBvciByZXZlcnNlLXNpZ24gZGVsdGEgbWVhbnMgdGhlIHVzZXIgc3RhcnRlZCBzY3JvbGxpbmcgYWdhaW4uIENsZWFyIHRoZSB3aGVlbCBldmVudCBsb2cuXG4gICAgICAgICAgICAgIHJlY2VudFdoZWVsRXZlbnRzLnNwbGljZSgwKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVjZW50V2hlZWxFdmVudHMubGVuZ3RoID49IDE1ICYmIG5ld0V2ZW50LnRpbWUgLSBmaXJzdEV2ZW50LnRpbWUgPCA1MDAgJiYgZmlyc3RFdmVudC5kZWx0YSAtIG5ld0V2ZW50LmRlbHRhID49IDEgJiYgbmV3RXZlbnQuZGVsdGEgPD0gNikge1xuICAgICAgICAgICAgICAvLyBXZSdyZSBhdCB0aGUgZW5kIG9mIHRoZSBkZWNlbGVyYXRpb24gb2YgYSBtb21lbnR1bSBzY3JvbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAgICAgICAgICAgICAvLyB0byB3YWl0IGZvciBtb3JlIGV2ZW50cy4gU25hcCBBU0FQIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgICAgICAgICAgIC8vIEFsc28sIGJlY2F1c2UgdGhlcmUncyBzb21lIHJlbWFpbmluZyBtb21lbnR1bSB3ZSdsbCBiaWFzIHRoZSBzbmFwIGluIHRoZVxuICAgICAgICAgICAgICAvLyBkaXJlY3Rpb24gb2YgdGhlIG9uZ29pbmcgc2Nyb2xsIGJlY2F1c2UgaXQncyBiZXR0ZXIgVVggZm9yIHRoZSBzY3JvbGwgdG8gc25hcFxuICAgICAgICAgICAgICAvLyBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gYXMgdGhlIHNjcm9sbCBpbnN0ZWFkIG9mIHJldmVyc2luZyB0byBzbmFwLiAgVGhlcmVmb3JlLFxuICAgICAgICAgICAgICAvLyBpZiBpdCdzIGFscmVhZHkgc2Nyb2xsZWQgbW9yZSB0aGFuIDIwJSBpbiB0aGUgY3VycmVudCBkaXJlY3Rpb24sIGtlZXAgZ29pbmcuXG4gICAgICAgICAgICAgIGNvbnN0IHNuYXBUb1RocmVzaG9sZCA9IGRlbHRhID4gMCA/IDAuOCA6IDAuMjtcbiAgICAgICAgICAgICAgbGFzdEV2ZW50QmVmb3JlU25hcCA9IG5ld0V2ZW50O1xuICAgICAgICAgICAgICByZWNlbnRXaGVlbEV2ZW50cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICAgIHRpbWVvdXQgPSBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG9DbG9zZXN0KHN3aXBlci5wYXJhbXMuc3BlZWQsIHRydWUsIHVuZGVmaW5lZCwgc25hcFRvVGhyZXNob2xkKTtcbiAgICAgICAgICAgICAgfSwgMCk7IC8vIG5vIGRlbGF5OyBtb3ZlIG9uIG5leHQgdGlja1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgLy8gaWYgd2UgZ2V0IGhlcmUsIHRoZW4gd2UgaGF2ZW4ndCBkZXRlY3RlZCB0aGUgZW5kIG9mIGEgbW9tZW50dW0gc2Nyb2xsLCBzb1xuICAgICAgICAgICAgICAvLyB3ZSdsbCBjb25zaWRlciBhIHNjcm9sbCBcImNvbXBsZXRlXCIgd2hlbiB0aGVyZSBoYXZlbid0IGJlZW4gYW55IHdoZWVsIGV2ZW50c1xuICAgICAgICAgICAgICAvLyBmb3IgNTAwbXMuXG4gICAgICAgICAgICAgIHRpbWVvdXQgPSBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc25hcFRvVGhyZXNob2xkID0gMC41O1xuICAgICAgICAgICAgICAgIGxhc3RFdmVudEJlZm9yZVNuYXAgPSBuZXdFdmVudDtcbiAgICAgICAgICAgICAgICByZWNlbnRXaGVlbEV2ZW50cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG9DbG9zZXN0KHN3aXBlci5wYXJhbXMuc3BlZWQsIHRydWUsIHVuZGVmaW5lZCwgc25hcFRvVGhyZXNob2xkKTtcbiAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFbWl0IGV2ZW50XG4gICAgICAgICAgaWYgKCFpZ25vcmVXaGVlbEV2ZW50cykgZW1pdCgnc2Nyb2xsJywgZSk7XG5cbiAgICAgICAgICAvLyBTdG9wIGF1dG9wbGF5XG4gICAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkgJiYgc3dpcGVyLnBhcmFtcy5hdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uKSBzd2lwZXIuYXV0b3BsYXkuc3RvcCgpO1xuICAgICAgICAgIC8vIFJldHVybiBwYWdlIHNjcm9sbCBvbiBlZGdlIHBvc2l0aW9uc1xuICAgICAgICAgIGlmIChwYXJhbXMucmVsZWFzZU9uRWRnZXMgJiYgKHBvc2l0aW9uID09PSBzd2lwZXIubWluVHJhbnNsYXRlKCkgfHwgcG9zaXRpb24gPT09IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtlbHNlIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXZlbnRzKG1ldGhvZCkge1xuICAgICAgbGV0IHRhcmdldEVsID0gc3dpcGVyLmVsO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQgIT09ICdjb250YWluZXInKSB7XG4gICAgICAgIHRhcmdldEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwuZXZlbnRzVGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIHRhcmdldEVsW21ldGhvZF0oJ21vdXNlZW50ZXInLCBoYW5kbGVNb3VzZUVudGVyKTtcbiAgICAgIHRhcmdldEVsW21ldGhvZF0oJ21vdXNlbGVhdmUnLCBoYW5kbGVNb3VzZUxlYXZlKTtcbiAgICAgIHRhcmdldEVsW21ldGhvZF0oJ3doZWVsJywgaGFuZGxlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLm1vdXNld2hlZWwuZW5hYmxlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZXZlbnRzKCdhZGRFdmVudExpc3RlbmVyJyk7XG4gICAgICBzd2lwZXIubW91c2V3aGVlbC5lbmFibGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFzd2lwZXIubW91c2V3aGVlbC5lbmFibGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBldmVudHMoJ3JlbW92ZUV2ZW50TGlzdGVuZXInKTtcbiAgICAgIHN3aXBlci5tb3VzZXdoZWVsLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLmVuYWJsZWQgJiYgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIGRpc2FibGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwuZW5hYmxlZCkgZW5hYmxlKCk7XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIGVuYWJsZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5tb3VzZXdoZWVsLmVuYWJsZWQpIGRpc2FibGUoKTtcbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5tb3VzZXdoZWVsLCB7XG4gICAgICBlbmFibGUsXG4gICAgICBkaXNhYmxlXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50SWZOb3REZWZpbmVkKHN3aXBlciwgb3JpZ2luYWxQYXJhbXMsIHBhcmFtcywgY2hlY2tQcm9wcykge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmNyZWF0ZUVsZW1lbnRzKSB7XG4gICAgICBPYmplY3Qua2V5cyhjaGVja1Byb3BzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmICghcGFyYW1zW2tleV0gJiYgcGFyYW1zLmF1dG8gPT09IHRydWUpIHtcbiAgICAgICAgICBsZXQgZWxlbWVudCA9IGVsZW1lbnRDaGlsZHJlbihzd2lwZXIuZWwsIGAuJHtjaGVja1Byb3BzW2tleV19YClbMF07XG4gICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnZGl2JywgY2hlY2tQcm9wc1trZXldKTtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY2hlY2tQcm9wc1trZXldO1xuICAgICAgICAgICAgc3dpcGVyLmVsLmFwcGVuZChlbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSBlbGVtZW50O1xuICAgICAgICAgIG9yaWdpbmFsUGFyYW1zW2tleV0gPSBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIGZ1bmN0aW9uIE5hdmlnYXRpb24oX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvbixcbiAgICAgIGVtaXRcbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6IG51bGwsXG4gICAgICAgIHByZXZFbDogbnVsbCxcbiAgICAgICAgaGlkZU9uQ2xpY2s6IGZhbHNlLFxuICAgICAgICBkaXNhYmxlZENsYXNzOiAnc3dpcGVyLWJ1dHRvbi1kaXNhYmxlZCcsXG4gICAgICAgIGhpZGRlbkNsYXNzOiAnc3dpcGVyLWJ1dHRvbi1oaWRkZW4nLFxuICAgICAgICBsb2NrQ2xhc3M6ICdzd2lwZXItYnV0dG9uLWxvY2snLFxuICAgICAgICBuYXZpZ2F0aW9uRGlzYWJsZWRDbGFzczogJ3N3aXBlci1uYXZpZ2F0aW9uLWRpc2FibGVkJ1xuICAgICAgfVxuICAgIH0pO1xuICAgIHN3aXBlci5uYXZpZ2F0aW9uID0ge1xuICAgICAgbmV4dEVsOiBudWxsLFxuICAgICAgcHJldkVsOiBudWxsXG4gICAgfTtcbiAgICBmdW5jdGlvbiBnZXRFbChlbCkge1xuICAgICAgbGV0IHJlcztcbiAgICAgIGlmIChlbCAmJiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnICYmIHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgcmVzID0gc3dpcGVyLmVsLnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgICAgICBpZiAocmVzKSByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSByZXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbCldO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy51bmlxdWVOYXZFbGVtZW50cyAmJiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnICYmIHJlcyAmJiByZXMubGVuZ3RoID4gMSAmJiBzd2lwZXIuZWwucXVlcnlTZWxlY3RvckFsbChlbCkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgcmVzID0gc3dpcGVyLmVsLnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlcyAmJiByZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgcmVzID0gcmVzWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZWwgJiYgIXJlcykgcmV0dXJuIGVsO1xuICAgICAgLy8gaWYgKEFycmF5LmlzQXJyYXkocmVzKSAmJiByZXMubGVuZ3RoID09PSAxKSByZXMgPSByZXNbMF07XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b2dnbGVFbChlbCwgZGlzYWJsZWQpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbjtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIGlmIChzdWJFbCkge1xuICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdFtkaXNhYmxlZCA/ICdhZGQnIDogJ3JlbW92ZSddKC4uLnBhcmFtcy5kaXNhYmxlZENsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgIGlmIChzdWJFbC50YWdOYW1lID09PSAnQlVUVE9OJykgc3ViRWwuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHN3aXBlci5lbmFibGVkKSB7XG4gICAgICAgICAgICBzdWJFbC5jbGFzc0xpc3Rbc3dpcGVyLmlzTG9ja2VkID8gJ2FkZCcgOiAncmVtb3ZlJ10ocGFyYW1zLmxvY2tDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgLy8gVXBkYXRlIE5hdmlnYXRpb24gQnV0dG9uc1xuICAgICAgY29uc3Qge1xuICAgICAgICBuZXh0RWwsXG4gICAgICAgIHByZXZFbFxuICAgICAgfSA9IHN3aXBlci5uYXZpZ2F0aW9uO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgICB0b2dnbGVFbChwcmV2RWwsIGZhbHNlKTtcbiAgICAgICAgdG9nZ2xlRWwobmV4dEVsLCBmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRvZ2dsZUVsKHByZXZFbCwgc3dpcGVyLmlzQmVnaW5uaW5nICYmICFzd2lwZXIucGFyYW1zLnJld2luZCk7XG4gICAgICB0b2dnbGVFbChuZXh0RWwsIHN3aXBlci5pc0VuZCAmJiAhc3dpcGVyLnBhcmFtcy5yZXdpbmQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblByZXZDbGljayhlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoc3dpcGVyLmlzQmVnaW5uaW5nICYmICFzd2lwZXIucGFyYW1zLmxvb3AgJiYgIXN3aXBlci5wYXJhbXMucmV3aW5kKSByZXR1cm47XG4gICAgICBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgICBlbWl0KCduYXZpZ2F0aW9uUHJldicpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbk5leHRDbGljayhlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoc3dpcGVyLmlzRW5kICYmICFzd2lwZXIucGFyYW1zLmxvb3AgJiYgIXN3aXBlci5wYXJhbXMucmV3aW5kKSByZXR1cm47XG4gICAgICBzd2lwZXIuc2xpZGVOZXh0KCk7XG4gICAgICBlbWl0KCduYXZpZ2F0aW9uTmV4dCcpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uO1xuICAgICAgc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uID0gY3JlYXRlRWxlbWVudElmTm90RGVmaW5lZChzd2lwZXIsIHN3aXBlci5vcmlnaW5hbFBhcmFtcy5uYXZpZ2F0aW9uLCBzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24sIHtcbiAgICAgICAgbmV4dEVsOiAnc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnc3dpcGVyLWJ1dHRvbi1wcmV2J1xuICAgICAgfSk7XG4gICAgICBpZiAoIShwYXJhbXMubmV4dEVsIHx8IHBhcmFtcy5wcmV2RWwpKSByZXR1cm47XG4gICAgICBsZXQgbmV4dEVsID0gZ2V0RWwocGFyYW1zLm5leHRFbCk7XG4gICAgICBsZXQgcHJldkVsID0gZ2V0RWwocGFyYW1zLnByZXZFbCk7XG4gICAgICBPYmplY3QuYXNzaWduKHN3aXBlci5uYXZpZ2F0aW9uLCB7XG4gICAgICAgIG5leHRFbCxcbiAgICAgICAgcHJldkVsXG4gICAgICB9KTtcbiAgICAgIG5leHRFbCA9IG1ha2VFbGVtZW50c0FycmF5KG5leHRFbCk7XG4gICAgICBwcmV2RWwgPSBtYWtlRWxlbWVudHNBcnJheShwcmV2RWwpO1xuICAgICAgY29uc3QgaW5pdEJ1dHRvbiA9IChlbCwgZGlyKSA9PiB7XG4gICAgICAgIGlmIChlbCkge1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGlyID09PSAnbmV4dCcgPyBvbk5leHRDbGljayA6IG9uUHJldkNsaWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN3aXBlci5lbmFibGVkICYmIGVsKSB7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCguLi5wYXJhbXMubG9ja0NsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbmV4dEVsLmZvckVhY2goZWwgPT4gaW5pdEJ1dHRvbihlbCwgJ25leHQnKSk7XG4gICAgICBwcmV2RWwuZm9yRWFjaChlbCA9PiBpbml0QnV0dG9uKGVsLCAncHJldicpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIGxldCB7XG4gICAgICAgIG5leHRFbCxcbiAgICAgICAgcHJldkVsXG4gICAgICB9ID0gc3dpcGVyLm5hdmlnYXRpb247XG4gICAgICBuZXh0RWwgPSBtYWtlRWxlbWVudHNBcnJheShuZXh0RWwpO1xuICAgICAgcHJldkVsID0gbWFrZUVsZW1lbnRzQXJyYXkocHJldkVsKTtcbiAgICAgIGNvbnN0IGRlc3Ryb3lCdXR0b24gPSAoZWwsIGRpcikgPT4ge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGRpciA9PT0gJ25leHQnID8gb25OZXh0Q2xpY2sgOiBvblByZXZDbGljayk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoLi4uc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uLmRpc2FibGVkQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICB9O1xuICAgICAgbmV4dEVsLmZvckVhY2goZWwgPT4gZGVzdHJveUJ1dHRvbihlbCwgJ25leHQnKSk7XG4gICAgICBwcmV2RWwuZm9yRWFjaChlbCA9PiBkZXN0cm95QnV0dG9uKGVsLCAncHJldicpKTtcbiAgICB9XG4gICAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uLmVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBkaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0KCk7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCd0b0VkZ2UgZnJvbUVkZ2UgbG9jayB1bmxvY2snLCAoKSA9PiB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICBvbignZW5hYmxlIGRpc2FibGUnLCAoKSA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBuZXh0RWwsXG4gICAgICAgIHByZXZFbFxuICAgICAgfSA9IHN3aXBlci5uYXZpZ2F0aW9uO1xuICAgICAgbmV4dEVsID0gbWFrZUVsZW1lbnRzQXJyYXkobmV4dEVsKTtcbiAgICAgIHByZXZFbCA9IG1ha2VFbGVtZW50c0FycmF5KHByZXZFbCk7XG4gICAgICBpZiAoc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFsuLi5uZXh0RWwsIC4uLnByZXZFbF0uZmlsdGVyKGVsID0+ICEhZWwpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LmFkZChzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24ubG9ja0NsYXNzKSk7XG4gICAgfSk7XG4gICAgb24oJ2NsaWNrJywgKF9zLCBlKSA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBuZXh0RWwsXG4gICAgICAgIHByZXZFbFxuICAgICAgfSA9IHN3aXBlci5uYXZpZ2F0aW9uO1xuICAgICAgbmV4dEVsID0gbWFrZUVsZW1lbnRzQXJyYXkobmV4dEVsKTtcbiAgICAgIHByZXZFbCA9IG1ha2VFbGVtZW50c0FycmF5KHByZXZFbCk7XG4gICAgICBjb25zdCB0YXJnZXRFbCA9IGUudGFyZ2V0O1xuICAgICAgbGV0IHRhcmdldElzQnV0dG9uID0gcHJldkVsLmluY2x1ZGVzKHRhcmdldEVsKSB8fCBuZXh0RWwuaW5jbHVkZXModGFyZ2V0RWwpO1xuICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQgJiYgIXRhcmdldElzQnV0dG9uKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBlLnBhdGggfHwgZS5jb21wb3NlZFBhdGggJiYgZS5jb21wb3NlZFBhdGgoKTtcbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICB0YXJnZXRJc0J1dHRvbiA9IHBhdGguZmluZChwYXRoRWwgPT4gbmV4dEVsLmluY2x1ZGVzKHBhdGhFbCkgfHwgcHJldkVsLmluY2x1ZGVzKHBhdGhFbCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGVPbkNsaWNrICYmICF0YXJnZXRJc0J1dHRvbikge1xuICAgICAgICBpZiAoc3dpcGVyLnBhZ2luYXRpb24gJiYgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uICYmIHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGUgJiYgKHN3aXBlci5wYWdpbmF0aW9uLmVsID09PSB0YXJnZXRFbCB8fCBzd2lwZXIucGFnaW5hdGlvbi5lbC5jb250YWlucyh0YXJnZXRFbCkpKSByZXR1cm47XG4gICAgICAgIGxldCBpc0hpZGRlbjtcbiAgICAgICAgaWYgKG5leHRFbC5sZW5ndGgpIHtcbiAgICAgICAgICBpc0hpZGRlbiA9IG5leHRFbFswXS5jbGFzc0xpc3QuY29udGFpbnMoc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGRlbkNsYXNzKTtcbiAgICAgICAgfSBlbHNlIGlmIChwcmV2RWwubGVuZ3RoKSB7XG4gICAgICAgICAgaXNIaWRkZW4gPSBwcmV2RWxbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzSGlkZGVuID09PSB0cnVlKSB7XG4gICAgICAgICAgZW1pdCgnbmF2aWdhdGlvblNob3cnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbWl0KCduYXZpZ2F0aW9uSGlkZScpO1xuICAgICAgICB9XG4gICAgICAgIFsuLi5uZXh0RWwsIC4uLnByZXZFbF0uZmlsdGVyKGVsID0+ICEhZWwpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZShzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBlbmFibGUgPSAoKSA9PiB7XG4gICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5zd2lwZXIucGFyYW1zLm5hdmlnYXRpb24ubmF2aWdhdGlvbkRpc2FibGVkQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICBpbml0KCk7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGRpc2FibGUgPSAoKSA9PiB7XG4gICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LmFkZCguLi5zd2lwZXIucGFyYW1zLm5hdmlnYXRpb24ubmF2aWdhdGlvbkRpc2FibGVkQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICBkZXN0cm95KCk7XG4gICAgfTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5uYXZpZ2F0aW9uLCB7XG4gICAgICBlbmFibGUsXG4gICAgICBkaXNhYmxlLFxuICAgICAgdXBkYXRlLFxuICAgICAgaW5pdCxcbiAgICAgIGRlc3Ryb3lcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsYXNzZXNUb1NlbGVjdG9yKGNsYXNzZXMpIHtcbiAgICBpZiAoY2xhc3NlcyA9PT0gdm9pZCAwKSB7XG4gICAgICBjbGFzc2VzID0gJyc7XG4gICAgfVxuICAgIHJldHVybiBgLiR7Y2xhc3Nlcy50cmltKCkucmVwbGFjZSgvKFtcXC46IStcXC9dKS9nLCAnXFxcXCQxJykgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAucmVwbGFjZSgvIC9nLCAnLicpfWA7XG4gIH1cblxuICBmdW5jdGlvbiBQYWdpbmF0aW9uKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb24sXG4gICAgICBlbWl0XG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3QgcGZ4ID0gJ3N3aXBlci1wYWdpbmF0aW9uJztcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogbnVsbCxcbiAgICAgICAgYnVsbGV0RWxlbWVudDogJ3NwYW4nLFxuICAgICAgICBjbGlja2FibGU6IGZhbHNlLFxuICAgICAgICBoaWRlT25DbGljazogZmFsc2UsXG4gICAgICAgIHJlbmRlckJ1bGxldDogbnVsbCxcbiAgICAgICAgcmVuZGVyUHJvZ3Jlc3NiYXI6IG51bGwsXG4gICAgICAgIHJlbmRlckZyYWN0aW9uOiBudWxsLFxuICAgICAgICByZW5kZXJDdXN0b206IG51bGwsXG4gICAgICAgIHByb2dyZXNzYmFyT3Bwb3NpdGU6IGZhbHNlLFxuICAgICAgICB0eXBlOiAnYnVsbGV0cycsXG4gICAgICAgIC8vICdidWxsZXRzJyBvciAncHJvZ3Jlc3NiYXInIG9yICdmcmFjdGlvbicgb3IgJ2N1c3RvbSdcbiAgICAgICAgZHluYW1pY0J1bGxldHM6IGZhbHNlLFxuICAgICAgICBkeW5hbWljTWFpbkJ1bGxldHM6IDEsXG4gICAgICAgIGZvcm1hdEZyYWN0aW9uQ3VycmVudDogbnVtYmVyID0+IG51bWJlcixcbiAgICAgICAgZm9ybWF0RnJhY3Rpb25Ub3RhbDogbnVtYmVyID0+IG51bWJlcixcbiAgICAgICAgYnVsbGV0Q2xhc3M6IGAke3BmeH0tYnVsbGV0YCxcbiAgICAgICAgYnVsbGV0QWN0aXZlQ2xhc3M6IGAke3BmeH0tYnVsbGV0LWFjdGl2ZWAsXG4gICAgICAgIG1vZGlmaWVyQ2xhc3M6IGAke3BmeH0tYCxcbiAgICAgICAgY3VycmVudENsYXNzOiBgJHtwZnh9LWN1cnJlbnRgLFxuICAgICAgICB0b3RhbENsYXNzOiBgJHtwZnh9LXRvdGFsYCxcbiAgICAgICAgaGlkZGVuQ2xhc3M6IGAke3BmeH0taGlkZGVuYCxcbiAgICAgICAgcHJvZ3Jlc3NiYXJGaWxsQ2xhc3M6IGAke3BmeH0tcHJvZ3Jlc3NiYXItZmlsbGAsXG4gICAgICAgIHByb2dyZXNzYmFyT3Bwb3NpdGVDbGFzczogYCR7cGZ4fS1wcm9ncmVzc2Jhci1vcHBvc2l0ZWAsXG4gICAgICAgIGNsaWNrYWJsZUNsYXNzOiBgJHtwZnh9LWNsaWNrYWJsZWAsXG4gICAgICAgIGxvY2tDbGFzczogYCR7cGZ4fS1sb2NrYCxcbiAgICAgICAgaG9yaXpvbnRhbENsYXNzOiBgJHtwZnh9LWhvcml6b250YWxgLFxuICAgICAgICB2ZXJ0aWNhbENsYXNzOiBgJHtwZnh9LXZlcnRpY2FsYCxcbiAgICAgICAgcGFnaW5hdGlvbkRpc2FibGVkQ2xhc3M6IGAke3BmeH0tZGlzYWJsZWRgXG4gICAgICB9XG4gICAgfSk7XG4gICAgc3dpcGVyLnBhZ2luYXRpb24gPSB7XG4gICAgICBlbDogbnVsbCxcbiAgICAgIGJ1bGxldHM6IFtdXG4gICAgfTtcbiAgICBsZXQgYnVsbGV0U2l6ZTtcbiAgICBsZXQgZHluYW1pY0J1bGxldEluZGV4ID0gMDtcbiAgICBmdW5jdGlvbiBpc1BhZ2luYXRpb25EaXNhYmxlZCgpIHtcbiAgICAgIHJldHVybiAhc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmVsIHx8ICFzd2lwZXIucGFnaW5hdGlvbi5lbCB8fCBBcnJheS5pc0FycmF5KHN3aXBlci5wYWdpbmF0aW9uLmVsKSAmJiBzd2lwZXIucGFnaW5hdGlvbi5lbC5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFNpZGVCdWxsZXRzKGJ1bGxldEVsLCBwb3NpdGlvbikge1xuICAgICAgY29uc3Qge1xuICAgICAgICBidWxsZXRBY3RpdmVDbGFzc1xuICAgICAgfSA9IHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmICghYnVsbGV0RWwpIHJldHVybjtcbiAgICAgIGJ1bGxldEVsID0gYnVsbGV0RWxbYCR7cG9zaXRpb24gPT09ICdwcmV2JyA/ICdwcmV2aW91cycgOiAnbmV4dCd9RWxlbWVudFNpYmxpbmdgXTtcbiAgICAgIGlmIChidWxsZXRFbCkge1xuICAgICAgICBidWxsZXRFbC5jbGFzc0xpc3QuYWRkKGAke2J1bGxldEFjdGl2ZUNsYXNzfS0ke3Bvc2l0aW9ufWApO1xuICAgICAgICBidWxsZXRFbCA9IGJ1bGxldEVsW2Ake3Bvc2l0aW9uID09PSAncHJldicgPyAncHJldmlvdXMnIDogJ25leHQnfUVsZW1lbnRTaWJsaW5nYF07XG4gICAgICAgIGlmIChidWxsZXRFbCkge1xuICAgICAgICAgIGJ1bGxldEVsLmNsYXNzTGlzdC5hZGQoYCR7YnVsbGV0QWN0aXZlQ2xhc3N9LSR7cG9zaXRpb259LSR7cG9zaXRpb259YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gb25CdWxsZXRDbGljayhlKSB7XG4gICAgICBjb25zdCBidWxsZXRFbCA9IGUudGFyZ2V0LmNsb3Nlc3QoY2xhc3Nlc1RvU2VsZWN0b3Ioc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSk7XG4gICAgICBpZiAoIWJ1bGxldEVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudEluZGV4KGJ1bGxldEVsKSAqIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIGlmIChzd2lwZXIucmVhbEluZGV4ID09PSBpbmRleCkgcmV0dXJuO1xuICAgICAgICBzd2lwZXIuc2xpZGVUb0xvb3AoaW5kZXgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oaW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAvLyBSZW5kZXIgfHwgVXBkYXRlIFBhZ2luYXRpb24gYnVsbGV0cy9pdGVtc1xuICAgICAgY29uc3QgcnRsID0gc3dpcGVyLnJ0bDtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmIChpc1BhZ2luYXRpb25EaXNhYmxlZCgpKSByZXR1cm47XG4gICAgICBsZXQgZWwgPSBzd2lwZXIucGFnaW5hdGlvbi5lbDtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgLy8gQ3VycmVudC9Ub3RhbFxuICAgICAgbGV0IGN1cnJlbnQ7XG4gICAgICBsZXQgcHJldmlvdXNJbmRleDtcbiAgICAgIGNvbnN0IHNsaWRlc0xlbmd0aCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCA6IHN3aXBlci5zbGlkZXMubGVuZ3RoO1xuICAgICAgY29uc3QgdG90YWwgPSBzd2lwZXIucGFyYW1zLmxvb3AgPyBNYXRoLmNlaWwoc2xpZGVzTGVuZ3RoIC8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cCkgOiBzd2lwZXIuc25hcEdyaWQubGVuZ3RoO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgICBwcmV2aW91c0luZGV4ID0gc3dpcGVyLnByZXZpb3VzUmVhbEluZGV4IHx8IDA7XG4gICAgICAgIGN1cnJlbnQgPSBzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwID4gMSA/IE1hdGguZmxvb3Ioc3dpcGVyLnJlYWxJbmRleCAvIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXApIDogc3dpcGVyLnJlYWxJbmRleDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN3aXBlci5zbmFwSW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGN1cnJlbnQgPSBzd2lwZXIuc25hcEluZGV4O1xuICAgICAgICBwcmV2aW91c0luZGV4ID0gc3dpcGVyLnByZXZpb3VzU25hcEluZGV4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldmlvdXNJbmRleCA9IHN3aXBlci5wcmV2aW91c0luZGV4IHx8IDA7XG4gICAgICAgIGN1cnJlbnQgPSBzd2lwZXIuYWN0aXZlSW5kZXggfHwgMDtcbiAgICAgIH1cbiAgICAgIC8vIFR5cGVzXG4gICAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdidWxsZXRzJyAmJiBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzICYmIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBidWxsZXRzID0gc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cztcbiAgICAgICAgbGV0IGZpcnN0SW5kZXg7XG4gICAgICAgIGxldCBsYXN0SW5kZXg7XG4gICAgICAgIGxldCBtaWRJbmRleDtcbiAgICAgICAgaWYgKHBhcmFtcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgIGJ1bGxldFNpemUgPSBlbGVtZW50T3V0ZXJTaXplKGJ1bGxldHNbMF0sIHN3aXBlci5pc0hvcml6b250YWwoKSA/ICd3aWR0aCcgOiAnaGVpZ2h0JywgdHJ1ZSk7XG4gICAgICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgICAgICBzdWJFbC5zdHlsZVtzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAnd2lkdGgnIDogJ2hlaWdodCddID0gYCR7YnVsbGV0U2l6ZSAqIChwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzICsgNCl9cHhgO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzID4gMSAmJiBwcmV2aW91c0luZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGR5bmFtaWNCdWxsZXRJbmRleCArPSBjdXJyZW50IC0gKHByZXZpb3VzSW5kZXggfHwgMCk7XG4gICAgICAgICAgICBpZiAoZHluYW1pY0J1bGxldEluZGV4ID4gcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyAtIDEpIHtcbiAgICAgICAgICAgICAgZHluYW1pY0J1bGxldEluZGV4ID0gcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyAtIDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGR5bmFtaWNCdWxsZXRJbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgZHluYW1pY0J1bGxldEluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZmlyc3RJbmRleCA9IE1hdGgubWF4KGN1cnJlbnQgLSBkeW5hbWljQnVsbGV0SW5kZXgsIDApO1xuICAgICAgICAgIGxhc3RJbmRleCA9IGZpcnN0SW5kZXggKyAoTWF0aC5taW4oYnVsbGV0cy5sZW5ndGgsIHBhcmFtcy5keW5hbWljTWFpbkJ1bGxldHMpIC0gMSk7XG4gICAgICAgICAgbWlkSW5kZXggPSAobGFzdEluZGV4ICsgZmlyc3RJbmRleCkgLyAyO1xuICAgICAgICB9XG4gICAgICAgIGJ1bGxldHMuZm9yRWFjaChidWxsZXRFbCA9PiB7XG4gICAgICAgICAgY29uc3QgY2xhc3Nlc1RvUmVtb3ZlID0gWy4uLlsnJywgJy1uZXh0JywgJy1uZXh0LW5leHQnLCAnLXByZXYnLCAnLXByZXYtcHJldicsICctbWFpbiddLm1hcChzdWZmaXggPT4gYCR7cGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzfSR7c3VmZml4fWApXS5tYXAocyA9PiB0eXBlb2YgcyA9PT0gJ3N0cmluZycgJiYgcy5pbmNsdWRlcygnICcpID8gcy5zcGxpdCgnICcpIDogcykuZmxhdCgpO1xuICAgICAgICAgIGJ1bGxldEVsLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3Nlc1RvUmVtb3ZlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlbC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgYnVsbGV0cy5mb3JFYWNoKGJ1bGxldCA9PiB7XG4gICAgICAgICAgICBjb25zdCBidWxsZXRJbmRleCA9IGVsZW1lbnRJbmRleChidWxsZXQpO1xuICAgICAgICAgICAgaWYgKGJ1bGxldEluZGV4ID09PSBjdXJyZW50KSB7XG4gICAgICAgICAgICAgIGJ1bGxldC5jbGFzc0xpc3QuYWRkKC4uLnBhcmFtcy5idWxsZXRBY3RpdmVDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICAgICAgICBidWxsZXQuc2V0QXR0cmlidXRlKCdwYXJ0JywgJ2J1bGxldCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgICAgICBpZiAoYnVsbGV0SW5kZXggPj0gZmlyc3RJbmRleCAmJiBidWxsZXRJbmRleCA8PSBsYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICBidWxsZXQuY2xhc3NMaXN0LmFkZCguLi5gJHtwYXJhbXMuYnVsbGV0QWN0aXZlQ2xhc3N9LW1haW5gLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChidWxsZXRJbmRleCA9PT0gZmlyc3RJbmRleCkge1xuICAgICAgICAgICAgICAgIHNldFNpZGVCdWxsZXRzKGJ1bGxldCwgJ3ByZXYnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYnVsbGV0SW5kZXggPT09IGxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgIHNldFNpZGVCdWxsZXRzKGJ1bGxldCwgJ25leHQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGJ1bGxldCA9IGJ1bGxldHNbY3VycmVudF07XG4gICAgICAgICAgaWYgKGJ1bGxldCkge1xuICAgICAgICAgICAgYnVsbGV0LmNsYXNzTGlzdC5hZGQoLi4ucGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICAgICAgYnVsbGV0cy5mb3JFYWNoKChidWxsZXRFbCwgYnVsbGV0SW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgYnVsbGV0RWwuc2V0QXR0cmlidXRlKCdwYXJ0JywgYnVsbGV0SW5kZXggPT09IGN1cnJlbnQgPyAnYnVsbGV0LWFjdGl2ZScgOiAnYnVsbGV0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHBhcmFtcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgICAgY29uc3QgZmlyc3REaXNwbGF5ZWRCdWxsZXQgPSBidWxsZXRzW2ZpcnN0SW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgbGFzdERpc3BsYXllZEJ1bGxldCA9IGJ1bGxldHNbbGFzdEluZGV4XTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmaXJzdEluZGV4OyBpIDw9IGxhc3RJbmRleDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgIGlmIChidWxsZXRzW2ldKSB7XG4gICAgICAgICAgICAgICAgYnVsbGV0c1tpXS5jbGFzc0xpc3QuYWRkKC4uLmAke3BhcmFtcy5idWxsZXRBY3RpdmVDbGFzc30tbWFpbmAuc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFNpZGVCdWxsZXRzKGZpcnN0RGlzcGxheWVkQnVsbGV0LCAncHJldicpO1xuICAgICAgICAgICAgc2V0U2lkZUJ1bGxldHMobGFzdERpc3BsYXllZEJ1bGxldCwgJ25leHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgIGNvbnN0IGR5bmFtaWNCdWxsZXRzTGVuZ3RoID0gTWF0aC5taW4oYnVsbGV0cy5sZW5ndGgsIHBhcmFtcy5keW5hbWljTWFpbkJ1bGxldHMgKyA0KTtcbiAgICAgICAgICBjb25zdCBidWxsZXRzT2Zmc2V0ID0gKGJ1bGxldFNpemUgKiBkeW5hbWljQnVsbGV0c0xlbmd0aCAtIGJ1bGxldFNpemUpIC8gMiAtIG1pZEluZGV4ICogYnVsbGV0U2l6ZTtcbiAgICAgICAgICBjb25zdCBvZmZzZXRQcm9wID0gcnRsID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgICAgICBidWxsZXRzLmZvckVhY2goYnVsbGV0ID0+IHtcbiAgICAgICAgICAgIGJ1bGxldC5zdHlsZVtzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBvZmZzZXRQcm9wIDogJ3RvcCddID0gYCR7YnVsbGV0c09mZnNldH1weGA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsLmZvckVhY2goKHN1YkVsLCBzdWJFbEluZGV4KSA9PiB7XG4gICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2ZyYWN0aW9uJykge1xuICAgICAgICAgIHN1YkVsLnF1ZXJ5U2VsZWN0b3JBbGwoY2xhc3Nlc1RvU2VsZWN0b3IocGFyYW1zLmN1cnJlbnRDbGFzcykpLmZvckVhY2goZnJhY3Rpb25FbCA9PiB7XG4gICAgICAgICAgICBmcmFjdGlvbkVsLnRleHRDb250ZW50ID0gcGFyYW1zLmZvcm1hdEZyYWN0aW9uQ3VycmVudChjdXJyZW50ICsgMSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3ViRWwucXVlcnlTZWxlY3RvckFsbChjbGFzc2VzVG9TZWxlY3RvcihwYXJhbXMudG90YWxDbGFzcykpLmZvckVhY2godG90YWxFbCA9PiB7XG4gICAgICAgICAgICB0b3RhbEVsLnRleHRDb250ZW50ID0gcGFyYW1zLmZvcm1hdEZyYWN0aW9uVG90YWwodG90YWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ3Byb2dyZXNzYmFyJykge1xuICAgICAgICAgIGxldCBwcm9ncmVzc2JhckRpcmVjdGlvbjtcbiAgICAgICAgICBpZiAocGFyYW1zLnByb2dyZXNzYmFyT3Bwb3NpdGUpIHtcbiAgICAgICAgICAgIHByb2dyZXNzYmFyRGlyZWN0aW9uID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvZ3Jlc3NiYXJEaXJlY3Rpb24gPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzY2FsZSA9IChjdXJyZW50ICsgMSkgLyB0b3RhbDtcbiAgICAgICAgICBsZXQgc2NhbGVYID0gMTtcbiAgICAgICAgICBsZXQgc2NhbGVZID0gMTtcbiAgICAgICAgICBpZiAocHJvZ3Jlc3NiYXJEaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgc2NhbGVYID0gc2NhbGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjYWxlWSA9IHNjYWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJFbC5xdWVyeVNlbGVjdG9yQWxsKGNsYXNzZXNUb1NlbGVjdG9yKHBhcmFtcy5wcm9ncmVzc2JhckZpbGxDbGFzcykpLmZvckVhY2gocHJvZ3Jlc3NFbCA9PiB7XG4gICAgICAgICAgICBwcm9ncmVzc0VsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGVYKCR7c2NhbGVYfSkgc2NhbGVZKCR7c2NhbGVZfSlgO1xuICAgICAgICAgICAgcHJvZ3Jlc3NFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtzd2lwZXIucGFyYW1zLnNwZWVkfW1zYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdjdXN0b20nICYmIHBhcmFtcy5yZW5kZXJDdXN0b20pIHtcbiAgICAgICAgICBzdWJFbC5pbm5lckhUTUwgPSBwYXJhbXMucmVuZGVyQ3VzdG9tKHN3aXBlciwgY3VycmVudCArIDEsIHRvdGFsKTtcbiAgICAgICAgICBpZiAoc3ViRWxJbmRleCA9PT0gMCkgZW1pdCgncGFnaW5hdGlvblJlbmRlcicsIHN1YkVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc3ViRWxJbmRleCA9PT0gMCkgZW1pdCgncGFnaW5hdGlvblJlbmRlcicsIHN1YkVsKTtcbiAgICAgICAgICBlbWl0KCdwYWdpbmF0aW9uVXBkYXRlJywgc3ViRWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgICAgICBzdWJFbC5jbGFzc0xpc3Rbc3dpcGVyLmlzTG9ja2VkID8gJ2FkZCcgOiAncmVtb3ZlJ10ocGFyYW1zLmxvY2tDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAvLyBSZW5kZXIgQ29udGFpbmVyXG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb247XG4gICAgICBpZiAoaXNQYWdpbmF0aW9uRGlzYWJsZWQoKSkgcmV0dXJuO1xuICAgICAgY29uc3Qgc2xpZGVzTGVuZ3RoID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogc3dpcGVyLmdyaWQgJiYgc3dpcGVyLnBhcmFtcy5ncmlkLnJvd3MgPiAxID8gc3dpcGVyLnNsaWRlcy5sZW5ndGggLyBNYXRoLmNlaWwoc3dpcGVyLnBhcmFtcy5ncmlkLnJvd3MpIDogc3dpcGVyLnNsaWRlcy5sZW5ndGg7XG4gICAgICBsZXQgZWwgPSBzd2lwZXIucGFnaW5hdGlvbi5lbDtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgbGV0IHBhZ2luYXRpb25IVE1MID0gJyc7XG4gICAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdidWxsZXRzJykge1xuICAgICAgICBsZXQgbnVtYmVyT2ZCdWxsZXRzID0gc3dpcGVyLnBhcmFtcy5sb29wID8gTWF0aC5jZWlsKHNsaWRlc0xlbmd0aCAvIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXApIDogc3dpcGVyLnNuYXBHcmlkLmxlbmd0aDtcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuZnJlZU1vZGUgJiYgc3dpcGVyLnBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmIG51bWJlck9mQnVsbGV0cyA+IHNsaWRlc0xlbmd0aCkge1xuICAgICAgICAgIG51bWJlck9mQnVsbGV0cyA9IHNsaWRlc0xlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQnVsbGV0czsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKHBhcmFtcy5yZW5kZXJCdWxsZXQpIHtcbiAgICAgICAgICAgIHBhZ2luYXRpb25IVE1MICs9IHBhcmFtcy5yZW5kZXJCdWxsZXQuY2FsbChzd2lwZXIsIGksIHBhcmFtcy5idWxsZXRDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgcGFnaW5hdGlvbkhUTUwgKz0gYDwke3BhcmFtcy5idWxsZXRFbGVtZW50fSAke3N3aXBlci5pc0VsZW1lbnQgPyAncGFydD1cImJ1bGxldFwiJyA6ICcnfSBjbGFzcz1cIiR7cGFyYW1zLmJ1bGxldENsYXNzfVwiPjwvJHtwYXJhbXMuYnVsbGV0RWxlbWVudH0+YDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2ZyYWN0aW9uJykge1xuICAgICAgICBpZiAocGFyYW1zLnJlbmRlckZyYWN0aW9uKSB7XG4gICAgICAgICAgcGFnaW5hdGlvbkhUTUwgPSBwYXJhbXMucmVuZGVyRnJhY3Rpb24uY2FsbChzd2lwZXIsIHBhcmFtcy5jdXJyZW50Q2xhc3MsIHBhcmFtcy50b3RhbENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWdpbmF0aW9uSFRNTCA9IGA8c3BhbiBjbGFzcz1cIiR7cGFyYW1zLmN1cnJlbnRDbGFzc31cIj48L3NwYW4+YCArICcgLyAnICsgYDxzcGFuIGNsYXNzPVwiJHtwYXJhbXMudG90YWxDbGFzc31cIj48L3NwYW4+YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy50eXBlID09PSAncHJvZ3Jlc3NiYXInKSB7XG4gICAgICAgIGlmIChwYXJhbXMucmVuZGVyUHJvZ3Jlc3NiYXIpIHtcbiAgICAgICAgICBwYWdpbmF0aW9uSFRNTCA9IHBhcmFtcy5yZW5kZXJQcm9ncmVzc2Jhci5jYWxsKHN3aXBlciwgcGFyYW1zLnByb2dyZXNzYmFyRmlsbENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWdpbmF0aW9uSFRNTCA9IGA8c3BhbiBjbGFzcz1cIiR7cGFyYW1zLnByb2dyZXNzYmFyRmlsbENsYXNzfVwiPjwvc3Bhbj5gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzID0gW107XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgaWYgKHBhcmFtcy50eXBlICE9PSAnY3VzdG9tJykge1xuICAgICAgICAgIHN1YkVsLmlubmVySFRNTCA9IHBhZ2luYXRpb25IVE1MIHx8ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2J1bGxldHMnKSB7XG4gICAgICAgICAgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cy5wdXNoKC4uLnN1YkVsLnF1ZXJ5U2VsZWN0b3JBbGwoY2xhc3Nlc1RvU2VsZWN0b3IocGFyYW1zLmJ1bGxldENsYXNzKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChwYXJhbXMudHlwZSAhPT0gJ2N1c3RvbScpIHtcbiAgICAgICAgZW1pdCgncGFnaW5hdGlvblJlbmRlcicsIGVsWzBdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbiA9IGNyZWF0ZUVsZW1lbnRJZk5vdERlZmluZWQoc3dpcGVyLCBzd2lwZXIub3JpZ2luYWxQYXJhbXMucGFnaW5hdGlvbiwgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLCB7XG4gICAgICAgIGVsOiAnc3dpcGVyLXBhZ2luYXRpb24nXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmICghcGFyYW1zLmVsKSByZXR1cm47XG4gICAgICBsZXQgZWw7XG4gICAgICBpZiAodHlwZW9mIHBhcmFtcy5lbCA9PT0gJ3N0cmluZycgJiYgc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICBlbCA9IHN3aXBlci5lbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy5lbCk7XG4gICAgICB9XG4gICAgICBpZiAoIWVsICYmIHR5cGVvZiBwYXJhbXMuZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVsID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLmVsKV07XG4gICAgICB9XG4gICAgICBpZiAoIWVsKSB7XG4gICAgICAgIGVsID0gcGFyYW1zLmVsO1xuICAgICAgfVxuICAgICAgaWYgKCFlbCB8fCBlbC5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzICYmIHR5cGVvZiBwYXJhbXMuZWwgPT09ICdzdHJpbmcnICYmIEFycmF5LmlzQXJyYXkoZWwpICYmIGVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZWwgPSBbLi4uc3dpcGVyLmVsLnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLmVsKV07XG4gICAgICAgIC8vIGNoZWNrIGlmIGl0IGJlbG9uZ3MgdG8gYW5vdGhlciBuZXN0ZWQgU3dpcGVyXG4gICAgICAgIGlmIChlbC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgZWwgPSBlbC5maWx0ZXIoc3ViRWwgPT4ge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRQYXJlbnRzKHN1YkVsLCAnLnN3aXBlcicpWzBdICE9PSBzd2lwZXIuZWwpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShlbCkgJiYgZWwubGVuZ3RoID09PSAxKSBlbCA9IGVsWzBdO1xuICAgICAgT2JqZWN0LmFzc2lnbihzd2lwZXIucGFnaW5hdGlvbiwge1xuICAgICAgICBlbFxuICAgICAgfSk7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdidWxsZXRzJyAmJiBwYXJhbXMuY2xpY2thYmxlKSB7XG4gICAgICAgICAgc3ViRWwuY2xhc3NMaXN0LmFkZCguLi4ocGFyYW1zLmNsaWNrYWJsZUNsYXNzIHx8ICcnKS5zcGxpdCgnICcpKTtcbiAgICAgICAgfVxuICAgICAgICBzdWJFbC5jbGFzc0xpc3QuYWRkKHBhcmFtcy5tb2RpZmllckNsYXNzICsgcGFyYW1zLnR5cGUpO1xuICAgICAgICBzdWJFbC5jbGFzc0xpc3QuYWRkKHN3aXBlci5pc0hvcml6b250YWwoKSA/IHBhcmFtcy5ob3Jpem9udGFsQ2xhc3MgOiBwYXJhbXMudmVydGljYWxDbGFzcyk7XG4gICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2J1bGxldHMnICYmIHBhcmFtcy5keW5hbWljQnVsbGV0cykge1xuICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdC5hZGQoYCR7cGFyYW1zLm1vZGlmaWVyQ2xhc3N9JHtwYXJhbXMudHlwZX0tZHluYW1pY2ApO1xuICAgICAgICAgIGR5bmFtaWNCdWxsZXRJbmRleCA9IDA7XG4gICAgICAgICAgaWYgKHBhcmFtcy5keW5hbWljTWFpbkJ1bGxldHMgPCAxKSB7XG4gICAgICAgICAgICBwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy50eXBlID09PSAncHJvZ3Jlc3NiYXInICYmIHBhcmFtcy5wcm9ncmVzc2Jhck9wcG9zaXRlKSB7XG4gICAgICAgICAgc3ViRWwuY2xhc3NMaXN0LmFkZChwYXJhbXMucHJvZ3Jlc3NiYXJPcHBvc2l0ZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLmNsaWNrYWJsZSkge1xuICAgICAgICAgIHN1YkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CdWxsZXRDbGljayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzd2lwZXIuZW5hYmxlZCkge1xuICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdC5hZGQocGFyYW1zLmxvY2tDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICAgaWYgKGlzUGFnaW5hdGlvbkRpc2FibGVkKCkpIHJldHVybjtcbiAgICAgIGxldCBlbCA9IHN3aXBlci5wYWdpbmF0aW9uLmVsO1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgICBzdWJFbC5jbGFzc0xpc3QucmVtb3ZlKHBhcmFtcy5oaWRkZW5DbGFzcyk7XG4gICAgICAgICAgc3ViRWwuY2xhc3NMaXN0LnJlbW92ZShwYXJhbXMubW9kaWZpZXJDbGFzcyArIHBhcmFtcy50eXBlKTtcbiAgICAgICAgICBzdWJFbC5jbGFzc0xpc3QucmVtb3ZlKHN3aXBlci5pc0hvcml6b250YWwoKSA/IHBhcmFtcy5ob3Jpem9udGFsQ2xhc3MgOiBwYXJhbXMudmVydGljYWxDbGFzcyk7XG4gICAgICAgICAgaWYgKHBhcmFtcy5jbGlja2FibGUpIHtcbiAgICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdC5yZW1vdmUoLi4uKHBhcmFtcy5jbGlja2FibGVDbGFzcyB8fCAnJykuc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICBzdWJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQnVsbGV0Q2xpY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cykgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cy5mb3JFYWNoKHN1YkVsID0+IHN1YkVsLmNsYXNzTGlzdC5yZW1vdmUoLi4ucGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzLnNwbGl0KCcgJykpKTtcbiAgICB9XG4gICAgb24oJ2NoYW5nZURpcmVjdGlvbicsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhZ2luYXRpb24gfHwgIXN3aXBlci5wYWdpbmF0aW9uLmVsKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb247XG4gICAgICBsZXQge1xuICAgICAgICBlbFxuICAgICAgfSA9IHN3aXBlci5wYWdpbmF0aW9uO1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuY2xhc3NMaXN0LnJlbW92ZShwYXJhbXMuaG9yaXpvbnRhbENsYXNzLCBwYXJhbXMudmVydGljYWxDbGFzcyk7XG4gICAgICAgIHN1YkVsLmNsYXNzTGlzdC5hZGQoc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gcGFyYW1zLmhvcml6b250YWxDbGFzcyA6IHBhcmFtcy52ZXJ0aWNhbENsYXNzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIG9uKCdpbml0JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5lbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgZGlzYWJsZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdCgpO1xuICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgdXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ2FjdGl2ZUluZGV4Q2hhbmdlJywgKCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBzd2lwZXIuc25hcEluZGV4ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignc25hcEluZGV4Q2hhbmdlJywgKCkgPT4ge1xuICAgICAgdXBkYXRlKCk7XG4gICAgfSk7XG4gICAgb24oJ3NuYXBHcmlkTGVuZ3RoQ2hhbmdlJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKCk7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICBvbignZW5hYmxlIGRpc2FibGUnLCAoKSA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBlbFxuICAgICAgfSA9IHN3aXBlci5wYWdpbmF0aW9uO1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHN1YkVsLmNsYXNzTGlzdFtzd2lwZXIuZW5hYmxlZCA/ICdyZW1vdmUnIDogJ2FkZCddKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5sb2NrQ2xhc3MpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignbG9jayB1bmxvY2snLCAoKSA9PiB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9KTtcbiAgICBvbignY2xpY2snLCAoX3MsIGUpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldEVsID0gZS50YXJnZXQ7XG4gICAgICBjb25zdCBlbCA9IG1ha2VFbGVtZW50c0FycmF5KHN3aXBlci5wYWdpbmF0aW9uLmVsKTtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uZWwgJiYgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmhpZGVPbkNsaWNrICYmIGVsICYmIGVsLmxlbmd0aCA+IDAgJiYgIXRhcmdldEVsLmNsYXNzTGlzdC5jb250YWlucyhzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MpKSB7XG4gICAgICAgIGlmIChzd2lwZXIubmF2aWdhdGlvbiAmJiAoc3dpcGVyLm5hdmlnYXRpb24ubmV4dEVsICYmIHRhcmdldEVsID09PSBzd2lwZXIubmF2aWdhdGlvbi5uZXh0RWwgfHwgc3dpcGVyLm5hdmlnYXRpb24ucHJldkVsICYmIHRhcmdldEVsID09PSBzd2lwZXIubmF2aWdhdGlvbi5wcmV2RWwpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGlzSGlkZGVuID0gZWxbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5oaWRkZW5DbGFzcyk7XG4gICAgICAgIGlmIChpc0hpZGRlbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGVtaXQoJ3BhZ2luYXRpb25TaG93Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW1pdCgncGFnaW5hdGlvbkhpZGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHN1YkVsLmNsYXNzTGlzdC50b2dnbGUoc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmhpZGRlbkNsYXNzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgZW5hYmxlID0gKCkgPT4ge1xuICAgICAgc3dpcGVyLmVsLmNsYXNzTGlzdC5yZW1vdmUoc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLnBhZ2luYXRpb25EaXNhYmxlZENsYXNzKTtcbiAgICAgIGxldCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc3dpcGVyLnBhZ2luYXRpb247XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4gc3ViRWwuY2xhc3NMaXN0LnJlbW92ZShzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpKTtcbiAgICAgIH1cbiAgICAgIGluaXQoKTtcbiAgICAgIHJlbmRlcigpO1xuICAgICAgdXBkYXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCBkaXNhYmxlID0gKCkgPT4ge1xuICAgICAgc3dpcGVyLmVsLmNsYXNzTGlzdC5hZGQoc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLnBhZ2luYXRpb25EaXNhYmxlZENsYXNzKTtcbiAgICAgIGxldCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc3dpcGVyLnBhZ2luYXRpb247XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4gc3ViRWwuY2xhc3NMaXN0LmFkZChzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpKTtcbiAgICAgIH1cbiAgICAgIGRlc3Ryb3koKTtcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnBhZ2luYXRpb24sIHtcbiAgICAgIGVuYWJsZSxcbiAgICAgIGRpc2FibGUsXG4gICAgICByZW5kZXIsXG4gICAgICB1cGRhdGUsXG4gICAgICBpbml0LFxuICAgICAgZGVzdHJveVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gU2Nyb2xsYmFyKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb24sXG4gICAgICBlbWl0XG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgIGxldCBpc1RvdWNoZWQgPSBmYWxzZTtcbiAgICBsZXQgdGltZW91dCA9IG51bGw7XG4gICAgbGV0IGRyYWdUaW1lb3V0ID0gbnVsbDtcbiAgICBsZXQgZHJhZ1N0YXJ0UG9zO1xuICAgIGxldCBkcmFnU2l6ZTtcbiAgICBsZXQgdHJhY2tTaXplO1xuICAgIGxldCBkaXZpZGVyO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBzY3JvbGxiYXI6IHtcbiAgICAgICAgZWw6IG51bGwsXG4gICAgICAgIGRyYWdTaXplOiAnYXV0bycsXG4gICAgICAgIGhpZGU6IGZhbHNlLFxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICBzbmFwT25SZWxlYXNlOiB0cnVlLFxuICAgICAgICBsb2NrQ2xhc3M6ICdzd2lwZXItc2Nyb2xsYmFyLWxvY2snLFxuICAgICAgICBkcmFnQ2xhc3M6ICdzd2lwZXItc2Nyb2xsYmFyLWRyYWcnLFxuICAgICAgICBzY3JvbGxiYXJEaXNhYmxlZENsYXNzOiAnc3dpcGVyLXNjcm9sbGJhci1kaXNhYmxlZCcsXG4gICAgICAgIGhvcml6b250YWxDbGFzczogYHN3aXBlci1zY3JvbGxiYXItaG9yaXpvbnRhbGAsXG4gICAgICAgIHZlcnRpY2FsQ2xhc3M6IGBzd2lwZXItc2Nyb2xsYmFyLXZlcnRpY2FsYFxuICAgICAgfVxuICAgIH0pO1xuICAgIHN3aXBlci5zY3JvbGxiYXIgPSB7XG4gICAgICBlbDogbnVsbCxcbiAgICAgIGRyYWdFbDogbnVsbFxuICAgIH07XG4gICAgZnVuY3Rpb24gc2V0VHJhbnNsYXRlKCkge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhc3dpcGVyLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgICAgY29uc3Qge1xuICAgICAgICBzY3JvbGxiYXIsXG4gICAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3Qge1xuICAgICAgICBkcmFnRWwsXG4gICAgICAgIGVsXG4gICAgICB9ID0gc2Nyb2xsYmFyO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXI7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IHN3aXBlci5wYXJhbXMubG9vcCA/IHN3aXBlci5wcm9ncmVzc0xvb3AgOiBzd2lwZXIucHJvZ3Jlc3M7XG4gICAgICBsZXQgbmV3U2l6ZSA9IGRyYWdTaXplO1xuICAgICAgbGV0IG5ld1BvcyA9ICh0cmFja1NpemUgLSBkcmFnU2l6ZSkgKiBwcm9ncmVzcztcbiAgICAgIGlmIChydGwpIHtcbiAgICAgICAgbmV3UG9zID0gLW5ld1BvcztcbiAgICAgICAgaWYgKG5ld1BvcyA+IDApIHtcbiAgICAgICAgICBuZXdTaXplID0gZHJhZ1NpemUgLSBuZXdQb3M7XG4gICAgICAgICAgbmV3UG9zID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICgtbmV3UG9zICsgZHJhZ1NpemUgPiB0cmFja1NpemUpIHtcbiAgICAgICAgICBuZXdTaXplID0gdHJhY2tTaXplICsgbmV3UG9zO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5ld1BvcyA8IDApIHtcbiAgICAgICAgbmV3U2l6ZSA9IGRyYWdTaXplICsgbmV3UG9zO1xuICAgICAgICBuZXdQb3MgPSAwO1xuICAgICAgfSBlbHNlIGlmIChuZXdQb3MgKyBkcmFnU2l6ZSA+IHRyYWNrU2l6ZSkge1xuICAgICAgICBuZXdTaXplID0gdHJhY2tTaXplIC0gbmV3UG9zO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICBkcmFnRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7bmV3UG9zfXB4LCAwLCAwKWA7XG4gICAgICAgIGRyYWdFbC5zdHlsZS53aWR0aCA9IGAke25ld1NpemV9cHhgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwcHgsICR7bmV3UG9zfXB4LCAwKWA7XG4gICAgICAgIGRyYWdFbC5zdHlsZS5oZWlnaHQgPSBgJHtuZXdTaXplfXB4YDtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMuaGlkZSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzQwMG1zJztcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZHVyYXRpb24pIHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgIXN3aXBlci5zY3JvbGxiYXIuZWwpIHJldHVybjtcbiAgICAgIHN3aXBlci5zY3JvbGxiYXIuZHJhZ0VsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlU2l6ZSgpIHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgIXN3aXBlci5zY3JvbGxiYXIuZWwpIHJldHVybjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2Nyb2xsYmFyXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3Qge1xuICAgICAgICBkcmFnRWwsXG4gICAgICAgIGVsXG4gICAgICB9ID0gc2Nyb2xsYmFyO1xuICAgICAgZHJhZ0VsLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICBkcmFnRWwuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICB0cmFja1NpemUgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBlbC5vZmZzZXRXaWR0aCA6IGVsLm9mZnNldEhlaWdodDtcbiAgICAgIGRpdmlkZXIgPSBzd2lwZXIuc2l6ZSAvIChzd2lwZXIudmlydHVhbFNpemUgKyBzd2lwZXIucGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZSAtIChzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzID8gc3dpcGVyLnNuYXBHcmlkWzBdIDogMCkpO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdTaXplID09PSAnYXV0bycpIHtcbiAgICAgICAgZHJhZ1NpemUgPSB0cmFja1NpemUgKiBkaXZpZGVyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHJhZ1NpemUgPSBwYXJzZUludChzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5kcmFnU2l6ZSwgMTApO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICBkcmFnRWwuc3R5bGUud2lkdGggPSBgJHtkcmFnU2l6ZX1weGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkcmFnRWwuc3R5bGUuaGVpZ2h0ID0gYCR7ZHJhZ1NpemV9cHhgO1xuICAgICAgfVxuICAgICAgaWYgKGRpdmlkZXIgPj0gMSkge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmhpZGUpIHtcbiAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHN3aXBlci5lbmFibGVkKSB7XG4gICAgICAgIHNjcm9sbGJhci5lbC5jbGFzc0xpc3Rbc3dpcGVyLmlzTG9ja2VkID8gJ2FkZCcgOiAncmVtb3ZlJ10oc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIubG9ja0NsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0UG9pbnRlclBvc2l0aW9uKGUpIHtcbiAgICAgIHJldHVybiBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBlLmNsaWVudFggOiBlLmNsaWVudFk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldERyYWdQb3NpdGlvbihlKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNjcm9sbGJhcixcbiAgICAgICAgcnRsVHJhbnNsYXRlOiBydGxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc2Nyb2xsYmFyO1xuICAgICAgbGV0IHBvc2l0aW9uUmF0aW87XG4gICAgICBwb3NpdGlvblJhdGlvID0gKGdldFBvaW50ZXJQb3NpdGlvbihlKSAtIGVsZW1lbnRPZmZzZXQoZWwpW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdsZWZ0JyA6ICd0b3AnXSAtIChkcmFnU3RhcnRQb3MgIT09IG51bGwgPyBkcmFnU3RhcnRQb3MgOiBkcmFnU2l6ZSAvIDIpKSAvICh0cmFja1NpemUgLSBkcmFnU2l6ZSk7XG4gICAgICBwb3NpdGlvblJhdGlvID0gTWF0aC5tYXgoTWF0aC5taW4ocG9zaXRpb25SYXRpbywgMSksIDApO1xuICAgICAgaWYgKHJ0bCkge1xuICAgICAgICBwb3NpdGlvblJhdGlvID0gMSAtIHBvc2l0aW9uUmF0aW87XG4gICAgICB9XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKSArIChzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpICogcG9zaXRpb25SYXRpbztcbiAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhwb3NpdGlvbik7XG4gICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKHBvc2l0aW9uKTtcbiAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25EcmFnU3RhcnQoZSkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNjcm9sbGJhcixcbiAgICAgICAgd3JhcHBlckVsXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3Qge1xuICAgICAgICBlbCxcbiAgICAgICAgZHJhZ0VsXG4gICAgICB9ID0gc2Nyb2xsYmFyO1xuICAgICAgaXNUb3VjaGVkID0gdHJ1ZTtcbiAgICAgIGRyYWdTdGFydFBvcyA9IGUudGFyZ2V0ID09PSBkcmFnRWwgPyBnZXRQb2ludGVyUG9zaXRpb24oZSkgLSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAnbGVmdCcgOiAndG9wJ10gOiBudWxsO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHdyYXBwZXJFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMTAwbXMnO1xuICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcxMDBtcyc7XG4gICAgICBzZXREcmFnUG9zaXRpb24oZSk7XG4gICAgICBjbGVhclRpbWVvdXQoZHJhZ1RpbWVvdXQpO1xuICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzBtcyc7XG4gICAgICBpZiAocGFyYW1zLmhpZGUpIHtcbiAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGVbJ3Njcm9sbC1zbmFwLXR5cGUnXSA9ICdub25lJztcbiAgICAgIH1cbiAgICAgIGVtaXQoJ3Njcm9sbGJhckRyYWdTdGFydCcsIGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkRyYWdNb3ZlKGUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2Nyb2xsYmFyLFxuICAgICAgICB3cmFwcGVyRWxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVsLFxuICAgICAgICBkcmFnRWxcbiAgICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgICBpZiAoIWlzVG91Y2hlZCkgcmV0dXJuO1xuICAgICAgaWYgKGUucHJldmVudERlZmF1bHQgJiYgZS5jYW5jZWxhYmxlKSBlLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICBzZXREcmFnUG9zaXRpb24oZSk7XG4gICAgICB3cmFwcGVyRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzBtcyc7XG4gICAgICBlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMG1zJztcbiAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMG1zJztcbiAgICAgIGVtaXQoJ3Njcm9sbGJhckRyYWdNb3ZlJywgZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uRHJhZ0VuZChlKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnNjcm9sbGJhcjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2Nyb2xsYmFyLFxuICAgICAgICB3cmFwcGVyRWxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc2Nyb2xsYmFyO1xuICAgICAgaWYgKCFpc1RvdWNoZWQpIHJldHVybjtcbiAgICAgIGlzVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlWydzY3JvbGwtc25hcC10eXBlJ10gPSAnJztcbiAgICAgICAgd3JhcHBlckVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy5oaWRlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkcmFnVGltZW91dCk7XG4gICAgICAgIGRyYWdUaW1lb3V0ID0gbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICc0MDBtcyc7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfVxuICAgICAgZW1pdCgnc2Nyb2xsYmFyRHJhZ0VuZCcsIGUpO1xuICAgICAgaWYgKHBhcmFtcy5zbmFwT25SZWxlYXNlKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvQ2xvc2VzdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBldmVudHMobWV0aG9kKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNjcm9sbGJhcixcbiAgICAgICAgcGFyYW1zXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgZWwgPSBzY3JvbGxiYXIuZWw7XG4gICAgICBpZiAoIWVsKSByZXR1cm47XG4gICAgICBjb25zdCB0YXJnZXQgPSBlbDtcbiAgICAgIGNvbnN0IGFjdGl2ZUxpc3RlbmVyID0gcGFyYW1zLnBhc3NpdmVMaXN0ZW5lcnMgPyB7XG4gICAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgICBjYXB0dXJlOiBmYWxzZVxuICAgICAgfSA6IGZhbHNlO1xuICAgICAgY29uc3QgcGFzc2l2ZUxpc3RlbmVyID0gcGFyYW1zLnBhc3NpdmVMaXN0ZW5lcnMgPyB7XG4gICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICAgIGNhcHR1cmU6IGZhbHNlXG4gICAgICB9IDogZmFsc2U7XG4gICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgICAgY29uc3QgZXZlbnRNZXRob2QgPSBtZXRob2QgPT09ICdvbicgPyAnYWRkRXZlbnRMaXN0ZW5lcicgOiAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG4gICAgICB0YXJnZXRbZXZlbnRNZXRob2RdKCdwb2ludGVyZG93bicsIG9uRHJhZ1N0YXJ0LCBhY3RpdmVMaXN0ZW5lcik7XG4gICAgICBkb2N1bWVudFtldmVudE1ldGhvZF0oJ3BvaW50ZXJtb3ZlJywgb25EcmFnTW92ZSwgYWN0aXZlTGlzdGVuZXIpO1xuICAgICAgZG9jdW1lbnRbZXZlbnRNZXRob2RdKCdwb2ludGVydXAnLCBvbkRyYWdFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVuYWJsZURyYWdnYWJsZSgpIHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgIXN3aXBlci5zY3JvbGxiYXIuZWwpIHJldHVybjtcbiAgICAgIGV2ZW50cygnb24nKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGlzYWJsZURyYWdnYWJsZSgpIHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgIXN3aXBlci5zY3JvbGxiYXIuZWwpIHJldHVybjtcbiAgICAgIGV2ZW50cygnb2ZmJyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNjcm9sbGJhcixcbiAgICAgICAgZWw6IHN3aXBlckVsXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIgPSBjcmVhdGVFbGVtZW50SWZOb3REZWZpbmVkKHN3aXBlciwgc3dpcGVyLm9yaWdpbmFsUGFyYW1zLnNjcm9sbGJhciwgc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIsIHtcbiAgICAgICAgZWw6ICdzd2lwZXItc2Nyb2xsYmFyJ1xuICAgICAgfSk7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnNjcm9sbGJhcjtcbiAgICAgIGlmICghcGFyYW1zLmVsKSByZXR1cm47XG4gICAgICBsZXQgZWw7XG4gICAgICBpZiAodHlwZW9mIHBhcmFtcy5lbCA9PT0gJ3N0cmluZycgJiYgc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICBlbCA9IHN3aXBlci5lbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy5lbCk7XG4gICAgICB9XG4gICAgICBpZiAoIWVsICYmIHR5cGVvZiBwYXJhbXMuZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChwYXJhbXMuZWwpO1xuICAgICAgICBpZiAoIWVsLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmICghZWwpIHtcbiAgICAgICAgZWwgPSBwYXJhbXMuZWw7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy51bmlxdWVOYXZFbGVtZW50cyAmJiB0eXBlb2YgcGFyYW1zLmVsID09PSAnc3RyaW5nJyAmJiBlbC5sZW5ndGggPiAxICYmIHN3aXBlckVsLnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLmVsKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZWwgPSBzd2lwZXJFbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy5lbCk7XG4gICAgICB9XG4gICAgICBpZiAoZWwubGVuZ3RoID4gMCkgZWwgPSBlbFswXTtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gcGFyYW1zLmhvcml6b250YWxDbGFzcyA6IHBhcmFtcy52ZXJ0aWNhbENsYXNzKTtcbiAgICAgIGxldCBkcmFnRWw7XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgZHJhZ0VsID0gZWwucXVlcnlTZWxlY3RvcihjbGFzc2VzVG9TZWxlY3Rvcihzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5kcmFnQ2xhc3MpKTtcbiAgICAgICAgaWYgKCFkcmFnRWwpIHtcbiAgICAgICAgICBkcmFnRWwgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5kcmFnQ2xhc3MpO1xuICAgICAgICAgIGVsLmFwcGVuZChkcmFnRWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKHNjcm9sbGJhciwge1xuICAgICAgICBlbCxcbiAgICAgICAgZHJhZ0VsXG4gICAgICB9KTtcbiAgICAgIGlmIChwYXJhbXMuZHJhZ2dhYmxlKSB7XG4gICAgICAgIGVuYWJsZURyYWdnYWJsZSgpO1xuICAgICAgfVxuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdFtzd2lwZXIuZW5hYmxlZCA/ICdyZW1vdmUnIDogJ2FkZCddKC4uLmNsYXNzZXNUb1Rva2Vucyhzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5sb2NrQ2xhc3MpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyO1xuICAgICAgY29uc3QgZWwgPSBzd2lwZXIuc2Nyb2xsYmFyLmVsO1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3Nlc1RvVG9rZW5zKHN3aXBlci5pc0hvcml6b250YWwoKSA/IHBhcmFtcy5ob3Jpem9udGFsQ2xhc3MgOiBwYXJhbXMudmVydGljYWxDbGFzcykpO1xuICAgICAgfVxuICAgICAgZGlzYWJsZURyYWdnYWJsZSgpO1xuICAgIH1cbiAgICBvbignY2hhbmdlRGlyZWN0aW9uJywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIuc2Nyb2xsYmFyIHx8ICFzd2lwZXIuc2Nyb2xsYmFyLmVsKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnNjcm9sbGJhcjtcbiAgICAgIGxldCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc3dpcGVyLnNjcm9sbGJhcjtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLmNsYXNzTGlzdC5yZW1vdmUocGFyYW1zLmhvcml6b250YWxDbGFzcywgcGFyYW1zLnZlcnRpY2FsQ2xhc3MpO1xuICAgICAgICBzdWJFbC5jbGFzc0xpc3QuYWRkKHN3aXBlci5pc0hvcml6b250YWwoKSA/IHBhcmFtcy5ob3Jpem9udGFsQ2xhc3MgOiBwYXJhbXMudmVydGljYWxDbGFzcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgZGlzYWJsZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdCgpO1xuICAgICAgICB1cGRhdGVTaXplKCk7XG4gICAgICAgIHNldFRyYW5zbGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCd1cGRhdGUgcmVzaXplIG9ic2VydmVyVXBkYXRlIGxvY2sgdW5sb2NrIGNoYW5nZURpcmVjdGlvbicsICgpID0+IHtcbiAgICAgIHVwZGF0ZVNpemUoKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNsYXRlJywgKCkgPT4ge1xuICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgfSk7XG4gICAgb24oJ3NldFRyYW5zaXRpb24nLCAoX3MsIGR1cmF0aW9uKSA9PiB7XG4gICAgICBzZXRUcmFuc2l0aW9uKGR1cmF0aW9uKTtcbiAgICB9KTtcbiAgICBvbignZW5hYmxlIGRpc2FibGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc3dpcGVyLnNjcm9sbGJhcjtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICBlbC5jbGFzc0xpc3Rbc3dpcGVyLmVuYWJsZWQgPyAncmVtb3ZlJyA6ICdhZGQnXSguLi5jbGFzc2VzVG9Ub2tlbnMoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIubG9ja0NsYXNzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBkZXN0cm95KCk7XG4gICAgfSk7XG4gICAgY29uc3QgZW5hYmxlID0gKCkgPT4ge1xuICAgICAgc3dpcGVyLmVsLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3Nlc1RvVG9rZW5zKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLnNjcm9sbGJhckRpc2FibGVkQ2xhc3MpKTtcbiAgICAgIGlmIChzd2lwZXIuc2Nyb2xsYmFyLmVsKSB7XG4gICAgICAgIHN3aXBlci5zY3JvbGxiYXIuZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc2VzVG9Ub2tlbnMoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuc2Nyb2xsYmFyRGlzYWJsZWRDbGFzcykpO1xuICAgICAgfVxuICAgICAgaW5pdCgpO1xuICAgICAgdXBkYXRlU2l6ZSgpO1xuICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCBkaXNhYmxlID0gKCkgPT4ge1xuICAgICAgc3dpcGVyLmVsLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3Nlc1RvVG9rZW5zKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLnNjcm9sbGJhckRpc2FibGVkQ2xhc3MpKTtcbiAgICAgIGlmIChzd2lwZXIuc2Nyb2xsYmFyLmVsKSB7XG4gICAgICAgIHN3aXBlci5zY3JvbGxiYXIuZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzVG9Ub2tlbnMoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuc2Nyb2xsYmFyRGlzYWJsZWRDbGFzcykpO1xuICAgICAgfVxuICAgICAgZGVzdHJveSgpO1xuICAgIH07XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIuc2Nyb2xsYmFyLCB7XG4gICAgICBlbmFibGUsXG4gICAgICBkaXNhYmxlLFxuICAgICAgdXBkYXRlU2l6ZSxcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIGluaXQsXG4gICAgICBkZXN0cm95XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBQYXJhbGxheChfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIHBhcmFsbGF4OiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgZWxlbWVudHNTZWxlY3RvciA9ICdbZGF0YS1zd2lwZXItcGFyYWxsYXhdLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgteF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC15XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LW9wYWNpdHldLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgtc2NhbGVdJztcbiAgICBjb25zdCBzZXRUcmFuc2Zvcm0gPSAoZWwsIHByb2dyZXNzKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHJ0bFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHJ0bEZhY3RvciA9IHJ0bCA/IC0xIDogMTtcbiAgICAgIGNvbnN0IHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXBhcmFsbGF4JykgfHwgJzAnO1xuICAgICAgbGV0IHggPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXBhcmFsbGF4LXgnKTtcbiAgICAgIGxldCB5ID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1wYXJhbGxheC15Jyk7XG4gICAgICBjb25zdCBzY2FsZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItcGFyYWxsYXgtc2NhbGUnKTtcbiAgICAgIGNvbnN0IG9wYWNpdHkgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXBhcmFsbGF4LW9wYWNpdHknKTtcbiAgICAgIGNvbnN0IHJvdGF0ZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItcGFyYWxsYXgtcm90YXRlJyk7XG4gICAgICBpZiAoeCB8fCB5KSB7XG4gICAgICAgIHggPSB4IHx8ICcwJztcbiAgICAgICAgeSA9IHkgfHwgJzAnO1xuICAgICAgfSBlbHNlIGlmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgeCA9IHA7XG4gICAgICAgIHkgPSAnMCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5ID0gcDtcbiAgICAgICAgeCA9ICcwJztcbiAgICAgIH1cbiAgICAgIGlmICh4LmluZGV4T2YoJyUnKSA+PSAwKSB7XG4gICAgICAgIHggPSBgJHtwYXJzZUludCh4LCAxMCkgKiBwcm9ncmVzcyAqIHJ0bEZhY3Rvcn0lYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSBgJHt4ICogcHJvZ3Jlc3MgKiBydGxGYWN0b3J9cHhgO1xuICAgICAgfVxuICAgICAgaWYgKHkuaW5kZXhPZignJScpID49IDApIHtcbiAgICAgICAgeSA9IGAke3BhcnNlSW50KHksIDEwKSAqIHByb2dyZXNzfSVgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeSA9IGAke3kgKiBwcm9ncmVzc31weGA7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9wYWNpdHkgIT09ICd1bmRlZmluZWQnICYmIG9wYWNpdHkgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY3VycmVudE9wYWNpdHkgPSBvcGFjaXR5IC0gKG9wYWNpdHkgLSAxKSAqICgxIC0gTWF0aC5hYnMocHJvZ3Jlc3MpKTtcbiAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IGN1cnJlbnRPcGFjaXR5O1xuICAgICAgfVxuICAgICAgbGV0IHRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3h9LCAke3l9LCAwcHgpYDtcbiAgICAgIGlmICh0eXBlb2Ygc2NhbGUgIT09ICd1bmRlZmluZWQnICYmIHNjYWxlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2FsZSA9IHNjYWxlIC0gKHNjYWxlIC0gMSkgKiAoMSAtIE1hdGguYWJzKHByb2dyZXNzKSk7XG4gICAgICAgIHRyYW5zZm9ybSArPSBgIHNjYWxlKCR7Y3VycmVudFNjYWxlfSlgO1xuICAgICAgfVxuICAgICAgaWYgKHJvdGF0ZSAmJiB0eXBlb2Ygcm90YXRlICE9PSAndW5kZWZpbmVkJyAmJiByb3RhdGUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFJvdGF0ZSA9IHJvdGF0ZSAqIHByb2dyZXNzICogLTE7XG4gICAgICAgIHRyYW5zZm9ybSArPSBgIHJvdGF0ZSgke2N1cnJlbnRSb3RhdGV9ZGVnKWA7XG4gICAgICB9XG4gICAgICBlbC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgfTtcbiAgICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVsLFxuICAgICAgICBzbGlkZXMsXG4gICAgICAgIHByb2dyZXNzLFxuICAgICAgICBzbmFwR3JpZCxcbiAgICAgICAgaXNFbGVtZW50XG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgZWxlbWVudHMgPSBlbGVtZW50Q2hpbGRyZW4oZWwsIGVsZW1lbnRzU2VsZWN0b3IpO1xuICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudHMucHVzaCguLi5lbGVtZW50Q2hpbGRyZW4oc3dpcGVyLmhvc3RFbCwgZWxlbWVudHNTZWxlY3RvcikpO1xuICAgICAgfVxuICAgICAgZWxlbWVudHMuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHNldFRyYW5zZm9ybShzdWJFbCwgcHJvZ3Jlc3MpO1xuICAgICAgfSk7XG4gICAgICBzbGlkZXMuZm9yRWFjaCgoc2xpZGVFbCwgc2xpZGVJbmRleCkgPT4ge1xuICAgICAgICBsZXQgc2xpZGVQcm9ncmVzcyA9IHNsaWRlRWwucHJvZ3Jlc3M7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwID4gMSAmJiBzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgIT09ICdhdXRvJykge1xuICAgICAgICAgIHNsaWRlUHJvZ3Jlc3MgKz0gTWF0aC5jZWlsKHNsaWRlSW5kZXggLyAyKSAtIHByb2dyZXNzICogKHNuYXBHcmlkLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHNsaWRlUHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heChzbGlkZVByb2dyZXNzLCAtMSksIDEpO1xuICAgICAgICBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoYCR7ZWxlbWVudHNTZWxlY3Rvcn0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1yb3RhdGVdYCkuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgICAgc2V0VHJhbnNmb3JtKHN1YkVsLCBzbGlkZVByb2dyZXNzKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcbiAgICAgIGlmIChkdXJhdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGR1cmF0aW9uID0gc3dpcGVyLnBhcmFtcy5zcGVlZDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWwsXG4gICAgICAgIGhvc3RFbFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IGVsZW1lbnRzID0gWy4uLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudHNTZWxlY3RvcildO1xuICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudHMucHVzaCguLi5ob3N0RWwucXVlcnlTZWxlY3RvckFsbChlbGVtZW50c1NlbGVjdG9yKSk7XG4gICAgICB9XG4gICAgICBlbGVtZW50cy5mb3JFYWNoKHBhcmFsbGF4RWwgPT4ge1xuICAgICAgICBsZXQgcGFyYWxsYXhEdXJhdGlvbiA9IHBhcnNlSW50KHBhcmFsbGF4RWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1wYXJhbGxheC1kdXJhdGlvbicpLCAxMCkgfHwgZHVyYXRpb247XG4gICAgICAgIGlmIChkdXJhdGlvbiA9PT0gMCkgcGFyYWxsYXhEdXJhdGlvbiA9IDA7XG4gICAgICAgIHBhcmFsbGF4RWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7cGFyYWxsYXhEdXJhdGlvbn1tc2A7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnBhcmFsbGF4LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHN3aXBlci5wYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9IHRydWU7XG4gICAgICBzd2lwZXIub3JpZ2luYWxQYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9IHRydWU7XG4gICAgfSk7XG4gICAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgfSk7XG4gICAgb24oJ3NldFRyYW5zbGF0ZScsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5wYXJhbGxheC5lbmFibGVkKSByZXR1cm47XG4gICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNpdGlvbicsIChfc3dpcGVyLCBkdXJhdGlvbikgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnBhcmFsbGF4LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHNldFRyYW5zaXRpb24oZHVyYXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gWm9vbShfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uLFxuICAgICAgZW1pdFxuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICB6b29tOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBsaW1pdFRvT3JpZ2luYWxTaXplOiBmYWxzZSxcbiAgICAgICAgbWF4UmF0aW86IDMsXG4gICAgICAgIG1pblJhdGlvOiAxLFxuICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgIGNvbnRhaW5lckNsYXNzOiAnc3dpcGVyLXpvb20tY29udGFpbmVyJyxcbiAgICAgICAgem9vbWVkU2xpZGVDbGFzczogJ3N3aXBlci1zbGlkZS16b29tZWQnXG4gICAgICB9XG4gICAgfSk7XG4gICAgc3dpcGVyLnpvb20gPSB7XG4gICAgICBlbmFibGVkOiBmYWxzZVxuICAgIH07XG4gICAgbGV0IGN1cnJlbnRTY2FsZSA9IDE7XG4gICAgbGV0IGlzU2NhbGluZyA9IGZhbHNlO1xuICAgIGxldCBmYWtlR2VzdHVyZVRvdWNoZWQ7XG4gICAgbGV0IGZha2VHZXN0dXJlTW92ZWQ7XG4gICAgY29uc3QgZXZDYWNoZSA9IFtdO1xuICAgIGNvbnN0IGdlc3R1cmUgPSB7XG4gICAgICBvcmlnaW5YOiAwLFxuICAgICAgb3JpZ2luWTogMCxcbiAgICAgIHNsaWRlRWw6IHVuZGVmaW5lZCxcbiAgICAgIHNsaWRlV2lkdGg6IHVuZGVmaW5lZCxcbiAgICAgIHNsaWRlSGVpZ2h0OiB1bmRlZmluZWQsXG4gICAgICBpbWFnZUVsOiB1bmRlZmluZWQsXG4gICAgICBpbWFnZVdyYXBFbDogdW5kZWZpbmVkLFxuICAgICAgbWF4UmF0aW86IDNcbiAgICB9O1xuICAgIGNvbnN0IGltYWdlID0ge1xuICAgICAgaXNUb3VjaGVkOiB1bmRlZmluZWQsXG4gICAgICBpc01vdmVkOiB1bmRlZmluZWQsXG4gICAgICBjdXJyZW50WDogdW5kZWZpbmVkLFxuICAgICAgY3VycmVudFk6IHVuZGVmaW5lZCxcbiAgICAgIG1pblg6IHVuZGVmaW5lZCxcbiAgICAgIG1pblk6IHVuZGVmaW5lZCxcbiAgICAgIG1heFg6IHVuZGVmaW5lZCxcbiAgICAgIG1heFk6IHVuZGVmaW5lZCxcbiAgICAgIHdpZHRoOiB1bmRlZmluZWQsXG4gICAgICBoZWlnaHQ6IHVuZGVmaW5lZCxcbiAgICAgIHN0YXJ0WDogdW5kZWZpbmVkLFxuICAgICAgc3RhcnRZOiB1bmRlZmluZWQsXG4gICAgICB0b3VjaGVzU3RhcnQ6IHt9LFxuICAgICAgdG91Y2hlc0N1cnJlbnQ6IHt9XG4gICAgfTtcbiAgICBjb25zdCB2ZWxvY2l0eSA9IHtcbiAgICAgIHg6IHVuZGVmaW5lZCxcbiAgICAgIHk6IHVuZGVmaW5lZCxcbiAgICAgIHByZXZQb3NpdGlvblg6IHVuZGVmaW5lZCxcbiAgICAgIHByZXZQb3NpdGlvblk6IHVuZGVmaW5lZCxcbiAgICAgIHByZXZUaW1lOiB1bmRlZmluZWRcbiAgICB9O1xuICAgIGxldCBzY2FsZSA9IDE7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN3aXBlci56b29tLCAnc2NhbGUnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBzY2FsZTtcbiAgICAgIH0sXG4gICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgaWYgKHNjYWxlICE9PSB2YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IGltYWdlRWwgPSBnZXN0dXJlLmltYWdlRWw7XG4gICAgICAgICAgY29uc3Qgc2xpZGVFbCA9IGdlc3R1cmUuc2xpZGVFbDtcbiAgICAgICAgICBlbWl0KCd6b29tQ2hhbmdlJywgdmFsdWUsIGltYWdlRWwsIHNsaWRlRWwpO1xuICAgICAgICB9XG4gICAgICAgIHNjYWxlID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcygpIHtcbiAgICAgIGlmIChldkNhY2hlLmxlbmd0aCA8IDIpIHJldHVybiAxO1xuICAgICAgY29uc3QgeDEgPSBldkNhY2hlWzBdLnBhZ2VYO1xuICAgICAgY29uc3QgeTEgPSBldkNhY2hlWzBdLnBhZ2VZO1xuICAgICAgY29uc3QgeDIgPSBldkNhY2hlWzFdLnBhZ2VYO1xuICAgICAgY29uc3QgeTIgPSBldkNhY2hlWzFdLnBhZ2VZO1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKHgyIC0geDEpICoqIDIgKyAoeTIgLSB5MSkgKiogMik7XG4gICAgICByZXR1cm4gZGlzdGFuY2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldE1heFJhdGlvKCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy56b29tO1xuICAgICAgY29uc3QgbWF4UmF0aW8gPSBnZXN0dXJlLmltYWdlV3JhcEVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItem9vbScpIHx8IHBhcmFtcy5tYXhSYXRpbztcbiAgICAgIGlmIChwYXJhbXMubGltaXRUb09yaWdpbmFsU2l6ZSAmJiBnZXN0dXJlLmltYWdlRWwgJiYgZ2VzdHVyZS5pbWFnZUVsLm5hdHVyYWxXaWR0aCkge1xuICAgICAgICBjb25zdCBpbWFnZU1heFJhdGlvID0gZ2VzdHVyZS5pbWFnZUVsLm5hdHVyYWxXaWR0aCAvIGdlc3R1cmUuaW1hZ2VFbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKGltYWdlTWF4UmF0aW8sIG1heFJhdGlvKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXhSYXRpbztcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U2NhbGVPcmlnaW4oKSB7XG4gICAgICBpZiAoZXZDYWNoZS5sZW5ndGggPCAyKSByZXR1cm4ge1xuICAgICAgICB4OiBudWxsLFxuICAgICAgICB5OiBudWxsXG4gICAgICB9O1xuICAgICAgY29uc3QgYm94ID0gZ2VzdHVyZS5pbWFnZUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmV0dXJuIFsoZXZDYWNoZVswXS5wYWdlWCArIChldkNhY2hlWzFdLnBhZ2VYIC0gZXZDYWNoZVswXS5wYWdlWCkgLyAyIC0gYm94LnggLSB3aW5kb3cuc2Nyb2xsWCkgLyBjdXJyZW50U2NhbGUsIChldkNhY2hlWzBdLnBhZ2VZICsgKGV2Q2FjaGVbMV0ucGFnZVkgLSBldkNhY2hlWzBdLnBhZ2VZKSAvIDIgLSBib3gueSAtIHdpbmRvdy5zY3JvbGxZKSAvIGN1cnJlbnRTY2FsZV07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFNsaWRlU2VsZWN0b3IoKSB7XG4gICAgICByZXR1cm4gc3dpcGVyLmlzRWxlbWVudCA/IGBzd2lwZXItc2xpZGVgIDogYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31gO1xuICAgIH1cbiAgICBmdW5jdGlvbiBldmVudFdpdGhpblNsaWRlKGUpIHtcbiAgICAgIGNvbnN0IHNsaWRlU2VsZWN0b3IgPSBnZXRTbGlkZVNlbGVjdG9yKCk7XG4gICAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhzbGlkZVNlbGVjdG9yKSkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAoc3dpcGVyLnNsaWRlcy5maWx0ZXIoc2xpZGVFbCA9PiBzbGlkZUVsLmNvbnRhaW5zKGUudGFyZ2V0KSkubGVuZ3RoID4gMCkgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV2ZW50V2l0aGluWm9vbUNvbnRhaW5lcihlKSB7XG4gICAgICBjb25zdCBzZWxlY3RvciA9IGAuJHtzd2lwZXIucGFyYW1zLnpvb20uY29udGFpbmVyQ2xhc3N9YDtcbiAgICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKHNlbGVjdG9yKSkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAoWy4uLnN3aXBlci5ob3N0RWwucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcildLmZpbHRlcihjb250YWluZXJFbCA9PiBjb250YWluZXJFbC5jb250YWlucyhlLnRhcmdldCkpLmxlbmd0aCA+IDApIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEV2ZW50c1xuICAgIGZ1bmN0aW9uIG9uR2VzdHVyZVN0YXJ0KGUpIHtcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnKSB7XG4gICAgICAgIGV2Q2FjaGUuc3BsaWNlKDAsIGV2Q2FjaGUubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGlmICghZXZlbnRXaXRoaW5TbGlkZShlKSkgcmV0dXJuO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy56b29tO1xuICAgICAgZmFrZUdlc3R1cmVUb3VjaGVkID0gZmFsc2U7XG4gICAgICBmYWtlR2VzdHVyZU1vdmVkID0gZmFsc2U7XG4gICAgICBldkNhY2hlLnB1c2goZSk7XG4gICAgICBpZiAoZXZDYWNoZS5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZha2VHZXN0dXJlVG91Y2hlZCA9IHRydWU7XG4gICAgICBnZXN0dXJlLnNjYWxlU3RhcnQgPSBnZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKCk7XG4gICAgICBpZiAoIWdlc3R1cmUuc2xpZGVFbCkge1xuICAgICAgICBnZXN0dXJlLnNsaWRlRWwgPSBlLnRhcmdldC5jbG9zZXN0KGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICAgICAgaWYgKCFnZXN0dXJlLnNsaWRlRWwpIGdlc3R1cmUuc2xpZGVFbCA9IHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XTtcbiAgICAgICAgbGV0IGltYWdlRWwgPSBnZXN0dXJlLnNsaWRlRWwucXVlcnlTZWxlY3RvcihgLiR7cGFyYW1zLmNvbnRhaW5lckNsYXNzfWApO1xuICAgICAgICBpZiAoaW1hZ2VFbCkge1xuICAgICAgICAgIGltYWdlRWwgPSBpbWFnZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3BpY3R1cmUsIGltZywgc3ZnLCBjYW52YXMsIC5zd2lwZXItem9vbS10YXJnZXQnKVswXTtcbiAgICAgICAgfVxuICAgICAgICBnZXN0dXJlLmltYWdlRWwgPSBpbWFnZUVsO1xuICAgICAgICBpZiAoaW1hZ2VFbCkge1xuICAgICAgICAgIGdlc3R1cmUuaW1hZ2VXcmFwRWwgPSBlbGVtZW50UGFyZW50cyhnZXN0dXJlLmltYWdlRWwsIGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YClbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdlc3R1cmUuaW1hZ2VXcmFwRWwpIHtcbiAgICAgICAgICBnZXN0dXJlLmltYWdlRWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGdlc3R1cmUubWF4UmF0aW8gPSBnZXRNYXhSYXRpbygpO1xuICAgICAgfVxuICAgICAgaWYgKGdlc3R1cmUuaW1hZ2VFbCkge1xuICAgICAgICBjb25zdCBbb3JpZ2luWCwgb3JpZ2luWV0gPSBnZXRTY2FsZU9yaWdpbigpO1xuICAgICAgICBnZXN0dXJlLm9yaWdpblggPSBvcmlnaW5YO1xuICAgICAgICBnZXN0dXJlLm9yaWdpblkgPSBvcmlnaW5ZO1xuICAgICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzBtcyc7XG4gICAgICB9XG4gICAgICBpc1NjYWxpbmcgPSB0cnVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkdlc3R1cmVDaGFuZ2UoZSkge1xuICAgICAgaWYgKCFldmVudFdpdGhpblNsaWRlKGUpKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnpvb207XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBjb25zdCBwb2ludGVySW5kZXggPSBldkNhY2hlLmZpbmRJbmRleChjYWNoZWRFdiA9PiBjYWNoZWRFdi5wb2ludGVySWQgPT09IGUucG9pbnRlcklkKTtcbiAgICAgIGlmIChwb2ludGVySW5kZXggPj0gMCkgZXZDYWNoZVtwb2ludGVySW5kZXhdID0gZTtcbiAgICAgIGlmIChldkNhY2hlLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmFrZUdlc3R1cmVNb3ZlZCA9IHRydWU7XG4gICAgICBnZXN0dXJlLnNjYWxlTW92ZSA9IGdldERpc3RhbmNlQmV0d2VlblRvdWNoZXMoKTtcbiAgICAgIGlmICghZ2VzdHVyZS5pbWFnZUVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHpvb20uc2NhbGUgPSBnZXN0dXJlLnNjYWxlTW92ZSAvIGdlc3R1cmUuc2NhbGVTdGFydCAqIGN1cnJlbnRTY2FsZTtcbiAgICAgIGlmICh6b29tLnNjYWxlID4gZ2VzdHVyZS5tYXhSYXRpbykge1xuICAgICAgICB6b29tLnNjYWxlID0gZ2VzdHVyZS5tYXhSYXRpbyAtIDEgKyAoem9vbS5zY2FsZSAtIGdlc3R1cmUubWF4UmF0aW8gKyAxKSAqKiAwLjU7XG4gICAgICB9XG4gICAgICBpZiAoem9vbS5zY2FsZSA8IHBhcmFtcy5taW5SYXRpbykge1xuICAgICAgICB6b29tLnNjYWxlID0gcGFyYW1zLm1pblJhdGlvICsgMSAtIChwYXJhbXMubWluUmF0aW8gLSB6b29tLnNjYWxlICsgMSkgKiogMC41O1xuICAgICAgfVxuICAgICAgZ2VzdHVyZS5pbWFnZUVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoJHt6b29tLnNjYWxlfSlgO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkdlc3R1cmVFbmQoZSkge1xuICAgICAgaWYgKCFldmVudFdpdGhpblNsaWRlKGUpKSByZXR1cm47XG4gICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJyAmJiBlLnR5cGUgPT09ICdwb2ludGVyb3V0JykgcmV0dXJuO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy56b29tO1xuICAgICAgY29uc3Qgem9vbSA9IHN3aXBlci56b29tO1xuICAgICAgY29uc3QgcG9pbnRlckluZGV4ID0gZXZDYWNoZS5maW5kSW5kZXgoY2FjaGVkRXYgPT4gY2FjaGVkRXYucG9pbnRlcklkID09PSBlLnBvaW50ZXJJZCk7XG4gICAgICBpZiAocG9pbnRlckluZGV4ID49IDApIGV2Q2FjaGUuc3BsaWNlKHBvaW50ZXJJbmRleCwgMSk7XG4gICAgICBpZiAoIWZha2VHZXN0dXJlVG91Y2hlZCB8fCAhZmFrZUdlc3R1cmVNb3ZlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmYWtlR2VzdHVyZVRvdWNoZWQgPSBmYWxzZTtcbiAgICAgIGZha2VHZXN0dXJlTW92ZWQgPSBmYWxzZTtcbiAgICAgIGlmICghZ2VzdHVyZS5pbWFnZUVsKSByZXR1cm47XG4gICAgICB6b29tLnNjYWxlID0gTWF0aC5tYXgoTWF0aC5taW4oem9vbS5zY2FsZSwgZ2VzdHVyZS5tYXhSYXRpbyksIHBhcmFtcy5taW5SYXRpbyk7XG4gICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7c3dpcGVyLnBhcmFtcy5zcGVlZH1tc2A7XG4gICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgke3pvb20uc2NhbGV9KWA7XG4gICAgICBjdXJyZW50U2NhbGUgPSB6b29tLnNjYWxlO1xuICAgICAgaXNTY2FsaW5nID0gZmFsc2U7XG4gICAgICBpZiAoem9vbS5zY2FsZSA+IDEgJiYgZ2VzdHVyZS5zbGlkZUVsKSB7XG4gICAgICAgIGdlc3R1cmUuc2xpZGVFbC5jbGFzc0xpc3QuYWRkKGAke3BhcmFtcy56b29tZWRTbGlkZUNsYXNzfWApO1xuICAgICAgfSBlbHNlIGlmICh6b29tLnNjYWxlIDw9IDEgJiYgZ2VzdHVyZS5zbGlkZUVsKSB7XG4gICAgICAgIGdlc3R1cmUuc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKGAke3BhcmFtcy56b29tZWRTbGlkZUNsYXNzfWApO1xuICAgICAgfVxuICAgICAgaWYgKHpvb20uc2NhbGUgPT09IDEpIHtcbiAgICAgICAgZ2VzdHVyZS5vcmlnaW5YID0gMDtcbiAgICAgICAgZ2VzdHVyZS5vcmlnaW5ZID0gMDtcbiAgICAgICAgZ2VzdHVyZS5zbGlkZUVsID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgYWxsb3dUb3VjaE1vdmVUaW1lb3V0O1xuICAgIGZ1bmN0aW9uIGFsbG93VG91Y2hNb3ZlKCkge1xuICAgICAgc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5wcmV2ZW50VG91Y2hNb3ZlRnJvbVBvaW50ZXJNb3ZlID0gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZXZlbnRUb3VjaE1vdmUoKSB7XG4gICAgICBjbGVhclRpbWVvdXQoYWxsb3dUb3VjaE1vdmVUaW1lb3V0KTtcbiAgICAgIHN3aXBlci50b3VjaEV2ZW50c0RhdGEucHJldmVudFRvdWNoTW92ZUZyb21Qb2ludGVyTW92ZSA9IHRydWU7XG4gICAgICBhbGxvd1RvdWNoTW92ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYWxsb3dUb3VjaE1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkge1xuICAgICAgY29uc3QgZGV2aWNlID0gc3dpcGVyLmRldmljZTtcbiAgICAgIGlmICghZ2VzdHVyZS5pbWFnZUVsKSByZXR1cm47XG4gICAgICBpZiAoaW1hZ2UuaXNUb3VjaGVkKSByZXR1cm47XG4gICAgICBpZiAoZGV2aWNlLmFuZHJvaWQgJiYgZS5jYW5jZWxhYmxlKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpbWFnZS5pc1RvdWNoZWQgPSB0cnVlO1xuICAgICAgY29uc3QgZXZlbnQgPSBldkNhY2hlLmxlbmd0aCA+IDAgPyBldkNhY2hlWzBdIDogZTtcbiAgICAgIGltYWdlLnRvdWNoZXNTdGFydC54ID0gZXZlbnQucGFnZVg7XG4gICAgICBpbWFnZS50b3VjaGVzU3RhcnQueSA9IGV2ZW50LnBhZ2VZO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblRvdWNoTW92ZShlKSB7XG4gICAgICBpZiAoIWV2ZW50V2l0aGluU2xpZGUoZSkgfHwgIWV2ZW50V2l0aGluWm9vbUNvbnRhaW5lcihlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBpZiAoIWdlc3R1cmUuaW1hZ2VFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWltYWdlLmlzVG91Y2hlZCB8fCAhZ2VzdHVyZS5zbGlkZUVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghaW1hZ2UuaXNNb3ZlZCkge1xuICAgICAgICBpbWFnZS53aWR0aCA9IGdlc3R1cmUuaW1hZ2VFbC5vZmZzZXRXaWR0aCB8fCBnZXN0dXJlLmltYWdlRWwuY2xpZW50V2lkdGg7XG4gICAgICAgIGltYWdlLmhlaWdodCA9IGdlc3R1cmUuaW1hZ2VFbC5vZmZzZXRIZWlnaHQgfHwgZ2VzdHVyZS5pbWFnZUVsLmNsaWVudEhlaWdodDtcbiAgICAgICAgaW1hZ2Uuc3RhcnRYID0gZ2V0VHJhbnNsYXRlKGdlc3R1cmUuaW1hZ2VXcmFwRWwsICd4JykgfHwgMDtcbiAgICAgICAgaW1hZ2Uuc3RhcnRZID0gZ2V0VHJhbnNsYXRlKGdlc3R1cmUuaW1hZ2VXcmFwRWwsICd5JykgfHwgMDtcbiAgICAgICAgZ2VzdHVyZS5zbGlkZVdpZHRoID0gZ2VzdHVyZS5zbGlkZUVsLm9mZnNldFdpZHRoO1xuICAgICAgICBnZXN0dXJlLnNsaWRlSGVpZ2h0ID0gZ2VzdHVyZS5zbGlkZUVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMG1zJztcbiAgICAgIH1cbiAgICAgIC8vIERlZmluZSBpZiB3ZSBuZWVkIGltYWdlIGRyYWdcbiAgICAgIGNvbnN0IHNjYWxlZFdpZHRoID0gaW1hZ2Uud2lkdGggKiB6b29tLnNjYWxlO1xuICAgICAgY29uc3Qgc2NhbGVkSGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0ICogem9vbS5zY2FsZTtcbiAgICAgIGltYWdlLm1pblggPSBNYXRoLm1pbihnZXN0dXJlLnNsaWRlV2lkdGggLyAyIC0gc2NhbGVkV2lkdGggLyAyLCAwKTtcbiAgICAgIGltYWdlLm1heFggPSAtaW1hZ2UubWluWDtcbiAgICAgIGltYWdlLm1pblkgPSBNYXRoLm1pbihnZXN0dXJlLnNsaWRlSGVpZ2h0IC8gMiAtIHNjYWxlZEhlaWdodCAvIDIsIDApO1xuICAgICAgaW1hZ2UubWF4WSA9IC1pbWFnZS5taW5ZO1xuICAgICAgaW1hZ2UudG91Y2hlc0N1cnJlbnQueCA9IGV2Q2FjaGUubGVuZ3RoID4gMCA/IGV2Q2FjaGVbMF0ucGFnZVggOiBlLnBhZ2VYO1xuICAgICAgaW1hZ2UudG91Y2hlc0N1cnJlbnQueSA9IGV2Q2FjaGUubGVuZ3RoID4gMCA/IGV2Q2FjaGVbMF0ucGFnZVkgOiBlLnBhZ2VZO1xuICAgICAgY29uc3QgdG91Y2hlc0RpZmYgPSBNYXRoLm1heChNYXRoLmFicyhpbWFnZS50b3VjaGVzQ3VycmVudC54IC0gaW1hZ2UudG91Y2hlc1N0YXJ0LngpLCBNYXRoLmFicyhpbWFnZS50b3VjaGVzQ3VycmVudC55IC0gaW1hZ2UudG91Y2hlc1N0YXJ0LnkpKTtcbiAgICAgIGlmICh0b3VjaGVzRGlmZiA+IDUpIHtcbiAgICAgICAgc3dpcGVyLmFsbG93Q2xpY2sgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghaW1hZ2UuaXNNb3ZlZCAmJiAhaXNTY2FsaW5nKSB7XG4gICAgICAgIGlmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkgJiYgKE1hdGguZmxvb3IoaW1hZ2UubWluWCkgPT09IE1hdGguZmxvb3IoaW1hZ2Uuc3RhcnRYKSAmJiBpbWFnZS50b3VjaGVzQ3VycmVudC54IDwgaW1hZ2UudG91Y2hlc1N0YXJ0LnggfHwgTWF0aC5mbG9vcihpbWFnZS5tYXhYKSA9PT0gTWF0aC5mbG9vcihpbWFnZS5zdGFydFgpICYmIGltYWdlLnRvdWNoZXNDdXJyZW50LnggPiBpbWFnZS50b3VjaGVzU3RhcnQueCkpIHtcbiAgICAgICAgICBpbWFnZS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgICBhbGxvd1RvdWNoTW92ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN3aXBlci5pc0hvcml6b250YWwoKSAmJiAoTWF0aC5mbG9vcihpbWFnZS5taW5ZKSA9PT0gTWF0aC5mbG9vcihpbWFnZS5zdGFydFkpICYmIGltYWdlLnRvdWNoZXNDdXJyZW50LnkgPCBpbWFnZS50b3VjaGVzU3RhcnQueSB8fCBNYXRoLmZsb29yKGltYWdlLm1heFkpID09PSBNYXRoLmZsb29yKGltYWdlLnN0YXJ0WSkgJiYgaW1hZ2UudG91Y2hlc0N1cnJlbnQueSA+IGltYWdlLnRvdWNoZXNTdGFydC55KSkge1xuICAgICAgICAgIGltYWdlLmlzVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgICAgIGFsbG93VG91Y2hNb3ZlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZS5jYW5jZWxhYmxlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBwcmV2ZW50VG91Y2hNb3ZlKCk7XG4gICAgICBpbWFnZS5pc01vdmVkID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHNjYWxlUmF0aW8gPSAoem9vbS5zY2FsZSAtIGN1cnJlbnRTY2FsZSkgLyAoZ2VzdHVyZS5tYXhSYXRpbyAtIHN3aXBlci5wYXJhbXMuem9vbS5taW5SYXRpbyk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIG9yaWdpblgsXG4gICAgICAgIG9yaWdpbllcbiAgICAgIH0gPSBnZXN0dXJlO1xuICAgICAgaW1hZ2UuY3VycmVudFggPSBpbWFnZS50b3VjaGVzQ3VycmVudC54IC0gaW1hZ2UudG91Y2hlc1N0YXJ0LnggKyBpbWFnZS5zdGFydFggKyBzY2FsZVJhdGlvICogKGltYWdlLndpZHRoIC0gb3JpZ2luWCAqIDIpO1xuICAgICAgaW1hZ2UuY3VycmVudFkgPSBpbWFnZS50b3VjaGVzQ3VycmVudC55IC0gaW1hZ2UudG91Y2hlc1N0YXJ0LnkgKyBpbWFnZS5zdGFydFkgKyBzY2FsZVJhdGlvICogKGltYWdlLmhlaWdodCAtIG9yaWdpblkgKiAyKTtcbiAgICAgIGlmIChpbWFnZS5jdXJyZW50WCA8IGltYWdlLm1pblgpIHtcbiAgICAgICAgaW1hZ2UuY3VycmVudFggPSBpbWFnZS5taW5YICsgMSAtIChpbWFnZS5taW5YIC0gaW1hZ2UuY3VycmVudFggKyAxKSAqKiAwLjg7XG4gICAgICB9XG4gICAgICBpZiAoaW1hZ2UuY3VycmVudFggPiBpbWFnZS5tYXhYKSB7XG4gICAgICAgIGltYWdlLmN1cnJlbnRYID0gaW1hZ2UubWF4WCAtIDEgKyAoaW1hZ2UuY3VycmVudFggLSBpbWFnZS5tYXhYICsgMSkgKiogMC44O1xuICAgICAgfVxuICAgICAgaWYgKGltYWdlLmN1cnJlbnRZIDwgaW1hZ2UubWluWSkge1xuICAgICAgICBpbWFnZS5jdXJyZW50WSA9IGltYWdlLm1pblkgKyAxIC0gKGltYWdlLm1pblkgLSBpbWFnZS5jdXJyZW50WSArIDEpICoqIDAuODtcbiAgICAgIH1cbiAgICAgIGlmIChpbWFnZS5jdXJyZW50WSA+IGltYWdlLm1heFkpIHtcbiAgICAgICAgaW1hZ2UuY3VycmVudFkgPSBpbWFnZS5tYXhZIC0gMSArIChpbWFnZS5jdXJyZW50WSAtIGltYWdlLm1heFkgKyAxKSAqKiAwLjg7XG4gICAgICB9XG5cbiAgICAgIC8vIFZlbG9jaXR5XG4gICAgICBpZiAoIXZlbG9jaXR5LnByZXZQb3NpdGlvblgpIHZlbG9jaXR5LnByZXZQb3NpdGlvblggPSBpbWFnZS50b3VjaGVzQ3VycmVudC54O1xuICAgICAgaWYgKCF2ZWxvY2l0eS5wcmV2UG9zaXRpb25ZKSB2ZWxvY2l0eS5wcmV2UG9zaXRpb25ZID0gaW1hZ2UudG91Y2hlc0N1cnJlbnQueTtcbiAgICAgIGlmICghdmVsb2NpdHkucHJldlRpbWUpIHZlbG9jaXR5LnByZXZUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHZlbG9jaXR5LnggPSAoaW1hZ2UudG91Y2hlc0N1cnJlbnQueCAtIHZlbG9jaXR5LnByZXZQb3NpdGlvblgpIC8gKERhdGUubm93KCkgLSB2ZWxvY2l0eS5wcmV2VGltZSkgLyAyO1xuICAgICAgdmVsb2NpdHkueSA9IChpbWFnZS50b3VjaGVzQ3VycmVudC55IC0gdmVsb2NpdHkucHJldlBvc2l0aW9uWSkgLyAoRGF0ZS5ub3coKSAtIHZlbG9jaXR5LnByZXZUaW1lKSAvIDI7XG4gICAgICBpZiAoTWF0aC5hYnMoaW1hZ2UudG91Y2hlc0N1cnJlbnQueCAtIHZlbG9jaXR5LnByZXZQb3NpdGlvblgpIDwgMikgdmVsb2NpdHkueCA9IDA7XG4gICAgICBpZiAoTWF0aC5hYnMoaW1hZ2UudG91Y2hlc0N1cnJlbnQueSAtIHZlbG9jaXR5LnByZXZQb3NpdGlvblkpIDwgMikgdmVsb2NpdHkueSA9IDA7XG4gICAgICB2ZWxvY2l0eS5wcmV2UG9zaXRpb25YID0gaW1hZ2UudG91Y2hlc0N1cnJlbnQueDtcbiAgICAgIHZlbG9jaXR5LnByZXZQb3NpdGlvblkgPSBpbWFnZS50b3VjaGVzQ3VycmVudC55O1xuICAgICAgdmVsb2NpdHkucHJldlRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHtpbWFnZS5jdXJyZW50WH1weCwgJHtpbWFnZS5jdXJyZW50WX1weCwwKWA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uVG91Y2hFbmQoKSB7XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBpZiAoIWdlc3R1cmUuaW1hZ2VFbCkgcmV0dXJuO1xuICAgICAgaWYgKCFpbWFnZS5pc1RvdWNoZWQgfHwgIWltYWdlLmlzTW92ZWQpIHtcbiAgICAgICAgaW1hZ2UuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICAgIGltYWdlLmlzTW92ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaW1hZ2UuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICBpbWFnZS5pc01vdmVkID0gZmFsc2U7XG4gICAgICBsZXQgbW9tZW50dW1EdXJhdGlvblggPSAzMDA7XG4gICAgICBsZXQgbW9tZW50dW1EdXJhdGlvblkgPSAzMDA7XG4gICAgICBjb25zdCBtb21lbnR1bURpc3RhbmNlWCA9IHZlbG9jaXR5LnggKiBtb21lbnR1bUR1cmF0aW9uWDtcbiAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uWCA9IGltYWdlLmN1cnJlbnRYICsgbW9tZW50dW1EaXN0YW5jZVg7XG4gICAgICBjb25zdCBtb21lbnR1bURpc3RhbmNlWSA9IHZlbG9jaXR5LnkgKiBtb21lbnR1bUR1cmF0aW9uWTtcbiAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uWSA9IGltYWdlLmN1cnJlbnRZICsgbW9tZW50dW1EaXN0YW5jZVk7XG5cbiAgICAgIC8vIEZpeCBkdXJhdGlvblxuICAgICAgaWYgKHZlbG9jaXR5LnggIT09IDApIG1vbWVudHVtRHVyYXRpb25YID0gTWF0aC5hYnMoKG5ld1Bvc2l0aW9uWCAtIGltYWdlLmN1cnJlbnRYKSAvIHZlbG9jaXR5LngpO1xuICAgICAgaWYgKHZlbG9jaXR5LnkgIT09IDApIG1vbWVudHVtRHVyYXRpb25ZID0gTWF0aC5hYnMoKG5ld1Bvc2l0aW9uWSAtIGltYWdlLmN1cnJlbnRZKSAvIHZlbG9jaXR5LnkpO1xuICAgICAgY29uc3QgbW9tZW50dW1EdXJhdGlvbiA9IE1hdGgubWF4KG1vbWVudHVtRHVyYXRpb25YLCBtb21lbnR1bUR1cmF0aW9uWSk7XG4gICAgICBpbWFnZS5jdXJyZW50WCA9IG5ld1Bvc2l0aW9uWDtcbiAgICAgIGltYWdlLmN1cnJlbnRZID0gbmV3UG9zaXRpb25ZO1xuICAgICAgLy8gRGVmaW5lIGlmIHdlIG5lZWQgaW1hZ2UgZHJhZ1xuICAgICAgY29uc3Qgc2NhbGVkV2lkdGggPSBpbWFnZS53aWR0aCAqIHpvb20uc2NhbGU7XG4gICAgICBjb25zdCBzY2FsZWRIZWlnaHQgPSBpbWFnZS5oZWlnaHQgKiB6b29tLnNjYWxlO1xuICAgICAgaW1hZ2UubWluWCA9IE1hdGgubWluKGdlc3R1cmUuc2xpZGVXaWR0aCAvIDIgLSBzY2FsZWRXaWR0aCAvIDIsIDApO1xuICAgICAgaW1hZ2UubWF4WCA9IC1pbWFnZS5taW5YO1xuICAgICAgaW1hZ2UubWluWSA9IE1hdGgubWluKGdlc3R1cmUuc2xpZGVIZWlnaHQgLyAyIC0gc2NhbGVkSGVpZ2h0IC8gMiwgMCk7XG4gICAgICBpbWFnZS5tYXhZID0gLWltYWdlLm1pblk7XG4gICAgICBpbWFnZS5jdXJyZW50WCA9IE1hdGgubWF4KE1hdGgubWluKGltYWdlLmN1cnJlbnRYLCBpbWFnZS5tYXhYKSwgaW1hZ2UubWluWCk7XG4gICAgICBpbWFnZS5jdXJyZW50WSA9IE1hdGgubWF4KE1hdGgubWluKGltYWdlLmN1cnJlbnRZLCBpbWFnZS5tYXhZKSwgaW1hZ2UubWluWSk7XG4gICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke21vbWVudHVtRHVyYXRpb259bXNgO1xuICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHtpbWFnZS5jdXJyZW50WH1weCwgJHtpbWFnZS5jdXJyZW50WX1weCwwKWA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uVHJhbnNpdGlvbkVuZCgpIHtcbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGlmIChnZXN0dXJlLnNsaWRlRWwgJiYgc3dpcGVyLmFjdGl2ZUluZGV4ICE9PSBzd2lwZXIuc2xpZGVzLmluZGV4T2YoZ2VzdHVyZS5zbGlkZUVsKSkge1xuICAgICAgICBpZiAoZ2VzdHVyZS5pbWFnZUVsKSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZUVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLDAsMCkgc2NhbGUoMSknO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXN0dXJlLmltYWdlV3JhcEVsKSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwwLDApJztcbiAgICAgICAgfVxuICAgICAgICBnZXN0dXJlLnNsaWRlRWwuY2xhc3NMaXN0LnJlbW92ZShgJHtzd2lwZXIucGFyYW1zLnpvb20uem9vbWVkU2xpZGVDbGFzc31gKTtcbiAgICAgICAgem9vbS5zY2FsZSA9IDE7XG4gICAgICAgIGN1cnJlbnRTY2FsZSA9IDE7XG4gICAgICAgIGdlc3R1cmUuc2xpZGVFbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZ2VzdHVyZS5pbWFnZUVsID0gdW5kZWZpbmVkO1xuICAgICAgICBnZXN0dXJlLmltYWdlV3JhcEVsID0gdW5kZWZpbmVkO1xuICAgICAgICBnZXN0dXJlLm9yaWdpblggPSAwO1xuICAgICAgICBnZXN0dXJlLm9yaWdpblkgPSAwO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB6b29tSW4oZSkge1xuICAgICAgY29uc3Qgem9vbSA9IHN3aXBlci56b29tO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy56b29tO1xuICAgICAgaWYgKCFnZXN0dXJlLnNsaWRlRWwpIHtcbiAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQpIHtcbiAgICAgICAgICBnZXN0dXJlLnNsaWRlRWwgPSBlLnRhcmdldC5jbG9zZXN0KGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdlc3R1cmUuc2xpZGVFbCkge1xuICAgICAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgc3dpcGVyLnZpcnR1YWwpIHtcbiAgICAgICAgICAgIGdlc3R1cmUuc2xpZGVFbCA9IGVsZW1lbnRDaGlsZHJlbihzd2lwZXIuc2xpZGVzRWwsIGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3N9YClbMF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdlc3R1cmUuc2xpZGVFbCA9IHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGltYWdlRWwgPSBnZXN0dXJlLnNsaWRlRWwucXVlcnlTZWxlY3RvcihgLiR7cGFyYW1zLmNvbnRhaW5lckNsYXNzfWApO1xuICAgICAgICBpZiAoaW1hZ2VFbCkge1xuICAgICAgICAgIGltYWdlRWwgPSBpbWFnZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3BpY3R1cmUsIGltZywgc3ZnLCBjYW52YXMsIC5zd2lwZXItem9vbS10YXJnZXQnKVswXTtcbiAgICAgICAgfVxuICAgICAgICBnZXN0dXJlLmltYWdlRWwgPSBpbWFnZUVsO1xuICAgICAgICBpZiAoaW1hZ2VFbCkge1xuICAgICAgICAgIGdlc3R1cmUuaW1hZ2VXcmFwRWwgPSBlbGVtZW50UGFyZW50cyhnZXN0dXJlLmltYWdlRWwsIGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YClbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFnZXN0dXJlLmltYWdlRWwgfHwgIWdlc3R1cmUuaW1hZ2VXcmFwRWwpIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnRvdWNoQWN0aW9uID0gJ25vbmUnO1xuICAgICAgfVxuICAgICAgZ2VzdHVyZS5zbGlkZUVsLmNsYXNzTGlzdC5hZGQoYCR7cGFyYW1zLnpvb21lZFNsaWRlQ2xhc3N9YCk7XG4gICAgICBsZXQgdG91Y2hYO1xuICAgICAgbGV0IHRvdWNoWTtcbiAgICAgIGxldCBvZmZzZXRYO1xuICAgICAgbGV0IG9mZnNldFk7XG4gICAgICBsZXQgZGlmZlg7XG4gICAgICBsZXQgZGlmZlk7XG4gICAgICBsZXQgdHJhbnNsYXRlWDtcbiAgICAgIGxldCB0cmFuc2xhdGVZO1xuICAgICAgbGV0IGltYWdlV2lkdGg7XG4gICAgICBsZXQgaW1hZ2VIZWlnaHQ7XG4gICAgICBsZXQgc2NhbGVkV2lkdGg7XG4gICAgICBsZXQgc2NhbGVkSGVpZ2h0O1xuICAgICAgbGV0IHRyYW5zbGF0ZU1pblg7XG4gICAgICBsZXQgdHJhbnNsYXRlTWluWTtcbiAgICAgIGxldCB0cmFuc2xhdGVNYXhYO1xuICAgICAgbGV0IHRyYW5zbGF0ZU1heFk7XG4gICAgICBsZXQgc2xpZGVXaWR0aDtcbiAgICAgIGxldCBzbGlkZUhlaWdodDtcbiAgICAgIGlmICh0eXBlb2YgaW1hZ2UudG91Y2hlc1N0YXJ0LnggPT09ICd1bmRlZmluZWQnICYmIGUpIHtcbiAgICAgICAgdG91Y2hYID0gZS5wYWdlWDtcbiAgICAgICAgdG91Y2hZID0gZS5wYWdlWTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvdWNoWCA9IGltYWdlLnRvdWNoZXNTdGFydC54O1xuICAgICAgICB0b3VjaFkgPSBpbWFnZS50b3VjaGVzU3RhcnQueTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZvcmNlWm9vbVJhdGlvID0gdHlwZW9mIGUgPT09ICdudW1iZXInID8gZSA6IG51bGw7XG4gICAgICBpZiAoY3VycmVudFNjYWxlID09PSAxICYmIGZvcmNlWm9vbVJhdGlvKSB7XG4gICAgICAgIHRvdWNoWCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdG91Y2hZID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgY29uc3QgbWF4UmF0aW8gPSBnZXRNYXhSYXRpbygpO1xuICAgICAgem9vbS5zY2FsZSA9IGZvcmNlWm9vbVJhdGlvIHx8IG1heFJhdGlvO1xuICAgICAgY3VycmVudFNjYWxlID0gZm9yY2Vab29tUmF0aW8gfHwgbWF4UmF0aW87XG4gICAgICBpZiAoZSAmJiAhKGN1cnJlbnRTY2FsZSA9PT0gMSAmJiBmb3JjZVpvb21SYXRpbykpIHtcbiAgICAgICAgc2xpZGVXaWR0aCA9IGdlc3R1cmUuc2xpZGVFbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgc2xpZGVIZWlnaHQgPSBnZXN0dXJlLnNsaWRlRWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBvZmZzZXRYID0gZWxlbWVudE9mZnNldChnZXN0dXJlLnNsaWRlRWwpLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICAgICAgb2Zmc2V0WSA9IGVsZW1lbnRPZmZzZXQoZ2VzdHVyZS5zbGlkZUVsKS50b3AgKyB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgICAgZGlmZlggPSBvZmZzZXRYICsgc2xpZGVXaWR0aCAvIDIgLSB0b3VjaFg7XG4gICAgICAgIGRpZmZZID0gb2Zmc2V0WSArIHNsaWRlSGVpZ2h0IC8gMiAtIHRvdWNoWTtcbiAgICAgICAgaW1hZ2VXaWR0aCA9IGdlc3R1cmUuaW1hZ2VFbC5vZmZzZXRXaWR0aCB8fCBnZXN0dXJlLmltYWdlRWwuY2xpZW50V2lkdGg7XG4gICAgICAgIGltYWdlSGVpZ2h0ID0gZ2VzdHVyZS5pbWFnZUVsLm9mZnNldEhlaWdodCB8fCBnZXN0dXJlLmltYWdlRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICBzY2FsZWRXaWR0aCA9IGltYWdlV2lkdGggKiB6b29tLnNjYWxlO1xuICAgICAgICBzY2FsZWRIZWlnaHQgPSBpbWFnZUhlaWdodCAqIHpvb20uc2NhbGU7XG4gICAgICAgIHRyYW5zbGF0ZU1pblggPSBNYXRoLm1pbihzbGlkZVdpZHRoIC8gMiAtIHNjYWxlZFdpZHRoIC8gMiwgMCk7XG4gICAgICAgIHRyYW5zbGF0ZU1pblkgPSBNYXRoLm1pbihzbGlkZUhlaWdodCAvIDIgLSBzY2FsZWRIZWlnaHQgLyAyLCAwKTtcbiAgICAgICAgdHJhbnNsYXRlTWF4WCA9IC10cmFuc2xhdGVNaW5YO1xuICAgICAgICB0cmFuc2xhdGVNYXhZID0gLXRyYW5zbGF0ZU1pblk7XG4gICAgICAgIHRyYW5zbGF0ZVggPSBkaWZmWCAqIHpvb20uc2NhbGU7XG4gICAgICAgIHRyYW5zbGF0ZVkgPSBkaWZmWSAqIHpvb20uc2NhbGU7XG4gICAgICAgIGlmICh0cmFuc2xhdGVYIDwgdHJhbnNsYXRlTWluWCkge1xuICAgICAgICAgIHRyYW5zbGF0ZVggPSB0cmFuc2xhdGVNaW5YO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFuc2xhdGVYID4gdHJhbnNsYXRlTWF4WCkge1xuICAgICAgICAgIHRyYW5zbGF0ZVggPSB0cmFuc2xhdGVNYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFuc2xhdGVZIDwgdHJhbnNsYXRlTWluWSkge1xuICAgICAgICAgIHRyYW5zbGF0ZVkgPSB0cmFuc2xhdGVNaW5ZO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFuc2xhdGVZID4gdHJhbnNsYXRlTWF4WSkge1xuICAgICAgICAgIHRyYW5zbGF0ZVkgPSB0cmFuc2xhdGVNYXhZO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2xhdGVYID0gMDtcbiAgICAgICAgdHJhbnNsYXRlWSA9IDA7XG4gICAgICB9XG4gICAgICBpZiAoZm9yY2Vab29tUmF0aW8gJiYgem9vbS5zY2FsZSA9PT0gMSkge1xuICAgICAgICBnZXN0dXJlLm9yaWdpblggPSAwO1xuICAgICAgICBnZXN0dXJlLm9yaWdpblkgPSAwO1xuICAgICAgfVxuICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMzAwbXMnO1xuICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0cmFuc2xhdGVYfXB4LCAke3RyYW5zbGF0ZVl9cHgsMClgO1xuICAgICAgZ2VzdHVyZS5pbWFnZUVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICczMDBtcyc7XG4gICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgke3pvb20uc2NhbGV9KWA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHpvb21PdXQoKSB7XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnpvb207XG4gICAgICBpZiAoIWdlc3R1cmUuc2xpZGVFbCkge1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkICYmIHN3aXBlci52aXJ0dWFsKSB7XG4gICAgICAgICAgZ2VzdHVyZS5zbGlkZUVsID0gZWxlbWVudENoaWxkcmVuKHN3aXBlci5zbGlkZXNFbCwgYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVBY3RpdmVDbGFzc31gKVswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnZXN0dXJlLnNsaWRlRWwgPSBzd2lwZXIuc2xpZGVzW3N3aXBlci5hY3RpdmVJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGltYWdlRWwgPSBnZXN0dXJlLnNsaWRlRWwucXVlcnlTZWxlY3RvcihgLiR7cGFyYW1zLmNvbnRhaW5lckNsYXNzfWApO1xuICAgICAgICBpZiAoaW1hZ2VFbCkge1xuICAgICAgICAgIGltYWdlRWwgPSBpbWFnZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3BpY3R1cmUsIGltZywgc3ZnLCBjYW52YXMsIC5zd2lwZXItem9vbS10YXJnZXQnKVswXTtcbiAgICAgICAgfVxuICAgICAgICBnZXN0dXJlLmltYWdlRWwgPSBpbWFnZUVsO1xuICAgICAgICBpZiAoaW1hZ2VFbCkge1xuICAgICAgICAgIGdlc3R1cmUuaW1hZ2VXcmFwRWwgPSBlbGVtZW50UGFyZW50cyhnZXN0dXJlLmltYWdlRWwsIGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YClbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFnZXN0dXJlLmltYWdlRWwgfHwgIWdlc3R1cmUuaW1hZ2VXcmFwRWwpIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnRvdWNoQWN0aW9uID0gJyc7XG4gICAgICB9XG4gICAgICB6b29tLnNjYWxlID0gMTtcbiAgICAgIGN1cnJlbnRTY2FsZSA9IDE7XG4gICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICczMDBtcyc7XG4gICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLDAsMCknO1xuICAgICAgZ2VzdHVyZS5pbWFnZUVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICczMDBtcyc7XG4gICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgxKSc7XG4gICAgICBnZXN0dXJlLnNsaWRlRWwuY2xhc3NMaXN0LnJlbW92ZShgJHtwYXJhbXMuem9vbWVkU2xpZGVDbGFzc31gKTtcbiAgICAgIGdlc3R1cmUuc2xpZGVFbCA9IHVuZGVmaW5lZDtcbiAgICAgIGdlc3R1cmUub3JpZ2luWCA9IDA7XG4gICAgICBnZXN0dXJlLm9yaWdpblkgPSAwO1xuICAgIH1cblxuICAgIC8vIFRvZ2dsZSBab29tXG4gICAgZnVuY3Rpb24gem9vbVRvZ2dsZShlKSB7XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBpZiAoem9vbS5zY2FsZSAmJiB6b29tLnNjYWxlICE9PSAxKSB7XG4gICAgICAgIC8vIFpvb20gT3V0XG4gICAgICAgIHpvb21PdXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFpvb20gSW5cbiAgICAgICAgem9vbUluKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRMaXN0ZW5lcnMoKSB7XG4gICAgICBjb25zdCBwYXNzaXZlTGlzdGVuZXIgPSBzd2lwZXIucGFyYW1zLnBhc3NpdmVMaXN0ZW5lcnMgPyB7XG4gICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICAgIGNhcHR1cmU6IGZhbHNlXG4gICAgICB9IDogZmFsc2U7XG4gICAgICBjb25zdCBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlID0gc3dpcGVyLnBhcmFtcy5wYXNzaXZlTGlzdGVuZXJzID8ge1xuICAgICAgICBwYXNzaXZlOiBmYWxzZSxcbiAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgICAgfSA6IHRydWU7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXNzaXZlTGlzdGVuZXIsXG4gICAgICAgIGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQXR0YWNoL0RldGFjaCBFdmVudHNcbiAgICBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBpZiAoem9vbS5lbmFibGVkKSByZXR1cm47XG4gICAgICB6b29tLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgY29uc3Qge1xuICAgICAgICBwYXNzaXZlTGlzdGVuZXIsXG4gICAgICAgIGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmVcbiAgICAgIH0gPSBnZXRMaXN0ZW5lcnMoKTtcblxuICAgICAgLy8gU2NhbGUgaW1hZ2VcbiAgICAgIHN3aXBlci53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvbkdlc3R1cmVTdGFydCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICAgIHN3aXBlci53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvbkdlc3R1cmVDaGFuZ2UsIGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmUpO1xuICAgICAgWydwb2ludGVydXAnLCAncG9pbnRlcmNhbmNlbCcsICdwb2ludGVyb3V0J10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBvbkdlc3R1cmVFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgICB9KTtcblxuICAgICAgLy8gTW92ZSBpbWFnZVxuICAgICAgc3dpcGVyLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlLCBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGlmICghem9vbS5lbmFibGVkKSByZXR1cm47XG4gICAgICB6b29tLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGFzc2l2ZUxpc3RlbmVyLFxuICAgICAgICBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlXG4gICAgICB9ID0gZ2V0TGlzdGVuZXJzKCk7XG5cbiAgICAgIC8vIFNjYWxlIGltYWdlXG4gICAgICBzd2lwZXIud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25HZXN0dXJlU3RhcnQsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgICBzd2lwZXIud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25HZXN0dXJlQ2hhbmdlLCBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlKTtcbiAgICAgIFsncG9pbnRlcnVwJywgJ3BvaW50ZXJjYW5jZWwnLCAncG9pbnRlcm91dCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgb25HZXN0dXJlRW5kLCBwYXNzaXZlTGlzdGVuZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vdmUgaW1hZ2VcbiAgICAgIHN3aXBlci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblRvdWNoTW92ZSwgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZSk7XG4gICAgfVxuICAgIG9uKCdpbml0JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuem9vbS5lbmFibGVkKSB7XG4gICAgICAgIGVuYWJsZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgICAgZGlzYWJsZSgpO1xuICAgIH0pO1xuICAgIG9uKCd0b3VjaFN0YXJ0JywgKF9zLCBlKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci56b29tLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIG9uVG91Y2hTdGFydChlKTtcbiAgICB9KTtcbiAgICBvbigndG91Y2hFbmQnLCAoX3MsIGUpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnpvb20uZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgb25Ub3VjaEVuZCgpO1xuICAgIH0pO1xuICAgIG9uKCdkb3VibGVUYXAnLCAoX3MsIGUpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLmFuaW1hdGluZyAmJiBzd2lwZXIucGFyYW1zLnpvb20uZW5hYmxlZCAmJiBzd2lwZXIuem9vbS5lbmFibGVkICYmIHN3aXBlci5wYXJhbXMuem9vbS50b2dnbGUpIHtcbiAgICAgICAgem9vbVRvZ2dsZShlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbigndHJhbnNpdGlvbkVuZCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuem9vbS5lbmFibGVkICYmIHN3aXBlci5wYXJhbXMuem9vbS5lbmFibGVkKSB7XG4gICAgICAgIG9uVHJhbnNpdGlvbkVuZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdzbGlkZUNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuem9vbS5lbmFibGVkICYmIHN3aXBlci5wYXJhbXMuem9vbS5lbmFibGVkICYmIHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBvblRyYW5zaXRpb25FbmQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci56b29tLCB7XG4gICAgICBlbmFibGUsXG4gICAgICBkaXNhYmxlLFxuICAgICAgaW46IHpvb21JbixcbiAgICAgIG91dDogem9vbU91dCxcbiAgICAgIHRvZ2dsZTogem9vbVRvZ2dsZVxuICAgIH0pO1xuICB9XG5cbiAgLyogZXNsaW50IG5vLWJpdHdpc2U6IFtcImVycm9yXCIsIHsgXCJhbGxvd1wiOiBbXCI+PlwiXSB9XSAqL1xuICBmdW5jdGlvbiBDb250cm9sbGVyKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgY29udHJvbGxlcjoge1xuICAgICAgICBjb250cm9sOiB1bmRlZmluZWQsXG4gICAgICAgIGludmVyc2U6IGZhbHNlLFxuICAgICAgICBieTogJ3NsaWRlJyAvLyBvciAnY29udGFpbmVyJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3dpcGVyLmNvbnRyb2xsZXIgPSB7XG4gICAgICBjb250cm9sOiB1bmRlZmluZWRcbiAgICB9O1xuICAgIGZ1bmN0aW9uIExpbmVhclNwbGluZSh4LCB5KSB7XG4gICAgICBjb25zdCBiaW5hcnlTZWFyY2ggPSBmdW5jdGlvbiBzZWFyY2goKSB7XG4gICAgICAgIGxldCBtYXhJbmRleDtcbiAgICAgICAgbGV0IG1pbkluZGV4O1xuICAgICAgICBsZXQgZ3Vlc3M7XG4gICAgICAgIHJldHVybiAoYXJyYXksIHZhbCkgPT4ge1xuICAgICAgICAgIG1pbkluZGV4ID0gLTE7XG4gICAgICAgICAgbWF4SW5kZXggPSBhcnJheS5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKG1heEluZGV4IC0gbWluSW5kZXggPiAxKSB7XG4gICAgICAgICAgICBndWVzcyA9IG1heEluZGV4ICsgbWluSW5kZXggPj4gMTtcbiAgICAgICAgICAgIGlmIChhcnJheVtndWVzc10gPD0gdmFsKSB7XG4gICAgICAgICAgICAgIG1pbkluZGV4ID0gZ3Vlc3M7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtYXhJbmRleCA9IGd1ZXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbWF4SW5kZXg7XG4gICAgICAgIH07XG4gICAgICB9KCk7XG4gICAgICB0aGlzLnggPSB4O1xuICAgICAgdGhpcy55ID0geTtcbiAgICAgIHRoaXMubGFzdEluZGV4ID0geC5sZW5ndGggLSAxO1xuICAgICAgLy8gR2l2ZW4gYW4geCB2YWx1ZSAoeDIpLCByZXR1cm4gdGhlIGV4cGVjdGVkIHkyIHZhbHVlOlxuICAgICAgLy8gKHgxLHkxKSBpcyB0aGUga25vd24gcG9pbnQgYmVmb3JlIGdpdmVuIHZhbHVlLFxuICAgICAgLy8gKHgzLHkzKSBpcyB0aGUga25vd24gcG9pbnQgYWZ0ZXIgZ2l2ZW4gdmFsdWUuXG4gICAgICBsZXQgaTE7XG4gICAgICBsZXQgaTM7XG4gICAgICB0aGlzLmludGVycG9sYXRlID0gZnVuY3Rpb24gaW50ZXJwb2xhdGUoeDIpIHtcbiAgICAgICAgaWYgKCF4MikgcmV0dXJuIDA7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBpbmRleGVzIG9mIHgxIGFuZCB4MyAodGhlIGFycmF5IGluZGV4ZXMgYmVmb3JlIGFuZCBhZnRlciBnaXZlbiB4Mik6XG4gICAgICAgIGkzID0gYmluYXJ5U2VhcmNoKHRoaXMueCwgeDIpO1xuICAgICAgICBpMSA9IGkzIC0gMTtcblxuICAgICAgICAvLyBXZSBoYXZlIG91ciBpbmRleGVzIGkxICYgaTMsIHNvIHdlIGNhbiBjYWxjdWxhdGUgYWxyZWFkeTpcbiAgICAgICAgLy8geTIgOj0gKCh4MuKIkngxKSDDlyAoeTPiiJJ5MSkpIMO3ICh4M+KIkngxKSArIHkxXG4gICAgICAgIHJldHVybiAoeDIgLSB0aGlzLnhbaTFdKSAqICh0aGlzLnlbaTNdIC0gdGhpcy55W2kxXSkgLyAodGhpcy54W2kzXSAtIHRoaXMueFtpMV0pICsgdGhpcy55W2kxXTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0SW50ZXJwb2xhdGVGdW5jdGlvbihjKSB7XG4gICAgICBzd2lwZXIuY29udHJvbGxlci5zcGxpbmUgPSBzd2lwZXIucGFyYW1zLmxvb3AgPyBuZXcgTGluZWFyU3BsaW5lKHN3aXBlci5zbGlkZXNHcmlkLCBjLnNsaWRlc0dyaWQpIDogbmV3IExpbmVhclNwbGluZShzd2lwZXIuc25hcEdyaWQsIGMuc25hcEdyaWQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRUcmFuc2xhdGUoX3QsIGJ5Q29udHJvbGxlcikge1xuICAgICAgY29uc3QgY29udHJvbGxlZCA9IHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgICBsZXQgbXVsdGlwbGllcjtcbiAgICAgIGxldCBjb250cm9sbGVkVHJhbnNsYXRlO1xuICAgICAgY29uc3QgU3dpcGVyID0gc3dpcGVyLmNvbnN0cnVjdG9yO1xuICAgICAgZnVuY3Rpb24gc2V0Q29udHJvbGxlZFRyYW5zbGF0ZShjKSB7XG4gICAgICAgIGlmIChjLmRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIHRoaXMgd2lsbCBjcmVhdGUgYW4gSW50ZXJwb2xhdGUgZnVuY3Rpb24gYmFzZWQgb24gdGhlIHNuYXBHcmlkc1xuICAgICAgICAvLyB4IGlzIHRoZSBHcmlkIG9mIHRoZSBzY3JvbGxlZCBzY3JvbGxlciBhbmQgeSB3aWxsIGJlIHRoZSBjb250cm9sbGVkIHNjcm9sbGVyXG4gICAgICAgIC8vIGl0IG1ha2VzIHNlbnNlIHRvIGNyZWF0ZSB0aGlzIG9ubHkgb25jZSBhbmQgcmVjYWxsIGl0IGZvciB0aGUgaW50ZXJwb2xhdGlvblxuICAgICAgICAvLyB0aGUgZnVuY3Rpb24gZG9lcyBhIGxvdCBvZiB2YWx1ZSBjYWNoaW5nIGZvciBwZXJmb3JtYW5jZVxuICAgICAgICBjb25zdCB0cmFuc2xhdGUgPSBzd2lwZXIucnRsVHJhbnNsYXRlID8gLXN3aXBlci50cmFuc2xhdGUgOiBzd2lwZXIudHJhbnNsYXRlO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jb250cm9sbGVyLmJ5ID09PSAnc2xpZGUnKSB7XG4gICAgICAgICAgZ2V0SW50ZXJwb2xhdGVGdW5jdGlvbihjKTtcbiAgICAgICAgICAvLyBpIGFtIG5vdCBzdXJlIHdoeSB0aGUgdmFsdWVzIGhhdmUgdG8gYmUgbXVsdGlwbGljYXRlZCB0aGlzIHdheSwgdHJpZWQgdG8gaW52ZXJ0IHRoZSBzbmFwR3JpZFxuICAgICAgICAgIC8vIGJ1dCBpdCBkaWQgbm90IHdvcmsgb3V0XG4gICAgICAgICAgY29udHJvbGxlZFRyYW5zbGF0ZSA9IC1zd2lwZXIuY29udHJvbGxlci5zcGxpbmUuaW50ZXJwb2xhdGUoLXRyYW5zbGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb250cm9sbGVkVHJhbnNsYXRlIHx8IHN3aXBlci5wYXJhbXMuY29udHJvbGxlci5ieSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgICBtdWx0aXBsaWVyID0gKGMubWF4VHJhbnNsYXRlKCkgLSBjLm1pblRyYW5zbGF0ZSgpKSAvIChzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpO1xuICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4obXVsdGlwbGllcikgfHwgIU51bWJlci5pc0Zpbml0ZShtdWx0aXBsaWVyKSkge1xuICAgICAgICAgICAgbXVsdGlwbGllciA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRyb2xsZWRUcmFuc2xhdGUgPSAodHJhbnNsYXRlIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSAqIG11bHRpcGxpZXIgKyBjLm1pblRyYW5zbGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuaW52ZXJzZSkge1xuICAgICAgICAgIGNvbnRyb2xsZWRUcmFuc2xhdGUgPSBjLm1heFRyYW5zbGF0ZSgpIC0gY29udHJvbGxlZFRyYW5zbGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBjLnVwZGF0ZVByb2dyZXNzKGNvbnRyb2xsZWRUcmFuc2xhdGUpO1xuICAgICAgICBjLnNldFRyYW5zbGF0ZShjb250cm9sbGVkVHJhbnNsYXRlLCBzd2lwZXIpO1xuICAgICAgICBjLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICAgIGMudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29udHJvbGxlZCkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250cm9sbGVkLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKGNvbnRyb2xsZWRbaV0gIT09IGJ5Q29udHJvbGxlciAmJiBjb250cm9sbGVkW2ldIGluc3RhbmNlb2YgU3dpcGVyKSB7XG4gICAgICAgICAgICBzZXRDb250cm9sbGVkVHJhbnNsYXRlKGNvbnRyb2xsZWRbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb250cm9sbGVkIGluc3RhbmNlb2YgU3dpcGVyICYmIGJ5Q29udHJvbGxlciAhPT0gY29udHJvbGxlZCkge1xuICAgICAgICBzZXRDb250cm9sbGVkVHJhbnNsYXRlKGNvbnRyb2xsZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnN0IFN3aXBlciA9IHN3aXBlci5jb25zdHJ1Y3RvcjtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZWQgPSBzd2lwZXIuY29udHJvbGxlci5jb250cm9sO1xuICAgICAgbGV0IGk7XG4gICAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVkVHJhbnNpdGlvbihjKSB7XG4gICAgICAgIGlmIChjLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBjLnNldFRyYW5zaXRpb24oZHVyYXRpb24sIHN3aXBlcik7XG4gICAgICAgIGlmIChkdXJhdGlvbiAhPT0gMCkge1xuICAgICAgICAgIGMudHJhbnNpdGlvblN0YXJ0KCk7XG4gICAgICAgICAgaWYgKGMucGFyYW1zLmF1dG9IZWlnaHQpIHtcbiAgICAgICAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgYy51cGRhdGVBdXRvSGVpZ2h0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudFRyYW5zaXRpb25FbmQoYy53cmFwcGVyRWwsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghY29udHJvbGxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgYy50cmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbnRyb2xsZWQpKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb250cm9sbGVkLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKGNvbnRyb2xsZWRbaV0gIT09IGJ5Q29udHJvbGxlciAmJiBjb250cm9sbGVkW2ldIGluc3RhbmNlb2YgU3dpcGVyKSB7XG4gICAgICAgICAgICBzZXRDb250cm9sbGVkVHJhbnNpdGlvbihjb250cm9sbGVkW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29udHJvbGxlZCBpbnN0YW5jZW9mIFN3aXBlciAmJiBieUNvbnRyb2xsZXIgIT09IGNvbnRyb2xsZWQpIHtcbiAgICAgICAgc2V0Q29udHJvbGxlZFRyYW5zaXRpb24oY29udHJvbGxlZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZVNwbGluZSgpIHtcbiAgICAgIGlmICghc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCkgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5jb250cm9sbGVyLnNwbGluZSkge1xuICAgICAgICBzd2lwZXIuY29udHJvbGxlci5zcGxpbmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRlbGV0ZSBzd2lwZXIuY29udHJvbGxlci5zcGxpbmU7XG4gICAgICB9XG4gICAgfVxuICAgIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIChcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIHR5cGVvZiBzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCA9PT0gJ3N0cmluZycgfHwgc3dpcGVyLnBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2wgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgY29uc3QgY29udHJvbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN3aXBlci5wYXJhbXMuY29udHJvbGxlci5jb250cm9sKTtcbiAgICAgICAgaWYgKGNvbnRyb2xFbGVtZW50ICYmIGNvbnRyb2xFbGVtZW50LnN3aXBlcikge1xuICAgICAgICAgIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBjb250cm9sRWxlbWVudC5zd2lwZXI7XG4gICAgICAgIH0gZWxzZSBpZiAoY29udHJvbEVsZW1lbnQpIHtcbiAgICAgICAgICBjb25zdCBvbkNvbnRyb2xsZXJTd2lwZXIgPSBlID0+IHtcbiAgICAgICAgICAgIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBlLmRldGFpbFswXTtcbiAgICAgICAgICAgIHN3aXBlci51cGRhdGUoKTtcbiAgICAgICAgICAgIGNvbnRyb2xFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2luaXQnLCBvbkNvbnRyb2xsZXJTd2lwZXIpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgY29udHJvbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5pdCcsIG9uQ29udHJvbGxlclN3aXBlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCA9IHN3aXBlci5wYXJhbXMuY29udHJvbGxlci5jb250cm9sO1xuICAgIH0pO1xuICAgIG9uKCd1cGRhdGUnLCAoKSA9PiB7XG4gICAgICByZW1vdmVTcGxpbmUoKTtcbiAgICB9KTtcbiAgICBvbigncmVzaXplJywgKCkgPT4ge1xuICAgICAgcmVtb3ZlU3BsaW5lKCk7XG4gICAgfSk7XG4gICAgb24oJ29ic2VydmVyVXBkYXRlJywgKCkgPT4ge1xuICAgICAgcmVtb3ZlU3BsaW5lKCk7XG4gICAgfSk7XG4gICAgb24oJ3NldFRyYW5zbGF0ZScsIChfcywgdHJhbnNsYXRlLCBieUNvbnRyb2xsZXIpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCB8fCBzd2lwZXIuY29udHJvbGxlci5jb250cm9sLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgc3dpcGVyLmNvbnRyb2xsZXIuc2V0VHJhbnNsYXRlKHRyYW5zbGF0ZSwgYnlDb250cm9sbGVyKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNpdGlvbicsIChfcywgZHVyYXRpb24sIGJ5Q29udHJvbGxlcikgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIuY29udHJvbGxlci5jb250cm9sIHx8IHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICBzd2lwZXIuY29udHJvbGxlci5zZXRUcmFuc2l0aW9uKGR1cmF0aW9uLCBieUNvbnRyb2xsZXIpO1xuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLmNvbnRyb2xsZXIsIHtcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb25cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEExMXkoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvblxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBhMTF5OiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIG5vdGlmaWNhdGlvbkNsYXNzOiAnc3dpcGVyLW5vdGlmaWNhdGlvbicsXG4gICAgICAgIHByZXZTbGlkZU1lc3NhZ2U6ICdQcmV2aW91cyBzbGlkZScsXG4gICAgICAgIG5leHRTbGlkZU1lc3NhZ2U6ICdOZXh0IHNsaWRlJyxcbiAgICAgICAgZmlyc3RTbGlkZU1lc3NhZ2U6ICdUaGlzIGlzIHRoZSBmaXJzdCBzbGlkZScsXG4gICAgICAgIGxhc3RTbGlkZU1lc3NhZ2U6ICdUaGlzIGlzIHRoZSBsYXN0IHNsaWRlJyxcbiAgICAgICAgcGFnaW5hdGlvbkJ1bGxldE1lc3NhZ2U6ICdHbyB0byBzbGlkZSB7e2luZGV4fX0nLFxuICAgICAgICBzbGlkZUxhYmVsTWVzc2FnZTogJ3t7aW5kZXh9fSAvIHt7c2xpZGVzTGVuZ3RofX0nLFxuICAgICAgICBjb250YWluZXJNZXNzYWdlOiBudWxsLFxuICAgICAgICBjb250YWluZXJSb2xlRGVzY3JpcHRpb25NZXNzYWdlOiBudWxsLFxuICAgICAgICBpdGVtUm9sZURlc2NyaXB0aW9uTWVzc2FnZTogbnVsbCxcbiAgICAgICAgc2xpZGVSb2xlOiAnZ3JvdXAnLFxuICAgICAgICBpZDogbnVsbFxuICAgICAgfVxuICAgIH0pO1xuICAgIHN3aXBlci5hMTF5ID0ge1xuICAgICAgY2xpY2tlZDogZmFsc2VcbiAgICB9O1xuICAgIGxldCBsaXZlUmVnaW9uID0gbnVsbDtcbiAgICBsZXQgcHJldmVudEZvY3VzSGFuZGxlcjtcbiAgICBsZXQgZm9jdXNUYXJnZXRTbGlkZUVsO1xuICAgIGxldCB2aXNpYmlsaXR5Q2hhbmdlZFRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGZ1bmN0aW9uIG5vdGlmeShtZXNzYWdlKSB7XG4gICAgICBjb25zdCBub3RpZmljYXRpb24gPSBsaXZlUmVnaW9uO1xuICAgICAgaWYgKG5vdGlmaWNhdGlvbi5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgIG5vdGlmaWNhdGlvbi5pbm5lckhUTUwgPSAnJztcbiAgICAgIG5vdGlmaWNhdGlvbi5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21OdW1iZXIoc2l6ZSkge1xuICAgICAgaWYgKHNpemUgPT09IHZvaWQgMCkge1xuICAgICAgICBzaXplID0gMTY7XG4gICAgICB9XG4gICAgICBjb25zdCByYW5kb21DaGFyID0gKCkgPT4gTWF0aC5yb3VuZCgxNiAqIE1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDE2KTtcbiAgICAgIHJldHVybiAneCcucmVwZWF0KHNpemUpLnJlcGxhY2UoL3gvZywgcmFuZG9tQ2hhcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1ha2VFbEZvY3VzYWJsZShlbCkge1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuc2V0QXR0cmlidXRlKCd0YWJJbmRleCcsICcwJyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFrZUVsTm90Rm9jdXNhYmxlKGVsKSB7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgJy0xJyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRWxSb2xlKGVsLCByb2xlKSB7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCByb2xlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRFbFJvbGVEZXNjcmlwdGlvbihlbCwgZGVzY3JpcHRpb24pIHtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1yb2xlZGVzY3JpcHRpb24nLCBkZXNjcmlwdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRWxDb250cm9scyhlbCwgY29udHJvbHMpIHtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIGNvbnRyb2xzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRFbExhYmVsKGVsLCBsYWJlbCkge1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbGFiZWwpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZEVsSWQoZWwsIGlkKSB7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZEVsTGl2ZShlbCwgbGl2ZSkge1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCBsaXZlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaXNhYmxlRWwoZWwpIHtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVuYWJsZUVsKGVsKSB7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25FbnRlck9yU3BhY2VLZXkoZSkge1xuICAgICAgaWYgKGUua2V5Q29kZSAhPT0gMTMgJiYgZS5rZXlDb2RlICE9PSAzMikgcmV0dXJuO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5hMTF5O1xuICAgICAgY29uc3QgdGFyZ2V0RWwgPSBlLnRhcmdldDtcbiAgICAgIGlmIChzd2lwZXIucGFnaW5hdGlvbiAmJiBzd2lwZXIucGFnaW5hdGlvbi5lbCAmJiAodGFyZ2V0RWwgPT09IHN3aXBlci5wYWdpbmF0aW9uLmVsIHx8IHN3aXBlci5wYWdpbmF0aW9uLmVsLmNvbnRhaW5zKGUudGFyZ2V0KSkpIHtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5tYXRjaGVzKGNsYXNzZXNUb1NlbGVjdG9yKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcykpKSByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLm5hdmlnYXRpb24gJiYgc3dpcGVyLm5hdmlnYXRpb24ucHJldkVsICYmIHN3aXBlci5uYXZpZ2F0aW9uLm5leHRFbCkge1xuICAgICAgICBjb25zdCBwcmV2RWxzID0gbWFrZUVsZW1lbnRzQXJyYXkoc3dpcGVyLm5hdmlnYXRpb24ucHJldkVsKTtcbiAgICAgICAgY29uc3QgbmV4dEVscyA9IG1ha2VFbGVtZW50c0FycmF5KHN3aXBlci5uYXZpZ2F0aW9uLm5leHRFbCk7XG4gICAgICAgIGlmIChuZXh0RWxzLmluY2x1ZGVzKHRhcmdldEVsKSkge1xuICAgICAgICAgIGlmICghKHN3aXBlci5pc0VuZCAmJiAhc3dpcGVyLnBhcmFtcy5sb29wKSkge1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlTmV4dCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3dpcGVyLmlzRW5kKSB7XG4gICAgICAgICAgICBub3RpZnkocGFyYW1zLmxhc3RTbGlkZU1lc3NhZ2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub3RpZnkocGFyYW1zLm5leHRTbGlkZU1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldkVscy5pbmNsdWRlcyh0YXJnZXRFbCkpIHtcbiAgICAgICAgICBpZiAoIShzd2lwZXIuaXNCZWdpbm5pbmcgJiYgIXN3aXBlci5wYXJhbXMubG9vcCkpIHtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZVByZXYoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN3aXBlci5pc0JlZ2lubmluZykge1xuICAgICAgICAgICAgbm90aWZ5KHBhcmFtcy5maXJzdFNsaWRlTWVzc2FnZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vdGlmeShwYXJhbXMucHJldlNsaWRlTWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhZ2luYXRpb24gJiYgdGFyZ2V0RWwubWF0Y2hlcyhjbGFzc2VzVG9TZWxlY3Rvcihzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MpKSkge1xuICAgICAgICB0YXJnZXRFbC5jbGljaygpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uKCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMubG9vcCB8fCBzd2lwZXIucGFyYW1zLnJld2luZCB8fCAhc3dpcGVyLm5hdmlnYXRpb24pIHJldHVybjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgbmV4dEVsLFxuICAgICAgICBwcmV2RWxcbiAgICAgIH0gPSBzd2lwZXIubmF2aWdhdGlvbjtcbiAgICAgIGlmIChwcmV2RWwpIHtcbiAgICAgICAgaWYgKHN3aXBlci5pc0JlZ2lubmluZykge1xuICAgICAgICAgIGRpc2FibGVFbChwcmV2RWwpO1xuICAgICAgICAgIG1ha2VFbE5vdEZvY3VzYWJsZShwcmV2RWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVuYWJsZUVsKHByZXZFbCk7XG4gICAgICAgICAgbWFrZUVsRm9jdXNhYmxlKHByZXZFbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChuZXh0RWwpIHtcbiAgICAgICAgaWYgKHN3aXBlci5pc0VuZCkge1xuICAgICAgICAgIGRpc2FibGVFbChuZXh0RWwpO1xuICAgICAgICAgIG1ha2VFbE5vdEZvY3VzYWJsZShuZXh0RWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVuYWJsZUVsKG5leHRFbCk7XG4gICAgICAgICAgbWFrZUVsRm9jdXNhYmxlKG5leHRFbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzUGFnaW5hdGlvbigpIHtcbiAgICAgIHJldHVybiBzd2lwZXIucGFnaW5hdGlvbiAmJiBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzICYmIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMubGVuZ3RoO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNDbGlja2FibGVQYWdpbmF0aW9uKCkge1xuICAgICAgcmV0dXJuIGhhc1BhZ2luYXRpb24oKSAmJiBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uY2xpY2thYmxlO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVQYWdpbmF0aW9uKCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5hMTF5O1xuICAgICAgaWYgKCFoYXNQYWdpbmF0aW9uKCkpIHJldHVybjtcbiAgICAgIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMuZm9yRWFjaChidWxsZXRFbCA9PiB7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uY2xpY2thYmxlKSB7XG4gICAgICAgICAgbWFrZUVsRm9jdXNhYmxlKGJ1bGxldEVsKTtcbiAgICAgICAgICBpZiAoIXN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5yZW5kZXJCdWxsZXQpIHtcbiAgICAgICAgICAgIGFkZEVsUm9sZShidWxsZXRFbCwgJ2J1dHRvbicpO1xuICAgICAgICAgICAgYWRkRWxMYWJlbChidWxsZXRFbCwgcGFyYW1zLnBhZ2luYXRpb25CdWxsZXRNZXNzYWdlLnJlcGxhY2UoL1xce1xce2luZGV4XFx9XFx9LywgZWxlbWVudEluZGV4KGJ1bGxldEVsKSArIDEpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJ1bGxldEVsLm1hdGNoZXMoY2xhc3Nlc1RvU2VsZWN0b3Ioc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldEFjdGl2ZUNsYXNzKSkpIHtcbiAgICAgICAgICBidWxsZXRFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcsICd0cnVlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVsbGV0RWwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGluaXROYXZFbCA9IChlbCwgd3JhcHBlcklkLCBtZXNzYWdlKSA9PiB7XG4gICAgICBtYWtlRWxGb2N1c2FibGUoZWwpO1xuICAgICAgaWYgKGVsLnRhZ05hbWUgIT09ICdCVVRUT04nKSB7XG4gICAgICAgIGFkZEVsUm9sZShlbCwgJ2J1dHRvbicpO1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25FbnRlck9yU3BhY2VLZXkpO1xuICAgICAgfVxuICAgICAgYWRkRWxMYWJlbChlbCwgbWVzc2FnZSk7XG4gICAgICBhZGRFbENvbnRyb2xzKGVsLCB3cmFwcGVySWQpO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlUG9pbnRlckRvd24gPSBlID0+IHtcbiAgICAgIGlmIChmb2N1c1RhcmdldFNsaWRlRWwgJiYgZm9jdXNUYXJnZXRTbGlkZUVsICE9PSBlLnRhcmdldCAmJiAhZm9jdXNUYXJnZXRTbGlkZUVsLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICBwcmV2ZW50Rm9jdXNIYW5kbGVyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHN3aXBlci5hMTF5LmNsaWNrZWQgPSB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlUG9pbnRlclVwID0gKCkgPT4ge1xuICAgICAgcHJldmVudEZvY3VzSGFuZGxlciA9IGZhbHNlO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpZiAoIXN3aXBlci5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHN3aXBlci5hMTF5LmNsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBvblZpc2liaWxpdHlDaGFuZ2UgPSBlID0+IHtcbiAgICAgIHZpc2liaWxpdHlDaGFuZ2VkVGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVGb2N1cyA9IGUgPT4ge1xuICAgICAgaWYgKHN3aXBlci5hMTF5LmNsaWNrZWQpIHJldHVybjtcbiAgICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHZpc2liaWxpdHlDaGFuZ2VkVGltZXN0YW1wIDwgMTAwKSByZXR1cm47XG4gICAgICBjb25zdCBzbGlkZUVsID0gZS50YXJnZXQuY2xvc2VzdChgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfSwgc3dpcGVyLXNsaWRlYCk7XG4gICAgICBpZiAoIXNsaWRlRWwgfHwgIXN3aXBlci5zbGlkZXMuaW5jbHVkZXMoc2xpZGVFbCkpIHJldHVybjtcbiAgICAgIGZvY3VzVGFyZ2V0U2xpZGVFbCA9IHNsaWRlRWw7XG4gICAgICBjb25zdCBpc0FjdGl2ZSA9IHN3aXBlci5zbGlkZXMuaW5kZXhPZihzbGlkZUVsKSA9PT0gc3dpcGVyLmFjdGl2ZUluZGV4O1xuICAgICAgY29uc3QgaXNWaXNpYmxlID0gc3dpcGVyLnBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzICYmIHN3aXBlci52aXNpYmxlU2xpZGVzICYmIHN3aXBlci52aXNpYmxlU2xpZGVzLmluY2x1ZGVzKHNsaWRlRWwpO1xuICAgICAgaWYgKGlzQWN0aXZlIHx8IGlzVmlzaWJsZSkgcmV0dXJuO1xuICAgICAgaWYgKGUuc291cmNlQ2FwYWJpbGl0aWVzICYmIGUuc291cmNlQ2FwYWJpbGl0aWVzLmZpcmVzVG91Y2hFdmVudHMpIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgc3dpcGVyLmVsLnNjcm9sbExlZnQgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLmVsLnNjcm9sbFRvcCA9IDA7XG4gICAgICB9XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpZiAocHJldmVudEZvY3VzSGFuZGxlcikgcmV0dXJuO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG9Mb29wKHBhcnNlSW50KHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpKSwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnNsaWRlcy5pbmRleE9mKHNsaWRlRWwpLCAwKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2ZW50Rm9jdXNIYW5kbGVyID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGluaXRTbGlkZXMgPSAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmExMXk7XG4gICAgICBpZiAocGFyYW1zLml0ZW1Sb2xlRGVzY3JpcHRpb25NZXNzYWdlKSB7XG4gICAgICAgIGFkZEVsUm9sZURlc2NyaXB0aW9uKHN3aXBlci5zbGlkZXMsIHBhcmFtcy5pdGVtUm9sZURlc2NyaXB0aW9uTWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBpZiAocGFyYW1zLnNsaWRlUm9sZSkge1xuICAgICAgICBhZGRFbFJvbGUoc3dpcGVyLnNsaWRlcywgcGFyYW1zLnNsaWRlUm9sZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBzbGlkZXNMZW5ndGggPSBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcbiAgICAgIGlmIChwYXJhbXMuc2xpZGVMYWJlbE1lc3NhZ2UpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKChzbGlkZUVsLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNsaWRlSW5kZXggPSBzd2lwZXIucGFyYW1zLmxvb3AgPyBwYXJzZUludChzbGlkZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSwgMTApIDogaW5kZXg7XG4gICAgICAgICAgY29uc3QgYXJpYUxhYmVsTWVzc2FnZSA9IHBhcmFtcy5zbGlkZUxhYmVsTWVzc2FnZS5yZXBsYWNlKC9cXHtcXHtpbmRleFxcfVxcfS8sIHNsaWRlSW5kZXggKyAxKS5yZXBsYWNlKC9cXHtcXHtzbGlkZXNMZW5ndGhcXH1cXH0vLCBzbGlkZXNMZW5ndGgpO1xuICAgICAgICAgIGFkZEVsTGFiZWwoc2xpZGVFbCwgYXJpYUxhYmVsTWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuYTExeTtcbiAgICAgIHN3aXBlci5lbC5hcHBlbmQobGl2ZVJlZ2lvbik7XG5cbiAgICAgIC8vIENvbnRhaW5lclxuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBzd2lwZXIuZWw7XG4gICAgICBpZiAocGFyYW1zLmNvbnRhaW5lclJvbGVEZXNjcmlwdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgYWRkRWxSb2xlRGVzY3JpcHRpb24oY29udGFpbmVyRWwsIHBhcmFtcy5jb250YWluZXJSb2xlRGVzY3JpcHRpb25NZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMuY29udGFpbmVyTWVzc2FnZSkge1xuICAgICAgICBhZGRFbExhYmVsKGNvbnRhaW5lckVsLCBwYXJhbXMuY29udGFpbmVyTWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdyYXBwZXJcbiAgICAgIGNvbnN0IHdyYXBwZXJFbCA9IHN3aXBlci53cmFwcGVyRWw7XG4gICAgICBjb25zdCB3cmFwcGVySWQgPSBwYXJhbXMuaWQgfHwgd3JhcHBlckVsLmdldEF0dHJpYnV0ZSgnaWQnKSB8fCBgc3dpcGVyLXdyYXBwZXItJHtnZXRSYW5kb21OdW1iZXIoMTYpfWA7XG4gICAgICBjb25zdCBsaXZlID0gc3dpcGVyLnBhcmFtcy5hdXRvcGxheSAmJiBzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmVuYWJsZWQgPyAnb2ZmJyA6ICdwb2xpdGUnO1xuICAgICAgYWRkRWxJZCh3cmFwcGVyRWwsIHdyYXBwZXJJZCk7XG4gICAgICBhZGRFbExpdmUod3JhcHBlckVsLCBsaXZlKTtcblxuICAgICAgLy8gU2xpZGVcbiAgICAgIGluaXRTbGlkZXMoKTtcblxuICAgICAgLy8gTmF2aWdhdGlvblxuICAgICAgbGV0IHtcbiAgICAgICAgbmV4dEVsLFxuICAgICAgICBwcmV2RWxcbiAgICAgIH0gPSBzd2lwZXIubmF2aWdhdGlvbiA/IHN3aXBlci5uYXZpZ2F0aW9uIDoge307XG4gICAgICBuZXh0RWwgPSBtYWtlRWxlbWVudHNBcnJheShuZXh0RWwpO1xuICAgICAgcHJldkVsID0gbWFrZUVsZW1lbnRzQXJyYXkocHJldkVsKTtcbiAgICAgIGlmIChuZXh0RWwpIHtcbiAgICAgICAgbmV4dEVsLmZvckVhY2goZWwgPT4gaW5pdE5hdkVsKGVsLCB3cmFwcGVySWQsIHBhcmFtcy5uZXh0U2xpZGVNZXNzYWdlKSk7XG4gICAgICB9XG4gICAgICBpZiAocHJldkVsKSB7XG4gICAgICAgIHByZXZFbC5mb3JFYWNoKGVsID0+IGluaXROYXZFbChlbCwgd3JhcHBlcklkLCBwYXJhbXMucHJldlNsaWRlTWVzc2FnZSkpO1xuICAgICAgfVxuXG4gICAgICAvLyBQYWdpbmF0aW9uXG4gICAgICBpZiAoaGFzQ2xpY2thYmxlUGFnaW5hdGlvbigpKSB7XG4gICAgICAgIGNvbnN0IHBhZ2luYXRpb25FbCA9IG1ha2VFbGVtZW50c0FycmF5KHN3aXBlci5wYWdpbmF0aW9uLmVsKTtcbiAgICAgICAgcGFnaW5hdGlvbkVsLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbkVudGVyT3JTcGFjZUtleSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBUYWIgZm9jdXNcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgICAgc3dpcGVyLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgaGFuZGxlRm9jdXMsIHRydWUpO1xuICAgICAgc3dpcGVyLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgaGFuZGxlRm9jdXMsIHRydWUpO1xuICAgICAgc3dpcGVyLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgaGFuZGxlUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgc3dpcGVyLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGhhbmRsZVBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgaWYgKGxpdmVSZWdpb24pIGxpdmVSZWdpb24ucmVtb3ZlKCk7XG4gICAgICBsZXQge1xuICAgICAgICBuZXh0RWwsXG4gICAgICAgIHByZXZFbFxuICAgICAgfSA9IHN3aXBlci5uYXZpZ2F0aW9uID8gc3dpcGVyLm5hdmlnYXRpb24gOiB7fTtcbiAgICAgIG5leHRFbCA9IG1ha2VFbGVtZW50c0FycmF5KG5leHRFbCk7XG4gICAgICBwcmV2RWwgPSBtYWtlRWxlbWVudHNBcnJheShwcmV2RWwpO1xuICAgICAgaWYgKG5leHRFbCkge1xuICAgICAgICBuZXh0RWwuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25FbnRlck9yU3BhY2VLZXkpKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2RWwpIHtcbiAgICAgICAgcHJldkVsLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uRW50ZXJPclNwYWNlS2V5KSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhZ2luYXRpb25cbiAgICAgIGlmIChoYXNDbGlja2FibGVQYWdpbmF0aW9uKCkpIHtcbiAgICAgICAgY29uc3QgcGFnaW5hdGlvbkVsID0gbWFrZUVsZW1lbnRzQXJyYXkoc3dpcGVyLnBhZ2luYXRpb24uZWwpO1xuICAgICAgICBwYWdpbmF0aW9uRWwuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uRW50ZXJPclNwYWNlS2V5KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgIC8vIFRhYiBmb2N1c1xuICAgICAgaWYgKHN3aXBlci5lbCAmJiB0eXBlb2Ygc3dpcGVyLmVsICE9PSAnc3RyaW5nJykge1xuICAgICAgICBzd2lwZXIuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBoYW5kbGVGb2N1cywgdHJ1ZSk7XG4gICAgICAgIHN3aXBlci5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIGhhbmRsZVBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgICAgc3dpcGVyLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGhhbmRsZVBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgICAgbGl2ZVJlZ2lvbiA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCBzd2lwZXIucGFyYW1zLmExMXkubm90aWZpY2F0aW9uQ2xhc3MpO1xuICAgICAgbGl2ZVJlZ2lvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdhc3NlcnRpdmUnKTtcbiAgICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKCdhcmlhLWF0b21pYycsICd0cnVlJyk7XG4gICAgfSk7XG4gICAgb24oJ2FmdGVySW5pdCcsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5hMTF5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGluaXQoKTtcbiAgICB9KTtcbiAgICBvbignc2xpZGVzTGVuZ3RoQ2hhbmdlIHNuYXBHcmlkTGVuZ3RoQ2hhbmdlIHNsaWRlc0dyaWRMZW5ndGhDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuYTExeS5lbmFibGVkKSByZXR1cm47XG4gICAgICBpbml0U2xpZGVzKCk7XG4gICAgfSk7XG4gICAgb24oJ2Zyb21FZGdlIHRvRWRnZSBhZnRlckluaXQgbG9jayB1bmxvY2snLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuYTExeS5lbmFibGVkKSByZXR1cm47XG4gICAgICB1cGRhdGVOYXZpZ2F0aW9uKCk7XG4gICAgfSk7XG4gICAgb24oJ3BhZ2luYXRpb25VcGRhdGUnLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuYTExeS5lbmFibGVkKSByZXR1cm47XG4gICAgICB1cGRhdGVQYWdpbmF0aW9uKCk7XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuYTExeS5lbmFibGVkKSByZXR1cm47XG4gICAgICBkZXN0cm95KCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBIaXN0b3J5KF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgaGlzdG9yeToge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgcm9vdDogJycsXG4gICAgICAgIHJlcGxhY2VTdGF0ZTogZmFsc2UsXG4gICAgICAgIGtleTogJ3NsaWRlcycsXG4gICAgICAgIGtlZXBRdWVyeTogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICBsZXQgcGF0aHMgPSB7fTtcbiAgICBjb25zdCBzbHVnaWZ5ID0gdGV4dCA9PiB7XG4gICAgICByZXR1cm4gdGV4dC50b1N0cmluZygpLnJlcGxhY2UoL1xccysvZywgJy0nKS5yZXBsYWNlKC9bXlxcdy1dKy9nLCAnJykucmVwbGFjZSgvLS0rL2csICctJykucmVwbGFjZSgvXi0rLywgJycpLnJlcGxhY2UoLy0rJC8sICcnKTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFBhdGhWYWx1ZXMgPSB1cmxPdmVycmlkZSA9PiB7XG4gICAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICAgIGxldCBsb2NhdGlvbjtcbiAgICAgIGlmICh1cmxPdmVycmlkZSkge1xuICAgICAgICBsb2NhdGlvbiA9IG5ldyBVUkwodXJsT3ZlcnJpZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICB9XG4gICAgICBjb25zdCBwYXRoQXJyYXkgPSBsb2NhdGlvbi5wYXRobmFtZS5zbGljZSgxKS5zcGxpdCgnLycpLmZpbHRlcihwYXJ0ID0+IHBhcnQgIT09ICcnKTtcbiAgICAgIGNvbnN0IHRvdGFsID0gcGF0aEFycmF5Lmxlbmd0aDtcbiAgICAgIGNvbnN0IGtleSA9IHBhdGhBcnJheVt0b3RhbCAtIDJdO1xuICAgICAgY29uc3QgdmFsdWUgPSBwYXRoQXJyYXlbdG90YWwgLSAxXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleSxcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBzZXRIaXN0b3J5ID0gKGtleSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgICAgaWYgKCFpbml0aWFsaXplZCB8fCAhc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGxldCBsb2NhdGlvbjtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnVybCkge1xuICAgICAgICBsb2NhdGlvbiA9IG5ldyBVUkwoc3dpcGVyLnBhcmFtcy51cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICB9XG4gICAgICBjb25zdCBzbGlkZSA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7aW5kZXh9XCJdYCkgOiBzd2lwZXIuc2xpZGVzW2luZGV4XTtcbiAgICAgIGxldCB2YWx1ZSA9IHNsdWdpZnkoc2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhpc3RvcnknKSk7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LnJvb3QubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgcm9vdCA9IHN3aXBlci5wYXJhbXMuaGlzdG9yeS5yb290O1xuICAgICAgICBpZiAocm9vdFtyb290Lmxlbmd0aCAtIDFdID09PSAnLycpIHJvb3QgPSByb290LnNsaWNlKDAsIHJvb3QubGVuZ3RoIC0gMSk7XG4gICAgICAgIHZhbHVlID0gYCR7cm9vdH0vJHtrZXkgPyBgJHtrZXl9L2AgOiAnJ30ke3ZhbHVlfWA7XG4gICAgICB9IGVsc2UgaWYgKCFsb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIHZhbHVlID0gYCR7a2V5ID8gYCR7a2V5fS9gIDogJyd9JHt2YWx1ZX1gO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuaGlzdG9yeS5rZWVwUXVlcnkpIHtcbiAgICAgICAgdmFsdWUgKz0gbG9jYXRpb24uc2VhcmNoO1xuICAgICAgfVxuICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gd2luZG93Lmhpc3Rvcnkuc3RhdGU7XG4gICAgICBpZiAoY3VycmVudFN0YXRlICYmIGN1cnJlbnRTdGF0ZS52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHtcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9LCBudWxsLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe1xuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0sIG51bGwsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNjcm9sbFRvU2xpZGUgPSAoc3BlZWQsIHZhbHVlLCBydW5DYWxsYmFja3MpID0+IHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gc3dpcGVyLnNsaWRlcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IHNsaWRlID0gc3dpcGVyLnNsaWRlc1tpXTtcbiAgICAgICAgICBjb25zdCBzbGlkZUhpc3RvcnkgPSBzbHVnaWZ5KHNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS1oaXN0b3J5JykpO1xuICAgICAgICAgIGlmIChzbGlkZUhpc3RvcnkgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHN3aXBlci5nZXRTbGlkZUluZGV4KHNsaWRlKTtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZVRvKGluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKDAsIHNwZWVkLCBydW5DYWxsYmFja3MpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0SGlzdG9yeVBvcFN0YXRlID0gKCkgPT4ge1xuICAgICAgcGF0aHMgPSBnZXRQYXRoVmFsdWVzKHN3aXBlci5wYXJhbXMudXJsKTtcbiAgICAgIHNjcm9sbFRvU2xpZGUoc3dpcGVyLnBhcmFtcy5zcGVlZCwgcGF0aHMudmFsdWUsIGZhbHNlKTtcbiAgICB9O1xuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5oaXN0b3J5KSByZXR1cm47XG4gICAgICBpZiAoIXdpbmRvdy5oaXN0b3J5IHx8ICF3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUpIHtcbiAgICAgICAgc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgcGF0aHMgPSBnZXRQYXRoVmFsdWVzKHN3aXBlci5wYXJhbXMudXJsKTtcbiAgICAgIGlmICghcGF0aHMua2V5ICYmICFwYXRocy52YWx1ZSkge1xuICAgICAgICBpZiAoIXN3aXBlci5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBzZXRIaXN0b3J5UG9wU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNjcm9sbFRvU2xpZGUoMCwgcGF0aHMudmFsdWUsIHN3aXBlci5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0KTtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBzZXRIaXN0b3J5UG9wU3RhdGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZGVzdHJveSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHNldEhpc3RvcnlQb3BTdGF0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCkge1xuICAgICAgICBpbml0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHtcbiAgICAgICAgZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCd0cmFuc2l0aW9uRW5kIF9mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlJywgKCkgPT4ge1xuICAgICAgaWYgKGluaXRpYWxpemVkKSB7XG4gICAgICAgIHNldEhpc3Rvcnkoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmtleSwgc3dpcGVyLmFjdGl2ZUluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignc2xpZGVDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBpZiAoaW5pdGlhbGl6ZWQgJiYgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHNldEhpc3Rvcnkoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmtleSwgc3dpcGVyLmFjdGl2ZUluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEhhc2hOYXZpZ2F0aW9uKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgZW1pdCxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgbGV0IGluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBoYXNoTmF2aWdhdGlvbjoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgcmVwbGFjZVN0YXRlOiBmYWxzZSxcbiAgICAgICAgd2F0Y2hTdGF0ZTogZmFsc2UsXG4gICAgICAgIGdldFNsaWRlSW5kZXgoX3MsIGhhc2gpIHtcbiAgICAgICAgICBpZiAoc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlV2l0aEhhc2ggPSBzd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhhc2gnKSA9PT0gaGFzaClbMF07XG4gICAgICAgICAgICBpZiAoIXNsaWRlV2l0aEhhc2gpIHJldHVybiAwO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChzbGlkZVdpdGhIYXNoLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3dpcGVyLmdldFNsaWRlSW5kZXgoZWxlbWVudENoaWxkcmVuKHN3aXBlci5zbGlkZXNFbCwgYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31bZGF0YS1oYXNoPVwiJHtoYXNofVwiXSwgc3dpcGVyLXNsaWRlW2RhdGEtaGFzaD1cIiR7aGFzaH1cIl1gKVswXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBvbkhhc2hDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBlbWl0KCdoYXNoQ2hhbmdlJyk7XG4gICAgICBjb25zdCBuZXdIYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5yZXBsYWNlKCcjJywgJycpO1xuICAgICAgY29uc3QgYWN0aXZlU2xpZGVFbCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7c3dpcGVyLmFjdGl2ZUluZGV4fVwiXWApIDogc3dpcGVyLnNsaWRlc1tzd2lwZXIuYWN0aXZlSW5kZXhdO1xuICAgICAgY29uc3QgYWN0aXZlU2xpZGVIYXNoID0gYWN0aXZlU2xpZGVFbCA/IGFjdGl2ZVNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhhc2gnKSA6ICcnO1xuICAgICAgaWYgKG5ld0hhc2ggIT09IGFjdGl2ZVNsaWRlSGFzaCkge1xuICAgICAgICBjb25zdCBuZXdJbmRleCA9IHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZ2V0U2xpZGVJbmRleChzd2lwZXIsIG5ld0hhc2gpO1xuICAgICAgICBpZiAodHlwZW9mIG5ld0luZGV4ID09PSAndW5kZWZpbmVkJyB8fCBOdW1iZXIuaXNOYU4obmV3SW5kZXgpKSByZXR1cm47XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKG5ld0luZGV4KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldEhhc2ggPSAoKSA9PiB7XG4gICAgICBpZiAoIWluaXRpYWxpemVkIHx8ICFzd2lwZXIucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IGFjdGl2ZVNsaWRlRWwgPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHN3aXBlci5zbGlkZXNFbC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3N3aXBlci5hY3RpdmVJbmRleH1cIl1gKSA6IHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XTtcbiAgICAgIGNvbnN0IGFjdGl2ZVNsaWRlSGFzaCA9IGFjdGl2ZVNsaWRlRWwgPyBhY3RpdmVTbGlkZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1oYXNoJykgfHwgYWN0aXZlU2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGlzdG9yeScpIDogJyc7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5yZXBsYWNlU3RhdGUgJiYgd2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCBgIyR7YWN0aXZlU2xpZGVIYXNofWAgfHwgJycpO1xuICAgICAgICBlbWl0KCdoYXNoU2V0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5oYXNoID0gYWN0aXZlU2xpZGVIYXNoIHx8ICcnO1xuICAgICAgICBlbWl0KCdoYXNoU2V0Jyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQgfHwgc3dpcGVyLnBhcmFtcy5oaXN0b3J5ICYmIHN3aXBlci5wYXJhbXMuaGlzdG9yeS5lbmFibGVkKSByZXR1cm47XG4gICAgICBpbml0aWFsaXplZCA9IHRydWU7XG4gICAgICBjb25zdCBoYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5yZXBsYWNlKCcjJywgJycpO1xuICAgICAgaWYgKGhhc2gpIHtcbiAgICAgICAgY29uc3Qgc3BlZWQgPSAwO1xuICAgICAgICBjb25zdCBpbmRleCA9IHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZ2V0U2xpZGVJbmRleChzd2lwZXIsIGhhc2gpO1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhpbmRleCB8fCAwLCBzcGVlZCwgc3dpcGVyLnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQsIHRydWUpO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24ud2F0Y2hTdGF0ZSkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIG9uSGFzaENoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24ud2F0Y2hTdGF0ZSkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIG9uSGFzaENoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQpIHtcbiAgICAgICAgaW5pdCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCkge1xuICAgICAgICBkZXN0cm95KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3RyYW5zaXRpb25FbmQgX2ZyZWVNb2RlTm9Nb21lbnR1bVJlbGVhc2UnLCAoKSA9PiB7XG4gICAgICBpZiAoaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgc2V0SGFzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdzbGlkZUNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmIChpbml0aWFsaXplZCAmJiBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc2V0SGFzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyogZXNsaW50IG5vLXVuZGVyc2NvcmUtZGFuZ2xlOiBcIm9mZlwiICovXG4gIC8qIGVzbGludCBuby11c2UtYmVmb3JlLWRlZmluZTogXCJvZmZcIiAqL1xuICBmdW5jdGlvbiBBdXRvcGxheShfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uLFxuICAgICAgZW1pdCxcbiAgICAgIHBhcmFtc1xuICAgIH0gPSBfcmVmO1xuICAgIHN3aXBlci5hdXRvcGxheSA9IHtcbiAgICAgIHJ1bm5pbmc6IGZhbHNlLFxuICAgICAgcGF1c2VkOiBmYWxzZSxcbiAgICAgIHRpbWVMZWZ0OiAwXG4gICAgfTtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgYXV0b3BsYXk6IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIGRlbGF5OiAzMDAwLFxuICAgICAgICB3YWl0Rm9yVHJhbnNpdGlvbjogdHJ1ZSxcbiAgICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxuICAgICAgICBzdG9wT25MYXN0U2xpZGU6IGZhbHNlLFxuICAgICAgICByZXZlcnNlRGlyZWN0aW9uOiBmYWxzZSxcbiAgICAgICAgcGF1c2VPbk1vdXNlRW50ZXI6IGZhbHNlXG4gICAgICB9XG4gICAgfSk7XG4gICAgbGV0IHRpbWVvdXQ7XG4gICAgbGV0IHJhZjtcbiAgICBsZXQgYXV0b3BsYXlEZWxheVRvdGFsID0gcGFyYW1zICYmIHBhcmFtcy5hdXRvcGxheSA/IHBhcmFtcy5hdXRvcGxheS5kZWxheSA6IDMwMDA7XG4gICAgbGV0IGF1dG9wbGF5RGVsYXlDdXJyZW50ID0gcGFyYW1zICYmIHBhcmFtcy5hdXRvcGxheSA/IHBhcmFtcy5hdXRvcGxheS5kZWxheSA6IDMwMDA7XG4gICAgbGV0IGF1dG9wbGF5VGltZUxlZnQ7XG4gICAgbGV0IGF1dG9wbGF5U3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgbGV0IHdhc1BhdXNlZDtcbiAgICBsZXQgaXNUb3VjaGVkO1xuICAgIGxldCBwYXVzZWRCeVRvdWNoO1xuICAgIGxldCB0b3VjaFN0YXJ0VGltZW91dDtcbiAgICBsZXQgc2xpZGVDaGFuZ2VkO1xuICAgIGxldCBwYXVzZWRCeUludGVyYWN0aW9uO1xuICAgIGxldCBwYXVzZWRCeVBvaW50ZXJFbnRlcjtcbiAgICBmdW5jdGlvbiBvblRyYW5zaXRpb25FbmQoZSkge1xuICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLndyYXBwZXJFbCkgcmV0dXJuO1xuICAgICAgaWYgKGUudGFyZ2V0ICE9PSBzd2lwZXIud3JhcHBlckVsKSByZXR1cm47XG4gICAgICBzd2lwZXIud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBvblRyYW5zaXRpb25FbmQpO1xuICAgICAgaWYgKHBhdXNlZEJ5UG9pbnRlckVudGVyIHx8IGUuZGV0YWlsICYmIGUuZGV0YWlsLmJ5U3dpcGVyVG91Y2hNb3ZlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlc3VtZSgpO1xuICAgIH1cbiAgICBjb25zdCBjYWxjVGltZUxlZnQgPSAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXIuYXV0b3BsYXkucGF1c2VkKSB7XG4gICAgICAgIHdhc1BhdXNlZCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHdhc1BhdXNlZCkge1xuICAgICAgICBhdXRvcGxheURlbGF5Q3VycmVudCA9IGF1dG9wbGF5VGltZUxlZnQ7XG4gICAgICAgIHdhc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgdGltZUxlZnQgPSBzd2lwZXIuYXV0b3BsYXkucGF1c2VkID8gYXV0b3BsYXlUaW1lTGVmdCA6IGF1dG9wbGF5U3RhcnRUaW1lICsgYXV0b3BsYXlEZWxheUN1cnJlbnQgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHN3aXBlci5hdXRvcGxheS50aW1lTGVmdCA9IHRpbWVMZWZ0O1xuICAgICAgZW1pdCgnYXV0b3BsYXlUaW1lTGVmdCcsIHRpbWVMZWZ0LCB0aW1lTGVmdCAvIGF1dG9wbGF5RGVsYXlUb3RhbCk7XG4gICAgICByYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjYWxjVGltZUxlZnQoKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgZ2V0U2xpZGVEZWxheSA9ICgpID0+IHtcbiAgICAgIGxldCBhY3RpdmVTbGlkZUVsO1xuICAgICAgaWYgKHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICAgIGFjdGl2ZVNsaWRlRWwgPSBzd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2lwZXItc2xpZGUtYWN0aXZlJykpWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlU2xpZGVFbCA9IHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XTtcbiAgICAgIH1cbiAgICAgIGlmICghYWN0aXZlU2xpZGVFbCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZURlbGF5ID0gcGFyc2VJbnQoYWN0aXZlU2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLWF1dG9wbGF5JyksIDEwKTtcbiAgICAgIHJldHVybiBjdXJyZW50U2xpZGVEZWxheTtcbiAgICB9O1xuICAgIGNvbnN0IHJ1biA9IGRlbGF5Rm9yY2UgPT4ge1xuICAgICAgaWYgKHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSByZXR1cm47XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYpO1xuICAgICAgY2FsY1RpbWVMZWZ0KCk7XG4gICAgICBsZXQgZGVsYXkgPSB0eXBlb2YgZGVsYXlGb3JjZSA9PT0gJ3VuZGVmaW5lZCcgPyBzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmRlbGF5IDogZGVsYXlGb3JjZTtcbiAgICAgIGF1dG9wbGF5RGVsYXlUb3RhbCA9IHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGVsYXk7XG4gICAgICBhdXRvcGxheURlbGF5Q3VycmVudCA9IHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGVsYXk7XG4gICAgICBjb25zdCBjdXJyZW50U2xpZGVEZWxheSA9IGdldFNsaWRlRGVsYXkoKTtcbiAgICAgIGlmICghTnVtYmVyLmlzTmFOKGN1cnJlbnRTbGlkZURlbGF5KSAmJiBjdXJyZW50U2xpZGVEZWxheSA+IDAgJiYgdHlwZW9mIGRlbGF5Rm9yY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlbGF5ID0gY3VycmVudFNsaWRlRGVsYXk7XG4gICAgICAgIGF1dG9wbGF5RGVsYXlUb3RhbCA9IGN1cnJlbnRTbGlkZURlbGF5O1xuICAgICAgICBhdXRvcGxheURlbGF5Q3VycmVudCA9IGN1cnJlbnRTbGlkZURlbGF5O1xuICAgICAgfVxuICAgICAgYXV0b3BsYXlUaW1lTGVmdCA9IGRlbGF5O1xuICAgICAgY29uc3Qgc3BlZWQgPSBzd2lwZXIucGFyYW1zLnNwZWVkO1xuICAgICAgY29uc3QgcHJvY2VlZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5yZXZlcnNlRGlyZWN0aW9uKSB7XG4gICAgICAgICAgaWYgKCFzd2lwZXIuaXNCZWdpbm5pbmcgfHwgc3dpcGVyLnBhcmFtcy5sb29wIHx8IHN3aXBlci5wYXJhbXMucmV3aW5kKSB7XG4gICAgICAgICAgICBzd2lwZXIuc2xpZGVQcmV2KHNwZWVkLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIGVtaXQoJ2F1dG9wbGF5Jyk7XG4gICAgICAgICAgfSBlbHNlIGlmICghc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5zdG9wT25MYXN0U2xpZGUpIHtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMSwgc3BlZWQsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgZW1pdCgnYXV0b3BsYXknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFzd2lwZXIuaXNFbmQgfHwgc3dpcGVyLnBhcmFtcy5sb29wIHx8IHN3aXBlci5wYXJhbXMucmV3aW5kKSB7XG4gICAgICAgICAgICBzd2lwZXIuc2xpZGVOZXh0KHNwZWVkLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIGVtaXQoJ2F1dG9wbGF5Jyk7XG4gICAgICAgICAgfSBlbHNlIGlmICghc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5zdG9wT25MYXN0U2xpZGUpIHtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZVRvKDAsIHNwZWVkLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIGVtaXQoJ2F1dG9wbGF5Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgICBhdXRvcGxheVN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBydW4oKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcHJvY2VlZCgpO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIHByb2NlZWQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgcmV0dXJuIGRlbGF5O1xuICAgIH07XG4gICAgY29uc3Qgc3RhcnQgPSAoKSA9PiB7XG4gICAgICBhdXRvcGxheVN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcgPSB0cnVlO1xuICAgICAgcnVuKCk7XG4gICAgICBlbWl0KCdhdXRvcGxheVN0YXJ0Jyk7XG4gICAgfTtcbiAgICBjb25zdCBzdG9wID0gKCkgPT4ge1xuICAgICAgc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZik7XG4gICAgICBlbWl0KCdhdXRvcGxheVN0b3AnKTtcbiAgICB9O1xuICAgIGNvbnN0IHBhdXNlID0gKGludGVybmFsLCByZXNldCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSByZXR1cm47XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgIHBhdXNlZEJ5SW50ZXJhY3Rpb24gPSB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJvY2VlZCA9ICgpID0+IHtcbiAgICAgICAgZW1pdCgnYXV0b3BsYXlQYXVzZScpO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5hdXRvcGxheS53YWl0Rm9yVHJhbnNpdGlvbikge1xuICAgICAgICAgIHN3aXBlci53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIG9uVHJhbnNpdGlvbkVuZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBzd2lwZXIuYXV0b3BsYXkucGF1c2VkID0gdHJ1ZTtcbiAgICAgIGlmIChyZXNldCkge1xuICAgICAgICBpZiAoc2xpZGVDaGFuZ2VkKSB7XG4gICAgICAgICAgYXV0b3BsYXlUaW1lTGVmdCA9IHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGVsYXk7XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIHByb2NlZWQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZGVsYXkgPSBhdXRvcGxheVRpbWVMZWZ0IHx8IHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGVsYXk7XG4gICAgICBhdXRvcGxheVRpbWVMZWZ0ID0gZGVsYXkgLSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBhdXRvcGxheVN0YXJ0VGltZSk7XG4gICAgICBpZiAoc3dpcGVyLmlzRW5kICYmIGF1dG9wbGF5VGltZUxlZnQgPCAwICYmICFzd2lwZXIucGFyYW1zLmxvb3ApIHJldHVybjtcbiAgICAgIGlmIChhdXRvcGxheVRpbWVMZWZ0IDwgMCkgYXV0b3BsYXlUaW1lTGVmdCA9IDA7XG4gICAgICBwcm9jZWVkKCk7XG4gICAgfTtcbiAgICBjb25zdCByZXN1bWUgPSAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLmlzRW5kICYmIGF1dG9wbGF5VGltZUxlZnQgPCAwICYmICFzd2lwZXIucGFyYW1zLmxvb3AgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgIGF1dG9wbGF5U3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBpZiAocGF1c2VkQnlJbnRlcmFjdGlvbikge1xuICAgICAgICBwYXVzZWRCeUludGVyYWN0aW9uID0gZmFsc2U7XG4gICAgICAgIHJ1bihhdXRvcGxheVRpbWVMZWZ0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJ1bigpO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCA9IGZhbHNlO1xuICAgICAgZW1pdCgnYXV0b3BsYXlSZXN1bWUnKTtcbiAgICB9O1xuICAgIGNvbnN0IG9uVmlzaWJpbGl0eUNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgICAgcGF1c2VkQnlJbnRlcmFjdGlvbiA9IHRydWU7XG4gICAgICAgIHBhdXNlKHRydWUpO1xuICAgICAgfVxuICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICAgIHJlc3VtZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb25Qb2ludGVyRW50ZXIgPSBlID0+IHtcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlICE9PSAnbW91c2UnKSByZXR1cm47XG4gICAgICBwYXVzZWRCeUludGVyYWN0aW9uID0gdHJ1ZTtcbiAgICAgIHBhdXNlZEJ5UG9pbnRlckVudGVyID0gdHJ1ZTtcbiAgICAgIGlmIChzd2lwZXIuYW5pbWF0aW5nIHx8IHN3aXBlci5hdXRvcGxheS5wYXVzZWQpIHJldHVybjtcbiAgICAgIHBhdXNlKHRydWUpO1xuICAgIH07XG4gICAgY29uc3Qgb25Qb2ludGVyTGVhdmUgPSBlID0+IHtcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlICE9PSAnbW91c2UnKSByZXR1cm47XG4gICAgICBwYXVzZWRCeVBvaW50ZXJFbnRlciA9IGZhbHNlO1xuICAgICAgaWYgKHN3aXBlci5hdXRvcGxheS5wYXVzZWQpIHtcbiAgICAgICAgcmVzdW1lKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBhdHRhY2hNb3VzZUV2ZW50cyA9ICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9wbGF5LnBhdXNlT25Nb3VzZUVudGVyKSB7XG4gICAgICAgIHN3aXBlci5lbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCBvblBvaW50ZXJFbnRlcik7XG4gICAgICAgIHN3aXBlci5lbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCBvblBvaW50ZXJMZWF2ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBkZXRhY2hNb3VzZUV2ZW50cyA9ICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuZWwgJiYgdHlwZW9mIHN3aXBlci5lbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgc3dpcGVyLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsIG9uUG9pbnRlckVudGVyKTtcbiAgICAgICAgc3dpcGVyLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsIG9uUG9pbnRlckxlYXZlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGF0dGFjaERvY3VtZW50RXZlbnRzID0gKCkgPT4ge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgfTtcbiAgICBjb25zdCBkZXRhY2hEb2N1bWVudEV2ZW50cyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIH07XG4gICAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5lbmFibGVkKSB7XG4gICAgICAgIGF0dGFjaE1vdXNlRXZlbnRzKCk7XG4gICAgICAgIGF0dGFjaERvY3VtZW50RXZlbnRzKCk7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBkZXRhY2hNb3VzZUV2ZW50cygpO1xuICAgICAgZGV0YWNoRG9jdW1lbnRFdmVudHMoKTtcbiAgICAgIGlmIChzd2lwZXIuYXV0b3BsYXkucnVubmluZykge1xuICAgICAgICBzdG9wKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ19mcmVlTW9kZVN0YXRpY1JlbGVhc2UnLCAoKSA9PiB7XG4gICAgICBpZiAocGF1c2VkQnlUb3VjaCB8fCBwYXVzZWRCeUludGVyYWN0aW9uKSB7XG4gICAgICAgIHJlc3VtZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZScsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kaXNhYmxlT25JbnRlcmFjdGlvbikge1xuICAgICAgICBwYXVzZSh0cnVlLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3AoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignYmVmb3JlVHJhbnNpdGlvblN0YXJ0JywgKF9zLCBzcGVlZCwgaW50ZXJuYWwpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgaWYgKGludGVybmFsIHx8ICFzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uKSB7XG4gICAgICAgIHBhdXNlKHRydWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdzbGlkZXJGaXJzdE1vdmUnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uKSB7XG4gICAgICAgIHN0b3AoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaXNUb3VjaGVkID0gdHJ1ZTtcbiAgICAgIHBhdXNlZEJ5VG91Y2ggPSBmYWxzZTtcbiAgICAgIHBhdXNlZEJ5SW50ZXJhY3Rpb24gPSBmYWxzZTtcbiAgICAgIHRvdWNoU3RhcnRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHBhdXNlZEJ5SW50ZXJhY3Rpb24gPSB0cnVlO1xuICAgICAgICBwYXVzZWRCeVRvdWNoID0gdHJ1ZTtcbiAgICAgICAgcGF1c2UodHJ1ZSk7XG4gICAgICB9LCAyMDApO1xuICAgIH0pO1xuICAgIG9uKCd0b3VjaEVuZCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuYXV0b3BsYXkucnVubmluZyB8fCAhaXNUb3VjaGVkKSByZXR1cm47XG4gICAgICBjbGVhclRpbWVvdXQodG91Y2hTdGFydFRpbWVvdXQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24pIHtcbiAgICAgICAgcGF1c2VkQnlUb3VjaCA9IGZhbHNlO1xuICAgICAgICBpc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHBhdXNlZEJ5VG91Y2ggJiYgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSByZXN1bWUoKTtcbiAgICAgIHBhdXNlZEJ5VG91Y2ggPSBmYWxzZTtcbiAgICAgIGlzVG91Y2hlZCA9IGZhbHNlO1xuICAgIH0pO1xuICAgIG9uKCdzbGlkZUNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgc2xpZGVDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5hdXRvcGxheSwge1xuICAgICAgc3RhcnQsXG4gICAgICBzdG9wLFxuICAgICAgcGF1c2UsXG4gICAgICByZXN1bWVcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFRodW1iKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgdGh1bWJzOiB7XG4gICAgICAgIHN3aXBlcjogbnVsbCxcbiAgICAgICAgbXVsdGlwbGVBY3RpdmVUaHVtYnM6IHRydWUsXG4gICAgICAgIGF1dG9TY3JvbGxPZmZzZXQ6IDAsXG4gICAgICAgIHNsaWRlVGh1bWJBY3RpdmVDbGFzczogJ3N3aXBlci1zbGlkZS10aHVtYi1hY3RpdmUnLFxuICAgICAgICB0aHVtYnNDb250YWluZXJDbGFzczogJ3N3aXBlci10aHVtYnMnXG4gICAgICB9XG4gICAgfSk7XG4gICAgbGV0IGluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgbGV0IHN3aXBlckNyZWF0ZWQgPSBmYWxzZTtcbiAgICBzd2lwZXIudGh1bWJzID0ge1xuICAgICAgc3dpcGVyOiBudWxsXG4gICAgfTtcbiAgICBmdW5jdGlvbiBvblRodW1iQ2xpY2soKSB7XG4gICAgICBjb25zdCB0aHVtYnNTd2lwZXIgPSBzd2lwZXIudGh1bWJzLnN3aXBlcjtcbiAgICAgIGlmICghdGh1bWJzU3dpcGVyIHx8IHRodW1ic1N3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IGNsaWNrZWRJbmRleCA9IHRodW1ic1N3aXBlci5jbGlja2VkSW5kZXg7XG4gICAgICBjb25zdCBjbGlja2VkU2xpZGUgPSB0aHVtYnNTd2lwZXIuY2xpY2tlZFNsaWRlO1xuICAgICAgaWYgKGNsaWNrZWRTbGlkZSAmJiBjbGlja2VkU2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKHN3aXBlci5wYXJhbXMudGh1bWJzLnNsaWRlVGh1bWJBY3RpdmVDbGFzcykpIHJldHVybjtcbiAgICAgIGlmICh0eXBlb2YgY2xpY2tlZEluZGV4ID09PSAndW5kZWZpbmVkJyB8fCBjbGlja2VkSW5kZXggPT09IG51bGwpIHJldHVybjtcbiAgICAgIGxldCBzbGlkZVRvSW5kZXg7XG4gICAgICBpZiAodGh1bWJzU3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIHNsaWRlVG9JbmRleCA9IHBhcnNlSW50KHRodW1ic1N3aXBlci5jbGlja2VkU2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZVRvSW5kZXggPSBjbGlja2VkSW5kZXg7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvTG9vcChzbGlkZVRvSW5kZXgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdGh1bWJzOiB0aHVtYnNQYXJhbXNcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgICAgaWYgKGluaXRpYWxpemVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpbml0aWFsaXplZCA9IHRydWU7XG4gICAgICBjb25zdCBTd2lwZXJDbGFzcyA9IHN3aXBlci5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmICh0aHVtYnNQYXJhbXMuc3dpcGVyIGluc3RhbmNlb2YgU3dpcGVyQ2xhc3MpIHtcbiAgICAgICAgc3dpcGVyLnRodW1icy5zd2lwZXIgPSB0aHVtYnNQYXJhbXMuc3dpcGVyO1xuICAgICAgICBPYmplY3QuYXNzaWduKHN3aXBlci50aHVtYnMuc3dpcGVyLm9yaWdpbmFsUGFyYW1zLCB7XG4gICAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihzd2lwZXIudGh1bWJzLnN3aXBlci5wYXJhbXMsIHtcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBzd2lwZXIudGh1bWJzLnN3aXBlci51cGRhdGUoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QkMSh0aHVtYnNQYXJhbXMuc3dpcGVyKSkge1xuICAgICAgICBjb25zdCB0aHVtYnNTd2lwZXJQYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCB0aHVtYnNQYXJhbXMuc3dpcGVyKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aHVtYnNTd2lwZXJQYXJhbXMsIHtcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBzd2lwZXIudGh1bWJzLnN3aXBlciA9IG5ldyBTd2lwZXJDbGFzcyh0aHVtYnNTd2lwZXJQYXJhbXMpO1xuICAgICAgICBzd2lwZXJDcmVhdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHN3aXBlci50aHVtYnMuc3dpcGVyLmVsLmNsYXNzTGlzdC5hZGQoc3dpcGVyLnBhcmFtcy50aHVtYnMudGh1bWJzQ29udGFpbmVyQ2xhc3MpO1xuICAgICAgc3dpcGVyLnRodW1icy5zd2lwZXIub24oJ3RhcCcsIG9uVGh1bWJDbGljayk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlKGluaXRpYWwpIHtcbiAgICAgIGNvbnN0IHRodW1ic1N3aXBlciA9IHN3aXBlci50aHVtYnMuc3dpcGVyO1xuICAgICAgaWYgKCF0aHVtYnNTd2lwZXIgfHwgdGh1bWJzU3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgY29uc3Qgc2xpZGVzUGVyVmlldyA9IHRodW1ic1N3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nID8gdGh1bWJzU3dpcGVyLnNsaWRlc1BlclZpZXdEeW5hbWljKCkgOiB0aHVtYnNTd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXc7XG5cbiAgICAgIC8vIEFjdGl2YXRlIHRodW1ic1xuICAgICAgbGV0IHRodW1ic1RvQWN0aXZhdGUgPSAxO1xuICAgICAgY29uc3QgdGh1bWJBY3RpdmVDbGFzcyA9IHN3aXBlci5wYXJhbXMudGh1bWJzLnNsaWRlVGh1bWJBY3RpdmVDbGFzcztcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxICYmICFzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIHRodW1ic1RvQWN0aXZhdGUgPSBzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXc7XG4gICAgICB9XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMudGh1bWJzLm11bHRpcGxlQWN0aXZlVGh1bWJzKSB7XG4gICAgICAgIHRodW1ic1RvQWN0aXZhdGUgPSAxO1xuICAgICAgfVxuICAgICAgdGh1bWJzVG9BY3RpdmF0ZSA9IE1hdGguZmxvb3IodGh1bWJzVG9BY3RpdmF0ZSk7XG4gICAgICB0aHVtYnNTd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiBzbGlkZUVsLmNsYXNzTGlzdC5yZW1vdmUodGh1bWJBY3RpdmVDbGFzcykpO1xuICAgICAgaWYgKHRodW1ic1N3aXBlci5wYXJhbXMubG9vcCB8fCB0aHVtYnNTd2lwZXIucGFyYW1zLnZpcnR1YWwgJiYgdGh1bWJzU3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aHVtYnNUb0FjdGl2YXRlOyBpICs9IDEpIHtcbiAgICAgICAgICBlbGVtZW50Q2hpbGRyZW4odGh1bWJzU3dpcGVyLnNsaWRlc0VsLCBgW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzd2lwZXIucmVhbEluZGV4ICsgaX1cIl1gKS5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAgICAgc2xpZGVFbC5jbGFzc0xpc3QuYWRkKHRodW1iQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRodW1ic1RvQWN0aXZhdGU7IGkgKz0gMSkge1xuICAgICAgICAgIGlmICh0aHVtYnNTd2lwZXIuc2xpZGVzW3N3aXBlci5yZWFsSW5kZXggKyBpXSkge1xuICAgICAgICAgICAgdGh1bWJzU3dpcGVyLnNsaWRlc1tzd2lwZXIucmVhbEluZGV4ICsgaV0uY2xhc3NMaXN0LmFkZCh0aHVtYkFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGF1dG9TY3JvbGxPZmZzZXQgPSBzd2lwZXIucGFyYW1zLnRodW1icy5hdXRvU2Nyb2xsT2Zmc2V0O1xuICAgICAgY29uc3QgdXNlT2Zmc2V0ID0gYXV0b1Njcm9sbE9mZnNldCAmJiAhdGh1bWJzU3dpcGVyLnBhcmFtcy5sb29wO1xuICAgICAgaWYgKHN3aXBlci5yZWFsSW5kZXggIT09IHRodW1ic1N3aXBlci5yZWFsSW5kZXggfHwgdXNlT2Zmc2V0KSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaHVtYnNJbmRleCA9IHRodW1ic1N3aXBlci5hY3RpdmVJbmRleDtcbiAgICAgICAgbGV0IG5ld1RodW1ic0luZGV4O1xuICAgICAgICBsZXQgZGlyZWN0aW9uO1xuICAgICAgICBpZiAodGh1bWJzU3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgICAgY29uc3QgbmV3VGh1bWJzU2xpZGUgPSB0aHVtYnNTd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpID09PSBgJHtzd2lwZXIucmVhbEluZGV4fWApWzBdO1xuICAgICAgICAgIG5ld1RodW1ic0luZGV4ID0gdGh1bWJzU3dpcGVyLnNsaWRlcy5pbmRleE9mKG5ld1RodW1ic1NsaWRlKTtcbiAgICAgICAgICBkaXJlY3Rpb24gPSBzd2lwZXIuYWN0aXZlSW5kZXggPiBzd2lwZXIucHJldmlvdXNJbmRleCA/ICduZXh0JyA6ICdwcmV2JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdUaHVtYnNJbmRleCA9IHN3aXBlci5yZWFsSW5kZXg7XG4gICAgICAgICAgZGlyZWN0aW9uID0gbmV3VGh1bWJzSW5kZXggPiBzd2lwZXIucHJldmlvdXNJbmRleCA/ICduZXh0JyA6ICdwcmV2JztcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlT2Zmc2V0KSB7XG4gICAgICAgICAgbmV3VGh1bWJzSW5kZXggKz0gZGlyZWN0aW9uID09PSAnbmV4dCcgPyBhdXRvU2Nyb2xsT2Zmc2V0IDogLTEgKiBhdXRvU2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aHVtYnNTd2lwZXIudmlzaWJsZVNsaWRlc0luZGV4ZXMgJiYgdGh1bWJzU3dpcGVyLnZpc2libGVTbGlkZXNJbmRleGVzLmluZGV4T2YobmV3VGh1bWJzSW5kZXgpIDwgMCkge1xuICAgICAgICAgIGlmICh0aHVtYnNTd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgICAgICBpZiAobmV3VGh1bWJzSW5kZXggPiBjdXJyZW50VGh1bWJzSW5kZXgpIHtcbiAgICAgICAgICAgICAgbmV3VGh1bWJzSW5kZXggPSBuZXdUaHVtYnNJbmRleCAtIE1hdGguZmxvb3Ioc2xpZGVzUGVyVmlldyAvIDIpICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ld1RodW1ic0luZGV4ID0gbmV3VGh1bWJzSW5kZXggKyBNYXRoLmZsb29yKHNsaWRlc1BlclZpZXcgLyAyKSAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChuZXdUaHVtYnNJbmRleCA+IGN1cnJlbnRUaHVtYnNJbmRleCAmJiB0aHVtYnNTd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAxKSA7XG4gICAgICAgICAgdGh1bWJzU3dpcGVyLnNsaWRlVG8obmV3VGh1bWJzSW5kZXgsIGluaXRpYWwgPyAwIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBvbignYmVmb3JlSW5pdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdGh1bWJzXG4gICAgICB9ID0gc3dpcGVyLnBhcmFtcztcbiAgICAgIGlmICghdGh1bWJzIHx8ICF0aHVtYnMuc3dpcGVyKSByZXR1cm47XG4gICAgICBpZiAodHlwZW9mIHRodW1icy5zd2lwZXIgPT09ICdzdHJpbmcnIHx8IHRodW1icy5zd2lwZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgICAgIGNvbnN0IGdldFRodW1ic0VsZW1lbnRBbmRJbml0ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHRodW1ic0VsZW1lbnQgPSB0eXBlb2YgdGh1bWJzLnN3aXBlciA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRodW1icy5zd2lwZXIpIDogdGh1bWJzLnN3aXBlcjtcbiAgICAgICAgICBpZiAodGh1bWJzRWxlbWVudCAmJiB0aHVtYnNFbGVtZW50LnN3aXBlcikge1xuICAgICAgICAgICAgdGh1bWJzLnN3aXBlciA9IHRodW1ic0VsZW1lbnQuc3dpcGVyO1xuICAgICAgICAgICAgaW5pdCgpO1xuICAgICAgICAgICAgdXBkYXRlKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGh1bWJzRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb25UaHVtYnNTd2lwZXIgPSBlID0+IHtcbiAgICAgICAgICAgICAgdGh1bWJzLnN3aXBlciA9IGUuZGV0YWlsWzBdO1xuICAgICAgICAgICAgICB0aHVtYnNFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2luaXQnLCBvblRodW1ic1N3aXBlcik7XG4gICAgICAgICAgICAgIGluaXQoKTtcbiAgICAgICAgICAgICAgdXBkYXRlKHRydWUpO1xuICAgICAgICAgICAgICB0aHVtYnMuc3dpcGVyLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICBzd2lwZXIudXBkYXRlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGh1bWJzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbml0Jywgb25UaHVtYnNTd2lwZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGh1bWJzRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgd2F0Y2hGb3JUaHVtYnNUb0FwcGVhciA9ICgpID0+IHtcbiAgICAgICAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IHRodW1ic0VsZW1lbnQgPSBnZXRUaHVtYnNFbGVtZW50QW5kSW5pdCgpO1xuICAgICAgICAgIGlmICghdGh1bWJzRWxlbWVudCkge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHdhdGNoRm9yVGh1bWJzVG9BcHBlYXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHdhdGNoRm9yVGh1bWJzVG9BcHBlYXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdCgpO1xuICAgICAgICB1cGRhdGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3NsaWRlQ2hhbmdlIHVwZGF0ZSByZXNpemUgb2JzZXJ2ZXJVcGRhdGUnLCAoKSA9PiB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNpdGlvbicsIChfcywgZHVyYXRpb24pID0+IHtcbiAgICAgIGNvbnN0IHRodW1ic1N3aXBlciA9IHN3aXBlci50aHVtYnMuc3dpcGVyO1xuICAgICAgaWYgKCF0aHVtYnNTd2lwZXIgfHwgdGh1bWJzU3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgdGh1bWJzU3dpcGVyLnNldFRyYW5zaXRpb24oZHVyYXRpb24pO1xuICAgIH0pO1xuICAgIG9uKCdiZWZvcmVEZXN0cm95JywgKCkgPT4ge1xuICAgICAgY29uc3QgdGh1bWJzU3dpcGVyID0gc3dpcGVyLnRodW1icy5zd2lwZXI7XG4gICAgICBpZiAoIXRodW1ic1N3aXBlciB8fCB0aHVtYnNTd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICBpZiAoc3dpcGVyQ3JlYXRlZCkge1xuICAgICAgICB0aHVtYnNTd2lwZXIuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnRodW1icywge1xuICAgICAgaW5pdCxcbiAgICAgIHVwZGF0ZVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZnJlZU1vZGUoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBlbWl0LFxuICAgICAgb25jZVxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBmcmVlTW9kZToge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgbW9tZW50dW06IHRydWUsXG4gICAgICAgIG1vbWVudHVtUmF0aW86IDEsXG4gICAgICAgIG1vbWVudHVtQm91bmNlOiB0cnVlLFxuICAgICAgICBtb21lbnR1bUJvdW5jZVJhdGlvOiAxLFxuICAgICAgICBtb21lbnR1bVZlbG9jaXR5UmF0aW86IDEsXG4gICAgICAgIHN0aWNreTogZmFsc2UsXG4gICAgICAgIG1pbmltdW1WZWxvY2l0eTogMC4wMlxuICAgICAgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIG9uVG91Y2hTdGFydCgpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHN3aXBlci5nZXRUcmFuc2xhdGUoKTtcbiAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUodHJhbnNsYXRlKTtcbiAgICAgIHN3aXBlci5zZXRUcmFuc2l0aW9uKDApO1xuICAgICAgc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS52ZWxvY2l0aWVzLmxlbmd0aCA9IDA7XG4gICAgICBzd2lwZXIuZnJlZU1vZGUub25Ub3VjaEVuZCh7XG4gICAgICAgIGN1cnJlbnRQb3M6IHN3aXBlci5ydGwgPyBzd2lwZXIudHJhbnNsYXRlIDogLXN3aXBlci50cmFuc2xhdGVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblRvdWNoTW92ZSgpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHJldHVybjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdG91Y2hFdmVudHNEYXRhOiBkYXRhLFxuICAgICAgICB0b3VjaGVzXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgLy8gVmVsb2NpdHlcbiAgICAgIGlmIChkYXRhLnZlbG9jaXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRhdGEudmVsb2NpdGllcy5wdXNoKHtcbiAgICAgICAgICBwb3NpdGlvbjogdG91Y2hlc1tzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAnc3RhcnRYJyA6ICdzdGFydFknXSxcbiAgICAgICAgICB0aW1lOiBkYXRhLnRvdWNoU3RhcnRUaW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZGF0YS52ZWxvY2l0aWVzLnB1c2goe1xuICAgICAgICBwb3NpdGlvbjogdG91Y2hlc1tzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAnY3VycmVudFgnIDogJ2N1cnJlbnRZJ10sXG4gICAgICAgIHRpbWU6IG5vdygpXG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25Ub3VjaEVuZChfcmVmMikge1xuICAgICAgbGV0IHtcbiAgICAgICAgY3VycmVudFBvc1xuICAgICAgfSA9IF9yZWYyO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgICAgY29uc3Qge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHdyYXBwZXJFbCxcbiAgICAgICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgICAgIHNuYXBHcmlkLFxuICAgICAgICB0b3VjaEV2ZW50c0RhdGE6IGRhdGFcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICAvLyBUaW1lIGRpZmZcbiAgICAgIGNvbnN0IHRvdWNoRW5kVGltZSA9IG5vdygpO1xuICAgICAgY29uc3QgdGltZURpZmYgPSB0b3VjaEVuZFRpbWUgLSBkYXRhLnRvdWNoU3RhcnRUaW1lO1xuICAgICAgaWYgKGN1cnJlbnRQb3MgPCAtc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5hY3RpdmVJbmRleCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50UG9zID4gLXN3aXBlci5tYXhUcmFuc2xhdGUoKSkge1xuICAgICAgICBpZiAoc3dpcGVyLnNsaWRlcy5sZW5ndGggPCBzbmFwR3JpZC5sZW5ndGgpIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzbmFwR3JpZC5sZW5ndGggLSAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUubW9tZW50dW0pIHtcbiAgICAgICAgaWYgKGRhdGEudmVsb2NpdGllcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgY29uc3QgbGFzdE1vdmVFdmVudCA9IGRhdGEudmVsb2NpdGllcy5wb3AoKTtcbiAgICAgICAgICBjb25zdCB2ZWxvY2l0eUV2ZW50ID0gZGF0YS52ZWxvY2l0aWVzLnBvcCgpO1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gbGFzdE1vdmVFdmVudC5wb3NpdGlvbiAtIHZlbG9jaXR5RXZlbnQucG9zaXRpb247XG4gICAgICAgICAgY29uc3QgdGltZSA9IGxhc3RNb3ZlRXZlbnQudGltZSAtIHZlbG9jaXR5RXZlbnQudGltZTtcbiAgICAgICAgICBzd2lwZXIudmVsb2NpdHkgPSBkaXN0YW5jZSAvIHRpbWU7XG4gICAgICAgICAgc3dpcGVyLnZlbG9jaXR5IC89IDI7XG4gICAgICAgICAgaWYgKE1hdGguYWJzKHN3aXBlci52ZWxvY2l0eSkgPCBwYXJhbXMuZnJlZU1vZGUubWluaW11bVZlbG9jaXR5KSB7XG4gICAgICAgICAgICBzd2lwZXIudmVsb2NpdHkgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB0aGlzIGltcGxpZXMgdGhhdCB0aGUgdXNlciBzdG9wcGVkIG1vdmluZyBhIGZpbmdlciB0aGVuIHJlbGVhc2VkLlxuICAgICAgICAgIC8vIFRoZXJlIHdvdWxkIGJlIG5vIGV2ZW50cyB3aXRoIGRpc3RhbmNlIHplcm8sIHNvIHRoZSBsYXN0IGV2ZW50IGlzIHN0YWxlLlxuICAgICAgICAgIGlmICh0aW1lID4gMTUwIHx8IG5vdygpIC0gbGFzdE1vdmVFdmVudC50aW1lID4gMzAwKSB7XG4gICAgICAgICAgICBzd2lwZXIudmVsb2NpdHkgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzd2lwZXIudmVsb2NpdHkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHN3aXBlci52ZWxvY2l0eSAqPSBwYXJhbXMuZnJlZU1vZGUubW9tZW50dW1WZWxvY2l0eVJhdGlvO1xuICAgICAgICBkYXRhLnZlbG9jaXRpZXMubGVuZ3RoID0gMDtcbiAgICAgICAgbGV0IG1vbWVudHVtRHVyYXRpb24gPSAxMDAwICogcGFyYW1zLmZyZWVNb2RlLm1vbWVudHVtUmF0aW87XG4gICAgICAgIGNvbnN0IG1vbWVudHVtRGlzdGFuY2UgPSBzd2lwZXIudmVsb2NpdHkgKiBtb21lbnR1bUR1cmF0aW9uO1xuICAgICAgICBsZXQgbmV3UG9zaXRpb24gPSBzd2lwZXIudHJhbnNsYXRlICsgbW9tZW50dW1EaXN0YW5jZTtcbiAgICAgICAgaWYgKHJ0bCkgbmV3UG9zaXRpb24gPSAtbmV3UG9zaXRpb247XG4gICAgICAgIGxldCBkb0JvdW5jZSA9IGZhbHNlO1xuICAgICAgICBsZXQgYWZ0ZXJCb3VuY2VQb3NpdGlvbjtcbiAgICAgICAgY29uc3QgYm91bmNlQW1vdW50ID0gTWF0aC5hYnMoc3dpcGVyLnZlbG9jaXR5KSAqIDIwICogcGFyYW1zLmZyZWVNb2RlLm1vbWVudHVtQm91bmNlUmF0aW87XG4gICAgICAgIGxldCBuZWVkc0xvb3BGaXg7XG4gICAgICAgIGlmIChuZXdQb3NpdGlvbiA8IHN3aXBlci5tYXhUcmFuc2xhdGUoKSkge1xuICAgICAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2UpIHtcbiAgICAgICAgICAgIGlmIChuZXdQb3NpdGlvbiArIHN3aXBlci5tYXhUcmFuc2xhdGUoKSA8IC1ib3VuY2VBbW91bnQpIHtcbiAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgLSBib3VuY2VBbW91bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZnRlckJvdW5jZVBvc2l0aW9uID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpO1xuICAgICAgICAgICAgZG9Cb3VuY2UgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YS5hbGxvd01vbWVudHVtQm91bmNlID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBzd2lwZXIubWF4VHJhbnNsYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwYXJhbXMubG9vcCAmJiBwYXJhbXMuY2VudGVyZWRTbGlkZXMpIG5lZWRzTG9vcEZpeCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3UG9zaXRpb24gPiBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICAgICAgICBpZiAocGFyYW1zLmZyZWVNb2RlLm1vbWVudHVtQm91bmNlKSB7XG4gICAgICAgICAgICBpZiAobmV3UG9zaXRpb24gLSBzd2lwZXIubWluVHJhbnNsYXRlKCkgPiBib3VuY2VBbW91bnQpIHtcbiAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBzd2lwZXIubWluVHJhbnNsYXRlKCkgKyBib3VuY2VBbW91bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZnRlckJvdW5jZVBvc2l0aW9uID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICAgICAgICAgICAgZG9Cb3VuY2UgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YS5hbGxvd01vbWVudHVtQm91bmNlID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBzd2lwZXIubWluVHJhbnNsYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwYXJhbXMubG9vcCAmJiBwYXJhbXMuY2VudGVyZWRTbGlkZXMpIG5lZWRzTG9vcEZpeCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICAgIGxldCBuZXh0U2xpZGU7XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzbmFwR3JpZC5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICAgICAgaWYgKHNuYXBHcmlkW2pdID4gLW5ld1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIG5leHRTbGlkZSA9IGo7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTWF0aC5hYnMoc25hcEdyaWRbbmV4dFNsaWRlXSAtIG5ld1Bvc2l0aW9uKSA8IE1hdGguYWJzKHNuYXBHcmlkW25leHRTbGlkZSAtIDFdIC0gbmV3UG9zaXRpb24pIHx8IHN3aXBlci5zd2lwZURpcmVjdGlvbiA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICBuZXdQb3NpdGlvbiA9IHNuYXBHcmlkW25leHRTbGlkZV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1Bvc2l0aW9uID0gc25hcEdyaWRbbmV4dFNsaWRlIC0gMV07XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ld1Bvc2l0aW9uID0gLW5ld1Bvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZWVkc0xvb3BGaXgpIHtcbiAgICAgICAgICBvbmNlKCd0cmFuc2l0aW9uRW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgc3dpcGVyLmxvb3BGaXgoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGaXggZHVyYXRpb25cbiAgICAgICAgaWYgKHN3aXBlci52ZWxvY2l0eSAhPT0gMCkge1xuICAgICAgICAgIGlmIChydGwpIHtcbiAgICAgICAgICAgIG1vbWVudHVtRHVyYXRpb24gPSBNYXRoLmFicygoLW5ld1Bvc2l0aW9uIC0gc3dpcGVyLnRyYW5zbGF0ZSkgLyBzd2lwZXIudmVsb2NpdHkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb21lbnR1bUR1cmF0aW9uID0gTWF0aC5hYnMoKG5ld1Bvc2l0aW9uIC0gc3dpcGVyLnRyYW5zbGF0ZSkgLyBzd2lwZXIudmVsb2NpdHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICAgICAgLy8gSWYgZnJlZU1vZGUuc3RpY2t5IGlzIGFjdGl2ZSBhbmQgdGhlIHVzZXIgZW5kcyBhIHN3aXBlIHdpdGggYSBzbG93LXZlbG9jaXR5XG4gICAgICAgICAgICAvLyBldmVudCwgdGhlbiBkdXJhdGlvbnMgY2FuIGJlIDIwKyBzZWNvbmRzIHRvIHNsaWRlIG9uZSAob3IgemVybyEpIHNsaWRlcy5cbiAgICAgICAgICAgIC8vIEl0J3MgZWFzeSB0byBzZWUgdGhpcyB3aGVuIHNpbXVsYXRpbmcgdG91Y2ggd2l0aCBtb3VzZSBldmVudHMuIFRvIGZpeCB0aGlzLFxuICAgICAgICAgICAgLy8gbGltaXQgc2luZ2xlLXNsaWRlIHN3aXBlcyB0byB0aGUgZGVmYXVsdCBzbGlkZSBkdXJhdGlvbi4gVGhpcyBhbHNvIGhhcyB0aGVcbiAgICAgICAgICAgIC8vIG5pY2Ugc2lkZSBlZmZlY3Qgb2YgbWF0Y2hpbmcgc2xpZGUgc3BlZWQgaWYgdGhlIHVzZXIgc3RvcHBlZCBtb3ZpbmcgYmVmb3JlXG4gICAgICAgICAgICAvLyBsaWZ0aW5nIGZpbmdlciBvciBtb3VzZSB2cy4gbW92aW5nIHNsb3dseSBiZWZvcmUgbGlmdGluZyB0aGUgZmluZ2VyL21vdXNlLlxuICAgICAgICAgICAgLy8gRm9yIGZhc3RlciBzd2lwZXMsIGFsc28gYXBwbHkgbGltaXRzIChhbGJlaXQgaGlnaGVyIG9uZXMpLlxuICAgICAgICAgICAgY29uc3QgbW92ZURpc3RhbmNlID0gTWF0aC5hYnMoKHJ0bCA/IC1uZXdQb3NpdGlvbiA6IG5ld1Bvc2l0aW9uKSAtIHN3aXBlci50cmFuc2xhdGUpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNsaWRlU2l6ZSA9IHN3aXBlci5zbGlkZXNTaXplc0dyaWRbc3dpcGVyLmFjdGl2ZUluZGV4XTtcbiAgICAgICAgICAgIGlmIChtb3ZlRGlzdGFuY2UgPCBjdXJyZW50U2xpZGVTaXplKSB7XG4gICAgICAgICAgICAgIG1vbWVudHVtRHVyYXRpb24gPSBwYXJhbXMuc3BlZWQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1vdmVEaXN0YW5jZSA8IDIgKiBjdXJyZW50U2xpZGVTaXplKSB7XG4gICAgICAgICAgICAgIG1vbWVudHVtRHVyYXRpb24gPSBwYXJhbXMuc3BlZWQgKiAxLjU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtb21lbnR1bUR1cmF0aW9uID0gcGFyYW1zLnNwZWVkICogMi41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG9DbG9zZXN0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2UgJiYgZG9Cb3VuY2UpIHtcbiAgICAgICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MoYWZ0ZXJCb3VuY2VQb3NpdGlvbik7XG4gICAgICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24obW9tZW50dW1EdXJhdGlvbik7XG4gICAgICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZShuZXdQb3NpdGlvbik7XG4gICAgICAgICAgc3dpcGVyLnRyYW5zaXRpb25TdGFydCh0cnVlLCBzd2lwZXIuc3dpcGVEaXJlY3Rpb24pO1xuICAgICAgICAgIHN3aXBlci5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgIGVsZW1lbnRUcmFuc2l0aW9uRW5kKHdyYXBwZXJFbCwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhZGF0YS5hbGxvd01vbWVudHVtQm91bmNlKSByZXR1cm47XG4gICAgICAgICAgICBlbWl0KCdtb21lbnR1bUJvdW5jZScpO1xuICAgICAgICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24ocGFyYW1zLnNwZWVkKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKGFmdGVyQm91bmNlUG9zaXRpb24pO1xuICAgICAgICAgICAgICBlbGVtZW50VHJhbnNpdGlvbkVuZCh3cmFwcGVyRWwsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3dpcGVyLnRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChzd2lwZXIudmVsb2NpdHkpIHtcbiAgICAgICAgICBlbWl0KCdfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZScpO1xuICAgICAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhuZXdQb3NpdGlvbik7XG4gICAgICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24obW9tZW50dW1EdXJhdGlvbik7XG4gICAgICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZShuZXdQb3NpdGlvbik7XG4gICAgICAgICAgc3dpcGVyLnRyYW5zaXRpb25TdGFydCh0cnVlLCBzd2lwZXIuc3dpcGVEaXJlY3Rpb24pO1xuICAgICAgICAgIGlmICghc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgICBlbGVtZW50VHJhbnNpdGlvbkVuZCh3cmFwcGVyRWwsICgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgICAgICBzd2lwZXIudHJhbnNpdGlvbkVuZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhuZXdQb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICB9IGVsc2UgaWYgKHBhcmFtcy5mcmVlTW9kZS5zdGlja3kpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG9DbG9zZXN0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmZyZWVNb2RlKSB7XG4gICAgICAgIGVtaXQoJ19mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bSB8fCB0aW1lRGlmZiA+PSBwYXJhbXMubG9uZ1N3aXBlc01zKSB7XG4gICAgICAgIGVtaXQoJ19mcmVlTW9kZVN0YXRpY1JlbGVhc2UnKTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgfVxuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgICAgZnJlZU1vZGU6IHtcbiAgICAgICAgb25Ub3VjaFN0YXJ0LFxuICAgICAgICBvblRvdWNoTW92ZSxcbiAgICAgICAgb25Ub3VjaEVuZFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gR3JpZChfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGdyaWQ6IHtcbiAgICAgICAgcm93czogMSxcbiAgICAgICAgZmlsbDogJ2NvbHVtbidcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgc2xpZGVzTnVtYmVyRXZlblRvUm93cztcbiAgICBsZXQgc2xpZGVzUGVyUm93O1xuICAgIGxldCBudW1GdWxsQ29sdW1ucztcbiAgICBsZXQgd2FzTXVsdGlSb3c7XG4gICAgY29uc3QgZ2V0U3BhY2VCZXR3ZWVuID0gKCkgPT4ge1xuICAgICAgbGV0IHNwYWNlQmV0d2VlbiA9IHN3aXBlci5wYXJhbXMuc3BhY2VCZXR3ZWVuO1xuICAgICAgaWYgKHR5cGVvZiBzcGFjZUJldHdlZW4gPT09ICdzdHJpbmcnICYmIHNwYWNlQmV0d2Vlbi5pbmRleE9mKCclJykgPj0gMCkge1xuICAgICAgICBzcGFjZUJldHdlZW4gPSBwYXJzZUZsb2F0KHNwYWNlQmV0d2Vlbi5yZXBsYWNlKCclJywgJycpKSAvIDEwMCAqIHN3aXBlci5zaXplO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BhY2VCZXR3ZWVuID09PSAnc3RyaW5nJykge1xuICAgICAgICBzcGFjZUJldHdlZW4gPSBwYXJzZUZsb2F0KHNwYWNlQmV0d2Vlbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3BhY2VCZXR3ZWVuO1xuICAgIH07XG4gICAgY29uc3QgaW5pdFNsaWRlcyA9IHNsaWRlcyA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNsaWRlc1BlclZpZXdcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgICAgY29uc3Qge1xuICAgICAgICByb3dzLFxuICAgICAgICBmaWxsXG4gICAgICB9ID0gc3dpcGVyLnBhcmFtcy5ncmlkO1xuICAgICAgY29uc3Qgc2xpZGVzTGVuZ3RoID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogc2xpZGVzLmxlbmd0aDtcbiAgICAgIG51bUZ1bGxDb2x1bW5zID0gTWF0aC5mbG9vcihzbGlkZXNMZW5ndGggLyByb3dzKTtcbiAgICAgIGlmIChNYXRoLmZsb29yKHNsaWRlc0xlbmd0aCAvIHJvd3MpID09PSBzbGlkZXNMZW5ndGggLyByb3dzKSB7XG4gICAgICAgIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MgPSBzbGlkZXNMZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzID0gTWF0aC5jZWlsKHNsaWRlc0xlbmd0aCAvIHJvd3MpICogcm93cztcbiAgICAgIH1cbiAgICAgIGlmIChzbGlkZXNQZXJWaWV3ICE9PSAnYXV0bycgJiYgZmlsbCA9PT0gJ3JvdycpIHtcbiAgICAgICAgc2xpZGVzTnVtYmVyRXZlblRvUm93cyA9IE1hdGgubWF4KHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MsIHNsaWRlc1BlclZpZXcgKiByb3dzKTtcbiAgICAgIH1cbiAgICAgIHNsaWRlc1BlclJvdyA9IHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MgLyByb3dzO1xuICAgIH07XG4gICAgY29uc3QgdW5zZXRTbGlkZXMgPSAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnNsaWRlcykge1xuICAgICAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGUgPT4ge1xuICAgICAgICAgIGlmIChzbGlkZS5zd2lwZXJTbGlkZUdyaWRTZXQpIHtcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgc2xpZGUuc3R5bGVbc3dpcGVyLmdldERpcmVjdGlvbkxhYmVsKCdtYXJnaW4tdG9wJyldID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZVNsaWRlID0gKGksIHNsaWRlLCBzbGlkZXMpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzUGVyR3JvdXBcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgICAgY29uc3Qgc3BhY2VCZXR3ZWVuID0gZ2V0U3BhY2VCZXR3ZWVuKCk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHJvd3MsXG4gICAgICAgIGZpbGxcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zLmdyaWQ7XG4gICAgICBjb25zdCBzbGlkZXNMZW5ndGggPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggOiBzbGlkZXMubGVuZ3RoO1xuICAgICAgLy8gU2V0IHNsaWRlcyBvcmRlclxuICAgICAgbGV0IG5ld1NsaWRlT3JkZXJJbmRleDtcbiAgICAgIGxldCBjb2x1bW47XG4gICAgICBsZXQgcm93O1xuICAgICAgaWYgKGZpbGwgPT09ICdyb3cnICYmIHNsaWRlc1Blckdyb3VwID4gMSkge1xuICAgICAgICBjb25zdCBncm91cEluZGV4ID0gTWF0aC5mbG9vcihpIC8gKHNsaWRlc1Blckdyb3VwICogcm93cykpO1xuICAgICAgICBjb25zdCBzbGlkZUluZGV4SW5Hcm91cCA9IGkgLSByb3dzICogc2xpZGVzUGVyR3JvdXAgKiBncm91cEluZGV4O1xuICAgICAgICBjb25zdCBjb2x1bW5zSW5Hcm91cCA9IGdyb3VwSW5kZXggPT09IDAgPyBzbGlkZXNQZXJHcm91cCA6IE1hdGgubWluKE1hdGguY2VpbCgoc2xpZGVzTGVuZ3RoIC0gZ3JvdXBJbmRleCAqIHJvd3MgKiBzbGlkZXNQZXJHcm91cCkgLyByb3dzKSwgc2xpZGVzUGVyR3JvdXApO1xuICAgICAgICByb3cgPSBNYXRoLmZsb29yKHNsaWRlSW5kZXhJbkdyb3VwIC8gY29sdW1uc0luR3JvdXApO1xuICAgICAgICBjb2x1bW4gPSBzbGlkZUluZGV4SW5Hcm91cCAtIHJvdyAqIGNvbHVtbnNJbkdyb3VwICsgZ3JvdXBJbmRleCAqIHNsaWRlc1Blckdyb3VwO1xuICAgICAgICBuZXdTbGlkZU9yZGVySW5kZXggPSBjb2x1bW4gKyByb3cgKiBzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzIC8gcm93cztcbiAgICAgICAgc2xpZGUuc3R5bGUub3JkZXIgPSBuZXdTbGlkZU9yZGVySW5kZXg7XG4gICAgICB9IGVsc2UgaWYgKGZpbGwgPT09ICdjb2x1bW4nKSB7XG4gICAgICAgIGNvbHVtbiA9IE1hdGguZmxvb3IoaSAvIHJvd3MpO1xuICAgICAgICByb3cgPSBpIC0gY29sdW1uICogcm93cztcbiAgICAgICAgaWYgKGNvbHVtbiA+IG51bUZ1bGxDb2x1bW5zIHx8IGNvbHVtbiA9PT0gbnVtRnVsbENvbHVtbnMgJiYgcm93ID09PSByb3dzIC0gMSkge1xuICAgICAgICAgIHJvdyArPSAxO1xuICAgICAgICAgIGlmIChyb3cgPj0gcm93cykge1xuICAgICAgICAgICAgcm93ID0gMDtcbiAgICAgICAgICAgIGNvbHVtbiArPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm93ID0gTWF0aC5mbG9vcihpIC8gc2xpZGVzUGVyUm93KTtcbiAgICAgICAgY29sdW1uID0gaSAtIHJvdyAqIHNsaWRlc1BlclJvdztcbiAgICAgIH1cbiAgICAgIHNsaWRlLnJvdyA9IHJvdztcbiAgICAgIHNsaWRlLmNvbHVtbiA9IGNvbHVtbjtcbiAgICAgIHNsaWRlLnN0eWxlLmhlaWdodCA9IGBjYWxjKCgxMDAlIC0gJHsocm93cyAtIDEpICogc3BhY2VCZXR3ZWVufXB4KSAvICR7cm93c30pYDtcbiAgICAgIHNsaWRlLnN0eWxlW3N3aXBlci5nZXREaXJlY3Rpb25MYWJlbCgnbWFyZ2luLXRvcCcpXSA9IHJvdyAhPT0gMCA/IHNwYWNlQmV0d2VlbiAmJiBgJHtzcGFjZUJldHdlZW59cHhgIDogJyc7XG4gICAgICBzbGlkZS5zd2lwZXJTbGlkZUdyaWRTZXQgPSB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgdXBkYXRlV3JhcHBlclNpemUgPSAoc2xpZGVTaXplLCBzbmFwR3JpZCkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBjZW50ZXJlZFNsaWRlcyxcbiAgICAgICAgcm91bmRMZW5ndGhzXG4gICAgICB9ID0gc3dpcGVyLnBhcmFtcztcbiAgICAgIGNvbnN0IHNwYWNlQmV0d2VlbiA9IGdldFNwYWNlQmV0d2VlbigpO1xuICAgICAgY29uc3Qge1xuICAgICAgICByb3dzXG4gICAgICB9ID0gc3dpcGVyLnBhcmFtcy5ncmlkO1xuICAgICAgc3dpcGVyLnZpcnR1YWxTaXplID0gKHNsaWRlU2l6ZSArIHNwYWNlQmV0d2VlbikgKiBzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzO1xuICAgICAgc3dpcGVyLnZpcnR1YWxTaXplID0gTWF0aC5jZWlsKHN3aXBlci52aXJ0dWFsU2l6ZSAvIHJvd3MpIC0gc3BhY2VCZXR3ZWVuO1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZVtzd2lwZXIuZ2V0RGlyZWN0aW9uTGFiZWwoJ3dpZHRoJyldID0gYCR7c3dpcGVyLnZpcnR1YWxTaXplICsgc3BhY2VCZXR3ZWVufXB4YDtcbiAgICAgIH1cbiAgICAgIGlmIChjZW50ZXJlZFNsaWRlcykge1xuICAgICAgICBjb25zdCBuZXdTbGlkZXNHcmlkID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc25hcEdyaWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBsZXQgc2xpZGVzR3JpZEl0ZW0gPSBzbmFwR3JpZFtpXTtcbiAgICAgICAgICBpZiAocm91bmRMZW5ndGhzKSBzbGlkZXNHcmlkSXRlbSA9IE1hdGguZmxvb3Ioc2xpZGVzR3JpZEl0ZW0pO1xuICAgICAgICAgIGlmIChzbmFwR3JpZFtpXSA8IHN3aXBlci52aXJ0dWFsU2l6ZSArIHNuYXBHcmlkWzBdKSBuZXdTbGlkZXNHcmlkLnB1c2goc2xpZGVzR3JpZEl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHNuYXBHcmlkLnNwbGljZSgwLCBzbmFwR3JpZC5sZW5ndGgpO1xuICAgICAgICBzbmFwR3JpZC5wdXNoKC4uLm5ld1NsaWRlc0dyaWQpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb25Jbml0ID0gKCkgPT4ge1xuICAgICAgd2FzTXVsdGlSb3cgPSBzd2lwZXIucGFyYW1zLmdyaWQgJiYgc3dpcGVyLnBhcmFtcy5ncmlkLnJvd3MgPiAxO1xuICAgIH07XG4gICAgY29uc3Qgb25VcGRhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCBpc011bHRpUm93ID0gcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDE7XG4gICAgICBpZiAod2FzTXVsdGlSb3cgJiYgIWlzTXVsdGlSb3cpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkYCwgYCR7cGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9Z3JpZC1jb2x1bW5gKTtcbiAgICAgICAgbnVtRnVsbENvbHVtbnMgPSAxO1xuICAgICAgICBzd2lwZXIuZW1pdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoIXdhc011bHRpUm93ICYmIGlzTXVsdGlSb3cpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkYCk7XG4gICAgICAgIGlmIChwYXJhbXMuZ3JpZC5maWxsID09PSAnY29sdW1uJykge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoYCR7cGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9Z3JpZC1jb2x1bW5gKTtcbiAgICAgICAgfVxuICAgICAgICBzd2lwZXIuZW1pdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgICAgIH1cbiAgICAgIHdhc011bHRpUm93ID0gaXNNdWx0aVJvdztcbiAgICB9O1xuICAgIG9uKCdpbml0Jywgb25Jbml0KTtcbiAgICBvbigndXBkYXRlJywgb25VcGRhdGUpO1xuICAgIHN3aXBlci5ncmlkID0ge1xuICAgICAgaW5pdFNsaWRlcyxcbiAgICAgIHVuc2V0U2xpZGVzLFxuICAgICAgdXBkYXRlU2xpZGUsXG4gICAgICB1cGRhdGVXcmFwcGVyU2l6ZVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBhcHBlbmRTbGlkZShzbGlkZXMpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHNsaWRlc0VsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgIH1cbiAgICBjb25zdCBhcHBlbmRFbGVtZW50ID0gc2xpZGVFbCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHNsaWRlRWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IHRlbXBET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGVtcERPTS5pbm5lckhUTUwgPSBzbGlkZUVsO1xuICAgICAgICBzbGlkZXNFbC5hcHBlbmQodGVtcERPTS5jaGlsZHJlblswXSk7XG4gICAgICAgIHRlbXBET00uaW5uZXJIVE1MID0gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZXNFbC5hcHBlbmQoc2xpZGVFbCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIHNsaWRlcyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gc2xpZGVzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoc2xpZGVzW2ldKSBhcHBlbmRFbGVtZW50KHNsaWRlc1tpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcGVuZEVsZW1lbnQoc2xpZGVzKTtcbiAgICB9XG4gICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLmxvb3BDcmVhdGUoKTtcbiAgICB9XG4gICAgaWYgKCFwYXJhbXMub2JzZXJ2ZXIgfHwgc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgc3dpcGVyLnVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXBlbmRTbGlkZShzbGlkZXMpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIGFjdGl2ZUluZGV4LFxuICAgICAgc2xpZGVzRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgfVxuICAgIGxldCBuZXdBY3RpdmVJbmRleCA9IGFjdGl2ZUluZGV4ICsgMTtcbiAgICBjb25zdCBwcmVwZW5kRWxlbWVudCA9IHNsaWRlRWwgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBzbGlkZUVsID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCB0ZW1wRE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRlbXBET00uaW5uZXJIVE1MID0gc2xpZGVFbDtcbiAgICAgICAgc2xpZGVzRWwucHJlcGVuZCh0ZW1wRE9NLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgdGVtcERPTS5pbm5lckhUTUwgPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlc0VsLnByZXBlbmQoc2xpZGVFbCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIHNsaWRlcyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gc2xpZGVzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoc2xpZGVzW2ldKSBwcmVwZW5kRWxlbWVudChzbGlkZXNbaV0pO1xuICAgICAgfVxuICAgICAgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleCArIHNsaWRlcy5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZXBlbmRFbGVtZW50KHNsaWRlcyk7XG4gICAgfVxuICAgIHN3aXBlci5yZWNhbGNTbGlkZXMoKTtcbiAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgIHN3aXBlci5sb29wQ3JlYXRlKCk7XG4gICAgfVxuICAgIGlmICghcGFyYW1zLm9ic2VydmVyIHx8IHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgIHN3aXBlci51cGRhdGUoKTtcbiAgICB9XG4gICAgc3dpcGVyLnNsaWRlVG8obmV3QWN0aXZlSW5kZXgsIDAsIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFNsaWRlKGluZGV4LCBzbGlkZXMpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIGFjdGl2ZUluZGV4LFxuICAgICAgc2xpZGVzRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGxldCBhY3RpdmVJbmRleEJ1ZmZlciA9IGFjdGl2ZUluZGV4O1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgYWN0aXZlSW5kZXhCdWZmZXIgLT0gc3dpcGVyLmxvb3BlZFNsaWRlcztcbiAgICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgIH1cbiAgICBjb25zdCBiYXNlTGVuZ3RoID0gc3dpcGVyLnNsaWRlcy5sZW5ndGg7XG4gICAgaWYgKGluZGV4IDw9IDApIHtcbiAgICAgIHN3aXBlci5wcmVwZW5kU2xpZGUoc2xpZGVzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGluZGV4ID49IGJhc2VMZW5ndGgpIHtcbiAgICAgIHN3aXBlci5hcHBlbmRTbGlkZShzbGlkZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleEJ1ZmZlciA+IGluZGV4ID8gYWN0aXZlSW5kZXhCdWZmZXIgKyAxIDogYWN0aXZlSW5kZXhCdWZmZXI7XG4gICAgY29uc3Qgc2xpZGVzQnVmZmVyID0gW107XG4gICAgZm9yIChsZXQgaSA9IGJhc2VMZW5ndGggLSAxOyBpID49IGluZGV4OyBpIC09IDEpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZSA9IHN3aXBlci5zbGlkZXNbaV07XG4gICAgICBjdXJyZW50U2xpZGUucmVtb3ZlKCk7XG4gICAgICBzbGlkZXNCdWZmZXIudW5zaGlmdChjdXJyZW50U2xpZGUpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNsaWRlcyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gc2xpZGVzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoc2xpZGVzW2ldKSBzbGlkZXNFbC5hcHBlbmQoc2xpZGVzW2ldKTtcbiAgICAgIH1cbiAgICAgIG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXhCdWZmZXIgPiBpbmRleCA/IGFjdGl2ZUluZGV4QnVmZmVyICsgc2xpZGVzLmxlbmd0aCA6IGFjdGl2ZUluZGV4QnVmZmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBzbGlkZXNFbC5hcHBlbmQoc2xpZGVzKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNCdWZmZXIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHNsaWRlc0VsLmFwcGVuZChzbGlkZXNCdWZmZXJbaV0pO1xuICAgIH1cbiAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICAgIH1cbiAgICBpZiAoIXBhcmFtcy5vYnNlcnZlciB8fCBzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICBzd2lwZXIudXBkYXRlKCk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLnNsaWRlVG8obmV3QWN0aXZlSW5kZXggKyBzd2lwZXIubG9vcGVkU2xpZGVzLCAwLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKG5ld0FjdGl2ZUluZGV4LCAwLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlU2xpZGUoc2xpZGVzSW5kZXhlcykge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgYWN0aXZlSW5kZXhcbiAgICB9ID0gc3dpcGVyO1xuICAgIGxldCBhY3RpdmVJbmRleEJ1ZmZlciA9IGFjdGl2ZUluZGV4O1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgYWN0aXZlSW5kZXhCdWZmZXIgLT0gc3dpcGVyLmxvb3BlZFNsaWRlcztcbiAgICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgIH1cbiAgICBsZXQgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleEJ1ZmZlcjtcbiAgICBsZXQgaW5kZXhUb1JlbW92ZTtcbiAgICBpZiAodHlwZW9mIHNsaWRlc0luZGV4ZXMgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIHNsaWRlc0luZGV4ZXMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzSW5kZXhlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpbmRleFRvUmVtb3ZlID0gc2xpZGVzSW5kZXhlc1tpXTtcbiAgICAgICAgaWYgKHN3aXBlci5zbGlkZXNbaW5kZXhUb1JlbW92ZV0pIHN3aXBlci5zbGlkZXNbaW5kZXhUb1JlbW92ZV0ucmVtb3ZlKCk7XG4gICAgICAgIGlmIChpbmRleFRvUmVtb3ZlIDwgbmV3QWN0aXZlSW5kZXgpIG5ld0FjdGl2ZUluZGV4IC09IDE7XG4gICAgICB9XG4gICAgICBuZXdBY3RpdmVJbmRleCA9IE1hdGgubWF4KG5ld0FjdGl2ZUluZGV4LCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXhUb1JlbW92ZSA9IHNsaWRlc0luZGV4ZXM7XG4gICAgICBpZiAoc3dpcGVyLnNsaWRlc1tpbmRleFRvUmVtb3ZlXSkgc3dpcGVyLnNsaWRlc1tpbmRleFRvUmVtb3ZlXS5yZW1vdmUoKTtcbiAgICAgIGlmIChpbmRleFRvUmVtb3ZlIDwgbmV3QWN0aXZlSW5kZXgpIG5ld0FjdGl2ZUluZGV4IC09IDE7XG4gICAgICBuZXdBY3RpdmVJbmRleCA9IE1hdGgubWF4KG5ld0FjdGl2ZUluZGV4LCAwKTtcbiAgICB9XG4gICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLmxvb3BDcmVhdGUoKTtcbiAgICB9XG4gICAgaWYgKCFwYXJhbXMub2JzZXJ2ZXIgfHwgc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgc3dpcGVyLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKG5ld0FjdGl2ZUluZGV4ICsgc3dpcGVyLmxvb3BlZFNsaWRlcywgMCwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIuc2xpZGVUbyhuZXdBY3RpdmVJbmRleCwgMCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFsbFNsaWRlcygpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHNsaWRlc0luZGV4ZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3aXBlci5zbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHNsaWRlc0luZGV4ZXMucHVzaChpKTtcbiAgICB9XG4gICAgc3dpcGVyLnJlbW92ZVNsaWRlKHNsaWRlc0luZGV4ZXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gTWFuaXB1bGF0aW9uKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyXG4gICAgfSA9IF9yZWY7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICAgIGFwcGVuZFNsaWRlOiBhcHBlbmRTbGlkZS5iaW5kKHN3aXBlciksXG4gICAgICBwcmVwZW5kU2xpZGU6IHByZXBlbmRTbGlkZS5iaW5kKHN3aXBlciksXG4gICAgICBhZGRTbGlkZTogYWRkU2xpZGUuYmluZChzd2lwZXIpLFxuICAgICAgcmVtb3ZlU2xpZGU6IHJlbW92ZVNsaWRlLmJpbmQoc3dpcGVyKSxcbiAgICAgIHJlbW92ZUFsbFNsaWRlczogcmVtb3ZlQWxsU2xpZGVzLmJpbmQoc3dpcGVyKVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZWZmZWN0SW5pdChwYXJhbXMpIHtcbiAgICBjb25zdCB7XG4gICAgICBlZmZlY3QsXG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb24sXG4gICAgICBvdmVyd3JpdGVQYXJhbXMsXG4gICAgICBwZXJzcGVjdGl2ZSxcbiAgICAgIHJlY3JlYXRlU2hhZG93cyxcbiAgICAgIGdldEVmZmVjdFBhcmFtc1xuICAgIH0gPSBwYXJhbXM7XG4gICAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgICAgc3dpcGVyLmNsYXNzTmFtZXMucHVzaChgJHtzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9JHtlZmZlY3R9YCk7XG4gICAgICBpZiAocGVyc3BlY3RpdmUgJiYgcGVyc3BlY3RpdmUoKSkge1xuICAgICAgICBzd2lwZXIuY2xhc3NOYW1lcy5wdXNoKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc30zZGApO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3ZlcndyaXRlUGFyYW1zUmVzdWx0ID0gb3ZlcndyaXRlUGFyYW1zID8gb3ZlcndyaXRlUGFyYW1zKCkgOiB7fTtcbiAgICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnBhcmFtcywgb3ZlcndyaXRlUGFyYW1zUmVzdWx0KTtcbiAgICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLm9yaWdpbmFsUGFyYW1zLCBvdmVyd3JpdGVQYXJhbXNSZXN1bHQpO1xuICAgIH0pO1xuICAgIG9uKCdzZXRUcmFuc2xhdGUnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgfSk7XG4gICAgb24oJ3NldFRyYW5zaXRpb24nLCAoX3MsIGR1cmF0aW9uKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgICAgc2V0VHJhbnNpdGlvbihkdXJhdGlvbik7XG4gICAgfSk7XG4gICAgb24oJ3RyYW5zaXRpb25FbmQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgICAgaWYgKHJlY3JlYXRlU2hhZG93cykge1xuICAgICAgICBpZiAoIWdldEVmZmVjdFBhcmFtcyB8fCAhZ2V0RWZmZWN0UGFyYW1zKCkuc2xpZGVTaGFkb3dzKSByZXR1cm47XG4gICAgICAgIC8vIHJlbW92ZSBzaGFkb3dzXG4gICAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgICAgICBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpLmZvckVhY2goc2hhZG93RWwgPT4gc2hhZG93RWwucmVtb3ZlKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gY3JlYXRlIG5ldyBvbmVcbiAgICAgICAgcmVjcmVhdGVTaGFkb3dzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGV0IHJlcXVpcmVVcGRhdGVPblZpcnR1YWw7XG4gICAgb24oJ3ZpcnR1YWxVcGRhdGUnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgICAgaWYgKCFzd2lwZXIuc2xpZGVzLmxlbmd0aCkge1xuICAgICAgICByZXF1aXJlVXBkYXRlT25WaXJ0dWFsID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGlmIChyZXF1aXJlVXBkYXRlT25WaXJ0dWFsICYmIHN3aXBlci5zbGlkZXMgJiYgc3dpcGVyLnNsaWRlcy5sZW5ndGgpIHtcbiAgICAgICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICAgICAgICByZXF1aXJlVXBkYXRlT25WaXJ0dWFsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZWZmZWN0VGFyZ2V0KGVmZmVjdFBhcmFtcywgc2xpZGVFbCkge1xuICAgIGNvbnN0IHRyYW5zZm9ybUVsID0gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKTtcbiAgICBpZiAodHJhbnNmb3JtRWwgIT09IHNsaWRlRWwpIHtcbiAgICAgIHRyYW5zZm9ybUVsLnN0eWxlLmJhY2tmYWNlVmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgdHJhbnNmb3JtRWwuc3R5bGVbJy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eSddID0gJ2hpZGRlbic7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1FbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZHVyYXRpb24sXG4gICAgICB0cmFuc2Zvcm1FbGVtZW50cyxcbiAgICAgIGFsbFNsaWRlc1xuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IHtcbiAgICAgIGFjdGl2ZUluZGV4XG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBnZXRTbGlkZSA9IGVsID0+IHtcbiAgICAgIGlmICghZWwucGFyZW50RWxlbWVudCkge1xuICAgICAgICAvLyBhc3N1bWUgc2hhZG93IHJvb3RcbiAgICAgICAgY29uc3Qgc2xpZGUgPSBzd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuc2hhZG93Um9vdCAmJiBzbGlkZUVsLnNoYWRvd1Jvb3QgPT09IGVsLnBhcmVudE5vZGUpWzBdO1xuICAgICAgICByZXR1cm4gc2xpZGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWwucGFyZW50RWxlbWVudDtcbiAgICB9O1xuICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUgJiYgZHVyYXRpb24gIT09IDApIHtcbiAgICAgIGxldCBldmVudFRyaWdnZXJlZCA9IGZhbHNlO1xuICAgICAgbGV0IHRyYW5zaXRpb25FbmRUYXJnZXQ7XG4gICAgICBpZiAoYWxsU2xpZGVzKSB7XG4gICAgICAgIHRyYW5zaXRpb25FbmRUYXJnZXQgPSB0cmFuc2Zvcm1FbGVtZW50cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zaXRpb25FbmRUYXJnZXQgPSB0cmFuc2Zvcm1FbGVtZW50cy5maWx0ZXIodHJhbnNmb3JtRWwgPT4ge1xuICAgICAgICAgIGNvbnN0IGVsID0gdHJhbnNmb3JtRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2lwZXItc2xpZGUtdHJhbnNmb3JtJykgPyBnZXRTbGlkZSh0cmFuc2Zvcm1FbCkgOiB0cmFuc2Zvcm1FbDtcbiAgICAgICAgICByZXR1cm4gc3dpcGVyLmdldFNsaWRlSW5kZXgoZWwpID09PSBhY3RpdmVJbmRleDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0cmFuc2l0aW9uRW5kVGFyZ2V0LmZvckVhY2goZWwgPT4ge1xuICAgICAgICBlbGVtZW50VHJhbnNpdGlvbkVuZChlbCwgKCkgPT4ge1xuICAgICAgICAgIGlmIChldmVudFRyaWdnZXJlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgICBldmVudFRyaWdnZXJlZCA9IHRydWU7XG4gICAgICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgIGNvbnN0IGV2dCA9IG5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQoJ3RyYW5zaXRpb25lbmQnLCB7XG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN3aXBlci53cmFwcGVyRWwuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIEVmZmVjdEZhZGUoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvblxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBmYWRlRWZmZWN0OiB7XG4gICAgICAgIGNyb3NzRmFkZTogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNsaWRlc1xuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuZmFkZUVmZmVjdDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlRWwgPSBzd2lwZXIuc2xpZGVzW2ldO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBzbGlkZUVsLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgICBsZXQgdHggPSAtb2Zmc2V0O1xuICAgICAgICBpZiAoIXN3aXBlci5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZSkgdHggLT0gc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICAgICAgbGV0IHR5ID0gMDtcbiAgICAgICAgaWYgKCFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICB0eSA9IHR4O1xuICAgICAgICAgIHR4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbGlkZU9wYWNpdHkgPSBzd2lwZXIucGFyYW1zLmZhZGVFZmZlY3QuY3Jvc3NGYWRlID8gTWF0aC5tYXgoMSAtIE1hdGguYWJzKHNsaWRlRWwucHJvZ3Jlc3MpLCAwKSA6IDEgKyBNYXRoLm1pbihNYXRoLm1heChzbGlkZUVsLnByb2dyZXNzLCAtMSksIDApO1xuICAgICAgICBjb25zdCB0YXJnZXRFbCA9IGVmZmVjdFRhcmdldChwYXJhbXMsIHNsaWRlRWwpO1xuICAgICAgICB0YXJnZXRFbC5zdHlsZS5vcGFjaXR5ID0gc2xpZGVPcGFjaXR5O1xuICAgICAgICB0YXJnZXRFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0eH1weCwgJHt0eX1weCwgMHB4KWA7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgICAgY29uc3QgdHJhbnNmb3JtRWxlbWVudHMgPSBzd2lwZXIuc2xpZGVzLm1hcChzbGlkZUVsID0+IGdldFNsaWRlVHJhbnNmb3JtRWwoc2xpZGVFbCkpO1xuICAgICAgdHJhbnNmb3JtRWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgIH0pO1xuICAgICAgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQoe1xuICAgICAgICBzd2lwZXIsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICB0cmFuc2Zvcm1FbGVtZW50cyxcbiAgICAgICAgYWxsU2xpZGVzOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGVmZmVjdEluaXQoe1xuICAgICAgZWZmZWN0OiAnZmFkZScsXG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb24sXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBFZmZlY3RDdWJlKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgY3ViZUVmZmVjdDoge1xuICAgICAgICBzbGlkZVNoYWRvd3M6IHRydWUsXG4gICAgICAgIHNoYWRvdzogdHJ1ZSxcbiAgICAgICAgc2hhZG93T2Zmc2V0OiAyMCxcbiAgICAgICAgc2hhZG93U2NhbGU6IDAuOTRcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjcmVhdGVTbGlkZVNoYWRvd3MgPSAoc2xpZGVFbCwgcHJvZ3Jlc3MsIGlzSG9yaXpvbnRhbCkgPT4ge1xuICAgICAgbGV0IHNoYWRvd0JlZm9yZSA9IGlzSG9yaXpvbnRhbCA/IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpIDogc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AnKTtcbiAgICAgIGxldCBzaGFkb3dBZnRlciA9IGlzSG9yaXpvbnRhbCA/IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQnKSA6IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tJyk7XG4gICAgICBpZiAoIXNoYWRvd0JlZm9yZSkge1xuICAgICAgICBzaGFkb3dCZWZvcmUgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBgc3dpcGVyLXNsaWRlLXNoYWRvdy1jdWJlIHN3aXBlci1zbGlkZS1zaGFkb3ctJHtpc0hvcml6b250YWwgPyAnbGVmdCcgOiAndG9wJ31gLnNwbGl0KCcgJykpO1xuICAgICAgICBzbGlkZUVsLmFwcGVuZChzaGFkb3dCZWZvcmUpO1xuICAgICAgfVxuICAgICAgaWYgKCFzaGFkb3dBZnRlcikge1xuICAgICAgICBzaGFkb3dBZnRlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIGBzd2lwZXItc2xpZGUtc2hhZG93LWN1YmUgc3dpcGVyLXNsaWRlLXNoYWRvdy0ke2lzSG9yaXpvbnRhbCA/ICdyaWdodCcgOiAnYm90dG9tJ31gLnNwbGl0KCcgJykpO1xuICAgICAgICBzbGlkZUVsLmFwcGVuZChzaGFkb3dBZnRlcik7XG4gICAgICB9XG4gICAgICBpZiAoc2hhZG93QmVmb3JlKSBzaGFkb3dCZWZvcmUuc3R5bGUub3BhY2l0eSA9IE1hdGgubWF4KC1wcm9ncmVzcywgMCk7XG4gICAgICBpZiAoc2hhZG93QWZ0ZXIpIHNoYWRvd0FmdGVyLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heChwcm9ncmVzcywgMCk7XG4gICAgfTtcbiAgICBjb25zdCByZWNyZWF0ZVNoYWRvd3MgPSAoKSA9PiB7XG4gICAgICAvLyBjcmVhdGUgbmV3IG9uZXNcbiAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IHN3aXBlci5pc0hvcml6b250YWwoKTtcbiAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1heChNYXRoLm1pbihzbGlkZUVsLnByb2dyZXNzLCAxKSwgLTEpO1xuICAgICAgICBjcmVhdGVTbGlkZVNoYWRvd3Moc2xpZGVFbCwgcHJvZ3Jlc3MsIGlzSG9yaXpvbnRhbCk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWwsXG4gICAgICAgIHdyYXBwZXJFbCxcbiAgICAgICAgc2xpZGVzLFxuICAgICAgICB3aWR0aDogc3dpcGVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogc3dpcGVySGVpZ2h0LFxuICAgICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgICAgc2l6ZTogc3dpcGVyU2l6ZSxcbiAgICAgICAgYnJvd3NlclxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuY3ViZUVmZmVjdDtcbiAgICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IHN3aXBlci5pc0hvcml6b250YWwoKTtcbiAgICAgIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgICAgbGV0IHdyYXBwZXJSb3RhdGUgPSAwO1xuICAgICAgbGV0IGN1YmVTaGFkb3dFbDtcbiAgICAgIGlmIChwYXJhbXMuc2hhZG93KSB7XG4gICAgICAgIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgICAgICBjdWJlU2hhZG93RWwgPSBzd2lwZXIud3JhcHBlckVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItY3ViZS1zaGFkb3cnKTtcbiAgICAgICAgICBpZiAoIWN1YmVTaGFkb3dFbCkge1xuICAgICAgICAgICAgY3ViZVNoYWRvd0VsID0gY3JlYXRlRWxlbWVudCgnZGl2JywgJ3N3aXBlci1jdWJlLXNoYWRvdycpO1xuICAgICAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5hcHBlbmQoY3ViZVNoYWRvd0VsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3ViZVNoYWRvd0VsLnN0eWxlLmhlaWdodCA9IGAke3N3aXBlcldpZHRofXB4YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdWJlU2hhZG93RWwgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWN1YmUtc2hhZG93Jyk7XG4gICAgICAgICAgaWYgKCFjdWJlU2hhZG93RWwpIHtcbiAgICAgICAgICAgIGN1YmVTaGFkb3dFbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICdzd2lwZXItY3ViZS1zaGFkb3cnKTtcbiAgICAgICAgICAgIGVsLmFwcGVuZChjdWJlU2hhZG93RWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVFbCA9IHNsaWRlc1tpXTtcbiAgICAgICAgbGV0IHNsaWRlSW5kZXggPSBpO1xuICAgICAgICBpZiAoaXNWaXJ0dWFsKSB7XG4gICAgICAgICAgc2xpZGVJbmRleCA9IHBhcnNlSW50KHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNsaWRlQW5nbGUgPSBzbGlkZUluZGV4ICogOTA7XG4gICAgICAgIGxldCByb3VuZCA9IE1hdGguZmxvb3Ioc2xpZGVBbmdsZSAvIDM2MCk7XG4gICAgICAgIGlmIChydGwpIHtcbiAgICAgICAgICBzbGlkZUFuZ2xlID0gLXNsaWRlQW5nbGU7XG4gICAgICAgICAgcm91bmQgPSBNYXRoLmZsb29yKC1zbGlkZUFuZ2xlIC8gMzYwKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWF4KE1hdGgubWluKHNsaWRlRWwucHJvZ3Jlc3MsIDEpLCAtMSk7XG4gICAgICAgIGxldCB0eCA9IDA7XG4gICAgICAgIGxldCB0eSA9IDA7XG4gICAgICAgIGxldCB0eiA9IDA7XG4gICAgICAgIGlmIChzbGlkZUluZGV4ICUgNCA9PT0gMCkge1xuICAgICAgICAgIHR4ID0gLXJvdW5kICogNCAqIHN3aXBlclNpemU7XG4gICAgICAgICAgdHogPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKChzbGlkZUluZGV4IC0gMSkgJSA0ID09PSAwKSB7XG4gICAgICAgICAgdHggPSAwO1xuICAgICAgICAgIHR6ID0gLXJvdW5kICogNCAqIHN3aXBlclNpemU7XG4gICAgICAgIH0gZWxzZSBpZiAoKHNsaWRlSW5kZXggLSAyKSAlIDQgPT09IDApIHtcbiAgICAgICAgICB0eCA9IHN3aXBlclNpemUgKyByb3VuZCAqIDQgKiBzd2lwZXJTaXplO1xuICAgICAgICAgIHR6ID0gc3dpcGVyU2l6ZTtcbiAgICAgICAgfSBlbHNlIGlmICgoc2xpZGVJbmRleCAtIDMpICUgNCA9PT0gMCkge1xuICAgICAgICAgIHR4ID0gLXN3aXBlclNpemU7XG4gICAgICAgICAgdHogPSAzICogc3dpcGVyU2l6ZSArIHN3aXBlclNpemUgKiA0ICogcm91bmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ0bCkge1xuICAgICAgICAgIHR4ID0gLXR4O1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNIb3Jpem9udGFsKSB7XG4gICAgICAgICAgdHkgPSB0eDtcbiAgICAgICAgICB0eCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gYHJvdGF0ZVgoJHtpc0hvcml6b250YWwgPyAwIDogLXNsaWRlQW5nbGV9ZGVnKSByb3RhdGVZKCR7aXNIb3Jpem9udGFsID8gc2xpZGVBbmdsZSA6IDB9ZGVnKSB0cmFuc2xhdGUzZCgke3R4fXB4LCAke3R5fXB4LCAke3R6fXB4KWA7XG4gICAgICAgIGlmIChwcm9ncmVzcyA8PSAxICYmIHByb2dyZXNzID4gLTEpIHtcbiAgICAgICAgICB3cmFwcGVyUm90YXRlID0gc2xpZGVJbmRleCAqIDkwICsgcHJvZ3Jlc3MgKiA5MDtcbiAgICAgICAgICBpZiAocnRsKSB3cmFwcGVyUm90YXRlID0gLXNsaWRlSW5kZXggKiA5MCAtIHByb2dyZXNzICogOTA7XG4gICAgICAgICAgaWYgKHN3aXBlci5icm93c2VyICYmIHN3aXBlci5icm93c2VyLm5lZWQzZEZpeCAmJiBNYXRoLmFicyh3cmFwcGVyUm90YXRlKSAvIDkwICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgd3JhcHBlclJvdGF0ZSArPSAwLjAwMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVFbC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgIGlmIChwYXJhbXMuc2xpZGVTaGFkb3dzKSB7XG4gICAgICAgICAgY3JlYXRlU2xpZGVTaGFkb3dzKHNsaWRlRWwsIHByb2dyZXNzLCBpc0hvcml6b250YWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3cmFwcGVyRWwuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gYDUwJSA1MCUgLSR7c3dpcGVyU2l6ZSAvIDJ9cHhgO1xuICAgICAgd3JhcHBlckVsLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybS1vcmlnaW4nXSA9IGA1MCUgNTAlIC0ke3N3aXBlclNpemUgLyAyfXB4YDtcbiAgICAgIGlmIChwYXJhbXMuc2hhZG93KSB7XG4gICAgICAgIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgICAgICBjdWJlU2hhZG93RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDBweCwgJHtzd2lwZXJXaWR0aCAvIDIgKyBwYXJhbXMuc2hhZG93T2Zmc2V0fXB4LCAkey1zd2lwZXJXaWR0aCAvIDJ9cHgpIHJvdGF0ZVgoODkuOTlkZWcpIHJvdGF0ZVooMGRlZykgc2NhbGUoJHtwYXJhbXMuc2hhZG93U2NhbGV9KWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2hhZG93QW5nbGUgPSBNYXRoLmFicyh3cmFwcGVyUm90YXRlKSAtIE1hdGguZmxvb3IoTWF0aC5hYnMod3JhcHBlclJvdGF0ZSkgLyA5MCkgKiA5MDtcbiAgICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMS41IC0gKE1hdGguc2luKHNoYWRvd0FuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApIC8gMiArIE1hdGguY29zKHNoYWRvd0FuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApIC8gMik7XG4gICAgICAgICAgY29uc3Qgc2NhbGUxID0gcGFyYW1zLnNoYWRvd1NjYWxlO1xuICAgICAgICAgIGNvbnN0IHNjYWxlMiA9IHBhcmFtcy5zaGFkb3dTY2FsZSAvIG11bHRpcGxpZXI7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gcGFyYW1zLnNoYWRvd09mZnNldDtcbiAgICAgICAgICBjdWJlU2hhZG93RWwuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlM2QoJHtzY2FsZTF9LCAxLCAke3NjYWxlMn0pIHRyYW5zbGF0ZTNkKDBweCwgJHtzd2lwZXJIZWlnaHQgLyAyICsgb2Zmc2V0fXB4LCAkey1zd2lwZXJIZWlnaHQgLyAyIC8gc2NhbGUyfXB4KSByb3RhdGVYKC04OS45OWRlZylgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB6RmFjdG9yID0gKGJyb3dzZXIuaXNTYWZhcmkgfHwgYnJvd3Nlci5pc1dlYlZpZXcpICYmIGJyb3dzZXIubmVlZFBlcnNwZWN0aXZlRml4ID8gLXN3aXBlclNpemUgLyAyIDogMDtcbiAgICAgIHdyYXBwZXJFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMHB4LDAsJHt6RmFjdG9yfXB4KSByb3RhdGVYKCR7c3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gMCA6IHdyYXBwZXJSb3RhdGV9ZGVnKSByb3RhdGVZKCR7c3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gLXdyYXBwZXJSb3RhdGUgOiAwfWRlZylgO1xuICAgICAgd3JhcHBlckVsLnN0eWxlLnNldFByb3BlcnR5KCctLXN3aXBlci1jdWJlLXRyYW5zbGF0ZS16JywgYCR7ekZhY3Rvcn1weGApO1xuICAgIH07XG4gICAgY29uc3Qgc2V0VHJhbnNpdGlvbiA9IGR1cmF0aW9uID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWwsXG4gICAgICAgIHNsaWRlc1xuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIHNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICBzbGlkZUVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgICAgc2xpZGVFbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKS5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgICBzdWJFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jdWJlRWZmZWN0LnNoYWRvdyAmJiAhc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIGNvbnN0IHNoYWRvd0VsID0gZWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1jdWJlLXNoYWRvdycpO1xuICAgICAgICBpZiAoc2hhZG93RWwpIHNoYWRvd0VsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgIH1cbiAgICB9O1xuICAgIGVmZmVjdEluaXQoe1xuICAgICAgZWZmZWN0OiAnY3ViZScsXG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb24sXG4gICAgICByZWNyZWF0ZVNoYWRvd3MsXG4gICAgICBnZXRFZmZlY3RQYXJhbXM6ICgpID0+IHN3aXBlci5wYXJhbXMuY3ViZUVmZmVjdCxcbiAgICAgIHBlcnNwZWN0aXZlOiAoKSA9PiB0cnVlLFxuICAgICAgb3ZlcndyaXRlUGFyYW1zOiAoKSA9PiAoe1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICBzbGlkZXNQZXJHcm91cDogMSxcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgcmVzaXN0YW5jZVJhdGlvOiAwLFxuICAgICAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcbiAgICAgICAgdmlydHVhbFRyYW5zbGF0ZTogdHJ1ZVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVNoYWRvdyhzdWZmaXgsIHNsaWRlRWwsIHNpZGUpIHtcbiAgICBjb25zdCBzaGFkb3dDbGFzcyA9IGBzd2lwZXItc2xpZGUtc2hhZG93JHtzaWRlID8gYC0ke3NpZGV9YCA6ICcnfSR7c3VmZml4ID8gYCBzd2lwZXItc2xpZGUtc2hhZG93LSR7c3VmZml4fWAgOiAnJ31gO1xuICAgIGNvbnN0IHNoYWRvd0NvbnRhaW5lciA9IGdldFNsaWRlVHJhbnNmb3JtRWwoc2xpZGVFbCk7XG4gICAgbGV0IHNoYWRvd0VsID0gc2hhZG93Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC4ke3NoYWRvd0NsYXNzLnNwbGl0KCcgJykuam9pbignLicpfWApO1xuICAgIGlmICghc2hhZG93RWwpIHtcbiAgICAgIHNoYWRvd0VsID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc2hhZG93Q2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICBzaGFkb3dDb250YWluZXIuYXBwZW5kKHNoYWRvd0VsKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWRvd0VsO1xuICB9XG5cbiAgZnVuY3Rpb24gRWZmZWN0RmxpcChfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGZsaXBFZmZlY3Q6IHtcbiAgICAgICAgc2xpZGVTaGFkb3dzOiB0cnVlLFxuICAgICAgICBsaW1pdFJvdGF0aW9uOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlU2xpZGVTaGFkb3dzID0gKHNsaWRlRWwsIHByb2dyZXNzKSA9PiB7XG4gICAgICBsZXQgc2hhZG93QmVmb3JlID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0JykgOiBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCcpO1xuICAgICAgbGV0IHNoYWRvd0FmdGVyID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCcpIDogc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20nKTtcbiAgICAgIGlmICghc2hhZG93QmVmb3JlKSB7XG4gICAgICAgIHNoYWRvd0JlZm9yZSA9IGNyZWF0ZVNoYWRvdygnZmxpcCcsIHNsaWRlRWwsIHN3aXBlci5pc0hvcml6b250YWwoKSA/ICdsZWZ0JyA6ICd0b3AnKTtcbiAgICAgIH1cbiAgICAgIGlmICghc2hhZG93QWZ0ZXIpIHtcbiAgICAgICAgc2hhZG93QWZ0ZXIgPSBjcmVhdGVTaGFkb3coJ2ZsaXAnLCBzbGlkZUVsLCBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAncmlnaHQnIDogJ2JvdHRvbScpO1xuICAgICAgfVxuICAgICAgaWYgKHNoYWRvd0JlZm9yZSkgc2hhZG93QmVmb3JlLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heCgtcHJvZ3Jlc3MsIDApO1xuICAgICAgaWYgKHNoYWRvd0FmdGVyKSBzaGFkb3dBZnRlci5zdHlsZS5vcGFjaXR5ID0gTWF0aC5tYXgocHJvZ3Jlc3MsIDApO1xuICAgIH07XG4gICAgY29uc3QgcmVjcmVhdGVTaGFkb3dzID0gKCkgPT4ge1xuICAgICAgLy8gU2V0IHNoYWRvd3NcbiAgICAgIHN3aXBlci5wYXJhbXMuZmxpcEVmZmVjdDtcbiAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgICAgbGV0IHByb2dyZXNzID0gc2xpZGVFbC5wcm9ncmVzcztcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuZmxpcEVmZmVjdC5saW1pdFJvdGF0aW9uKSB7XG4gICAgICAgICAgcHJvZ3Jlc3MgPSBNYXRoLm1heChNYXRoLm1pbihzbGlkZUVsLnByb2dyZXNzLCAxKSwgLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNyZWF0ZVNsaWRlU2hhZG93cyhzbGlkZUVsLCBwcm9ncmVzcyk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzLFxuICAgICAgICBydGxUcmFuc2xhdGU6IHJ0bFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuZmxpcEVmZmVjdDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlRWwgPSBzbGlkZXNbaV07XG4gICAgICAgIGxldCBwcm9ncmVzcyA9IHNsaWRlRWwucHJvZ3Jlc3M7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmZsaXBFZmZlY3QubGltaXRSb3RhdGlvbikge1xuICAgICAgICAgIHByb2dyZXNzID0gTWF0aC5tYXgoTWF0aC5taW4oc2xpZGVFbC5wcm9ncmVzcywgMSksIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvZmZzZXQgPSBzbGlkZUVsLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgICBjb25zdCByb3RhdGUgPSAtMTgwICogcHJvZ3Jlc3M7XG4gICAgICAgIGxldCByb3RhdGVZID0gcm90YXRlO1xuICAgICAgICBsZXQgcm90YXRlWCA9IDA7XG4gICAgICAgIGxldCB0eCA9IHN3aXBlci5wYXJhbXMuY3NzTW9kZSA/IC1vZmZzZXQgLSBzd2lwZXIudHJhbnNsYXRlIDogLW9mZnNldDtcbiAgICAgICAgbGV0IHR5ID0gMDtcbiAgICAgICAgaWYgKCFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICB0eSA9IHR4O1xuICAgICAgICAgIHR4ID0gMDtcbiAgICAgICAgICByb3RhdGVYID0gLXJvdGF0ZVk7XG4gICAgICAgICAgcm90YXRlWSA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAocnRsKSB7XG4gICAgICAgICAgcm90YXRlWSA9IC1yb3RhdGVZO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzd2lwZXIuYnJvd3NlciAmJiBzd2lwZXIuYnJvd3Nlci5uZWVkM2RGaXgpIHtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRlWSkgLyA5MCAlIDIgPT09IDEpIHtcbiAgICAgICAgICAgIHJvdGF0ZVkgKz0gMC4wMDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGVYKSAvIDkwICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgcm90YXRlWCArPSAwLjAwMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVFbC5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChwcm9ncmVzcykpICsgc2xpZGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKHBhcmFtcy5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgICBjcmVhdGVTbGlkZVNoYWRvd3Moc2xpZGVFbCwgcHJvZ3Jlc3MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3R4fXB4LCAke3R5fXB4LCAwcHgpIHJvdGF0ZVgoJHtyb3RhdGVYfWRlZykgcm90YXRlWSgke3JvdGF0ZVl9ZGVnKWA7XG4gICAgICAgIGNvbnN0IHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgc2xpZGVFbCk7XG4gICAgICAgIHRhcmdldEVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zaXRpb24gPSBkdXJhdGlvbiA9PiB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1FbGVtZW50cyA9IHN3aXBlci5zbGlkZXMubWFwKHNsaWRlRWwgPT4gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKSk7XG4gICAgICB0cmFuc2Zvcm1FbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKS5mb3JFYWNoKHNoYWRvd0VsID0+IHtcbiAgICAgICAgICBzaGFkb3dFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCh7XG4gICAgICAgIHN3aXBlcixcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIHRyYW5zZm9ybUVsZW1lbnRzXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGVmZmVjdEluaXQoe1xuICAgICAgZWZmZWN0OiAnZmxpcCcsXG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb24sXG4gICAgICByZWNyZWF0ZVNoYWRvd3MsXG4gICAgICBnZXRFZmZlY3RQYXJhbXM6ICgpID0+IHN3aXBlci5wYXJhbXMuZmxpcEVmZmVjdCxcbiAgICAgIHBlcnNwZWN0aXZlOiAoKSA9PiB0cnVlLFxuICAgICAgb3ZlcndyaXRlUGFyYW1zOiAoKSA9PiAoe1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICBzbGlkZXNQZXJHcm91cDogMSxcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgICB2aXJ0dWFsVHJhbnNsYXRlOiAhc3dpcGVyLnBhcmFtcy5jc3NNb2RlXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gRWZmZWN0Q292ZXJmbG93KF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgY292ZXJmbG93RWZmZWN0OiB7XG4gICAgICAgIHJvdGF0ZTogNTAsXG4gICAgICAgIHN0cmV0Y2g6IDAsXG4gICAgICAgIGRlcHRoOiAxMDAsXG4gICAgICAgIHNjYWxlOiAxLFxuICAgICAgICBtb2RpZmllcjogMSxcbiAgICAgICAgc2xpZGVTaGFkb3dzOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3Qgc2V0VHJhbnNsYXRlID0gKCkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICB3aWR0aDogc3dpcGVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogc3dpcGVySGVpZ2h0LFxuICAgICAgICBzbGlkZXMsXG4gICAgICAgIHNsaWRlc1NpemVzR3JpZFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuY292ZXJmbG93RWZmZWN0O1xuICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICAgIGNvbnN0IGNlbnRlciA9IGlzSG9yaXpvbnRhbCA/IC10cmFuc2Zvcm0gKyBzd2lwZXJXaWR0aCAvIDIgOiAtdHJhbnNmb3JtICsgc3dpcGVySGVpZ2h0IC8gMjtcbiAgICAgIGNvbnN0IHJvdGF0ZSA9IGlzSG9yaXpvbnRhbCA/IHBhcmFtcy5yb3RhdGUgOiAtcGFyYW1zLnJvdGF0ZTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHBhcmFtcy5kZXB0aDtcbiAgICAgIC8vIEVhY2ggc2xpZGUgb2Zmc2V0IGZyb20gY2VudGVyXG4gICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gc2xpZGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlRWwgPSBzbGlkZXNbaV07XG4gICAgICAgIGNvbnN0IHNsaWRlU2l6ZSA9IHNsaWRlc1NpemVzR3JpZFtpXTtcbiAgICAgICAgY29uc3Qgc2xpZGVPZmZzZXQgPSBzbGlkZUVsLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgICBjb25zdCBjZW50ZXJPZmZzZXQgPSAoY2VudGVyIC0gc2xpZGVPZmZzZXQgLSBzbGlkZVNpemUgLyAyKSAvIHNsaWRlU2l6ZTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0TXVsdGlwbGllciA9IHR5cGVvZiBwYXJhbXMubW9kaWZpZXIgPT09ICdmdW5jdGlvbicgPyBwYXJhbXMubW9kaWZpZXIoY2VudGVyT2Zmc2V0KSA6IGNlbnRlck9mZnNldCAqIHBhcmFtcy5tb2RpZmllcjtcbiAgICAgICAgbGV0IHJvdGF0ZVkgPSBpc0hvcml6b250YWwgPyByb3RhdGUgKiBvZmZzZXRNdWx0aXBsaWVyIDogMDtcbiAgICAgICAgbGV0IHJvdGF0ZVggPSBpc0hvcml6b250YWwgPyAwIDogcm90YXRlICogb2Zmc2V0TXVsdGlwbGllcjtcbiAgICAgICAgLy8gdmFyIHJvdGF0ZVogPSAwXG4gICAgICAgIGxldCB0cmFuc2xhdGVaID0gLXRyYW5zbGF0ZSAqIE1hdGguYWJzKG9mZnNldE11bHRpcGxpZXIpO1xuICAgICAgICBsZXQgc3RyZXRjaCA9IHBhcmFtcy5zdHJldGNoO1xuICAgICAgICAvLyBBbGxvdyBwZXJjZW50YWdlIHRvIG1ha2UgYSByZWxhdGl2ZSBzdHJldGNoIGZvciByZXNwb25zaXZlIHNsaWRlcnNcbiAgICAgICAgaWYgKHR5cGVvZiBzdHJldGNoID09PSAnc3RyaW5nJyAmJiBzdHJldGNoLmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICAgICAgICBzdHJldGNoID0gcGFyc2VGbG9hdChwYXJhbXMuc3RyZXRjaCkgLyAxMDAgKiBzbGlkZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRyYW5zbGF0ZVkgPSBpc0hvcml6b250YWwgPyAwIDogc3RyZXRjaCAqIG9mZnNldE11bHRpcGxpZXI7XG4gICAgICAgIGxldCB0cmFuc2xhdGVYID0gaXNIb3Jpem9udGFsID8gc3RyZXRjaCAqIG9mZnNldE11bHRpcGxpZXIgOiAwO1xuICAgICAgICBsZXQgc2NhbGUgPSAxIC0gKDEgLSBwYXJhbXMuc2NhbGUpICogTWF0aC5hYnMob2Zmc2V0TXVsdGlwbGllcik7XG5cbiAgICAgICAgLy8gRml4IGZvciB1bHRyYSBzbWFsbCB2YWx1ZXNcbiAgICAgICAgaWYgKE1hdGguYWJzKHRyYW5zbGF0ZVgpIDwgMC4wMDEpIHRyYW5zbGF0ZVggPSAwO1xuICAgICAgICBpZiAoTWF0aC5hYnModHJhbnNsYXRlWSkgPCAwLjAwMSkgdHJhbnNsYXRlWSA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyh0cmFuc2xhdGVaKSA8IDAuMDAxKSB0cmFuc2xhdGVaID0gMDtcbiAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0ZVkpIDwgMC4wMDEpIHJvdGF0ZVkgPSAwO1xuICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRlWCkgPCAwLjAwMSkgcm90YXRlWCA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyhzY2FsZSkgPCAwLjAwMSkgc2NhbGUgPSAwO1xuICAgICAgICBpZiAoc3dpcGVyLmJyb3dzZXIgJiYgc3dpcGVyLmJyb3dzZXIubmVlZDNkRml4KSB7XG4gICAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0ZVkpIC8gOTAgJSAyID09PSAxKSB7XG4gICAgICAgICAgICByb3RhdGVZICs9IDAuMDAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRlWCkgLyA5MCAlIDIgPT09IDEpIHtcbiAgICAgICAgICAgIHJvdGF0ZVggKz0gMC4wMDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNsaWRlVHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHJhbnNsYXRlWH1weCwke3RyYW5zbGF0ZVl9cHgsJHt0cmFuc2xhdGVafXB4KSAgcm90YXRlWCgke3JvdGF0ZVh9ZGVnKSByb3RhdGVZKCR7cm90YXRlWX1kZWcpIHNjYWxlKCR7c2NhbGV9KWA7XG4gICAgICAgIGNvbnN0IHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgc2xpZGVFbCk7XG4gICAgICAgIHRhcmdldEVsLnN0eWxlLnRyYW5zZm9ybSA9IHNsaWRlVHJhbnNmb3JtO1xuICAgICAgICBzbGlkZUVsLnN0eWxlLnpJbmRleCA9IC1NYXRoLmFicyhNYXRoLnJvdW5kKG9mZnNldE11bHRpcGxpZXIpKSArIDE7XG4gICAgICAgIGlmIChwYXJhbXMuc2xpZGVTaGFkb3dzKSB7XG4gICAgICAgICAgLy8gU2V0IHNoYWRvd3NcbiAgICAgICAgICBsZXQgc2hhZG93QmVmb3JlRWwgPSBpc0hvcml6b250YWwgPyBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKSA6IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wJyk7XG4gICAgICAgICAgbGV0IHNoYWRvd0FmdGVyRWwgPSBpc0hvcml6b250YWwgPyBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0JykgOiBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbScpO1xuICAgICAgICAgIGlmICghc2hhZG93QmVmb3JlRWwpIHtcbiAgICAgICAgICAgIHNoYWRvd0JlZm9yZUVsID0gY3JlYXRlU2hhZG93KCdjb3ZlcmZsb3cnLCBzbGlkZUVsLCBpc0hvcml6b250YWwgPyAnbGVmdCcgOiAndG9wJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghc2hhZG93QWZ0ZXJFbCkge1xuICAgICAgICAgICAgc2hhZG93QWZ0ZXJFbCA9IGNyZWF0ZVNoYWRvdygnY292ZXJmbG93Jywgc2xpZGVFbCwgaXNIb3Jpem9udGFsID8gJ3JpZ2h0JyA6ICdib3R0b20nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoYWRvd0JlZm9yZUVsKSBzaGFkb3dCZWZvcmVFbC5zdHlsZS5vcGFjaXR5ID0gb2Zmc2V0TXVsdGlwbGllciA+IDAgPyBvZmZzZXRNdWx0aXBsaWVyIDogMDtcbiAgICAgICAgICBpZiAoc2hhZG93QWZ0ZXJFbCkgc2hhZG93QWZ0ZXJFbC5zdHlsZS5vcGFjaXR5ID0gLW9mZnNldE11bHRpcGxpZXIgPiAwID8gLW9mZnNldE11bHRpcGxpZXIgOiAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgICAgY29uc3QgdHJhbnNmb3JtRWxlbWVudHMgPSBzd2lwZXIuc2xpZGVzLm1hcChzbGlkZUVsID0+IGdldFNsaWRlVHJhbnNmb3JtRWwoc2xpZGVFbCkpO1xuICAgICAgdHJhbnNmb3JtRWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0JykuZm9yRWFjaChzaGFkb3dFbCA9PiB7XG4gICAgICAgICAgc2hhZG93RWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZWZmZWN0SW5pdCh7XG4gICAgICBlZmZlY3Q6ICdjb3ZlcmZsb3cnLFxuICAgICAgc3dpcGVyLFxuICAgICAgb24sXG4gICAgICBzZXRUcmFuc2xhdGUsXG4gICAgICBzZXRUcmFuc2l0aW9uLFxuICAgICAgcGVyc3BlY3RpdmU6ICgpID0+IHRydWUsXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWVcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBFZmZlY3RDcmVhdGl2ZShfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGNyZWF0aXZlRWZmZWN0OiB7XG4gICAgICAgIGxpbWl0UHJvZ3Jlc3M6IDEsXG4gICAgICAgIHNoYWRvd1BlclByb2dyZXNzOiBmYWxzZSxcbiAgICAgICAgcHJvZ3Jlc3NNdWx0aXBsaWVyOiAxLFxuICAgICAgICBwZXJzcGVjdGl2ZTogdHJ1ZSxcbiAgICAgICAgcHJldjoge1xuICAgICAgICAgIHRyYW5zbGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICAgIHJvdGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dDoge1xuICAgICAgICAgIHRyYW5zbGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICAgIHJvdGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGdldFRyYW5zbGF0ZVZhbHVlID0gdmFsdWUgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZTtcbiAgICAgIHJldHVybiBgJHt2YWx1ZX1weGA7XG4gICAgfTtcbiAgICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNsaWRlcyxcbiAgICAgICAgd3JhcHBlckVsLFxuICAgICAgICBzbGlkZXNTaXplc0dyaWRcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmNyZWF0aXZlRWZmZWN0O1xuICAgICAgY29uc3Qge1xuICAgICAgICBwcm9ncmVzc011bHRpcGxpZXI6IG11bHRpcGxpZXJcbiAgICAgIH0gPSBwYXJhbXM7XG4gICAgICBjb25zdCBpc0NlbnRlcmVkU2xpZGVzID0gc3dpcGVyLnBhcmFtcy5jZW50ZXJlZFNsaWRlcztcbiAgICAgIGlmIChpc0NlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IHNsaWRlc1NpemVzR3JpZFswXSAvIDIgLSBzd2lwZXIucGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZSB8fCAwO1xuICAgICAgICB3cmFwcGVyRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoY2FsYyg1MCUgLSAke21hcmdpbn1weCkpYDtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlRWwgPSBzbGlkZXNbaV07XG4gICAgICAgIGNvbnN0IHNsaWRlUHJvZ3Jlc3MgPSBzbGlkZUVsLnByb2dyZXNzO1xuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKE1hdGgubWF4KHNsaWRlRWwucHJvZ3Jlc3MsIC1wYXJhbXMubGltaXRQcm9ncmVzcyksIHBhcmFtcy5saW1pdFByb2dyZXNzKTtcbiAgICAgICAgbGV0IG9yaWdpbmFsUHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgICAgaWYgKCFpc0NlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgICAgb3JpZ2luYWxQcm9ncmVzcyA9IE1hdGgubWluKE1hdGgubWF4KHNsaWRlRWwub3JpZ2luYWxQcm9ncmVzcywgLXBhcmFtcy5saW1pdFByb2dyZXNzKSwgcGFyYW1zLmxpbWl0UHJvZ3Jlc3MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHNsaWRlRWwuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgIGNvbnN0IHQgPSBbc3dpcGVyLnBhcmFtcy5jc3NNb2RlID8gLW9mZnNldCAtIHN3aXBlci50cmFuc2xhdGUgOiAtb2Zmc2V0LCAwLCAwXTtcbiAgICAgICAgY29uc3QgciA9IFswLCAwLCAwXTtcbiAgICAgICAgbGV0IGN1c3RvbSA9IGZhbHNlO1xuICAgICAgICBpZiAoIXN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgIHRbMV0gPSB0WzBdO1xuICAgICAgICAgIHRbMF0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgIHRyYW5zbGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICAgIHJvdGF0ZTogWzAsIDAsIDBdLFxuICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHByb2dyZXNzIDwgMCkge1xuICAgICAgICAgIGRhdGEgPSBwYXJhbXMubmV4dDtcbiAgICAgICAgICBjdXN0b20gPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHByb2dyZXNzID4gMCkge1xuICAgICAgICAgIGRhdGEgPSBwYXJhbXMucHJldjtcbiAgICAgICAgICBjdXN0b20gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCB0cmFuc2xhdGVcbiAgICAgICAgdC5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICB0W2luZGV4XSA9IGBjYWxjKCR7dmFsdWV9cHggKyAoJHtnZXRUcmFuc2xhdGVWYWx1ZShkYXRhLnRyYW5zbGF0ZVtpbmRleF0pfSAqICR7TWF0aC5hYnMocHJvZ3Jlc3MgKiBtdWx0aXBsaWVyKX0pKWA7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBzZXQgcm90YXRlc1xuICAgICAgICByLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGxldCB2YWwgPSBkYXRhLnJvdGF0ZVtpbmRleF0gKiBNYXRoLmFicyhwcm9ncmVzcyAqIG11bHRpcGxpZXIpO1xuICAgICAgICAgIGlmIChzd2lwZXIuYnJvd3NlciAmJiBzd2lwZXIuYnJvd3Nlci5uZWVkM2RGaXggJiYgTWF0aC5hYnModmFsKSAvIDkwICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgdmFsICs9IDAuMDAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICByW2luZGV4XSA9IHZhbDtcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlRWwuc3R5bGUuekluZGV4ID0gLU1hdGguYWJzKE1hdGgucm91bmQoc2xpZGVQcm9ncmVzcykpICsgc2xpZGVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlU3RyaW5nID0gdC5qb2luKCcsICcpO1xuICAgICAgICBjb25zdCByb3RhdGVTdHJpbmcgPSBgcm90YXRlWCgke3JbMF19ZGVnKSByb3RhdGVZKCR7clsxXX1kZWcpIHJvdGF0ZVooJHtyWzJdfWRlZylgO1xuICAgICAgICBjb25zdCBzY2FsZVN0cmluZyA9IG9yaWdpbmFsUHJvZ3Jlc3MgPCAwID8gYHNjYWxlKCR7MSArICgxIC0gZGF0YS5zY2FsZSkgKiBvcmlnaW5hbFByb2dyZXNzICogbXVsdGlwbGllcn0pYCA6IGBzY2FsZSgkezEgLSAoMSAtIGRhdGEuc2NhbGUpICogb3JpZ2luYWxQcm9ncmVzcyAqIG11bHRpcGxpZXJ9KWA7XG4gICAgICAgIGNvbnN0IG9wYWNpdHlTdHJpbmcgPSBvcmlnaW5hbFByb2dyZXNzIDwgMCA/IDEgKyAoMSAtIGRhdGEub3BhY2l0eSkgKiBvcmlnaW5hbFByb2dyZXNzICogbXVsdGlwbGllciA6IDEgLSAoMSAtIGRhdGEub3BhY2l0eSkgKiBvcmlnaW5hbFByb2dyZXNzICogbXVsdGlwbGllcjtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHJhbnNsYXRlU3RyaW5nfSkgJHtyb3RhdGVTdHJpbmd9ICR7c2NhbGVTdHJpbmd9YDtcblxuICAgICAgICAvLyBTZXQgc2hhZG93c1xuICAgICAgICBpZiAoY3VzdG9tICYmIGRhdGEuc2hhZG93IHx8ICFjdXN0b20pIHtcbiAgICAgICAgICBsZXQgc2hhZG93RWwgPSBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93Jyk7XG4gICAgICAgICAgaWYgKCFzaGFkb3dFbCAmJiBkYXRhLnNoYWRvdykge1xuICAgICAgICAgICAgc2hhZG93RWwgPSBjcmVhdGVTaGFkb3coJ2NyZWF0aXZlJywgc2xpZGVFbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGFkb3dFbCkge1xuICAgICAgICAgICAgY29uc3Qgc2hhZG93T3BhY2l0eSA9IHBhcmFtcy5zaGFkb3dQZXJQcm9ncmVzcyA/IHByb2dyZXNzICogKDEgLyBwYXJhbXMubGltaXRQcm9ncmVzcykgOiBwcm9ncmVzcztcbiAgICAgICAgICAgIHNoYWRvd0VsLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1pbihNYXRoLm1heChNYXRoLmFicyhzaGFkb3dPcGFjaXR5KSwgMCksIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0YXJnZXRFbCA9IGVmZmVjdFRhcmdldChwYXJhbXMsIHNsaWRlRWwpO1xuICAgICAgICB0YXJnZXRFbC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgIHRhcmdldEVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5U3RyaW5nO1xuICAgICAgICBpZiAoZGF0YS5vcmlnaW4pIHtcbiAgICAgICAgICB0YXJnZXRFbC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBkYXRhLm9yaWdpbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0VHJhbnNpdGlvbiA9IGR1cmF0aW9uID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybUVsZW1lbnRzID0gc3dpcGVyLnNsaWRlcy5tYXAoc2xpZGVFbCA9PiBnZXRTbGlkZVRyYW5zZm9ybUVsKHNsaWRlRWwpKTtcbiAgICAgIHRyYW5zZm9ybUVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItc2xpZGUtc2hhZG93JykuZm9yRWFjaChzaGFkb3dFbCA9PiB7XG4gICAgICAgICAgc2hhZG93RWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQoe1xuICAgICAgICBzd2lwZXIsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICB0cmFuc2Zvcm1FbGVtZW50cyxcbiAgICAgICAgYWxsU2xpZGVzOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGVmZmVjdEluaXQoe1xuICAgICAgZWZmZWN0OiAnY3JlYXRpdmUnLFxuICAgICAgc3dpcGVyLFxuICAgICAgb24sXG4gICAgICBzZXRUcmFuc2xhdGUsXG4gICAgICBzZXRUcmFuc2l0aW9uLFxuICAgICAgcGVyc3BlY3RpdmU6ICgpID0+IHN3aXBlci5wYXJhbXMuY3JlYXRpdmVFZmZlY3QucGVyc3BlY3RpdmUsXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBFZmZlY3RDYXJkcyhfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGNhcmRzRWZmZWN0OiB7XG4gICAgICAgIHNsaWRlU2hhZG93czogdHJ1ZSxcbiAgICAgICAgcm90YXRlOiB0cnVlLFxuICAgICAgICBwZXJTbGlkZVJvdGF0ZTogMixcbiAgICAgICAgcGVyU2xpZGVPZmZzZXQ6IDhcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNsaWRlcyxcbiAgICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5jYXJkc0VmZmVjdDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc3RhcnRUcmFuc2xhdGUsXG4gICAgICAgIGlzVG91Y2hlZFxuICAgICAgfSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGE7XG4gICAgICBjb25zdCBjdXJyZW50VHJhbnNsYXRlID0gcnRsID8gLXN3aXBlci50cmFuc2xhdGUgOiBzd2lwZXIudHJhbnNsYXRlO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVFbCA9IHNsaWRlc1tpXTtcbiAgICAgICAgY29uc3Qgc2xpZGVQcm9ncmVzcyA9IHNsaWRlRWwucHJvZ3Jlc3M7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oTWF0aC5tYXgoc2xpZGVQcm9ncmVzcywgLTQpLCA0KTtcbiAgICAgICAgbGV0IG9mZnNldCA9IHNsaWRlRWwuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzICYmICFzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7c3dpcGVyLm1pblRyYW5zbGF0ZSgpfXB4KWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgICAgb2Zmc2V0IC09IHNsaWRlc1swXS5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdFggPSBzd2lwZXIucGFyYW1zLmNzc01vZGUgPyAtb2Zmc2V0IC0gc3dpcGVyLnRyYW5zbGF0ZSA6IC1vZmZzZXQ7XG4gICAgICAgIGxldCB0WSA9IDA7XG4gICAgICAgIGNvbnN0IHRaID0gLTEwMCAqIE1hdGguYWJzKHByb2dyZXNzKTtcbiAgICAgICAgbGV0IHNjYWxlID0gMTtcbiAgICAgICAgbGV0IHJvdGF0ZSA9IC1wYXJhbXMucGVyU2xpZGVSb3RhdGUgKiBwcm9ncmVzcztcbiAgICAgICAgbGV0IHRYQWRkID0gcGFyYW1zLnBlclNsaWRlT2Zmc2V0IC0gTWF0aC5hYnMocHJvZ3Jlc3MpICogMC43NTtcbiAgICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnZpcnR1YWwuZnJvbSArIGkgOiBpO1xuICAgICAgICBjb25zdCBpc1N3aXBlVG9OZXh0ID0gKHNsaWRlSW5kZXggPT09IGFjdGl2ZUluZGV4IHx8IHNsaWRlSW5kZXggPT09IGFjdGl2ZUluZGV4IC0gMSkgJiYgcHJvZ3Jlc3MgPiAwICYmIHByb2dyZXNzIDwgMSAmJiAoaXNUb3VjaGVkIHx8IHN3aXBlci5wYXJhbXMuY3NzTW9kZSkgJiYgY3VycmVudFRyYW5zbGF0ZSA8IHN0YXJ0VHJhbnNsYXRlO1xuICAgICAgICBjb25zdCBpc1N3aXBlVG9QcmV2ID0gKHNsaWRlSW5kZXggPT09IGFjdGl2ZUluZGV4IHx8IHNsaWRlSW5kZXggPT09IGFjdGl2ZUluZGV4ICsgMSkgJiYgcHJvZ3Jlc3MgPCAwICYmIHByb2dyZXNzID4gLTEgJiYgKGlzVG91Y2hlZCB8fCBzd2lwZXIucGFyYW1zLmNzc01vZGUpICYmIGN1cnJlbnRUcmFuc2xhdGUgPiBzdGFydFRyYW5zbGF0ZTtcbiAgICAgICAgaWYgKGlzU3dpcGVUb05leHQgfHwgaXNTd2lwZVRvUHJldikge1xuICAgICAgICAgIGNvbnN0IHN1YlByb2dyZXNzID0gKDEgLSBNYXRoLmFicygoTWF0aC5hYnMocHJvZ3Jlc3MpIC0gMC41KSAvIDAuNSkpICoqIDAuNTtcbiAgICAgICAgICByb3RhdGUgKz0gLTI4ICogcHJvZ3Jlc3MgKiBzdWJQcm9ncmVzcztcbiAgICAgICAgICBzY2FsZSArPSAtMC41ICogc3ViUHJvZ3Jlc3M7XG4gICAgICAgICAgdFhBZGQgKz0gOTYgKiBzdWJQcm9ncmVzcztcbiAgICAgICAgICB0WSA9IGAkey0yNSAqIHN1YlByb2dyZXNzICogTWF0aC5hYnMocHJvZ3Jlc3MpfSVgO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9ncmVzcyA8IDApIHtcbiAgICAgICAgICAvLyBuZXh0XG4gICAgICAgICAgdFggPSBgY2FsYygke3RYfXB4ICR7cnRsID8gJy0nIDogJysnfSAoJHt0WEFkZCAqIE1hdGguYWJzKHByb2dyZXNzKX0lKSlgO1xuICAgICAgICB9IGVsc2UgaWYgKHByb2dyZXNzID4gMCkge1xuICAgICAgICAgIC8vIHByZXZcbiAgICAgICAgICB0WCA9IGBjYWxjKCR7dFh9cHggJHtydGwgPyAnLScgOiAnKyd9ICgtJHt0WEFkZCAqIE1hdGguYWJzKHByb2dyZXNzKX0lKSlgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRYID0gYCR7dFh9cHhgO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgICAgY29uc3QgcHJldlkgPSB0WTtcbiAgICAgICAgICB0WSA9IHRYO1xuICAgICAgICAgIHRYID0gcHJldlk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NhbGVTdHJpbmcgPSBwcm9ncmVzcyA8IDAgPyBgJHsxICsgKDEgLSBzY2FsZSkgKiBwcm9ncmVzc31gIDogYCR7MSAtICgxIC0gc2NhbGUpICogcHJvZ3Jlc3N9YDtcblxuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgXG4gICAgICAgIHRyYW5zbGF0ZTNkKCR7dFh9LCAke3RZfSwgJHt0Wn1weClcbiAgICAgICAgcm90YXRlWigke3BhcmFtcy5yb3RhdGUgPyBydGwgPyAtcm90YXRlIDogcm90YXRlIDogMH1kZWcpXG4gICAgICAgIHNjYWxlKCR7c2NhbGVTdHJpbmd9KVxuICAgICAgYDtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuXG4gICAgICAgIGlmIChwYXJhbXMuc2xpZGVTaGFkb3dzKSB7XG4gICAgICAgICAgLy8gU2V0IHNoYWRvd3NcbiAgICAgICAgICBsZXQgc2hhZG93RWwgPSBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93Jyk7XG4gICAgICAgICAgaWYgKCFzaGFkb3dFbCkge1xuICAgICAgICAgICAgc2hhZG93RWwgPSBjcmVhdGVTaGFkb3coJ2NhcmRzJywgc2xpZGVFbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGFkb3dFbCkgc2hhZG93RWwuc3R5bGUub3BhY2l0eSA9IE1hdGgubWluKE1hdGgubWF4KChNYXRoLmFicyhwcm9ncmVzcykgLSAwLjUpIC8gMC41LCAwKSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVFbC5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChzbGlkZVByb2dyZXNzKSkgKyBzbGlkZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0YXJnZXRFbCA9IGVmZmVjdFRhcmdldChwYXJhbXMsIHNsaWRlRWwpO1xuICAgICAgICB0YXJnZXRFbC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgICAgY29uc3QgdHJhbnNmb3JtRWxlbWVudHMgPSBzd2lwZXIuc2xpZGVzLm1hcChzbGlkZUVsID0+IGdldFNsaWRlVHJhbnNmb3JtRWwoc2xpZGVFbCkpO1xuICAgICAgdHJhbnNmb3JtRWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZS1zaGFkb3cnKS5mb3JFYWNoKHNoYWRvd0VsID0+IHtcbiAgICAgICAgICBzaGFkb3dFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCh7XG4gICAgICAgIHN3aXBlcixcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIHRyYW5zZm9ybUVsZW1lbnRzXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGVmZmVjdEluaXQoe1xuICAgICAgZWZmZWN0OiAnY2FyZHMnLFxuICAgICAgc3dpcGVyLFxuICAgICAgb24sXG4gICAgICBzZXRUcmFuc2xhdGUsXG4gICAgICBzZXRUcmFuc2l0aW9uLFxuICAgICAgcGVyc3BlY3RpdmU6ICgpID0+IHRydWUsXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3dpcGVyIDExLjEuNFxuICAgKiBNb3N0IG1vZGVybiBtb2JpbGUgdG91Y2ggc2xpZGVyIGFuZCBmcmFtZXdvcmsgd2l0aCBoYXJkd2FyZSBhY2NlbGVyYXRlZCB0cmFuc2l0aW9uc1xuICAgKiBodHRwczovL3N3aXBlcmpzLmNvbVxuICAgKlxuICAgKiBDb3B5cmlnaHQgMjAxNC0yMDI0IFZsYWRpbWlyIEtoYXJsYW1waWRpXG4gICAqXG4gICAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuICAgKlxuICAgKiBSZWxlYXNlZCBvbjogTWF5IDMwLCAyMDI0XG4gICAqL1xuXG5cbiAgLy8gU3dpcGVyIENsYXNzXG4gIGNvbnN0IG1vZHVsZXMgPSBbVmlydHVhbCwgS2V5Ym9hcmQsIE1vdXNld2hlZWwsIE5hdmlnYXRpb24sIFBhZ2luYXRpb24sIFNjcm9sbGJhciwgUGFyYWxsYXgsIFpvb20sIENvbnRyb2xsZXIsIEExMXksIEhpc3RvcnksIEhhc2hOYXZpZ2F0aW9uLCBBdXRvcGxheSwgVGh1bWIsIGZyZWVNb2RlLCBHcmlkLCBNYW5pcHVsYXRpb24sIEVmZmVjdEZhZGUsIEVmZmVjdEN1YmUsIEVmZmVjdEZsaXAsIEVmZmVjdENvdmVyZmxvdywgRWZmZWN0Q3JlYXRpdmUsIEVmZmVjdENhcmRzXTtcbiAgU3dpcGVyLnVzZShtb2R1bGVzKTtcblxuICAvKiB1bmRlcnNjb3JlIGluIG5hbWUgLT4gd2F0Y2ggZm9yIGNoYW5nZXMgKi9cbiAgY29uc3QgcGFyYW1zTGlzdCA9IFsnZXZlbnRzUHJlZml4JywgJ2luamVjdFN0eWxlcycsICdpbmplY3RTdHlsZXNVcmxzJywgJ21vZHVsZXMnLCAnaW5pdCcsICdfZGlyZWN0aW9uJywgJ29uZVdheU1vdmVtZW50JywgJ3N3aXBlckVsZW1lbnROb2RlTmFtZScsICd0b3VjaEV2ZW50c1RhcmdldCcsICdpbml0aWFsU2xpZGUnLCAnX3NwZWVkJywgJ2Nzc01vZGUnLCAndXBkYXRlT25XaW5kb3dSZXNpemUnLCAncmVzaXplT2JzZXJ2ZXInLCAnbmVzdGVkJywgJ2ZvY3VzYWJsZUVsZW1lbnRzJywgJ19lbmFibGVkJywgJ193aWR0aCcsICdfaGVpZ2h0JywgJ3ByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbicsICd1c2VyQWdlbnQnLCAndXJsJywgJ19lZGdlU3dpcGVEZXRlY3Rpb24nLCAnX2VkZ2VTd2lwZVRocmVzaG9sZCcsICdfZnJlZU1vZGUnLCAnX2F1dG9IZWlnaHQnLCAnc2V0V3JhcHBlclNpemUnLCAndmlydHVhbFRyYW5zbGF0ZScsICdfZWZmZWN0JywgJ2JyZWFrcG9pbnRzJywgJ2JyZWFrcG9pbnRzQmFzZScsICdfc3BhY2VCZXR3ZWVuJywgJ19zbGlkZXNQZXJWaWV3JywgJ21heEJhY2tmYWNlSGlkZGVuU2xpZGVzJywgJ19ncmlkJywgJ19zbGlkZXNQZXJHcm91cCcsICdfc2xpZGVzUGVyR3JvdXBTa2lwJywgJ19zbGlkZXNQZXJHcm91cEF1dG8nLCAnX2NlbnRlcmVkU2xpZGVzJywgJ19jZW50ZXJlZFNsaWRlc0JvdW5kcycsICdfc2xpZGVzT2Zmc2V0QmVmb3JlJywgJ19zbGlkZXNPZmZzZXRBZnRlcicsICdub3JtYWxpemVTbGlkZUluZGV4JywgJ19jZW50ZXJJbnN1ZmZpY2llbnRTbGlkZXMnLCAnX3dhdGNoT3ZlcmZsb3cnLCAncm91bmRMZW5ndGhzJywgJ3RvdWNoUmF0aW8nLCAndG91Y2hBbmdsZScsICdzaW11bGF0ZVRvdWNoJywgJ19zaG9ydFN3aXBlcycsICdfbG9uZ1N3aXBlcycsICdsb25nU3dpcGVzUmF0aW8nLCAnbG9uZ1N3aXBlc01zJywgJ19mb2xsb3dGaW5nZXInLCAnYWxsb3dUb3VjaE1vdmUnLCAnX3RocmVzaG9sZCcsICd0b3VjaE1vdmVTdG9wUHJvcGFnYXRpb24nLCAndG91Y2hTdGFydFByZXZlbnREZWZhdWx0JywgJ3RvdWNoU3RhcnRGb3JjZVByZXZlbnREZWZhdWx0JywgJ3RvdWNoUmVsZWFzZU9uRWRnZXMnLCAndW5pcXVlTmF2RWxlbWVudHMnLCAnX3Jlc2lzdGFuY2UnLCAnX3Jlc2lzdGFuY2VSYXRpbycsICdfd2F0Y2hTbGlkZXNQcm9ncmVzcycsICdfZ3JhYkN1cnNvcicsICdwcmV2ZW50Q2xpY2tzJywgJ3ByZXZlbnRDbGlja3NQcm9wYWdhdGlvbicsICdfc2xpZGVUb0NsaWNrZWRTbGlkZScsICdfbG9vcCcsICdsb29wQWRkaXRpb25hbFNsaWRlcycsICdsb29wQWRkQmxhbmtTbGlkZXMnLCAnbG9vcFByZXZlbnRzU2xpZGluZycsICdfcmV3aW5kJywgJ19hbGxvd1NsaWRlUHJldicsICdfYWxsb3dTbGlkZU5leHQnLCAnX3N3aXBlSGFuZGxlcicsICdfbm9Td2lwaW5nJywgJ25vU3dpcGluZ0NsYXNzJywgJ25vU3dpcGluZ1NlbGVjdG9yJywgJ3Bhc3NpdmVMaXN0ZW5lcnMnLCAnY29udGFpbmVyTW9kaWZpZXJDbGFzcycsICdzbGlkZUNsYXNzJywgJ3NsaWRlQWN0aXZlQ2xhc3MnLCAnc2xpZGVWaXNpYmxlQ2xhc3MnLCAnc2xpZGVGdWxseVZpc2libGVDbGFzcycsICdzbGlkZU5leHRDbGFzcycsICdzbGlkZVByZXZDbGFzcycsICdzbGlkZUJsYW5rQ2xhc3MnLCAnd3JhcHBlckNsYXNzJywgJ2xhenlQcmVsb2FkZXJDbGFzcycsICdsYXp5UHJlbG9hZFByZXZOZXh0JywgJ3J1bkNhbGxiYWNrc09uSW5pdCcsICdvYnNlcnZlcicsICdvYnNlcnZlUGFyZW50cycsICdvYnNlcnZlU2xpZGVDaGlsZHJlbicsXG4gIC8vIG1vZHVsZXNcbiAgJ2ExMXknLCAnX2F1dG9wbGF5JywgJ19jb250cm9sbGVyJywgJ2NvdmVyZmxvd0VmZmVjdCcsICdjdWJlRWZmZWN0JywgJ2ZhZGVFZmZlY3QnLCAnZmxpcEVmZmVjdCcsICdjcmVhdGl2ZUVmZmVjdCcsICdjYXJkc0VmZmVjdCcsICdoYXNoTmF2aWdhdGlvbicsICdoaXN0b3J5JywgJ2tleWJvYXJkJywgJ21vdXNld2hlZWwnLCAnX25hdmlnYXRpb24nLCAnX3BhZ2luYXRpb24nLCAncGFyYWxsYXgnLCAnX3Njcm9sbGJhcicsICdfdGh1bWJzJywgJ3ZpcnR1YWwnLCAnem9vbScsICdjb250cm9sJ107XG5cbiAgZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICAgIHJldHVybiB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiYgbyAhPT0gbnVsbCAmJiBvLmNvbnN0cnVjdG9yICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSkgPT09ICdPYmplY3QnICYmICFvLl9fc3dpcGVyX187XG4gIH1cbiAgZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc3JjKSB7XG4gICAgY29uc3Qgbm9FeHRlbmQgPSBbJ19fcHJvdG9fXycsICdjb25zdHJ1Y3RvcicsICdwcm90b3R5cGUnXTtcbiAgICBPYmplY3Qua2V5cyhzcmMpLmZpbHRlcihrZXkgPT4gbm9FeHRlbmQuaW5kZXhPZihrZXkpIDwgMCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB0YXJnZXRba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHRhcmdldFtrZXldID0gc3JjW2tleV07ZWxzZSBpZiAoaXNPYmplY3Qoc3JjW2tleV0pICYmIGlzT2JqZWN0KHRhcmdldFtrZXldKSAmJiBPYmplY3Qua2V5cyhzcmNba2V5XSkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoc3JjW2tleV0uX19zd2lwZXJfXykgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTtlbHNlIGV4dGVuZCh0YXJnZXRba2V5XSwgc3JjW2tleV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBuZWVkc05hdmlnYXRpb24ocGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcyA9PT0gdm9pZCAwKSB7XG4gICAgICBwYXJhbXMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcy5uYXZpZ2F0aW9uICYmIHR5cGVvZiBwYXJhbXMubmF2aWdhdGlvbi5uZXh0RWwgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwYXJhbXMubmF2aWdhdGlvbi5wcmV2RWwgPT09ICd1bmRlZmluZWQnO1xuICB9XG4gIGZ1bmN0aW9uIG5lZWRzUGFnaW5hdGlvbihwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zLnBhZ2luYXRpb24gJiYgdHlwZW9mIHBhcmFtcy5wYWdpbmF0aW9uLmVsID09PSAndW5kZWZpbmVkJztcbiAgfVxuICBmdW5jdGlvbiBuZWVkc1Njcm9sbGJhcihwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zLnNjcm9sbGJhciAmJiB0eXBlb2YgcGFyYW1zLnNjcm9sbGJhci5lbCA9PT0gJ3VuZGVmaW5lZCc7XG4gIH1cbiAgZnVuY3Rpb24gYXR0clRvUHJvcChhdHRyTmFtZSkge1xuICAgIGlmIChhdHRyTmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICBhdHRyTmFtZSA9ICcnO1xuICAgIH1cbiAgICByZXR1cm4gYXR0ck5hbWUucmVwbGFjZSgvLVthLXpdL2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoJy0nLCAnJykpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlU3dpcGVyKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgc2xpZGVzLFxuICAgICAgcGFzc2VkUGFyYW1zLFxuICAgICAgY2hhbmdlZFBhcmFtcyxcbiAgICAgIG5leHRFbCxcbiAgICAgIHByZXZFbCxcbiAgICAgIHNjcm9sbGJhckVsLFxuICAgICAgcGFnaW5hdGlvbkVsXG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0gY2hhbmdlZFBhcmFtcy5maWx0ZXIoa2V5ID0+IGtleSAhPT0gJ2NoaWxkcmVuJyAmJiBrZXkgIT09ICdkaXJlY3Rpb24nICYmIGtleSAhPT0gJ3dyYXBwZXJDbGFzcycpO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtczogY3VycmVudFBhcmFtcyxcbiAgICAgIHBhZ2luYXRpb24sXG4gICAgICBuYXZpZ2F0aW9uLFxuICAgICAgc2Nyb2xsYmFyLFxuICAgICAgdmlydHVhbCxcbiAgICAgIHRodW1ic1xuICAgIH0gPSBzd2lwZXI7XG4gICAgbGV0IG5lZWRUaHVtYnNJbml0O1xuICAgIGxldCBuZWVkQ29udHJvbGxlckluaXQ7XG4gICAgbGV0IG5lZWRQYWdpbmF0aW9uSW5pdDtcbiAgICBsZXQgbmVlZFNjcm9sbGJhckluaXQ7XG4gICAgbGV0IG5lZWROYXZpZ2F0aW9uSW5pdDtcbiAgICBsZXQgbG9vcE5lZWREZXN0cm95O1xuICAgIGxldCBsb29wTmVlZEVuYWJsZTtcbiAgICBsZXQgbG9vcE5lZWRSZWxvb3A7XG4gICAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ3RodW1icycpICYmIHBhc3NlZFBhcmFtcy50aHVtYnMgJiYgcGFzc2VkUGFyYW1zLnRodW1icy5zd2lwZXIgJiYgY3VycmVudFBhcmFtcy50aHVtYnMgJiYgIWN1cnJlbnRQYXJhbXMudGh1bWJzLnN3aXBlcikge1xuICAgICAgbmVlZFRodW1ic0luaXQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnY29udHJvbGxlcicpICYmIHBhc3NlZFBhcmFtcy5jb250cm9sbGVyICYmIHBhc3NlZFBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2wgJiYgY3VycmVudFBhcmFtcy5jb250cm9sbGVyICYmICFjdXJyZW50UGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCkge1xuICAgICAgbmVlZENvbnRyb2xsZXJJbml0ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ3BhZ2luYXRpb24nKSAmJiBwYXNzZWRQYXJhbXMucGFnaW5hdGlvbiAmJiAocGFzc2VkUGFyYW1zLnBhZ2luYXRpb24uZWwgfHwgcGFnaW5hdGlvbkVsKSAmJiAoY3VycmVudFBhcmFtcy5wYWdpbmF0aW9uIHx8IGN1cnJlbnRQYXJhbXMucGFnaW5hdGlvbiA9PT0gZmFsc2UpICYmIHBhZ2luYXRpb24gJiYgIXBhZ2luYXRpb24uZWwpIHtcbiAgICAgIG5lZWRQYWdpbmF0aW9uSW5pdCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCdzY3JvbGxiYXInKSAmJiBwYXNzZWRQYXJhbXMuc2Nyb2xsYmFyICYmIChwYXNzZWRQYXJhbXMuc2Nyb2xsYmFyLmVsIHx8IHNjcm9sbGJhckVsKSAmJiAoY3VycmVudFBhcmFtcy5zY3JvbGxiYXIgfHwgY3VycmVudFBhcmFtcy5zY3JvbGxiYXIgPT09IGZhbHNlKSAmJiBzY3JvbGxiYXIgJiYgIXNjcm9sbGJhci5lbCkge1xuICAgICAgbmVlZFNjcm9sbGJhckluaXQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnbmF2aWdhdGlvbicpICYmIHBhc3NlZFBhcmFtcy5uYXZpZ2F0aW9uICYmIChwYXNzZWRQYXJhbXMubmF2aWdhdGlvbi5wcmV2RWwgfHwgcHJldkVsKSAmJiAocGFzc2VkUGFyYW1zLm5hdmlnYXRpb24ubmV4dEVsIHx8IG5leHRFbCkgJiYgKGN1cnJlbnRQYXJhbXMubmF2aWdhdGlvbiB8fCBjdXJyZW50UGFyYW1zLm5hdmlnYXRpb24gPT09IGZhbHNlKSAmJiBuYXZpZ2F0aW9uICYmICFuYXZpZ2F0aW9uLnByZXZFbCAmJiAhbmF2aWdhdGlvbi5uZXh0RWwpIHtcbiAgICAgIG5lZWROYXZpZ2F0aW9uSW5pdCA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGRlc3Ryb3lNb2R1bGUgPSBtb2QgPT4ge1xuICAgICAgaWYgKCFzd2lwZXJbbW9kXSkgcmV0dXJuO1xuICAgICAgc3dpcGVyW21vZF0uZGVzdHJveSgpO1xuICAgICAgaWYgKG1vZCA9PT0gJ25hdmlnYXRpb24nKSB7XG4gICAgICAgIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgICAgc3dpcGVyW21vZF0ucHJldkVsLnJlbW92ZSgpO1xuICAgICAgICAgIHN3aXBlclttb2RdLm5leHRFbC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50UGFyYW1zW21vZF0ucHJldkVsID0gdW5kZWZpbmVkO1xuICAgICAgICBjdXJyZW50UGFyYW1zW21vZF0ubmV4dEVsID0gdW5kZWZpbmVkO1xuICAgICAgICBzd2lwZXJbbW9kXS5wcmV2RWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHN3aXBlclttb2RdLm5leHRFbCA9IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgICAgc3dpcGVyW21vZF0uZWwucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFBhcmFtc1ttb2RdLmVsID0gdW5kZWZpbmVkO1xuICAgICAgICBzd2lwZXJbbW9kXS5lbCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCdsb29wJykgJiYgc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgaWYgKGN1cnJlbnRQYXJhbXMubG9vcCAmJiAhcGFzc2VkUGFyYW1zLmxvb3ApIHtcbiAgICAgICAgbG9vcE5lZWREZXN0cm95ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoIWN1cnJlbnRQYXJhbXMubG9vcCAmJiBwYXNzZWRQYXJhbXMubG9vcCkge1xuICAgICAgICBsb29wTmVlZEVuYWJsZSA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb29wTmVlZFJlbG9vcCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVBhcmFtcy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoaXNPYmplY3QoY3VycmVudFBhcmFtc1trZXldKSAmJiBpc09iamVjdChwYXNzZWRQYXJhbXNba2V5XSkpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50UGFyYW1zW2tleV0sIHBhc3NlZFBhcmFtc1trZXldKTtcbiAgICAgICAgaWYgKChrZXkgPT09ICduYXZpZ2F0aW9uJyB8fCBrZXkgPT09ICdwYWdpbmF0aW9uJyB8fCBrZXkgPT09ICdzY3JvbGxiYXInKSAmJiAnZW5hYmxlZCcgaW4gcGFzc2VkUGFyYW1zW2tleV0gJiYgIXBhc3NlZFBhcmFtc1trZXldLmVuYWJsZWQpIHtcbiAgICAgICAgICBkZXN0cm95TW9kdWxlKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gcGFzc2VkUGFyYW1zW2tleV07XG4gICAgICAgIGlmICgobmV3VmFsdWUgPT09IHRydWUgfHwgbmV3VmFsdWUgPT09IGZhbHNlKSAmJiAoa2V5ID09PSAnbmF2aWdhdGlvbicgfHwga2V5ID09PSAncGFnaW5hdGlvbicgfHwga2V5ID09PSAnc2Nyb2xsYmFyJykpIHtcbiAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBkZXN0cm95TW9kdWxlKGtleSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRQYXJhbXNba2V5XSA9IHBhc3NlZFBhcmFtc1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHVwZGF0ZVBhcmFtcy5pbmNsdWRlcygnY29udHJvbGxlcicpICYmICFuZWVkQ29udHJvbGxlckluaXQgJiYgc3dpcGVyLmNvbnRyb2xsZXIgJiYgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCAmJiBjdXJyZW50UGFyYW1zLmNvbnRyb2xsZXIgJiYgY3VycmVudFBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2wpIHtcbiAgICAgIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBjdXJyZW50UGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbDtcbiAgICB9XG4gICAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ2NoaWxkcmVuJykgJiYgc2xpZGVzICYmIHZpcnR1YWwgJiYgY3VycmVudFBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHtcbiAgICAgIHZpcnR1YWwuc2xpZGVzID0gc2xpZGVzO1xuICAgICAgdmlydHVhbC51cGRhdGUodHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCd2aXJ0dWFsJykgJiYgdmlydHVhbCAmJiBjdXJyZW50UGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgaWYgKHNsaWRlcykgdmlydHVhbC5zbGlkZXMgPSBzbGlkZXM7XG4gICAgICB2aXJ0dWFsLnVwZGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ2NoaWxkcmVuJykgJiYgc2xpZGVzICYmIGN1cnJlbnRQYXJhbXMubG9vcCkge1xuICAgICAgbG9vcE5lZWRSZWxvb3AgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAobmVlZFRodW1ic0luaXQpIHtcbiAgICAgIGNvbnN0IGluaXRpYWxpemVkID0gdGh1bWJzLmluaXQoKTtcbiAgICAgIGlmIChpbml0aWFsaXplZCkgdGh1bWJzLnVwZGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgaWYgKG5lZWRDb250cm9sbGVySW5pdCkge1xuICAgICAgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCA9IGN1cnJlbnRQYXJhbXMuY29udHJvbGxlci5jb250cm9sO1xuICAgIH1cbiAgICBpZiAobmVlZFBhZ2luYXRpb25Jbml0KSB7XG4gICAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCAmJiAoIXBhZ2luYXRpb25FbCB8fCB0eXBlb2YgcGFnaW5hdGlvbkVsID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcGFnaW5hdGlvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHBhZ2luYXRpb25FbC5jbGFzc0xpc3QuYWRkKCdzd2lwZXItcGFnaW5hdGlvbicpO1xuICAgICAgICBwYWdpbmF0aW9uRWwucGFydC5hZGQoJ3BhZ2luYXRpb24nKTtcbiAgICAgICAgc3dpcGVyLmVsLmFwcGVuZENoaWxkKHBhZ2luYXRpb25FbCk7XG4gICAgICB9XG4gICAgICBpZiAocGFnaW5hdGlvbkVsKSBjdXJyZW50UGFyYW1zLnBhZ2luYXRpb24uZWwgPSBwYWdpbmF0aW9uRWw7XG4gICAgICBwYWdpbmF0aW9uLmluaXQoKTtcbiAgICAgIHBhZ2luYXRpb24ucmVuZGVyKCk7XG4gICAgICBwYWdpbmF0aW9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBpZiAobmVlZFNjcm9sbGJhckluaXQpIHtcbiAgICAgIGlmIChzd2lwZXIuaXNFbGVtZW50ICYmICghc2Nyb2xsYmFyRWwgfHwgdHlwZW9mIHNjcm9sbGJhckVsID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgc2Nyb2xsYmFyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc2Nyb2xsYmFyRWwuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXNjcm9sbGJhcicpO1xuICAgICAgICBzY3JvbGxiYXJFbC5wYXJ0LmFkZCgnc2Nyb2xsYmFyJyk7XG4gICAgICAgIHN3aXBlci5lbC5hcHBlbmRDaGlsZChzY3JvbGxiYXJFbCk7XG4gICAgICB9XG4gICAgICBpZiAoc2Nyb2xsYmFyRWwpIGN1cnJlbnRQYXJhbXMuc2Nyb2xsYmFyLmVsID0gc2Nyb2xsYmFyRWw7XG4gICAgICBzY3JvbGxiYXIuaW5pdCgpO1xuICAgICAgc2Nyb2xsYmFyLnVwZGF0ZVNpemUoKTtcbiAgICAgIHNjcm9sbGJhci5zZXRUcmFuc2xhdGUoKTtcbiAgICB9XG4gICAgaWYgKG5lZWROYXZpZ2F0aW9uSW5pdCkge1xuICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFuZXh0RWwgfHwgdHlwZW9mIG5leHRFbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBuZXh0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBuZXh0RWwuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLWJ1dHRvbi1uZXh0Jyk7XG4gICAgICAgICAgbmV4dEVsLmlubmVySFRNTCA9IHN3aXBlci5ob3N0RWwuY29uc3RydWN0b3IubmV4dEJ1dHRvblN2ZztcbiAgICAgICAgICBuZXh0RWwucGFydC5hZGQoJ2J1dHRvbi1uZXh0Jyk7XG4gICAgICAgICAgc3dpcGVyLmVsLmFwcGVuZENoaWxkKG5leHRFbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwcmV2RWwgfHwgdHlwZW9mIHByZXZFbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBwcmV2RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBwcmV2RWwuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLWJ1dHRvbi1wcmV2Jyk7XG4gICAgICAgICAgcHJldkVsLmlubmVySFRNTCA9IHN3aXBlci5ob3N0RWwuY29uc3RydWN0b3IucHJldkJ1dHRvblN2ZztcbiAgICAgICAgICBwcmV2RWwucGFydC5hZGQoJ2J1dHRvbi1wcmV2Jyk7XG4gICAgICAgICAgc3dpcGVyLmVsLmFwcGVuZENoaWxkKHByZXZFbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChuZXh0RWwpIGN1cnJlbnRQYXJhbXMubmF2aWdhdGlvbi5uZXh0RWwgPSBuZXh0RWw7XG4gICAgICBpZiAocHJldkVsKSBjdXJyZW50UGFyYW1zLm5hdmlnYXRpb24ucHJldkVsID0gcHJldkVsO1xuICAgICAgbmF2aWdhdGlvbi5pbml0KCk7XG4gICAgICBuYXZpZ2F0aW9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnYWxsb3dTbGlkZU5leHQnKSkge1xuICAgICAgc3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gcGFzc2VkUGFyYW1zLmFsbG93U2xpZGVOZXh0O1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnYWxsb3dTbGlkZVByZXYnKSkge1xuICAgICAgc3dpcGVyLmFsbG93U2xpZGVQcmV2ID0gcGFzc2VkUGFyYW1zLmFsbG93U2xpZGVQcmV2O1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnZGlyZWN0aW9uJykpIHtcbiAgICAgIHN3aXBlci5jaGFuZ2VEaXJlY3Rpb24ocGFzc2VkUGFyYW1zLmRpcmVjdGlvbiwgZmFsc2UpO1xuICAgIH1cbiAgICBpZiAobG9vcE5lZWREZXN0cm95IHx8IGxvb3BOZWVkUmVsb29wKSB7XG4gICAgICBzd2lwZXIubG9vcERlc3Ryb3koKTtcbiAgICB9XG4gICAgaWYgKGxvb3BOZWVkRW5hYmxlIHx8IGxvb3BOZWVkUmVsb29wKSB7XG4gICAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICAgIH1cbiAgICBzd2lwZXIudXBkYXRlKCk7XG4gIH1cblxuICBjb25zdCBmb3JtYXRWYWx1ZSA9IHZhbCA9PiB7XG4gICAgaWYgKHBhcnNlRmxvYXQodmFsKSA9PT0gTnVtYmVyKHZhbCkpIHJldHVybiBOdW1iZXIodmFsKTtcbiAgICBpZiAodmFsID09PSAndHJ1ZScpIHJldHVybiB0cnVlO1xuICAgIGlmICh2YWwgPT09ICcnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAodmFsID09PSAnZmFsc2UnKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHZhbCA9PT0gJ251bGwnKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodmFsID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgJiYgdmFsLmluY2x1ZGVzKCd7JykgJiYgdmFsLmluY2x1ZGVzKCd9JykgJiYgdmFsLmluY2x1ZGVzKCdcIicpKSB7XG4gICAgICBsZXQgdjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHYgPSBKU09OLnBhcnNlKHZhbCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdiA9IHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9O1xuICBjb25zdCBtb2R1bGVzUGFyYW1zTGlzdCA9IFsnYTExeScsICdhdXRvcGxheScsICdjb250cm9sbGVyJywgJ2NhcmRzLWVmZmVjdCcsICdjb3ZlcmZsb3ctZWZmZWN0JywgJ2NyZWF0aXZlLWVmZmVjdCcsICdjdWJlLWVmZmVjdCcsICdmYWRlLWVmZmVjdCcsICdmbGlwLWVmZmVjdCcsICdmcmVlLW1vZGUnLCAnZ3JpZCcsICdoYXNoLW5hdmlnYXRpb24nLCAnaGlzdG9yeScsICdrZXlib2FyZCcsICdtb3VzZXdoZWVsJywgJ25hdmlnYXRpb24nLCAncGFnaW5hdGlvbicsICdwYXJhbGxheCcsICdzY3JvbGxiYXInLCAndGh1bWJzJywgJ3ZpcnR1YWwnLCAnem9vbSddO1xuICBmdW5jdGlvbiBnZXRQYXJhbXMoZWxlbWVudCwgcHJvcE5hbWUsIHByb3BWYWx1ZSkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHt9O1xuICAgIGNvbnN0IHBhc3NlZFBhcmFtcyA9IHt9O1xuICAgIGV4dGVuZChwYXJhbXMsIGRlZmF1bHRzKTtcbiAgICBjb25zdCBsb2NhbFBhcmFtc0xpc3QgPSBbLi4ucGFyYW1zTGlzdCwgJ29uJ107XG4gICAgY29uc3QgYWxsb3dlZFBhcmFtcyA9IGxvY2FsUGFyYW1zTGlzdC5tYXAoa2V5ID0+IGtleS5yZXBsYWNlKC9fLywgJycpKTtcblxuICAgIC8vIEZpcnN0IGNoZWNrIHByb3BzXG4gICAgbG9jYWxQYXJhbXNMaXN0LmZvckVhY2gocGFyYW1OYW1lID0+IHtcbiAgICAgIHBhcmFtTmFtZSA9IHBhcmFtTmFtZS5yZXBsYWNlKCdfJywgJycpO1xuICAgICAgaWYgKHR5cGVvZiBlbGVtZW50W3BhcmFtTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHBhc3NlZFBhcmFtc1twYXJhbU5hbWVdID0gZWxlbWVudFtwYXJhbU5hbWVdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQXR0cmlidXRlc1xuICAgIGNvbnN0IGF0dHJzTGlzdCA9IFsuLi5lbGVtZW50LmF0dHJpYnV0ZXNdO1xuICAgIGlmICh0eXBlb2YgcHJvcE5hbWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBwcm9wVmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBhdHRyc0xpc3QucHVzaCh7XG4gICAgICAgIG5hbWU6IHByb3BOYW1lLFxuICAgICAgICB2YWx1ZTogaXNPYmplY3QocHJvcFZhbHVlKSA/IHtcbiAgICAgICAgICAuLi5wcm9wVmFsdWVcbiAgICAgICAgfSA6IHByb3BWYWx1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGF0dHJzTGlzdC5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgY29uc3QgbW9kdWxlUGFyYW0gPSBtb2R1bGVzUGFyYW1zTGlzdC5maWx0ZXIobVBhcmFtID0+IGF0dHIubmFtZS5pbmRleE9mKGAke21QYXJhbX0tYCkgPT09IDApWzBdO1xuICAgICAgaWYgKG1vZHVsZVBhcmFtKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudE9iak5hbWUgPSBhdHRyVG9Qcm9wKG1vZHVsZVBhcmFtKTtcbiAgICAgICAgY29uc3Qgc3ViT2JqTmFtZSA9IGF0dHJUb1Byb3AoYXR0ci5uYW1lLnNwbGl0KGAke21vZHVsZVBhcmFtfS1gKVsxXSk7XG4gICAgICAgIGlmICh0eXBlb2YgcGFzc2VkUGFyYW1zW3BhcmVudE9iak5hbWVdID09PSAndW5kZWZpbmVkJykgcGFzc2VkUGFyYW1zW3BhcmVudE9iak5hbWVdID0ge307XG4gICAgICAgIGlmIChwYXNzZWRQYXJhbXNbcGFyZW50T2JqTmFtZV0gPT09IHRydWUpIHtcbiAgICAgICAgICBwYXNzZWRQYXJhbXNbcGFyZW50T2JqTmFtZV0gPSB7XG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBwYXNzZWRQYXJhbXNbcGFyZW50T2JqTmFtZV1bc3ViT2JqTmFtZV0gPSBmb3JtYXRWYWx1ZShhdHRyLnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBhdHRyVG9Qcm9wKGF0dHIubmFtZSk7XG4gICAgICAgIGlmICghYWxsb3dlZFBhcmFtcy5pbmNsdWRlcyhuYW1lKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGZvcm1hdFZhbHVlKGF0dHIudmFsdWUpO1xuICAgICAgICBpZiAocGFzc2VkUGFyYW1zW25hbWVdICYmIG1vZHVsZXNQYXJhbXNMaXN0LmluY2x1ZGVzKGF0dHIubmFtZSkgJiYgIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgIGlmIChwYXNzZWRQYXJhbXNbbmFtZV0uY29uc3RydWN0b3IgIT09IE9iamVjdCkge1xuICAgICAgICAgICAgcGFzc2VkUGFyYW1zW25hbWVdID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhc3NlZFBhcmFtc1tuYW1lXS5lbmFibGVkID0gISF2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXNzZWRQYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGV4dGVuZChwYXJhbXMsIHBhc3NlZFBhcmFtcyk7XG4gICAgaWYgKHBhcmFtcy5uYXZpZ2F0aW9uKSB7XG4gICAgICBwYXJhbXMubmF2aWdhdGlvbiA9IHtcbiAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICAuLi4ocGFyYW1zLm5hdmlnYXRpb24gIT09IHRydWUgPyBwYXJhbXMubmF2aWdhdGlvbiA6IHt9KVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5uYXZpZ2F0aW9uID09PSBmYWxzZSkge1xuICAgICAgZGVsZXRlIHBhcmFtcy5uYXZpZ2F0aW9uO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnNjcm9sbGJhcikge1xuICAgICAgcGFyYW1zLnNjcm9sbGJhciA9IHtcbiAgICAgICAgZWw6ICcuc3dpcGVyLXNjcm9sbGJhcicsXG4gICAgICAgIC4uLihwYXJhbXMuc2Nyb2xsYmFyICE9PSB0cnVlID8gcGFyYW1zLnNjcm9sbGJhciA6IHt9KVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5zY3JvbGxiYXIgPT09IGZhbHNlKSB7XG4gICAgICBkZWxldGUgcGFyYW1zLnNjcm9sbGJhcjtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5wYWdpbmF0aW9uKSB7XG4gICAgICBwYXJhbXMucGFnaW5hdGlvbiA9IHtcbiAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAuLi4ocGFyYW1zLnBhZ2luYXRpb24gIT09IHRydWUgPyBwYXJhbXMucGFnaW5hdGlvbiA6IHt9KVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5wYWdpbmF0aW9uID09PSBmYWxzZSkge1xuICAgICAgZGVsZXRlIHBhcmFtcy5wYWdpbmF0aW9uO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcGFyYW1zLFxuICAgICAgcGFzc2VkUGFyYW1zXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTd2lwZXIgQ3VzdG9tIEVsZW1lbnQgMTEuMS40XG4gICAqIE1vc3QgbW9kZXJuIG1vYmlsZSB0b3VjaCBzbGlkZXIgYW5kIGZyYW1ld29yayB3aXRoIGhhcmR3YXJlIGFjY2VsZXJhdGVkIHRyYW5zaXRpb25zXG4gICAqIGh0dHBzOi8vc3dpcGVyanMuY29tXG4gICAqXG4gICAqIENvcHlyaWdodCAyMDE0LTIwMjQgVmxhZGltaXIgS2hhcmxhbXBpZGlcbiAgICpcbiAgICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gICAqXG4gICAqIFJlbGVhc2VkIG9uOiBNYXkgMzAsIDIwMjRcbiAgICovXG5cblxuICAvKiBlc2xpbnQtZGlzYWJsZSBzcGFjZWQtY29tbWVudCAqL1xuXG4gIGNvbnN0IFN3aXBlckNTUyA9IGA6aG9zdHstLXN3aXBlci10aGVtZS1jb2xvcjojMDA3YWZmfTpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0bzt6LWluZGV4OjF9LnN3aXBlcnt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbi1sZWZ0OmF1dG87bWFyZ2luLXJpZ2h0OmF1dG87cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVuO2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7ei1pbmRleDoxO2Rpc3BsYXk6YmxvY2t9LnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXdyYXBwZXJ7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5zd2lwZXItd3JhcHBlcntwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3otaW5kZXg6MTtkaXNwbGF5OmZsZXg7dHJhbnNpdGlvbi1wcm9wZXJ0eTp0cmFuc2Zvcm07dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246dmFyKC0tc3dpcGVyLXdyYXBwZXItdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24saW5pdGlhbCk7Ym94LXNpemluZzpjb250ZW50LWJveH0uc3dpcGVyLWFuZHJvaWQgOjpzbG90dGVkKHN3aXBlci1zbGlkZSksLnN3aXBlci1pb3MgOjpzbG90dGVkKHN3aXBlci1zbGlkZSksLnN3aXBlci13cmFwcGVye3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwcHgsMCwwKX0uc3dpcGVyLWhvcml6b250YWx7dG91Y2gtYWN0aW9uOnBhbi15fS5zd2lwZXItdmVydGljYWx7dG91Y2gtYWN0aW9uOnBhbi14fTo6c2xvdHRlZChzd2lwZXItc2xpZGUpe2ZsZXgtc2hyaW5rOjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZTt0cmFuc2l0aW9uLXByb3BlcnR5OnRyYW5zZm9ybTtkaXNwbGF5OmJsb2NrfTo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLWludmlzaWJsZS1ibGFuayl7dmlzaWJpbGl0eTpoaWRkZW59LnN3aXBlci1hdXRvaGVpZ2h0LC5zd2lwZXItYXV0b2hlaWdodCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtoZWlnaHQ6YXV0b30uc3dpcGVyLWF1dG9oZWlnaHQgLnN3aXBlci13cmFwcGVye2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7dHJhbnNpdGlvbi1wcm9wZXJ0eTp0cmFuc2Zvcm0saGVpZ2h0fS5zd2lwZXItYmFja2ZhY2UtaGlkZGVuIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3RyYW5zZm9ybTp0cmFuc2xhdGVaKDApOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW59LnN3aXBlci0zZC5zd2lwZXItY3NzLW1vZGUgLnN3aXBlci13cmFwcGVye3BlcnNwZWN0aXZlOjEyMDBweH0uc3dpcGVyLTNkIC5zd2lwZXItd3JhcHBlcnt0cmFuc2Zvcm0tc3R5bGU6cHJlc2VydmUtM2R9LnN3aXBlci0zZHtwZXJzcGVjdGl2ZToxMjAwcHh9LnN3aXBlci0zZCAuc3dpcGVyLWN1YmUtc2hhZG93LC5zd2lwZXItM2QgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7dHJhbnNmb3JtLXN0eWxlOnByZXNlcnZlLTNkfS5zd2lwZXItY3NzLW1vZGU+LnN3aXBlci13cmFwcGVye292ZXJmbG93OmF1dG87c2Nyb2xsYmFyLXdpZHRoOm5vbmU7LW1zLW92ZXJmbG93LXN0eWxlOm5vbmV9LnN3aXBlci1jc3MtbW9kZT4uc3dpcGVyLXdyYXBwZXI6Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX0uc3dpcGVyLWNzcy1tb2RlIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3Njcm9sbC1zbmFwLWFsaWduOnN0YXJ0IHN0YXJ0fS5zd2lwZXItY3NzLW1vZGUuc3dpcGVyLWhvcml6b250YWw+LnN3aXBlci13cmFwcGVye3Njcm9sbC1zbmFwLXR5cGU6eCBtYW5kYXRvcnl9LnN3aXBlci1jc3MtbW9kZS5zd2lwZXItdmVydGljYWw+LnN3aXBlci13cmFwcGVye3Njcm9sbC1zbmFwLXR5cGU6eSBtYW5kYXRvcnl9LnN3aXBlci1jc3MtbW9kZS5zd2lwZXItZnJlZS1tb2RlPi5zd2lwZXItd3JhcHBlcntzY3JvbGwtc25hcC10eXBlOm5vbmV9LnN3aXBlci1jc3MtbW9kZS5zd2lwZXItZnJlZS1tb2RlIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3Njcm9sbC1zbmFwLWFsaWduOm5vbmV9LnN3aXBlci1jc3MtbW9kZS5zd2lwZXItY2VudGVyZWQ+LnN3aXBlci13cmFwcGVyOjpiZWZvcmV7Y29udGVudDonJztmbGV4LXNocmluazowO29yZGVyOjk5OTl9LnN3aXBlci1jc3MtbW9kZS5zd2lwZXItY2VudGVyZWQgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7c2Nyb2xsLXNuYXAtYWxpZ246Y2VudGVyIGNlbnRlcjtzY3JvbGwtc25hcC1zdG9wOmFsd2F5c30uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1jZW50ZXJlZC5zd2lwZXItaG9yaXpvbnRhbCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKTpmaXJzdC1jaGlsZHttYXJnaW4taW5saW5lLXN0YXJ0OnZhcigtLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYmVmb3JlKX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1jZW50ZXJlZC5zd2lwZXItaG9yaXpvbnRhbD4uc3dpcGVyLXdyYXBwZXI6OmJlZm9yZXtoZWlnaHQ6MTAwJTttaW4taGVpZ2h0OjFweDt3aWR0aDp2YXIoLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWFmdGVyKX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1jZW50ZXJlZC5zd2lwZXItdmVydGljYWwgOjpzbG90dGVkKHN3aXBlci1zbGlkZSk6Zmlyc3QtY2hpbGR7bWFyZ2luLWJsb2NrLXN0YXJ0OnZhcigtLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYmVmb3JlKX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1jZW50ZXJlZC5zd2lwZXItdmVydGljYWw+LnN3aXBlci13cmFwcGVyOjpiZWZvcmV7d2lkdGg6MTAwJTttaW4td2lkdGg6MXB4O2hlaWdodDp2YXIoLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWFmdGVyKX0uc3dpcGVyLXZpcnR1YWwgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjt0cmFuc2Zvcm06dHJhbnNsYXRlWigwKX0uc3dpcGVyLXZpcnR1YWwuc3dpcGVyLWNzcy1tb2RlIC5zd2lwZXItd3JhcHBlcjo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7cG9pbnRlci1ldmVudHM6bm9uZX0uc3dpcGVyLXZpcnR1YWwuc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1ob3Jpem9udGFsIC5zd2lwZXItd3JhcHBlcjo6YWZ0ZXJ7aGVpZ2h0OjFweDt3aWR0aDp2YXIoLS1zd2lwZXItdmlydHVhbC1zaXplKX0uc3dpcGVyLXZpcnR1YWwuc3dpcGVyLWNzcy1tb2RlLnN3aXBlci12ZXJ0aWNhbCAuc3dpcGVyLXdyYXBwZXI6OmFmdGVye3dpZHRoOjFweDtoZWlnaHQ6dmFyKC0tc3dpcGVyLXZpcnR1YWwtc2l6ZSl9Omhvc3R7LS1zd2lwZXItbmF2aWdhdGlvbi1zaXplOjQ0cHh9LnN3aXBlci1idXR0b24tbmV4dCwuc3dpcGVyLWJ1dHRvbi1wcmV2e3Bvc2l0aW9uOmFic29sdXRlO3RvcDp2YXIoLS1zd2lwZXItbmF2aWdhdGlvbi10b3Atb2Zmc2V0LDUwJSk7d2lkdGg6Y2FsYyh2YXIoLS1zd2lwZXItbmF2aWdhdGlvbi1zaXplKS8gNDQgKiAyNyk7aGVpZ2h0OnZhcigtLXN3aXBlci1uYXZpZ2F0aW9uLXNpemUpO21hcmdpbi10b3A6Y2FsYygwcHggLSAodmFyKC0tc3dpcGVyLW5hdmlnYXRpb24tc2l6ZSkvIDIpKTt6LWluZGV4OjEwO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtjb2xvcjp2YXIoLS1zd2lwZXItbmF2aWdhdGlvbi1jb2xvcix2YXIoLS1zd2lwZXItdGhlbWUtY29sb3IpKX0uc3dpcGVyLWJ1dHRvbi1uZXh0LnN3aXBlci1idXR0b24tZGlzYWJsZWQsLnN3aXBlci1idXR0b24tcHJldi5zd2lwZXItYnV0dG9uLWRpc2FibGVke29wYWNpdHk6LjM1O2N1cnNvcjphdXRvO3BvaW50ZXItZXZlbnRzOm5vbmV9LnN3aXBlci1idXR0b24tbmV4dC5zd2lwZXItYnV0dG9uLWhpZGRlbiwuc3dpcGVyLWJ1dHRvbi1wcmV2LnN3aXBlci1idXR0b24taGlkZGVue29wYWNpdHk6MDtjdXJzb3I6YXV0bztwb2ludGVyLWV2ZW50czpub25lfS5zd2lwZXItbmF2aWdhdGlvbi1kaXNhYmxlZCAuc3dpcGVyLWJ1dHRvbi1uZXh0LC5zd2lwZXItbmF2aWdhdGlvbi1kaXNhYmxlZCAuc3dpcGVyLWJ1dHRvbi1wcmV2e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnN3aXBlci1idXR0b24tbmV4dCBzdmcsLnN3aXBlci1idXR0b24tcHJldiBzdmd7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvbnRhaW47dHJhbnNmb3JtLW9yaWdpbjpjZW50ZXJ9LnN3aXBlci1ydGwgLnN3aXBlci1idXR0b24tbmV4dCBzdmcsLnN3aXBlci1ydGwgLnN3aXBlci1idXR0b24tcHJldiBzdmd7dHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpfS5zd2lwZXItYnV0dG9uLXByZXYsLnN3aXBlci1ydGwgLnN3aXBlci1idXR0b24tbmV4dHtsZWZ0OnZhcigtLXN3aXBlci1uYXZpZ2F0aW9uLXNpZGVzLW9mZnNldCwxMHB4KTtyaWdodDphdXRvfS5zd2lwZXItYnV0dG9uLW5leHQsLnN3aXBlci1ydGwgLnN3aXBlci1idXR0b24tcHJldntyaWdodDp2YXIoLS1zd2lwZXItbmF2aWdhdGlvbi1zaWRlcy1vZmZzZXQsMTBweCk7bGVmdDphdXRvfS5zd2lwZXItYnV0dG9uLWxvY2t7ZGlzcGxheTpub25lfS5zd2lwZXItcGFnaW5hdGlvbntwb3NpdGlvbjphYnNvbHV0ZTt0ZXh0LWFsaWduOmNlbnRlcjt0cmFuc2l0aW9uOi4zcyBvcGFjaXR5O3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDAsMCk7ei1pbmRleDoxMH0uc3dpcGVyLXBhZ2luYXRpb24uc3dpcGVyLXBhZ2luYXRpb24taGlkZGVue29wYWNpdHk6MH0uc3dpcGVyLXBhZ2luYXRpb24tZGlzYWJsZWQ+LnN3aXBlci1wYWdpbmF0aW9uLC5zd2lwZXItcGFnaW5hdGlvbi5zd2lwZXItcGFnaW5hdGlvbi1kaXNhYmxlZHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5zd2lwZXItaG9yaXpvbnRhbD4uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cywuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy5zd2lwZXItcGFnaW5hdGlvbi1ob3Jpem9udGFsLC5zd2lwZXItcGFnaW5hdGlvbi1jdXN0b20sLnN3aXBlci1wYWdpbmF0aW9uLWZyYWN0aW9ue2JvdHRvbTp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1ib3R0b20sOHB4KTt0b3A6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tdG9wLGF1dG8pO2xlZnQ6MDt3aWR0aDoxMDAlfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWN7b3ZlcmZsb3c6aGlkZGVuO2ZvbnQtc2l6ZTowfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHt0cmFuc2Zvcm06c2NhbGUoLjMzKTtwb3NpdGlvbjpyZWxhdGl2ZX0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtYWN0aXZle3RyYW5zZm9ybTpzY2FsZSgxKX0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtYWN0aXZlLW1haW57dHJhbnNmb3JtOnNjYWxlKDEpfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUtcHJldnt0cmFuc2Zvcm06c2NhbGUoLjY2KX0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtYWN0aXZlLXByZXYtcHJldnt0cmFuc2Zvcm06c2NhbGUoLjMzKX0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtYWN0aXZlLW5leHR7dHJhbnNmb3JtOnNjYWxlKC42Nil9LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pYyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWFjdGl2ZS1uZXh0LW5leHR7dHJhbnNmb3JtOnNjYWxlKC4zMyl9LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHt3aWR0aDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtd2lkdGgsdmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LXNpemUsOHB4KSk7aGVpZ2h0OnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1oZWlnaHQsdmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LXNpemUsOHB4KSk7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym9yZGVyLXJhZGl1czp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtYm9yZGVyLXJhZGl1cyw1MCUpO2JhY2tncm91bmQ6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWluYWN0aXZlLWNvbG9yLCMwMDApO29wYWNpdHk6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWluYWN0aXZlLW9wYWNpdHksIC4yKX1idXR0b24uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0e2JvcmRlcjpub25lO21hcmdpbjowO3BhZGRpbmc6MDtib3gtc2hhZG93Om5vbmU7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lfS5zd2lwZXItcGFnaW5hdGlvbi1jbGlja2FibGUgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHtjdXJzb3I6cG9pbnRlcn0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0Om9ubHktY2hpbGR7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWFjdGl2ZXtvcGFjaXR5OnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1vcGFjaXR5LCAxKTtiYWNrZ3JvdW5kOnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWNvbG9yLHZhcigtLXN3aXBlci10aGVtZS1jb2xvcikpfS5zd2lwZXItcGFnaW5hdGlvbi12ZXJ0aWNhbC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLC5zd2lwZXItdmVydGljYWw+LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHN7cmlnaHQ6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tcmlnaHQsOHB4KTtsZWZ0OnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWxlZnQsYXV0byk7dG9wOjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LC01MCUsMCl9LnN3aXBlci1wYWdpbmF0aW9uLXZlcnRpY2FsLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldCwuc3dpcGVyLXZlcnRpY2FsPi5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXR7bWFyZ2luOnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC12ZXJ0aWNhbC1nYXAsNnB4KSAwO2Rpc3BsYXk6YmxvY2t9LnN3aXBlci1wYWdpbmF0aW9uLXZlcnRpY2FsLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljLC5zd2lwZXItdmVydGljYWw+LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWlje3RvcDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7d2lkdGg6OHB4fS5zd2lwZXItcGFnaW5hdGlvbi12ZXJ0aWNhbC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pYyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LC5zd2lwZXItdmVydGljYWw+LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXR7ZGlzcGxheTppbmxpbmUtYmxvY2s7dHJhbnNpdGlvbjouMnMgdHJhbnNmb3JtLC4ycyB0b3B9LnN3aXBlci1ob3Jpem9udGFsPi5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQsLnN3aXBlci1wYWdpbmF0aW9uLWhvcml6b250YWwuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0e21hcmdpbjowIHZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1ob3Jpem9udGFsLWdhcCw0cHgpfS5zd2lwZXItaG9yaXpvbnRhbD4uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMsLnN3aXBlci1wYWdpbmF0aW9uLWhvcml6b250YWwuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWN7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7d2hpdGUtc3BhY2U6bm93cmFwfS5zd2lwZXItaG9yaXpvbnRhbD4uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldCwuc3dpcGVyLXBhZ2luYXRpb24taG9yaXpvbnRhbC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pYyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0e3RyYW5zaXRpb246LjJzIHRyYW5zZm9ybSwuMnMgbGVmdH0uc3dpcGVyLWhvcml6b250YWwuc3dpcGVyLXJ0bD4uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXR7dHJhbnNpdGlvbjouMnMgdHJhbnNmb3JtLC4ycyByaWdodH0uc3dpcGVyLXBhZ2luYXRpb24tZnJhY3Rpb257Y29sb3I6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tZnJhY3Rpb24tY29sb3IsaW5oZXJpdCl9LnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFye2JhY2tncm91bmQ6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItYmctY29sb3IscmdiYSgwLDAsMCwuMjUpKTtwb3NpdGlvbjphYnNvbHV0ZX0uc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXIgLnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLWZpbGx7YmFja2dyb3VuZDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1jb2xvcix2YXIoLS1zd2lwZXItdGhlbWUtY29sb3IpKTtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0cmFuc2Zvcm06c2NhbGUoMCk7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0IHRvcH0uc3dpcGVyLXJ0bCAuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXIgLnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLWZpbGx7dHJhbnNmb3JtLW9yaWdpbjpyaWdodCB0b3B9LnN3aXBlci1ob3Jpem9udGFsPi5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhciwuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXIuc3dpcGVyLXBhZ2luYXRpb24taG9yaXpvbnRhbCwuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXIuc3dpcGVyLXBhZ2luYXRpb24tdmVydGljYWwuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItb3Bwb3NpdGUsLnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXIuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItb3Bwb3NpdGV7d2lkdGg6MTAwJTtoZWlnaHQ6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItc2l6ZSw0cHgpO2xlZnQ6MDt0b3A6MH0uc3dpcGVyLWhvcml6b250YWw+LnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLW9wcG9zaXRlLC5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci5zd2lwZXItcGFnaW5hdGlvbi1ob3Jpem9udGFsLnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLW9wcG9zaXRlLC5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci5zd2lwZXItcGFnaW5hdGlvbi12ZXJ0aWNhbCwuc3dpcGVyLXZlcnRpY2FsPi5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhcnt3aWR0aDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci1zaXplLDRweCk7aGVpZ2h0OjEwMCU7bGVmdDowO3RvcDowfS5zd2lwZXItcGFnaW5hdGlvbi1sb2Nre2Rpc3BsYXk6bm9uZX0uc3dpcGVyLXNjcm9sbGJhcntib3JkZXItcmFkaXVzOnZhcigtLXN3aXBlci1zY3JvbGxiYXItYm9yZGVyLXJhZGl1cywxMHB4KTtwb3NpdGlvbjpyZWxhdGl2ZTt0b3VjaC1hY3Rpb246bm9uZTtiYWNrZ3JvdW5kOnZhcigtLXN3aXBlci1zY3JvbGxiYXItYmctY29sb3IscmdiYSgwLDAsMCwuMSkpfS5zd2lwZXItc2Nyb2xsYmFyLWRpc2FibGVkPi5zd2lwZXItc2Nyb2xsYmFyLC5zd2lwZXItc2Nyb2xsYmFyLnN3aXBlci1zY3JvbGxiYXItZGlzYWJsZWR7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc3dpcGVyLWhvcml6b250YWw+LnN3aXBlci1zY3JvbGxiYXIsLnN3aXBlci1zY3JvbGxiYXIuc3dpcGVyLXNjcm9sbGJhci1ob3Jpem9udGFse3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6dmFyKC0tc3dpcGVyLXNjcm9sbGJhci1zaWRlcy1vZmZzZXQsMSUpO2JvdHRvbTp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLWJvdHRvbSw0cHgpO3RvcDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLXRvcCxhdXRvKTt6LWluZGV4OjUwO2hlaWdodDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLXNpemUsNHB4KTt3aWR0aDpjYWxjKDEwMCUgLSAyICogdmFyKC0tc3dpcGVyLXNjcm9sbGJhci1zaWRlcy1vZmZzZXQsMSUpKX0uc3dpcGVyLXNjcm9sbGJhci5zd2lwZXItc2Nyb2xsYmFyLXZlcnRpY2FsLC5zd2lwZXItdmVydGljYWw+LnN3aXBlci1zY3JvbGxiYXJ7cG9zaXRpb246YWJzb2x1dGU7bGVmdDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLWxlZnQsYXV0byk7cmlnaHQ6dmFyKC0tc3dpcGVyLXNjcm9sbGJhci1yaWdodCw0cHgpO3RvcDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLXNpZGVzLW9mZnNldCwxJSk7ei1pbmRleDo1MDt3aWR0aDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLXNpemUsNHB4KTtoZWlnaHQ6Y2FsYygxMDAlIC0gMiAqIHZhcigtLXN3aXBlci1zY3JvbGxiYXItc2lkZXMtb2Zmc2V0LDElKSl9LnN3aXBlci1zY3JvbGxiYXItZHJhZ3toZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQ6dmFyKC0tc3dpcGVyLXNjcm9sbGJhci1kcmFnLWJnLWNvbG9yLHJnYmEoMCwwLDAsLjUpKTtib3JkZXItcmFkaXVzOnZhcigtLXN3aXBlci1zY3JvbGxiYXItYm9yZGVyLXJhZGl1cywxMHB4KTtsZWZ0OjA7dG9wOjB9LnN3aXBlci1zY3JvbGxiYXItY3Vyc29yLWRyYWd7Y3Vyc29yOm1vdmV9LnN3aXBlci1zY3JvbGxiYXItbG9ja3tkaXNwbGF5Om5vbmV9OjpzbG90dGVkKC5zd2lwZXItc2xpZGUtem9vbWVkKXtjdXJzb3I6bW92ZTt0b3VjaC1hY3Rpb246bm9uZX0uc3dpcGVyIC5zd2lwZXItbm90aWZpY2F0aW9ue3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MDt6LWluZGV4Oi0xMDAwfS5zd2lwZXItZnJlZS1tb2RlPi5zd2lwZXItd3JhcHBlcnt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLW91dDttYXJnaW46MCBhdXRvfS5zd2lwZXItZ3JpZD4uc3dpcGVyLXdyYXBwZXJ7ZmxleC13cmFwOndyYXB9LnN3aXBlci1ncmlkLWNvbHVtbj4uc3dpcGVyLXdyYXBwZXJ7ZmxleC13cmFwOndyYXA7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5zd2lwZXItZmFkZS5zd2lwZXItZnJlZS1tb2RlIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fS5zd2lwZXItZmFkZSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb24tcHJvcGVydHk6b3BhY2l0eX0uc3dpcGVyLWZhZGUgOjpzbG90dGVkKHN3aXBlci1zbGlkZSkgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7cG9pbnRlci1ldmVudHM6bm9uZX0uc3dpcGVyLWZhZGUgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtYWN0aXZlKXtwb2ludGVyLWV2ZW50czphdXRvfS5zd2lwZXItZmFkZSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLWFjdGl2ZSl7cG9pbnRlci1ldmVudHM6YXV0b30uc3dpcGVyLWN1YmV7b3ZlcmZsb3c6dmlzaWJsZX0uc3dpcGVyLWN1YmUgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7cG9pbnRlci1ldmVudHM6bm9uZTstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO3otaW5kZXg6MTt2aXNpYmlsaXR5OmhpZGRlbjt0cmFuc2Zvcm0tb3JpZ2luOjAgMDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5zd2lwZXItY3ViZSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtwb2ludGVyLWV2ZW50czpub25lfS5zd2lwZXItY3ViZS5zd2lwZXItcnRsIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3RyYW5zZm9ybS1vcmlnaW46MTAwJSAwfS5zd2lwZXItY3ViZSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpLC5zd2lwZXItY3ViZSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLWFjdGl2ZSl7cG9pbnRlci1ldmVudHM6YXV0b30uc3dpcGVyLWN1YmUgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtYWN0aXZlKSwuc3dpcGVyLWN1YmUgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtbmV4dCksLnN3aXBlci1jdWJlIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXByZXYpe3BvaW50ZXItZXZlbnRzOmF1dG87dmlzaWJpbGl0eTp2aXNpYmxlfS5zd2lwZXItY3ViZSAuc3dpcGVyLWN1YmUtc2hhZG93e3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDtib3R0b206MHB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7b3BhY2l0eTouNjt6LWluZGV4OjB9LnN3aXBlci1jdWJlIC5zd2lwZXItY3ViZS1zaGFkb3c6YmVmb3Jle2NvbnRlbnQ6Jyc7YmFja2dyb3VuZDojMDAwO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtib3R0b206MDtyaWdodDowO2ZpbHRlcjpibHVyKDUwcHgpfS5zd2lwZXItY3ViZSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1uZXh0KSs6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtwb2ludGVyLWV2ZW50czphdXRvO3Zpc2liaWxpdHk6dmlzaWJsZX0uc3dpcGVyLWZsaXB7b3ZlcmZsb3c6dmlzaWJsZX0uc3dpcGVyLWZsaXAgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7cG9pbnRlci1ldmVudHM6bm9uZTstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO3otaW5kZXg6MX0uc3dpcGVyLWZsaXAgOjpzbG90dGVkKHN3aXBlci1zbGlkZSkgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7cG9pbnRlci1ldmVudHM6bm9uZX0uc3dpcGVyLWZsaXAgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtYWN0aXZlKSwuc3dpcGVyLWZsaXAgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtYWN0aXZlKSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpe3BvaW50ZXItZXZlbnRzOmF1dG99LnN3aXBlci1jcmVhdGl2ZSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO292ZXJmbG93OmhpZGRlbjt0cmFuc2l0aW9uLXByb3BlcnR5OnRyYW5zZm9ybSxvcGFjaXR5LGhlaWdodH0uc3dpcGVyLWNhcmRze292ZXJmbG93OnZpc2libGV9LnN3aXBlci1jYXJkcyA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXt0cmFuc2Zvcm0tb3JpZ2luOmNlbnRlciBib3R0b207LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjtiYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjtvdmVyZmxvdzpoaWRkZW59YDtcbiAgY29uc3QgU3dpcGVyU2xpZGVDU1MgPSBgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93KSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tKSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCksOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0KSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wKXtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwb2ludGVyLWV2ZW50czpub25lO3otaW5kZXg6MTB9OjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93KXtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjE1KX06OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCl7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gbGVmdCxyZ2JhKDAsMCwwLC41KSxyZ2JhKDAsMCwwLDApKX06OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQpe2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LHJnYmEoMCwwLDAsLjUpLHJnYmEoMCwwLDAsMCkpfTo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy10b3Ape2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIHRvcCxyZ2JhKDAsMCwwLC41KSxyZ2JhKDAsMCwwLDApKX06OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tKXtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20scmdiYSgwLDAsMCwuNSkscmdiYSgwLDAsMCwwKSl9LnN3aXBlci1sYXp5LXByZWxvYWRlcnthbmltYXRpb246c3dpcGVyLXByZWxvYWRlci1zcGluIDFzIGluZmluaXRlIGxpbmVhcjt3aWR0aDo0MnB4O2hlaWdodDo0MnB4O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6NTAlO3RvcDo1MCU7bWFyZ2luLWxlZnQ6LTIxcHg7bWFyZ2luLXRvcDotMjFweDt6LWluZGV4OjEwO3RyYW5zZm9ybS1vcmlnaW46NTAlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXI6NHB4IHNvbGlkIHZhcigtLXN3aXBlci1wcmVsb2FkZXItY29sb3IsdmFyKC0tc3dpcGVyLXRoZW1lLWNvbG9yKSk7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyLXRvcC1jb2xvcjp0cmFuc3BhcmVudH1Aa2V5ZnJhbWVzIHN3aXBlci1wcmVsb2FkZXItc3BpbnswJXt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfTEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX06OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctY3ViZS5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSksOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93LWN1YmUuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0KSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctY3ViZS5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0KSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctY3ViZS5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCl7ei1pbmRleDowOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW59OjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93LWZsaXAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20pLDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1mbGlwLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCksOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93LWZsaXAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCksOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93LWZsaXAuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3Ape3otaW5kZXg6MDstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVufTo6c2xvdHRlZCguc3dpcGVyLXpvb20tY29udGFpbmVyKXt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcn06OnNsb3R0ZWQoLnN3aXBlci16b29tLWNvbnRhaW5lcik+Y2FudmFzLDo6c2xvdHRlZCguc3dpcGVyLXpvb20tY29udGFpbmVyKT5pbWcsOjpzbG90dGVkKC5zd2lwZXItem9vbS1jb250YWluZXIpPnN2Z3ttYXgtd2lkdGg6MTAwJTttYXgtaGVpZ2h0OjEwMCU7b2JqZWN0LWZpdDpjb250YWlufWA7XG5cbiAgY2xhc3MgRHVtbXlIVE1MRWxlbWVudCB7fVxuICBjb25zdCBDbGFzc1RvRXh0ZW5kID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIEhUTUxFbGVtZW50ID09PSAndW5kZWZpbmVkJyA/IER1bW15SFRNTEVsZW1lbnQgOiBIVE1MRWxlbWVudDtcbiAgY29uc3QgYXJyb3dTdmcgPSBgPHN2ZyB3aWR0aD1cIjExXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDExIDIwXCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0wLjM4Mjk2IDIwLjA3NjJDMC4xMTE3ODggMTkuODA1IDAuMTExNzg4IDE5LjM2NTQgMC4zODI5NiAxOS4wOTQyTDkuMTk3NTggMTAuMjc5NkwwLjM4Mjk2IDEuNDY0OTdDMC4xMTE3ODggMS4xOTM3OSAwLjExMTc4OCAwLjc1NDEzOCAwLjM4Mjk2IDAuNDgyOTY2QzAuNjU0MTMxIDAuMjExNzk0IDEuMDkzNzkgMC4yMTE3OTQgMS4zNjQ5NiAwLjQ4Mjk2NkwxMC40MzQxIDkuNTUyMTRDMTAuODM1OSA5Ljk1MzkgMTAuODM1OSAxMC42MDUzIDEwLjQzNDEgMTEuMDA3TDEuMzY0OTYgMjAuMDc2MkMxLjA5Mzc5IDIwLjM0NzQgMC42NTQxMzEgMjAuMzQ3NCAwLjM4Mjk2IDIwLjA3NjJaXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiLz48L3N2Zz5cbiAgICBgO1xuICBjb25zdCBhZGRTdHlsZSA9IChzaGFkb3dSb290LCBzdHlsZXMpID0+IHtcbiAgICBpZiAodHlwZW9mIENTU1N0eWxlU2hlZXQgIT09ICd1bmRlZmluZWQnICYmIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzKSB7XG4gICAgICBjb25zdCBzdHlsZVNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcbiAgICAgIHN0eWxlU2hlZXQucmVwbGFjZVN5bmMoc3R5bGVzKTtcbiAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW3N0eWxlU2hlZXRdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZS5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHN0eWxlcztcbiAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbiAgfTtcbiAgY2xhc3MgU3dpcGVyQ29udGFpbmVyIGV4dGVuZHMgQ2xhc3NUb0V4dGVuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coe1xuICAgICAgICBtb2RlOiAnb3BlbidcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IG5leHRCdXR0b25TdmcoKSB7XG4gICAgICByZXR1cm4gYXJyb3dTdmc7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgcHJldkJ1dHRvblN2ZygpIHtcbiAgICAgIHJldHVybiBhcnJvd1N2Zy5yZXBsYWNlKCcvPjwvc3ZnPicsICcgdHJhbnNmb3JtLW9yaWdpbj1cImNlbnRlclwiIHRyYW5zZm9ybT1cInJvdGF0ZSgxODApXCIvPjwvc3ZnPicpO1xuICAgIH1cbiAgICBjc3NTdHlsZXMoKSB7XG4gICAgICByZXR1cm4gW1N3aXBlckNTUyxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIC4uLih0aGlzLmluamVjdFN0eWxlcyAmJiBBcnJheS5pc0FycmF5KHRoaXMuaW5qZWN0U3R5bGVzKSA/IHRoaXMuaW5qZWN0U3R5bGVzIDogW10pXS5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgY3NzTGlua3MoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbmplY3RTdHlsZXNVcmxzIHx8IFtdO1xuICAgIH1cbiAgICBjYWxjU2xpZGVTbG90cygpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTaWRlU2xvdHMgPSB0aGlzLnNsaWRlU2xvdHMgfHwgMDtcbiAgICAgIC8vIHNsaWRlIHNsb3RzXG4gICAgICBjb25zdCBzbGlkZVNsb3RDaGlsZHJlbiA9IFsuLi50aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYFtzbG90Xj1zbGlkZS1dYCldLm1hcChjaGlsZCA9PiB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChjaGlsZC5nZXRBdHRyaWJ1dGUoJ3Nsb3QnKS5zcGxpdCgnc2xpZGUtJylbMV0sIDEwKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zbGlkZVNsb3RzID0gc2xpZGVTbG90Q2hpbGRyZW4ubGVuZ3RoID8gTWF0aC5tYXgoLi4uc2xpZGVTbG90Q2hpbGRyZW4pICsgMSA6IDA7XG4gICAgICBpZiAoIXRoaXMucmVuZGVyZWQpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLnNsaWRlU2xvdHMgPiBjdXJyZW50U2lkZVNsb3RzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBjdXJyZW50U2lkZVNsb3RzOyBpIDwgdGhpcy5zbGlkZVNsb3RzOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBzbGlkZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3dpcGVyLXNsaWRlJyk7XG4gICAgICAgICAgc2xpZGVFbC5zZXRBdHRyaWJ1dGUoJ3BhcnQnLCBgc2xpZGUgc2xpZGUtJHtpICsgMX1gKTtcbiAgICAgICAgICBjb25zdCBzbG90RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzbG90Jyk7XG4gICAgICAgICAgc2xvdEVsLnNldEF0dHJpYnV0ZSgnbmFtZScsIGBzbGlkZS0ke2kgKyAxfWApO1xuICAgICAgICAgIHNsaWRlRWwuYXBwZW5kQ2hpbGQoc2xvdEVsKTtcbiAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLnN3aXBlci13cmFwcGVyJykuYXBwZW5kQ2hpbGQoc2xpZGVFbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zbGlkZVNsb3RzIDwgY3VycmVudFNpZGVTbG90cykge1xuICAgICAgICBjb25zdCBzbGlkZXMgPSB0aGlzLnN3aXBlci5zbGlkZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSBzbGlkZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICBpZiAoaSA+IHRoaXMuc2xpZGVTbG90cykge1xuICAgICAgICAgICAgc2xpZGVzW2ldLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICBpZiAodGhpcy5yZW5kZXJlZCkgcmV0dXJuO1xuICAgICAgdGhpcy5jYWxjU2xpZGVTbG90cygpO1xuXG4gICAgICAvLyBsb2NhbCBzdHlsZXNcbiAgICAgIGxldCBsb2NhbFN0eWxlcyA9IHRoaXMuY3NzU3R5bGVzKCk7XG4gICAgICBpZiAodGhpcy5zbGlkZVNsb3RzID4gMCkge1xuICAgICAgICBsb2NhbFN0eWxlcyA9IGxvY2FsU3R5bGVzLnJlcGxhY2UoLzo6c2xvdHRlZFxcKChbYS16LTAtOS5dKilcXCkvZywgJyQxJyk7XG4gICAgICB9XG4gICAgICBpZiAobG9jYWxTdHlsZXMubGVuZ3RoKSB7XG4gICAgICAgIGFkZFN0eWxlKHRoaXMuc2hhZG93Um9vdCwgbG9jYWxTdHlsZXMpO1xuICAgICAgfVxuICAgICAgdGhpcy5jc3NMaW5rcygpLmZvckVhY2godXJsID0+IHtcbiAgICAgICAgY29uc3QgbGlua0V4aXN0cyA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGBsaW5rW2hyZWY9XCIke3VybH1cIl1gKTtcbiAgICAgICAgaWYgKGxpbmtFeGlzdHMpIHJldHVybjtcbiAgICAgICAgY29uc3QgbGlua0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICBsaW5rRWwucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgICAgICBsaW5rRWwuaHJlZiA9IHVybDtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKGxpbmtFbCk7XG4gICAgICB9KTtcbiAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3N3aXBlcicpO1xuICAgICAgZWwucGFydCA9ICdjb250YWluZXInO1xuXG4gICAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgIGVsLmlubmVySFRNTCA9IGBcbiAgICAgIDxzbG90IG5hbWU9XCJjb250YWluZXItc3RhcnRcIj48L3Nsb3Q+XG4gICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXdyYXBwZXJcIiBwYXJ0PVwid3JhcHBlclwiPlxuICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgICR7QXJyYXkuZnJvbSh7XG4gICAgICBsZW5ndGg6IHRoaXMuc2xpZGVTbG90c1xuICAgIH0pLm1hcCgoXywgaW5kZXgpID0+IGBcbiAgICAgICAgPHN3aXBlci1zbGlkZSBwYXJ0PVwic2xpZGUgc2xpZGUtJHtpbmRleH1cIj5cbiAgICAgICAgICA8c2xvdCBuYW1lPVwic2xpZGUtJHtpbmRleH1cIj48L3Nsb3Q+XG4gICAgICAgIDwvc3dpcGVyLXNsaWRlPlxuICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPHNsb3QgbmFtZT1cImNvbnRhaW5lci1lbmRcIj48L3Nsb3Q+XG4gICAgICAke25lZWRzTmF2aWdhdGlvbih0aGlzLnBhc3NlZFBhcmFtcykgPyBgXG4gICAgICAgIDxkaXYgcGFydD1cImJ1dHRvbi1wcmV2XCIgY2xhc3M9XCJzd2lwZXItYnV0dG9uLXByZXZcIj4ke3RoaXMuY29uc3RydWN0b3IucHJldkJ1dHRvblN2Z308L2Rpdj5cbiAgICAgICAgPGRpdiBwYXJ0PVwiYnV0dG9uLW5leHRcIiBjbGFzcz1cInN3aXBlci1idXR0b24tbmV4dFwiPiR7dGhpcy5jb25zdHJ1Y3Rvci5uZXh0QnV0dG9uU3ZnfTwvZGl2PlxuICAgICAgYCA6ICcnfVxuICAgICAgJHtuZWVkc1BhZ2luYXRpb24odGhpcy5wYXNzZWRQYXJhbXMpID8gYFxuICAgICAgICA8ZGl2IHBhcnQ9XCJwYWdpbmF0aW9uXCIgY2xhc3M9XCJzd2lwZXItcGFnaW5hdGlvblwiPjwvZGl2PlxuICAgICAgYCA6ICcnfVxuICAgICAgJHtuZWVkc1Njcm9sbGJhcih0aGlzLnBhc3NlZFBhcmFtcykgPyBgXG4gICAgICAgIDxkaXYgcGFydD1cInNjcm9sbGJhclwiIGNsYXNzPVwic3dpcGVyLXNjcm9sbGJhclwiPjwvZGl2PlxuICAgICAgYCA6ICcnfVxuICAgIGA7XG4gICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgdGhpcy5yZW5kZXJlZCA9IHRydWU7XG4gICAgfVxuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgY29uc3Qge1xuICAgICAgICBwYXJhbXM6IHN3aXBlclBhcmFtcyxcbiAgICAgICAgcGFzc2VkUGFyYW1zXG4gICAgICB9ID0gZ2V0UGFyYW1zKHRoaXMpO1xuICAgICAgdGhpcy5zd2lwZXJQYXJhbXMgPSBzd2lwZXJQYXJhbXM7XG4gICAgICB0aGlzLnBhc3NlZFBhcmFtcyA9IHBhc3NlZFBhcmFtcztcbiAgICAgIGRlbGV0ZSB0aGlzLnN3aXBlclBhcmFtcy5pbml0O1xuICAgICAgdGhpcy5yZW5kZXIoKTtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICB0aGlzLnN3aXBlciA9IG5ldyBTd2lwZXIodGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXInKSwge1xuICAgICAgICAuLi4oc3dpcGVyUGFyYW1zLnZpcnR1YWwgPyB7fSA6IHtcbiAgICAgICAgICBvYnNlcnZlcjogdHJ1ZSxcbiAgICAgICAgICBvYnNlcnZlU2xpZGVDaGlsZHJlbjogdGhpcy5zbGlkZVNsb3RzID4gMFxuICAgICAgICB9KSxcbiAgICAgICAgLi4uc3dpcGVyUGFyYW1zLFxuICAgICAgICB0b3VjaEV2ZW50c1RhcmdldDogJ2NvbnRhaW5lcicsXG4gICAgICAgIG9uQW55OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIGlmIChuYW1lID09PSAnb2JzZXJ2ZXJVcGRhdGUnKSB7XG4gICAgICAgICAgICBfdGhpcy5jYWxjU2xpZGVTbG90cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBldmVudE5hbWUgPSBzd2lwZXJQYXJhbXMuZXZlbnRzUHJlZml4ID8gYCR7c3dpcGVyUGFyYW1zLmV2ZW50c1ByZWZpeH0ke25hbWUudG9Mb3dlckNhc2UoKX1gIDogbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHtcbiAgICAgICAgICAgIGRldGFpbDogYXJncyxcbiAgICAgICAgICAgIGJ1YmJsZXM6IG5hbWUgIT09ICdoYXNoQ2hhbmdlJyxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQgJiYgdGhpcy5uZXN0ZWQgJiYgdGhpcy5jbG9zZXN0KCdzd2lwZXItc2xpZGUnKSAmJiB0aGlzLmNsb3Nlc3QoJ3N3aXBlci1zbGlkZScpLnN3aXBlckxvb3BNb3ZlRE9NKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmluaXQgPT09IGZhbHNlIHx8IHRoaXMuZ2V0QXR0cmlidXRlKCdpbml0JykgPT09ICdmYWxzZScpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgaWYgKHRoaXMubmVzdGVkICYmIHRoaXMuY2xvc2VzdCgnc3dpcGVyLXNsaWRlJykgJiYgdGhpcy5jbG9zZXN0KCdzd2lwZXItc2xpZGUnKS5zd2lwZXJMb29wTW92ZURPTSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zd2lwZXIgJiYgdGhpcy5zd2lwZXIuZGVzdHJveSkge1xuICAgICAgICB0aGlzLnN3aXBlci5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZVN3aXBlck9uUHJvcENoYW5nZShwcm9wTmFtZSwgcHJvcFZhbHVlKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBhcmFtczogc3dpcGVyUGFyYW1zLFxuICAgICAgICBwYXNzZWRQYXJhbXNcbiAgICAgIH0gPSBnZXRQYXJhbXModGhpcywgcHJvcE5hbWUsIHByb3BWYWx1ZSk7XG4gICAgICB0aGlzLnBhc3NlZFBhcmFtcyA9IHBhc3NlZFBhcmFtcztcbiAgICAgIHRoaXMuc3dpcGVyUGFyYW1zID0gc3dpcGVyUGFyYW1zO1xuICAgICAgaWYgKHRoaXMuc3dpcGVyICYmIHRoaXMuc3dpcGVyLnBhcmFtc1twcm9wTmFtZV0gPT09IHByb3BWYWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB1cGRhdGVTd2lwZXIoe1xuICAgICAgICBzd2lwZXI6IHRoaXMuc3dpcGVyLFxuICAgICAgICBwYXNzZWRQYXJhbXM6IHRoaXMucGFzc2VkUGFyYW1zLFxuICAgICAgICBjaGFuZ2VkUGFyYW1zOiBbYXR0clRvUHJvcChwcm9wTmFtZSldLFxuICAgICAgICAuLi4ocHJvcE5hbWUgPT09ICduYXZpZ2F0aW9uJyAmJiBwYXNzZWRQYXJhbXNbcHJvcE5hbWVdID8ge1xuICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnXG4gICAgICAgIH0gOiB7fSksXG4gICAgICAgIC4uLihwcm9wTmFtZSA9PT0gJ3BhZ2luYXRpb24nICYmIHBhc3NlZFBhcmFtc1twcm9wTmFtZV0gPyB7XG4gICAgICAgICAgcGFnaW5hdGlvbkVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJ1xuICAgICAgICB9IDoge30pLFxuICAgICAgICAuLi4ocHJvcE5hbWUgPT09ICdzY3JvbGxiYXInICYmIHBhc3NlZFBhcmFtc1twcm9wTmFtZV0gPyB7XG4gICAgICAgICAgc2Nyb2xsYmFyRWw6ICcuc3dpcGVyLXNjcm9sbGJhcidcbiAgICAgICAgfSA6IHt9KVxuICAgICAgfSk7XG4gICAgfVxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBwcmV2VmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICAgIGlmIChwcmV2VmFsdWUgPT09ICd0cnVlJyAmJiBuZXdWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBuZXdWYWx1ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTd2lwZXJPblByb3BDaGFuZ2UoYXR0ciwgbmV3VmFsdWUpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgIGNvbnN0IGF0dHJzID0gcGFyYW1zTGlzdC5maWx0ZXIocGFyYW0gPT4gcGFyYW0uaW5jbHVkZXMoJ18nKSkubWFwKHBhcmFtID0+IHBhcmFtLnJlcGxhY2UoL1tBLVpdL2csIHYgPT4gYC0ke3Z9YCkucmVwbGFjZSgnXycsICcnKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIHJldHVybiBhdHRycztcbiAgICB9XG4gIH1cbiAgcGFyYW1zTGlzdC5mb3JFYWNoKHBhcmFtTmFtZSA9PiB7XG4gICAgaWYgKHBhcmFtTmFtZSA9PT0gJ2luaXQnKSByZXR1cm47XG4gICAgcGFyYW1OYW1lID0gcGFyYW1OYW1lLnJlcGxhY2UoJ18nLCAnJyk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN3aXBlckNvbnRhaW5lci5wcm90b3R5cGUsIHBhcmFtTmFtZSwge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucGFzc2VkUGFyYW1zIHx8IHt9KVtwYXJhbU5hbWVdO1xuICAgICAgfSxcbiAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMucGFzc2VkUGFyYW1zKSB0aGlzLnBhc3NlZFBhcmFtcyA9IHt9O1xuICAgICAgICB0aGlzLnBhc3NlZFBhcmFtc1twYXJhbU5hbWVdID0gdmFsdWU7XG4gICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnVwZGF0ZVN3aXBlck9uUHJvcENoYW5nZShwYXJhbU5hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIGNsYXNzIFN3aXBlclNsaWRlIGV4dGVuZHMgQ2xhc3NUb0V4dGVuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coe1xuICAgICAgICBtb2RlOiAnb3BlbidcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICBjb25zdCBsYXp5ID0gdGhpcy5sYXp5IHx8IHRoaXMuZ2V0QXR0cmlidXRlKCdsYXp5JykgPT09ICcnIHx8IHRoaXMuZ2V0QXR0cmlidXRlKCdsYXp5JykgPT09ICd0cnVlJztcbiAgICAgIGFkZFN0eWxlKHRoaXMuc2hhZG93Um9vdCwgU3dpcGVyU2xpZGVDU1MpO1xuICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Nsb3QnKSk7XG4gICAgICBpZiAobGF6eSkge1xuICAgICAgICBjb25zdCBsYXp5RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxhenlEaXYuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLWxhenktcHJlbG9hZGVyJyk7XG4gICAgICAgIGxhenlEaXYucGFydC5hZGQoJ3ByZWxvYWRlcicpO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQobGF6eURpdik7XG4gICAgICB9XG4gICAgfVxuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBjb25zdCByZWdpc3RlciA9ICgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBpZiAoIXdpbmRvdy5jdXN0b21FbGVtZW50cy5nZXQoJ3N3aXBlci1jb250YWluZXInKSkgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnc3dpcGVyLWNvbnRhaW5lcicsIFN3aXBlckNvbnRhaW5lcik7XG4gICAgaWYgKCF3aW5kb3cuY3VzdG9tRWxlbWVudHMuZ2V0KCdzd2lwZXItc2xpZGUnKSkgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnc3dpcGVyLXNsaWRlJywgU3dpcGVyU2xpZGUpO1xuICB9O1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuU3dpcGVyRWxlbWVudFJlZ2lzdGVyUGFyYW1zID0gcGFyYW1zID0+IHtcbiAgICAgIHBhcmFtc0xpc3QucHVzaCguLi5wYXJhbXMpO1xuICAgIH07XG4gIH1cblxuICByZWdpc3RlcigpO1xuXG59KSgpO1xuIiwiLy8gRmxpY2tpdHkuQ2VsbFxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCByZXF1aXJlKCdnZXQtc2l6ZScpICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICB3aW5kb3cuRmxpY2tpdHkgPSB3aW5kb3cuRmxpY2tpdHkgfHwge307XG4gICAgd2luZG93LkZsaWNraXR5LkNlbGwgPSBmYWN0b3J5KCB3aW5kb3cuZ2V0U2l6ZSApO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiBmYWN0b3J5KCBnZXRTaXplICkge1xuXG5jb25zdCBjZWxsQ2xhc3NOYW1lID0gJ2ZsaWNraXR5LWNlbGwnO1xuXG5mdW5jdGlvbiBDZWxsKCBlbGVtICkge1xuICB0aGlzLmVsZW1lbnQgPSBlbGVtO1xuICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCggY2VsbENsYXNzTmFtZSApO1xuXG4gIHRoaXMueCA9IDA7XG4gIHRoaXMudW5zZWxlY3QoKTtcbn1cblxubGV0IHByb3RvID0gQ2VsbC5wcm90b3R5cGU7XG5cbnByb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgLy8gcmVzZXQgc3R5bGVcbiAgdGhpcy51bnNlbGVjdCgpO1xuICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggY2VsbENsYXNzTmFtZSApO1xuICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG59O1xuXG5wcm90by5nZXRTaXplID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc2l6ZSA9IGdldFNpemUoIHRoaXMuZWxlbWVudCApO1xufTtcblxucHJvdG8uc2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1zZWxlY3RlZCcpO1xuICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xufTtcblxucHJvdG8udW5zZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXNlbGVjdGVkJyk7XG4gIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdhcmlhLWhpZGRlbicsICd0cnVlJyApO1xufTtcblxucHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcbn07XG5cbnJldHVybiBDZWxsO1xuXG59ICkgKTtcbiIsIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqXG4gKiBFdkVtaXR0ZXIgdjIuMS4xXG4gKiBMaWwnIGV2ZW50IGVtaXR0ZXJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTIC0gQnJvd3NlcmlmeSwgV2VicGFja1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgIGdsb2JhbC5FdkVtaXR0ZXIgPSBmYWN0b3J5KCk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCkge1xuXG5mdW5jdGlvbiBFdkVtaXR0ZXIoKSB7fVxuXG5sZXQgcHJvdG8gPSBFdkVtaXR0ZXIucHJvdG90eXBlO1xuXG5wcm90by5vbiA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGxpc3RlbmVyICkge1xuICBpZiAoICFldmVudE5hbWUgfHwgIWxpc3RlbmVyICkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gc2V0IGV2ZW50cyBoYXNoXG4gIGxldCBldmVudHMgPSB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIC8vIHNldCBsaXN0ZW5lcnMgYXJyYXlcbiAgbGV0IGxpc3RlbmVycyA9IGV2ZW50c1sgZXZlbnROYW1lIF0gPSBldmVudHNbIGV2ZW50TmFtZSBdIHx8IFtdO1xuICAvLyBvbmx5IGFkZCBvbmNlXG4gIGlmICggIWxpc3RlbmVycy5pbmNsdWRlcyggbGlzdGVuZXIgKSApIHtcbiAgICBsaXN0ZW5lcnMucHVzaCggbGlzdGVuZXIgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8ub25jZSA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGxpc3RlbmVyICkge1xuICBpZiAoICFldmVudE5hbWUgfHwgIWxpc3RlbmVyICkgcmV0dXJuIHRoaXM7XG5cbiAgLy8gYWRkIGV2ZW50XG4gIHRoaXMub24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKTtcbiAgLy8gc2V0IG9uY2UgZmxhZ1xuICAvLyBzZXQgb25jZUV2ZW50cyBoYXNoXG4gIGxldCBvbmNlRXZlbnRzID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge307XG4gIC8vIHNldCBvbmNlTGlzdGVuZXJzIG9iamVjdFxuICBsZXQgb25jZUxpc3RlbmVycyA9IG9uY2VFdmVudHNbIGV2ZW50TmFtZSBdID0gb25jZUV2ZW50c1sgZXZlbnROYW1lIF0gfHwge307XG4gIC8vIHNldCBmbGFnXG4gIG9uY2VMaXN0ZW5lcnNbIGxpc3RlbmVyIF0gPSB0cnVlO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8ub2ZmID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKSB7XG4gIGxldCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzWyBldmVudE5hbWUgXTtcbiAgaWYgKCAhbGlzdGVuZXJzIHx8ICFsaXN0ZW5lcnMubGVuZ3RoICkgcmV0dXJuIHRoaXM7XG5cbiAgbGV0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoIGxpc3RlbmVyICk7XG4gIGlmICggaW5kZXggIT0gLTEgKSB7XG4gICAgbGlzdGVuZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxucHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50TmFtZSwgYXJncyApIHtcbiAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50cyAmJiB0aGlzLl9ldmVudHNbIGV2ZW50TmFtZSBdO1xuICBpZiAoICFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGggKSByZXR1cm4gdGhpcztcblxuICAvLyBjb3B5IG92ZXIgdG8gYXZvaWQgaW50ZXJmZXJlbmNlIGlmIC5vZmYoKSBpbiBsaXN0ZW5lclxuICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoIDAgKTtcbiAgYXJncyA9IGFyZ3MgfHwgW107XG4gIC8vIG9uY2Ugc3R1ZmZcbiAgbGV0IG9uY2VMaXN0ZW5lcnMgPSB0aGlzLl9vbmNlRXZlbnRzICYmIHRoaXMuX29uY2VFdmVudHNbIGV2ZW50TmFtZSBdO1xuXG4gIGZvciAoIGxldCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMgKSB7XG4gICAgbGV0IGlzT25jZSA9IG9uY2VMaXN0ZW5lcnMgJiYgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICBpZiAoIGlzT25jZSApIHtcbiAgICAgIC8vIHJlbW92ZSBsaXN0ZW5lclxuICAgICAgLy8gcmVtb3ZlIGJlZm9yZSB0cmlnZ2VyIHRvIHByZXZlbnQgcmVjdXJzaW9uXG4gICAgICB0aGlzLm9mZiggZXZlbnROYW1lLCBsaXN0ZW5lciApO1xuICAgICAgLy8gdW5zZXQgb25jZSBmbGFnXG4gICAgICBkZWxldGUgb25jZUxpc3RlbmVyc1sgbGlzdGVuZXIgXTtcbiAgICB9XG4gICAgLy8gdHJpZ2dlciBsaXN0ZW5lclxuICAgIGxpc3RlbmVyLmFwcGx5KCB0aGlzLCBhcmdzICk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbnByb3RvLmFsbE9mZiA9IGZ1bmN0aW9uKCkge1xuICBkZWxldGUgdGhpcy5fZXZlbnRzO1xuICBkZWxldGUgdGhpcy5fb25jZUV2ZW50cztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5yZXR1cm4gRXZFbWl0dGVyO1xuXG59ICkgKTtcblxufSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKipcbiAqIEZpenp5IFVJIHV0aWxzIHYzLjAuMFxuICogTUlUIGxpY2Vuc2VcbiAqL1xuXG4oIGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIGdsb2JhbCApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgZ2xvYmFsLmZpenp5VUlVdGlscyA9IGZhY3RvcnkoIGdsb2JhbCApO1xuICB9XG5cbn0oIHRoaXMsIGZ1bmN0aW9uIGZhY3RvcnkoIGdsb2JhbCApIHtcblxubGV0IHV0aWxzID0ge307XG5cbi8vIC0tLS0tIGV4dGVuZCAtLS0tLSAvL1xuXG4vLyBleHRlbmRzIG9iamVjdHNcbnV0aWxzLmV4dGVuZCA9IGZ1bmN0aW9uKCBhLCBiICkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbiggYSwgYiApO1xufTtcblxuLy8gLS0tLS0gbW9kdWxvIC0tLS0tIC8vXG5cbnV0aWxzLm1vZHVsbyA9IGZ1bmN0aW9uKCBudW0sIGRpdiApIHtcbiAgcmV0dXJuICggKCBudW0gJSBkaXYgKSArIGRpdiApICUgZGl2O1xufTtcblxuLy8gLS0tLS0gbWFrZUFycmF5IC0tLS0tIC8vXG5cbi8vIHR1cm4gZWxlbWVudCBvciBub2RlTGlzdCBpbnRvIGFuIGFycmF5XG51dGlscy5tYWtlQXJyYXkgPSBmdW5jdGlvbiggb2JqICkge1xuICAvLyB1c2Ugb2JqZWN0IGlmIGFscmVhZHkgYW4gYXJyYXlcbiAgaWYgKCBBcnJheS5pc0FycmF5KCBvYmogKSApIHJldHVybiBvYmo7XG5cbiAgLy8gcmV0dXJuIGVtcHR5IGFycmF5IGlmIHVuZGVmaW5lZCBvciBudWxsLiAjNlxuICBpZiAoIG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHVuZGVmaW5lZCApIHJldHVybiBbXTtcblxuICBsZXQgaXNBcnJheUxpa2UgPSB0eXBlb2Ygb2JqID09ICdvYmplY3QnICYmIHR5cGVvZiBvYmoubGVuZ3RoID09ICdudW1iZXInO1xuICAvLyBjb252ZXJ0IG5vZGVMaXN0IHRvIGFycmF5XG4gIGlmICggaXNBcnJheUxpa2UgKSByZXR1cm4gWyAuLi5vYmogXTtcblxuICAvLyBhcnJheSBvZiBzaW5nbGUgaW5kZXhcbiAgcmV0dXJuIFsgb2JqIF07XG59O1xuXG4vLyAtLS0tLSByZW1vdmVGcm9tIC0tLS0tIC8vXG5cbnV0aWxzLnJlbW92ZUZyb20gPSBmdW5jdGlvbiggYXJ5LCBvYmogKSB7XG4gIGxldCBpbmRleCA9IGFyeS5pbmRleE9mKCBvYmogKTtcbiAgaWYgKCBpbmRleCAhPSAtMSApIHtcbiAgICBhcnkuc3BsaWNlKCBpbmRleCwgMSApO1xuICB9XG59O1xuXG4vLyAtLS0tLSBnZXRQYXJlbnQgLS0tLS0gLy9cblxudXRpbHMuZ2V0UGFyZW50ID0gZnVuY3Rpb24oIGVsZW0sIHNlbGVjdG9yICkge1xuICB3aGlsZSAoIGVsZW0ucGFyZW50Tm9kZSAmJiBlbGVtICE9IGRvY3VtZW50LmJvZHkgKSB7XG4gICAgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZTtcbiAgICBpZiAoIGVsZW0ubWF0Y2hlcyggc2VsZWN0b3IgKSApIHJldHVybiBlbGVtO1xuICB9XG59O1xuXG4vLyAtLS0tLSBnZXRRdWVyeUVsZW1lbnQgLS0tLS0gLy9cblxuLy8gdXNlIGVsZW1lbnQgYXMgc2VsZWN0b3Igc3RyaW5nXG51dGlscy5nZXRRdWVyeUVsZW1lbnQgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgaWYgKCB0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJyApIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggZWxlbSApO1xuICB9XG4gIHJldHVybiBlbGVtO1xufTtcblxuLy8gLS0tLS0gaGFuZGxlRXZlbnQgLS0tLS0gLy9cblxuLy8gZW5hYmxlIC5vbnR5cGUgdG8gdHJpZ2dlciBmcm9tIC5hZGRFdmVudExpc3RlbmVyKCBlbGVtLCAndHlwZScgKVxudXRpbHMuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIGxldCBtZXRob2QgPSAnb24nICsgZXZlbnQudHlwZTtcbiAgaWYgKCB0aGlzWyBtZXRob2QgXSApIHtcbiAgICB0aGlzWyBtZXRob2QgXSggZXZlbnQgKTtcbiAgfVxufTtcblxuLy8gLS0tLS0gZmlsdGVyRmluZEVsZW1lbnRzIC0tLS0tIC8vXG5cbnV0aWxzLmZpbHRlckZpbmRFbGVtZW50cyA9IGZ1bmN0aW9uKCBlbGVtcywgc2VsZWN0b3IgKSB7XG4gIC8vIG1ha2UgYXJyYXkgb2YgZWxlbXNcbiAgZWxlbXMgPSB1dGlscy5tYWtlQXJyYXkoIGVsZW1zICk7XG5cbiAgcmV0dXJuIGVsZW1zXG4gICAgLy8gY2hlY2sgdGhhdCBlbGVtIGlzIGFuIGFjdHVhbCBlbGVtZW50XG4gICAgLmZpbHRlciggKCBlbGVtICkgPT4gZWxlbSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IClcbiAgICAucmVkdWNlKCAoIGZmRWxlbXMsIGVsZW0gKSA9PiB7XG4gICAgICAvLyBhZGQgZWxlbSBpZiBubyBzZWxlY3RvclxuICAgICAgaWYgKCAhc2VsZWN0b3IgKSB7XG4gICAgICAgIGZmRWxlbXMucHVzaCggZWxlbSApO1xuICAgICAgICByZXR1cm4gZmZFbGVtcztcbiAgICAgIH1cbiAgICAgIC8vIGZpbHRlciAmIGZpbmQgaXRlbXMgaWYgd2UgaGF2ZSBhIHNlbGVjdG9yXG4gICAgICAvLyBmaWx0ZXJcbiAgICAgIGlmICggZWxlbS5tYXRjaGVzKCBzZWxlY3RvciApICkge1xuICAgICAgICBmZkVsZW1zLnB1c2goIGVsZW0gKTtcbiAgICAgIH1cbiAgICAgIC8vIGZpbmQgY2hpbGRyZW5cbiAgICAgIGxldCBjaGlsZEVsZW1zID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCBzZWxlY3RvciApO1xuICAgICAgLy8gY29uY2F0IGNoaWxkRWxlbXMgdG8gZmlsdGVyRm91bmQgYXJyYXlcbiAgICAgIGZmRWxlbXMgPSBmZkVsZW1zLmNvbmNhdCggLi4uY2hpbGRFbGVtcyApO1xuICAgICAgcmV0dXJuIGZmRWxlbXM7XG4gICAgfSwgW10gKTtcbn07XG5cbi8vIC0tLS0tIGRlYm91bmNlTWV0aG9kIC0tLS0tIC8vXG5cbnV0aWxzLmRlYm91bmNlTWV0aG9kID0gZnVuY3Rpb24oIF9jbGFzcywgbWV0aG9kTmFtZSwgdGhyZXNob2xkICkge1xuICB0aHJlc2hvbGQgPSB0aHJlc2hvbGQgfHwgMTAwO1xuICAvLyBvcmlnaW5hbCBtZXRob2RcbiAgbGV0IG1ldGhvZCA9IF9jbGFzcy5wcm90b3R5cGVbIG1ldGhvZE5hbWUgXTtcbiAgbGV0IHRpbWVvdXROYW1lID0gbWV0aG9kTmFtZSArICdUaW1lb3V0JztcblxuICBfY2xhc3MucHJvdG90eXBlWyBtZXRob2ROYW1lIF0gPSBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRpbWVvdXQoIHRoaXNbIHRpbWVvdXROYW1lIF0gKTtcblxuICAgIGxldCBhcmdzID0gYXJndW1lbnRzO1xuICAgIHRoaXNbIHRpbWVvdXROYW1lIF0gPSBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICBtZXRob2QuYXBwbHkoIHRoaXMsIGFyZ3MgKTtcbiAgICAgIGRlbGV0ZSB0aGlzWyB0aW1lb3V0TmFtZSBdO1xuICAgIH0sIHRocmVzaG9sZCApO1xuICB9O1xufTtcblxuLy8gLS0tLS0gZG9jUmVhZHkgLS0tLS0gLy9cblxudXRpbHMuZG9jUmVhZHkgPSBmdW5jdGlvbiggb25Eb2NSZWFkeSApIHtcbiAgbGV0IHJlYWR5U3RhdGUgPSBkb2N1bWVudC5yZWFkeVN0YXRlO1xuICBpZiAoIHJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJyB8fCByZWFkeVN0YXRlID09ICdpbnRlcmFjdGl2ZScgKSB7XG4gICAgLy8gZG8gYXN5bmMgdG8gYWxsb3cgZm9yIG90aGVyIHNjcmlwdHMgdG8gcnVuLiBtZXRhZml6enkvZmxpY2tpdHkjNDQxXG4gICAgc2V0VGltZW91dCggb25Eb2NSZWFkeSApO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgb25Eb2NSZWFkeSApO1xuICB9XG59O1xuXG4vLyAtLS0tLSBodG1sSW5pdCAtLS0tLSAvL1xuXG4vLyBodHRwOi8vYml0Lmx5LzNvWUx1c2NcbnV0aWxzLnRvRGFzaGVkID0gZnVuY3Rpb24oIHN0ciApIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKCAvKC4pKFtBLVpdKS9nLCBmdW5jdGlvbiggbWF0Y2gsICQxLCAkMiApIHtcbiAgICByZXR1cm4gJDEgKyAnLScgKyAkMjtcbiAgfSApLnRvTG93ZXJDYXNlKCk7XG59O1xuXG5sZXQgY29uc29sZSA9IGdsb2JhbC5jb25zb2xlO1xuXG4vLyBhbGxvdyB1c2VyIHRvIGluaXRpYWxpemUgY2xhc3NlcyB2aWEgW2RhdGEtbmFtZXNwYWNlXSBvciAuanMtbmFtZXNwYWNlIGNsYXNzXG4vLyBodG1sSW5pdCggV2lkZ2V0LCAnd2lkZ2V0TmFtZScgKVxuLy8gb3B0aW9ucyBhcmUgcGFyc2VkIGZyb20gZGF0YS1uYW1lc3BhY2Utb3B0aW9uc1xudXRpbHMuaHRtbEluaXQgPSBmdW5jdGlvbiggV2lkZ2V0Q2xhc3MsIG5hbWVzcGFjZSApIHtcbiAgdXRpbHMuZG9jUmVhZHkoIGZ1bmN0aW9uKCkge1xuICAgIGxldCBkYXNoZWROYW1lc3BhY2UgPSB1dGlscy50b0Rhc2hlZCggbmFtZXNwYWNlICk7XG4gICAgbGV0IGRhdGFBdHRyID0gJ2RhdGEtJyArIGRhc2hlZE5hbWVzcGFjZTtcbiAgICBsZXQgZGF0YUF0dHJFbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGBbJHtkYXRhQXR0cn1dYCApO1xuICAgIGxldCBqUXVlcnkgPSBnbG9iYWwualF1ZXJ5O1xuXG4gICAgWyAuLi5kYXRhQXR0ckVsZW1zIF0uZm9yRWFjaCggKCBlbGVtICkgPT4ge1xuICAgICAgbGV0IGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZSggZGF0YUF0dHIgKTtcbiAgICAgIGxldCBvcHRpb25zO1xuICAgICAgdHJ5IHtcbiAgICAgICAgb3B0aW9ucyA9IGF0dHIgJiYgSlNPTi5wYXJzZSggYXR0ciApO1xuICAgICAgfSBjYXRjaCAoIGVycm9yICkge1xuICAgICAgICAvLyBsb2cgZXJyb3IsIGRvIG5vdCBpbml0aWFsaXplXG4gICAgICAgIGlmICggY29uc29sZSApIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCBgRXJyb3IgcGFyc2luZyAke2RhdGFBdHRyfSBvbiAke2VsZW0uY2xhc3NOYW1lfTogJHtlcnJvcn1gICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gaW5pdGlhbGl6ZVxuICAgICAgbGV0IGluc3RhbmNlID0gbmV3IFdpZGdldENsYXNzKCBlbGVtLCBvcHRpb25zICk7XG4gICAgICAvLyBtYWtlIGF2YWlsYWJsZSB2aWEgJCgpLmRhdGEoJ25hbWVzcGFjZScpXG4gICAgICBpZiAoIGpRdWVyeSApIHtcbiAgICAgICAgalF1ZXJ5LmRhdGEoIGVsZW0sIG5hbWVzcGFjZSwgaW5zdGFuY2UgKTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgfSApO1xufTtcblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cbnJldHVybiB1dGlscztcblxufSApICk7XG5cbn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gYWRkLCByZW1vdmUgY2VsbFxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgICByZXF1aXJlKCcuL2NvcmUnKSxcbiAgICAgICAgcmVxdWlyZSgnZml6enktdWktdXRpbHMnKSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgZmFjdG9yeShcbiAgICAgICAgd2luZG93LkZsaWNraXR5LFxuICAgICAgICB3aW5kb3cuZml6enlVSVV0aWxzLFxuICAgICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIGZhY3RvcnkoIEZsaWNraXR5LCB1dGlscyApIHtcblxuLy8gYXBwZW5kIGNlbGxzIHRvIGEgZG9jdW1lbnQgZnJhZ21lbnRcbmZ1bmN0aW9uIGdldENlbGxzRnJhZ21lbnQoIGNlbGxzICkge1xuICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIGNlbGxzLmZvckVhY2goICggY2VsbCApID0+IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjZWxsLmVsZW1lbnQgKSApO1xuICByZXR1cm4gZnJhZ21lbnQ7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGFkZC9yZW1vdmUgY2VsbCBwcm90b3R5cGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxubGV0IHByb3RvID0gRmxpY2tpdHkucHJvdG90eXBlO1xuXG4vKipcbiAqIEluc2VydCwgcHJlcGVuZCwgb3IgYXBwZW5kIGNlbGxzXG4gKiBAcGFyYW0ge1tFbGVtZW50LCBBcnJheSwgTm9kZUxpc3RdfSBlbGVtcyAtIEVsZW1lbnRzIHRvIGluc2VydFxuICogQHBhcmFtIHtJbnRlZ2VyfSBpbmRleCAtIFplcm8tYmFzZWQgbnVtYmVyIHRvIGluc2VydFxuICovXG5wcm90by5pbnNlcnQgPSBmdW5jdGlvbiggZWxlbXMsIGluZGV4ICkge1xuICBsZXQgY2VsbHMgPSB0aGlzLl9tYWtlQ2VsbHMoIGVsZW1zICk7XG4gIGlmICggIWNlbGxzIHx8ICFjZWxscy5sZW5ndGggKSByZXR1cm47XG5cbiAgbGV0IGxlbiA9IHRoaXMuY2VsbHMubGVuZ3RoO1xuICAvLyBkZWZhdWx0IHRvIGFwcGVuZFxuICBpbmRleCA9IGluZGV4ID09PSB1bmRlZmluZWQgPyBsZW4gOiBpbmRleDtcbiAgLy8gYWRkIGNlbGxzIHdpdGggZG9jdW1lbnQgZnJhZ21lbnRcbiAgbGV0IGZyYWdtZW50ID0gZ2V0Q2VsbHNGcmFnbWVudCggY2VsbHMgKTtcbiAgLy8gYXBwZW5kIHRvIHNsaWRlclxuICBsZXQgaXNBcHBlbmQgPSBpbmRleCA9PT0gbGVuO1xuICBpZiAoIGlzQXBwZW5kICkge1xuICAgIHRoaXMuc2xpZGVyLmFwcGVuZENoaWxkKCBmcmFnbWVudCApO1xuICB9IGVsc2Uge1xuICAgIGxldCBpbnNlcnRDZWxsRWxlbWVudCA9IHRoaXMuY2VsbHNbIGluZGV4IF0uZWxlbWVudDtcbiAgICB0aGlzLnNsaWRlci5pbnNlcnRCZWZvcmUoIGZyYWdtZW50LCBpbnNlcnRDZWxsRWxlbWVudCApO1xuICB9XG4gIC8vIGFkZCB0byB0aGlzLmNlbGxzXG4gIGlmICggaW5kZXggPT09IDAgKSB7XG4gICAgLy8gcHJlcGVuZCwgYWRkIHRvIHN0YXJ0XG4gICAgdGhpcy5jZWxscyA9IGNlbGxzLmNvbmNhdCggdGhpcy5jZWxscyApO1xuICB9IGVsc2UgaWYgKCBpc0FwcGVuZCApIHtcbiAgICAvLyBhcHBlbmQsIGFkZCB0byBlbmRcbiAgICB0aGlzLmNlbGxzID0gdGhpcy5jZWxscy5jb25jYXQoIGNlbGxzICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gaW5zZXJ0IGluIHRoaXMuY2VsbHNcbiAgICBsZXQgZW5kQ2VsbHMgPSB0aGlzLmNlbGxzLnNwbGljZSggaW5kZXgsIGxlbiAtIGluZGV4ICk7XG4gICAgdGhpcy5jZWxscyA9IHRoaXMuY2VsbHMuY29uY2F0KCBjZWxscyApLmNvbmNhdCggZW5kQ2VsbHMgKTtcbiAgfVxuXG4gIHRoaXMuX3NpemVDZWxscyggY2VsbHMgKTtcbiAgdGhpcy5jZWxsQ2hhbmdlKCBpbmRleCApO1xuICB0aGlzLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCgpO1xufTtcblxucHJvdG8uYXBwZW5kID0gZnVuY3Rpb24oIGVsZW1zICkge1xuICB0aGlzLmluc2VydCggZWxlbXMsIHRoaXMuY2VsbHMubGVuZ3RoICk7XG59O1xuXG5wcm90by5wcmVwZW5kID0gZnVuY3Rpb24oIGVsZW1zICkge1xuICB0aGlzLmluc2VydCggZWxlbXMsIDAgKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGNlbGxzXG4gKiBAcGFyYW0ge1tFbGVtZW50LCBBcnJheSwgTm9kZUxpc3RdfSBlbGVtcyAtIEVMZW1lbnRzIHRvIHJlbW92ZVxuICovXG5wcm90by5yZW1vdmUgPSBmdW5jdGlvbiggZWxlbXMgKSB7XG4gIGxldCBjZWxscyA9IHRoaXMuZ2V0Q2VsbHMoIGVsZW1zICk7XG4gIGlmICggIWNlbGxzIHx8ICFjZWxscy5sZW5ndGggKSByZXR1cm47XG5cbiAgbGV0IG1pbkNlbGxJbmRleCA9IHRoaXMuY2VsbHMubGVuZ3RoIC0gMTtcbiAgLy8gcmVtb3ZlIGNlbGxzIGZyb20gY29sbGVjdGlvbiAmIERPTVxuICBjZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiB7XG4gICAgY2VsbC5yZW1vdmUoKTtcbiAgICBsZXQgaW5kZXggPSB0aGlzLmNlbGxzLmluZGV4T2YoIGNlbGwgKTtcbiAgICBtaW5DZWxsSW5kZXggPSBNYXRoLm1pbiggaW5kZXgsIG1pbkNlbGxJbmRleCApO1xuICAgIHV0aWxzLnJlbW92ZUZyb20oIHRoaXMuY2VsbHMsIGNlbGwgKTtcbiAgfSApO1xuXG4gIHRoaXMuY2VsbENoYW5nZSggbWluQ2VsbEluZGV4ICk7XG4gIHRoaXMucG9zaXRpb25TbGlkZXJBdFNlbGVjdGVkKCk7XG59O1xuXG4vKipcbiAqIGxvZ2ljIHRvIGJlIHJ1biBhZnRlciBhIGNlbGwncyBzaXplIGNoYW5nZXNcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbSAtIGNlbGwncyBlbGVtZW50XG4gKi9cbnByb3RvLmNlbGxTaXplQ2hhbmdlID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gIGxldCBjZWxsID0gdGhpcy5nZXRDZWxsKCBlbGVtICk7XG4gIGlmICggIWNlbGwgKSByZXR1cm47XG5cbiAgY2VsbC5nZXRTaXplKCk7XG5cbiAgbGV0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKCBjZWxsICk7XG4gIHRoaXMuY2VsbENoYW5nZSggaW5kZXggKTtcbiAgLy8gZG8gbm90IHBvc2l0aW9uIHNsaWRlciBhZnRlciBsYXp5IGxvYWRcbn07XG5cbi8qKlxuICogbG9naWMgYW55IHRpbWUgYSBjZWxsIGlzIGNoYW5nZWQ6IGFkZGVkLCByZW1vdmVkLCBvciBzaXplIGNoYW5nZWRcbiAqIEBwYXJhbSB7SW50ZWdlcn0gY2hhbmdlZENlbGxJbmRleCAtIGluZGV4IG9mIHRoZSBjaGFuZ2VkIGNlbGwsIG9wdGlvbmFsXG4gKi9cbnByb3RvLmNlbGxDaGFuZ2UgPSBmdW5jdGlvbiggY2hhbmdlZENlbGxJbmRleCApIHtcbiAgbGV0IHByZXZTZWxlY3RlZEVsZW0gPSB0aGlzLnNlbGVjdGVkRWxlbWVudDtcbiAgdGhpcy5fcG9zaXRpb25DZWxscyggY2hhbmdlZENlbGxJbmRleCApO1xuICB0aGlzLl91cGRhdGVXcmFwU2hpZnRDZWxscygpO1xuICB0aGlzLnNldEdhbGxlcnlTaXplKCk7XG4gIC8vIHVwZGF0ZSBzZWxlY3RlZEluZGV4LCB0cnkgdG8gbWFpbnRhaW4gcG9zaXRpb24gJiBzZWxlY3QgcHJldmlvdXMgc2VsZWN0ZWQgZWxlbWVudFxuICBsZXQgY2VsbCA9IHRoaXMuZ2V0Q2VsbCggcHJldlNlbGVjdGVkRWxlbSApO1xuICBpZiAoIGNlbGwgKSB0aGlzLnNlbGVjdGVkSW5kZXggPSB0aGlzLmdldENlbGxTbGlkZUluZGV4KCBjZWxsICk7XG4gIHRoaXMuc2VsZWN0ZWRJbmRleCA9IE1hdGgubWluKCB0aGlzLnNsaWRlcy5sZW5ndGggLSAxLCB0aGlzLnNlbGVjdGVkSW5kZXggKTtcblxuICB0aGlzLmVtaXRFdmVudCggJ2NlbGxDaGFuZ2UnLCBbIGNoYW5nZWRDZWxsSW5kZXggXSApO1xuICAvLyBwb3NpdGlvbiBzbGlkZXJcbiAgdGhpcy5zZWxlY3QoIHRoaXMuc2VsZWN0ZWRJbmRleCApO1xufTtcblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG5cbn0se1wiLi9jb3JlXCI6NixcImZpenp5LXVpLXV0aWxzXCI6Mn1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gYW5pbWF0ZVxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCByZXF1aXJlKCdmaXp6eS11aS11dGlscycpICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICB3aW5kb3cuRmxpY2tpdHkgPSB3aW5kb3cuRmxpY2tpdHkgfHwge307XG4gICAgd2luZG93LkZsaWNraXR5LmFuaW1hdGVQcm90b3R5cGUgPSBmYWN0b3J5KCB3aW5kb3cuZml6enlVSVV0aWxzICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIGZhY3RvcnkoIHV0aWxzICkge1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBhbmltYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmxldCBwcm90byA9IHt9O1xuXG5wcm90by5zdGFydEFuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIHRoaXMuaXNBbmltYXRpbmcgKSByZXR1cm47XG5cbiAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gIHRoaXMucmVzdGluZ0ZyYW1lcyA9IDA7XG4gIHRoaXMuYW5pbWF0ZSgpO1xufTtcblxucHJvdG8uYW5pbWF0ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmFwcGx5RHJhZ0ZvcmNlKCk7XG4gIHRoaXMuYXBwbHlTZWxlY3RlZEF0dHJhY3Rpb24oKTtcblxuICBsZXQgcHJldmlvdXNYID0gdGhpcy54O1xuXG4gIHRoaXMuaW50ZWdyYXRlUGh5c2ljcygpO1xuICB0aGlzLnBvc2l0aW9uU2xpZGVyKCk7XG4gIHRoaXMuc2V0dGxlKCBwcmV2aW91c1ggKTtcbiAgLy8gYW5pbWF0ZSBuZXh0IGZyYW1lXG4gIGlmICggdGhpcy5pc0FuaW1hdGluZyApIHJlcXVlc3RBbmltYXRpb25GcmFtZSggKCkgPT4gdGhpcy5hbmltYXRlKCkgKTtcbn07XG5cbnByb3RvLnBvc2l0aW9uU2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gIGxldCB4ID0gdGhpcy54O1xuICAvLyB3cmFwIHBvc2l0aW9uIGFyb3VuZFxuICBpZiAoIHRoaXMuaXNXcmFwcGluZyApIHtcbiAgICB4ID0gdXRpbHMubW9kdWxvKCB4LCB0aGlzLnNsaWRlYWJsZVdpZHRoICkgLSB0aGlzLnNsaWRlYWJsZVdpZHRoO1xuICAgIHRoaXMuc2hpZnRXcmFwQ2VsbHMoIHggKTtcbiAgfVxuXG4gIHRoaXMuc2V0VHJhbnNsYXRlWCggeCwgdGhpcy5pc0FuaW1hdGluZyApO1xuICB0aGlzLmRpc3BhdGNoU2Nyb2xsRXZlbnQoKTtcbn07XG5cbnByb3RvLnNldFRyYW5zbGF0ZVggPSBmdW5jdGlvbiggeCwgaXMzZCApIHtcbiAgeCArPSB0aGlzLmN1cnNvclBvc2l0aW9uO1xuICAvLyByZXZlcnNlIGlmIHJpZ2h0LXRvLWxlZnQgYW5kIHVzaW5nIHRyYW5zZm9ybVxuICBpZiAoIHRoaXMub3B0aW9ucy5yaWdodFRvTGVmdCApIHggPSAteDtcbiAgbGV0IHRyYW5zbGF0ZVggPSB0aGlzLmdldFBvc2l0aW9uVmFsdWUoIHggKTtcbiAgLy8gdXNlIDNEIHRyYW5zZm9ybXMgZm9yIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiBvbiBpT1NcbiAgLy8gYnV0IHVzZSAyRCB3aGVuIHNldHRsZWQsIGZvciBiZXR0ZXIgZm9udC1yZW5kZXJpbmdcbiAgdGhpcy5zbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gaXMzZCA/XG4gICAgYHRyYW5zbGF0ZTNkKCR7dHJhbnNsYXRlWH0sMCwwKWAgOiBgdHJhbnNsYXRlWCgke3RyYW5zbGF0ZVh9KWA7XG59O1xuXG5wcm90by5kaXNwYXRjaFNjcm9sbEV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gIGxldCBmaXJzdFNsaWRlID0gdGhpcy5zbGlkZXNbMF07XG4gIGlmICggIWZpcnN0U2xpZGUgKSByZXR1cm47XG5cbiAgbGV0IHBvc2l0aW9uWCA9IC10aGlzLnggLSBmaXJzdFNsaWRlLnRhcmdldDtcbiAgbGV0IHByb2dyZXNzID0gcG9zaXRpb25YIC8gdGhpcy5zbGlkZXNXaWR0aDtcbiAgdGhpcy5kaXNwYXRjaEV2ZW50KCAnc2Nyb2xsJywgbnVsbCwgWyBwcm9ncmVzcywgcG9zaXRpb25YIF0gKTtcbn07XG5cbnByb3RvLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aGlzLmNlbGxzLmxlbmd0aCApIHJldHVybjtcblxuICB0aGlzLnggPSAtdGhpcy5zZWxlY3RlZFNsaWRlLnRhcmdldDtcbiAgdGhpcy52ZWxvY2l0eSA9IDA7IC8vIHN0b3Agd29iYmxlXG4gIHRoaXMucG9zaXRpb25TbGlkZXIoKTtcbn07XG5cbnByb3RvLmdldFBvc2l0aW9uVmFsdWUgPSBmdW5jdGlvbiggcG9zaXRpb24gKSB7XG4gIGlmICggdGhpcy5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiApIHtcbiAgICAvLyBwZXJjZW50IHBvc2l0aW9uLCByb3VuZCB0byAyIGRpZ2l0cywgbGlrZSAxMi4zNCVcbiAgICByZXR1cm4gKCBNYXRoLnJvdW5kKCAoIHBvc2l0aW9uIC8gdGhpcy5zaXplLmlubmVyV2lkdGggKSAqIDEwMDAwICkgKiAwLjAxICkgKyAnJSc7XG4gIH0gZWxzZSB7XG4gICAgLy8gcGl4ZWwgcG9zaXRpb25pbmdcbiAgICByZXR1cm4gTWF0aC5yb3VuZCggcG9zaXRpb24gKSArICdweCc7XG4gIH1cbn07XG5cbnByb3RvLnNldHRsZSA9IGZ1bmN0aW9uKCBwcmV2aW91c1ggKSB7XG4gIC8vIGtlZXAgdHJhY2sgb2YgZnJhbWVzIHdoZXJlIHggaGFzbid0IG1vdmVkXG4gIGxldCBpc1Jlc3RpbmcgPSAhdGhpcy5pc1BvaW50ZXJEb3duICYmXG4gICAgICBNYXRoLnJvdW5kKCB0aGlzLnggKiAxMDAgKSA9PT0gTWF0aC5yb3VuZCggcHJldmlvdXNYICogMTAwICk7XG4gIGlmICggaXNSZXN0aW5nICkgdGhpcy5yZXN0aW5nRnJhbWVzKys7XG4gIC8vIHN0b3AgYW5pbWF0aW5nIGlmIHJlc3RpbmcgZm9yIDMgb3IgbW9yZSBmcmFtZXNcbiAgaWYgKCB0aGlzLnJlc3RpbmdGcmFtZXMgPiAyICkge1xuICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICBkZWxldGUgdGhpcy5pc0ZyZWVTY3JvbGxpbmc7XG4gICAgLy8gcmVuZGVyIHBvc2l0aW9uIHdpdGggdHJhbnNsYXRlWCB3aGVuIHNldHRsZWRcbiAgICB0aGlzLnBvc2l0aW9uU2xpZGVyKCk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KCAnc2V0dGxlJywgbnVsbCwgWyB0aGlzLnNlbGVjdGVkSW5kZXggXSApO1xuICB9XG59O1xuXG5wcm90by5zaGlmdFdyYXBDZWxscyA9IGZ1bmN0aW9uKCB4ICkge1xuICAvLyBzaGlmdCBiZWZvcmUgY2VsbHNcbiAgbGV0IGJlZm9yZUdhcCA9IHRoaXMuY3Vyc29yUG9zaXRpb24gKyB4O1xuICB0aGlzLl9zaGlmdENlbGxzKCB0aGlzLmJlZm9yZVNoaWZ0Q2VsbHMsIGJlZm9yZUdhcCwgLTEgKTtcbiAgLy8gc2hpZnQgYWZ0ZXIgY2VsbHNcbiAgbGV0IGFmdGVyR2FwID0gdGhpcy5zaXplLmlubmVyV2lkdGggLSAoIHggKyB0aGlzLnNsaWRlYWJsZVdpZHRoICsgdGhpcy5jdXJzb3JQb3NpdGlvbiApO1xuICB0aGlzLl9zaGlmdENlbGxzKCB0aGlzLmFmdGVyU2hpZnRDZWxscywgYWZ0ZXJHYXAsIDEgKTtcbn07XG5cbnByb3RvLl9zaGlmdENlbGxzID0gZnVuY3Rpb24oIGNlbGxzLCBnYXAsIHNoaWZ0ICkge1xuICBjZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiB7XG4gICAgbGV0IGNlbGxTaGlmdCA9IGdhcCA+IDAgPyBzaGlmdCA6IDA7XG4gICAgdGhpcy5fd3JhcFNoaWZ0Q2VsbCggY2VsbCwgY2VsbFNoaWZ0ICk7XG4gICAgZ2FwIC09IGNlbGwuc2l6ZS5vdXRlcldpZHRoO1xuICB9ICk7XG59O1xuXG5wcm90by5fdW5zaGlmdENlbGxzID0gZnVuY3Rpb24oIGNlbGxzICkge1xuICBpZiAoICFjZWxscyB8fCAhY2VsbHMubGVuZ3RoICkgcmV0dXJuO1xuXG4gIGNlbGxzLmZvckVhY2goICggY2VsbCApID0+IHRoaXMuX3dyYXBTaGlmdENlbGwoIGNlbGwsIDAgKSApO1xufTtcblxuLy8gQHBhcmFtIHtJbnRlZ2VyfSBzaGlmdCAtIDAsIDEsIG9yIC0xXG5wcm90by5fd3JhcFNoaWZ0Q2VsbCA9IGZ1bmN0aW9uKCBjZWxsLCBzaGlmdCApIHtcbiAgdGhpcy5fcmVuZGVyQ2VsbFBvc2l0aW9uKCBjZWxsLCBjZWxsLnggKyB0aGlzLnNsaWRlYWJsZVdpZHRoICogc2hpZnQgKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHBoeXNpY3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxucHJvdG8uaW50ZWdyYXRlUGh5c2ljcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnggKz0gdGhpcy52ZWxvY2l0eTtcbiAgdGhpcy52ZWxvY2l0eSAqPSB0aGlzLmdldEZyaWN0aW9uRmFjdG9yKCk7XG59O1xuXG5wcm90by5hcHBseUZvcmNlID0gZnVuY3Rpb24oIGZvcmNlICkge1xuICB0aGlzLnZlbG9jaXR5ICs9IGZvcmNlO1xufTtcblxucHJvdG8uZ2V0RnJpY3Rpb25GYWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIDEgLSB0aGlzLm9wdGlvbnNbIHRoaXMuaXNGcmVlU2Nyb2xsaW5nID8gJ2ZyZWVTY3JvbGxGcmljdGlvbicgOiAnZnJpY3Rpb24nIF07XG59O1xuXG5wcm90by5nZXRSZXN0aW5nUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgLy8gbXkgdGhhbmtzIHRvIFN0ZXZlbiBXaXR0ZW5zLCB3aG8gc2ltcGxpZmllZCB0aGlzIG1hdGggZ3JlYXRseVxuICByZXR1cm4gdGhpcy54ICsgdGhpcy52ZWxvY2l0eSAvICggMSAtIHRoaXMuZ2V0RnJpY3Rpb25GYWN0b3IoKSApO1xufTtcblxucHJvdG8uYXBwbHlEcmFnRm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5pc0RyYWdnYWJsZSB8fCAhdGhpcy5pc1BvaW50ZXJEb3duICkgcmV0dXJuO1xuXG4gIC8vIGNoYW5nZSB0aGUgcG9zaXRpb24gdG8gZHJhZyBwb3NpdGlvbiBieSBhcHBseWluZyBmb3JjZVxuICBsZXQgZHJhZ1ZlbG9jaXR5ID0gdGhpcy5kcmFnWCAtIHRoaXMueDtcbiAgbGV0IGRyYWdGb3JjZSA9IGRyYWdWZWxvY2l0eSAtIHRoaXMudmVsb2NpdHk7XG4gIHRoaXMuYXBwbHlGb3JjZSggZHJhZ0ZvcmNlICk7XG59O1xuXG5wcm90by5hcHBseVNlbGVjdGVkQXR0cmFjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAvLyBkbyBub3QgYXR0cmFjdCBpZiBwb2ludGVyIGRvd24gb3Igbm8gc2xpZGVzXG4gIGxldCBkcmFnRG93biA9IHRoaXMuaXNEcmFnZ2FibGUgJiYgdGhpcy5pc1BvaW50ZXJEb3duO1xuICBpZiAoIGRyYWdEb3duIHx8IHRoaXMuaXNGcmVlU2Nyb2xsaW5nIHx8ICF0aGlzLnNsaWRlcy5sZW5ndGggKSByZXR1cm47XG5cbiAgbGV0IGRpc3RhbmNlID0gdGhpcy5zZWxlY3RlZFNsaWRlLnRhcmdldCAqIC0xIC0gdGhpcy54O1xuICBsZXQgZm9yY2UgPSBkaXN0YW5jZSAqIHRoaXMub3B0aW9ucy5zZWxlY3RlZEF0dHJhY3Rpb247XG4gIHRoaXMuYXBwbHlGb3JjZSggZm9yY2UgKTtcbn07XG5cbnJldHVybiBwcm90bztcblxufSApICk7XG5cbn0se1wiZml6enktdWktdXRpbHNcIjoyfV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vLyBGbGlja2l0eS5DZWxsXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJ2dldC1zaXplJykgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5GbGlja2l0eSA9IHdpbmRvdy5GbGlja2l0eSB8fCB7fTtcbiAgICB3aW5kb3cuRmxpY2tpdHkuQ2VsbCA9IGZhY3RvcnkoIHdpbmRvdy5nZXRTaXplICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIGZhY3RvcnkoIGdldFNpemUgKSB7XG5cbmNvbnN0IGNlbGxDbGFzc05hbWUgPSAnZmxpY2tpdHktY2VsbCc7XG5cbmZ1bmN0aW9uIENlbGwoIGVsZW0gKSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW07XG4gIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCBjZWxsQ2xhc3NOYW1lICk7XG5cbiAgdGhpcy54ID0gMDtcbiAgdGhpcy51bnNlbGVjdCgpO1xufVxuXG5sZXQgcHJvdG8gPSBDZWxsLnByb3RvdHlwZTtcblxucHJvdG8uZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAvLyByZXNldCBzdHlsZVxuICB0aGlzLnVuc2VsZWN0KCk7XG4gIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCBjZWxsQ2xhc3NOYW1lICk7XG4gIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcbn07XG5cbnByb3RvLmdldFNpemUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zaXplID0gZ2V0U2l6ZSggdGhpcy5lbGVtZW50ICk7XG59O1xuXG5wcm90by5zZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2lzLXNlbGVjdGVkJyk7XG4gIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG59O1xuXG5wcm90by51bnNlbGVjdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtc2VsZWN0ZWQnKTtcbiAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSggJ2FyaWEtaGlkZGVuJywgJ3RydWUnICk7XG59O1xuXG5wcm90by5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xufTtcblxucmV0dXJuIENlbGw7XG5cbn0gKSApO1xuXG59LHtcImdldC1zaXplXCI6MTV9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIEZsaWNraXR5IG1haW5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1wYXJhbXMgKi9cbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgICAgd2luZG93LFxuICAgICAgICByZXF1aXJlKCdldi1lbWl0dGVyJyksXG4gICAgICAgIHJlcXVpcmUoJ2dldC1zaXplJyksXG4gICAgICAgIHJlcXVpcmUoJ2Zpenp5LXVpLXV0aWxzJyksXG4gICAgICAgIHJlcXVpcmUoJy4vY2VsbCcpLFxuICAgICAgICByZXF1aXJlKCcuL3NsaWRlJyksXG4gICAgICAgIHJlcXVpcmUoJy4vYW5pbWF0ZScpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICBsZXQgX0ZsaWNraXR5ID0gd2luZG93LkZsaWNraXR5O1xuXG4gICAgd2luZG93LkZsaWNraXR5ID0gZmFjdG9yeShcbiAgICAgICAgd2luZG93LFxuICAgICAgICB3aW5kb3cuRXZFbWl0dGVyLFxuICAgICAgICB3aW5kb3cuZ2V0U2l6ZSxcbiAgICAgICAgd2luZG93LmZpenp5VUlVdGlscyxcbiAgICAgICAgX0ZsaWNraXR5LkNlbGwsXG4gICAgICAgIF9GbGlja2l0eS5TbGlkZSxcbiAgICAgICAgX0ZsaWNraXR5LmFuaW1hdGVQcm90b3R5cGUsXG4gICAgKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcyxcbiAgICBmdW5jdGlvbiBmYWN0b3J5KCB3aW5kb3csIEV2RW1pdHRlciwgZ2V0U2l6ZSwgdXRpbHMsIENlbGwsIFNsaWRlLCBhbmltYXRlUHJvdG90eXBlICkge1xuLyogZXNsaW50LWVuYWJsZSBtYXgtcGFyYW1zICovXG5cbi8vIHZhcnNcbmNvbnN0IHsgZ2V0Q29tcHV0ZWRTdHlsZSwgY29uc29sZSB9ID0gd2luZG93O1xubGV0IHsgalF1ZXJ5IH0gPSB3aW5kb3c7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEZsaWNraXR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8vIGdsb2JhbGx5IHVuaXF1ZSBpZGVudGlmaWVyc1xubGV0IEdVSUQgPSAwO1xuLy8gaW50ZXJuYWwgc3RvcmUgb2YgYWxsIEZsaWNraXR5IGludGFuY2VzXG5sZXQgaW5zdGFuY2VzID0ge307XG5cbmZ1bmN0aW9uIEZsaWNraXR5KCBlbGVtZW50LCBvcHRpb25zICkge1xuICBsZXQgcXVlcnlFbGVtZW50ID0gdXRpbHMuZ2V0UXVlcnlFbGVtZW50KCBlbGVtZW50ICk7XG4gIGlmICggIXF1ZXJ5RWxlbWVudCApIHtcbiAgICBpZiAoIGNvbnNvbGUgKSBjb25zb2xlLmVycm9yKGBCYWQgZWxlbWVudCBmb3IgRmxpY2tpdHk6ICR7cXVlcnlFbGVtZW50IHx8IGVsZW1lbnR9YCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuZWxlbWVudCA9IHF1ZXJ5RWxlbWVudDtcbiAgLy8gZG8gbm90IGluaXRpYWxpemUgdHdpY2Ugb24gc2FtZSBlbGVtZW50XG4gIGlmICggdGhpcy5lbGVtZW50LmZsaWNraXR5R1VJRCApIHtcbiAgICBsZXQgaW5zdGFuY2UgPSBpbnN0YW5jZXNbIHRoaXMuZWxlbWVudC5mbGlja2l0eUdVSUQgXTtcbiAgICBpZiAoIGluc3RhbmNlICkgaW5zdGFuY2Uub3B0aW9uKCBvcHRpb25zICk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9XG5cbiAgLy8gYWRkIGpRdWVyeVxuICBpZiAoIGpRdWVyeSApIHtcbiAgICB0aGlzLiRlbGVtZW50ID0galF1ZXJ5KCB0aGlzLmVsZW1lbnQgKTtcbiAgfVxuICAvLyBvcHRpb25zXG4gIHRoaXMub3B0aW9ucyA9IHsgLi4udGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0cyB9O1xuICB0aGlzLm9wdGlvbiggb3B0aW9ucyApO1xuXG4gIC8vIGtpY2sgdGhpbmdzIG9mZlxuICB0aGlzLl9jcmVhdGUoKTtcbn1cblxuRmxpY2tpdHkuZGVmYXVsdHMgPSB7XG4gIGFjY2Vzc2liaWxpdHk6IHRydWUsXG4gIC8vIGFkYXB0aXZlSGVpZ2h0OiBmYWxzZSxcbiAgY2VsbEFsaWduOiAnY2VudGVyJyxcbiAgLy8gY2VsbFNlbGVjdG9yOiB1bmRlZmluZWQsXG4gIC8vIGNvbnRhaW46IGZhbHNlLFxuICBmcmVlU2Nyb2xsRnJpY3Rpb246IDAuMDc1LCAvLyBmcmljdGlvbiB3aGVuIGZyZWUtc2Nyb2xsaW5nXG4gIGZyaWN0aW9uOiAwLjI4LCAvLyBmcmljdGlvbiB3aGVuIHNlbGVjdGluZ1xuICBuYW1lc3BhY2VKUXVlcnlFdmVudHM6IHRydWUsXG4gIC8vIGluaXRpYWxJbmRleDogMCxcbiAgcGVyY2VudFBvc2l0aW9uOiB0cnVlLFxuICByZXNpemU6IHRydWUsXG4gIHNlbGVjdGVkQXR0cmFjdGlvbjogMC4wMjUsXG4gIHNldEdhbGxlcnlTaXplOiB0cnVlLFxuICAvLyB3YXRjaENTUzogZmFsc2UsXG4gIC8vIHdyYXBBcm91bmQ6IGZhbHNlXG59O1xuXG4vLyBoYXNoIG9mIG1ldGhvZHMgdHJpZ2dlcmVkIG9uIF9jcmVhdGUoKVxuRmxpY2tpdHkuY3JlYXRlID0ge307XG5cbmxldCBwcm90byA9IEZsaWNraXR5LnByb3RvdHlwZTtcbi8vIGluaGVyaXQgRXZlbnRFbWl0dGVyXG5PYmplY3QuYXNzaWduKCBwcm90bywgRXZFbWl0dGVyLnByb3RvdHlwZSApO1xuXG5wcm90by5fY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gIGxldCB7IHJlc2l6ZSwgd2F0Y2hDU1MsIHJpZ2h0VG9MZWZ0IH0gPSB0aGlzLm9wdGlvbnM7XG4gIC8vIGFkZCBpZCBmb3IgRmxpY2tpdHkuZGF0YVxuICBsZXQgaWQgPSB0aGlzLmd1aWQgPSArK0dVSUQ7XG4gIHRoaXMuZWxlbWVudC5mbGlja2l0eUdVSUQgPSBpZDsgLy8gZXhwYW5kb1xuICBpbnN0YW5jZXNbIGlkIF0gPSB0aGlzOyAvLyBhc3NvY2lhdGUgdmlhIGlkXG4gIC8vIGluaXRpYWwgcHJvcGVydGllc1xuICB0aGlzLnNlbGVjdGVkSW5kZXggPSAwO1xuICAvLyBob3cgbWFueSBmcmFtZXMgc2xpZGVyIGhhcyBiZWVuIGluIHNhbWUgcG9zaXRpb25cbiAgdGhpcy5yZXN0aW5nRnJhbWVzID0gMDtcbiAgLy8gaW5pdGlhbCBwaHlzaWNzIHByb3BlcnRpZXNcbiAgdGhpcy54ID0gMDtcbiAgdGhpcy52ZWxvY2l0eSA9IDA7XG4gIHRoaXMuYmVnaW5NYXJnaW4gPSByaWdodFRvTGVmdCA/ICdtYXJnaW5SaWdodCcgOiAnbWFyZ2luTGVmdCc7XG4gIHRoaXMuZW5kTWFyZ2luID0gcmlnaHRUb0xlZnQgPyAnbWFyZ2luTGVmdCcgOiAnbWFyZ2luUmlnaHQnO1xuICAvLyBjcmVhdGUgdmlld3BvcnQgJiBzbGlkZXJcbiAgdGhpcy52aWV3cG9ydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0aGlzLnZpZXdwb3J0LmNsYXNzTmFtZSA9ICdmbGlja2l0eS12aWV3cG9ydCc7XG4gIHRoaXMuX2NyZWF0ZVNsaWRlcigpO1xuICAvLyB1c2VkIGZvciBrZXlib2FyZCBuYXZpZ2F0aW9uXG4gIHRoaXMuZm9jdXNhYmxlRWxlbXMgPSBbIHRoaXMuZWxlbWVudCBdO1xuXG4gIGlmICggcmVzaXplIHx8IHdhdGNoQ1NTICkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAncmVzaXplJywgdGhpcyApO1xuICB9XG5cbiAgLy8gYWRkIGxpc3RlbmVycyBmcm9tIG9uIG9wdGlvblxuICBmb3IgKCBsZXQgZXZlbnROYW1lIGluIHRoaXMub3B0aW9ucy5vbiApIHtcbiAgICBsZXQgbGlzdGVuZXIgPSB0aGlzLm9wdGlvbnMub25bIGV2ZW50TmFtZSBdO1xuICAgIHRoaXMub24oIGV2ZW50TmFtZSwgbGlzdGVuZXIgKTtcbiAgfVxuXG4gIGZvciAoIGxldCBtZXRob2QgaW4gRmxpY2tpdHkuY3JlYXRlICkge1xuICAgIEZsaWNraXR5LmNyZWF0ZVsgbWV0aG9kIF0uY2FsbCggdGhpcyApO1xuICB9XG5cbiAgaWYgKCB3YXRjaENTUyApIHtcbiAgICB0aGlzLndhdGNoQ1NTKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5hY3RpdmF0ZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIHNldCBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gZXh0ZW5kXG4gKi9cbnByb3RvLm9wdGlvbiA9IGZ1bmN0aW9uKCBvcHRzICkge1xuICBPYmplY3QuYXNzaWduKCB0aGlzLm9wdGlvbnMsIG9wdHMgKTtcbn07XG5cbnByb3RvLmFjdGl2YXRlID0gZnVuY3Rpb24oKSB7XG4gIGlmICggdGhpcy5pc0FjdGl2ZSApIHJldHVybjtcblxuICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZsaWNraXR5LWVuYWJsZWQnKTtcbiAgaWYgKCB0aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQgKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZsaWNraXR5LXJ0bCcpO1xuICB9XG5cbiAgdGhpcy5nZXRTaXplKCk7XG4gIC8vIG1vdmUgaW5pdGlhbCBjZWxsIGVsZW1lbnRzIHNvIHRoZXkgY2FuIGJlIGxvYWRlZCBhcyBjZWxsc1xuICBsZXQgY2VsbEVsZW1zID0gdGhpcy5fZmlsdGVyRmluZENlbGxFbGVtZW50cyggdGhpcy5lbGVtZW50LmNoaWxkcmVuICk7XG4gIHRoaXMuc2xpZGVyLmFwcGVuZCggLi4uY2VsbEVsZW1zICk7XG4gIHRoaXMudmlld3BvcnQuYXBwZW5kKCB0aGlzLnNsaWRlciApO1xuICB0aGlzLmVsZW1lbnQuYXBwZW5kKCB0aGlzLnZpZXdwb3J0ICk7XG4gIC8vIGdldCBjZWxscyBmcm9tIGNoaWxkcmVuXG4gIHRoaXMucmVsb2FkQ2VsbHMoKTtcblxuICBpZiAoIHRoaXMub3B0aW9ucy5hY2Nlc3NpYmlsaXR5ICkge1xuICAgIC8vIGFsbG93IGVsZW1lbnQgdG8gZm9jdXNhYmxlXG4gICAgdGhpcy5lbGVtZW50LnRhYkluZGV4ID0gMDtcbiAgICAvLyBsaXN0ZW4gZm9yIGtleSBwcmVzc2VzXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgdGhpcyApO1xuICB9XG5cbiAgdGhpcy5lbWl0RXZlbnQoJ2FjdGl2YXRlJyk7XG4gIHRoaXMuc2VsZWN0SW5pdGlhbEluZGV4KCk7XG4gIC8vIGZsYWcgZm9yIGluaXRpYWwgYWN0aXZhdGlvbiwgZm9yIHVzaW5nIGluaXRpYWxJbmRleFxuICB0aGlzLmlzSW5pdEFjdGl2YXRlZCA9IHRydWU7XG4gIC8vIHJlYWR5IGV2ZW50LiAjNDkzXG4gIHRoaXMuZGlzcGF0Y2hFdmVudCgncmVhZHknKTtcbn07XG5cbi8vIHNsaWRlciBwb3NpdGlvbnMgdGhlIGNlbGxzXG5wcm90by5fY3JlYXRlU2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gIC8vIHNsaWRlciBlbGVtZW50IGRvZXMgYWxsIHRoZSBwb3NpdGlvbmluZ1xuICBsZXQgc2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHNsaWRlci5jbGFzc05hbWUgPSAnZmxpY2tpdHktc2xpZGVyJztcbiAgdGhpcy5zbGlkZXIgPSBzbGlkZXI7XG59O1xuXG5wcm90by5fZmlsdGVyRmluZENlbGxFbGVtZW50cyA9IGZ1bmN0aW9uKCBlbGVtcyApIHtcbiAgcmV0dXJuIHV0aWxzLmZpbHRlckZpbmRFbGVtZW50cyggZWxlbXMsIHRoaXMub3B0aW9ucy5jZWxsU2VsZWN0b3IgKTtcbn07XG5cbi8vIGdvZXMgdGhyb3VnaCBhbGwgY2hpbGRyZW5cbnByb3RvLnJlbG9hZENlbGxzID0gZnVuY3Rpb24oKSB7XG4gIC8vIGNvbGxlY3Rpb24gb2YgaXRlbSBlbGVtZW50c1xuICB0aGlzLmNlbGxzID0gdGhpcy5fbWFrZUNlbGxzKCB0aGlzLnNsaWRlci5jaGlsZHJlbiApO1xuICB0aGlzLnBvc2l0aW9uQ2VsbHMoKTtcbiAgdGhpcy5fdXBkYXRlV3JhcFNoaWZ0Q2VsbHMoKTtcbiAgdGhpcy5zZXRHYWxsZXJ5U2l6ZSgpO1xufTtcblxuLyoqXG4gKiB0dXJuIGVsZW1lbnRzIGludG8gRmxpY2tpdHkuQ2VsbHNcbiAqIEBwYXJhbSB7W0FycmF5LCBOb2RlTGlzdCwgSFRNTEVsZW1lbnRdfSBlbGVtcyAtIGVsZW1lbnRzIHRvIG1ha2UgaW50byBjZWxsc1xuICogQHJldHVybnMge0FycmF5fSBpdGVtcyAtIGNvbGxlY3Rpb24gb2YgbmV3IEZsaWNraXR5IENlbGxzXG4gKi9cbnByb3RvLl9tYWtlQ2VsbHMgPSBmdW5jdGlvbiggZWxlbXMgKSB7XG4gIGxldCBjZWxsRWxlbXMgPSB0aGlzLl9maWx0ZXJGaW5kQ2VsbEVsZW1lbnRzKCBlbGVtcyApO1xuXG4gIC8vIGNyZWF0ZSBuZXcgQ2VsbHMgZm9yIGNvbGxlY3Rpb25cbiAgcmV0dXJuIGNlbGxFbGVtcy5tYXAoICggY2VsbEVsZW0gKSA9PiBuZXcgQ2VsbCggY2VsbEVsZW0gKSApO1xufTtcblxucHJvdG8uZ2V0TGFzdENlbGwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2VsbHNbIHRoaXMuY2VsbHMubGVuZ3RoIC0gMSBdO1xufTtcblxucHJvdG8uZ2V0TGFzdFNsaWRlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnNsaWRlc1sgdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSBdO1xufTtcblxuLy8gcG9zaXRpb25zIGFsbCBjZWxsc1xucHJvdG8ucG9zaXRpb25DZWxscyA9IGZ1bmN0aW9uKCkge1xuICAvLyBzaXplIGFsbCBjZWxsc1xuICB0aGlzLl9zaXplQ2VsbHMoIHRoaXMuY2VsbHMgKTtcbiAgLy8gcG9zaXRpb24gYWxsIGNlbGxzXG4gIHRoaXMuX3Bvc2l0aW9uQ2VsbHMoIDAgKTtcbn07XG5cbi8qKlxuICogcG9zaXRpb24gY2VydGFpbiBjZWxsc1xuICogQHBhcmFtIHtJbnRlZ2VyfSBpbmRleCAtIHdoaWNoIGNlbGwgdG8gc3RhcnQgd2l0aFxuICovXG5wcm90by5fcG9zaXRpb25DZWxscyA9IGZ1bmN0aW9uKCBpbmRleCApIHtcbiAgaW5kZXggPSBpbmRleCB8fCAwO1xuICAvLyBhbHNvIG1lYXN1cmUgbWF4Q2VsbEhlaWdodFxuICAvLyBzdGFydCAwIGlmIHBvc2l0aW9uaW5nIGFsbCBjZWxsc1xuICB0aGlzLm1heENlbGxIZWlnaHQgPSBpbmRleCA/IHRoaXMubWF4Q2VsbEhlaWdodCB8fCAwIDogMDtcbiAgbGV0IGNlbGxYID0gMDtcbiAgLy8gZ2V0IGNlbGxYXG4gIGlmICggaW5kZXggPiAwICkge1xuICAgIGxldCBzdGFydENlbGwgPSB0aGlzLmNlbGxzWyBpbmRleCAtIDEgXTtcbiAgICBjZWxsWCA9IHN0YXJ0Q2VsbC54ICsgc3RhcnRDZWxsLnNpemUub3V0ZXJXaWR0aDtcbiAgfVxuXG4gIHRoaXMuY2VsbHMuc2xpY2UoIGluZGV4ICkuZm9yRWFjaCggKCBjZWxsICkgPT4ge1xuICAgIGNlbGwueCA9IGNlbGxYO1xuICAgIHRoaXMuX3JlbmRlckNlbGxQb3NpdGlvbiggY2VsbCwgY2VsbFggKTtcbiAgICBjZWxsWCArPSBjZWxsLnNpemUub3V0ZXJXaWR0aDtcbiAgICB0aGlzLm1heENlbGxIZWlnaHQgPSBNYXRoLm1heCggY2VsbC5zaXplLm91dGVySGVpZ2h0LCB0aGlzLm1heENlbGxIZWlnaHQgKTtcbiAgfSApO1xuICAvLyBrZWVwIHRyYWNrIG9mIGNlbGxYIGZvciB3cmFwLWFyb3VuZFxuICB0aGlzLnNsaWRlYWJsZVdpZHRoID0gY2VsbFg7XG4gIC8vIHNsaWRlc1xuICB0aGlzLnVwZGF0ZVNsaWRlcygpO1xuICAvLyBjb250YWluIHNsaWRlcyB0YXJnZXRcbiAgdGhpcy5fY29udGFpblNsaWRlcygpO1xuICAvLyB1cGRhdGUgc2xpZGVzV2lkdGhcbiAgdGhpcy5zbGlkZXNXaWR0aCA9IHRoaXMuY2VsbHMubGVuZ3RoID9cbiAgICB0aGlzLmdldExhc3RTbGlkZSgpLnRhcmdldCAtIHRoaXMuc2xpZGVzWzBdLnRhcmdldCA6IDA7XG59O1xuXG5wcm90by5fcmVuZGVyQ2VsbFBvc2l0aW9uID0gZnVuY3Rpb24oIGNlbGwsIHggKSB7XG4gIC8vIHJlbmRlciBwb3NpdGlvbiBvZiBjZWxsIHdpdGggaW4gc2xpZGVyXG4gIGxldCBzaWRlT2Zmc2V0ID0gdGhpcy5vcHRpb25zLnJpZ2h0VG9MZWZ0ID8gLTEgOiAxO1xuICBsZXQgcmVuZGVyWCA9IHggKiBzaWRlT2Zmc2V0O1xuICBpZiAoIHRoaXMub3B0aW9ucy5wZXJjZW50UG9zaXRpb24gKSByZW5kZXJYICo9IHRoaXMuc2l6ZS5pbm5lcldpZHRoIC8gY2VsbC5zaXplLndpZHRoO1xuICBsZXQgcG9zaXRpb25WYWx1ZSA9IHRoaXMuZ2V0UG9zaXRpb25WYWx1ZSggcmVuZGVyWCApO1xuICBjZWxsLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoICR7cG9zaXRpb25WYWx1ZX0gKWA7XG59O1xuXG4vKipcbiAqIGNlbGwuZ2V0U2l6ZSgpIG9uIG11bHRpcGxlIGNlbGxzXG4gKiBAcGFyYW0ge0FycmF5fSBjZWxscyAtIGNlbGxzIHRvIHNpemVcbiAqL1xucHJvdG8uX3NpemVDZWxscyA9IGZ1bmN0aW9uKCBjZWxscyApIHtcbiAgY2VsbHMuZm9yRWFjaCggKCBjZWxsICkgPT4gY2VsbC5nZXRTaXplKCkgKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5wcm90by51cGRhdGVTbGlkZXMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zbGlkZXMgPSBbXTtcbiAgaWYgKCAhdGhpcy5jZWxscy5sZW5ndGggKSByZXR1cm47XG5cbiAgbGV0IHsgYmVnaW5NYXJnaW4sIGVuZE1hcmdpbiB9ID0gdGhpcztcbiAgbGV0IHNsaWRlID0gbmV3IFNsaWRlKCBiZWdpbk1hcmdpbiwgZW5kTWFyZ2luLCB0aGlzLmNlbGxBbGlnbiApO1xuICB0aGlzLnNsaWRlcy5wdXNoKCBzbGlkZSApO1xuXG4gIGxldCBjYW5DZWxsRml0ID0gdGhpcy5fZ2V0Q2FuQ2VsbEZpdCgpO1xuXG4gIHRoaXMuY2VsbHMuZm9yRWFjaCggKCBjZWxsLCBpICkgPT4ge1xuICAgIC8vIGp1c3QgYWRkIGNlbGwgaWYgZmlyc3QgY2VsbCBpbiBzbGlkZVxuICAgIGlmICggIXNsaWRlLmNlbGxzLmxlbmd0aCApIHtcbiAgICAgIHNsaWRlLmFkZENlbGwoIGNlbGwgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgc2xpZGVXaWR0aCA9ICggc2xpZGUub3V0ZXJXaWR0aCAtIHNsaWRlLmZpcnN0TWFyZ2luICkgK1xuICAgICAgKCBjZWxsLnNpemUub3V0ZXJXaWR0aCAtIGNlbGwuc2l6ZVsgZW5kTWFyZ2luIF0gKTtcblxuICAgIGlmICggY2FuQ2VsbEZpdCggaSwgc2xpZGVXaWR0aCApICkge1xuICAgICAgc2xpZGUuYWRkQ2VsbCggY2VsbCApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2Vzbid0IGZpdCwgbmV3IHNsaWRlXG4gICAgICBzbGlkZS51cGRhdGVUYXJnZXQoKTtcblxuICAgICAgc2xpZGUgPSBuZXcgU2xpZGUoIGJlZ2luTWFyZ2luLCBlbmRNYXJnaW4sIHRoaXMuY2VsbEFsaWduICk7XG4gICAgICB0aGlzLnNsaWRlcy5wdXNoKCBzbGlkZSApO1xuICAgICAgc2xpZGUuYWRkQ2VsbCggY2VsbCApO1xuICAgIH1cbiAgfSApO1xuICAvLyBsYXN0IHNsaWRlXG4gIHNsaWRlLnVwZGF0ZVRhcmdldCgpO1xuICAvLyB1cGRhdGUgLnNlbGVjdGVkU2xpZGVcbiAgdGhpcy51cGRhdGVTZWxlY3RlZFNsaWRlKCk7XG59O1xuXG5wcm90by5fZ2V0Q2FuQ2VsbEZpdCA9IGZ1bmN0aW9uKCkge1xuICBsZXQgeyBncm91cENlbGxzIH0gPSB0aGlzLm9wdGlvbnM7XG4gIGlmICggIWdyb3VwQ2VsbHMgKSByZXR1cm4gKCkgPT4gZmFsc2U7XG5cbiAgaWYgKCB0eXBlb2YgZ3JvdXBDZWxscyA9PSAnbnVtYmVyJyApIHtcbiAgICAvLyBncm91cCBieSBudW1iZXIuIDMgLT4gWzAsMSwyXSwgWzMsNCw1XSwgLi4uXG4gICAgbGV0IG51bWJlciA9IHBhcnNlSW50KCBncm91cENlbGxzLCAxMCApO1xuICAgIHJldHVybiAoIGkgKSA9PiAoIGkgJSBudW1iZXIgKSAhPT0gMDtcbiAgfVxuICAvLyBkZWZhdWx0LCBncm91cCBieSB3aWR0aCBvZiBzbGlkZVxuICBsZXQgcGVyY2VudCA9IDE7XG4gIC8vIHBhcnNlICc3NSVcbiAgbGV0IHBlcmNlbnRNYXRjaCA9IHR5cGVvZiBncm91cENlbGxzID09ICdzdHJpbmcnICYmIGdyb3VwQ2VsbHMubWF0Y2goIC9eKFxcZCspJSQvICk7XG4gIGlmICggcGVyY2VudE1hdGNoICkgcGVyY2VudCA9IHBhcnNlSW50KCBwZXJjZW50TWF0Y2hbMV0sIDEwICkgLyAxMDA7XG4gIGxldCBncm91cFdpZHRoID0gKCB0aGlzLnNpemUuaW5uZXJXaWR0aCArIDEgKSAqIHBlcmNlbnQ7XG4gIHJldHVybiAoIGksIHNsaWRlV2lkdGggKSA9PiBzbGlkZVdpZHRoIDw9IGdyb3VwV2lkdGg7XG59O1xuXG4vLyBhbGlhcyBfaW5pdCBmb3IgalF1ZXJ5IHBsdWdpbiAuZmxpY2tpdHkoKVxucHJvdG8uX2luaXQgPVxucHJvdG8ucmVwb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnBvc2l0aW9uQ2VsbHMoKTtcbiAgdGhpcy5wb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQoKTtcbn07XG5cbnByb3RvLmdldFNpemUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zaXplID0gZ2V0U2l6ZSggdGhpcy5lbGVtZW50ICk7XG4gIHRoaXMuc2V0Q2VsbEFsaWduKCk7XG4gIHRoaXMuY3Vyc29yUG9zaXRpb24gPSB0aGlzLnNpemUuaW5uZXJXaWR0aCAqIHRoaXMuY2VsbEFsaWduO1xufTtcblxubGV0IGNlbGxBbGlnblNob3J0aGFuZHMgPSB7XG4gIGxlZnQ6IDAsXG4gIGNlbnRlcjogMC41LFxuICByaWdodDogMSxcbn07XG5cbnByb3RvLnNldENlbGxBbGlnbiA9IGZ1bmN0aW9uKCkge1xuICBsZXQgeyBjZWxsQWxpZ24sIHJpZ2h0VG9MZWZ0IH0gPSB0aGlzLm9wdGlvbnM7XG4gIGxldCBzaG9ydGhhbmQgPSBjZWxsQWxpZ25TaG9ydGhhbmRzWyBjZWxsQWxpZ24gXTtcbiAgdGhpcy5jZWxsQWxpZ24gPSBzaG9ydGhhbmQgIT09IHVuZGVmaW5lZCA/IHNob3J0aGFuZCA6IGNlbGxBbGlnbjtcbiAgaWYgKCByaWdodFRvTGVmdCApIHRoaXMuY2VsbEFsaWduID0gMSAtIHRoaXMuY2VsbEFsaWduO1xufTtcblxucHJvdG8uc2V0R2FsbGVyeVNpemUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5vcHRpb25zLnNldEdhbGxlcnlTaXplICkgcmV0dXJuO1xuXG4gIGxldCBoZWlnaHQgPSB0aGlzLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQgJiYgdGhpcy5zZWxlY3RlZFNsaWRlID9cbiAgICB0aGlzLnNlbGVjdGVkU2xpZGUuaGVpZ2h0IDogdGhpcy5tYXhDZWxsSGVpZ2h0O1xuICB0aGlzLnZpZXdwb3J0LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG59O1xuXG5wcm90by5fdXBkYXRlV3JhcFNoaWZ0Q2VsbHMgPSBmdW5jdGlvbigpIHtcbiAgLy8gdXBkYXRlIGlzV3JhcHBpbmdcbiAgdGhpcy5pc1dyYXBwaW5nID0gdGhpcy5nZXRJc1dyYXBwaW5nKCk7XG4gIC8vIG9ubHkgZm9yIHdyYXAtYXJvdW5kXG4gIGlmICggIXRoaXMuaXNXcmFwcGluZyApIHJldHVybjtcblxuICAvLyB1bnNoaWZ0IHByZXZpb3VzIGNlbGxzXG4gIHRoaXMuX3Vuc2hpZnRDZWxscyggdGhpcy5iZWZvcmVTaGlmdENlbGxzICk7XG4gIHRoaXMuX3Vuc2hpZnRDZWxscyggdGhpcy5hZnRlclNoaWZ0Q2VsbHMgKTtcbiAgLy8gZ2V0IGJlZm9yZSBjZWxsc1xuICAvLyBpbml0aWFsIGdhcFxuICBsZXQgYmVmb3JlR2FwWCA9IHRoaXMuY3Vyc29yUG9zaXRpb247XG4gIGxldCBsYXN0SW5kZXggPSB0aGlzLmNlbGxzLmxlbmd0aCAtIDE7XG4gIHRoaXMuYmVmb3JlU2hpZnRDZWxscyA9IHRoaXMuX2dldEdhcENlbGxzKCBiZWZvcmVHYXBYLCBsYXN0SW5kZXgsIC0xICk7XG4gIC8vIGdldCBhZnRlciBjZWxsc1xuICAvLyBlbmRpbmcgZ2FwIGJldHdlZW4gbGFzdCBjZWxsIGFuZCBlbmQgb2YgZ2FsbGVyeSB2aWV3cG9ydFxuICBsZXQgYWZ0ZXJHYXBYID0gdGhpcy5zaXplLmlubmVyV2lkdGggLSB0aGlzLmN1cnNvclBvc2l0aW9uO1xuICAvLyBzdGFydCBjbG9uaW5nIGF0IGZpcnN0IGNlbGwsIHdvcmtpbmcgZm9yd2FyZHNcbiAgdGhpcy5hZnRlclNoaWZ0Q2VsbHMgPSB0aGlzLl9nZXRHYXBDZWxscyggYWZ0ZXJHYXBYLCAwLCAxICk7XG59O1xuXG5wcm90by5nZXRJc1dyYXBwaW5nID0gZnVuY3Rpb24oKSB7XG4gIGxldCB7IHdyYXBBcm91bmQgfSA9IHRoaXMub3B0aW9ucztcbiAgaWYgKCAhd3JhcEFyb3VuZCB8fCB0aGlzLnNsaWRlcy5sZW5ndGggPCAyICkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmICggd3JhcEFyb3VuZCAhPT0gJ2ZpbGwnICkgcmV0dXJuIHRydWU7XG4gIC8vIGNoZWNrIHRoYXQgc2xpZGVzIGNhbiBmaXRcblxuICBsZXQgZ2FwV2lkdGggPSB0aGlzLnNsaWRlYWJsZVdpZHRoIC0gdGhpcy5zaXplLmlubmVyV2lkdGg7XG4gIGlmICggZ2FwV2lkdGggPiB0aGlzLnNpemUuaW5uZXJXaWR0aCApIHJldHVybiB0cnVlOyAvLyBnYXAgKiAyeCBiaWcsIGFsbCBnb29kXG4gIC8vIGNoZWNrIHRoYXQgY29udGVudCB3aWR0aCAtIHNoaWZ0aW5nIGNlbGwgaXMgYmlnZ2VyIHRoYW4gdmlld3BvcnQgd2lkdGhcbiAgZm9yICggbGV0IGNlbGwgb2YgdGhpcy5jZWxscyApIHtcbiAgICBpZiAoIGNlbGwuc2l6ZS5vdXRlcldpZHRoID4gZ2FwV2lkdGggKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5wcm90by5fZ2V0R2FwQ2VsbHMgPSBmdW5jdGlvbiggZ2FwWCwgY2VsbEluZGV4LCBpbmNyZW1lbnQgKSB7XG4gIC8vIGtlZXAgYWRkaW5nIGNlbGxzIHVudGlsIHRoZSBjb3ZlciB0aGUgaW5pdGlhbCBnYXBcbiAgbGV0IGNlbGxzID0gW107XG4gIHdoaWxlICggZ2FwWCA+IDAgKSB7XG4gICAgbGV0IGNlbGwgPSB0aGlzLmNlbGxzWyBjZWxsSW5kZXggXTtcbiAgICBpZiAoICFjZWxsICkgYnJlYWs7XG5cbiAgICBjZWxscy5wdXNoKCBjZWxsICk7XG4gICAgY2VsbEluZGV4ICs9IGluY3JlbWVudDtcbiAgICBnYXBYIC09IGNlbGwuc2l6ZS5vdXRlcldpZHRoO1xuICB9XG4gIHJldHVybiBjZWxscztcbn07XG5cbi8vIC0tLS0tIGNvbnRhaW4gJiB3cmFwIC0tLS0tIC8vXG5cbi8vIGNvbnRhaW4gY2VsbCB0YXJnZXRzIHNvIG5vIGV4Y2VzcyBzbGlkaW5nXG5wcm90by5fY29udGFpblNsaWRlcyA9IGZ1bmN0aW9uKCkge1xuICBsZXQgaXNDb250YWluaW5nID0gdGhpcy5vcHRpb25zLmNvbnRhaW4gJiYgIXRoaXMuaXNXcmFwcGluZyAmJlxuICAgICAgdGhpcy5jZWxscy5sZW5ndGg7XG4gIGlmICggIWlzQ29udGFpbmluZyApIHJldHVybjtcblxuICBsZXQgY29udGVudFdpZHRoID0gdGhpcy5zbGlkZWFibGVXaWR0aCAtIHRoaXMuZ2V0TGFzdENlbGwoKS5zaXplWyB0aGlzLmVuZE1hcmdpbiBdO1xuICAvLyBjb250ZW50IGlzIGxlc3MgdGhhbiBnYWxsZXJ5IHNpemVcbiAgbGV0IGlzQ29udGVudFNtYWxsZXIgPSBjb250ZW50V2lkdGggPCB0aGlzLnNpemUuaW5uZXJXaWR0aDtcbiAgaWYgKCBpc0NvbnRlbnRTbWFsbGVyICkge1xuICAgIC8vIGFsbCBjZWxscyBmaXQgaW5zaWRlIGdhbGxlcnlcbiAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKCAoIHNsaWRlICkgPT4ge1xuICAgICAgc2xpZGUudGFyZ2V0ID0gY29udGVudFdpZHRoICogdGhpcy5jZWxsQWxpZ247XG4gICAgfSApO1xuICB9IGVsc2Uge1xuICAgIC8vIGNvbnRhaW4gdG8gYm91bmRzXG4gICAgbGV0IGJlZ2luQm91bmQgPSB0aGlzLmN1cnNvclBvc2l0aW9uICsgdGhpcy5jZWxsc1swXS5zaXplWyB0aGlzLmJlZ2luTWFyZ2luIF07XG4gICAgbGV0IGVuZEJvdW5kID0gY29udGVudFdpZHRoIC0gdGhpcy5zaXplLmlubmVyV2lkdGggKiAoIDEgLSB0aGlzLmNlbGxBbGlnbiApO1xuICAgIHRoaXMuc2xpZGVzLmZvckVhY2goICggc2xpZGUgKSA9PiB7XG4gICAgICBzbGlkZS50YXJnZXQgPSBNYXRoLm1heCggc2xpZGUudGFyZ2V0LCBiZWdpbkJvdW5kICk7XG4gICAgICBzbGlkZS50YXJnZXQgPSBNYXRoLm1pbiggc2xpZGUudGFyZ2V0LCBlbmRCb3VuZCApO1xuICAgIH0gKTtcbiAgfVxufTtcblxuLy8gLS0tLS0gZXZlbnRzIC0tLS0tIC8vXG5cbi8qKlxuICogZW1pdHMgZXZlbnRzIHZpYSBldmVudEVtaXR0ZXIgYW5kIGpRdWVyeSBldmVudHNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gbmFtZSBvZiBldmVudFxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBvcmlnaW5hbCBldmVudFxuICogQHBhcmFtIHtBcnJheX0gYXJncyAtIGV4dHJhIGFyZ3VtZW50c1xuICovXG5wcm90by5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24oIHR5cGUsIGV2ZW50LCBhcmdzICkge1xuICBsZXQgZW1pdEFyZ3MgPSBldmVudCA/IFsgZXZlbnQgXS5jb25jYXQoIGFyZ3MgKSA6IGFyZ3M7XG4gIHRoaXMuZW1pdEV2ZW50KCB0eXBlLCBlbWl0QXJncyApO1xuXG4gIGlmICggalF1ZXJ5ICYmIHRoaXMuJGVsZW1lbnQgKSB7XG4gICAgLy8gZGVmYXVsdCB0cmlnZ2VyIHdpdGggdHlwZSBpZiBubyBldmVudFxuICAgIHR5cGUgKz0gdGhpcy5vcHRpb25zLm5hbWVzcGFjZUpRdWVyeUV2ZW50cyA/ICcuZmxpY2tpdHknIDogJyc7XG4gICAgbGV0ICRldmVudCA9IHR5cGU7XG4gICAgaWYgKCBldmVudCApIHtcbiAgICAgIC8vIGNyZWF0ZSBqUXVlcnkgZXZlbnRcbiAgICAgIGxldCBqUUV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggZXZlbnQgKTtcbiAgICAgIGpRRXZlbnQudHlwZSA9IHR5cGU7XG4gICAgICAkZXZlbnQgPSBqUUV2ZW50O1xuICAgIH1cbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoICRldmVudCwgYXJncyApO1xuICB9XG59O1xuXG5jb25zdCB1bmlkcmFnZ2VyRXZlbnRzID0gW1xuICAnZHJhZ1N0YXJ0JyxcbiAgJ2RyYWdNb3ZlJyxcbiAgJ2RyYWdFbmQnLFxuICAncG9pbnRlckRvd24nLFxuICAncG9pbnRlck1vdmUnLFxuICAncG9pbnRlckVuZCcsXG4gICdzdGF0aWNDbGljaycsXG5dO1xuXG5sZXQgX2VtaXRFdmVudCA9IHByb3RvLmVtaXRFdmVudDtcbnByb3RvLmVtaXRFdmVudCA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIGFyZ3MgKSB7XG4gIGlmICggZXZlbnROYW1lID09PSAnc3RhdGljQ2xpY2snICkge1xuICAgIC8vIGFkZCBjZWxsRWxlbSBhbmQgY2VsbEluZGV4IGFyZ3MgdG8gc3RhdGljQ2xpY2tcbiAgICBsZXQgY2xpY2tlZENlbGwgPSB0aGlzLmdldFBhcmVudENlbGwoIGFyZ3NbMF0udGFyZ2V0ICk7XG4gICAgbGV0IGNlbGxFbGVtID0gY2xpY2tlZENlbGwgJiYgY2xpY2tlZENlbGwuZWxlbWVudDtcbiAgICBsZXQgY2VsbEluZGV4ID0gY2xpY2tlZENlbGwgJiYgdGhpcy5jZWxscy5pbmRleE9mKCBjbGlja2VkQ2VsbCApO1xuICAgIGFyZ3MgPSBhcmdzLmNvbmNhdCggY2VsbEVsZW0sIGNlbGxJbmRleCApO1xuICB9XG4gIC8vIGRvIHJlZ3VsYXIgdGhpbmdcbiAgX2VtaXRFdmVudC5jYWxsKCB0aGlzLCBldmVudE5hbWUsIGFyZ3MgKTtcbiAgLy8gZHVjay1wdW5jaCBpbiBqUXVlcnkgZXZlbnRzIGZvciBVbmlkcmFnZ2VyIGV2ZW50c1xuICBsZXQgaXNVbmlkcmFnZ2VyRXZlbnQgPSB1bmlkcmFnZ2VyRXZlbnRzLmluY2x1ZGVzKCBldmVudE5hbWUgKTtcbiAgaWYgKCAhaXNVbmlkcmFnZ2VyRXZlbnQgfHwgIWpRdWVyeSB8fCAhdGhpcy4kZWxlbWVudCApIHJldHVybjtcblxuICBldmVudE5hbWUgKz0gdGhpcy5vcHRpb25zLm5hbWVzcGFjZUpRdWVyeUV2ZW50cyA/ICcuZmxpY2tpdHknIDogJyc7XG4gIGxldCBldmVudCA9IGFyZ3Muc2hpZnQoIDAgKTtcbiAgbGV0IGpRRXZlbnQgPSBuZXcgalF1ZXJ5LkV2ZW50KCBldmVudCApO1xuICBqUUV2ZW50LnR5cGUgPSBldmVudE5hbWU7XG4gIHRoaXMuJGVsZW1lbnQudHJpZ2dlciggalFFdmVudCwgYXJncyApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gc2VsZWN0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8qKlxuICogQHBhcmFtIHtJbnRlZ2VyfSBpbmRleCAtIGluZGV4IG9mIHRoZSBzbGlkZVxuICogQHBhcmFtIHtCb29sZWFufSBpc1dyYXAgLSB3aWxsIHdyYXAtYXJvdW5kIHRvIGxhc3QvZmlyc3QgaWYgYXQgdGhlIGVuZFxuICogQHBhcmFtIHtCb29sZWFufSBpc0luc3RhbnQgLSB3aWxsIGltbWVkaWF0ZWx5IHNldCBwb3NpdGlvbiBhdCBzZWxlY3RlZCBjZWxsXG4gKi9cbnByb3RvLnNlbGVjdCA9IGZ1bmN0aW9uKCBpbmRleCwgaXNXcmFwLCBpc0luc3RhbnQgKSB7XG4gIGlmICggIXRoaXMuaXNBY3RpdmUgKSByZXR1cm47XG5cbiAgaW5kZXggPSBwYXJzZUludCggaW5kZXgsIDEwICk7XG4gIHRoaXMuX3dyYXBTZWxlY3QoIGluZGV4ICk7XG5cbiAgaWYgKCB0aGlzLmlzV3JhcHBpbmcgfHwgaXNXcmFwICkge1xuICAgIGluZGV4ID0gdXRpbHMubW9kdWxvKCBpbmRleCwgdGhpcy5zbGlkZXMubGVuZ3RoICk7XG4gIH1cbiAgLy8gYmFpbCBpZiBpbnZhbGlkIGluZGV4XG4gIGlmICggIXRoaXMuc2xpZGVzWyBpbmRleCBdICkgcmV0dXJuO1xuXG4gIGxldCBwcmV2SW5kZXggPSB0aGlzLnNlbGVjdGVkSW5kZXg7XG4gIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xuICB0aGlzLnVwZGF0ZVNlbGVjdGVkU2xpZGUoKTtcbiAgaWYgKCBpc0luc3RhbnQgKSB7XG4gICAgdGhpcy5wb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQoKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnN0YXJ0QW5pbWF0aW9uKCk7XG4gIH1cbiAgaWYgKCB0aGlzLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQgKSB7XG4gICAgdGhpcy5zZXRHYWxsZXJ5U2l6ZSgpO1xuICB9XG4gIC8vIGV2ZW50c1xuICB0aGlzLmRpc3BhdGNoRXZlbnQoICdzZWxlY3QnLCBudWxsLCBbIGluZGV4IF0gKTtcbiAgLy8gY2hhbmdlIGV2ZW50IGlmIG5ldyBpbmRleFxuICBpZiAoIGluZGV4ICE9PSBwcmV2SW5kZXggKSB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KCAnY2hhbmdlJywgbnVsbCwgWyBpbmRleCBdICk7XG4gIH1cbn07XG5cbi8vIHdyYXBzIHBvc2l0aW9uIGZvciB3cmFwQXJvdW5kLCB0byBtb3ZlIHRvIGNsb3Nlc3Qgc2xpZGUuICMxMTNcbnByb3RvLl93cmFwU2VsZWN0ID0gZnVuY3Rpb24oIGluZGV4ICkge1xuICBpZiAoICF0aGlzLmlzV3JhcHBpbmcgKSByZXR1cm47XG5cbiAgY29uc3QgeyBzZWxlY3RlZEluZGV4LCBzbGlkZWFibGVXaWR0aCwgc2xpZGVzOiB7IGxlbmd0aCB9IH0gPSB0aGlzO1xuICAvLyBzaGlmdCBpbmRleCBmb3Igd3JhcCwgZG8gbm90IHdyYXAgZHJhZ1NlbGVjdFxuICBpZiAoICF0aGlzLmlzRHJhZ1NlbGVjdCApIHtcbiAgICBsZXQgd3JhcEluZGV4ID0gdXRpbHMubW9kdWxvKCBpbmRleCwgbGVuZ3RoICk7XG4gICAgLy8gZ28gdG8gc2hvcnRlc3RcbiAgICBsZXQgZGVsdGEgPSBNYXRoLmFicyggd3JhcEluZGV4IC0gc2VsZWN0ZWRJbmRleCApO1xuICAgIGxldCBiYWNrV3JhcERlbHRhID0gTWF0aC5hYnMoICggd3JhcEluZGV4ICsgbGVuZ3RoICkgLSBzZWxlY3RlZEluZGV4ICk7XG4gICAgbGV0IGZvcmV3YXJkV3JhcERlbHRhID0gTWF0aC5hYnMoICggd3JhcEluZGV4IC0gbGVuZ3RoICkgLSBzZWxlY3RlZEluZGV4ICk7XG4gICAgaWYgKCBiYWNrV3JhcERlbHRhIDwgZGVsdGEgKSB7XG4gICAgICBpbmRleCArPSBsZW5ndGg7XG4gICAgfSBlbHNlIGlmICggZm9yZXdhcmRXcmFwRGVsdGEgPCBkZWx0YSApIHtcbiAgICAgIGluZGV4IC09IGxlbmd0aDtcbiAgICB9XG4gIH1cblxuICAvLyB3cmFwIHBvc2l0aW9uIHNvIHNsaWRlciBpcyB3aXRoaW4gbm9ybWFsIGFyZWFcbiAgaWYgKCBpbmRleCA8IDAgKSB7XG4gICAgdGhpcy54IC09IHNsaWRlYWJsZVdpZHRoO1xuICB9IGVsc2UgaWYgKCBpbmRleCA+PSBsZW5ndGggKSB7XG4gICAgdGhpcy54ICs9IHNsaWRlYWJsZVdpZHRoO1xuICB9XG59O1xuXG5wcm90by5wcmV2aW91cyA9IGZ1bmN0aW9uKCBpc1dyYXAsIGlzSW5zdGFudCApIHtcbiAgdGhpcy5zZWxlY3QoIHRoaXMuc2VsZWN0ZWRJbmRleCAtIDEsIGlzV3JhcCwgaXNJbnN0YW50ICk7XG59O1xuXG5wcm90by5uZXh0ID0gZnVuY3Rpb24oIGlzV3JhcCwgaXNJbnN0YW50ICkge1xuICB0aGlzLnNlbGVjdCggdGhpcy5zZWxlY3RlZEluZGV4ICsgMSwgaXNXcmFwLCBpc0luc3RhbnQgKTtcbn07XG5cbnByb3RvLnVwZGF0ZVNlbGVjdGVkU2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgbGV0IHNsaWRlID0gdGhpcy5zbGlkZXNbIHRoaXMuc2VsZWN0ZWRJbmRleCBdO1xuICAvLyBzZWxlY3RlZEluZGV4IGNvdWxkIGJlIG91dHNpZGUgb2Ygc2xpZGVzLCBpZiB0cmlnZ2VyZWQgYmVmb3JlIHJlc2l6ZSgpXG4gIGlmICggIXNsaWRlICkgcmV0dXJuO1xuXG4gIC8vIHVuc2VsZWN0IHByZXZpb3VzIHNlbGVjdGVkIHNsaWRlXG4gIHRoaXMudW5zZWxlY3RTZWxlY3RlZFNsaWRlKCk7XG4gIC8vIHVwZGF0ZSBuZXcgc2VsZWN0ZWQgc2xpZGVcbiAgdGhpcy5zZWxlY3RlZFNsaWRlID0gc2xpZGU7XG4gIHNsaWRlLnNlbGVjdCgpO1xuICB0aGlzLnNlbGVjdGVkQ2VsbHMgPSBzbGlkZS5jZWxscztcbiAgdGhpcy5zZWxlY3RlZEVsZW1lbnRzID0gc2xpZGUuZ2V0Q2VsbEVsZW1lbnRzKCk7XG4gIC8vIEhBQ0s6IHNlbGVjdGVkQ2VsbCAmIHNlbGVjdGVkRWxlbWVudCBpcyBmaXJzdCBjZWxsIGluIHNsaWRlLCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICB0aGlzLnNlbGVjdGVkQ2VsbCA9IHNsaWRlLmNlbGxzWzBdO1xuICB0aGlzLnNlbGVjdGVkRWxlbWVudCA9IHRoaXMuc2VsZWN0ZWRFbGVtZW50c1swXTtcbn07XG5cbnByb3RvLnVuc2VsZWN0U2VsZWN0ZWRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIHRoaXMuc2VsZWN0ZWRTbGlkZSApIHRoaXMuc2VsZWN0ZWRTbGlkZS51bnNlbGVjdCgpO1xufTtcblxucHJvdG8uc2VsZWN0SW5pdGlhbEluZGV4ID0gZnVuY3Rpb24oKSB7XG4gIGxldCBpbml0aWFsSW5kZXggPSB0aGlzLm9wdGlvbnMuaW5pdGlhbEluZGV4O1xuICAvLyBhbHJlYWR5IGFjdGl2YXRlZCwgc2VsZWN0IHByZXZpb3VzIHNlbGVjdGVkSW5kZXhcbiAgaWYgKCB0aGlzLmlzSW5pdEFjdGl2YXRlZCApIHtcbiAgICB0aGlzLnNlbGVjdCggdGhpcy5zZWxlY3RlZEluZGV4LCBmYWxzZSwgdHJ1ZSApO1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBzZWxlY3Qgd2l0aCBzZWxlY3RvciBzdHJpbmdcbiAgaWYgKCBpbml0aWFsSW5kZXggJiYgdHlwZW9mIGluaXRpYWxJbmRleCA9PSAnc3RyaW5nJyApIHtcbiAgICBsZXQgY2VsbCA9IHRoaXMucXVlcnlDZWxsKCBpbml0aWFsSW5kZXggKTtcbiAgICBpZiAoIGNlbGwgKSB7XG4gICAgICB0aGlzLnNlbGVjdENlbGwoIGluaXRpYWxJbmRleCwgZmFsc2UsIHRydWUgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBsZXQgaW5kZXggPSAwO1xuICAvLyBzZWxlY3Qgd2l0aCBudW1iZXJcbiAgaWYgKCBpbml0aWFsSW5kZXggJiYgdGhpcy5zbGlkZXNbIGluaXRpYWxJbmRleCBdICkge1xuICAgIGluZGV4ID0gaW5pdGlhbEluZGV4O1xuICB9XG4gIC8vIHNlbGVjdCBpbnN0YW50bHlcbiAgdGhpcy5zZWxlY3QoIGluZGV4LCBmYWxzZSwgdHJ1ZSApO1xufTtcblxuLyoqXG4gKiBzZWxlY3Qgc2xpZGUgZnJvbSBudW1iZXIgb3IgY2VsbCBlbGVtZW50XG4gKiBAcGFyYW0ge1tFbGVtZW50LCBOdW1iZXJdfSB2YWx1ZSAtIHplcm8tYmFzZWQgaW5kZXggb3IgZWxlbWVudCB0byBzZWxlY3RcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNXcmFwIC0gZW5hYmxlcyB3cmFwcGluZyBhcm91bmQgZm9yIGV4dHJhIGluZGV4XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW5zdGFudCAtIGRpc2FibGVzIHNsaWRlIGFuaW1hdGlvblxuICovXG5wcm90by5zZWxlY3RDZWxsID0gZnVuY3Rpb24oIHZhbHVlLCBpc1dyYXAsIGlzSW5zdGFudCApIHtcbiAgLy8gZ2V0IGNlbGxcbiAgbGV0IGNlbGwgPSB0aGlzLnF1ZXJ5Q2VsbCggdmFsdWUgKTtcbiAgaWYgKCAhY2VsbCApIHJldHVybjtcblxuICBsZXQgaW5kZXggPSB0aGlzLmdldENlbGxTbGlkZUluZGV4KCBjZWxsICk7XG4gIHRoaXMuc2VsZWN0KCBpbmRleCwgaXNXcmFwLCBpc0luc3RhbnQgKTtcbn07XG5cbnByb3RvLmdldENlbGxTbGlkZUluZGV4ID0gZnVuY3Rpb24oIGNlbGwgKSB7XG4gIC8vIGdldCBpbmRleCBvZiBzbGlkZSB0aGF0IGhhcyBjZWxsXG4gIGxldCBjZWxsU2xpZGUgPSB0aGlzLnNsaWRlcy5maW5kKCAoIHNsaWRlICkgPT4gc2xpZGUuY2VsbHMuaW5jbHVkZXMoIGNlbGwgKSApO1xuICByZXR1cm4gdGhpcy5zbGlkZXMuaW5kZXhPZiggY2VsbFNsaWRlICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBnZXQgY2VsbHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLyoqXG4gKiBnZXQgRmxpY2tpdHkuQ2VsbCwgZ2l2ZW4gYW4gRWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtIC0gbWF0Y2hpbmcgY2VsbCBlbGVtZW50XG4gKiBAcmV0dXJucyB7RmxpY2tpdHkuQ2VsbH0gY2VsbCAtIG1hdGNoaW5nIGNlbGxcbiAqL1xucHJvdG8uZ2V0Q2VsbCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAvLyBsb29wIHRocm91Z2ggY2VsbHMgdG8gZ2V0IHRoZSBvbmUgdGhhdCBtYXRjaGVzXG4gIGZvciAoIGxldCBjZWxsIG9mIHRoaXMuY2VsbHMgKSB7XG4gICAgaWYgKCBjZWxsLmVsZW1lbnQgPT09IGVsZW0gKSByZXR1cm4gY2VsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBnZXQgY29sbGVjdGlvbiBvZiBGbGlja2l0eS5DZWxscywgZ2l2ZW4gRWxlbWVudHNcbiAqIEBwYXJhbSB7W0VsZW1lbnQsIEFycmF5LCBOb2RlTGlzdF19IGVsZW1zIC0gbXVsdGlwbGUgZWxlbWVudHNcbiAqIEByZXR1cm5zIHtBcnJheX0gY2VsbHMgLSBGbGlja2l0eS5DZWxsc1xuICovXG5wcm90by5nZXRDZWxscyA9IGZ1bmN0aW9uKCBlbGVtcyApIHtcbiAgZWxlbXMgPSB1dGlscy5tYWtlQXJyYXkoIGVsZW1zICk7XG4gIHJldHVybiBlbGVtcy5tYXAoICggZWxlbSApID0+IHRoaXMuZ2V0Q2VsbCggZWxlbSApICkuZmlsdGVyKCBCb29sZWFuICk7XG59O1xuXG4vKipcbiAqIGdldCBjZWxsIGVsZW1lbnRzXG4gKiBAcmV0dXJucyB7QXJyYXl9IGNlbGxFbGVtc1xuICovXG5wcm90by5nZXRDZWxsRWxlbWVudHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2VsbHMubWFwKCAoIGNlbGwgKSA9PiBjZWxsLmVsZW1lbnQgKTtcbn07XG5cbi8qKlxuICogZ2V0IHBhcmVudCBjZWxsIGZyb20gYW4gZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtIC0gY2hpbGQgZWxlbWVudFxuICogQHJldHVybnMge0ZsaWNraXQuQ2VsbH0gY2VsbCAtIHBhcmVudCBjZWxsXG4gKi9cbnByb3RvLmdldFBhcmVudENlbGwgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgLy8gZmlyc3QgY2hlY2sgaWYgZWxlbSBpcyBjZWxsXG4gIGxldCBjZWxsID0gdGhpcy5nZXRDZWxsKCBlbGVtICk7XG4gIGlmICggY2VsbCApIHJldHVybiBjZWxsO1xuXG4gIC8vIHRyeSB0byBnZXQgcGFyZW50IGNlbGwgZWxlbVxuICBsZXQgY2xvc2VzdCA9IGVsZW0uY2xvc2VzdCgnLmZsaWNraXR5LXNsaWRlciA+IConKTtcbiAgcmV0dXJuIHRoaXMuZ2V0Q2VsbCggY2xvc2VzdCApO1xufTtcblxuLyoqXG4gKiBnZXQgY2VsbHMgYWRqYWNlbnQgdG8gYSBzbGlkZVxuICogQHBhcmFtIHtJbnRlZ2VyfSBhZGpDb3VudCAtIG51bWJlciBvZiBhZGphY2VudCBzbGlkZXNcbiAqIEBwYXJhbSB7SW50ZWdlcn0gaW5kZXggLSBpbmRleCBvZiBzbGlkZSB0byBzdGFydFxuICogQHJldHVybnMge0FycmF5fSBjZWxscyAtIGFycmF5IG9mIEZsaWNraXR5LkNlbGxzXG4gKi9cbnByb3RvLmdldEFkamFjZW50Q2VsbEVsZW1lbnRzID0gZnVuY3Rpb24oIGFkakNvdW50LCBpbmRleCApIHtcbiAgaWYgKCAhYWRqQ291bnQgKSByZXR1cm4gdGhpcy5zZWxlY3RlZFNsaWRlLmdldENlbGxFbGVtZW50cygpO1xuXG4gIGluZGV4ID0gaW5kZXggPT09IHVuZGVmaW5lZCA/IHRoaXMuc2VsZWN0ZWRJbmRleCA6IGluZGV4O1xuXG4gIGxldCBsZW4gPSB0aGlzLnNsaWRlcy5sZW5ndGg7XG4gIGlmICggMSArICggYWRqQ291bnQgKiAyICkgPj0gbGVuICkge1xuICAgIHJldHVybiB0aGlzLmdldENlbGxFbGVtZW50cygpOyAvLyBnZXQgYWxsXG4gIH1cblxuICBsZXQgY2VsbEVsZW1zID0gW107XG4gIGZvciAoIGxldCBpID0gaW5kZXggLSBhZGpDb3VudDsgaSA8PSBpbmRleCArIGFkakNvdW50OyBpKysgKSB7XG4gICAgbGV0IHNsaWRlSW5kZXggPSB0aGlzLmlzV3JhcHBpbmcgPyB1dGlscy5tb2R1bG8oIGksIGxlbiApIDogaTtcbiAgICBsZXQgc2xpZGUgPSB0aGlzLnNsaWRlc1sgc2xpZGVJbmRleCBdO1xuICAgIGlmICggc2xpZGUgKSB7XG4gICAgICBjZWxsRWxlbXMgPSBjZWxsRWxlbXMuY29uY2F0KCBzbGlkZS5nZXRDZWxsRWxlbWVudHMoKSApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2VsbEVsZW1zO1xufTtcblxuLyoqXG4gKiBzZWxlY3Qgc2xpZGUgZnJvbSBudW1iZXIgb3IgY2VsbCBlbGVtZW50XG4gKiBAcGFyYW0ge1tFbGVtZW50LCBTdHJpbmcsIE51bWJlcl19IHNlbGVjdG9yIC0gZWxlbWVudCwgc2VsZWN0b3Igc3RyaW5nLCBvciBpbmRleFxuICogQHJldHVybnMge0ZsaWNraXR5LkNlbGx9IC0gbWF0Y2hpbmcgY2VsbFxuICovXG5wcm90by5xdWVyeUNlbGwgPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gIGlmICggdHlwZW9mIHNlbGVjdG9yID09ICdudW1iZXInICkge1xuICAgIC8vIHVzZSBudW1iZXIgYXMgaW5kZXhcbiAgICByZXR1cm4gdGhpcy5jZWxsc1sgc2VsZWN0b3IgXTtcbiAgfVxuICAvLyBkbyBub3Qgc2VsZWN0IGludmFsaWQgc2VsZWN0b3JzIGZyb20gaGFzaDogIzEyMywgIy8uICM3OTFcbiAgbGV0IGlzU2VsZWN0b3JTdHJpbmcgPSB0eXBlb2Ygc2VsZWN0b3IgPT0gJ3N0cmluZycgJiYgIXNlbGVjdG9yLm1hdGNoKCAvXlsjLl0/W1xcZC9dLyApO1xuICBpZiAoIGlzU2VsZWN0b3JTdHJpbmcgKSB7XG4gICAgLy8gdXNlIHN0cmluZyBhcyBzZWxlY3RvciwgZ2V0IGVsZW1lbnRcbiAgICBzZWxlY3RvciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApO1xuICB9XG4gIC8vIGdldCBjZWxsIGZyb20gZWxlbWVudFxuICByZXR1cm4gdGhpcy5nZXRDZWxsKCBzZWxlY3RvciApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZXZlbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbnByb3RvLnVpQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZW1pdEV2ZW50KCd1aUNoYW5nZScpO1xufTtcblxuLy8gLS0tLS0gcmVzaXplIC0tLS0tIC8vXG5cbnByb3RvLm9ucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMud2F0Y2hDU1MoKTtcbiAgdGhpcy5yZXNpemUoKTtcbn07XG5cbnV0aWxzLmRlYm91bmNlTWV0aG9kKCBGbGlja2l0eSwgJ29ucmVzaXplJywgMTUwICk7XG5cbnByb3RvLnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAvLyAjMTE3NyBkaXNhYmxlIHJlc2l6ZSBiZWhhdmlvciB3aGVuIGFuaW1hdGluZyBvciBkcmFnZ2luZyBmb3IgaU9TIDE1XG4gIGlmICggIXRoaXMuaXNBY3RpdmUgfHwgdGhpcy5pc0FuaW1hdGluZyB8fCB0aGlzLmlzRHJhZ2dpbmcgKSByZXR1cm47XG4gIHRoaXMuZ2V0U2l6ZSgpO1xuICAvLyB3cmFwIHZhbHVlc1xuICBpZiAoIHRoaXMuaXNXcmFwcGluZyApIHtcbiAgICB0aGlzLnggPSB1dGlscy5tb2R1bG8oIHRoaXMueCwgdGhpcy5zbGlkZWFibGVXaWR0aCApO1xuICB9XG4gIHRoaXMucG9zaXRpb25DZWxscygpO1xuICB0aGlzLl91cGRhdGVXcmFwU2hpZnRDZWxscygpO1xuICB0aGlzLnNldEdhbGxlcnlTaXplKCk7XG4gIHRoaXMuZW1pdEV2ZW50KCdyZXNpemUnKTtcbiAgLy8gdXBkYXRlIHNlbGVjdGVkIGluZGV4IGZvciBncm91cCBzbGlkZXMsIGluc3RhbnRcbiAgLy8gVE9ETzogcG9zaXRpb24gY2FuIGJlIGxvc3QgYmV0d2VlbiBncm91cHMgb2YgdmFyaW91cyBudW1iZXJzXG4gIGxldCBzZWxlY3RlZEVsZW1lbnQgPSB0aGlzLnNlbGVjdGVkRWxlbWVudHMgJiYgdGhpcy5zZWxlY3RlZEVsZW1lbnRzWzBdO1xuICB0aGlzLnNlbGVjdENlbGwoIHNlbGVjdGVkRWxlbWVudCwgZmFsc2UsIHRydWUgKTtcbn07XG5cbi8vIHdhdGNoZXMgdGhlIDphZnRlciBwcm9wZXJ0eSwgYWN0aXZhdGVzL2RlYWN0aXZhdGVzXG5wcm90by53YXRjaENTUyA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aGlzLm9wdGlvbnMud2F0Y2hDU1MgKSByZXR1cm47XG5cbiAgbGV0IGFmdGVyQ29udGVudCA9IGdldENvbXB1dGVkU3R5bGUoIHRoaXMuZWxlbWVudCwgJzphZnRlcicgKS5jb250ZW50O1xuICAvLyBhY3RpdmF0ZSBpZiA6YWZ0ZXIgeyBjb250ZW50OiAnZmxpY2tpdHknIH1cbiAgaWYgKCBhZnRlckNvbnRlbnQuaW5jbHVkZXMoJ2ZsaWNraXR5JykgKSB7XG4gICAgdGhpcy5hY3RpdmF0ZSgpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICB9XG59O1xuXG4vLyAtLS0tLSBrZXlkb3duIC0tLS0tIC8vXG5cbi8vIGdvIHByZXZpb3VzL25leHQgaWYgbGVmdC9yaWdodCBrZXlzIHByZXNzZWRcbnByb3RvLm9ua2V5ZG93biA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgbGV0IHsgYWN0aXZlRWxlbWVudCB9ID0gZG9jdW1lbnQ7XG4gIGxldCBoYW5kbGVyID0gRmxpY2tpdHkua2V5Ym9hcmRIYW5kbGVyc1sgZXZlbnQua2V5IF07XG4gIC8vIG9ubHkgd29yayBpZiBlbGVtZW50IGlzIGluIGZvY3VzXG4gIGlmICggIXRoaXMub3B0aW9ucy5hY2Nlc3NpYmlsaXR5IHx8ICFhY3RpdmVFbGVtZW50IHx8ICFoYW5kbGVyICkgcmV0dXJuO1xuXG4gIGxldCBpc0ZvY3VzZWQgPSB0aGlzLmZvY3VzYWJsZUVsZW1zLnNvbWUoICggZWxlbSApID0+IGFjdGl2ZUVsZW1lbnQgPT09IGVsZW0gKTtcbiAgaWYgKCBpc0ZvY3VzZWQgKSBoYW5kbGVyLmNhbGwoIHRoaXMgKTtcbn07XG5cbkZsaWNraXR5LmtleWJvYXJkSGFuZGxlcnMgPSB7XG4gIEFycm93TGVmdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51aUNoYW5nZSgpO1xuICAgIGxldCBsZWZ0TWV0aG9kID0gdGhpcy5vcHRpb25zLnJpZ2h0VG9MZWZ0ID8gJ25leHQnIDogJ3ByZXZpb3VzJztcbiAgICB0aGlzWyBsZWZ0TWV0aG9kIF0oKTtcbiAgfSxcbiAgQXJyb3dSaWdodDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51aUNoYW5nZSgpO1xuICAgIGxldCByaWdodE1ldGhvZCA9IHRoaXMub3B0aW9ucy5yaWdodFRvTGVmdCA/ICdwcmV2aW91cycgOiAnbmV4dCc7XG4gICAgdGhpc1sgcmlnaHRNZXRob2QgXSgpO1xuICB9LFxufTtcblxuLy8gLS0tLS0gZm9jdXMgLS0tLS0gLy9cblxucHJvdG8uZm9jdXMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbGVtZW50LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGRlc3Ryb3kgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLy8gZGVhY3RpdmF0ZSBhbGwgRmxpY2tpdHkgZnVuY3Rpb25hbGl0eSwgYnV0IGtlZXAgc3R1ZmYgYXZhaWxhYmxlXG5wcm90by5kZWFjdGl2YXRlID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMuaXNBY3RpdmUgKSByZXR1cm47XG5cbiAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZsaWNraXR5LWVuYWJsZWQnKTtcbiAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZsaWNraXR5LXJ0bCcpO1xuICB0aGlzLnVuc2VsZWN0U2VsZWN0ZWRTbGlkZSgpO1xuICAvLyBkZXN0cm95IGNlbGxzXG4gIHRoaXMuY2VsbHMuZm9yRWFjaCggKCBjZWxsICkgPT4gY2VsbC5kZXN0cm95KCkgKTtcbiAgdGhpcy52aWV3cG9ydC5yZW1vdmUoKTtcbiAgLy8gbW92ZSBjaGlsZCBlbGVtZW50cyBiYWNrIGludG8gZWxlbWVudFxuICB0aGlzLmVsZW1lbnQuYXBwZW5kKCAuLi50aGlzLnNsaWRlci5jaGlsZHJlbiApO1xuICBpZiAoIHRoaXMub3B0aW9ucy5hY2Nlc3NpYmlsaXR5ICkge1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RhYkluZGV4Jyk7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgdGhpcyApO1xuICB9XG4gIC8vIHNldCBmbGFnc1xuICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gIHRoaXMuZW1pdEV2ZW50KCdkZWFjdGl2YXRlJyk7XG59O1xuXG5wcm90by5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3Jlc2l6ZScsIHRoaXMgKTtcbiAgdGhpcy5hbGxPZmYoKTtcbiAgdGhpcy5lbWl0RXZlbnQoJ2Rlc3Ryb3knKTtcbiAgaWYgKCBqUXVlcnkgJiYgdGhpcy4kZWxlbWVudCApIHtcbiAgICBqUXVlcnkucmVtb3ZlRGF0YSggdGhpcy5lbGVtZW50LCAnZmxpY2tpdHknICk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuZWxlbWVudC5mbGlja2l0eUdVSUQ7XG4gIGRlbGV0ZSBpbnN0YW5jZXNbIHRoaXMuZ3VpZCBdO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcHJvdG90eXBlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbk9iamVjdC5hc3NpZ24oIHByb3RvLCBhbmltYXRlUHJvdG90eXBlICk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGV4dHJhcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vKipcbiAqIGdldCBGbGlja2l0eSBpbnN0YW5jZSBmcm9tIGVsZW1lbnRcbiAqIEBwYXJhbSB7W0VsZW1lbnQsIFN0cmluZ119IGVsZW0gLSBlbGVtZW50IG9yIHNlbGVjdG9yIHN0cmluZ1xuICogQHJldHVybnMge0ZsaWNraXR5fSAtIEZsaWNraXR5IGluc3RhbmNlXG4gKi9cbkZsaWNraXR5LmRhdGEgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgZWxlbSA9IHV0aWxzLmdldFF1ZXJ5RWxlbWVudCggZWxlbSApO1xuICBpZiAoIGVsZW0gKSByZXR1cm4gaW5zdGFuY2VzWyBlbGVtLmZsaWNraXR5R1VJRCBdO1xufTtcblxudXRpbHMuaHRtbEluaXQoIEZsaWNraXR5LCAnZmxpY2tpdHknICk7XG5cbmxldCB7IGpRdWVyeUJyaWRnZXQgfSA9IHdpbmRvdztcbmlmICggalF1ZXJ5ICYmIGpRdWVyeUJyaWRnZXQgKSB7XG4gIGpRdWVyeUJyaWRnZXQoICdmbGlja2l0eScsIEZsaWNraXR5LCBqUXVlcnkgKTtcbn1cblxuLy8gc2V0IGludGVybmFsIGpRdWVyeSwgZm9yIFdlYnBhY2sgKyBqUXVlcnkgdjMsICM0NzhcbkZsaWNraXR5LnNldEpRdWVyeSA9IGZ1bmN0aW9uKCBqcSApIHtcbiAgalF1ZXJ5ID0ganE7XG59O1xuXG5GbGlja2l0eS5DZWxsID0gQ2VsbDtcbkZsaWNraXR5LlNsaWRlID0gU2xpZGU7XG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG5cbn0se1wiLi9hbmltYXRlXCI6NCxcIi4vY2VsbFwiOjUsXCIuL3NsaWRlXCI6MTQsXCJldi1lbWl0dGVyXCI6MSxcImZpenp5LXVpLXV0aWxzXCI6MixcImdldC1zaXplXCI6MTV9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIGRyYWdcbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgICAgd2luZG93LFxuICAgICAgICByZXF1aXJlKCcuL2NvcmUnKSxcbiAgICAgICAgcmVxdWlyZSgndW5pZHJhZ2dlcicpLFxuICAgICAgICByZXF1aXJlKCdmaXp6eS11aS11dGlscycpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICB3aW5kb3cuRmxpY2tpdHkgPSBmYWN0b3J5KFxuICAgICAgICB3aW5kb3csXG4gICAgICAgIHdpbmRvdy5GbGlja2l0eSxcbiAgICAgICAgd2luZG93LlVuaWRyYWdnZXIsXG4gICAgICAgIHdpbmRvdy5maXp6eVVJVXRpbHMsXG4gICAgKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcyxcbiAgICBmdW5jdGlvbiBmYWN0b3J5KCB3aW5kb3csIEZsaWNraXR5LCBVbmlkcmFnZ2VyLCB1dGlscyApIHtcblxuLy8gLS0tLS0gZGVmYXVsdHMgLS0tLS0gLy9cblxuT2JqZWN0LmFzc2lnbiggRmxpY2tpdHkuZGVmYXVsdHMsIHtcbiAgZHJhZ2dhYmxlOiAnPjEnLFxuICBkcmFnVGhyZXNob2xkOiAzLFxufSApO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBkcmFnIHByb3RvdHlwZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5sZXQgcHJvdG8gPSBGbGlja2l0eS5wcm90b3R5cGU7XG5PYmplY3QuYXNzaWduKCBwcm90bywgVW5pZHJhZ2dlci5wcm90b3R5cGUgKTsgLy8gaW5oZXJpdCBVbmlkcmFnZ2VyXG5wcm90by50b3VjaEFjdGlvblZhbHVlID0gJyc7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5GbGlja2l0eS5jcmVhdGUuZHJhZyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLm9uKCAnYWN0aXZhdGUnLCB0aGlzLm9uQWN0aXZhdGVEcmFnICk7XG4gIHRoaXMub24oICd1aUNoYW5nZScsIHRoaXMuX3VpQ2hhbmdlRHJhZyApO1xuICB0aGlzLm9uKCAnZGVhY3RpdmF0ZScsIHRoaXMub25EZWFjdGl2YXRlRHJhZyApO1xuICB0aGlzLm9uKCAnY2VsbENoYW5nZScsIHRoaXMudXBkYXRlRHJhZ2dhYmxlICk7XG4gIHRoaXMub24oICdwb2ludGVyRG93bicsIHRoaXMuaGFuZGxlUG9pbnRlckRvd24gKTtcbiAgdGhpcy5vbiggJ3BvaW50ZXJVcCcsIHRoaXMuaGFuZGxlUG9pbnRlclVwICk7XG4gIHRoaXMub24oICdwb2ludGVyRG93bicsIHRoaXMuaGFuZGxlUG9pbnRlckRvbmUgKTtcbiAgdGhpcy5vbiggJ2RyYWdTdGFydCcsIHRoaXMuaGFuZGxlRHJhZ1N0YXJ0ICk7XG4gIHRoaXMub24oICdkcmFnTW92ZScsIHRoaXMuaGFuZGxlRHJhZ01vdmUgKTtcbiAgdGhpcy5vbiggJ2RyYWdFbmQnLCB0aGlzLmhhbmRsZURyYWdFbmQgKTtcbiAgdGhpcy5vbiggJ3N0YXRpY0NsaWNrJywgdGhpcy5oYW5kbGVTdGF0aWNDbGljayApO1xuICAvLyBUT0RPIHVwZGF0ZURyYWdnYWJsZSBvbiByZXNpemU/IGlmIGdyb3VwQ2VsbHMgJiBzbGlkZXMgY2hhbmdlXG59O1xuXG5wcm90by5vbkFjdGl2YXRlRHJhZyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmhhbmRsZXMgPSBbIHRoaXMudmlld3BvcnQgXTtcbiAgdGhpcy5iaW5kSGFuZGxlcygpO1xuICB0aGlzLnVwZGF0ZURyYWdnYWJsZSgpO1xufTtcblxucHJvdG8ub25EZWFjdGl2YXRlRHJhZyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnVuYmluZEhhbmRsZXMoKTtcbiAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdnYWJsZScpO1xufTtcblxucHJvdG8udXBkYXRlRHJhZ2dhYmxlID0gZnVuY3Rpb24oKSB7XG4gIC8vIGRpc2FibGUgZHJhZ2dpbmcgaWYgbGVzcyB0aGFuIDIgc2xpZGVzLiAjMjc4XG4gIGlmICggdGhpcy5vcHRpb25zLmRyYWdnYWJsZSA9PT0gJz4xJyApIHtcbiAgICB0aGlzLmlzRHJhZ2dhYmxlID0gdGhpcy5zbGlkZXMubGVuZ3RoID4gMTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmlzRHJhZ2dhYmxlID0gdGhpcy5vcHRpb25zLmRyYWdnYWJsZTtcbiAgfVxuICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSggJ2lzLWRyYWdnYWJsZScsIHRoaXMuaXNEcmFnZ2FibGUgKTtcbn07XG5cbnByb3RvLl91aUNoYW5nZURyYWcgPSBmdW5jdGlvbigpIHtcbiAgZGVsZXRlIHRoaXMuaXNGcmVlU2Nyb2xsaW5nO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcG9pbnRlciBldmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxucHJvdG8uaGFuZGxlUG9pbnRlckRvd24gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIGlmICggIXRoaXMuaXNEcmFnZ2FibGUgKSB7XG4gICAgLy8gcHJvY2VlZCBmb3Igc3RhdGljQ2xpY2tcbiAgICB0aGlzLmJpbmRBY3RpdmVQb2ludGVyRXZlbnRzKCBldmVudCApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBpc1RvdWNoU3RhcnQgPSBldmVudC50eXBlID09PSAndG91Y2hzdGFydCc7XG4gIGxldCBpc1RvdWNoUG9pbnRlciA9IGV2ZW50LnBvaW50ZXJUeXBlID09PSAndG91Y2gnO1xuICBsZXQgaXNGb2N1c05vZGUgPSBldmVudC50YXJnZXQubWF0Y2hlcygnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKTtcbiAgaWYgKCAhaXNUb3VjaFN0YXJ0ICYmICFpc1RvdWNoUG9pbnRlciAmJiAhaXNGb2N1c05vZGUgKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBpZiAoICFpc0ZvY3VzTm9kZSApIHRoaXMuZm9jdXMoKTtcbiAgLy8gYmx1clxuICBpZiAoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRoaXMuZWxlbWVudCApIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAvLyBzdG9wIGlmIGl0IHdhcyBtb3ZpbmdcbiAgdGhpcy5kcmFnWCA9IHRoaXMueDtcbiAgdGhpcy52aWV3cG9ydC5jbGFzc0xpc3QuYWRkKCdpcy1wb2ludGVyLWRvd24nKTtcbiAgLy8gdHJhY2sgc2Nyb2xsaW5nXG4gIHRoaXMucG9pbnRlckRvd25TY3JvbGwgPSBnZXRTY3JvbGxQb3NpdGlvbigpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIHRoaXMgKTtcbiAgdGhpcy5iaW5kQWN0aXZlUG9pbnRlckV2ZW50cyggZXZlbnQgKTtcbn07XG5cbi8vIC0tLS0tIG1vdmUgLS0tLS0gLy9cblxucHJvdG8uaGFzRHJhZ1N0YXJ0ZWQgPSBmdW5jdGlvbiggbW92ZVZlY3RvciApIHtcbiAgcmV0dXJuIE1hdGguYWJzKCBtb3ZlVmVjdG9yLnggKSA+IHRoaXMub3B0aW9ucy5kcmFnVGhyZXNob2xkO1xufTtcblxuLy8gLS0tLS0gdXAgLS0tLS0gLy9cblxucHJvdG8uaGFuZGxlUG9pbnRlclVwID0gZnVuY3Rpb24oKSB7XG4gIGRlbGV0ZSB0aGlzLmlzVG91Y2hTY3JvbGxpbmc7XG4gIHRoaXMudmlld3BvcnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtcG9pbnRlci1kb3duJyk7XG59O1xuXG5wcm90by5oYW5kbGVQb2ludGVyRG9uZSA9IGZ1bmN0aW9uKCkge1xuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIHRoaXMgKTtcbiAgZGVsZXRlIHRoaXMucG9pbnRlckRvd25TY3JvbGw7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBkcmFnZ2luZyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5wcm90by5oYW5kbGVEcmFnU3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5pc0RyYWdnYWJsZSApIHJldHVybjtcblxuICB0aGlzLmRyYWdTdGFydFBvc2l0aW9uID0gdGhpcy54O1xuICB0aGlzLnN0YXJ0QW5pbWF0aW9uKCk7XG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAnc2Nyb2xsJywgdGhpcyApO1xufTtcblxucHJvdG8uaGFuZGxlRHJhZ01vdmUgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgKSB7XG4gIGlmICggIXRoaXMuaXNEcmFnZ2FibGUgKSByZXR1cm47XG5cbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICB0aGlzLnByZXZpb3VzRHJhZ1ggPSB0aGlzLmRyYWdYO1xuICAvLyByZXZlcnNlIGlmIHJpZ2h0LXRvLWxlZnRcbiAgbGV0IGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5yaWdodFRvTGVmdCA/IC0xIDogMTtcbiAgLy8gd3JhcCBhcm91bmQgbW92ZS4gIzU4OVxuICBpZiAoIHRoaXMuaXNXcmFwcGluZyApIG1vdmVWZWN0b3IueCAlPSB0aGlzLnNsaWRlYWJsZVdpZHRoO1xuICBsZXQgZHJhZ1ggPSB0aGlzLmRyYWdTdGFydFBvc2l0aW9uICsgbW92ZVZlY3Rvci54ICogZGlyZWN0aW9uO1xuXG4gIGlmICggIXRoaXMuaXNXcmFwcGluZyApIHtcbiAgICAvLyBzbG93IGRyYWdcbiAgICBsZXQgb3JpZ2luQm91bmQgPSBNYXRoLm1heCggLXRoaXMuc2xpZGVzWzBdLnRhcmdldCwgdGhpcy5kcmFnU3RhcnRQb3NpdGlvbiApO1xuICAgIGRyYWdYID0gZHJhZ1ggPiBvcmlnaW5Cb3VuZCA/ICggZHJhZ1ggKyBvcmlnaW5Cb3VuZCApICogMC41IDogZHJhZ1g7XG4gICAgbGV0IGVuZEJvdW5kID0gTWF0aC5taW4oIC10aGlzLmdldExhc3RTbGlkZSgpLnRhcmdldCwgdGhpcy5kcmFnU3RhcnRQb3NpdGlvbiApO1xuICAgIGRyYWdYID0gZHJhZ1ggPCBlbmRCb3VuZCA/ICggZHJhZ1ggKyBlbmRCb3VuZCApICogMC41IDogZHJhZ1g7XG4gIH1cblxuICB0aGlzLmRyYWdYID0gZHJhZ1g7XG4gIHRoaXMuZHJhZ01vdmVUaW1lID0gbmV3IERhdGUoKTtcbn07XG5cbnByb3RvLmhhbmRsZURyYWdFbmQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5pc0RyYWdnYWJsZSApIHJldHVybjtcblxuICBsZXQgeyBmcmVlU2Nyb2xsIH0gPSB0aGlzLm9wdGlvbnM7XG4gIGlmICggZnJlZVNjcm9sbCApIHRoaXMuaXNGcmVlU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgLy8gc2V0IHNlbGVjdGVkSW5kZXggYmFzZWQgb24gd2hlcmUgZmxpY2sgd2lsbCBlbmQgdXBcbiAgbGV0IGluZGV4ID0gdGhpcy5kcmFnRW5kUmVzdGluZ1NlbGVjdCgpO1xuXG4gIGlmICggZnJlZVNjcm9sbCAmJiAhdGhpcy5pc1dyYXBwaW5nICkge1xuICAgIC8vIGlmIGZyZWUtc2Nyb2xsICYgbm90IHdyYXAgYXJvdW5kXG4gICAgLy8gZG8gbm90IGZyZWUtc2Nyb2xsIGlmIGdvaW5nIG91dHNpZGUgb2YgYm91bmRpbmcgc2xpZGVzXG4gICAgLy8gc28gYm91bmRpbmcgc2xpZGVzIGNhbiBhdHRyYWN0IHNsaWRlciwgYW5kIGtlZXAgaXQgaW4gYm91bmRzXG4gICAgbGV0IHJlc3RpbmdYID0gdGhpcy5nZXRSZXN0aW5nUG9zaXRpb24oKTtcbiAgICB0aGlzLmlzRnJlZVNjcm9sbGluZyA9IC1yZXN0aW5nWCA+IHRoaXMuc2xpZGVzWzBdLnRhcmdldCAmJlxuICAgICAgLXJlc3RpbmdYIDwgdGhpcy5nZXRMYXN0U2xpZGUoKS50YXJnZXQ7XG4gIH0gZWxzZSBpZiAoICFmcmVlU2Nyb2xsICYmIGluZGV4ID09PSB0aGlzLnNlbGVjdGVkSW5kZXggKSB7XG4gICAgLy8gYm9vc3Qgc2VsZWN0aW9uIGlmIHNlbGVjdGVkIGluZGV4IGhhcyBub3QgY2hhbmdlZFxuICAgIGluZGV4ICs9IHRoaXMuZHJhZ0VuZEJvb3N0U2VsZWN0KCk7XG4gIH1cbiAgZGVsZXRlIHRoaXMucHJldmlvdXNEcmFnWDtcbiAgLy8gYXBwbHkgc2VsZWN0aW9uXG4gIC8vIEhBQ0ssIHNldCBmbGFnIHNvIGRyYWdnaW5nIHN0YXlzIGluIGNvcnJlY3QgZGlyZWN0aW9uXG4gIHRoaXMuaXNEcmFnU2VsZWN0ID0gdGhpcy5pc1dyYXBwaW5nO1xuICB0aGlzLnNlbGVjdCggaW5kZXggKTtcbiAgZGVsZXRlIHRoaXMuaXNEcmFnU2VsZWN0O1xufTtcblxucHJvdG8uZHJhZ0VuZFJlc3RpbmdTZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgbGV0IHJlc3RpbmdYID0gdGhpcy5nZXRSZXN0aW5nUG9zaXRpb24oKTtcbiAgLy8gaG93IGZhciBhd2F5IGZyb20gc2VsZWN0ZWQgc2xpZGVcbiAgbGV0IGRpc3RhbmNlID0gTWF0aC5hYnMoIHRoaXMuZ2V0U2xpZGVEaXN0YW5jZSggLXJlc3RpbmdYLCB0aGlzLnNlbGVjdGVkSW5kZXggKSApO1xuICAvLyBnZXQgY2xvc2V0IHJlc3RpbmcgZ29pbmcgdXAgYW5kIGdvaW5nIGRvd25cbiAgbGV0IHBvc2l0aXZlUmVzdGluZyA9IHRoaXMuX2dldENsb3Nlc3RSZXN0aW5nKCByZXN0aW5nWCwgZGlzdGFuY2UsIDEgKTtcbiAgbGV0IG5lZ2F0aXZlUmVzdGluZyA9IHRoaXMuX2dldENsb3Nlc3RSZXN0aW5nKCByZXN0aW5nWCwgZGlzdGFuY2UsIC0xICk7XG4gIC8vIHVzZSBjbG9zZXIgcmVzdGluZyBmb3Igd3JhcC1hcm91bmRcbiAgcmV0dXJuIHBvc2l0aXZlUmVzdGluZy5kaXN0YW5jZSA8IG5lZ2F0aXZlUmVzdGluZy5kaXN0YW5jZSA/XG4gICAgcG9zaXRpdmVSZXN0aW5nLmluZGV4IDogbmVnYXRpdmVSZXN0aW5nLmluZGV4O1xufTtcblxuLyoqXG4gKiBnaXZlbiByZXN0aW5nIFggYW5kIGRpc3RhbmNlIHRvIHNlbGVjdGVkIGNlbGxcbiAqIGdldCB0aGUgZGlzdGFuY2UgYW5kIGluZGV4IG9mIHRoZSBjbG9zZXN0IGNlbGxcbiAqIEBwYXJhbSB7TnVtYmVyfSByZXN0aW5nWCAtIGVzdGltYXRlZCBwb3N0LWZsaWNrIHJlc3RpbmcgcG9zaXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSBkaXN0YW5jZSAtIGRpc3RhbmNlIHRvIHNlbGVjdGVkIGNlbGxcbiAqIEBwYXJhbSB7SW50ZWdlcn0gaW5jcmVtZW50IC0gKzEgb3IgLTEsIGdvaW5nIHVwIG9yIGRvd25cbiAqIEByZXR1cm5zIHtPYmplY3R9IC0geyBkaXN0YW5jZToge051bWJlcn0sIGluZGV4OiB7SW50ZWdlcn0gfVxuICovXG5wcm90by5fZ2V0Q2xvc2VzdFJlc3RpbmcgPSBmdW5jdGlvbiggcmVzdGluZ1gsIGRpc3RhbmNlLCBpbmNyZW1lbnQgKSB7XG4gIGxldCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRJbmRleDtcbiAgbGV0IG1pbkRpc3RhbmNlID0gSW5maW5pdHk7XG4gIGxldCBjb25kaXRpb24gPSB0aGlzLm9wdGlvbnMuY29udGFpbiAmJiAhdGhpcy5pc1dyYXBwaW5nID9cbiAgICAvLyBpZiBjb250YWluaW5nLCBrZWVwIGdvaW5nIGlmIGRpc3RhbmNlIGlzIGVxdWFsIHRvIG1pbkRpc3RhbmNlXG4gICAgKCBkaXN0LCBtaW5EaXN0ICkgPT4gZGlzdCA8PSBtaW5EaXN0IDpcbiAgICAoIGRpc3QsIG1pbkRpc3QgKSA9PiBkaXN0IDwgbWluRGlzdDtcblxuICB3aGlsZSAoIGNvbmRpdGlvbiggZGlzdGFuY2UsIG1pbkRpc3RhbmNlICkgKSB7XG4gICAgLy8gbWVhc3VyZSBkaXN0YW5jZSB0byBuZXh0IGNlbGxcbiAgICBpbmRleCArPSBpbmNyZW1lbnQ7XG4gICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICBkaXN0YW5jZSA9IHRoaXMuZ2V0U2xpZGVEaXN0YW5jZSggLXJlc3RpbmdYLCBpbmRleCApO1xuICAgIGlmICggZGlzdGFuY2UgPT09IG51bGwgKSBicmVhaztcblxuICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoIGRpc3RhbmNlICk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBkaXN0YW5jZTogbWluRGlzdGFuY2UsXG4gICAgLy8gc2VsZWN0ZWQgd2FzIHByZXZpb3VzIGluZGV4XG4gICAgaW5kZXg6IGluZGV4IC0gaW5jcmVtZW50LFxuICB9O1xufTtcblxuLyoqXG4gKiBtZWFzdXJlIGRpc3RhbmNlIGJldHdlZW4geCBhbmQgYSBzbGlkZSB0YXJnZXRcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IC0gaG9yaXpvbnRhbCBwb3NpdGlvblxuICogQHBhcmFtIHtJbnRlZ2VyfSBpbmRleCAtIHNsaWRlIGluZGV4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSAtIHNsaWRlIGRpc3RhbmNlXG4gKi9cbnByb3RvLmdldFNsaWRlRGlzdGFuY2UgPSBmdW5jdGlvbiggeCwgaW5kZXggKSB7XG4gIGxldCBsZW4gPSB0aGlzLnNsaWRlcy5sZW5ndGg7XG4gIC8vIHdyYXAgYXJvdW5kIGlmIGF0IGxlYXN0IDIgc2xpZGVzXG4gIGxldCBpc1dyYXBBcm91bmQgPSB0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCAmJiBsZW4gPiAxO1xuICBsZXQgc2xpZGVJbmRleCA9IGlzV3JhcEFyb3VuZCA/IHV0aWxzLm1vZHVsbyggaW5kZXgsIGxlbiApIDogaW5kZXg7XG4gIGxldCBzbGlkZSA9IHRoaXMuc2xpZGVzWyBzbGlkZUluZGV4IF07XG4gIGlmICggIXNsaWRlICkgcmV0dXJuIG51bGw7XG5cbiAgLy8gYWRkIGRpc3RhbmNlIGZvciB3cmFwLWFyb3VuZCBzbGlkZXNcbiAgbGV0IHdyYXAgPSBpc1dyYXBBcm91bmQgPyB0aGlzLnNsaWRlYWJsZVdpZHRoICogTWF0aC5mbG9vciggaW5kZXgvbGVuICkgOiAwO1xuICByZXR1cm4geCAtICggc2xpZGUudGFyZ2V0ICsgd3JhcCApO1xufTtcblxucHJvdG8uZHJhZ0VuZEJvb3N0U2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gIC8vIGRvIG5vdCBib29zdCBpZiBubyBwcmV2aW91c0RyYWdYIG9yIGRyYWdNb3ZlVGltZVxuICBpZiAoIHRoaXMucHJldmlvdXNEcmFnWCA9PT0gdW5kZWZpbmVkIHx8ICF0aGlzLmRyYWdNb3ZlVGltZSB8fFxuICAgIC8vIG9yIGlmIGRyYWcgd2FzIGhlbGQgZm9yIDEwMCBtc1xuICAgIG5ldyBEYXRlKCkgLSB0aGlzLmRyYWdNb3ZlVGltZSA+IDEwMCApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGxldCBkaXN0YW5jZSA9IHRoaXMuZ2V0U2xpZGVEaXN0YW5jZSggLXRoaXMuZHJhZ1gsIHRoaXMuc2VsZWN0ZWRJbmRleCApO1xuICBsZXQgZGVsdGEgPSB0aGlzLnByZXZpb3VzRHJhZ1ggLSB0aGlzLmRyYWdYO1xuICBpZiAoIGRpc3RhbmNlID4gMCAmJiBkZWx0YSA+IDAgKSB7XG4gICAgLy8gYm9vc3QgdG8gbmV4dCBpZiBtb3ZpbmcgdG93YXJkcyB0aGUgcmlnaHQsIGFuZCBwb3NpdGl2ZSB2ZWxvY2l0eVxuICAgIHJldHVybiAxO1xuICB9IGVsc2UgaWYgKCBkaXN0YW5jZSA8IDAgJiYgZGVsdGEgPCAwICkge1xuICAgIC8vIGJvb3N0IHRvIHByZXZpb3VzIGlmIG1vdmluZyB0b3dhcmRzIHRoZSBsZWZ0LCBhbmQgbmVnYXRpdmUgdmVsb2NpdHlcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG4vLyAtLS0tLSBzY3JvbGwgLS0tLS0gLy9cblxucHJvdG8ub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgbGV0IHNjcm9sbCA9IGdldFNjcm9sbFBvc2l0aW9uKCk7XG4gIGxldCBzY3JvbGxNb3ZlWCA9IHRoaXMucG9pbnRlckRvd25TY3JvbGwueCAtIHNjcm9sbC54O1xuICBsZXQgc2Nyb2xsTW92ZVkgPSB0aGlzLnBvaW50ZXJEb3duU2Nyb2xsLnkgLSBzY3JvbGwueTtcbiAgLy8gY2FuY2VsIGNsaWNrL3RhcCBpZiBzY3JvbGwgaXMgdG9vIG11Y2hcbiAgaWYgKCBNYXRoLmFicyggc2Nyb2xsTW92ZVggKSA+IDMgfHwgTWF0aC5hYnMoIHNjcm9sbE1vdmVZICkgPiAzICkge1xuICAgIHRoaXMucG9pbnRlckRvbmUoKTtcbiAgfVxufTtcblxuLy8gLS0tLS0gdXRpbHMgLS0tLS0gLy9cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsUG9zaXRpb24oKSB7XG4gIHJldHVybiB7XG4gICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgIHk6IHdpbmRvdy5wYWdlWU9mZnNldCxcbiAgfTtcbn1cblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG5cbn0se1wiLi9jb3JlXCI6NixcImZpenp5LXVpLXV0aWxzXCI6MixcInVuaWRyYWdnZXJcIjoyMX1dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gaW1hZ2VzbG9hZGVkXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgIHJlcXVpcmUoJy4vY29yZScpLFxuICAgICAgICByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgZmFjdG9yeShcbiAgICAgICAgd2luZG93LkZsaWNraXR5LFxuICAgICAgICB3aW5kb3cuaW1hZ2VzTG9hZGVkLFxuICAgICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsXG4gICAgZnVuY3Rpb24gZmFjdG9yeSggRmxpY2tpdHksIGltYWdlc0xvYWRlZCApIHtcblxuRmxpY2tpdHkuY3JlYXRlLmltYWdlc0xvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLm9uKCAnYWN0aXZhdGUnLCB0aGlzLmltYWdlc0xvYWRlZCApO1xufTtcblxuRmxpY2tpdHkucHJvdG90eXBlLmltYWdlc0xvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aGlzLm9wdGlvbnMuaW1hZ2VzTG9hZGVkICkgcmV0dXJuO1xuXG4gIGxldCBvbkltYWdlc0xvYWRlZFByb2dyZXNzID0gKCBpbnN0YW5jZSwgaW1hZ2UgKSA9PiB7XG4gICAgbGV0IGNlbGwgPSB0aGlzLmdldFBhcmVudENlbGwoIGltYWdlLmltZyApO1xuICAgIHRoaXMuY2VsbFNpemVDaGFuZ2UoIGNlbGwgJiYgY2VsbC5lbGVtZW50ICk7XG4gICAgaWYgKCAhdGhpcy5vcHRpb25zLmZyZWVTY3JvbGwgKSB0aGlzLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCgpO1xuICB9O1xuICBpbWFnZXNMb2FkZWQoIHRoaXMuc2xpZGVyICkub24oICdwcm9ncmVzcycsIG9uSW1hZ2VzTG9hZGVkUHJvZ3Jlc3MgKTtcbn07XG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG5cbn0se1wiLi9jb3JlXCI6NixcImltYWdlc2xvYWRlZFwiOjE2fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKiFcbiAqIEZsaWNraXR5IHYzLjAuMFxuICogVG91Y2gsIHJlc3BvbnNpdmUsIGZsaWNrYWJsZSBjYXJvdXNlbHNcbiAqXG4gKiBMaWNlbnNlZCBHUEx2MyBmb3Igb3BlbiBzb3VyY2UgdXNlXG4gKiBvciBGbGlja2l0eSBDb21tZXJjaWFsIExpY2Vuc2UgZm9yIGNvbW1lcmNpYWwgdXNlXG4gKlxuICogaHR0cHM6Ly9mbGlja2l0eS5tZXRhZml6enkuY29cbiAqIENvcHlyaWdodCAyMDE1LTIwMjIgTWV0YWZpenp5XG4gKi9cblxuaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICBjb25zdCBGbGlja2l0eSA9IHJlcXVpcmUoJy4vY29yZScpO1xuICByZXF1aXJlKCcuL2RyYWcnKTtcbiAgcmVxdWlyZSgnLi9wcmV2LW5leHQtYnV0dG9uJyk7XG4gIHJlcXVpcmUoJy4vcGFnZS1kb3RzJyk7XG4gIHJlcXVpcmUoJy4vcGxheWVyJyk7XG4gIHJlcXVpcmUoJy4vYWRkLXJlbW92ZS1jZWxsJyk7XG4gIHJlcXVpcmUoJy4vbGF6eWxvYWQnKTtcbiAgcmVxdWlyZSgnLi9pbWFnZXNsb2FkZWQnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IEZsaWNraXR5O1xufVxuXG59LHtcIi4vYWRkLXJlbW92ZS1jZWxsXCI6MyxcIi4vY29yZVwiOjYsXCIuL2RyYWdcIjo3LFwiLi9pbWFnZXNsb2FkZWRcIjo4LFwiLi9sYXp5bG9hZFwiOjEwLFwiLi9wYWdlLWRvdHNcIjoxMSxcIi4vcGxheWVyXCI6MTIsXCIuL3ByZXYtbmV4dC1idXR0b25cIjoxM31dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIGxhenlsb2FkXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgIHJlcXVpcmUoJy4vY29yZScpLFxuICAgICAgICByZXF1aXJlKCdmaXp6eS11aS11dGlscycpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICBmYWN0b3J5KFxuICAgICAgICB3aW5kb3cuRmxpY2tpdHksXG4gICAgICAgIHdpbmRvdy5maXp6eVVJVXRpbHMsXG4gICAgKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gZmFjdG9yeSggRmxpY2tpdHksIHV0aWxzICkge1xuXG5jb25zdCBsYXp5QXR0ciA9ICdkYXRhLWZsaWNraXR5LWxhenlsb2FkJztcbmNvbnN0IGxhenlTcmNBdHRyID0gYCR7bGF6eUF0dHJ9LXNyY2A7XG5jb25zdCBsYXp5U3Jjc2V0QXR0ciA9IGAke2xhenlBdHRyfS1zcmNzZXRgO1xuY29uc3QgaW1nU2VsZWN0b3IgPSBgaW1nWyR7bGF6eUF0dHJ9XSwgaW1nWyR7bGF6eVNyY0F0dHJ9XSwgYCArXG4gIGBpbWdbJHtsYXp5U3Jjc2V0QXR0cn1dLCBzb3VyY2VbJHtsYXp5U3Jjc2V0QXR0cn1dYDtcblxuRmxpY2tpdHkuY3JlYXRlLmxhenlMb2FkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMub24oICdzZWxlY3QnLCB0aGlzLmxhenlMb2FkICk7XG5cbiAgdGhpcy5oYW5kbGVMYXp5TG9hZENvbXBsZXRlID0gdGhpcy5vbkxhenlMb2FkQ29tcGxldGUuYmluZCggdGhpcyApO1xufTtcblxubGV0IHByb3RvID0gRmxpY2tpdHkucHJvdG90eXBlO1xuXG5wcm90by5sYXp5TG9hZCA9IGZ1bmN0aW9uKCkge1xuICBsZXQgeyBsYXp5TG9hZCB9ID0gdGhpcy5vcHRpb25zO1xuICBpZiAoICFsYXp5TG9hZCApIHJldHVybjtcblxuICAvLyBnZXQgYWRqYWNlbnQgY2VsbHMsIHVzZSBsYXp5TG9hZCBvcHRpb24gZm9yIGFkamFjZW50IGNvdW50XG4gIGxldCBhZGpDb3VudCA9IHR5cGVvZiBsYXp5TG9hZCA9PSAnbnVtYmVyJyA/IGxhenlMb2FkIDogMDtcbiAgLy8gbGF6eSBsb2FkIGltYWdlc1xuICB0aGlzLmdldEFkamFjZW50Q2VsbEVsZW1lbnRzKCBhZGpDb3VudCApXG4gICAgLm1hcCggZ2V0Q2VsbExhenlJbWFnZXMgKVxuICAgIC5mbGF0KClcbiAgICAuZm9yRWFjaCggKCBpbWcgKSA9PiBuZXcgTGF6eUxvYWRlciggaW1nLCB0aGlzLmhhbmRsZUxhenlMb2FkQ29tcGxldGUgKSApO1xufTtcblxuZnVuY3Rpb24gZ2V0Q2VsbExhenlJbWFnZXMoIGNlbGxFbGVtICkge1xuICAvLyBjaGVjayBpZiBjZWxsIGVsZW1lbnQgaXMgbGF6eSBpbWFnZVxuICBpZiAoIGNlbGxFbGVtLm1hdGNoZXMoJ2ltZycpICkge1xuICAgIGxldCBjZWxsQXR0ciA9IGNlbGxFbGVtLmdldEF0dHJpYnV0ZSggbGF6eUF0dHIgKTtcbiAgICBsZXQgY2VsbFNyY0F0dHIgPSBjZWxsRWxlbS5nZXRBdHRyaWJ1dGUoIGxhenlTcmNBdHRyICk7XG4gICAgbGV0IGNlbGxTcmNzZXRBdHRyID0gY2VsbEVsZW0uZ2V0QXR0cmlidXRlKCBsYXp5U3Jjc2V0QXR0ciApO1xuICAgIGlmICggY2VsbEF0dHIgfHwgY2VsbFNyY0F0dHIgfHwgY2VsbFNyY3NldEF0dHIgKSB7XG4gICAgICByZXR1cm4gY2VsbEVsZW07XG4gICAgfVxuICB9XG4gIC8vIHNlbGVjdCBsYXp5IGltYWdlcyBpbiBjZWxsXG4gIHJldHVybiBbIC4uLmNlbGxFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoIGltZ1NlbGVjdG9yICkgXTtcbn1cblxucHJvdG8ub25MYXp5TG9hZENvbXBsZXRlID0gZnVuY3Rpb24oIGltZywgZXZlbnQgKSB7XG4gIGxldCBjZWxsID0gdGhpcy5nZXRQYXJlbnRDZWxsKCBpbWcgKTtcbiAgbGV0IGNlbGxFbGVtID0gY2VsbCAmJiBjZWxsLmVsZW1lbnQ7XG4gIHRoaXMuY2VsbFNpemVDaGFuZ2UoIGNlbGxFbGVtICk7XG5cbiAgdGhpcy5kaXNwYXRjaEV2ZW50KCAnbGF6eUxvYWQnLCBldmVudCwgY2VsbEVsZW0gKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIExhenlMb2FkZXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLyoqXG4gKiBjbGFzcyB0byBoYW5kbGUgbG9hZGluZyBpbWFnZXNcbiAqIEBwYXJhbSB7SW1hZ2V9IGltZyAtIEltYWdlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGUgLSBjYWxsYmFjayBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBMYXp5TG9hZGVyKCBpbWcsIG9uQ29tcGxldGUgKSB7XG4gIHRoaXMuaW1nID0gaW1nO1xuICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlO1xuICB0aGlzLmxvYWQoKTtcbn1cblxuTGF6eUxvYWRlci5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSB1dGlscy5oYW5kbGVFdmVudDtcblxuTGF6eUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xuICAvLyBnZXQgc3JjICYgc3Jjc2V0XG4gIGxldCBzcmMgPSB0aGlzLmltZy5nZXRBdHRyaWJ1dGUoIGxhenlBdHRyICkgfHxcbiAgICB0aGlzLmltZy5nZXRBdHRyaWJ1dGUoIGxhenlTcmNBdHRyICk7XG4gIGxldCBzcmNzZXQgPSB0aGlzLmltZy5nZXRBdHRyaWJ1dGUoIGxhenlTcmNzZXRBdHRyICk7XG4gIC8vIHNldCBzcmMgJiBzZXJzZXRcbiAgdGhpcy5pbWcuc3JjID0gc3JjO1xuICBpZiAoIHNyY3NldCApIHRoaXMuaW1nLnNldEF0dHJpYnV0ZSggJ3NyY3NldCcsIHNyY3NldCApO1xuICAvLyByZW1vdmUgYXR0clxuICB0aGlzLmltZy5yZW1vdmVBdHRyaWJ1dGUoIGxhenlBdHRyICk7XG4gIHRoaXMuaW1nLnJlbW92ZUF0dHJpYnV0ZSggbGF6eVNyY0F0dHIgKTtcbiAgdGhpcy5pbWcucmVtb3ZlQXR0cmlidXRlKCBsYXp5U3Jjc2V0QXR0ciApO1xufTtcblxuTGF6eUxvYWRlci5wcm90b3R5cGUub25sb2FkID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLmNvbXBsZXRlKCBldmVudCwgJ2ZsaWNraXR5LWxhenlsb2FkZWQnICk7XG59O1xuXG5MYXp5TG9hZGVyLnByb3RvdHlwZS5vbmVycm9yID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLmNvbXBsZXRlKCBldmVudCwgJ2ZsaWNraXR5LWxhenllcnJvcicgKTtcbn07XG5cbkxhenlMb2FkZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oIGV2ZW50LCBjbGFzc05hbWUgKSB7XG4gIC8vIHVuYmluZCBldmVudHNcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgbGV0IG1lZGlhRWxlbSA9IHRoaXMuaW1nLnBhcmVudE5vZGUubWF0Y2hlcygncGljdHVyZScpID8gdGhpcy5pbWcucGFyZW50Tm9kZSA6IHRoaXMuaW1nO1xuICBtZWRpYUVsZW0uY2xhc3NMaXN0LmFkZCggY2xhc3NOYW1lICk7XG5cbiAgdGhpcy5vbkNvbXBsZXRlKCB0aGlzLmltZywgZXZlbnQgKTtcbn07XG5cbi8vIC0tLS0tICAtLS0tLSAvL1xuXG5GbGlja2l0eS5MYXp5TG9hZGVyID0gTGF6eUxvYWRlcjtcblxucmV0dXJuIEZsaWNraXR5O1xuXG59ICkgKTtcblxufSx7XCIuL2NvcmVcIjo2LFwiZml6enktdWktdXRpbHNcIjoyfV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gcGFnZSBkb3RzXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgIHJlcXVpcmUoJy4vY29yZScpLFxuICAgICAgICByZXF1aXJlKCdmaXp6eS11aS11dGlscycpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICBmYWN0b3J5KFxuICAgICAgICB3aW5kb3cuRmxpY2tpdHksXG4gICAgICAgIHdpbmRvdy5maXp6eVVJVXRpbHMsXG4gICAgKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gZmFjdG9yeSggRmxpY2tpdHksIHV0aWxzICkge1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQYWdlRG90cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBQYWdlRG90cygpIHtcbiAgLy8gY3JlYXRlIGhvbGRlciBlbGVtZW50XG4gIHRoaXMuaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRoaXMuaG9sZGVyLmNsYXNzTmFtZSA9ICdmbGlja2l0eS1wYWdlLWRvdHMnO1xuICAvLyBjcmVhdGUgZG90cywgYXJyYXkgb2YgZWxlbWVudHNcbiAgdGhpcy5kb3RzID0gW107XG59XG5cblBhZ2VEb3RzLnByb3RvdHlwZS5zZXREb3RzID0gZnVuY3Rpb24oIHNsaWRlc0xlbmd0aCApIHtcbiAgLy8gZ2V0IGRpZmZlcmVuY2UgYmV0d2VlbiBudW1iZXIgb2Ygc2xpZGVzIGFuZCBudW1iZXIgb2YgZG90c1xuICBsZXQgZGVsdGEgPSBzbGlkZXNMZW5ndGggLSB0aGlzLmRvdHMubGVuZ3RoO1xuICBpZiAoIGRlbHRhID4gMCApIHtcbiAgICB0aGlzLmFkZERvdHMoIGRlbHRhICk7XG4gIH0gZWxzZSBpZiAoIGRlbHRhIDwgMCApIHtcbiAgICB0aGlzLnJlbW92ZURvdHMoIC1kZWx0YSApO1xuICB9XG59O1xuXG5QYWdlRG90cy5wcm90b3R5cGUuYWRkRG90cyA9IGZ1bmN0aW9uKCBjb3VudCApIHtcbiAgbGV0IG5ld0RvdHMgPSBuZXcgQXJyYXkoIGNvdW50ICkuZmlsbCgpXG4gICAgLm1hcCggKCBpdGVtLCBpICkgPT4ge1xuICAgICAgbGV0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgZG90LnNldEF0dHJpYnV0ZSggJ3R5cGUnLCAnYnV0dG9uJyApO1xuICAgICAgbGV0IG51bSA9IGkgKyAxICsgdGhpcy5kb3RzLmxlbmd0aDtcbiAgICAgIGRvdC5jbGFzc05hbWUgPSAnZmxpY2tpdHktcGFnZS1kb3QnO1xuICAgICAgZG90LnRleHRDb250ZW50ID0gYFZpZXcgc2xpZGUgJHtudW19YDtcbiAgICAgIHJldHVybiBkb3Q7XG4gICAgfSApO1xuXG4gIHRoaXMuaG9sZGVyLmFwcGVuZCggLi4ubmV3RG90cyApO1xuICB0aGlzLmRvdHMgPSB0aGlzLmRvdHMuY29uY2F0KCBuZXdEb3RzICk7XG59O1xuXG5QYWdlRG90cy5wcm90b3R5cGUucmVtb3ZlRG90cyA9IGZ1bmN0aW9uKCBjb3VudCApIHtcbiAgLy8gcmVtb3ZlIGZyb20gdGhpcy5kb3RzIGNvbGxlY3Rpb25cbiAgbGV0IHJlbW92ZURvdHMgPSB0aGlzLmRvdHMuc3BsaWNlKCB0aGlzLmRvdHMubGVuZ3RoIC0gY291bnQsIGNvdW50ICk7XG4gIC8vIHJlbW92ZSBmcm9tIERPTVxuICByZW1vdmVEb3RzLmZvckVhY2goICggZG90ICkgPT4gZG90LnJlbW92ZSgpICk7XG59O1xuXG5QYWdlRG90cy5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbiggaW5kZXggKSB7XG4gIC8vIHJlbW92ZSBzZWxlY3RlZCBjbGFzcyBvbiBwcmV2aW91c1xuICBpZiAoIHRoaXMuc2VsZWN0ZWREb3QgKSB7XG4gICAgdGhpcy5zZWxlY3RlZERvdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1zZWxlY3RlZCcpO1xuICAgIHRoaXMuc2VsZWN0ZWREb3QucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnKTtcbiAgfVxuICAvLyBkb24ndCBwcm9jZWVkIGlmIG5vIGRvdHNcbiAgaWYgKCAhdGhpcy5kb3RzLmxlbmd0aCApIHJldHVybjtcblxuICB0aGlzLnNlbGVjdGVkRG90ID0gdGhpcy5kb3RzWyBpbmRleCBdO1xuICB0aGlzLnNlbGVjdGVkRG90LmNsYXNzTGlzdC5hZGQoJ2lzLXNlbGVjdGVkJyk7XG4gIHRoaXMuc2VsZWN0ZWREb3Quc2V0QXR0cmlidXRlKCAnYXJpYS1jdXJyZW50JywgJ3N0ZXAnICk7XG59O1xuXG5GbGlja2l0eS5QYWdlRG90cyA9IFBhZ2VEb3RzO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBGbGlja2l0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5PYmplY3QuYXNzaWduKCBGbGlja2l0eS5kZWZhdWx0cywge1xuICBwYWdlRG90czogdHJ1ZSxcbn0gKTtcblxuRmxpY2tpdHkuY3JlYXRlLnBhZ2VEb3RzID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMub3B0aW9ucy5wYWdlRG90cyApIHJldHVybjtcblxuICB0aGlzLnBhZ2VEb3RzID0gbmV3IFBhZ2VEb3RzKCk7XG4gIHRoaXMuaGFuZGxlUGFnZURvdHNDbGljayA9IHRoaXMub25QYWdlRG90c0NsaWNrLmJpbmQoIHRoaXMgKTtcbiAgLy8gZXZlbnRzXG4gIHRoaXMub24oICdhY3RpdmF0ZScsIHRoaXMuYWN0aXZhdGVQYWdlRG90cyApO1xuICB0aGlzLm9uKCAnc2VsZWN0JywgdGhpcy51cGRhdGVTZWxlY3RlZFBhZ2VEb3RzICk7XG4gIHRoaXMub24oICdjZWxsQ2hhbmdlJywgdGhpcy51cGRhdGVQYWdlRG90cyApO1xuICB0aGlzLm9uKCAncmVzaXplJywgdGhpcy51cGRhdGVQYWdlRG90cyApO1xuICB0aGlzLm9uKCAnZGVhY3RpdmF0ZScsIHRoaXMuZGVhY3RpdmF0ZVBhZ2VEb3RzICk7XG59O1xuXG5sZXQgcHJvdG8gPSBGbGlja2l0eS5wcm90b3R5cGU7XG5cbnByb3RvLmFjdGl2YXRlUGFnZURvdHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wYWdlRG90cy5zZXREb3RzKCB0aGlzLnNsaWRlcy5sZW5ndGggKTtcbiAgdGhpcy5mb2N1c2FibGVFbGVtcy5wdXNoKCAuLi50aGlzLnBhZ2VEb3RzLmRvdHMgKTtcbiAgdGhpcy5wYWdlRG90cy5ob2xkZXIuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgdGhpcy5oYW5kbGVQYWdlRG90c0NsaWNrICk7XG4gIHRoaXMuZWxlbWVudC5hcHBlbmQoIHRoaXMucGFnZURvdHMuaG9sZGVyICk7XG59O1xuXG5wcm90by5vblBhZ2VEb3RzQ2xpY2sgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIGxldCBpbmRleCA9IHRoaXMucGFnZURvdHMuZG90cy5pbmRleE9mKCBldmVudC50YXJnZXQgKTtcbiAgaWYgKCBpbmRleCA9PT0gLTEgKSByZXR1cm47IC8vIG9ubHkgZG90IGNsaWNrc1xuXG4gIHRoaXMudWlDaGFuZ2UoKTtcbiAgdGhpcy5zZWxlY3QoIGluZGV4ICk7XG59O1xuXG5wcm90by51cGRhdGVTZWxlY3RlZFBhZ2VEb3RzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucGFnZURvdHMudXBkYXRlU2VsZWN0ZWQoIHRoaXMuc2VsZWN0ZWRJbmRleCApO1xufTtcblxucHJvdG8udXBkYXRlUGFnZURvdHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wYWdlRG90cy5kb3RzLmZvckVhY2goICggZG90ICkgPT4ge1xuICAgIHV0aWxzLnJlbW92ZUZyb20oIHRoaXMuZm9jdXNhYmxlRWxlbXMsIGRvdCApO1xuICB9ICk7XG4gIHRoaXMucGFnZURvdHMuc2V0RG90cyggdGhpcy5zbGlkZXMubGVuZ3RoICk7XG4gIHRoaXMuZm9jdXNhYmxlRWxlbXMucHVzaCggLi4udGhpcy5wYWdlRG90cy5kb3RzICk7XG59O1xuXG5wcm90by5kZWFjdGl2YXRlUGFnZURvdHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wYWdlRG90cy5ob2xkZXIucmVtb3ZlKCk7XG4gIHRoaXMucGFnZURvdHMuaG9sZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdjbGljaycsIHRoaXMuaGFuZGxlUGFnZURvdHNDbGljayApO1xufTtcblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cbkZsaWNraXR5LlBhZ2VEb3RzID0gUGFnZURvdHM7XG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG5cbn0se1wiLi9jb3JlXCI6NixcImZpenp5LXVpLXV0aWxzXCI6Mn1dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIHBsYXllciAmIGF1dG9QbGF5XG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJy4vY29yZScpICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICBmYWN0b3J5KCB3aW5kb3cuRmxpY2tpdHkgKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gZmFjdG9yeSggRmxpY2tpdHkgKSB7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBsYXllciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBQbGF5ZXIoIGF1dG9QbGF5LCBvblRpY2sgKSB7XG4gIHRoaXMuYXV0b1BsYXkgPSBhdXRvUGxheTtcbiAgdGhpcy5vblRpY2sgPSBvblRpY2s7XG4gIHRoaXMuc3RhdGUgPSAnc3RvcHBlZCc7XG4gIC8vIHZpc2liaWxpdHkgY2hhbmdlIGV2ZW50IGhhbmRsZXJcbiAgdGhpcy5vblZpc2liaWxpdHlDaGFuZ2UgPSB0aGlzLnZpc2liaWxpdHlDaGFuZ2UuYmluZCggdGhpcyApO1xuICB0aGlzLm9uVmlzaWJpbGl0eVBsYXkgPSB0aGlzLnZpc2liaWxpdHlQbGF5LmJpbmQoIHRoaXMgKTtcbn1cblxuLy8gc3RhcnQgcGxheVxuUGxheWVyLnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24oKSB7XG4gIGlmICggdGhpcy5zdGF0ZSA9PT0gJ3BsYXlpbmcnICkgcmV0dXJuO1xuXG4gIC8vIGRvIG5vdCBwbGF5IGlmIHBhZ2UgaXMgaGlkZGVuLCBzdGFydCBwbGF5aW5nIHdoZW4gcGFnZSBpcyB2aXNpYmxlXG4gIGxldCBpc1BhZ2VIaWRkZW4gPSBkb2N1bWVudC5oaWRkZW47XG4gIGlmICggaXNQYWdlSGlkZGVuICkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5vblZpc2liaWxpdHlQbGF5ICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5zdGF0ZSA9ICdwbGF5aW5nJztcbiAgLy8gbGlzdGVuIHRvIHZpc2liaWxpdHkgY2hhbmdlXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5vblZpc2liaWxpdHlDaGFuZ2UgKTtcbiAgLy8gc3RhcnQgdGlja2luZ1xuICB0aGlzLnRpY2soKTtcbn07XG5cblBsYXllci5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uKCkge1xuICAvLyBkbyBub3QgdGljayBpZiBub3QgcGxheWluZ1xuICBpZiAoIHRoaXMuc3RhdGUgIT09ICdwbGF5aW5nJyApIHJldHVybjtcblxuICAvLyBkZWZhdWx0IHRvIDMgc2Vjb25kc1xuICBsZXQgdGltZSA9IHR5cGVvZiB0aGlzLmF1dG9QbGF5ID09ICdudW1iZXInID8gdGhpcy5hdXRvUGxheSA6IDMwMDA7XG4gIC8vIEhBQ0s6IHJlc2V0IHRpY2tzIGlmIHN0b3BwZWQgYW5kIHN0YXJ0ZWQgd2l0aGluIGludGVydmFsXG4gIHRoaXMuY2xlYXIoKTtcbiAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCggKCkgPT4ge1xuICAgIHRoaXMub25UaWNrKCk7XG4gICAgdGhpcy50aWNrKCk7XG4gIH0sIHRpbWUgKTtcbn07XG5cblBsYXllci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnN0YXRlID0gJ3N0b3BwZWQnO1xuICB0aGlzLmNsZWFyKCk7XG4gIC8vIHJlbW92ZSB2aXNpYmlsaXR5IGNoYW5nZSBldmVudFxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlICk7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gIGNsZWFyVGltZW91dCggdGhpcy50aW1lb3V0ICk7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gIGlmICggdGhpcy5zdGF0ZSA9PT0gJ3BsYXlpbmcnICkge1xuICAgIHRoaXMuc3RhdGUgPSAncGF1c2VkJztcbiAgICB0aGlzLmNsZWFyKCk7XG4gIH1cbn07XG5cblBsYXllci5wcm90b3R5cGUudW5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICAvLyByZS1zdGFydCBwbGF5IGlmIHBhdXNlZFxuICBpZiAoIHRoaXMuc3RhdGUgPT09ICdwYXVzZWQnICkgdGhpcy5wbGF5KCk7XG59O1xuXG4vLyBwYXVzZSBpZiBwYWdlIHZpc2liaWxpdHkgaXMgaGlkZGVuLCB1bnBhdXNlIGlmIHZpc2libGVcblBsYXllci5wcm90b3R5cGUudmlzaWJpbGl0eUNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICBsZXQgaXNQYWdlSGlkZGVuID0gZG9jdW1lbnQuaGlkZGVuO1xuICB0aGlzWyBpc1BhZ2VIaWRkZW4gPyAncGF1c2UnIDogJ3VucGF1c2UnIF0oKTtcbn07XG5cblBsYXllci5wcm90b3R5cGUudmlzaWJpbGl0eVBsYXkgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wbGF5KCk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5vblZpc2liaWxpdHlQbGF5ICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBGbGlja2l0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5PYmplY3QuYXNzaWduKCBGbGlja2l0eS5kZWZhdWx0cywge1xuICBwYXVzZUF1dG9QbGF5T25Ib3ZlcjogdHJ1ZSxcbn0gKTtcblxuRmxpY2tpdHkuY3JlYXRlLnBsYXllciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoIHRoaXMub3B0aW9ucy5hdXRvUGxheSwgKCkgPT4ge1xuICAgIHRoaXMubmV4dCggdHJ1ZSApO1xuICB9ICk7XG5cbiAgdGhpcy5vbiggJ2FjdGl2YXRlJywgdGhpcy5hY3RpdmF0ZVBsYXllciApO1xuICB0aGlzLm9uKCAndWlDaGFuZ2UnLCB0aGlzLnN0b3BQbGF5ZXIgKTtcbiAgdGhpcy5vbiggJ3BvaW50ZXJEb3duJywgdGhpcy5zdG9wUGxheWVyICk7XG4gIHRoaXMub24oICdkZWFjdGl2YXRlJywgdGhpcy5kZWFjdGl2YXRlUGxheWVyICk7XG59O1xuXG5sZXQgcHJvdG8gPSBGbGlja2l0eS5wcm90b3R5cGU7XG5cbnByb3RvLmFjdGl2YXRlUGxheWVyID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMub3B0aW9ucy5hdXRvUGxheSApIHJldHVybjtcblxuICB0aGlzLnBsYXllci5wbGF5KCk7XG4gIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2VlbnRlcicsIHRoaXMgKTtcbn07XG5cbi8vIFBsYXllciBBUEksIGRvbid0IGhhdGUgdGhlIC4uLiB0aGFua3MgSSBrbm93IHdoZXJlIHRoZSBkb29yIGlzXG5cbnByb3RvLnBsYXlQbGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wbGF5ZXIucGxheSgpO1xufTtcblxucHJvdG8uc3RvcFBsYXllciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnBsYXllci5zdG9wKCk7XG59O1xuXG5wcm90by5wYXVzZVBsYXllciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnBsYXllci5wYXVzZSgpO1xufTtcblxucHJvdG8udW5wYXVzZVBsYXllciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnBsYXllci51bnBhdXNlKCk7XG59O1xuXG5wcm90by5kZWFjdGl2YXRlUGxheWVyID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucGxheWVyLnN0b3AoKTtcbiAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZWVudGVyJywgdGhpcyApO1xufTtcblxuLy8gLS0tLS0gbW91c2VlbnRlci9sZWF2ZSAtLS0tLSAvL1xuXG4vLyBwYXVzZSBhdXRvLXBsYXkgb24gaG92ZXJcbnByb3RvLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aGlzLm9wdGlvbnMucGF1c2VBdXRvUGxheU9uSG92ZXIgKSByZXR1cm47XG5cbiAgdGhpcy5wbGF5ZXIucGF1c2UoKTtcbiAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZWxlYXZlJywgdGhpcyApO1xufTtcblxuLy8gcmVzdW1lIGF1dG8tcGxheSBvbiBob3ZlciBvZmZcbnByb3RvLm9ubW91c2VsZWF2ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnBsYXllci51bnBhdXNlKCk7XG4gIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2VsZWF2ZScsIHRoaXMgKTtcbn07XG5cbi8vIC0tLS0tICAtLS0tLSAvL1xuXG5GbGlja2l0eS5QbGF5ZXIgPSBQbGF5ZXI7XG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG5cbn0se1wiLi9jb3JlXCI6Nn1dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIHByZXYvbmV4dCBidXR0b25zXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJy4vY29yZScpICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICBmYWN0b3J5KCB3aW5kb3cuRmxpY2tpdHkgKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gZmFjdG9yeSggRmxpY2tpdHkgKSB7XG5cbmNvbnN0IHN2Z1VSSSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFByZXZOZXh0QnV0dG9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIFByZXZOZXh0QnV0dG9uKCBpbmNyZW1lbnQsIGRpcmVjdGlvbiwgYXJyb3dTaGFwZSApIHtcbiAgdGhpcy5pbmNyZW1lbnQgPSBpbmNyZW1lbnQ7XG4gIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICB0aGlzLmlzUHJldmlvdXMgPSBpbmNyZW1lbnQgPT09ICdwcmV2aW91cyc7XG4gIHRoaXMuaXNMZWZ0ID0gZGlyZWN0aW9uID09PSAnbGVmdCc7XG4gIHRoaXMuX2NyZWF0ZSggYXJyb3dTaGFwZSApO1xufVxuXG5QcmV2TmV4dEJ1dHRvbi5wcm90b3R5cGUuX2NyZWF0ZSA9IGZ1bmN0aW9uKCBhcnJvd1NoYXBlICkge1xuICAvLyBwcm9wZXJ0aWVzXG4gIGxldCBlbGVtZW50ID0gdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gYGZsaWNraXR5LWJ1dHRvbiBmbGlja2l0eS1wcmV2LW5leHQtYnV0dG9uICR7dGhpcy5pbmNyZW1lbnR9YDtcbiAgbGV0IGxhYmVsID0gdGhpcy5pc1ByZXZpb3VzID8gJ1ByZXZpb3VzJyA6ICdOZXh0JztcbiAgLy8gcHJldmVudCBidXR0b24gZnJvbSBzdWJtaXR0aW5nIGZvcm0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEwODM2MDc2LzE4MjE4M1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZSggJ3R5cGUnLCAnYnV0dG9uJyApO1xuICBlbGVtZW50LnNldEF0dHJpYnV0ZSggJ2FyaWEtbGFiZWwnLCBsYWJlbCApO1xuICAvLyBpbml0IGFzIGRpc2FibGVkXG4gIHRoaXMuZGlzYWJsZSgpO1xuICAvLyBjcmVhdGUgYXJyb3dcbiAgbGV0IHN2ZyA9IHRoaXMuY3JlYXRlU1ZHKCBsYWJlbCwgYXJyb3dTaGFwZSApO1xuICBlbGVtZW50LmFwcGVuZCggc3ZnICk7XG59O1xuXG5QcmV2TmV4dEJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlU1ZHID0gZnVuY3Rpb24oIGxhYmVsLCBhcnJvd1NoYXBlICkge1xuICBsZXQgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCBzdmdVUkksICdzdmcnICk7XG4gIHN2Zy5zZXRBdHRyaWJ1dGUoICdjbGFzcycsICdmbGlja2l0eS1idXR0b24taWNvbicgKTtcbiAgc3ZnLnNldEF0dHJpYnV0ZSggJ3ZpZXdCb3gnLCAnMCAwIDEwMCAxMDAnICk7XG4gIC8vIGFkZCB0aXRsZSAjMTE4OVxuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoIHN2Z1VSSSwgJ3RpdGxlJyApO1xuICB0aXRsZS5hcHBlbmQoIGxhYmVsICk7XG4gIC8vIGFkZCBwYXRoXG4gIGxldCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCBzdmdVUkksICdwYXRoJyApO1xuICBsZXQgcGF0aE1vdmVtZW50cyA9IGdldEFycm93TW92ZW1lbnRzKCBhcnJvd1NoYXBlICk7XG4gIHBhdGguc2V0QXR0cmlidXRlKCAnZCcsIHBhdGhNb3ZlbWVudHMgKTtcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoICdjbGFzcycsICdhcnJvdycgKTtcbiAgLy8gcm90YXRlIGFycm93XG4gIGlmICggIXRoaXMuaXNMZWZ0ICkge1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgxMDAsIDEwMCkgcm90YXRlKDE4MCknICk7XG4gIH1cbiAgc3ZnLmFwcGVuZCggdGl0bGUsIHBhdGggKTtcbiAgcmV0dXJuIHN2Zztcbn07XG5cbi8vIGdldCBTVkcgcGF0aCBtb3ZtZW1lbnRcbmZ1bmN0aW9uIGdldEFycm93TW92ZW1lbnRzKCBzaGFwZSApIHtcbiAgLy8gdXNlIHNoYXBlIGFzIG1vdmVtZW50IGlmIHN0cmluZ1xuICBpZiAoIHR5cGVvZiBzaGFwZSA9PSAnc3RyaW5nJyApIHJldHVybiBzaGFwZTtcblxuICBsZXQgeyB4MCwgeDEsIHgyLCB4MywgeTEsIHkyIH0gPSBzaGFwZTtcblxuICAvLyBjcmVhdGUgbW92ZW1lbnQgc3RyaW5nXG4gIHJldHVybiBgTSAke3gwfSwgNTBcbiAgICBMICR7eDF9LCAke3kxICsgNTB9XG4gICAgTCAke3gyfSwgJHt5MiArIDUwfVxuICAgIEwgJHt4M30sIDUwXG4gICAgTCAke3gyfSwgJHs1MCAtIHkyfVxuICAgIEwgJHt4MX0sICR7NTAgLSB5MX1cbiAgICBaYDtcbn1cblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cblByZXZOZXh0QnV0dG9uLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbn07XG5cblByZXZOZXh0QnV0dG9uLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdkaXNhYmxlZCcsIHRydWUgKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEZsaWNraXR5IHByb3RvdHlwZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5PYmplY3QuYXNzaWduKCBGbGlja2l0eS5kZWZhdWx0cywge1xuICBwcmV2TmV4dEJ1dHRvbnM6IHRydWUsXG4gIGFycm93U2hhcGU6IHtcbiAgICB4MDogMTAsXG4gICAgeDE6IDYwLCB5MTogNTAsXG4gICAgeDI6IDcwLCB5MjogNDAsXG4gICAgeDM6IDMwLFxuICB9LFxufSApO1xuXG5GbGlja2l0eS5jcmVhdGUucHJldk5leHRCdXR0b25zID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMub3B0aW9ucy5wcmV2TmV4dEJ1dHRvbnMgKSByZXR1cm47XG5cbiAgbGV0IHsgcmlnaHRUb0xlZnQsIGFycm93U2hhcGUgfSA9IHRoaXMub3B0aW9ucztcbiAgbGV0IHByZXZEaXJlY3Rpb24gPSByaWdodFRvTGVmdCA/ICdyaWdodCcgOiAnbGVmdCc7XG4gIGxldCBuZXh0RGlyZWN0aW9uID0gcmlnaHRUb0xlZnQgPyAnbGVmdCcgOiAncmlnaHQnO1xuICB0aGlzLnByZXZCdXR0b24gPSBuZXcgUHJldk5leHRCdXR0b24oICdwcmV2aW91cycsIHByZXZEaXJlY3Rpb24sIGFycm93U2hhcGUgKTtcbiAgdGhpcy5uZXh0QnV0dG9uID0gbmV3IFByZXZOZXh0QnV0dG9uKCAnbmV4dCcsIG5leHREaXJlY3Rpb24sIGFycm93U2hhcGUgKTtcbiAgdGhpcy5mb2N1c2FibGVFbGVtcy5wdXNoKCB0aGlzLnByZXZCdXR0b24uZWxlbWVudCApO1xuICB0aGlzLmZvY3VzYWJsZUVsZW1zLnB1c2goIHRoaXMubmV4dEJ1dHRvbi5lbGVtZW50ICk7XG5cbiAgdGhpcy5oYW5kbGVQcmV2QnV0dG9uQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy51aUNoYW5nZSgpO1xuICAgIHRoaXMucHJldmlvdXMoKTtcbiAgfTtcblxuICB0aGlzLmhhbmRsZU5leHRCdXR0b25DbGljayA9ICgpID0+IHtcbiAgICB0aGlzLnVpQ2hhbmdlKCk7XG4gICAgdGhpcy5uZXh0KCk7XG4gIH07XG5cbiAgdGhpcy5vbiggJ2FjdGl2YXRlJywgdGhpcy5hY3RpdmF0ZVByZXZOZXh0QnV0dG9ucyApO1xuICB0aGlzLm9uKCAnc2VsZWN0JywgdGhpcy51cGRhdGVQcmV2TmV4dEJ1dHRvbnMgKTtcbn07XG5cbmxldCBwcm90byA9IEZsaWNraXR5LnByb3RvdHlwZTtcblxucHJvdG8udXBkYXRlUHJldk5leHRCdXR0b25zID0gZnVuY3Rpb24oKSB7XG4gIGxldCBsYXN0SW5kZXggPSB0aGlzLnNsaWRlcy5sZW5ndGggPyB0aGlzLnNsaWRlcy5sZW5ndGggLSAxIDogMDtcbiAgdGhpcy51cGRhdGVQcmV2TmV4dEJ1dHRvbiggdGhpcy5wcmV2QnV0dG9uLCAwICk7XG4gIHRoaXMudXBkYXRlUHJldk5leHRCdXR0b24oIHRoaXMubmV4dEJ1dHRvbiwgbGFzdEluZGV4ICk7XG59O1xuXG5wcm90by51cGRhdGVQcmV2TmV4dEJ1dHRvbiA9IGZ1bmN0aW9uKCBidXR0b24sIGRpc2FibGVkSW5kZXggKSB7XG4gIC8vIGVuYWJsZSBpcyB3cmFwQXJvdW5kIGFuZCBhdCBsZWFzdCAyIHNsaWRlc1xuICBpZiAoIHRoaXMuaXNXcmFwcGluZyAmJiB0aGlzLnNsaWRlcy5sZW5ndGggPiAxICkge1xuICAgIGJ1dHRvbi5lbmFibGUoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgaXNFbmFibGVkID0gdGhpcy5zZWxlY3RlZEluZGV4ICE9PSBkaXNhYmxlZEluZGV4O1xuICBidXR0b25bIGlzRW5hYmxlZCA/ICdlbmFibGUnIDogJ2Rpc2FibGUnIF0oKTtcbiAgLy8gaWYgZGlzYWJsaW5nIGJ1dHRvbiB0aGF0IGlzIGZvY3VzZWQsXG4gIC8vIHNoaWZ0IGZvY3VzIHRvIGVsZW1lbnQgdG8gbWFpbnRhaW4ga2V5Ym9hcmQgYWNjZXNzaWJpbGl0eVxuICBsZXQgaXNEaXNhYmxlZEZvY3VzZWQgPSAhaXNFbmFibGVkICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGJ1dHRvbi5lbGVtZW50O1xuICBpZiAoIGlzRGlzYWJsZWRGb2N1c2VkICkgdGhpcy5mb2N1cygpO1xufTtcblxucHJvdG8uYWN0aXZhdGVQcmV2TmV4dEJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wcmV2QnV0dG9uLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgdGhpcy5oYW5kbGVQcmV2QnV0dG9uQ2xpY2sgKTtcbiAgdGhpcy5uZXh0QnV0dG9uLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgdGhpcy5oYW5kbGVOZXh0QnV0dG9uQ2xpY2sgKTtcbiAgdGhpcy5lbGVtZW50LmFwcGVuZCggdGhpcy5wcmV2QnV0dG9uLmVsZW1lbnQsIHRoaXMubmV4dEJ1dHRvbi5lbGVtZW50ICk7XG4gIHRoaXMub24oICdkZWFjdGl2YXRlJywgdGhpcy5kZWFjdGl2YXRlUHJldk5leHRCdXR0b25zICk7XG59O1xuXG5wcm90by5kZWFjdGl2YXRlUHJldk5leHRCdXR0b25zID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucHJldkJ1dHRvbi5lbGVtZW50LnJlbW92ZSgpO1xuICB0aGlzLm5leHRCdXR0b24uZWxlbWVudC5yZW1vdmUoKTtcbiAgdGhpcy5wcmV2QnV0dG9uLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgdGhpcy5oYW5kbGVQcmV2QnV0dG9uQ2xpY2sgKTtcbiAgdGhpcy5uZXh0QnV0dG9uLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgdGhpcy5oYW5kbGVOZXh0QnV0dG9uQ2xpY2sgKTtcbiAgdGhpcy5vZmYoICdkZWFjdGl2YXRlJywgdGhpcy5kZWFjdGl2YXRlUHJldk5leHRCdXR0b25zICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuRmxpY2tpdHkuUHJldk5leHRCdXR0b24gPSBQcmV2TmV4dEJ1dHRvbjtcblxucmV0dXJuIEZsaWNraXR5O1xuXG59ICkgKTtcblxufSx7XCIuL2NvcmVcIjo2fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gc2xpZGVcbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LkZsaWNraXR5ID0gd2luZG93LkZsaWNraXR5IHx8IHt9O1xuICAgIHdpbmRvdy5GbGlja2l0eS5TbGlkZSA9IGZhY3RvcnkoKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gZmFjdG9yeSgpIHtcblxuZnVuY3Rpb24gU2xpZGUoIGJlZ2luTWFyZ2luLCBlbmRNYXJnaW4sIGNlbGxBbGlnbiApIHtcbiAgdGhpcy5iZWdpbk1hcmdpbiA9IGJlZ2luTWFyZ2luO1xuICB0aGlzLmVuZE1hcmdpbiA9IGVuZE1hcmdpbjtcbiAgdGhpcy5jZWxsQWxpZ24gPSBjZWxsQWxpZ247XG4gIHRoaXMuY2VsbHMgPSBbXTtcbiAgdGhpcy5vdXRlcldpZHRoID0gMDtcbiAgdGhpcy5oZWlnaHQgPSAwO1xufVxuXG5sZXQgcHJvdG8gPSBTbGlkZS5wcm90b3R5cGU7XG5cbnByb3RvLmFkZENlbGwgPSBmdW5jdGlvbiggY2VsbCApIHtcbiAgdGhpcy5jZWxscy5wdXNoKCBjZWxsICk7XG4gIHRoaXMub3V0ZXJXaWR0aCArPSBjZWxsLnNpemUub3V0ZXJXaWR0aDtcbiAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCggY2VsbC5zaXplLm91dGVySGVpZ2h0LCB0aGlzLmhlaWdodCApO1xuICAvLyBmaXJzdCBjZWxsIHN0dWZmXG4gIGlmICggdGhpcy5jZWxscy5sZW5ndGggPT09IDEgKSB7XG4gICAgdGhpcy54ID0gY2VsbC54OyAvLyB4IGNvbWVzIGZyb20gZmlyc3QgY2VsbFxuICAgIHRoaXMuZmlyc3RNYXJnaW4gPSBjZWxsLnNpemVbIHRoaXMuYmVnaW5NYXJnaW4gXTtcbiAgfVxufTtcblxucHJvdG8udXBkYXRlVGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG4gIGxldCBsYXN0Q2VsbCA9IHRoaXMuZ2V0TGFzdENlbGwoKTtcbiAgbGV0IGxhc3RNYXJnaW4gPSBsYXN0Q2VsbCA/IGxhc3RDZWxsLnNpemVbIHRoaXMuZW5kTWFyZ2luIF0gOiAwO1xuICBsZXQgc2xpZGVXaWR0aCA9IHRoaXMub3V0ZXJXaWR0aCAtICggdGhpcy5maXJzdE1hcmdpbiArIGxhc3RNYXJnaW4gKTtcbiAgdGhpcy50YXJnZXQgPSB0aGlzLnggKyB0aGlzLmZpcnN0TWFyZ2luICsgc2xpZGVXaWR0aCAqIHRoaXMuY2VsbEFsaWduO1xufTtcblxucHJvdG8uZ2V0TGFzdENlbGwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2VsbHNbIHRoaXMuY2VsbHMubGVuZ3RoIC0gMSBdO1xufTtcblxucHJvdG8uc2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY2VsbHMuZm9yRWFjaCggKCBjZWxsICkgPT4gY2VsbC5zZWxlY3QoKSApO1xufTtcblxucHJvdG8udW5zZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiBjZWxsLnVuc2VsZWN0KCkgKTtcbn07XG5cbnByb3RvLmdldENlbGxFbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5jZWxscy5tYXAoICggY2VsbCApID0+IGNlbGwuZWxlbWVudCApO1xufTtcblxucmV0dXJuIFNsaWRlO1xuXG59ICkgKTtcblxufSx7fV0sMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyohXG4gKiBJbmZpbml0ZSBTY3JvbGwgdjIuMC40XG4gKiBtZWFzdXJlIHNpemUgb2YgZWxlbWVudHNcbiAqIE1JVCBsaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkge1xuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5nZXRTaXplID0gZmFjdG9yeSgpO1xuICB9XG5cbn0gKSggd2luZG93LCBmdW5jdGlvbiBmYWN0b3J5KCkge1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8vIGdldCBhIG51bWJlciBmcm9tIGEgc3RyaW5nLCBub3QgYSBwZXJjZW50YWdlXG5mdW5jdGlvbiBnZXRTdHlsZVNpemUoIHZhbHVlICkge1xuICBsZXQgbnVtID0gcGFyc2VGbG9hdCggdmFsdWUgKTtcbiAgLy8gbm90IGEgcGVyY2VudCBsaWtlICcxMDAlJywgYW5kIGEgbnVtYmVyXG4gIGxldCBpc1ZhbGlkID0gdmFsdWUuaW5kZXhPZignJScpID09IC0xICYmICFpc05hTiggbnVtICk7XG4gIHJldHVybiBpc1ZhbGlkICYmIG51bTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gbWVhc3VyZW1lbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmxldCBtZWFzdXJlbWVudHMgPSBbXG4gICdwYWRkaW5nTGVmdCcsXG4gICdwYWRkaW5nUmlnaHQnLFxuICAncGFkZGluZ1RvcCcsXG4gICdwYWRkaW5nQm90dG9tJyxcbiAgJ21hcmdpbkxlZnQnLFxuICAnbWFyZ2luUmlnaHQnLFxuICAnbWFyZ2luVG9wJyxcbiAgJ21hcmdpbkJvdHRvbScsXG4gICdib3JkZXJMZWZ0V2lkdGgnLFxuICAnYm9yZGVyUmlnaHRXaWR0aCcsXG4gICdib3JkZXJUb3BXaWR0aCcsXG4gICdib3JkZXJCb3R0b21XaWR0aCcsXG5dO1xuXG5sZXQgbWVhc3VyZW1lbnRzTGVuZ3RoID0gbWVhc3VyZW1lbnRzLmxlbmd0aDtcblxuZnVuY3Rpb24gZ2V0WmVyb1NpemUoKSB7XG4gIGxldCBzaXplID0ge1xuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMCxcbiAgICBpbm5lcldpZHRoOiAwLFxuICAgIGlubmVySGVpZ2h0OiAwLFxuICAgIG91dGVyV2lkdGg6IDAsXG4gICAgb3V0ZXJIZWlnaHQ6IDAsXG4gIH07XG4gIG1lYXN1cmVtZW50cy5mb3JFYWNoKCAoIG1lYXN1cmVtZW50ICkgPT4ge1xuICAgIHNpemVbIG1lYXN1cmVtZW50IF0gPSAwO1xuICB9ICk7XG4gIHJldHVybiBzaXplO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBnZXRTaXplIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIGdldFNpemUoIGVsZW0gKSB7XG4gIC8vIHVzZSBxdWVyeVNlbGV0b3IgaWYgZWxlbSBpcyBzdHJpbmdcbiAgaWYgKCB0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJyApIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBlbGVtICk7XG5cbiAgLy8gZG8gbm90IHByb2NlZWQgb24gbm9uLW9iamVjdHNcbiAgbGV0IGlzRWxlbWVudCA9IGVsZW0gJiYgdHlwZW9mIGVsZW0gPT0gJ29iamVjdCcgJiYgZWxlbS5ub2RlVHlwZTtcbiAgaWYgKCAhaXNFbGVtZW50ICkgcmV0dXJuO1xuXG4gIGxldCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcblxuICAvLyBpZiBoaWRkZW4sIGV2ZXJ5dGhpbmcgaXMgMFxuICBpZiAoIHN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnICkgcmV0dXJuIGdldFplcm9TaXplKCk7XG5cbiAgbGV0IHNpemUgPSB7fTtcbiAgc2l6ZS53aWR0aCA9IGVsZW0ub2Zmc2V0V2lkdGg7XG4gIHNpemUuaGVpZ2h0ID0gZWxlbS5vZmZzZXRIZWlnaHQ7XG5cbiAgbGV0IGlzQm9yZGVyQm94ID0gc2l6ZS5pc0JvcmRlckJveCA9IHN0eWxlLmJveFNpemluZyA9PSAnYm9yZGVyLWJveCc7XG5cbiAgLy8gZ2V0IGFsbCBtZWFzdXJlbWVudHNcbiAgbWVhc3VyZW1lbnRzLmZvckVhY2goICggbWVhc3VyZW1lbnQgKSA9PiB7XG4gICAgbGV0IHZhbHVlID0gc3R5bGVbIG1lYXN1cmVtZW50IF07XG4gICAgbGV0IG51bSA9IHBhcnNlRmxvYXQoIHZhbHVlICk7XG4gICAgLy8gYW55ICdhdXRvJywgJ21lZGl1bScgdmFsdWUgd2lsbCBiZSAwXG4gICAgc2l6ZVsgbWVhc3VyZW1lbnQgXSA9ICFpc05hTiggbnVtICkgPyBudW0gOiAwO1xuICB9ICk7XG5cbiAgbGV0IHBhZGRpbmdXaWR0aCA9IHNpemUucGFkZGluZ0xlZnQgKyBzaXplLnBhZGRpbmdSaWdodDtcbiAgbGV0IHBhZGRpbmdIZWlnaHQgPSBzaXplLnBhZGRpbmdUb3AgKyBzaXplLnBhZGRpbmdCb3R0b207XG4gIGxldCBtYXJnaW5XaWR0aCA9IHNpemUubWFyZ2luTGVmdCArIHNpemUubWFyZ2luUmlnaHQ7XG4gIGxldCBtYXJnaW5IZWlnaHQgPSBzaXplLm1hcmdpblRvcCArIHNpemUubWFyZ2luQm90dG9tO1xuICBsZXQgYm9yZGVyV2lkdGggPSBzaXplLmJvcmRlckxlZnRXaWR0aCArIHNpemUuYm9yZGVyUmlnaHRXaWR0aDtcbiAgbGV0IGJvcmRlckhlaWdodCA9IHNpemUuYm9yZGVyVG9wV2lkdGggKyBzaXplLmJvcmRlckJvdHRvbVdpZHRoO1xuXG4gIC8vIG92ZXJ3cml0ZSB3aWR0aCBhbmQgaGVpZ2h0IGlmIHdlIGNhbiBnZXQgaXQgZnJvbSBzdHlsZVxuICBsZXQgc3R5bGVXaWR0aCA9IGdldFN0eWxlU2l6ZSggc3R5bGUud2lkdGggKTtcbiAgaWYgKCBzdHlsZVdpZHRoICE9PSBmYWxzZSApIHtcbiAgICBzaXplLndpZHRoID0gc3R5bGVXaWR0aCArXG4gICAgICAvLyBhZGQgcGFkZGluZyBhbmQgYm9yZGVyIHVubGVzcyBpdCdzIGFscmVhZHkgaW5jbHVkaW5nIGl0XG4gICAgICAoIGlzQm9yZGVyQm94ID8gMCA6IHBhZGRpbmdXaWR0aCArIGJvcmRlcldpZHRoICk7XG4gIH1cblxuICBsZXQgc3R5bGVIZWlnaHQgPSBnZXRTdHlsZVNpemUoIHN0eWxlLmhlaWdodCApO1xuICBpZiAoIHN0eWxlSGVpZ2h0ICE9PSBmYWxzZSApIHtcbiAgICBzaXplLmhlaWdodCA9IHN0eWxlSGVpZ2h0ICtcbiAgICAgIC8vIGFkZCBwYWRkaW5nIGFuZCBib3JkZXIgdW5sZXNzIGl0J3MgYWxyZWFkeSBpbmNsdWRpbmcgaXRcbiAgICAgICggaXNCb3JkZXJCb3ggPyAwIDogcGFkZGluZ0hlaWdodCArIGJvcmRlckhlaWdodCApO1xuICB9XG5cbiAgc2l6ZS5pbm5lcldpZHRoID0gc2l6ZS53aWR0aCAtICggcGFkZGluZ1dpZHRoICsgYm9yZGVyV2lkdGggKTtcbiAgc2l6ZS5pbm5lckhlaWdodCA9IHNpemUuaGVpZ2h0IC0gKCBwYWRkaW5nSGVpZ2h0ICsgYm9yZGVySGVpZ2h0ICk7XG5cbiAgc2l6ZS5vdXRlcldpZHRoID0gc2l6ZS53aWR0aCArIG1hcmdpbldpZHRoO1xuICBzaXplLm91dGVySGVpZ2h0ID0gc2l6ZS5oZWlnaHQgKyBtYXJnaW5IZWlnaHQ7XG5cbiAgcmV0dXJuIHNpemU7XG59XG5cbnJldHVybiBnZXRTaXplO1xuXG59ICk7XG5cbn0se31dLDE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qIVxuICogaW1hZ2VzTG9hZGVkIHY1LjAuMFxuICogSmF2YVNjcmlwdCBpcyBhbGwgbGlrZSBcIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/XCJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCB3aW5kb3csIHJlcXVpcmUoJ2V2LWVtaXR0ZXInKSApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LmltYWdlc0xvYWRlZCA9IGZhY3RvcnkoIHdpbmRvdywgd2luZG93LkV2RW1pdHRlciApO1xuICB9XG5cbn0gKSggdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLFxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoIHdpbmRvdywgRXZFbWl0dGVyICkge1xuXG5sZXQgJCA9IHdpbmRvdy5qUXVlcnk7XG5sZXQgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8vIHR1cm4gZWxlbWVudCBvciBub2RlTGlzdCBpbnRvIGFuIGFycmF5XG5mdW5jdGlvbiBtYWtlQXJyYXkoIG9iaiApIHtcbiAgLy8gdXNlIG9iamVjdCBpZiBhbHJlYWR5IGFuIGFycmF5XG4gIGlmICggQXJyYXkuaXNBcnJheSggb2JqICkgKSByZXR1cm4gb2JqO1xuXG4gIGxldCBpc0FycmF5TGlrZSA9IHR5cGVvZiBvYmogPT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iai5sZW5ndGggPT0gJ251bWJlcic7XG4gIC8vIGNvbnZlcnQgbm9kZUxpc3QgdG8gYXJyYXlcbiAgaWYgKCBpc0FycmF5TGlrZSApIHJldHVybiBbIC4uLm9iaiBdO1xuXG4gIC8vIGFycmF5IG9mIHNpbmdsZSBpbmRleFxuICByZXR1cm4gWyBvYmogXTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaW1hZ2VzTG9hZGVkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbi8qKlxuICogQHBhcmFtIHtbQXJyYXksIEVsZW1lbnQsIE5vZGVMaXN0LCBTdHJpbmddfSBlbGVtXG4gKiBAcGFyYW0ge1tPYmplY3QsIEZ1bmN0aW9uXX0gb3B0aW9ucyAtIGlmIGZ1bmN0aW9uLCB1c2UgYXMgY2FsbGJhY2tcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQWx3YXlzIC0gY2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtJbWFnZXNMb2FkZWR9XG4gKi9cbmZ1bmN0aW9uIEltYWdlc0xvYWRlZCggZWxlbSwgb3B0aW9ucywgb25BbHdheXMgKSB7XG4gIC8vIGNvZXJjZSBJbWFnZXNMb2FkZWQoKSB3aXRob3V0IG5ldywgdG8gYmUgbmV3IEltYWdlc0xvYWRlZCgpXG4gIGlmICggISggdGhpcyBpbnN0YW5jZW9mIEltYWdlc0xvYWRlZCApICkge1xuICAgIHJldHVybiBuZXcgSW1hZ2VzTG9hZGVkKCBlbGVtLCBvcHRpb25zLCBvbkFsd2F5cyApO1xuICB9XG4gIC8vIHVzZSBlbGVtIGFzIHNlbGVjdG9yIHN0cmluZ1xuICBsZXQgcXVlcnlFbGVtID0gZWxlbTtcbiAgaWYgKCB0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJyApIHtcbiAgICBxdWVyeUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBlbGVtICk7XG4gIH1cbiAgLy8gYmFpbCBpZiBiYWQgZWxlbWVudFxuICBpZiAoICFxdWVyeUVsZW0gKSB7XG4gICAgY29uc29sZS5lcnJvcihgQmFkIGVsZW1lbnQgZm9yIGltYWdlc0xvYWRlZCAke3F1ZXJ5RWxlbSB8fCBlbGVtfWApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuZWxlbWVudHMgPSBtYWtlQXJyYXkoIHF1ZXJ5RWxlbSApO1xuICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgLy8gc2hpZnQgYXJndW1lbnRzIGlmIG5vIG9wdGlvbnMgc2V0XG4gIGlmICggdHlwZW9mIG9wdGlvbnMgPT0gJ2Z1bmN0aW9uJyApIHtcbiAgICBvbkFsd2F5cyA9IG9wdGlvbnM7XG4gIH0gZWxzZSB7XG4gICAgT2JqZWN0LmFzc2lnbiggdGhpcy5vcHRpb25zLCBvcHRpb25zICk7XG4gIH1cblxuICBpZiAoIG9uQWx3YXlzICkgdGhpcy5vbiggJ2Fsd2F5cycsIG9uQWx3YXlzICk7XG5cbiAgdGhpcy5nZXRJbWFnZXMoKTtcbiAgLy8gYWRkIGpRdWVyeSBEZWZlcnJlZCBvYmplY3RcbiAgaWYgKCAkICkgdGhpcy5qcURlZmVycmVkID0gbmV3ICQuRGVmZXJyZWQoKTtcblxuICAvLyBIQUNLIGNoZWNrIGFzeW5jIHRvIGFsbG93IHRpbWUgdG8gYmluZCBsaXN0ZW5lcnNcbiAgc2V0VGltZW91dCggdGhpcy5jaGVjay5iaW5kKCB0aGlzICkgKTtcbn1cblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2RW1pdHRlci5wcm90b3R5cGUgKTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5nZXRJbWFnZXMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5pbWFnZXMgPSBbXTtcblxuICAvLyBmaWx0ZXIgJiBmaW5kIGl0ZW1zIGlmIHdlIGhhdmUgYW4gaXRlbSBzZWxlY3RvclxuICB0aGlzLmVsZW1lbnRzLmZvckVhY2goIHRoaXMuYWRkRWxlbWVudEltYWdlcywgdGhpcyApO1xufTtcblxuY29uc3QgZWxlbWVudE5vZGVUeXBlcyA9IFsgMSwgOSwgMTEgXTtcblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IGVsZW1cbiAqL1xuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRFbGVtZW50SW1hZ2VzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gIC8vIGZpbHRlciBzaWJsaW5nc1xuICBpZiAoIGVsZW0ubm9kZU5hbWUgPT09ICdJTUcnICkge1xuICAgIHRoaXMuYWRkSW1hZ2UoIGVsZW0gKTtcbiAgfVxuICAvLyBnZXQgYmFja2dyb3VuZCBpbWFnZSBvbiBlbGVtZW50XG4gIGlmICggdGhpcy5vcHRpb25zLmJhY2tncm91bmQgPT09IHRydWUgKSB7XG4gICAgdGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyggZWxlbSApO1xuICB9XG5cbiAgLy8gZmluZCBjaGlsZHJlblxuICAvLyBubyBub24tZWxlbWVudCBub2RlcywgIzE0M1xuICBsZXQgeyBub2RlVHlwZSB9ID0gZWxlbTtcbiAgaWYgKCAhbm9kZVR5cGUgfHwgIWVsZW1lbnROb2RlVHlwZXMuaW5jbHVkZXMoIG5vZGVUeXBlICkgKSByZXR1cm47XG5cbiAgbGV0IGNoaWxkSW1ncyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XG4gIC8vIGNvbmNhdCBjaGlsZEVsZW1zIHRvIGZpbHRlckZvdW5kIGFycmF5XG4gIGZvciAoIGxldCBpbWcgb2YgY2hpbGRJbWdzICkge1xuICAgIHRoaXMuYWRkSW1hZ2UoIGltZyApO1xuICB9XG5cbiAgLy8gZ2V0IGNoaWxkIGJhY2tncm91bmQgaW1hZ2VzXG4gIGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kID09ICdzdHJpbmcnICkge1xuICAgIGxldCBjaGlsZHJlbiA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCggdGhpcy5vcHRpb25zLmJhY2tncm91bmQgKTtcbiAgICBmb3IgKCBsZXQgY2hpbGQgb2YgY2hpbGRyZW4gKSB7XG4gICAgICB0aGlzLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzKCBjaGlsZCApO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgcmVVUkwgPSAvdXJsXFwoKFsnXCJdKT8oLio/KVxcMVxcKS9naTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICBsZXQgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG4gIC8vIEZpcmVmb3ggcmV0dXJucyBudWxsIGlmIGluIGEgaGlkZGVuIGlmcmFtZSBodHRwczovL2J1Z3ppbC5sYS81NDgzOTdcbiAgaWYgKCAhc3R5bGUgKSByZXR1cm47XG5cbiAgLy8gZ2V0IHVybCBpbnNpZGUgdXJsKFwiLi4uXCIpXG4gIGxldCBtYXRjaGVzID0gcmVVUkwuZXhlYyggc3R5bGUuYmFja2dyb3VuZEltYWdlICk7XG4gIHdoaWxlICggbWF0Y2hlcyAhPT0gbnVsbCApIHtcbiAgICBsZXQgdXJsID0gbWF0Y2hlcyAmJiBtYXRjaGVzWzJdO1xuICAgIGlmICggdXJsICkge1xuICAgICAgdGhpcy5hZGRCYWNrZ3JvdW5kKCB1cmwsIGVsZW0gKTtcbiAgICB9XG4gICAgbWF0Y2hlcyA9IHJlVVJMLmV4ZWMoIHN0eWxlLmJhY2tncm91bmRJbWFnZSApO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7SW1hZ2V9IGltZ1xuICovXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEltYWdlID0gZnVuY3Rpb24oIGltZyApIHtcbiAgbGV0IGxvYWRpbmdJbWFnZSA9IG5ldyBMb2FkaW5nSW1hZ2UoIGltZyApO1xuICB0aGlzLmltYWdlcy5wdXNoKCBsb2FkaW5nSW1hZ2UgKTtcbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkQmFja2dyb3VuZCA9IGZ1bmN0aW9uKCB1cmwsIGVsZW0gKSB7XG4gIGxldCBiYWNrZ3JvdW5kID0gbmV3IEJhY2tncm91bmQoIHVybCwgZWxlbSApO1xuICB0aGlzLmltYWdlcy5wdXNoKCBiYWNrZ3JvdW5kICk7XG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucHJvZ3Jlc3NlZENvdW50ID0gMDtcbiAgdGhpcy5oYXNBbnlCcm9rZW4gPSBmYWxzZTtcbiAgLy8gY29tcGxldGUgaWYgbm8gaW1hZ2VzXG4gIGlmICggIXRoaXMuaW1hZ2VzLmxlbmd0aCApIHtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtc3R5bGUgKi9cbiAgbGV0IG9uUHJvZ3Jlc3MgPSAoIGltYWdlLCBlbGVtLCBtZXNzYWdlICkgPT4ge1xuICAgIC8vIEhBQ0sgLSBDaHJvbWUgdHJpZ2dlcnMgZXZlbnQgYmVmb3JlIG9iamVjdCBwcm9wZXJ0aWVzIGhhdmUgY2hhbmdlZC4gIzgzXG4gICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgdGhpcy5wcm9ncmVzcyggaW1hZ2UsIGVsZW0sIG1lc3NhZ2UgKTtcbiAgICB9ICk7XG4gIH07XG5cbiAgdGhpcy5pbWFnZXMuZm9yRWFjaCggZnVuY3Rpb24oIGxvYWRpbmdJbWFnZSApIHtcbiAgICBsb2FkaW5nSW1hZ2Uub25jZSggJ3Byb2dyZXNzJywgb25Qcm9ncmVzcyApO1xuICAgIGxvYWRpbmdJbWFnZS5jaGVjaygpO1xuICB9ICk7XG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24oIGltYWdlLCBlbGVtLCBtZXNzYWdlICkge1xuICB0aGlzLnByb2dyZXNzZWRDb3VudCsrO1xuICB0aGlzLmhhc0FueUJyb2tlbiA9IHRoaXMuaGFzQW55QnJva2VuIHx8ICFpbWFnZS5pc0xvYWRlZDtcbiAgLy8gcHJvZ3Jlc3MgZXZlbnRcbiAgdGhpcy5lbWl0RXZlbnQoICdwcm9ncmVzcycsIFsgdGhpcywgaW1hZ2UsIGVsZW0gXSApO1xuICBpZiAoIHRoaXMuanFEZWZlcnJlZCAmJiB0aGlzLmpxRGVmZXJyZWQubm90aWZ5ICkge1xuICAgIHRoaXMuanFEZWZlcnJlZC5ub3RpZnkoIHRoaXMsIGltYWdlICk7XG4gIH1cbiAgLy8gY2hlY2sgaWYgY29tcGxldGVkXG4gIGlmICggdGhpcy5wcm9ncmVzc2VkQ291bnQgPT09IHRoaXMuaW1hZ2VzLmxlbmd0aCApIHtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gIH1cblxuICBpZiAoIHRoaXMub3B0aW9ucy5kZWJ1ZyAmJiBjb25zb2xlICkge1xuICAgIGNvbnNvbGUubG9nKCBgcHJvZ3Jlc3M6ICR7bWVzc2FnZX1gLCBpbWFnZSwgZWxlbSApO1xuICB9XG59O1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gIGxldCBldmVudE5hbWUgPSB0aGlzLmhhc0FueUJyb2tlbiA/ICdmYWlsJyA6ICdkb25lJztcbiAgdGhpcy5pc0NvbXBsZXRlID0gdHJ1ZTtcbiAgdGhpcy5lbWl0RXZlbnQoIGV2ZW50TmFtZSwgWyB0aGlzIF0gKTtcbiAgdGhpcy5lbWl0RXZlbnQoICdhbHdheXMnLCBbIHRoaXMgXSApO1xuICBpZiAoIHRoaXMuanFEZWZlcnJlZCApIHtcbiAgICBsZXQganFNZXRob2QgPSB0aGlzLmhhc0FueUJyb2tlbiA/ICdyZWplY3QnIDogJ3Jlc29sdmUnO1xuICAgIHRoaXMuanFEZWZlcnJlZFsganFNZXRob2QgXSggdGhpcyApO1xuICB9XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gTG9hZGluZ0ltYWdlKCBpbWcgKSB7XG4gIHRoaXMuaW1nID0gaW1nO1xufVxuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZFbWl0dGVyLnByb3RvdHlwZSApO1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gIC8vIElmIGNvbXBsZXRlIGlzIHRydWUgYW5kIGJyb3dzZXIgc3VwcG9ydHMgbmF0dXJhbCBzaXplcyxcbiAgLy8gdHJ5IHRvIGNoZWNrIGZvciBpbWFnZSBzdGF0dXMgbWFudWFsbHkuXG4gIGxldCBpc0NvbXBsZXRlID0gdGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKTtcbiAgaWYgKCBpc0NvbXBsZXRlICkge1xuICAgIC8vIHJlcG9ydCBiYXNlZCBvbiBuYXR1cmFsV2lkdGhcbiAgICB0aGlzLmNvbmZpcm0oIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gMCwgJ25hdHVyYWxXaWR0aCcgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiBub25lIG9mIHRoZSBjaGVja3MgYWJvdmUgbWF0Y2hlZCwgc2ltdWxhdGUgbG9hZGluZyBvbiBkZXRhY2hlZCBlbGVtZW50LlxuICB0aGlzLnByb3h5SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgLy8gYWRkIGNyb3NzT3JpZ2luIGF0dHJpYnV0ZS4gIzIwNFxuICBpZiAoIHRoaXMuaW1nLmNyb3NzT3JpZ2luICkge1xuICAgIHRoaXMucHJveHlJbWFnZS5jcm9zc09yaWdpbiA9IHRoaXMuaW1nLmNyb3NzT3JpZ2luO1xuICB9XG4gIHRoaXMucHJveHlJbWFnZS5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgLy8gYmluZCB0byBpbWFnZSBhcyB3ZWxsIGZvciBGaXJlZm94LiAjMTkxXG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIHRoaXMucHJveHlJbWFnZS5zcmMgPSB0aGlzLmltZy5jdXJyZW50U3JjIHx8IHRoaXMuaW1nLnNyYztcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUuZ2V0SXNJbWFnZUNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gIC8vIGNoZWNrIGZvciBub24temVybywgbm9uLXVuZGVmaW5lZCBuYXR1cmFsV2lkdGhcbiAgLy8gZml4ZXMgU2FmYXJpK0luZmluaXRlU2Nyb2xsK01hc29ucnkgYnVnIGluZmluaXRlLXNjcm9sbCM2NzFcbiAgcmV0dXJuIHRoaXMuaW1nLmNvbXBsZXRlICYmIHRoaXMuaW1nLm5hdHVyYWxXaWR0aDtcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCBpc0xvYWRlZCwgbWVzc2FnZSApIHtcbiAgdGhpcy5pc0xvYWRlZCA9IGlzTG9hZGVkO1xuICBsZXQgeyBwYXJlbnROb2RlIH0gPSB0aGlzLmltZztcbiAgLy8gZW1pdCBwcm9ncmVzcyB3aXRoIHBhcmVudCA8cGljdHVyZT4gb3Igc2VsZiA8aW1nPlxuICBsZXQgZWxlbSA9IHBhcmVudE5vZGUubm9kZU5hbWUgPT09ICdQSUNUVVJFJyA/IHBhcmVudE5vZGUgOiB0aGlzLmltZztcbiAgdGhpcy5lbWl0RXZlbnQoICdwcm9ncmVzcycsIFsgdGhpcywgZWxlbSwgbWVzc2FnZSBdICk7XG59O1xuXG4vLyAtLS0tLSBldmVudHMgLS0tLS0gLy9cblxuLy8gdHJpZ2dlciBzcGVjaWZpZWQgaGFuZGxlciBmb3IgZXZlbnQgdHlwZVxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgbGV0IG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlO1xuICBpZiAoIHRoaXNbIG1ldGhvZCBdICkge1xuICAgIHRoaXNbIG1ldGhvZCBdKCBldmVudCApO1xuICB9XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNvbmZpcm0oIHRydWUsICdvbmxvYWQnICk7XG4gIHRoaXMudW5iaW5kRXZlbnRzKCk7XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jb25maXJtKCBmYWxzZSwgJ29uZXJyb3InICk7XG4gIHRoaXMudW5iaW5kRXZlbnRzKCk7XG59O1xuXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLnVuYmluZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMucHJveHlJbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBCYWNrZ3JvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIEJhY2tncm91bmQoIHVybCwgZWxlbWVudCApIHtcbiAgdGhpcy51cmwgPSB1cmw7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMuaW1nID0gbmV3IEltYWdlKCk7XG59XG5cbi8vIGluaGVyaXQgTG9hZGluZ0ltYWdlIHByb3RvdHlwZVxuQmFja2dyb3VuZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBMb2FkaW5nSW1hZ2UucHJvdG90eXBlICk7XG5cbkJhY2tncm91bmQucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIHRoaXMuaW1nLnNyYyA9IHRoaXMudXJsO1xuICAvLyBjaGVjayBpZiBpbWFnZSBpcyBhbHJlYWR5IGNvbXBsZXRlXG4gIGxldCBpc0NvbXBsZXRlID0gdGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKTtcbiAgaWYgKCBpc0NvbXBsZXRlICkge1xuICAgIHRoaXMuY29uZmlybSggdGhpcy5pbWcubmF0dXJhbFdpZHRoICE9PSAwLCAnbmF0dXJhbFdpZHRoJyApO1xuICAgIHRoaXMudW5iaW5kRXZlbnRzKCk7XG4gIH1cbn07XG5cbkJhY2tncm91bmQucHJvdG90eXBlLnVuYmluZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xufTtcblxuQmFja2dyb3VuZC5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCBpc0xvYWRlZCwgbWVzc2FnZSApIHtcbiAgdGhpcy5pc0xvYWRlZCA9IGlzTG9hZGVkO1xuICB0aGlzLmVtaXRFdmVudCggJ3Byb2dyZXNzJywgWyB0aGlzLCB0aGlzLmVsZW1lbnQsIG1lc3NhZ2UgXSApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0galF1ZXJ5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbkltYWdlc0xvYWRlZC5tYWtlSlF1ZXJ5UGx1Z2luID0gZnVuY3Rpb24oIGpRdWVyeSApIHtcbiAgalF1ZXJ5ID0galF1ZXJ5IHx8IHdpbmRvdy5qUXVlcnk7XG4gIGlmICggIWpRdWVyeSApIHJldHVybjtcblxuICAvLyBzZXQgbG9jYWwgdmFyaWFibGVcbiAgJCA9IGpRdWVyeTtcbiAgLy8gJCgpLmltYWdlc0xvYWRlZCgpXG4gICQuZm4uaW1hZ2VzTG9hZGVkID0gZnVuY3Rpb24oIG9wdGlvbnMsIG9uQWx3YXlzICkge1xuICAgIGxldCBpbnN0YW5jZSA9IG5ldyBJbWFnZXNMb2FkZWQoIHRoaXMsIG9wdGlvbnMsIG9uQWx3YXlzICk7XG4gICAgcmV0dXJuIGluc3RhbmNlLmpxRGVmZXJyZWQucHJvbWlzZSggJCggdGhpcyApICk7XG4gIH07XG59O1xuLy8gdHJ5IG1ha2luZyBwbHVnaW5cbkltYWdlc0xvYWRlZC5tYWtlSlF1ZXJ5UGx1Z2luKCk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5yZXR1cm4gSW1hZ2VzTG9hZGVkO1xuXG59ICk7XG5cbn0se1wiZXYtZW1pdHRlclwiOjF9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24od2luZG93LCBmYWN0b3J5KSB7XG5cdHZhciBsYXp5U2l6ZXMgPSBmYWN0b3J5KHdpbmRvdywgd2luZG93LmRvY3VtZW50LCBEYXRlKTtcblx0d2luZG93LmxhenlTaXplcyA9IGxhenlTaXplcztcblx0aWYodHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyl7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBsYXp5U2l6ZXM7XG5cdH1cbn0odHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/XG4gICAgICB3aW5kb3cgOiB7fSwgXG4vKipcbiAqIGltcG9ydChcIi4vdHlwZXMvZ2xvYmFsXCIpXG4gKiBAdHlwZWRlZiB7IGltcG9ydChcIi4vdHlwZXMvbGF6eXNpemVzLWNvbmZpZ1wiKS5MYXp5U2l6ZXNDb25maWdQYXJ0aWFsIH0gTGF6eVNpemVzQ29uZmlnUGFydGlhbFxuICovXG5mdW5jdGlvbiBsKHdpbmRvdywgZG9jdW1lbnQsIERhdGUpIHsgLy8gUGFzcyBpbiB0aGUgd2luZG93IERhdGUgZnVuY3Rpb24gYWxzbyBmb3IgU1NSIGJlY2F1c2UgdGhlIERhdGUgY2xhc3MgY2FuIGJlIGxvc3Rcblx0J3VzZSBzdHJpY3QnO1xuXHQvKmpzaGludCBlcW51bGw6dHJ1ZSAqL1xuXG5cdHZhciBsYXp5c2l6ZXMsXG5cdFx0LyoqXG5cdFx0ICogQHR5cGUgeyBMYXp5U2l6ZXNDb25maWdQYXJ0aWFsIH1cblx0XHQgKi9cblx0XHRsYXp5U2l6ZXNDZmc7XG5cblx0KGZ1bmN0aW9uKCl7XG5cdFx0dmFyIHByb3A7XG5cblx0XHR2YXIgbGF6eVNpemVzRGVmYXVsdHMgPSB7XG5cdFx0XHRsYXp5Q2xhc3M6ICdsYXp5bG9hZCcsXG5cdFx0XHRsb2FkZWRDbGFzczogJ2xhenlsb2FkZWQnLFxuXHRcdFx0bG9hZGluZ0NsYXNzOiAnbGF6eWxvYWRpbmcnLFxuXHRcdFx0cHJlbG9hZENsYXNzOiAnbGF6eXByZWxvYWQnLFxuXHRcdFx0ZXJyb3JDbGFzczogJ2xhenllcnJvcicsXG5cdFx0XHQvL3N0cmljdENsYXNzOiAnbGF6eXN0cmljdCcsXG5cdFx0XHRhdXRvc2l6ZXNDbGFzczogJ2xhenlhdXRvc2l6ZXMnLFxuXHRcdFx0ZmFzdExvYWRlZENsYXNzOiAnbHMtaXMtY2FjaGVkJyxcblx0XHRcdGlmcmFtZUxvYWRNb2RlOiAwLFxuXHRcdFx0c3JjQXR0cjogJ2RhdGEtc3JjJyxcblx0XHRcdHNyY3NldEF0dHI6ICdkYXRhLXNyY3NldCcsXG5cdFx0XHRzaXplc0F0dHI6ICdkYXRhLXNpemVzJyxcblx0XHRcdC8vcHJlbG9hZEFmdGVyTG9hZDogZmFsc2UsXG5cdFx0XHRtaW5TaXplOiA0MCxcblx0XHRcdGN1c3RvbU1lZGlhOiB7fSxcblx0XHRcdGluaXQ6IHRydWUsXG5cdFx0XHRleHBGYWN0b3I6IDEuNSxcblx0XHRcdGhGYWM6IDAuOCxcblx0XHRcdGxvYWRNb2RlOiAyLFxuXHRcdFx0bG9hZEhpZGRlbjogdHJ1ZSxcblx0XHRcdHJpY1RpbWVvdXQ6IDAsXG5cdFx0XHR0aHJvdHRsZURlbGF5OiAxMjUsXG5cdFx0fTtcblxuXHRcdGxhenlTaXplc0NmZyA9IHdpbmRvdy5sYXp5U2l6ZXNDb25maWcgfHwgd2luZG93LmxhenlzaXplc0NvbmZpZyB8fCB7fTtcblxuXHRcdGZvcihwcm9wIGluIGxhenlTaXplc0RlZmF1bHRzKXtcblx0XHRcdGlmKCEocHJvcCBpbiBsYXp5U2l6ZXNDZmcpKXtcblx0XHRcdFx0bGF6eVNpemVzQ2ZnW3Byb3BdID0gbGF6eVNpemVzRGVmYXVsdHNbcHJvcF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9KSgpO1xuXG5cdGlmICghZG9jdW1lbnQgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0aW5pdDogZnVuY3Rpb24gKCkge30sXG5cdFx0XHQvKipcblx0XHRcdCAqIEB0eXBlIHsgTGF6eVNpemVzQ29uZmlnUGFydGlhbCB9XG5cdFx0XHQgKi9cblx0XHRcdGNmZzogbGF6eVNpemVzQ2ZnLFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBAdHlwZSB7IHRydWUgfVxuXHRcdFx0ICovXG5cdFx0XHRub1N1cHBvcnQ6IHRydWUsXG5cdFx0fTtcblx0fVxuXG5cdHZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG5cdHZhciBzdXBwb3J0UGljdHVyZSA9IHdpbmRvdy5IVE1MUGljdHVyZUVsZW1lbnQ7XG5cblx0dmFyIF9hZGRFdmVudExpc3RlbmVyID0gJ2FkZEV2ZW50TGlzdGVuZXInO1xuXG5cdHZhciBfZ2V0QXR0cmlidXRlID0gJ2dldEF0dHJpYnV0ZSc7XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0byBiaW5kIHRvIHdpbmRvdyBiZWNhdXNlICd0aGlzJyBiZWNvbWVzIG51bGwgZHVyaW5nIFNTUlxuXHQgKiBidWlsZHMuXG5cdCAqL1xuXHR2YXIgYWRkRXZlbnRMaXN0ZW5lciA9IHdpbmRvd1tfYWRkRXZlbnRMaXN0ZW5lcl0uYmluZCh3aW5kb3cpO1xuXG5cdHZhciBzZXRUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQ7XG5cblx0dmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgc2V0VGltZW91dDtcblxuXHR2YXIgcmVxdWVzdElkbGVDYWxsYmFjayA9IHdpbmRvdy5yZXF1ZXN0SWRsZUNhbGxiYWNrO1xuXG5cdHZhciByZWdQaWN0dXJlID0gL15waWN0dXJlJC9pO1xuXG5cdHZhciBsb2FkRXZlbnRzID0gWydsb2FkJywgJ2Vycm9yJywgJ2xhenlpbmNsdWRlZCcsICdfbGF6eWxvYWRlZCddO1xuXG5cdHZhciByZWdDbGFzc0NhY2hlID0ge307XG5cblx0dmFyIGZvckVhY2ggPSBBcnJheS5wcm90b3R5cGUuZm9yRWFjaDtcblxuXHQvKipcblx0ICogQHBhcmFtIGVsZSB7RWxlbWVudH1cblx0ICogQHBhcmFtIGNscyB7c3RyaW5nfVxuXHQgKi9cblx0dmFyIGhhc0NsYXNzID0gZnVuY3Rpb24oZWxlLCBjbHMpIHtcblx0XHRpZighcmVnQ2xhc3NDYWNoZVtjbHNdKXtcblx0XHRcdHJlZ0NsYXNzQ2FjaGVbY2xzXSA9IG5ldyBSZWdFeHAoJyhcXFxcc3xeKScrY2xzKycoXFxcXHN8JCknKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlZ0NsYXNzQ2FjaGVbY2xzXS50ZXN0KGVsZVtfZ2V0QXR0cmlidXRlXSgnY2xhc3MnKSB8fCAnJykgJiYgcmVnQ2xhc3NDYWNoZVtjbHNdO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0gZWxlIHtFbGVtZW50fVxuXHQgKiBAcGFyYW0gY2xzIHtzdHJpbmd9XG5cdCAqL1xuXHR2YXIgYWRkQ2xhc3MgPSBmdW5jdGlvbihlbGUsIGNscykge1xuXHRcdGlmICghaGFzQ2xhc3MoZWxlLCBjbHMpKXtcblx0XHRcdGVsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgKGVsZVtfZ2V0QXR0cmlidXRlXSgnY2xhc3MnKSB8fCAnJykudHJpbSgpICsgJyAnICsgY2xzKTtcblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEBwYXJhbSBlbGUge0VsZW1lbnR9XG5cdCAqIEBwYXJhbSBjbHMge3N0cmluZ31cblx0ICovXG5cdHZhciByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKGVsZSwgY2xzKSB7XG5cdFx0dmFyIHJlZztcblx0XHRpZiAoKHJlZyA9IGhhc0NsYXNzKGVsZSxjbHMpKSkge1xuXHRcdFx0ZWxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoZWxlW19nZXRBdHRyaWJ1dGVdKCdjbGFzcycpIHx8ICcnKS5yZXBsYWNlKHJlZywgJyAnKSk7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBhZGRSZW1vdmVMb2FkRXZlbnRzID0gZnVuY3Rpb24oZG9tLCBmbiwgYWRkKXtcblx0XHR2YXIgYWN0aW9uID0gYWRkID8gX2FkZEV2ZW50TGlzdGVuZXIgOiAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG5cdFx0aWYoYWRkKXtcblx0XHRcdGFkZFJlbW92ZUxvYWRFdmVudHMoZG9tLCBmbik7XG5cdFx0fVxuXHRcdGxvYWRFdmVudHMuZm9yRWFjaChmdW5jdGlvbihldnQpe1xuXHRcdFx0ZG9tW2FjdGlvbl0oZXZ0LCBmbik7XG5cdFx0fSk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBwYXJhbSBlbGVtIHsgRWxlbWVudCB9XG5cdCAqIEBwYXJhbSBuYW1lIHsgc3RyaW5nIH1cblx0ICogQHBhcmFtIGRldGFpbCB7IGFueSB9XG5cdCAqIEBwYXJhbSBub0J1YmJsZXMgeyBib29sZWFuIH1cblx0ICogQHBhcmFtIG5vQ2FuY2VsYWJsZSB7IGJvb2xlYW4gfVxuXHQgKiBAcmV0dXJucyB7IEN1c3RvbUV2ZW50IH1cblx0ICovXG5cdHZhciB0cmlnZ2VyRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBuYW1lLCBkZXRhaWwsIG5vQnViYmxlcywgbm9DYW5jZWxhYmxlKXtcblx0XHR2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblxuXHRcdGlmKCFkZXRhaWwpe1xuXHRcdFx0ZGV0YWlsID0ge307XG5cdFx0fVxuXG5cdFx0ZGV0YWlsLmluc3RhbmNlID0gbGF6eXNpemVzO1xuXG5cdFx0ZXZlbnQuaW5pdEV2ZW50KG5hbWUsICFub0J1YmJsZXMsICFub0NhbmNlbGFibGUpO1xuXG5cdFx0ZXZlbnQuZGV0YWlsID0gZGV0YWlsO1xuXG5cdFx0ZWxlbS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0XHRyZXR1cm4gZXZlbnQ7XG5cdH07XG5cblx0dmFyIHVwZGF0ZVBvbHlmaWxsID0gZnVuY3Rpb24gKGVsLCBmdWxsKXtcblx0XHR2YXIgcG9seWZpbGw7XG5cdFx0aWYoICFzdXBwb3J0UGljdHVyZSAmJiAoIHBvbHlmaWxsID0gKHdpbmRvdy5waWN0dXJlZmlsbCB8fCBsYXp5U2l6ZXNDZmcucGYpICkgKXtcblx0XHRcdGlmKGZ1bGwgJiYgZnVsbC5zcmMgJiYgIWVsW19nZXRBdHRyaWJ1dGVdKCdzcmNzZXQnKSl7XG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZSgnc3Jjc2V0JywgZnVsbC5zcmMpO1xuXHRcdFx0fVxuXHRcdFx0cG9seWZpbGwoe3JlZXZhbHVhdGU6IHRydWUsIGVsZW1lbnRzOiBbZWxdfSk7XG5cdFx0fSBlbHNlIGlmKGZ1bGwgJiYgZnVsbC5zcmMpe1xuXHRcdFx0ZWwuc3JjID0gZnVsbC5zcmM7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBnZXRDU1MgPSBmdW5jdGlvbiAoZWxlbSwgc3R5bGUpe1xuXHRcdHJldHVybiAoZ2V0Q29tcHV0ZWRTdHlsZShlbGVtLCBudWxsKSB8fCB7fSlbc3R5bGVdO1xuXHR9O1xuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0gZWxlbSB7IEVsZW1lbnQgfVxuXHQgKiBAcGFyYW0gcGFyZW50IHsgRWxlbWVudCB9XG5cdCAqIEBwYXJhbSBbd2lkdGhdIHtudW1iZXJ9XG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG5cdCAqL1xuXHR2YXIgZ2V0V2lkdGggPSBmdW5jdGlvbihlbGVtLCBwYXJlbnQsIHdpZHRoKXtcblx0XHR3aWR0aCA9IHdpZHRoIHx8IGVsZW0ub2Zmc2V0V2lkdGg7XG5cblx0XHR3aGlsZSh3aWR0aCA8IGxhenlTaXplc0NmZy5taW5TaXplICYmIHBhcmVudCAmJiAhZWxlbS5fbGF6eXNpemVzV2lkdGgpe1xuXHRcdFx0d2lkdGggPSAgcGFyZW50Lm9mZnNldFdpZHRoO1xuXHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHdpZHRoO1xuXHR9O1xuXG5cdHZhciByQUYgPSAoZnVuY3Rpb24oKXtcblx0XHR2YXIgcnVubmluZywgd2FpdGluZztcblx0XHR2YXIgZmlyc3RGbnMgPSBbXTtcblx0XHR2YXIgc2Vjb25kRm5zID0gW107XG5cdFx0dmFyIGZucyA9IGZpcnN0Rm5zO1xuXG5cdFx0dmFyIHJ1biA9IGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgcnVuRm5zID0gZm5zO1xuXG5cdFx0XHRmbnMgPSBmaXJzdEZucy5sZW5ndGggPyBzZWNvbmRGbnMgOiBmaXJzdEZucztcblxuXHRcdFx0cnVubmluZyA9IHRydWU7XG5cdFx0XHR3YWl0aW5nID0gZmFsc2U7XG5cblx0XHRcdHdoaWxlKHJ1bkZucy5sZW5ndGgpe1xuXHRcdFx0XHRydW5GbnMuc2hpZnQoKSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRydW5uaW5nID0gZmFsc2U7XG5cdFx0fTtcblxuXHRcdHZhciByYWZCYXRjaCA9IGZ1bmN0aW9uKGZuLCBxdWV1ZSl7XG5cdFx0XHRpZihydW5uaW5nICYmICFxdWV1ZSl7XG5cdFx0XHRcdGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmbnMucHVzaChmbik7XG5cblx0XHRcdFx0aWYoIXdhaXRpbmcpe1xuXHRcdFx0XHRcdHdhaXRpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdChkb2N1bWVudC5oaWRkZW4gPyBzZXRUaW1lb3V0IDogcmVxdWVzdEFuaW1hdGlvbkZyYW1lKShydW4pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHJhZkJhdGNoLl9sc0ZsdXNoID0gcnVuO1xuXG5cdFx0cmV0dXJuIHJhZkJhdGNoO1xuXHR9KSgpO1xuXG5cdHZhciByQUZJdCA9IGZ1bmN0aW9uKGZuLCBzaW1wbGUpe1xuXHRcdHJldHVybiBzaW1wbGUgP1xuXHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJBRihmbik7XG5cdFx0XHR9IDpcblx0XHRcdGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciB0aGF0ID0gdGhpcztcblx0XHRcdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0XHRcdHJBRihmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGZuLmFwcGx5KHRoYXQsIGFyZ3MpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHQ7XG5cdH07XG5cblx0dmFyIHRocm90dGxlID0gZnVuY3Rpb24oZm4pe1xuXHRcdHZhciBydW5uaW5nO1xuXHRcdHZhciBsYXN0VGltZSA9IDA7XG5cdFx0dmFyIGdEZWxheSA9IGxhenlTaXplc0NmZy50aHJvdHRsZURlbGF5O1xuXHRcdHZhciBySUNUaW1lb3V0ID0gbGF6eVNpemVzQ2ZnLnJpY1RpbWVvdXQ7XG5cdFx0dmFyIHJ1biA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRydW5uaW5nID0gZmFsc2U7XG5cdFx0XHRsYXN0VGltZSA9IERhdGUubm93KCk7XG5cdFx0XHRmbigpO1xuXHRcdH07XG5cdFx0dmFyIGlkbGVDYWxsYmFjayA9IHJlcXVlc3RJZGxlQ2FsbGJhY2sgJiYgcklDVGltZW91dCA+IDQ5ID9cblx0XHRcdGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHJlcXVlc3RJZGxlQ2FsbGJhY2socnVuLCB7dGltZW91dDogcklDVGltZW91dH0pO1xuXG5cdFx0XHRcdGlmKHJJQ1RpbWVvdXQgIT09IGxhenlTaXplc0NmZy5yaWNUaW1lb3V0KXtcblx0XHRcdFx0XHRySUNUaW1lb3V0ID0gbGF6eVNpemVzQ2ZnLnJpY1RpbWVvdXQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gOlxuXHRcdFx0ckFGSXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0c2V0VGltZW91dChydW4pO1xuXHRcdFx0fSwgdHJ1ZSlcblx0XHQ7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24oaXNQcmlvcml0eSl7XG5cdFx0XHR2YXIgZGVsYXk7XG5cblx0XHRcdGlmKChpc1ByaW9yaXR5ID0gaXNQcmlvcml0eSA9PT0gdHJ1ZSkpe1xuXHRcdFx0XHRySUNUaW1lb3V0ID0gMzM7XG5cdFx0XHR9XG5cblx0XHRcdGlmKHJ1bm5pbmcpe1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHJ1bm5pbmcgPSAgdHJ1ZTtcblxuXHRcdFx0ZGVsYXkgPSBnRGVsYXkgLSAoRGF0ZS5ub3coKSAtIGxhc3RUaW1lKTtcblxuXHRcdFx0aWYoZGVsYXkgPCAwKXtcblx0XHRcdFx0ZGVsYXkgPSAwO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihpc1ByaW9yaXR5IHx8IGRlbGF5IDwgOSl7XG5cdFx0XHRcdGlkbGVDYWxsYmFjaygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2V0VGltZW91dChpZGxlQ2FsbGJhY2ssIGRlbGF5KTtcblx0XHRcdH1cblx0XHR9O1xuXHR9O1xuXG5cdC8vYmFzZWQgb24gaHR0cDovL21vZGVybmphdmFzY3JpcHQuYmxvZ3Nwb3QuZGUvMjAxMy8wOC9idWlsZGluZy1iZXR0ZXItZGVib3VuY2UuaHRtbFxuXHR2YXIgZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jKSB7XG5cdFx0dmFyIHRpbWVvdXQsIHRpbWVzdGFtcDtcblx0XHR2YXIgd2FpdCA9IDk5O1xuXHRcdHZhciBydW4gPSBmdW5jdGlvbigpe1xuXHRcdFx0dGltZW91dCA9IG51bGw7XG5cdFx0XHRmdW5jKCk7XG5cdFx0fTtcblx0XHR2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcblxuXHRcdFx0aWYgKGxhc3QgPCB3YWl0KSB7XG5cdFx0XHRcdHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdChyZXF1ZXN0SWRsZUNhbGxiYWNrIHx8IHJ1bikocnVuKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblxuXHRcdFx0aWYgKCF0aW1lb3V0KSB7XG5cdFx0XHRcdHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0XHRcdH1cblx0XHR9O1xuXHR9O1xuXG5cdHZhciBsb2FkZXIgPSAoZnVuY3Rpb24oKXtcblx0XHR2YXIgcHJlbG9hZEVsZW1zLCBpc0NvbXBsZXRlZCwgcmVzZXRQcmVsb2FkaW5nVGltZXIsIGxvYWRNb2RlLCBzdGFydGVkO1xuXG5cdFx0dmFyIGVMdlcsIGVsdkgsIGVMdG9wLCBlTGxlZnQsIGVMcmlnaHQsIGVMYm90dG9tLCBpc0JvZHlIaWRkZW47XG5cblx0XHR2YXIgcmVnSW1nID0gL15pbWckL2k7XG5cdFx0dmFyIHJlZ0lmcmFtZSA9IC9eaWZyYW1lJC9pO1xuXG5cdFx0dmFyIHN1cHBvcnRTY3JvbGwgPSAoJ29uc2Nyb2xsJyBpbiB3aW5kb3cpICYmICEoLyhnbGV8aW5nKWJvdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7XG5cblx0XHR2YXIgc2hyaW5rRXhwYW5kID0gMDtcblx0XHR2YXIgY3VycmVudEV4cGFuZCA9IDA7XG5cblx0XHR2YXIgaXNMb2FkaW5nID0gMDtcblx0XHR2YXIgbG93UnVucyA9IC0xO1xuXG5cdFx0dmFyIHJlc2V0UHJlbG9hZGluZyA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0aXNMb2FkaW5nLS07XG5cdFx0XHRpZighZSB8fCBpc0xvYWRpbmcgPCAwIHx8ICFlLnRhcmdldCl7XG5cdFx0XHRcdGlzTG9hZGluZyA9IDA7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciBpc1Zpc2libGUgPSBmdW5jdGlvbiAoZWxlbSkge1xuXHRcdFx0aWYgKGlzQm9keUhpZGRlbiA9PSBudWxsKSB7XG5cdFx0XHRcdGlzQm9keUhpZGRlbiA9IGdldENTUyhkb2N1bWVudC5ib2R5LCAndmlzaWJpbGl0eScpID09ICdoaWRkZW4nO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gaXNCb2R5SGlkZGVuIHx8ICEoZ2V0Q1NTKGVsZW0ucGFyZW50Tm9kZSwgJ3Zpc2liaWxpdHknKSA9PSAnaGlkZGVuJyAmJiBnZXRDU1MoZWxlbSwgJ3Zpc2liaWxpdHknKSA9PSAnaGlkZGVuJyk7XG5cdFx0fTtcblxuXHRcdHZhciBpc05lc3RlZFZpc2libGUgPSBmdW5jdGlvbihlbGVtLCBlbGVtRXhwYW5kKXtcblx0XHRcdHZhciBvdXRlclJlY3Q7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbTtcblx0XHRcdHZhciB2aXNpYmxlID0gaXNWaXNpYmxlKGVsZW0pO1xuXG5cdFx0XHRlTHRvcCAtPSBlbGVtRXhwYW5kO1xuXHRcdFx0ZUxib3R0b20gKz0gZWxlbUV4cGFuZDtcblx0XHRcdGVMbGVmdCAtPSBlbGVtRXhwYW5kO1xuXHRcdFx0ZUxyaWdodCArPSBlbGVtRXhwYW5kO1xuXG5cdFx0XHR3aGlsZSh2aXNpYmxlICYmIChwYXJlbnQgPSBwYXJlbnQub2Zmc2V0UGFyZW50KSAmJiBwYXJlbnQgIT0gZG9jdW1lbnQuYm9keSAmJiBwYXJlbnQgIT0gZG9jRWxlbSl7XG5cdFx0XHRcdHZpc2libGUgPSAoKGdldENTUyhwYXJlbnQsICdvcGFjaXR5JykgfHwgMSkgPiAwKTtcblxuXHRcdFx0XHRpZih2aXNpYmxlICYmIGdldENTUyhwYXJlbnQsICdvdmVyZmxvdycpICE9ICd2aXNpYmxlJyl7XG5cdFx0XHRcdFx0b3V0ZXJSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHRcdHZpc2libGUgPSBlTHJpZ2h0ID4gb3V0ZXJSZWN0LmxlZnQgJiZcblx0XHRcdFx0XHRcdGVMbGVmdCA8IG91dGVyUmVjdC5yaWdodCAmJlxuXHRcdFx0XHRcdFx0ZUxib3R0b20gPiBvdXRlclJlY3QudG9wIC0gMSAmJlxuXHRcdFx0XHRcdFx0ZUx0b3AgPCBvdXRlclJlY3QuYm90dG9tICsgMVxuXHRcdFx0XHRcdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmlzaWJsZTtcblx0XHR9O1xuXG5cdFx0dmFyIGNoZWNrRWxlbWVudHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBlTGxlbiwgaSwgcmVjdCwgYXV0b0xvYWRFbGVtLCBsb2FkZWRTb21ldGhpbmcsIGVsZW1FeHBhbmQsIGVsZW1OZWdhdGl2ZUV4cGFuZCwgZWxlbUV4cGFuZFZhbCxcblx0XHRcdFx0YmVmb3JlRXhwYW5kVmFsLCBkZWZhdWx0RXhwYW5kLCBwcmVsb2FkRXhwYW5kLCBoRmFjO1xuXHRcdFx0dmFyIGxhenlsb2FkRWxlbXMgPSBsYXp5c2l6ZXMuZWxlbWVudHM7XG5cblx0XHRcdGlmKChsb2FkTW9kZSA9IGxhenlTaXplc0NmZy5sb2FkTW9kZSkgJiYgaXNMb2FkaW5nIDwgOCAmJiAoZUxsZW4gPSBsYXp5bG9hZEVsZW1zLmxlbmd0aCkpe1xuXG5cdFx0XHRcdGkgPSAwO1xuXG5cdFx0XHRcdGxvd1J1bnMrKztcblxuXHRcdFx0XHRmb3IoOyBpIDwgZUxsZW47IGkrKyl7XG5cblx0XHRcdFx0XHRpZighbGF6eWxvYWRFbGVtc1tpXSB8fCBsYXp5bG9hZEVsZW1zW2ldLl9sYXp5UmFjZSl7Y29udGludWU7fVxuXG5cdFx0XHRcdFx0aWYoIXN1cHBvcnRTY3JvbGwgfHwgKGxhenlzaXplcy5wcmVtYXR1cmVVbnZlaWwgJiYgbGF6eXNpemVzLnByZW1hdHVyZVVudmVpbChsYXp5bG9hZEVsZW1zW2ldKSkpe3VudmVpbEVsZW1lbnQobGF6eWxvYWRFbGVtc1tpXSk7Y29udGludWU7fVxuXG5cdFx0XHRcdFx0aWYoIShlbGVtRXhwYW5kVmFsID0gbGF6eWxvYWRFbGVtc1tpXVtfZ2V0QXR0cmlidXRlXSgnZGF0YS1leHBhbmQnKSkgfHwgIShlbGVtRXhwYW5kID0gZWxlbUV4cGFuZFZhbCAqIDEpKXtcblx0XHRcdFx0XHRcdGVsZW1FeHBhbmQgPSBjdXJyZW50RXhwYW5kO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICghZGVmYXVsdEV4cGFuZCkge1xuXHRcdFx0XHRcdFx0ZGVmYXVsdEV4cGFuZCA9ICghbGF6eVNpemVzQ2ZnLmV4cGFuZCB8fCBsYXp5U2l6ZXNDZmcuZXhwYW5kIDwgMSkgP1xuXHRcdFx0XHRcdFx0XHRkb2NFbGVtLmNsaWVudEhlaWdodCA+IDUwMCAmJiBkb2NFbGVtLmNsaWVudFdpZHRoID4gNTAwID8gNTAwIDogMzcwIDpcblx0XHRcdFx0XHRcdFx0bGF6eVNpemVzQ2ZnLmV4cGFuZDtcblxuXHRcdFx0XHRcdFx0bGF6eXNpemVzLl9kZWZFeCA9IGRlZmF1bHRFeHBhbmQ7XG5cblx0XHRcdFx0XHRcdHByZWxvYWRFeHBhbmQgPSBkZWZhdWx0RXhwYW5kICogbGF6eVNpemVzQ2ZnLmV4cEZhY3Rvcjtcblx0XHRcdFx0XHRcdGhGYWMgPSBsYXp5U2l6ZXNDZmcuaEZhYztcblx0XHRcdFx0XHRcdGlzQm9keUhpZGRlbiA9IG51bGw7XG5cblx0XHRcdFx0XHRcdGlmKGN1cnJlbnRFeHBhbmQgPCBwcmVsb2FkRXhwYW5kICYmIGlzTG9hZGluZyA8IDEgJiYgbG93UnVucyA+IDIgJiYgbG9hZE1vZGUgPiAyICYmICFkb2N1bWVudC5oaWRkZW4pe1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50RXhwYW5kID0gcHJlbG9hZEV4cGFuZDtcblx0XHRcdFx0XHRcdFx0bG93UnVucyA9IDA7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYobG9hZE1vZGUgPiAxICYmIGxvd1J1bnMgPiAxICYmIGlzTG9hZGluZyA8IDYpe1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50RXhwYW5kID0gZGVmYXVsdEV4cGFuZDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRFeHBhbmQgPSBzaHJpbmtFeHBhbmQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYoYmVmb3JlRXhwYW5kVmFsICE9PSBlbGVtRXhwYW5kKXtcblx0XHRcdFx0XHRcdGVMdlcgPSBpbm5lcldpZHRoICsgKGVsZW1FeHBhbmQgKiBoRmFjKTtcblx0XHRcdFx0XHRcdGVsdkggPSBpbm5lckhlaWdodCArIGVsZW1FeHBhbmQ7XG5cdFx0XHRcdFx0XHRlbGVtTmVnYXRpdmVFeHBhbmQgPSBlbGVtRXhwYW5kICogLTE7XG5cdFx0XHRcdFx0XHRiZWZvcmVFeHBhbmRWYWwgPSBlbGVtRXhwYW5kO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJlY3QgPSBsYXp5bG9hZEVsZW1zW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0XHRcdFx0aWYgKChlTGJvdHRvbSA9IHJlY3QuYm90dG9tKSA+PSBlbGVtTmVnYXRpdmVFeHBhbmQgJiZcblx0XHRcdFx0XHRcdChlTHRvcCA9IHJlY3QudG9wKSA8PSBlbHZIICYmXG5cdFx0XHRcdFx0XHQoZUxyaWdodCA9IHJlY3QucmlnaHQpID49IGVsZW1OZWdhdGl2ZUV4cGFuZCAqIGhGYWMgJiZcblx0XHRcdFx0XHRcdChlTGxlZnQgPSByZWN0LmxlZnQpIDw9IGVMdlcgJiZcblx0XHRcdFx0XHRcdChlTGJvdHRvbSB8fCBlTHJpZ2h0IHx8IGVMbGVmdCB8fCBlTHRvcCkgJiZcblx0XHRcdFx0XHRcdChsYXp5U2l6ZXNDZmcubG9hZEhpZGRlbiB8fCBpc1Zpc2libGUobGF6eWxvYWRFbGVtc1tpXSkpICYmXG5cdFx0XHRcdFx0XHQoKGlzQ29tcGxldGVkICYmIGlzTG9hZGluZyA8IDMgJiYgIWVsZW1FeHBhbmRWYWwgJiYgKGxvYWRNb2RlIDwgMyB8fCBsb3dSdW5zIDwgNCkpIHx8IGlzTmVzdGVkVmlzaWJsZShsYXp5bG9hZEVsZW1zW2ldLCBlbGVtRXhwYW5kKSkpe1xuXHRcdFx0XHRcdFx0dW52ZWlsRWxlbWVudChsYXp5bG9hZEVsZW1zW2ldKTtcblx0XHRcdFx0XHRcdGxvYWRlZFNvbWV0aGluZyA9IHRydWU7XG5cdFx0XHRcdFx0XHRpZihpc0xvYWRpbmcgPiA5KXticmVhazt9XG5cdFx0XHRcdFx0fSBlbHNlIGlmKCFsb2FkZWRTb21ldGhpbmcgJiYgaXNDb21wbGV0ZWQgJiYgIWF1dG9Mb2FkRWxlbSAmJlxuXHRcdFx0XHRcdFx0aXNMb2FkaW5nIDwgNCAmJiBsb3dSdW5zIDwgNCAmJiBsb2FkTW9kZSA+IDIgJiZcblx0XHRcdFx0XHRcdChwcmVsb2FkRWxlbXNbMF0gfHwgbGF6eVNpemVzQ2ZnLnByZWxvYWRBZnRlckxvYWQpICYmXG5cdFx0XHRcdFx0XHQocHJlbG9hZEVsZW1zWzBdIHx8ICghZWxlbUV4cGFuZFZhbCAmJiAoKGVMYm90dG9tIHx8IGVMcmlnaHQgfHwgZUxsZWZ0IHx8IGVMdG9wKSB8fCBsYXp5bG9hZEVsZW1zW2ldW19nZXRBdHRyaWJ1dGVdKGxhenlTaXplc0NmZy5zaXplc0F0dHIpICE9ICdhdXRvJykpKSl7XG5cdFx0XHRcdFx0XHRhdXRvTG9hZEVsZW0gPSBwcmVsb2FkRWxlbXNbMF0gfHwgbGF6eWxvYWRFbGVtc1tpXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihhdXRvTG9hZEVsZW0gJiYgIWxvYWRlZFNvbWV0aGluZyl7XG5cdFx0XHRcdFx0dW52ZWlsRWxlbWVudChhdXRvTG9hZEVsZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciB0aHJvdHRsZWRDaGVja0VsZW1lbnRzID0gdGhyb3R0bGUoY2hlY2tFbGVtZW50cyk7XG5cblx0XHR2YXIgc3dpdGNoTG9hZGluZ0NsYXNzID0gZnVuY3Rpb24oZSl7XG5cdFx0XHR2YXIgZWxlbSA9IGUudGFyZ2V0O1xuXG5cdFx0XHRpZiAoZWxlbS5fbGF6eUNhY2hlKSB7XG5cdFx0XHRcdGRlbGV0ZSBlbGVtLl9sYXp5Q2FjaGU7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0cmVzZXRQcmVsb2FkaW5nKGUpO1xuXHRcdFx0YWRkQ2xhc3MoZWxlbSwgbGF6eVNpemVzQ2ZnLmxvYWRlZENsYXNzKTtcblx0XHRcdHJlbW92ZUNsYXNzKGVsZW0sIGxhenlTaXplc0NmZy5sb2FkaW5nQ2xhc3MpO1xuXHRcdFx0YWRkUmVtb3ZlTG9hZEV2ZW50cyhlbGVtLCByYWZTd2l0Y2hMb2FkaW5nQ2xhc3MpO1xuXHRcdFx0dHJpZ2dlckV2ZW50KGVsZW0sICdsYXp5bG9hZGVkJyk7XG5cdFx0fTtcblx0XHR2YXIgcmFmZWRTd2l0Y2hMb2FkaW5nQ2xhc3MgPSByQUZJdChzd2l0Y2hMb2FkaW5nQ2xhc3MpO1xuXHRcdHZhciByYWZTd2l0Y2hMb2FkaW5nQ2xhc3MgPSBmdW5jdGlvbihlKXtcblx0XHRcdHJhZmVkU3dpdGNoTG9hZGluZ0NsYXNzKHt0YXJnZXQ6IGUudGFyZ2V0fSk7XG5cdFx0fTtcblxuXHRcdHZhciBjaGFuZ2VJZnJhbWVTcmMgPSBmdW5jdGlvbihlbGVtLCBzcmMpe1xuXHRcdFx0dmFyIGxvYWRNb2RlID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbG9hZC1tb2RlJykgfHwgbGF6eVNpemVzQ2ZnLmlmcmFtZUxvYWRNb2RlO1xuXG5cdFx0XHQvLyBsb2FkTW9kZSBjYW4gYmUgYWxzbyBhIHN0cmluZyFcblx0XHRcdGlmIChsb2FkTW9kZSA9PSAwKSB7XG5cdFx0XHRcdGVsZW0uY29udGVudFdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHNyYyk7XG5cdFx0XHR9IGVsc2UgaWYgKGxvYWRNb2RlID09IDEpIHtcblx0XHRcdFx0ZWxlbS5zcmMgPSBzcmM7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciBoYW5kbGVTb3VyY2VzID0gZnVuY3Rpb24oc291cmNlKXtcblx0XHRcdHZhciBjdXN0b21NZWRpYTtcblxuXHRcdFx0dmFyIHNvdXJjZVNyY3NldCA9IHNvdXJjZVtfZ2V0QXR0cmlidXRlXShsYXp5U2l6ZXNDZmcuc3Jjc2V0QXR0cik7XG5cblx0XHRcdGlmKCAoY3VzdG9tTWVkaWEgPSBsYXp5U2l6ZXNDZmcuY3VzdG9tTWVkaWFbc291cmNlW19nZXRBdHRyaWJ1dGVdKCdkYXRhLW1lZGlhJykgfHwgc291cmNlW19nZXRBdHRyaWJ1dGVdKCdtZWRpYScpXSkgKXtcblx0XHRcdFx0c291cmNlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBjdXN0b21NZWRpYSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmKHNvdXJjZVNyY3NldCl7XG5cdFx0XHRcdHNvdXJjZS5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsIHNvdXJjZVNyY3NldCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciBsYXp5VW52ZWlsID0gckFGSXQoZnVuY3Rpb24gKGVsZW0sIGRldGFpbCwgaXNBdXRvLCBzaXplcywgaXNJbWcpe1xuXHRcdFx0dmFyIHNyYywgc3Jjc2V0LCBwYXJlbnQsIGlzUGljdHVyZSwgZXZlbnQsIGZpcmVzTG9hZDtcblxuXHRcdFx0aWYoIShldmVudCA9IHRyaWdnZXJFdmVudChlbGVtLCAnbGF6eWJlZm9yZXVudmVpbCcsIGRldGFpbCkpLmRlZmF1bHRQcmV2ZW50ZWQpe1xuXG5cdFx0XHRcdGlmKHNpemVzKXtcblx0XHRcdFx0XHRpZihpc0F1dG8pe1xuXHRcdFx0XHRcdFx0YWRkQ2xhc3MoZWxlbSwgbGF6eVNpemVzQ2ZnLmF1dG9zaXplc0NsYXNzKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoJ3NpemVzJywgc2l6ZXMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNyY3NldCA9IGVsZW1bX2dldEF0dHJpYnV0ZV0obGF6eVNpemVzQ2ZnLnNyY3NldEF0dHIpO1xuXHRcdFx0XHRzcmMgPSBlbGVtW19nZXRBdHRyaWJ1dGVdKGxhenlTaXplc0NmZy5zcmNBdHRyKTtcblxuXHRcdFx0XHRpZihpc0ltZykge1xuXHRcdFx0XHRcdHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0XHRpc1BpY3R1cmUgPSBwYXJlbnQgJiYgcmVnUGljdHVyZS50ZXN0KHBhcmVudC5ub2RlTmFtZSB8fCAnJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmaXJlc0xvYWQgPSBkZXRhaWwuZmlyZXNMb2FkIHx8ICgoJ3NyYycgaW4gZWxlbSkgJiYgKHNyY3NldCB8fCBzcmMgfHwgaXNQaWN0dXJlKSk7XG5cblx0XHRcdFx0ZXZlbnQgPSB7dGFyZ2V0OiBlbGVtfTtcblxuXHRcdFx0XHRhZGRDbGFzcyhlbGVtLCBsYXp5U2l6ZXNDZmcubG9hZGluZ0NsYXNzKTtcblxuXHRcdFx0XHRpZihmaXJlc0xvYWQpe1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dChyZXNldFByZWxvYWRpbmdUaW1lcik7XG5cdFx0XHRcdFx0cmVzZXRQcmVsb2FkaW5nVGltZXIgPSBzZXRUaW1lb3V0KHJlc2V0UHJlbG9hZGluZywgMjUwMCk7XG5cdFx0XHRcdFx0YWRkUmVtb3ZlTG9hZEV2ZW50cyhlbGVtLCByYWZTd2l0Y2hMb2FkaW5nQ2xhc3MsIHRydWUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYoaXNQaWN0dXJlKXtcblx0XHRcdFx0XHRmb3JFYWNoLmNhbGwocGFyZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzb3VyY2UnKSwgaGFuZGxlU291cmNlcyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihzcmNzZXQpe1xuXHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCdzcmNzZXQnLCBzcmNzZXQpO1xuXHRcdFx0XHR9IGVsc2UgaWYoc3JjICYmICFpc1BpY3R1cmUpe1xuXHRcdFx0XHRcdGlmKHJlZ0lmcmFtZS50ZXN0KGVsZW0ubm9kZU5hbWUpKXtcblx0XHRcdFx0XHRcdGNoYW5nZUlmcmFtZVNyYyhlbGVtLCBzcmMpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNyYyA9IHNyYztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihpc0ltZyAmJiAoc3Jjc2V0IHx8IGlzUGljdHVyZSkpe1xuXHRcdFx0XHRcdHVwZGF0ZVBvbHlmaWxsKGVsZW0sIHtzcmM6IHNyY30pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmKGVsZW0uX2xhenlSYWNlKXtcblx0XHRcdFx0ZGVsZXRlIGVsZW0uX2xhenlSYWNlO1xuXHRcdFx0fVxuXHRcdFx0cmVtb3ZlQ2xhc3MoZWxlbSwgbGF6eVNpemVzQ2ZnLmxhenlDbGFzcyk7XG5cblx0XHRcdHJBRihmdW5jdGlvbigpe1xuXHRcdFx0XHQvLyBQYXJ0IG9mIHRoaXMgY2FuIGJlIHJlbW92ZWQgYXMgc29vbiBhcyB0aGlzIGZpeCBpcyBvbGRlcjogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzczMSAoMjAxNSlcblx0XHRcdFx0dmFyIGlzTG9hZGVkID0gZWxlbS5jb21wbGV0ZSAmJiBlbGVtLm5hdHVyYWxXaWR0aCA+IDE7XG5cblx0XHRcdFx0aWYoICFmaXJlc0xvYWQgfHwgaXNMb2FkZWQpe1xuXHRcdFx0XHRcdGlmIChpc0xvYWRlZCkge1xuXHRcdFx0XHRcdFx0YWRkQ2xhc3MoZWxlbSwgbGF6eVNpemVzQ2ZnLmZhc3RMb2FkZWRDbGFzcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN3aXRjaExvYWRpbmdDbGFzcyhldmVudCk7XG5cdFx0XHRcdFx0ZWxlbS5fbGF6eUNhY2hlID0gdHJ1ZTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRpZiAoJ19sYXp5Q2FjaGUnIGluIGVsZW0pIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGVsZW0uX2xhenlDYWNoZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCA5KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZWxlbS5sb2FkaW5nID09ICdsYXp5Jykge1xuXHRcdFx0XHRcdGlzTG9hZGluZy0tO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0cnVlKTtcblx0XHR9KTtcblxuXHRcdC8qKlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGVsZW0geyBFbGVtZW50IH1cblx0XHQgKi9cblx0XHR2YXIgdW52ZWlsRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtKXtcblx0XHRcdGlmIChlbGVtLl9sYXp5UmFjZSkge3JldHVybjt9XG5cdFx0XHR2YXIgZGV0YWlsO1xuXG5cdFx0XHR2YXIgaXNJbWcgPSByZWdJbWcudGVzdChlbGVtLm5vZGVOYW1lKTtcblxuXHRcdFx0Ly9hbGxvdyB1c2luZyBzaXplcz1cImF1dG9cIiwgYnV0IGRvbid0IHVzZS4gaXQncyBpbnZhbGlkLiBVc2UgZGF0YS1zaXplcz1cImF1dG9cIiBvciBhIHZhbGlkIHZhbHVlIGZvciBzaXplcyBpbnN0ZWFkIChpLmUuOiBzaXplcz1cIjgwdndcIilcblx0XHRcdHZhciBzaXplcyA9IGlzSW1nICYmIChlbGVtW19nZXRBdHRyaWJ1dGVdKGxhenlTaXplc0NmZy5zaXplc0F0dHIpIHx8IGVsZW1bX2dldEF0dHJpYnV0ZV0oJ3NpemVzJykpO1xuXHRcdFx0dmFyIGlzQXV0byA9IHNpemVzID09ICdhdXRvJztcblxuXHRcdFx0aWYoIChpc0F1dG8gfHwgIWlzQ29tcGxldGVkKSAmJiBpc0ltZyAmJiAoZWxlbVtfZ2V0QXR0cmlidXRlXSgnc3JjJykgfHwgZWxlbS5zcmNzZXQpICYmICFlbGVtLmNvbXBsZXRlICYmICFoYXNDbGFzcyhlbGVtLCBsYXp5U2l6ZXNDZmcuZXJyb3JDbGFzcykgJiYgaGFzQ2xhc3MoZWxlbSwgbGF6eVNpemVzQ2ZnLmxhenlDbGFzcykpe3JldHVybjt9XG5cblx0XHRcdGRldGFpbCA9IHRyaWdnZXJFdmVudChlbGVtLCAnbGF6eXVudmVpbHJlYWQnKS5kZXRhaWw7XG5cblx0XHRcdGlmKGlzQXV0byl7XG5cdFx0XHRcdCBhdXRvU2l6ZXIudXBkYXRlRWxlbShlbGVtLCB0cnVlLCBlbGVtLm9mZnNldFdpZHRoKTtcblx0XHRcdH1cblxuXHRcdFx0ZWxlbS5fbGF6eVJhY2UgPSB0cnVlO1xuXHRcdFx0aXNMb2FkaW5nKys7XG5cblx0XHRcdGxhenlVbnZlaWwoZWxlbSwgZGV0YWlsLCBpc0F1dG8sIHNpemVzLCBpc0ltZyk7XG5cdFx0fTtcblxuXHRcdHZhciBhZnRlclNjcm9sbCA9IGRlYm91bmNlKGZ1bmN0aW9uKCl7XG5cdFx0XHRsYXp5U2l6ZXNDZmcubG9hZE1vZGUgPSAzO1xuXHRcdFx0dGhyb3R0bGVkQ2hlY2tFbGVtZW50cygpO1xuXHRcdH0pO1xuXG5cdFx0dmFyIGFsdExvYWRtb2RlU2Nyb2xsTGlzdG5lciA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRpZihsYXp5U2l6ZXNDZmcubG9hZE1vZGUgPT0gMyl7XG5cdFx0XHRcdGxhenlTaXplc0NmZy5sb2FkTW9kZSA9IDI7XG5cdFx0XHR9XG5cdFx0XHRhZnRlclNjcm9sbCgpO1xuXHRcdH07XG5cblx0XHR2YXIgb25sb2FkID0gZnVuY3Rpb24oKXtcblx0XHRcdGlmKGlzQ29tcGxldGVkKXtyZXR1cm47fVxuXHRcdFx0aWYoRGF0ZS5ub3coKSAtIHN0YXJ0ZWQgPCA5OTkpe1xuXHRcdFx0XHRzZXRUaW1lb3V0KG9ubG9hZCwgOTk5KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cblx0XHRcdGlzQ29tcGxldGVkID0gdHJ1ZTtcblxuXHRcdFx0bGF6eVNpemVzQ2ZnLmxvYWRNb2RlID0gMztcblxuXHRcdFx0dGhyb3R0bGVkQ2hlY2tFbGVtZW50cygpO1xuXG5cdFx0XHRhZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhbHRMb2FkbW9kZVNjcm9sbExpc3RuZXIsIHRydWUpO1xuXHRcdH07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0XzogZnVuY3Rpb24oKXtcblx0XHRcdFx0c3RhcnRlZCA9IERhdGUubm93KCk7XG5cblx0XHRcdFx0bGF6eXNpemVzLmVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsYXp5U2l6ZXNDZmcubGF6eUNsYXNzKTtcblx0XHRcdFx0cHJlbG9hZEVsZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsYXp5U2l6ZXNDZmcubGF6eUNsYXNzICsgJyAnICsgbGF6eVNpemVzQ2ZnLnByZWxvYWRDbGFzcyk7XG5cblx0XHRcdFx0YWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhyb3R0bGVkQ2hlY2tFbGVtZW50cywgdHJ1ZSk7XG5cblx0XHRcdFx0YWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhyb3R0bGVkQ2hlY2tFbGVtZW50cywgdHJ1ZSk7XG5cblx0XHRcdFx0YWRkRXZlbnRMaXN0ZW5lcigncGFnZXNob3cnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdGlmIChlLnBlcnNpc3RlZCkge1xuXHRcdFx0XHRcdFx0dmFyIGxvYWRpbmdFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgbGF6eVNpemVzQ2ZnLmxvYWRpbmdDbGFzcyk7XG5cblx0XHRcdFx0XHRcdGlmIChsb2FkaW5nRWxlbWVudHMubGVuZ3RoICYmIGxvYWRpbmdFbGVtZW50cy5mb3JFYWNoKSB7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0bG9hZGluZ0VsZW1lbnRzLmZvckVhY2goIGZ1bmN0aW9uIChpbWcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpbWcuY29tcGxldGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dW52ZWlsRWxlbWVudChpbWcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKXtcblx0XHRcdFx0XHRuZXcgTXV0YXRpb25PYnNlcnZlciggdGhyb3R0bGVkQ2hlY2tFbGVtZW50cyApLm9ic2VydmUoIGRvY0VsZW0sIHtjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUsIGF0dHJpYnV0ZXM6IHRydWV9ICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZG9jRWxlbVtfYWRkRXZlbnRMaXN0ZW5lcl0oJ0RPTU5vZGVJbnNlcnRlZCcsIHRocm90dGxlZENoZWNrRWxlbWVudHMsIHRydWUpO1xuXHRcdFx0XHRcdGRvY0VsZW1bX2FkZEV2ZW50TGlzdGVuZXJdKCdET01BdHRyTW9kaWZpZWQnLCB0aHJvdHRsZWRDaGVja0VsZW1lbnRzLCB0cnVlKTtcblx0XHRcdFx0XHRzZXRJbnRlcnZhbCh0aHJvdHRsZWRDaGVja0VsZW1lbnRzLCA5OTkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRocm90dGxlZENoZWNrRWxlbWVudHMsIHRydWUpO1xuXG5cdFx0XHRcdC8vLCAnZnVsbHNjcmVlbmNoYW5nZSdcblx0XHRcdFx0Wydmb2N1cycsICdtb3VzZW92ZXInLCAnY2xpY2snLCAnbG9hZCcsICd0cmFuc2l0aW9uZW5kJywgJ2FuaW1hdGlvbmVuZCddLmZvckVhY2goZnVuY3Rpb24obmFtZSl7XG5cdFx0XHRcdFx0ZG9jdW1lbnRbX2FkZEV2ZW50TGlzdGVuZXJdKG5hbWUsIHRocm90dGxlZENoZWNrRWxlbWVudHMsIHRydWUpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZigoL2QkfF5jLy50ZXN0KGRvY3VtZW50LnJlYWR5U3RhdGUpKSl7XG5cdFx0XHRcdFx0b25sb2FkKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9ubG9hZCk7XG5cdFx0XHRcdFx0ZG9jdW1lbnRbX2FkZEV2ZW50TGlzdGVuZXJdKCdET01Db250ZW50TG9hZGVkJywgdGhyb3R0bGVkQ2hlY2tFbGVtZW50cyk7XG5cdFx0XHRcdFx0c2V0VGltZW91dChvbmxvYWQsIDIwMDAwKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGxhenlzaXplcy5lbGVtZW50cy5sZW5ndGgpe1xuXHRcdFx0XHRcdGNoZWNrRWxlbWVudHMoKTtcblx0XHRcdFx0XHRyQUYuX2xzRmx1c2goKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdHRsZWRDaGVja0VsZW1lbnRzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRjaGVja0VsZW1zOiB0aHJvdHRsZWRDaGVja0VsZW1lbnRzLFxuXHRcdFx0dW52ZWlsOiB1bnZlaWxFbGVtZW50LFxuXHRcdFx0X2FMU0w6IGFsdExvYWRtb2RlU2Nyb2xsTGlzdG5lcixcblx0XHR9O1xuXHR9KSgpO1xuXG5cblx0dmFyIGF1dG9TaXplciA9IChmdW5jdGlvbigpe1xuXHRcdHZhciBhdXRvc2l6ZXNFbGVtcztcblxuXHRcdHZhciBzaXplRWxlbWVudCA9IHJBRkl0KGZ1bmN0aW9uKGVsZW0sIHBhcmVudCwgZXZlbnQsIHdpZHRoKXtcblx0XHRcdHZhciBzb3VyY2VzLCBpLCBsZW47XG5cdFx0XHRlbGVtLl9sYXp5c2l6ZXNXaWR0aCA9IHdpZHRoO1xuXHRcdFx0d2lkdGggKz0gJ3B4JztcblxuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoJ3NpemVzJywgd2lkdGgpO1xuXG5cdFx0XHRpZihyZWdQaWN0dXJlLnRlc3QocGFyZW50Lm5vZGVOYW1lIHx8ICcnKSl7XG5cdFx0XHRcdHNvdXJjZXMgPSBwYXJlbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NvdXJjZScpO1xuXHRcdFx0XHRmb3IoaSA9IDAsIGxlbiA9IHNvdXJjZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xuXHRcdFx0XHRcdHNvdXJjZXNbaV0uc2V0QXR0cmlidXRlKCdzaXplcycsIHdpZHRoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZighZXZlbnQuZGV0YWlsLmRhdGFBdHRyKXtcblx0XHRcdFx0dXBkYXRlUG9seWZpbGwoZWxlbSwgZXZlbnQuZGV0YWlsKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvKipcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBlbGVtIHtFbGVtZW50fVxuXHRcdCAqIEBwYXJhbSBkYXRhQXR0clxuXHRcdCAqIEBwYXJhbSBbd2lkdGhdIHsgbnVtYmVyIH1cblx0XHQgKi9cblx0XHR2YXIgZ2V0U2l6ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbSwgZGF0YUF0dHIsIHdpZHRoKXtcblx0XHRcdHZhciBldmVudDtcblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cblx0XHRcdGlmKHBhcmVudCl7XG5cdFx0XHRcdHdpZHRoID0gZ2V0V2lkdGgoZWxlbSwgcGFyZW50LCB3aWR0aCk7XG5cdFx0XHRcdGV2ZW50ID0gdHJpZ2dlckV2ZW50KGVsZW0sICdsYXp5YmVmb3Jlc2l6ZXMnLCB7d2lkdGg6IHdpZHRoLCBkYXRhQXR0cjogISFkYXRhQXR0cn0pO1xuXG5cdFx0XHRcdGlmKCFldmVudC5kZWZhdWx0UHJldmVudGVkKXtcblx0XHRcdFx0XHR3aWR0aCA9IGV2ZW50LmRldGFpbC53aWR0aDtcblxuXHRcdFx0XHRcdGlmKHdpZHRoICYmIHdpZHRoICE9PSBlbGVtLl9sYXp5c2l6ZXNXaWR0aCl7XG5cdFx0XHRcdFx0XHRzaXplRWxlbWVudChlbGVtLCBwYXJlbnQsIGV2ZW50LCB3aWR0aCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciB1cGRhdGVFbGVtZW50c1NpemVzID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciBpO1xuXHRcdFx0dmFyIGxlbiA9IGF1dG9zaXplc0VsZW1zLmxlbmd0aDtcblx0XHRcdGlmKGxlbil7XG5cdFx0XHRcdGkgPSAwO1xuXG5cdFx0XHRcdGZvcig7IGkgPCBsZW47IGkrKyl7XG5cdFx0XHRcdFx0Z2V0U2l6ZUVsZW1lbnQoYXV0b3NpemVzRWxlbXNbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciBkZWJvdW5jZWRVcGRhdGVFbGVtZW50c1NpemVzID0gZGVib3VuY2UodXBkYXRlRWxlbWVudHNTaXplcyk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0XzogZnVuY3Rpb24oKXtcblx0XHRcdFx0YXV0b3NpemVzRWxlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxhenlTaXplc0NmZy5hdXRvc2l6ZXNDbGFzcyk7XG5cdFx0XHRcdGFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlZFVwZGF0ZUVsZW1lbnRzU2l6ZXMpO1xuXHRcdFx0fSxcblx0XHRcdGNoZWNrRWxlbXM6IGRlYm91bmNlZFVwZGF0ZUVsZW1lbnRzU2l6ZXMsXG5cdFx0XHR1cGRhdGVFbGVtOiBnZXRTaXplRWxlbWVudFxuXHRcdH07XG5cdH0pKCk7XG5cblx0dmFyIGluaXQgPSBmdW5jdGlvbigpe1xuXHRcdGlmKCFpbml0LmkgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7XG5cdFx0XHRpbml0LmkgPSB0cnVlO1xuXHRcdFx0YXV0b1NpemVyLl8oKTtcblx0XHRcdGxvYWRlci5fKCk7XG5cdFx0fVxuXHR9O1xuXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRpZihsYXp5U2l6ZXNDZmcuaW5pdCl7XG5cdFx0XHRpbml0KCk7XG5cdFx0fVxuXHR9KTtcblxuXHRsYXp5c2l6ZXMgPSB7XG5cdFx0LyoqXG5cdFx0ICogQHR5cGUgeyBMYXp5U2l6ZXNDb25maWdQYXJ0aWFsIH1cblx0XHQgKi9cblx0XHRjZmc6IGxhenlTaXplc0NmZyxcblx0XHRhdXRvU2l6ZXI6IGF1dG9TaXplcixcblx0XHRsb2FkZXI6IGxvYWRlcixcblx0XHRpbml0OiBpbml0LFxuXHRcdHVQOiB1cGRhdGVQb2x5ZmlsbCxcblx0XHRhQzogYWRkQ2xhc3MsXG5cdFx0ckM6IHJlbW92ZUNsYXNzLFxuXHRcdGhDOiBoYXNDbGFzcyxcblx0XHRmaXJlOiB0cmlnZ2VyRXZlbnQsXG5cdFx0Z1c6IGdldFdpZHRoLFxuXHRcdHJBRjogckFGLFxuXHR9O1xuXG5cdHJldHVybiBsYXp5c2l6ZXM7XG59XG4pKTtcblxufSx7fV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uKHdpbmRvdywgZmFjdG9yeSkge1xuXHR2YXIgZ2xvYmFsSW5zdGFsbCA9IGZ1bmN0aW9uKCl7XG5cdFx0ZmFjdG9yeSh3aW5kb3cubGF6eVNpemVzKTtcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbGF6eXVudmVpbHJlYWQnLCBnbG9iYWxJbnN0YWxsLCB0cnVlKTtcblx0fTtcblxuXHRmYWN0b3J5ID0gZmFjdG9yeS5iaW5kKG51bGwsIHdpbmRvdywgd2luZG93LmRvY3VtZW50KTtcblxuXHRpZih0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKXtcblx0XHRmYWN0b3J5KHJlcXVpcmUoJ2xhenlzaXplcycpKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShbJ2xhenlzaXplcyddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmKHdpbmRvdy5sYXp5U2l6ZXMpIHtcblx0XHRnbG9iYWxJbnN0YWxsKCk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xhenl1bnZlaWxyZWFkJywgZ2xvYmFsSW5zdGFsbCwgdHJ1ZSk7XG5cdH1cbn0od2luZG93LCBmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCBsYXp5U2l6ZXMpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZighd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3JldHVybjt9XG5cblx0dmFyIGxhenlTaXplc0NmZyA9IGxhenlTaXplcy5jZmc7XG5cdHZhciByZWdXaGl0ZSA9IC9cXHMrL2c7XG5cdHZhciByZWdTcGxpdFNldCA9IC9cXHMqXFx8XFxzK3xcXHMrXFx8XFxzKi9nO1xuXHR2YXIgcmVnU291cmNlID0gL14oLis/KSg/OlxccytcXFtcXHMqKC4rPylcXHMqXFxdKSg/OlxccytcXFtcXHMqKC4rPylcXHMqXFxdKT8kLztcblx0dmFyIHJlZ1R5cGUgPSAvXlxccypcXCgqXFxzKnR5cGVcXHMqOlxccyooLis/KVxccypcXCkqXFxzKiQvO1xuXHR2YXIgcmVnQmdVcmxFc2NhcGUgPSAvXFwofFxcKXwnLztcblx0dmFyIGFsbG93ZWRCYWNrZ3JvdW5kU2l6ZSA9IHtjb250YWluOiAxLCBjb3ZlcjogMX07XG5cdHZhciBwcm94eVdpZHRoID0gZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIHdpZHRoID0gbGF6eVNpemVzLmdXKGVsZW0sIGVsZW0ucGFyZW50Tm9kZSk7XG5cblx0XHRpZighZWxlbS5fbGF6eXNpemVzV2lkdGggfHwgd2lkdGggPiBlbGVtLl9sYXp5c2l6ZXNXaWR0aCl7XG5cdFx0XHRlbGVtLl9sYXp5c2l6ZXNXaWR0aCA9IHdpZHRoO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbS5fbGF6eXNpemVzV2lkdGg7XG5cdH07XG5cdHZhciBnZXRCZ1NpemUgPSBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgYmdTaXplO1xuXG5cdFx0YmdTaXplID0gKGdldENvbXB1dGVkU3R5bGUoZWxlbSkgfHwge2dldFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uKCl7fX0pLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQtc2l6ZScpO1xuXG5cdFx0aWYoIWFsbG93ZWRCYWNrZ3JvdW5kU2l6ZVtiZ1NpemVdICYmIGFsbG93ZWRCYWNrZ3JvdW5kU2l6ZVtlbGVtLnN0eWxlLmJhY2tncm91bmRTaXplXSl7XG5cdFx0XHRiZ1NpemUgPSBlbGVtLnN0eWxlLmJhY2tncm91bmRTaXplO1xuXHRcdH1cblxuXHRcdHJldHVybiBiZ1NpemU7XG5cdH07XG5cdHZhciBzZXRUeXBlT3JNZWRpYSA9IGZ1bmN0aW9uKHNvdXJjZSwgbWF0Y2gpe1xuXHRcdGlmKG1hdGNoKXtcblx0XHRcdHZhciB0eXBlTWF0Y2ggPSBtYXRjaC5tYXRjaChyZWdUeXBlKTtcblx0XHRcdGlmKHR5cGVNYXRjaCAmJiB0eXBlTWF0Y2hbMV0pe1xuXHRcdFx0XHRzb3VyY2Uuc2V0QXR0cmlidXRlKCd0eXBlJywgdHlwZU1hdGNoWzFdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNvdXJjZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbGF6eVNpemVzQ2ZnLmN1c3RvbU1lZGlhW21hdGNoXSB8fCBtYXRjaCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHR2YXIgY3JlYXRlUGljdHVyZSA9IGZ1bmN0aW9uKHNldHMsIGVsZW0sIGltZyl7XG5cdFx0dmFyIHBpY3R1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwaWN0dXJlJyk7XG5cdFx0dmFyIHNpemVzID0gZWxlbS5nZXRBdHRyaWJ1dGUobGF6eVNpemVzQ2ZnLnNpemVzQXR0cik7XG5cdFx0dmFyIHJhdGlvID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmF0aW8nKTtcblx0XHR2YXIgb3B0aW11bXggPSBlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1vcHRpbXVteCcpO1xuXG5cdFx0aWYoZWxlbS5fbGF6eWJnc2V0ICYmIGVsZW0uX2xhenliZ3NldC5wYXJlbnROb2RlID09IGVsZW0pe1xuXHRcdFx0ZWxlbS5yZW1vdmVDaGlsZChlbGVtLl9sYXp5YmdzZXQpO1xuXHRcdH1cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbWcsICdfbGF6eWJnc2V0Jywge1xuXHRcdFx0dmFsdWU6IGVsZW0sXG5cdFx0XHR3cml0YWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtLCAnX2xhenliZ3NldCcsIHtcblx0XHRcdHZhbHVlOiBwaWN0dXJlLFxuXHRcdFx0d3JpdGFibGU6IHRydWVcblx0XHR9KTtcblxuXHRcdHNldHMgPSBzZXRzLnJlcGxhY2UocmVnV2hpdGUsICcgJykuc3BsaXQocmVnU3BsaXRTZXQpO1xuXG5cdFx0cGljdHVyZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGltZy5jbGFzc05hbWUgPSBsYXp5U2l6ZXNDZmcubGF6eUNsYXNzO1xuXG5cdFx0aWYoc2V0cy5sZW5ndGggPT0gMSAmJiAhc2l6ZXMpe1xuXHRcdFx0c2l6ZXMgPSAnYXV0byc7XG5cdFx0fVxuXG5cdFx0c2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNldCl7XG5cdFx0XHR2YXIgbWF0Y2g7XG5cdFx0XHR2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG5cblx0XHRcdGlmKHNpemVzICYmIHNpemVzICE9ICdhdXRvJyl7XG5cdFx0XHRcdHNvdXJjZS5zZXRBdHRyaWJ1dGUoJ3NpemVzJywgc2l6ZXMpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZigobWF0Y2ggPSBzZXQubWF0Y2gocmVnU291cmNlKSkpe1xuXHRcdFx0XHRzb3VyY2Uuc2V0QXR0cmlidXRlKGxhenlTaXplc0NmZy5zcmNzZXRBdHRyLCBtYXRjaFsxXSk7XG5cblx0XHRcdFx0c2V0VHlwZU9yTWVkaWEoc291cmNlLCBtYXRjaFsyXSk7XG5cdFx0XHRcdHNldFR5cGVPck1lZGlhKHNvdXJjZSwgbWF0Y2hbM10pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c291cmNlLnNldEF0dHJpYnV0ZShsYXp5U2l6ZXNDZmcuc3Jjc2V0QXR0ciwgc2V0KTtcblx0XHRcdH1cblxuXHRcdFx0cGljdHVyZS5hcHBlbmRDaGlsZChzb3VyY2UpO1xuXHRcdH0pO1xuXG5cdFx0aWYoc2l6ZXMpe1xuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZShsYXp5U2l6ZXNDZmcuc2l6ZXNBdHRyLCBzaXplcyk7XG5cdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZShsYXp5U2l6ZXNDZmcuc2l6ZXNBdHRyKTtcblx0XHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCdzaXplcycpO1xuXHRcdH1cblx0XHRpZihvcHRpbXVteCl7XG5cdFx0XHRpbWcuc2V0QXR0cmlidXRlKCdkYXRhLW9wdGltdW14Jywgb3B0aW11bXgpO1xuXHRcdH1cblx0XHRpZihyYXRpbykge1xuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZSgnZGF0YS1yYXRpbycsIHJhdGlvKTtcblx0XHR9XG5cblx0XHRwaWN0dXJlLmFwcGVuZENoaWxkKGltZyk7XG5cblx0XHRlbGVtLmFwcGVuZENoaWxkKHBpY3R1cmUpO1xuXHR9O1xuXG5cdHZhciBwcm94eUxvYWQgPSBmdW5jdGlvbihlKXtcblx0XHRpZighZS50YXJnZXQuX2xhenliZ3NldCl7cmV0dXJuO31cblxuXHRcdHZhciBpbWFnZSA9IGUudGFyZ2V0O1xuXHRcdHZhciBlbGVtID0gaW1hZ2UuX2xhenliZ3NldDtcblx0XHR2YXIgYmcgPSBpbWFnZS5jdXJyZW50U3JjIHx8IGltYWdlLnNyYztcblxuXG5cdFx0aWYoYmcpe1xuXHRcdFx0dmFyIHVzZVNyYyA9IHJlZ0JnVXJsRXNjYXBlLnRlc3QoYmcpID8gSlNPTi5zdHJpbmdpZnkoYmcpIDogYmc7XG5cdFx0XHR2YXIgZXZlbnQgPSBsYXp5U2l6ZXMuZmlyZShlbGVtLCAnYmdzZXRwcm94eScsIHtcblx0XHRcdFx0c3JjOiBiZyxcblx0XHRcdFx0dXNlU3JjOiB1c2VTcmMsXG5cdFx0XHRcdGZ1bGxTcmM6IG51bGwsXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpe1xuXHRcdFx0XHRlbGVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGV2ZW50LmRldGFpbC5mdWxsU3JjIHx8ICd1cmwoJyArIGV2ZW50LmRldGFpbC51c2VTcmMgKyAnKSc7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYoaW1hZ2UuX2xhenliZ3NldExvYWRpbmcpe1xuXHRcdFx0bGF6eVNpemVzLmZpcmUoZWxlbSwgJ19sYXp5bG9hZGVkJywge30sIGZhbHNlLCB0cnVlKTtcblx0XHRcdGRlbGV0ZSBpbWFnZS5fbGF6eWJnc2V0TG9hZGluZztcblx0XHR9XG5cdH07XG5cblx0YWRkRXZlbnRMaXN0ZW5lcignbGF6eWJlZm9yZXVudmVpbCcsIGZ1bmN0aW9uKGUpe1xuXHRcdHZhciBzZXQsIGltYWdlLCBlbGVtO1xuXG5cdFx0aWYoZS5kZWZhdWx0UHJldmVudGVkIHx8ICEoc2V0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWJnc2V0JykpKXtyZXR1cm47fVxuXG5cdFx0ZWxlbSA9IGUudGFyZ2V0O1xuXHRcdGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cblx0XHRpbWFnZS5hbHQgPSAnJztcblxuXHRcdGltYWdlLl9sYXp5YmdzZXRMb2FkaW5nID0gdHJ1ZTtcblx0XHRlLmRldGFpbC5maXJlc0xvYWQgPSB0cnVlO1xuXG5cdFx0Y3JlYXRlUGljdHVyZShzZXQsIGVsZW0sIGltYWdlKTtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdGxhenlTaXplcy5sb2FkZXIudW52ZWlsKGltYWdlKTtcblxuXHRcdFx0bGF6eVNpemVzLnJBRihmdW5jdGlvbigpe1xuXHRcdFx0XHRsYXp5U2l6ZXMuZmlyZShpbWFnZSwgJ19sYXp5bG9hZGVkJywge30sIHRydWUsIHRydWUpO1xuXHRcdFx0XHRpZihpbWFnZS5jb21wbGV0ZSkge1xuXHRcdFx0XHRcdHByb3h5TG9hZCh7dGFyZ2V0OiBpbWFnZX0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9KTtcblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcHJveHlMb2FkLCB0cnVlKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbGF6eWJlZm9yZXNpemVzJywgZnVuY3Rpb24oZSl7XG5cdFx0aWYoZS5kZXRhaWwuaW5zdGFuY2UgIT0gbGF6eVNpemVzKXtyZXR1cm47fVxuXHRcdGlmKGUudGFyZ2V0Ll9sYXp5YmdzZXQgJiYgZS5kZXRhaWwuZGF0YUF0dHIpe1xuXHRcdFx0dmFyIGVsZW0gPSBlLnRhcmdldC5fbGF6eWJnc2V0O1xuXHRcdFx0dmFyIGJnU2l6ZSA9IGdldEJnU2l6ZShlbGVtKTtcblxuXHRcdFx0aWYoYWxsb3dlZEJhY2tncm91bmRTaXplW2JnU2l6ZV0pe1xuXHRcdFx0XHRlLnRhcmdldC5fbGF6eXNpemVzUGFyZW50Rml0ID0gYmdTaXplO1xuXG5cdFx0XHRcdGxhenlTaXplcy5yQUYoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRlLnRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyZW50LWZpdCcsIGJnU2l6ZSk7XG5cdFx0XHRcdFx0aWYoZS50YXJnZXQuX2xhenlzaXplc1BhcmVudEZpdCl7XG5cdFx0XHRcdFx0XHRkZWxldGUgZS50YXJnZXQuX2xhenlzaXplc1BhcmVudEZpdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSwgdHJ1ZSk7XG5cblx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xhenliZWZvcmVzaXplcycsIGZ1bmN0aW9uKGUpe1xuXHRcdGlmKGUuZGVmYXVsdFByZXZlbnRlZCB8fCAhZS50YXJnZXQuX2xhenliZ3NldCB8fCBlLmRldGFpbC5pbnN0YW5jZSAhPSBsYXp5U2l6ZXMpe3JldHVybjt9XG5cdFx0ZS5kZXRhaWwud2lkdGggPSBwcm94eVdpZHRoKGUudGFyZ2V0Ll9sYXp5YmdzZXQpO1xuXHR9KTtcbn0pKTtcblxufSx7XCJsYXp5c2l6ZXNcIjoxN31dLDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbih3aW5kb3csIGZhY3RvcnkpIHtcblx0aWYoIXdpbmRvdykge3JldHVybjt9XG5cdHZhciBnbG9iYWxJbnN0YWxsID0gZnVuY3Rpb24oKXtcblx0XHRmYWN0b3J5KHdpbmRvdy5sYXp5U2l6ZXMpO1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsYXp5dW52ZWlscmVhZCcsIGdsb2JhbEluc3RhbGwsIHRydWUpO1xuXHR9O1xuXG5cdGZhY3RvcnkgPSBmYWN0b3J5LmJpbmQobnVsbCwgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpO1xuXG5cdGlmKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpe1xuXHRcdGZhY3RvcnkocmVxdWlyZSgnbGF6eXNpemVzJykpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKFsnbGF6eXNpemVzJ10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYod2luZG93LmxhenlTaXplcykge1xuXHRcdGdsb2JhbEluc3RhbGwoKTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbGF6eXVudmVpbHJlYWQnLCBnbG9iYWxJbnN0YWxsLCB0cnVlKTtcblx0fVxufSh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID9cblx0d2luZG93IDogMCwgZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgbGF6eVNpemVzKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRpZighd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3JldHVybjt9XG5cblx0dmFyIHJlZ0Rlc2NyaXB0b3JzID0gL1xccysoXFxkKykod3xoKVxccysoXFxkKykod3xoKS87XG5cdHZhciByZWdDc3NGaXQgPSAvcGFyZW50LWZpdFtcIiddKlxccyo6XFxzKltcIiddKihjb250YWlufGNvdmVyfHdpZHRoKS87XG5cdHZhciByZWdDc3NPYmplY3QgPSAvcGFyZW50LWNvbnRhaW5lcltcIiddKlxccyo6XFxzKltcIiddKiguKz8pKD89KFxcc3wkfCx8J3xcInw7KSkvO1xuXHR2YXIgcmVnUGljdHVyZSA9IC9ecGljdHVyZSQvaTtcblx0dmFyIGNmZyA9IGxhenlTaXplcy5jZmc7XG5cblx0dmFyIGdldENTUyA9IGZ1bmN0aW9uIChlbGVtKXtcblx0XHRyZXR1cm4gKGdldENvbXB1dGVkU3R5bGUoZWxlbSwgbnVsbCkgfHwge30pO1xuXHR9O1xuXG5cdHZhciBwYXJlbnRGaXQgPSB7XG5cblx0XHRnZXRQYXJlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudFNlbCl7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbWVudDtcblx0XHRcdHZhciBwYXJlbnROb2RlID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXG5cdFx0XHRpZigoIXBhcmVudFNlbCB8fCBwYXJlbnRTZWwgPT0gJ3ByZXYnKSAmJiBwYXJlbnROb2RlICYmIHJlZ1BpY3R1cmUudGVzdChwYXJlbnROb2RlLm5vZGVOYW1lIHx8ICcnKSl7XG5cdFx0XHRcdHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdGlmKHBhcmVudFNlbCAhPSAnc2VsZicpe1xuXHRcdFx0XHRpZihwYXJlbnRTZWwgPT0gJ3ByZXYnKXtcblx0XHRcdFx0XHRwYXJlbnQgPSBlbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cdFx0XHRcdH0gZWxzZSBpZihwYXJlbnRTZWwgJiYgKHBhcmVudE5vZGUuY2xvc2VzdCB8fCB3aW5kb3cualF1ZXJ5KSl7XG5cdFx0XHRcdFx0cGFyZW50ID0gKHBhcmVudE5vZGUuY2xvc2VzdCA/XG5cdFx0XHRcdFx0XHRcdHBhcmVudE5vZGUuY2xvc2VzdChwYXJlbnRTZWwpIDpcblx0XHRcdFx0XHRcdFx0alF1ZXJ5KHBhcmVudE5vZGUpLmNsb3Nlc3QocGFyZW50U2VsKVswXSkgfHxcblx0XHRcdFx0XHRcdHBhcmVudE5vZGVcblx0XHRcdFx0XHQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cGFyZW50ID0gcGFyZW50Tm9kZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcGFyZW50O1xuXHRcdH0sXG5cblx0XHRnZXRGaXQ6IGZ1bmN0aW9uKGVsZW1lbnQpe1xuXHRcdFx0dmFyIHRtcE1hdGNoLCBwYXJlbnRPYmo7XG5cdFx0XHR2YXIgY3NzID0gZ2V0Q1NTKGVsZW1lbnQpO1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3MuY29udGVudCB8fCBjc3MuZm9udEZhbWlseTtcblx0XHRcdHZhciBvYmogPSB7XG5cdFx0XHRcdGZpdDogZWxlbWVudC5fbGF6eXNpemVzUGFyZW50Rml0IHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudC1maXQnKVxuXHRcdFx0fTtcblxuXHRcdFx0aWYoIW9iai5maXQgJiYgY29udGVudCAmJiAodG1wTWF0Y2ggPSBjb250ZW50Lm1hdGNoKHJlZ0Nzc0ZpdCkpKXtcblx0XHRcdFx0b2JqLmZpdCA9IHRtcE1hdGNoWzFdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihvYmouZml0KXtcblx0XHRcdFx0cGFyZW50T2JqID0gZWxlbWVudC5fbGF6eXNpemVzUGFyZW50Q29udGFpbmVyIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudC1jb250YWluZXInKTtcblxuXHRcdFx0XHRpZighcGFyZW50T2JqICYmIGNvbnRlbnQgJiYgKHRtcE1hdGNoID0gY29udGVudC5tYXRjaChyZWdDc3NPYmplY3QpKSl7XG5cdFx0XHRcdFx0cGFyZW50T2JqID0gdG1wTWF0Y2hbMV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRvYmoucGFyZW50ID0gcGFyZW50Rml0LmdldFBhcmVudChlbGVtZW50LCBwYXJlbnRPYmopO1xuXG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9iai5maXQgPSBjc3Mub2JqZWN0Rml0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH0sXG5cblx0XHRnZXRJbWFnZVJhdGlvOiBmdW5jdGlvbihlbGVtZW50KXtcblx0XHRcdHZhciBpLCBzcmNzZXQsIG1lZGlhLCByYXRpbywgbWF0Y2gsIHdpZHRoLCBoZWlnaHQ7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXHRcdFx0dmFyIGVsZW1lbnRzID0gcGFyZW50ICYmIHJlZ1BpY3R1cmUudGVzdChwYXJlbnQubm9kZU5hbWUgfHwgJycpID9cblx0XHRcdFx0XHRwYXJlbnQucXVlcnlTZWxlY3RvckFsbCgnc291cmNlLCBpbWcnKSA6XG5cdFx0XHRcdFx0W2VsZW1lbnRdXG5cdFx0XHRcdDtcblxuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudHNbaV07XG5cdFx0XHRcdHNyY3NldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGNmZy5zcmNzZXRBdHRyKSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3Jjc2V0JykgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGZzcmNzZXQnKSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1yaXNyY3NldCcpIHx8ICcnO1xuXHRcdFx0XHRtZWRpYSA9IGVsZW1lbnQuX2xzTWVkaWEgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ21lZGlhJyk7XG5cdFx0XHRcdG1lZGlhID0gY2ZnLmN1c3RvbU1lZGlhW2VsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1lZGlhJykgfHwgbWVkaWFdIHx8IG1lZGlhO1xuXG5cdFx0XHRcdGlmKHNyY3NldCAmJiAoIW1lZGlhIHx8ICh3aW5kb3cubWF0Y2hNZWRpYSAmJiBtYXRjaE1lZGlhKG1lZGlhKSB8fCB7fSkubWF0Y2hlcyApKXtcblx0XHRcdFx0XHRyYXRpbyA9IHBhcnNlRmxvYXQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXNwZWN0cmF0aW8nKSk7XG5cblx0XHRcdFx0XHRpZiAoIXJhdGlvKSB7XG5cdFx0XHRcdFx0XHRtYXRjaCA9IHNyY3NldC5tYXRjaChyZWdEZXNjcmlwdG9ycyk7XG5cblx0XHRcdFx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRpZihtYXRjaFsyXSA9PSAndycpe1xuXHRcdFx0XHRcdFx0XHRcdHdpZHRoID0gbWF0Y2hbMV07XG5cdFx0XHRcdFx0XHRcdFx0aGVpZ2h0ID0gbWF0Y2hbM107XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0d2lkdGggPSBtYXRjaFszXTtcblx0XHRcdFx0XHRcdFx0XHRoZWlnaHQgPSBtYXRjaFsxXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0d2lkdGggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnd2lkdGgnKTtcblx0XHRcdFx0XHRcdFx0aGVpZ2h0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByYXRpbztcblx0XHR9LFxuXG5cdFx0Y2FsY3VsYXRlU2l6ZTogZnVuY3Rpb24oZWxlbWVudCwgd2lkdGgpe1xuXHRcdFx0dmFyIGRpc3BsYXlSYXRpbywgaGVpZ2h0LCBpbWFnZVJhdGlvLCByZXRXaWR0aDtcblx0XHRcdHZhciBmaXRPYmogPSB0aGlzLmdldEZpdChlbGVtZW50KTtcblx0XHRcdHZhciBmaXQgPSBmaXRPYmouZml0O1xuXHRcdFx0dmFyIGZpdEVsZW0gPSBmaXRPYmoucGFyZW50O1xuXG5cdFx0XHRpZihmaXQgIT0gJ3dpZHRoJyAmJiAoKGZpdCAhPSAnY29udGFpbicgJiYgZml0ICE9ICdjb3ZlcicpIHx8ICEoaW1hZ2VSYXRpbyA9IHRoaXMuZ2V0SW1hZ2VSYXRpbyhlbGVtZW50KSkpKXtcblx0XHRcdFx0cmV0dXJuIHdpZHRoO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihmaXRFbGVtKXtcblx0XHRcdFx0d2lkdGggPSBmaXRFbGVtLmNsaWVudFdpZHRoO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zml0RWxlbSA9IGVsZW1lbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldFdpZHRoID0gd2lkdGg7XG5cblx0XHRcdGlmKGZpdCA9PSAnd2lkdGgnKXtcblx0XHRcdFx0cmV0V2lkdGggPSB3aWR0aDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhlaWdodCA9IGZpdEVsZW0uY2xpZW50SGVpZ2h0O1xuXG5cdFx0XHRcdGlmKChkaXNwbGF5UmF0aW8gPSAgd2lkdGggLyBoZWlnaHQpICYmICgoZml0ID09ICdjb3ZlcicgJiYgZGlzcGxheVJhdGlvIDwgaW1hZ2VSYXRpbykgfHwgKGZpdCA9PSAnY29udGFpbicgJiYgZGlzcGxheVJhdGlvID4gaW1hZ2VSYXRpbykpKXtcblx0XHRcdFx0XHRyZXRXaWR0aCA9IHdpZHRoICogKGltYWdlUmF0aW8gLyBkaXNwbGF5UmF0aW8pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXRXaWR0aDtcblx0XHR9XG5cdH07XG5cblx0bGF6eVNpemVzLnBhcmVudEZpdCA9IHBhcmVudEZpdDtcblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdsYXp5YmVmb3Jlc2l6ZXMnLCBmdW5jdGlvbihlKXtcblx0XHRpZihlLmRlZmF1bHRQcmV2ZW50ZWQgfHwgZS5kZXRhaWwuaW5zdGFuY2UgIT0gbGF6eVNpemVzKXtyZXR1cm47fVxuXG5cdFx0dmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcblx0XHRlLmRldGFpbC53aWR0aCA9IHBhcmVudEZpdC5jYWxjdWxhdGVTaXplKGVsZW1lbnQsIGUuZGV0YWlsLndpZHRoKTtcblx0fSk7XG59KSk7XG5cbn0se1wibGF6eXNpemVzXCI6MTd9XSwyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKipcbiAqIFN3aXBlciBDdXN0b20gRWxlbWVudCAxMS4xLjRcbiAqIE1vc3QgbW9kZXJuIG1vYmlsZSB0b3VjaCBzbGlkZXIgYW5kIGZyYW1ld29yayB3aXRoIGhhcmR3YXJlIGFjY2VsZXJhdGVkIHRyYW5zaXRpb25zXG4gKiBodHRwczovL3N3aXBlcmpzLmNvbVxuICpcbiAqIENvcHlyaWdodCAyMDE0LTIwMjQgVmxhZGltaXIgS2hhcmxhbXBpZGlcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqXG4gKiBSZWxlYXNlZCBvbjogTWF5IDMwLCAyMDI0XG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiBTU1IgV2luZG93IDQuMC4yXG4gICAqIEJldHRlciBoYW5kbGluZyBmb3Igd2luZG93IG9iamVjdCBpbiBTU1IgZW52aXJvbm1lbnRcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL25vbGltaXRzNHdlYi9zc3Itd2luZG93XG4gICAqXG4gICAqIENvcHlyaWdodCAyMDIxLCBWbGFkaW1pciBLaGFybGFtcGlkaVxuICAgKlxuICAgKiBMaWNlbnNlZCB1bmRlciBNSVRcbiAgICpcbiAgICogUmVsZWFzZWQgb246IERlY2VtYmVyIDEzLCAyMDIxXG4gICAqL1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuICBmdW5jdGlvbiBpc09iamVjdCQyKG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvYmogJiYgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7XG4gIH1cbiAgZnVuY3Rpb24gZXh0ZW5kJDIodGFyZ2V0LCBzcmMpIHtcbiAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHtcbiAgICAgIHRhcmdldCA9IHt9O1xuICAgIH1cbiAgICBpZiAoc3JjID09PSB2b2lkIDApIHtcbiAgICAgIHNyYyA9IHt9O1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhzcmMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdGFyZ2V0W2tleV0gPT09ICd1bmRlZmluZWQnKSB0YXJnZXRba2V5XSA9IHNyY1trZXldO2Vsc2UgaWYgKGlzT2JqZWN0JDIoc3JjW2tleV0pICYmIGlzT2JqZWN0JDIodGFyZ2V0W2tleV0pICYmIE9iamVjdC5rZXlzKHNyY1trZXldKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGV4dGVuZCQyKHRhcmdldFtrZXldLCBzcmNba2V5XSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgY29uc3Qgc3NyRG9jdW1lbnQgPSB7XG4gICAgYm9keToge30sXG4gICAgYWRkRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7fSxcbiAgICBhY3RpdmVFbGVtZW50OiB7XG4gICAgICBibHVyKCkge30sXG4gICAgICBub2RlTmFtZTogJydcbiAgICB9LFxuICAgIHF1ZXJ5U2VsZWN0b3IoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHF1ZXJ5U2VsZWN0b3JBbGwoKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBnZXRFbGVtZW50QnlJZCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgY3JlYXRlRXZlbnQoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbml0RXZlbnQoKSB7fVxuICAgICAgfTtcbiAgICB9LFxuICAgIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgIGNoaWxkTm9kZXM6IFtdLFxuICAgICAgICBzdHlsZToge30sXG4gICAgICAgIHNldEF0dHJpYnV0ZSgpIHt9LFxuICAgICAgICBnZXRFbGVtZW50c0J5VGFnTmFtZSgpIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBjcmVhdGVFbGVtZW50TlMoKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfSxcbiAgICBpbXBvcnROb2RlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBsb2NhdGlvbjoge1xuICAgICAgaGFzaDogJycsXG4gICAgICBob3N0OiAnJyxcbiAgICAgIGhvc3RuYW1lOiAnJyxcbiAgICAgIGhyZWY6ICcnLFxuICAgICAgb3JpZ2luOiAnJyxcbiAgICAgIHBhdGhuYW1lOiAnJyxcbiAgICAgIHByb3RvY29sOiAnJyxcbiAgICAgIHNlYXJjaDogJydcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGdldERvY3VtZW50KCkge1xuICAgIGNvbnN0IGRvYyA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudCA6IHt9O1xuICAgIGV4dGVuZCQyKGRvYywgc3NyRG9jdW1lbnQpO1xuICAgIHJldHVybiBkb2M7XG4gIH1cbiAgY29uc3Qgc3NyV2luZG93ID0ge1xuICAgIGRvY3VtZW50OiBzc3JEb2N1bWVudCxcbiAgICBuYXZpZ2F0b3I6IHtcbiAgICAgIHVzZXJBZ2VudDogJydcbiAgICB9LFxuICAgIGxvY2F0aW9uOiB7XG4gICAgICBoYXNoOiAnJyxcbiAgICAgIGhvc3Q6ICcnLFxuICAgICAgaG9zdG5hbWU6ICcnLFxuICAgICAgaHJlZjogJycsXG4gICAgICBvcmlnaW46ICcnLFxuICAgICAgcGF0aG5hbWU6ICcnLFxuICAgICAgcHJvdG9jb2w6ICcnLFxuICAgICAgc2VhcmNoOiAnJ1xuICAgIH0sXG4gICAgaGlzdG9yeToge1xuICAgICAgcmVwbGFjZVN0YXRlKCkge30sXG4gICAgICBwdXNoU3RhdGUoKSB7fSxcbiAgICAgIGdvKCkge30sXG4gICAgICBiYWNrKCkge31cbiAgICB9LFxuICAgIEN1c3RvbUV2ZW50OiBmdW5jdGlvbiBDdXN0b21FdmVudCgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgYWRkRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7fSxcbiAgICBnZXRDb21wdXRlZFN0eWxlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UHJvcGVydHlWYWx1ZSgpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBJbWFnZSgpIHt9LFxuICAgIERhdGUoKSB7fSxcbiAgICBzY3JlZW46IHt9LFxuICAgIHNldFRpbWVvdXQoKSB7fSxcbiAgICBjbGVhclRpbWVvdXQoKSB7fSxcbiAgICBtYXRjaE1lZGlhKCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB7XG4gICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoY2FsbGJhY2ssIDApO1xuICAgIH0sXG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpIHtcbiAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGdldFdpbmRvdygpIHtcbiAgICBjb25zdCB3aW4gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHt9O1xuICAgIGV4dGVuZCQyKHdpbiwgc3NyV2luZG93KTtcbiAgICByZXR1cm4gd2luO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xhc3Nlc1RvVG9rZW5zKGNsYXNzZXMpIHtcbiAgICBpZiAoY2xhc3NlcyA9PT0gdm9pZCAwKSB7XG4gICAgICBjbGFzc2VzID0gJyc7XG4gICAgfVxuICAgIHJldHVybiBjbGFzc2VzLnRyaW0oKS5zcGxpdCgnICcpLmZpbHRlcihjID0+ICEhYy50cmltKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsZXRlUHJvcHMob2JqKSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gb2JqO1xuICAgIE9iamVjdC5rZXlzKG9iamVjdCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgb2JqZWN0W2tleV0gPSBudWxsO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBubyBnZXR0ZXIgZm9yIG9iamVjdFxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgZGVsZXRlIG9iamVjdFtrZXldO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBzb21ldGhpbmcgZ290IHdyb25nXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gbmV4dFRpY2soY2FsbGJhY2ssIGRlbGF5KSB7XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHtcbiAgICAgIGRlbGF5ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoY2FsbGJhY2ssIGRlbGF5KTtcbiAgfVxuICBmdW5jdGlvbiBub3coKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0Q29tcHV0ZWRTdHlsZSQxKGVsKSB7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgbGV0IHN0eWxlO1xuICAgIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkge1xuICAgICAgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbCk7XG4gICAgfVxuICAgIGlmICghc3R5bGUgJiYgZWwuY3VycmVudFN0eWxlKSB7XG4gICAgICBzdHlsZSA9IGVsLmN1cnJlbnRTdHlsZTtcbiAgICB9XG4gICAgaWYgKCFzdHlsZSkge1xuICAgICAgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG4gIGZ1bmN0aW9uIGdldFRyYW5zbGF0ZShlbCwgYXhpcykge1xuICAgIGlmIChheGlzID09PSB2b2lkIDApIHtcbiAgICAgIGF4aXMgPSAneCc7XG4gICAgfVxuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGxldCBtYXRyaXg7XG4gICAgbGV0IGN1clRyYW5zZm9ybTtcbiAgICBsZXQgdHJhbnNmb3JtTWF0cml4O1xuICAgIGNvbnN0IGN1clN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSQxKGVsKTtcbiAgICBpZiAod2luZG93LldlYktpdENTU01hdHJpeCkge1xuICAgICAgY3VyVHJhbnNmb3JtID0gY3VyU3R5bGUudHJhbnNmb3JtIHx8IGN1clN0eWxlLndlYmtpdFRyYW5zZm9ybTtcbiAgICAgIGlmIChjdXJUcmFuc2Zvcm0uc3BsaXQoJywnKS5sZW5ndGggPiA2KSB7XG4gICAgICAgIGN1clRyYW5zZm9ybSA9IGN1clRyYW5zZm9ybS5zcGxpdCgnLCAnKS5tYXAoYSA9PiBhLnJlcGxhY2UoJywnLCAnLicpKS5qb2luKCcsICcpO1xuICAgICAgfVxuICAgICAgLy8gU29tZSBvbGQgdmVyc2lvbnMgb2YgV2Via2l0IGNob2tlIHdoZW4gJ25vbmUnIGlzIHBhc3NlZDsgcGFzc1xuICAgICAgLy8gZW1wdHkgc3RyaW5nIGluc3RlYWQgaW4gdGhpcyBjYXNlXG4gICAgICB0cmFuc2Zvcm1NYXRyaXggPSBuZXcgd2luZG93LldlYktpdENTU01hdHJpeChjdXJUcmFuc2Zvcm0gPT09ICdub25lJyA/ICcnIDogY3VyVHJhbnNmb3JtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNmb3JtTWF0cml4ID0gY3VyU3R5bGUuTW96VHJhbnNmb3JtIHx8IGN1clN0eWxlLk9UcmFuc2Zvcm0gfHwgY3VyU3R5bGUuTXNUcmFuc2Zvcm0gfHwgY3VyU3R5bGUubXNUcmFuc2Zvcm0gfHwgY3VyU3R5bGUudHJhbnNmb3JtIHx8IGN1clN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3RyYW5zZm9ybScpLnJlcGxhY2UoJ3RyYW5zbGF0ZSgnLCAnbWF0cml4KDEsIDAsIDAsIDEsJyk7XG4gICAgICBtYXRyaXggPSB0cmFuc2Zvcm1NYXRyaXgudG9TdHJpbmcoKS5zcGxpdCgnLCcpO1xuICAgIH1cbiAgICBpZiAoYXhpcyA9PT0gJ3gnKSB7XG4gICAgICAvLyBMYXRlc3QgQ2hyb21lIGFuZCB3ZWJraXRzIEZpeFxuICAgICAgaWYgKHdpbmRvdy5XZWJLaXRDU1NNYXRyaXgpIGN1clRyYW5zZm9ybSA9IHRyYW5zZm9ybU1hdHJpeC5tNDE7XG4gICAgICAvLyBDcmF6eSBJRTEwIE1hdHJpeFxuICAgICAgZWxzZSBpZiAobWF0cml4Lmxlbmd0aCA9PT0gMTYpIGN1clRyYW5zZm9ybSA9IHBhcnNlRmxvYXQobWF0cml4WzEyXSk7XG4gICAgICAvLyBOb3JtYWwgQnJvd3NlcnNcbiAgICAgIGVsc2UgY3VyVHJhbnNmb3JtID0gcGFyc2VGbG9hdChtYXRyaXhbNF0pO1xuICAgIH1cbiAgICBpZiAoYXhpcyA9PT0gJ3knKSB7XG4gICAgICAvLyBMYXRlc3QgQ2hyb21lIGFuZCB3ZWJraXRzIEZpeFxuICAgICAgaWYgKHdpbmRvdy5XZWJLaXRDU1NNYXRyaXgpIGN1clRyYW5zZm9ybSA9IHRyYW5zZm9ybU1hdHJpeC5tNDI7XG4gICAgICAvLyBDcmF6eSBJRTEwIE1hdHJpeFxuICAgICAgZWxzZSBpZiAobWF0cml4Lmxlbmd0aCA9PT0gMTYpIGN1clRyYW5zZm9ybSA9IHBhcnNlRmxvYXQobWF0cml4WzEzXSk7XG4gICAgICAvLyBOb3JtYWwgQnJvd3NlcnNcbiAgICAgIGVsc2UgY3VyVHJhbnNmb3JtID0gcGFyc2VGbG9hdChtYXRyaXhbNV0pO1xuICAgIH1cbiAgICByZXR1cm4gY3VyVHJhbnNmb3JtIHx8IDA7XG4gIH1cbiAgZnVuY3Rpb24gaXNPYmplY3QkMShvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiBvICE9PSBudWxsICYmIG8uY29uc3RydWN0b3IgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKSA9PT0gJ09iamVjdCc7XG4gIH1cbiAgZnVuY3Rpb24gaXNOb2RlKG5vZGUpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5IVE1MRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAxIHx8IG5vZGUubm9kZVR5cGUgPT09IDExKTtcbiAgfVxuICBmdW5jdGlvbiBleHRlbmQkMSgpIHtcbiAgICBjb25zdCB0byA9IE9iamVjdChhcmd1bWVudHMubGVuZ3RoIDw9IDAgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMF0pO1xuICAgIGNvbnN0IG5vRXh0ZW5kID0gWydfX3Byb3RvX18nLCAnY29uc3RydWN0b3InLCAncHJvdG90eXBlJ107XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IG5leHRTb3VyY2UgPSBpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV07XG4gICAgICBpZiAobmV4dFNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIG5leHRTb3VyY2UgIT09IG51bGwgJiYgIWlzTm9kZShuZXh0U291cmNlKSkge1xuICAgICAgICBjb25zdCBrZXlzQXJyYXkgPSBPYmplY3Qua2V5cyhPYmplY3QobmV4dFNvdXJjZSkpLmZpbHRlcihrZXkgPT4gbm9FeHRlbmQuaW5kZXhPZihrZXkpIDwgMCk7XG4gICAgICAgIGZvciAobGV0IG5leHRJbmRleCA9IDAsIGxlbiA9IGtleXNBcnJheS5sZW5ndGg7IG5leHRJbmRleCA8IGxlbjsgbmV4dEluZGV4ICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBuZXh0S2V5ID0ga2V5c0FycmF5W25leHRJbmRleF07XG4gICAgICAgICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobmV4dFNvdXJjZSwgbmV4dEtleSk7XG4gICAgICAgICAgaWYgKGRlc2MgIT09IHVuZGVmaW5lZCAmJiBkZXNjLmVudW1lcmFibGUpIHtcbiAgICAgICAgICAgIGlmIChpc09iamVjdCQxKHRvW25leHRLZXldKSAmJiBpc09iamVjdCQxKG5leHRTb3VyY2VbbmV4dEtleV0pKSB7XG4gICAgICAgICAgICAgIGlmIChuZXh0U291cmNlW25leHRLZXldLl9fc3dpcGVyX18pIHtcbiAgICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kJDEodG9bbmV4dEtleV0sIG5leHRTb3VyY2VbbmV4dEtleV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc09iamVjdCQxKHRvW25leHRLZXldKSAmJiBpc09iamVjdCQxKG5leHRTb3VyY2VbbmV4dEtleV0pKSB7XG4gICAgICAgICAgICAgIHRvW25leHRLZXldID0ge307XG4gICAgICAgICAgICAgIGlmIChuZXh0U291cmNlW25leHRLZXldLl9fc3dpcGVyX18pIHtcbiAgICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kJDEodG9bbmV4dEtleV0sIG5leHRTb3VyY2VbbmV4dEtleV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0bztcbiAgfVxuICBmdW5jdGlvbiBzZXRDU1NQcm9wZXJ0eShlbCwgdmFyTmFtZSwgdmFyVmFsdWUpIHtcbiAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSh2YXJOYW1lLCB2YXJWYWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gYW5pbWF0ZUNTU01vZGVTY3JvbGwoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICB0YXJnZXRQb3NpdGlvbixcbiAgICAgIHNpZGVcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBjb25zdCBzdGFydFBvc2l0aW9uID0gLXN3aXBlci50cmFuc2xhdGU7XG4gICAgbGV0IHN0YXJ0VGltZSA9IG51bGw7XG4gICAgbGV0IHRpbWU7XG4gICAgY29uc3QgZHVyYXRpb24gPSBzd2lwZXIucGFyYW1zLnNwZWVkO1xuICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSAnbm9uZSc7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHN3aXBlci5jc3NNb2RlRnJhbWVJRCk7XG4gICAgY29uc3QgZGlyID0gdGFyZ2V0UG9zaXRpb24gPiBzdGFydFBvc2l0aW9uID8gJ25leHQnIDogJ3ByZXYnO1xuICAgIGNvbnN0IGlzT3V0T2ZCb3VuZCA9IChjdXJyZW50LCB0YXJnZXQpID0+IHtcbiAgICAgIHJldHVybiBkaXIgPT09ICduZXh0JyAmJiBjdXJyZW50ID49IHRhcmdldCB8fCBkaXIgPT09ICdwcmV2JyAmJiBjdXJyZW50IDw9IHRhcmdldDtcbiAgICB9O1xuICAgIGNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XG4gICAgICB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBpZiAoc3RhcnRUaW1lID09PSBudWxsKSB7XG4gICAgICAgIHN0YXJ0VGltZSA9IHRpbWU7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWF4KE1hdGgubWluKCh0aW1lIC0gc3RhcnRUaW1lKSAvIGR1cmF0aW9uLCAxKSwgMCk7XG4gICAgICBjb25zdCBlYXNlUHJvZ3Jlc3MgPSAwLjUgLSBNYXRoLmNvcyhwcm9ncmVzcyAqIE1hdGguUEkpIC8gMjtcbiAgICAgIGxldCBjdXJyZW50UG9zaXRpb24gPSBzdGFydFBvc2l0aW9uICsgZWFzZVByb2dyZXNzICogKHRhcmdldFBvc2l0aW9uIC0gc3RhcnRQb3NpdGlvbik7XG4gICAgICBpZiAoaXNPdXRPZkJvdW5kKGN1cnJlbnRQb3NpdGlvbiwgdGFyZ2V0UG9zaXRpb24pKSB7XG4gICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IHRhcmdldFBvc2l0aW9uO1xuICAgICAgfVxuICAgICAgc3dpcGVyLndyYXBwZXJFbC5zY3JvbGxUbyh7XG4gICAgICAgIFtzaWRlXTogY3VycmVudFBvc2l0aW9uXG4gICAgICB9KTtcbiAgICAgIGlmIChpc091dE9mQm91bmQoY3VycmVudFBvc2l0aW9uLCB0YXJnZXRQb3NpdGlvbikpIHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLnNjcm9sbFNuYXBUeXBlID0gJyc7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgICAgICBzd2lwZXIud3JhcHBlckVsLnNjcm9sbFRvKHtcbiAgICAgICAgICAgIFtzaWRlXTogY3VycmVudFBvc2l0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoc3dpcGVyLmNzc01vZGVGcmFtZUlEKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmNzc01vZGVGcmFtZUlEID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICB9O1xuICAgIGFuaW1hdGUoKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRTbGlkZVRyYW5zZm9ybUVsKHNsaWRlRWwpIHtcbiAgICByZXR1cm4gc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXRyYW5zZm9ybScpIHx8IHNsaWRlRWwuc2hhZG93Um9vdCAmJiBzbGlkZUVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS10cmFuc2Zvcm0nKSB8fCBzbGlkZUVsO1xuICB9XG4gIGZ1bmN0aW9uIGVsZW1lbnRDaGlsZHJlbihlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgIGlmIChzZWxlY3RvciA9PT0gdm9pZCAwKSB7XG4gICAgICBzZWxlY3RvciA9ICcnO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLmVsZW1lbnQuY2hpbGRyZW5dLmZpbHRlcihlbCA9PiBlbC5tYXRjaGVzKHNlbGVjdG9yKSk7XG4gIH1cbiAgZnVuY3Rpb24gc2hvd1dhcm5pbmcodGV4dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLndhcm4odGV4dCk7XG4gICAgICByZXR1cm47XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBlcnJcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIGNsYXNzZXMpIHtcbiAgICBpZiAoY2xhc3NlcyA9PT0gdm9pZCAwKSB7XG4gICAgICBjbGFzc2VzID0gW107XG4gICAgfVxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoLi4uKEFycmF5LmlzQXJyYXkoY2xhc3NlcykgPyBjbGFzc2VzIDogY2xhc3Nlc1RvVG9rZW5zKGNsYXNzZXMpKSk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIGZ1bmN0aW9uIGVsZW1lbnRPZmZzZXQoZWwpIHtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgY29uc3QgYm94ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgY29uc3QgY2xpZW50VG9wID0gZWwuY2xpZW50VG9wIHx8IGJvZHkuY2xpZW50VG9wIHx8IDA7XG4gICAgY29uc3QgY2xpZW50TGVmdCA9IGVsLmNsaWVudExlZnQgfHwgYm9keS5jbGllbnRMZWZ0IHx8IDA7XG4gICAgY29uc3Qgc2Nyb2xsVG9wID0gZWwgPT09IHdpbmRvdyA/IHdpbmRvdy5zY3JvbGxZIDogZWwuc2Nyb2xsVG9wO1xuICAgIGNvbnN0IHNjcm9sbExlZnQgPSBlbCA9PT0gd2luZG93ID8gd2luZG93LnNjcm9sbFggOiBlbC5zY3JvbGxMZWZ0O1xuICAgIHJldHVybiB7XG4gICAgICB0b3A6IGJveC50b3AgKyBzY3JvbGxUb3AgLSBjbGllbnRUb3AsXG4gICAgICBsZWZ0OiBib3gubGVmdCArIHNjcm9sbExlZnQgLSBjbGllbnRMZWZ0XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50UHJldkFsbChlbCwgc2VsZWN0b3IpIHtcbiAgICBjb25zdCBwcmV2RWxzID0gW107XG4gICAgd2hpbGUgKGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgIGNvbnN0IHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKHByZXYubWF0Y2hlcyhzZWxlY3RvcikpIHByZXZFbHMucHVzaChwcmV2KTtcbiAgICAgIH0gZWxzZSBwcmV2RWxzLnB1c2gocHJldik7XG4gICAgICBlbCA9IHByZXY7XG4gICAgfVxuICAgIHJldHVybiBwcmV2RWxzO1xuICB9XG4gIGZ1bmN0aW9uIGVsZW1lbnROZXh0QWxsKGVsLCBzZWxlY3Rvcikge1xuICAgIGNvbnN0IG5leHRFbHMgPSBbXTtcbiAgICB3aGlsZSAoZWwubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICBjb25zdCBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKG5leHQubWF0Y2hlcyhzZWxlY3RvcikpIG5leHRFbHMucHVzaChuZXh0KTtcbiAgICAgIH0gZWxzZSBuZXh0RWxzLnB1c2gobmV4dCk7XG4gICAgICBlbCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiBuZXh0RWxzO1xuICB9XG4gIGZ1bmN0aW9uIGVsZW1lbnRTdHlsZShlbCwgcHJvcCkge1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShwcm9wKTtcbiAgfVxuICBmdW5jdGlvbiBlbGVtZW50SW5kZXgoZWwpIHtcbiAgICBsZXQgY2hpbGQgPSBlbDtcbiAgICBsZXQgaTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGkgPSAwO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICB3aGlsZSAoKGNoaWxkID0gY2hpbGQucHJldmlvdXNTaWJsaW5nKSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT09IDEpIGkgKz0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGZ1bmN0aW9uIGVsZW1lbnRQYXJlbnRzKGVsLCBzZWxlY3Rvcikge1xuICAgIGNvbnN0IHBhcmVudHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGxldCBwYXJlbnQgPSBlbC5wYXJlbnRFbGVtZW50OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChwYXJlbnQubWF0Y2hlcyhzZWxlY3RvcikpIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICB9XG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmVudHM7XG4gIH1cbiAgZnVuY3Rpb24gZWxlbWVudFRyYW5zaXRpb25FbmQoZWwsIGNhbGxiYWNrKSB7XG4gICAgZnVuY3Rpb24gZmlyZUNhbGxCYWNrKGUpIHtcbiAgICAgIGlmIChlLnRhcmdldCAhPT0gZWwpIHJldHVybjtcbiAgICAgIGNhbGxiYWNrLmNhbGwoZWwsIGUpO1xuICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGZpcmVDYWxsQmFjayk7XG4gICAgfVxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGZpcmVDYWxsQmFjayk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGVsZW1lbnRPdXRlclNpemUoZWwsIHNpemUsIGluY2x1ZGVNYXJnaW5zKSB7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgaWYgKGluY2x1ZGVNYXJnaW5zKSB7XG4gICAgICByZXR1cm4gZWxbc2l6ZSA9PT0gJ3dpZHRoJyA/ICdvZmZzZXRXaWR0aCcgOiAnb2Zmc2V0SGVpZ2h0J10gKyBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHNpemUgPT09ICd3aWR0aCcgPyAnbWFyZ2luLXJpZ2h0JyA6ICdtYXJnaW4tdG9wJykpICsgcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShzaXplID09PSAnd2lkdGgnID8gJ21hcmdpbi1sZWZ0JyA6ICdtYXJnaW4tYm90dG9tJykpO1xuICAgIH1cbiAgICByZXR1cm4gZWwub2Zmc2V0V2lkdGg7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUVsZW1lbnRzQXJyYXkoZWwpIHtcbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkoZWwpID8gZWwgOiBbZWxdKS5maWx0ZXIoZSA9PiAhIWUpO1xuICB9XG5cbiAgbGV0IHN1cHBvcnQ7XG4gIGZ1bmN0aW9uIGNhbGNTdXBwb3J0KCkge1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgc21vb3RoU2Nyb2xsOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmICdzY3JvbGxCZWhhdmlvcicgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLFxuICAgICAgdG91Y2g6ICEhKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIHdpbmRvdy5Eb2N1bWVudFRvdWNoKVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZ2V0U3VwcG9ydCgpIHtcbiAgICBpZiAoIXN1cHBvcnQpIHtcbiAgICAgIHN1cHBvcnQgPSBjYWxjU3VwcG9ydCgpO1xuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydDtcbiAgfVxuXG4gIGxldCBkZXZpY2VDYWNoZWQ7XG4gIGZ1bmN0aW9uIGNhbGNEZXZpY2UoX3RlbXApIHtcbiAgICBsZXQge1xuICAgICAgdXNlckFnZW50XG4gICAgfSA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wO1xuICAgIGNvbnN0IHN1cHBvcnQgPSBnZXRTdXBwb3J0KCk7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgY29uc3QgcGxhdGZvcm0gPSB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtO1xuICAgIGNvbnN0IHVhID0gdXNlckFnZW50IHx8IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIGNvbnN0IGRldmljZSA9IHtcbiAgICAgIGlvczogZmFsc2UsXG4gICAgICBhbmRyb2lkOiBmYWxzZVxuICAgIH07XG4gICAgY29uc3Qgc2NyZWVuV2lkdGggPSB3aW5kb3cuc2NyZWVuLndpZHRoO1xuICAgIGNvbnN0IHNjcmVlbkhlaWdodCA9IHdpbmRvdy5zY3JlZW4uaGVpZ2h0O1xuICAgIGNvbnN0IGFuZHJvaWQgPSB1YS5tYXRjaCgvKEFuZHJvaWQpOz9bXFxzXFwvXSsoW1xcZC5dKyk/Lyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBsZXQgaXBhZCA9IHVhLm1hdGNoKC8oaVBhZCkuKk9TXFxzKFtcXGRfXSspLyk7XG4gICAgY29uc3QgaXBvZCA9IHVhLm1hdGNoKC8oaVBvZCkoLipPU1xccyhbXFxkX10rKSk/Lyk7XG4gICAgY29uc3QgaXBob25lID0gIWlwYWQgJiYgdWEubWF0Y2goLyhpUGhvbmVcXHNPU3xpT1MpXFxzKFtcXGRfXSspLyk7XG4gICAgY29uc3Qgd2luZG93cyA9IHBsYXRmb3JtID09PSAnV2luMzInO1xuICAgIGxldCBtYWNvcyA9IHBsYXRmb3JtID09PSAnTWFjSW50ZWwnO1xuXG4gICAgLy8gaVBhZE9zIDEzIGZpeFxuICAgIGNvbnN0IGlQYWRTY3JlZW5zID0gWycxMDI0eDEzNjYnLCAnMTM2NngxMDI0JywgJzgzNHgxMTk0JywgJzExOTR4ODM0JywgJzgzNHgxMTEyJywgJzExMTJ4ODM0JywgJzc2OHgxMDI0JywgJzEwMjR4NzY4JywgJzgyMHgxMTgwJywgJzExODB4ODIwJywgJzgxMHgxMDgwJywgJzEwODB4ODEwJ107XG4gICAgaWYgKCFpcGFkICYmIG1hY29zICYmIHN1cHBvcnQudG91Y2ggJiYgaVBhZFNjcmVlbnMuaW5kZXhPZihgJHtzY3JlZW5XaWR0aH14JHtzY3JlZW5IZWlnaHR9YCkgPj0gMCkge1xuICAgICAgaXBhZCA9IHVhLm1hdGNoKC8oVmVyc2lvbilcXC8oW1xcZC5dKykvKTtcbiAgICAgIGlmICghaXBhZCkgaXBhZCA9IFswLCAxLCAnMTNfMF8wJ107XG4gICAgICBtYWNvcyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEFuZHJvaWRcbiAgICBpZiAoYW5kcm9pZCAmJiAhd2luZG93cykge1xuICAgICAgZGV2aWNlLm9zID0gJ2FuZHJvaWQnO1xuICAgICAgZGV2aWNlLmFuZHJvaWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoaXBhZCB8fCBpcGhvbmUgfHwgaXBvZCkge1xuICAgICAgZGV2aWNlLm9zID0gJ2lvcyc7XG4gICAgICBkZXZpY2UuaW9zID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBFeHBvcnQgb2JqZWN0XG4gICAgcmV0dXJuIGRldmljZTtcbiAgfVxuICBmdW5jdGlvbiBnZXREZXZpY2Uob3ZlcnJpZGVzKSB7XG4gICAgaWYgKG92ZXJyaWRlcyA9PT0gdm9pZCAwKSB7XG4gICAgICBvdmVycmlkZXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKCFkZXZpY2VDYWNoZWQpIHtcbiAgICAgIGRldmljZUNhY2hlZCA9IGNhbGNEZXZpY2Uob3ZlcnJpZGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIGRldmljZUNhY2hlZDtcbiAgfVxuXG4gIGxldCBicm93c2VyO1xuICBmdW5jdGlvbiBjYWxjQnJvd3NlcigpIHtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBjb25zdCBkZXZpY2UgPSBnZXREZXZpY2UoKTtcbiAgICBsZXQgbmVlZFBlcnNwZWN0aXZlRml4ID0gZmFsc2U7XG4gICAgZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gICAgICBjb25zdCB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICByZXR1cm4gdWEuaW5kZXhPZignc2FmYXJpJykgPj0gMCAmJiB1YS5pbmRleE9mKCdjaHJvbWUnKSA8IDAgJiYgdWEuaW5kZXhPZignYW5kcm9pZCcpIDwgMDtcbiAgICB9XG4gICAgaWYgKGlzU2FmYXJpKCkpIHtcbiAgICAgIGNvbnN0IHVhID0gU3RyaW5nKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIGlmICh1YS5pbmNsdWRlcygnVmVyc2lvbi8nKSkge1xuICAgICAgICBjb25zdCBbbWFqb3IsIG1pbm9yXSA9IHVhLnNwbGl0KCdWZXJzaW9uLycpWzFdLnNwbGl0KCcgJylbMF0uc3BsaXQoJy4nKS5tYXAobnVtID0+IE51bWJlcihudW0pKTtcbiAgICAgICAgbmVlZFBlcnNwZWN0aXZlRml4ID0gbWFqb3IgPCAxNiB8fCBtYWpvciA9PT0gMTYgJiYgbWlub3IgPCAyO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBpc1dlYlZpZXcgPSAvKGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIGNvbnN0IGlzU2FmYXJpQnJvd3NlciA9IGlzU2FmYXJpKCk7XG4gICAgY29uc3QgbmVlZDNkRml4ID0gaXNTYWZhcmlCcm93c2VyIHx8IGlzV2ViVmlldyAmJiBkZXZpY2UuaW9zO1xuICAgIHJldHVybiB7XG4gICAgICBpc1NhZmFyaTogbmVlZFBlcnNwZWN0aXZlRml4IHx8IGlzU2FmYXJpQnJvd3NlcixcbiAgICAgIG5lZWRQZXJzcGVjdGl2ZUZpeCxcbiAgICAgIG5lZWQzZEZpeCxcbiAgICAgIGlzV2ViVmlld1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZ2V0QnJvd3NlcigpIHtcbiAgICBpZiAoIWJyb3dzZXIpIHtcbiAgICAgIGJyb3dzZXIgPSBjYWxjQnJvd3NlcigpO1xuICAgIH1cbiAgICByZXR1cm4gYnJvd3NlcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlc2l6ZShfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIG9uLFxuICAgICAgZW1pdFxuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGxldCBvYnNlcnZlciA9IG51bGw7XG4gICAgbGV0IGFuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgICBjb25zdCByZXNpemVIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmluaXRpYWxpemVkKSByZXR1cm47XG4gICAgICBlbWl0KCdiZWZvcmVSZXNpemUnKTtcbiAgICAgIGVtaXQoJ3Jlc2l6ZScpO1xuICAgIH07XG4gICAgY29uc3QgY3JlYXRlT2JzZXJ2ZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuaW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICAgIG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICBhbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0XG4gICAgICAgICAgfSA9IHN3aXBlcjtcbiAgICAgICAgICBsZXQgbmV3V2lkdGggPSB3aWR0aDtcbiAgICAgICAgICBsZXQgbmV3SGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChfcmVmMiA9PiB7XG4gICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICBjb250ZW50Qm94U2l6ZSxcbiAgICAgICAgICAgICAgY29udGVudFJlY3QsXG4gICAgICAgICAgICAgIHRhcmdldFxuICAgICAgICAgICAgfSA9IF9yZWYyO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQgIT09IHN3aXBlci5lbCkgcmV0dXJuO1xuICAgICAgICAgICAgbmV3V2lkdGggPSBjb250ZW50UmVjdCA/IGNvbnRlbnRSZWN0LndpZHRoIDogKGNvbnRlbnRCb3hTaXplWzBdIHx8IGNvbnRlbnRCb3hTaXplKS5pbmxpbmVTaXplO1xuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gY29udGVudFJlY3QgPyBjb250ZW50UmVjdC5oZWlnaHQgOiAoY29udGVudEJveFNpemVbMF0gfHwgY29udGVudEJveFNpemUpLmJsb2NrU2l6ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAobmV3V2lkdGggIT09IHdpZHRoIHx8IG5ld0hlaWdodCAhPT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXNpemVIYW5kbGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShzd2lwZXIuZWwpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlT2JzZXJ2ZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChvYnNlcnZlciAmJiBvYnNlcnZlci51bm9ic2VydmUgJiYgc3dpcGVyLmVsKSB7XG4gICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShzd2lwZXIuZWwpO1xuICAgICAgICBvYnNlcnZlciA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvcmllbnRhdGlvbkNoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuaW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICAgIGVtaXQoJ29yaWVudGF0aW9uY2hhbmdlJyk7XG4gICAgfTtcbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnJlc2l6ZU9ic2VydmVyICYmIHR5cGVvZiB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVIYW5kbGVyKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIG9yaWVudGF0aW9uQ2hhbmdlSGFuZGxlcik7XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICByZW1vdmVPYnNlcnZlcigpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUhhbmRsZXIpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgb3JpZW50YXRpb25DaGFuZ2VIYW5kbGVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIE9ic2VydmVyKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb24sXG4gICAgICBlbWl0XG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3Qgb2JzZXJ2ZXJzID0gW107XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgY29uc3QgYXR0YWNoID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBjb25zdCBPYnNlcnZlckZ1bmMgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuV2Via2l0TXV0YXRpb25PYnNlcnZlcjtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE9ic2VydmVyRnVuYyhtdXRhdGlvbnMgPT4ge1xuICAgICAgICAvLyBUaGUgb2JzZXJ2ZXJVcGRhdGUgZXZlbnQgc2hvdWxkIG9ubHkgYmUgdHJpZ2dlcmVkXG4gICAgICAgIC8vIG9uY2UgZGVzcGl0ZSB0aGUgbnVtYmVyIG9mIG11dGF0aW9ucy4gIEFkZGl0aW9uYWxcbiAgICAgICAgLy8gdHJpZ2dlcnMgYXJlIHJlZHVuZGFudCBhbmQgYXJlIHZlcnkgY29zdGx5XG4gICAgICAgIGlmIChzd2lwZXIuX19wcmV2ZW50T2JzZXJ2ZXJfXykgcmV0dXJuO1xuICAgICAgICBpZiAobXV0YXRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGVtaXQoJ29ic2VydmVyVXBkYXRlJywgbXV0YXRpb25zWzBdKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXJVcGRhdGUgPSBmdW5jdGlvbiBvYnNlcnZlclVwZGF0ZSgpIHtcbiAgICAgICAgICBlbWl0KCdvYnNlcnZlclVwZGF0ZScsIG11dGF0aW9uc1swXSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShvYnNlcnZlclVwZGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93LnNldFRpbWVvdXQob2JzZXJ2ZXJVcGRhdGUsIDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0LCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRMaXN0OiB0eXBlb2Ygb3B0aW9ucy5jaGlsZExpc3QgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMuY2hpbGRMaXN0LFxuICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0eXBlb2Ygb3B0aW9ucy5jaGFyYWN0ZXJEYXRhID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLmNoYXJhY3RlckRhdGFcbiAgICAgIH0pO1xuICAgICAgb2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICAgIH07XG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5vYnNlcnZlcikgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMub2JzZXJ2ZVBhcmVudHMpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUGFyZW50cyA9IGVsZW1lbnRQYXJlbnRzKHN3aXBlci5ob3N0RWwpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lclBhcmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBhdHRhY2goY29udGFpbmVyUGFyZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIE9ic2VydmUgY29udGFpbmVyXG4gICAgICBhdHRhY2goc3dpcGVyLmhvc3RFbCwge1xuICAgICAgICBjaGlsZExpc3Q6IHN3aXBlci5wYXJhbXMub2JzZXJ2ZVNsaWRlQ2hpbGRyZW5cbiAgICAgIH0pO1xuXG4gICAgICAvLyBPYnNlcnZlIHdyYXBwZXJcbiAgICAgIGF0dGFjaChzd2lwZXIud3JhcHBlckVsLCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICBvYnNlcnZlcnMuZm9yRWFjaChvYnNlcnZlciA9PiB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH0pO1xuICAgICAgb2JzZXJ2ZXJzLnNwbGljZSgwLCBvYnNlcnZlcnMubGVuZ3RoKTtcbiAgICB9O1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBvYnNlcnZlcjogZmFsc2UsXG4gICAgICBvYnNlcnZlUGFyZW50czogZmFsc2UsXG4gICAgICBvYnNlcnZlU2xpZGVDaGlsZHJlbjogZmFsc2VcbiAgICB9KTtcbiAgICBvbignaW5pdCcsIGluaXQpO1xuICAgIG9uKCdkZXN0cm95JywgZGVzdHJveSk7XG4gIH1cblxuICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqL1xuXG4gIHZhciBldmVudHNFbWl0dGVyID0ge1xuICAgIG9uKGV2ZW50cywgaGFuZGxlciwgcHJpb3JpdHkpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycyB8fCBzZWxmLmRlc3Ryb3llZCkgcmV0dXJuIHNlbGY7XG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHJldHVybiBzZWxmO1xuICAgICAgY29uc3QgbWV0aG9kID0gcHJpb3JpdHkgPyAndW5zaGlmdCcgOiAncHVzaCc7XG4gICAgICBldmVudHMuc3BsaXQoJyAnKS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0pIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgICAgICBzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF1bbWV0aG9kXShoYW5kbGVyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcbiAgICBvbmNlKGV2ZW50cywgaGFuZGxlciwgcHJpb3JpdHkpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycyB8fCBzZWxmLmRlc3Ryb3llZCkgcmV0dXJuIHNlbGY7XG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHJldHVybiBzZWxmO1xuICAgICAgZnVuY3Rpb24gb25jZUhhbmRsZXIoKSB7XG4gICAgICAgIHNlbGYub2ZmKGV2ZW50cywgb25jZUhhbmRsZXIpO1xuICAgICAgICBpZiAob25jZUhhbmRsZXIuX19lbWl0dGVyUHJveHkpIHtcbiAgICAgICAgICBkZWxldGUgb25jZUhhbmRsZXIuX19lbWl0dGVyUHJveHk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVyLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgb25jZUhhbmRsZXIuX19lbWl0dGVyUHJveHkgPSBoYW5kbGVyO1xuICAgICAgcmV0dXJuIHNlbGYub24oZXZlbnRzLCBvbmNlSGFuZGxlciwgcHJpb3JpdHkpO1xuICAgIH0sXG4gICAgb25BbnkoaGFuZGxlciwgcHJpb3JpdHkpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycyB8fCBzZWxmLmRlc3Ryb3llZCkgcmV0dXJuIHNlbGY7XG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHJldHVybiBzZWxmO1xuICAgICAgY29uc3QgbWV0aG9kID0gcHJpb3JpdHkgPyAndW5zaGlmdCcgOiAncHVzaCc7XG4gICAgICBpZiAoc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnMuaW5kZXhPZihoYW5kbGVyKSA8IDApIHtcbiAgICAgICAgc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnNbbWV0aG9kXShoYW5kbGVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG4gICAgb2ZmQW55KGhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycyB8fCBzZWxmLmRlc3Ryb3llZCkgcmV0dXJuIHNlbGY7XG4gICAgICBpZiAoIXNlbGYuZXZlbnRzQW55TGlzdGVuZXJzKSByZXR1cm4gc2VsZjtcbiAgICAgIGNvbnN0IGluZGV4ID0gc2VsZi5ldmVudHNBbnlMaXN0ZW5lcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHNlbGYuZXZlbnRzQW55TGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuICAgIG9mZihldmVudHMsIGhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycyB8fCBzZWxmLmRlc3Ryb3llZCkgcmV0dXJuIHNlbGY7XG4gICAgICBpZiAoIXNlbGYuZXZlbnRzTGlzdGVuZXJzKSByZXR1cm4gc2VsZjtcbiAgICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdID0gW107XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICAgICAgc2VsZi5ldmVudHNMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2goKGV2ZW50SGFuZGxlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudEhhbmRsZXIgPT09IGhhbmRsZXIgfHwgZXZlbnRIYW5kbGVyLl9fZW1pdHRlclByb3h5ICYmIGV2ZW50SGFuZGxlci5fX2VtaXR0ZXJQcm94eSA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgICBzZWxmLmV2ZW50c0xpc3RlbmVyc1tldmVudF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuICAgIGVtaXQoKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIGlmICghc2VsZi5ldmVudHNMaXN0ZW5lcnMgfHwgc2VsZi5kZXN0cm95ZWQpIHJldHVybiBzZWxmO1xuICAgICAgaWYgKCFzZWxmLmV2ZW50c0xpc3RlbmVycykgcmV0dXJuIHNlbGY7XG4gICAgICBsZXQgZXZlbnRzO1xuICAgICAgbGV0IGRhdGE7XG4gICAgICBsZXQgY29udGV4dDtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgICAgZXZlbnRzID0gYXJnc1swXTtcbiAgICAgICAgZGF0YSA9IGFyZ3Muc2xpY2UoMSwgYXJncy5sZW5ndGgpO1xuICAgICAgICBjb250ZXh0ID0gc2VsZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50cyA9IGFyZ3NbMF0uZXZlbnRzO1xuICAgICAgICBkYXRhID0gYXJnc1swXS5kYXRhO1xuICAgICAgICBjb250ZXh0ID0gYXJnc1swXS5jb250ZXh0IHx8IHNlbGY7XG4gICAgICB9XG4gICAgICBkYXRhLnVuc2hpZnQoY29udGV4dCk7XG4gICAgICBjb25zdCBldmVudHNBcnJheSA9IEFycmF5LmlzQXJyYXkoZXZlbnRzKSA/IGV2ZW50cyA6IGV2ZW50cy5zcGxpdCgnICcpO1xuICAgICAgZXZlbnRzQXJyYXkuZm9yRWFjaChldmVudCA9PiB7XG4gICAgICAgIGlmIChzZWxmLmV2ZW50c0FueUxpc3RlbmVycyAmJiBzZWxmLmV2ZW50c0FueUxpc3RlbmVycy5sZW5ndGgpIHtcbiAgICAgICAgICBzZWxmLmV2ZW50c0FueUxpc3RlbmVycy5mb3JFYWNoKGV2ZW50SGFuZGxlciA9PiB7XG4gICAgICAgICAgICBldmVudEhhbmRsZXIuYXBwbHkoY29udGV4dCwgW2V2ZW50LCAuLi5kYXRhXSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuZXZlbnRzTGlzdGVuZXJzICYmIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgICAgIHNlbGYuZXZlbnRzTGlzdGVuZXJzW2V2ZW50XS5mb3JFYWNoKGV2ZW50SGFuZGxlciA9PiB7XG4gICAgICAgICAgICBldmVudEhhbmRsZXIuYXBwbHkoY29udGV4dCwgZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNpemUoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBsZXQgd2lkdGg7XG4gICAgbGV0IGhlaWdodDtcbiAgICBjb25zdCBlbCA9IHN3aXBlci5lbDtcbiAgICBpZiAodHlwZW9mIHN3aXBlci5wYXJhbXMud2lkdGggIT09ICd1bmRlZmluZWQnICYmIHN3aXBlci5wYXJhbXMud2lkdGggIT09IG51bGwpIHtcbiAgICAgIHdpZHRoID0gc3dpcGVyLnBhcmFtcy53aWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgd2lkdGggPSBlbC5jbGllbnRXaWR0aDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzd2lwZXIucGFyYW1zLmhlaWdodCAhPT0gJ3VuZGVmaW5lZCcgJiYgc3dpcGVyLnBhcmFtcy5oZWlnaHQgIT09IG51bGwpIHtcbiAgICAgIGhlaWdodCA9IHN3aXBlci5wYXJhbXMuaGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWlnaHQgPSBlbC5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICAgIGlmICh3aWR0aCA9PT0gMCAmJiBzd2lwZXIuaXNIb3Jpem9udGFsKCkgfHwgaGVpZ2h0ID09PSAwICYmIHN3aXBlci5pc1ZlcnRpY2FsKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTdWJ0cmFjdCBwYWRkaW5nc1xuICAgIHdpZHRoID0gd2lkdGggLSBwYXJzZUludChlbGVtZW50U3R5bGUoZWwsICdwYWRkaW5nLWxlZnQnKSB8fCAwLCAxMCkgLSBwYXJzZUludChlbGVtZW50U3R5bGUoZWwsICdwYWRkaW5nLXJpZ2h0JykgfHwgMCwgMTApO1xuICAgIGhlaWdodCA9IGhlaWdodCAtIHBhcnNlSW50KGVsZW1lbnRTdHlsZShlbCwgJ3BhZGRpbmctdG9wJykgfHwgMCwgMTApIC0gcGFyc2VJbnQoZWxlbWVudFN0eWxlKGVsLCAncGFkZGluZy1ib3R0b20nKSB8fCAwLCAxMCk7XG4gICAgaWYgKE51bWJlci5pc05hTih3aWR0aCkpIHdpZHRoID0gMDtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKGhlaWdodCkpIGhlaWdodCA9IDA7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgc2l6ZTogc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gd2lkdGggOiBoZWlnaHRcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNsaWRlcygpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIGdldERpcmVjdGlvblByb3BlcnR5VmFsdWUobm9kZSwgbGFiZWwpIHtcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KG5vZGUuZ2V0UHJvcGVydHlWYWx1ZShzd2lwZXIuZ2V0RGlyZWN0aW9uTGFiZWwobGFiZWwpKSB8fCAwKTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcztcbiAgICBjb25zdCB7XG4gICAgICB3cmFwcGVyRWwsXG4gICAgICBzbGlkZXNFbCxcbiAgICAgIHNpemU6IHN3aXBlclNpemUsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIHdyb25nUlRMXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgIGNvbnN0IHByZXZpb3VzU2xpZGVzTGVuZ3RoID0gaXNWaXJ0dWFsID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCA6IHN3aXBlci5zbGlkZXMubGVuZ3RoO1xuICAgIGNvbnN0IHNsaWRlcyA9IGVsZW1lbnRDaGlsZHJlbihzbGlkZXNFbCwgYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApO1xuICAgIGNvbnN0IHNsaWRlc0xlbmd0aCA9IGlzVmlydHVhbCA/IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggOiBzbGlkZXMubGVuZ3RoO1xuICAgIGxldCBzbmFwR3JpZCA9IFtdO1xuICAgIGNvbnN0IHNsaWRlc0dyaWQgPSBbXTtcbiAgICBjb25zdCBzbGlkZXNTaXplc0dyaWQgPSBbXTtcbiAgICBsZXQgb2Zmc2V0QmVmb3JlID0gcGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZTtcbiAgICBpZiAodHlwZW9mIG9mZnNldEJlZm9yZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb2Zmc2V0QmVmb3JlID0gcGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZS5jYWxsKHN3aXBlcik7XG4gICAgfVxuICAgIGxldCBvZmZzZXRBZnRlciA9IHBhcmFtcy5zbGlkZXNPZmZzZXRBZnRlcjtcbiAgICBpZiAodHlwZW9mIG9mZnNldEFmdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvZmZzZXRBZnRlciA9IHBhcmFtcy5zbGlkZXNPZmZzZXRBZnRlci5jYWxsKHN3aXBlcik7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzU25hcEdyaWRMZW5ndGggPSBzd2lwZXIuc25hcEdyaWQubGVuZ3RoO1xuICAgIGNvbnN0IHByZXZpb3VzU2xpZGVzR3JpZExlbmd0aCA9IHN3aXBlci5zbGlkZXNHcmlkLmxlbmd0aDtcbiAgICBsZXQgc3BhY2VCZXR3ZWVuID0gcGFyYW1zLnNwYWNlQmV0d2VlbjtcbiAgICBsZXQgc2xpZGVQb3NpdGlvbiA9IC1vZmZzZXRCZWZvcmU7XG4gICAgbGV0IHByZXZTbGlkZVNpemUgPSAwO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgaWYgKHR5cGVvZiBzd2lwZXJTaXplID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNwYWNlQmV0d2VlbiA9PT0gJ3N0cmluZycgJiYgc3BhY2VCZXR3ZWVuLmluZGV4T2YoJyUnKSA+PSAwKSB7XG4gICAgICBzcGFjZUJldHdlZW4gPSBwYXJzZUZsb2F0KHNwYWNlQmV0d2Vlbi5yZXBsYWNlKCclJywgJycpKSAvIDEwMCAqIHN3aXBlclNpemU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BhY2VCZXR3ZWVuID09PSAnc3RyaW5nJykge1xuICAgICAgc3BhY2VCZXR3ZWVuID0gcGFyc2VGbG9hdChzcGFjZUJldHdlZW4pO1xuICAgIH1cbiAgICBzd2lwZXIudmlydHVhbFNpemUgPSAtc3BhY2VCZXR3ZWVuO1xuXG4gICAgLy8gcmVzZXQgbWFyZ2luc1xuICAgIHNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgaWYgKHJ0bCkge1xuICAgICAgICBzbGlkZUVsLnN0eWxlLm1hcmdpbkxlZnQgPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlRWwuc3R5bGUubWFyZ2luUmlnaHQgPSAnJztcbiAgICAgIH1cbiAgICAgIHNsaWRlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJyc7XG4gICAgICBzbGlkZUVsLnN0eWxlLm1hcmdpblRvcCA9ICcnO1xuICAgIH0pO1xuXG4gICAgLy8gcmVzZXQgY3NzTW9kZSBvZmZzZXRzXG4gICAgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgc2V0Q1NTUHJvcGVydHkod3JhcHBlckVsLCAnLS1zd2lwZXItY2VudGVyZWQtb2Zmc2V0LWJlZm9yZScsICcnKTtcbiAgICAgIHNldENTU1Byb3BlcnR5KHdyYXBwZXJFbCwgJy0tc3dpcGVyLWNlbnRlcmVkLW9mZnNldC1hZnRlcicsICcnKTtcbiAgICB9XG4gICAgY29uc3QgZ3JpZEVuYWJsZWQgPSBwYXJhbXMuZ3JpZCAmJiBwYXJhbXMuZ3JpZC5yb3dzID4gMSAmJiBzd2lwZXIuZ3JpZDtcbiAgICBpZiAoZ3JpZEVuYWJsZWQpIHtcbiAgICAgIHN3aXBlci5ncmlkLmluaXRTbGlkZXMoc2xpZGVzKTtcbiAgICB9IGVsc2UgaWYgKHN3aXBlci5ncmlkKSB7XG4gICAgICBzd2lwZXIuZ3JpZC51bnNldFNsaWRlcygpO1xuICAgIH1cblxuICAgIC8vIENhbGMgc2xpZGVzXG4gICAgbGV0IHNsaWRlU2l6ZTtcbiAgICBjb25zdCBzaG91bGRSZXNldFNsaWRlU2l6ZSA9IHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgJiYgcGFyYW1zLmJyZWFrcG9pbnRzICYmIE9iamVjdC5rZXlzKHBhcmFtcy5icmVha3BvaW50cykuZmlsdGVyKGtleSA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHBhcmFtcy5icmVha3BvaW50c1trZXldLnNsaWRlc1BlclZpZXcgIT09ICd1bmRlZmluZWQnO1xuICAgIH0pLmxlbmd0aCA+IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgc2xpZGVTaXplID0gMDtcbiAgICAgIGxldCBzbGlkZTtcbiAgICAgIGlmIChzbGlkZXNbaV0pIHNsaWRlID0gc2xpZGVzW2ldO1xuICAgICAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICAgIHN3aXBlci5ncmlkLnVwZGF0ZVNsaWRlKGksIHNsaWRlLCBzbGlkZXMpO1xuICAgICAgfVxuICAgICAgaWYgKHNsaWRlc1tpXSAmJiBlbGVtZW50U3R5bGUoc2xpZGUsICdkaXNwbGF5JykgPT09ICdub25lJykgY29udGludWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgICAgaWYgKHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycpIHtcbiAgICAgICAgaWYgKHNob3VsZFJlc2V0U2xpZGVTaXplKSB7XG4gICAgICAgICAgc2xpZGVzW2ldLnN0eWxlW3N3aXBlci5nZXREaXJlY3Rpb25MYWJlbCgnd2lkdGgnKV0gPSBgYDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbGlkZVN0eWxlcyA9IGdldENvbXB1dGVkU3R5bGUoc2xpZGUpO1xuICAgICAgICBjb25zdCBjdXJyZW50VHJhbnNmb3JtID0gc2xpZGUuc3R5bGUudHJhbnNmb3JtO1xuICAgICAgICBjb25zdCBjdXJyZW50V2ViS2l0VHJhbnNmb3JtID0gc2xpZGUuc3R5bGUud2Via2l0VHJhbnNmb3JtO1xuICAgICAgICBpZiAoY3VycmVudFRyYW5zZm9ybSkge1xuICAgICAgICAgIHNsaWRlLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFdlYktpdFRyYW5zZm9ybSkge1xuICAgICAgICAgIHNsaWRlLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykge1xuICAgICAgICAgIHNsaWRlU2l6ZSA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/IGVsZW1lbnRPdXRlclNpemUoc2xpZGUsICd3aWR0aCcsIHRydWUpIDogZWxlbWVudE91dGVyU2l6ZShzbGlkZSwgJ2hlaWdodCcsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgIGNvbnN0IHdpZHRoID0gZ2V0RGlyZWN0aW9uUHJvcGVydHlWYWx1ZShzbGlkZVN0eWxlcywgJ3dpZHRoJyk7XG4gICAgICAgICAgY29uc3QgcGFkZGluZ0xlZnQgPSBnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlKHNsaWRlU3R5bGVzLCAncGFkZGluZy1sZWZ0Jyk7XG4gICAgICAgICAgY29uc3QgcGFkZGluZ1JpZ2h0ID0gZ2V0RGlyZWN0aW9uUHJvcGVydHlWYWx1ZShzbGlkZVN0eWxlcywgJ3BhZGRpbmctcmlnaHQnKTtcbiAgICAgICAgICBjb25zdCBtYXJnaW5MZWZ0ID0gZ2V0RGlyZWN0aW9uUHJvcGVydHlWYWx1ZShzbGlkZVN0eWxlcywgJ21hcmdpbi1sZWZ0Jyk7XG4gICAgICAgICAgY29uc3QgbWFyZ2luUmlnaHQgPSBnZXREaXJlY3Rpb25Qcm9wZXJ0eVZhbHVlKHNsaWRlU3R5bGVzLCAnbWFyZ2luLXJpZ2h0Jyk7XG4gICAgICAgICAgY29uc3QgYm94U2l6aW5nID0gc2xpZGVTdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZSgnYm94LXNpemluZycpO1xuICAgICAgICAgIGlmIChib3hTaXppbmcgJiYgYm94U2l6aW5nID09PSAnYm9yZGVyLWJveCcpIHtcbiAgICAgICAgICAgIHNsaWRlU2l6ZSA9IHdpZHRoICsgbWFyZ2luTGVmdCArIG1hcmdpblJpZ2h0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIGNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICBvZmZzZXRXaWR0aFxuICAgICAgICAgICAgfSA9IHNsaWRlO1xuICAgICAgICAgICAgc2xpZGVTaXplID0gd2lkdGggKyBwYWRkaW5nTGVmdCArIHBhZGRpbmdSaWdodCArIG1hcmdpbkxlZnQgKyBtYXJnaW5SaWdodCArIChvZmZzZXRXaWR0aCAtIGNsaWVudFdpZHRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICBzbGlkZS5zdHlsZS50cmFuc2Zvcm0gPSBjdXJyZW50VHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50V2ViS2l0VHJhbnNmb3JtKSB7XG4gICAgICAgICAgc2xpZGUuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gY3VycmVudFdlYktpdFRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykgc2xpZGVTaXplID0gTWF0aC5mbG9vcihzbGlkZVNpemUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVTaXplID0gKHN3aXBlclNpemUgLSAocGFyYW1zLnNsaWRlc1BlclZpZXcgLSAxKSAqIHNwYWNlQmV0d2VlbikgLyBwYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICAgICAgaWYgKHBhcmFtcy5yb3VuZExlbmd0aHMpIHNsaWRlU2l6ZSA9IE1hdGguZmxvb3Ioc2xpZGVTaXplKTtcbiAgICAgICAgaWYgKHNsaWRlc1tpXSkge1xuICAgICAgICAgIHNsaWRlc1tpXS5zdHlsZVtzd2lwZXIuZ2V0RGlyZWN0aW9uTGFiZWwoJ3dpZHRoJyldID0gYCR7c2xpZGVTaXplfXB4YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNsaWRlc1tpXSkge1xuICAgICAgICBzbGlkZXNbaV0uc3dpcGVyU2xpZGVTaXplID0gc2xpZGVTaXplO1xuICAgICAgfVxuICAgICAgc2xpZGVzU2l6ZXNHcmlkLnB1c2goc2xpZGVTaXplKTtcbiAgICAgIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgc2xpZGVQb3NpdGlvbiA9IHNsaWRlUG9zaXRpb24gKyBzbGlkZVNpemUgLyAyICsgcHJldlNsaWRlU2l6ZSAvIDIgKyBzcGFjZUJldHdlZW47XG4gICAgICAgIGlmIChwcmV2U2xpZGVTaXplID09PSAwICYmIGkgIT09IDApIHNsaWRlUG9zaXRpb24gPSBzbGlkZVBvc2l0aW9uIC0gc3dpcGVyU2l6ZSAvIDIgLSBzcGFjZUJldHdlZW47XG4gICAgICAgIGlmIChpID09PSAwKSBzbGlkZVBvc2l0aW9uID0gc2xpZGVQb3NpdGlvbiAtIHN3aXBlclNpemUgLyAyIC0gc3BhY2VCZXR3ZWVuO1xuICAgICAgICBpZiAoTWF0aC5hYnMoc2xpZGVQb3NpdGlvbikgPCAxIC8gMTAwMCkgc2xpZGVQb3NpdGlvbiA9IDA7XG4gICAgICAgIGlmIChwYXJhbXMucm91bmRMZW5ndGhzKSBzbGlkZVBvc2l0aW9uID0gTWF0aC5mbG9vcihzbGlkZVBvc2l0aW9uKTtcbiAgICAgICAgaWYgKGluZGV4ICUgcGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAwKSBzbmFwR3JpZC5wdXNoKHNsaWRlUG9zaXRpb24pO1xuICAgICAgICBzbGlkZXNHcmlkLnB1c2goc2xpZGVQb3NpdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocGFyYW1zLnJvdW5kTGVuZ3Rocykgc2xpZGVQb3NpdGlvbiA9IE1hdGguZmxvb3Ioc2xpZGVQb3NpdGlvbik7XG4gICAgICAgIGlmICgoaW5kZXggLSBNYXRoLm1pbihzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCwgaW5kZXgpKSAlIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXAgPT09IDApIHNuYXBHcmlkLnB1c2goc2xpZGVQb3NpdGlvbik7XG4gICAgICAgIHNsaWRlc0dyaWQucHVzaChzbGlkZVBvc2l0aW9uKTtcbiAgICAgICAgc2xpZGVQb3NpdGlvbiA9IHNsaWRlUG9zaXRpb24gKyBzbGlkZVNpemUgKyBzcGFjZUJldHdlZW47XG4gICAgICB9XG4gICAgICBzd2lwZXIudmlydHVhbFNpemUgKz0gc2xpZGVTaXplICsgc3BhY2VCZXR3ZWVuO1xuICAgICAgcHJldlNsaWRlU2l6ZSA9IHNsaWRlU2l6ZTtcbiAgICAgIGluZGV4ICs9IDE7XG4gICAgfVxuICAgIHN3aXBlci52aXJ0dWFsU2l6ZSA9IE1hdGgubWF4KHN3aXBlci52aXJ0dWFsU2l6ZSwgc3dpcGVyU2l6ZSkgKyBvZmZzZXRBZnRlcjtcbiAgICBpZiAocnRsICYmIHdyb25nUlRMICYmIChwYXJhbXMuZWZmZWN0ID09PSAnc2xpZGUnIHx8IHBhcmFtcy5lZmZlY3QgPT09ICdjb3ZlcmZsb3cnKSkge1xuICAgICAgd3JhcHBlckVsLnN0eWxlLndpZHRoID0gYCR7c3dpcGVyLnZpcnR1YWxTaXplICsgc3BhY2VCZXR3ZWVufXB4YDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5zZXRXcmFwcGVyU2l6ZSkge1xuICAgICAgd3JhcHBlckVsLnN0eWxlW3N3aXBlci5nZXREaXJlY3Rpb25MYWJlbCgnd2lkdGgnKV0gPSBgJHtzd2lwZXIudmlydHVhbFNpemUgKyBzcGFjZUJldHdlZW59cHhgO1xuICAgIH1cbiAgICBpZiAoZ3JpZEVuYWJsZWQpIHtcbiAgICAgIHN3aXBlci5ncmlkLnVwZGF0ZVdyYXBwZXJTaXplKHNsaWRlU2l6ZSwgc25hcEdyaWQpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBsYXN0IGdyaWQgZWxlbWVudHMgZGVwZW5kaW5nIG9uIHdpZHRoXG4gICAgaWYgKCFwYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgIGNvbnN0IG5ld1NsaWRlc0dyaWQgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc25hcEdyaWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgbGV0IHNsaWRlc0dyaWRJdGVtID0gc25hcEdyaWRbaV07XG4gICAgICAgIGlmIChwYXJhbXMucm91bmRMZW5ndGhzKSBzbGlkZXNHcmlkSXRlbSA9IE1hdGguZmxvb3Ioc2xpZGVzR3JpZEl0ZW0pO1xuICAgICAgICBpZiAoc25hcEdyaWRbaV0gPD0gc3dpcGVyLnZpcnR1YWxTaXplIC0gc3dpcGVyU2l6ZSkge1xuICAgICAgICAgIG5ld1NsaWRlc0dyaWQucHVzaChzbGlkZXNHcmlkSXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNuYXBHcmlkID0gbmV3U2xpZGVzR3JpZDtcbiAgICAgIGlmIChNYXRoLmZsb29yKHN3aXBlci52aXJ0dWFsU2l6ZSAtIHN3aXBlclNpemUpIC0gTWF0aC5mbG9vcihzbmFwR3JpZFtzbmFwR3JpZC5sZW5ndGggLSAxXSkgPiAxKSB7XG4gICAgICAgIHNuYXBHcmlkLnB1c2goc3dpcGVyLnZpcnR1YWxTaXplIC0gc3dpcGVyU2l6ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc1ZpcnR1YWwgJiYgcGFyYW1zLmxvb3ApIHtcbiAgICAgIGNvbnN0IHNpemUgPSBzbGlkZXNTaXplc0dyaWRbMF0gKyBzcGFjZUJldHdlZW47XG4gICAgICBpZiAocGFyYW1zLnNsaWRlc1Blckdyb3VwID4gMSkge1xuICAgICAgICBjb25zdCBncm91cHMgPSBNYXRoLmNlaWwoKHN3aXBlci52aXJ0dWFsLnNsaWRlc0JlZm9yZSArIHN3aXBlci52aXJ0dWFsLnNsaWRlc0FmdGVyKSAvIHBhcmFtcy5zbGlkZXNQZXJHcm91cCk7XG4gICAgICAgIGNvbnN0IGdyb3VwU2l6ZSA9IHNpemUgKiBwYXJhbXMuc2xpZGVzUGVyR3JvdXA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzOyBpICs9IDEpIHtcbiAgICAgICAgICBzbmFwR3JpZC5wdXNoKHNuYXBHcmlkW3NuYXBHcmlkLmxlbmd0aCAtIDFdICsgZ3JvdXBTaXplKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2lwZXIudmlydHVhbC5zbGlkZXNCZWZvcmUgKyBzd2lwZXIudmlydHVhbC5zbGlkZXNBZnRlcjsgaSArPSAxKSB7XG4gICAgICAgIGlmIChwYXJhbXMuc2xpZGVzUGVyR3JvdXAgPT09IDEpIHtcbiAgICAgICAgICBzbmFwR3JpZC5wdXNoKHNuYXBHcmlkW3NuYXBHcmlkLmxlbmd0aCAtIDFdICsgc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVzR3JpZC5wdXNoKHNsaWRlc0dyaWRbc2xpZGVzR3JpZC5sZW5ndGggLSAxXSArIHNpemUpO1xuICAgICAgICBzd2lwZXIudmlydHVhbFNpemUgKz0gc2l6ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNuYXBHcmlkLmxlbmd0aCA9PT0gMCkgc25hcEdyaWQgPSBbMF07XG4gICAgaWYgKHNwYWNlQmV0d2VlbiAhPT0gMCkge1xuICAgICAgY29uc3Qga2V5ID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpICYmIHJ0bCA/ICdtYXJnaW5MZWZ0JyA6IHN3aXBlci5nZXREaXJlY3Rpb25MYWJlbCgnbWFyZ2luUmlnaHQnKTtcbiAgICAgIHNsaWRlcy5maWx0ZXIoKF8sIHNsaWRlSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCFwYXJhbXMuY3NzTW9kZSB8fCBwYXJhbXMubG9vcCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChzbGlkZUluZGV4ID09PSBzbGlkZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgIHNsaWRlRWwuc3R5bGVba2V5XSA9IGAke3NwYWNlQmV0d2Vlbn1weGA7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBwYXJhbXMuY2VudGVyZWRTbGlkZXNCb3VuZHMpIHtcbiAgICAgIGxldCBhbGxTbGlkZXNTaXplID0gMDtcbiAgICAgIHNsaWRlc1NpemVzR3JpZC5mb3JFYWNoKHNsaWRlU2l6ZVZhbHVlID0+IHtcbiAgICAgICAgYWxsU2xpZGVzU2l6ZSArPSBzbGlkZVNpemVWYWx1ZSArIChzcGFjZUJldHdlZW4gfHwgMCk7XG4gICAgICB9KTtcbiAgICAgIGFsbFNsaWRlc1NpemUgLT0gc3BhY2VCZXR3ZWVuO1xuICAgICAgY29uc3QgbWF4U25hcCA9IGFsbFNsaWRlc1NpemUgLSBzd2lwZXJTaXplO1xuICAgICAgc25hcEdyaWQgPSBzbmFwR3JpZC5tYXAoc25hcCA9PiB7XG4gICAgICAgIGlmIChzbmFwIDw9IDApIHJldHVybiAtb2Zmc2V0QmVmb3JlO1xuICAgICAgICBpZiAoc25hcCA+IG1heFNuYXApIHJldHVybiBtYXhTbmFwICsgb2Zmc2V0QWZ0ZXI7XG4gICAgICAgIHJldHVybiBzbmFwO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuY2VudGVySW5zdWZmaWNpZW50U2xpZGVzKSB7XG4gICAgICBsZXQgYWxsU2xpZGVzU2l6ZSA9IDA7XG4gICAgICBzbGlkZXNTaXplc0dyaWQuZm9yRWFjaChzbGlkZVNpemVWYWx1ZSA9PiB7XG4gICAgICAgIGFsbFNsaWRlc1NpemUgKz0gc2xpZGVTaXplVmFsdWUgKyAoc3BhY2VCZXR3ZWVuIHx8IDApO1xuICAgICAgfSk7XG4gICAgICBhbGxTbGlkZXNTaXplIC09IHNwYWNlQmV0d2VlbjtcbiAgICAgIGNvbnN0IG9mZnNldFNpemUgPSAocGFyYW1zLnNsaWRlc09mZnNldEJlZm9yZSB8fCAwKSArIChwYXJhbXMuc2xpZGVzT2Zmc2V0QWZ0ZXIgfHwgMCk7XG4gICAgICBpZiAoYWxsU2xpZGVzU2l6ZSArIG9mZnNldFNpemUgPCBzd2lwZXJTaXplKSB7XG4gICAgICAgIGNvbnN0IGFsbFNsaWRlc09mZnNldCA9IChzd2lwZXJTaXplIC0gYWxsU2xpZGVzU2l6ZSAtIG9mZnNldFNpemUpIC8gMjtcbiAgICAgICAgc25hcEdyaWQuZm9yRWFjaCgoc25hcCwgc25hcEluZGV4KSA9PiB7XG4gICAgICAgICAgc25hcEdyaWRbc25hcEluZGV4XSA9IHNuYXAgLSBhbGxTbGlkZXNPZmZzZXQ7XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXNHcmlkLmZvckVhY2goKHNuYXAsIHNuYXBJbmRleCkgPT4ge1xuICAgICAgICAgIHNsaWRlc0dyaWRbc25hcEluZGV4XSA9IHNuYXAgKyBhbGxTbGlkZXNPZmZzZXQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgICAgc2xpZGVzLFxuICAgICAgc25hcEdyaWQsXG4gICAgICBzbGlkZXNHcmlkLFxuICAgICAgc2xpZGVzU2l6ZXNHcmlkXG4gICAgfSk7XG4gICAgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBwYXJhbXMuY3NzTW9kZSAmJiAhcGFyYW1zLmNlbnRlcmVkU2xpZGVzQm91bmRzKSB7XG4gICAgICBzZXRDU1NQcm9wZXJ0eSh3cmFwcGVyRWwsICctLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYmVmb3JlJywgYCR7LXNuYXBHcmlkWzBdfXB4YCk7XG4gICAgICBzZXRDU1NQcm9wZXJ0eSh3cmFwcGVyRWwsICctLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYWZ0ZXInLCBgJHtzd2lwZXIuc2l6ZSAvIDIgLSBzbGlkZXNTaXplc0dyaWRbc2xpZGVzU2l6ZXNHcmlkLmxlbmd0aCAtIDFdIC8gMn1weGApO1xuICAgICAgY29uc3QgYWRkVG9TbmFwR3JpZCA9IC1zd2lwZXIuc25hcEdyaWRbMF07XG4gICAgICBjb25zdCBhZGRUb1NsaWRlc0dyaWQgPSAtc3dpcGVyLnNsaWRlc0dyaWRbMF07XG4gICAgICBzd2lwZXIuc25hcEdyaWQgPSBzd2lwZXIuc25hcEdyaWQubWFwKHYgPT4gdiArIGFkZFRvU25hcEdyaWQpO1xuICAgICAgc3dpcGVyLnNsaWRlc0dyaWQgPSBzd2lwZXIuc2xpZGVzR3JpZC5tYXAodiA9PiB2ICsgYWRkVG9TbGlkZXNHcmlkKTtcbiAgICB9XG4gICAgaWYgKHNsaWRlc0xlbmd0aCAhPT0gcHJldmlvdXNTbGlkZXNMZW5ndGgpIHtcbiAgICAgIHN3aXBlci5lbWl0KCdzbGlkZXNMZW5ndGhDaGFuZ2UnKTtcbiAgICB9XG4gICAgaWYgKHNuYXBHcmlkLmxlbmd0aCAhPT0gcHJldmlvdXNTbmFwR3JpZExlbmd0aCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMud2F0Y2hPdmVyZmxvdykgc3dpcGVyLmNoZWNrT3ZlcmZsb3coKTtcbiAgICAgIHN3aXBlci5lbWl0KCdzbmFwR3JpZExlbmd0aENoYW5nZScpO1xuICAgIH1cbiAgICBpZiAoc2xpZGVzR3JpZC5sZW5ndGggIT09IHByZXZpb3VzU2xpZGVzR3JpZExlbmd0aCkge1xuICAgICAgc3dpcGVyLmVtaXQoJ3NsaWRlc0dyaWRMZW5ndGhDaGFuZ2UnKTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzKSB7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzT2Zmc2V0KCk7XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCdzbGlkZXNVcGRhdGVkJyk7XG4gICAgaWYgKCFpc1ZpcnR1YWwgJiYgIXBhcmFtcy5jc3NNb2RlICYmIChwYXJhbXMuZWZmZWN0ID09PSAnc2xpZGUnIHx8IHBhcmFtcy5lZmZlY3QgPT09ICdmYWRlJykpIHtcbiAgICAgIGNvbnN0IGJhY2tGYWNlSGlkZGVuQ2xhc3MgPSBgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31iYWNrZmFjZS1oaWRkZW5gO1xuICAgICAgY29uc3QgaGFzQ2xhc3NCYWNrZmFjZUNsYXNzQWRkZWQgPSBzd2lwZXIuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGJhY2tGYWNlSGlkZGVuQ2xhc3MpO1xuICAgICAgaWYgKHNsaWRlc0xlbmd0aCA8PSBwYXJhbXMubWF4QmFja2ZhY2VIaWRkZW5TbGlkZXMpIHtcbiAgICAgICAgaWYgKCFoYXNDbGFzc0JhY2tmYWNlQ2xhc3NBZGRlZCkgc3dpcGVyLmVsLmNsYXNzTGlzdC5hZGQoYmFja0ZhY2VIaWRkZW5DbGFzcyk7XG4gICAgICB9IGVsc2UgaWYgKGhhc0NsYXNzQmFja2ZhY2VDbGFzc0FkZGVkKSB7XG4gICAgICAgIHN3aXBlci5lbC5jbGFzc0xpc3QucmVtb3ZlKGJhY2tGYWNlSGlkZGVuQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUF1dG9IZWlnaHQoc3BlZWQpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IGFjdGl2ZVNsaWRlcyA9IFtdO1xuICAgIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgIGxldCBuZXdIZWlnaHQgPSAwO1xuICAgIGxldCBpO1xuICAgIGlmICh0eXBlb2Ygc3BlZWQgPT09ICdudW1iZXInKSB7XG4gICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihzcGVlZCk7XG4gICAgfSBlbHNlIGlmIChzcGVlZCA9PT0gdHJ1ZSkge1xuICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24oc3dpcGVyLnBhcmFtcy5zcGVlZCk7XG4gICAgfVxuICAgIGNvbnN0IGdldFNsaWRlQnlJbmRleCA9IGluZGV4ID0+IHtcbiAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgcmV0dXJuIHN3aXBlci5zbGlkZXNbc3dpcGVyLmdldFNsaWRlSW5kZXhCeURhdGEoaW5kZXgpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzd2lwZXIuc2xpZGVzW2luZGV4XTtcbiAgICB9O1xuICAgIC8vIEZpbmQgc2xpZGVzIGN1cnJlbnRseSBpbiB2aWV3XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyAhPT0gJ2F1dG8nICYmIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyA+IDEpIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIChzd2lwZXIudmlzaWJsZVNsaWRlcyB8fCBbXSkuZm9yRWFjaChzbGlkZSA9PiB7XG4gICAgICAgICAgYWN0aXZlU2xpZGVzLnB1c2goc2xpZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBNYXRoLmNlaWwoc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3KTsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXggKyBpO1xuICAgICAgICAgIGlmIChpbmRleCA+IHN3aXBlci5zbGlkZXMubGVuZ3RoICYmICFpc1ZpcnR1YWwpIGJyZWFrO1xuICAgICAgICAgIGFjdGl2ZVNsaWRlcy5wdXNoKGdldFNsaWRlQnlJbmRleChpbmRleCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdGl2ZVNsaWRlcy5wdXNoKGdldFNsaWRlQnlJbmRleChzd2lwZXIuYWN0aXZlSW5kZXgpKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIG5ldyBoZWlnaHQgZnJvbSBoaWdoZXN0IHNsaWRlIGluIHZpZXdcbiAgICBmb3IgKGkgPSAwOyBpIDwgYWN0aXZlU2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAodHlwZW9mIGFjdGl2ZVNsaWRlc1tpXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gYWN0aXZlU2xpZGVzW2ldLm9mZnNldEhlaWdodDtcbiAgICAgICAgbmV3SGVpZ2h0ID0gaGVpZ2h0ID4gbmV3SGVpZ2h0ID8gaGVpZ2h0IDogbmV3SGVpZ2h0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBIZWlnaHRcbiAgICBpZiAobmV3SGVpZ2h0IHx8IG5ld0hlaWdodCA9PT0gMCkgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5oZWlnaHQgPSBgJHtuZXdIZWlnaHR9cHhgO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2xpZGVzT2Zmc2V0KCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qgc2xpZGVzID0gc3dpcGVyLnNsaWRlcztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zdCBtaW51c09mZnNldCA9IHN3aXBlci5pc0VsZW1lbnQgPyBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBzd2lwZXIud3JhcHBlckVsLm9mZnNldExlZnQgOiBzd2lwZXIud3JhcHBlckVsLm9mZnNldFRvcCA6IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHNsaWRlc1tpXS5zd2lwZXJTbGlkZU9mZnNldCA9IChzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBzbGlkZXNbaV0ub2Zmc2V0TGVmdCA6IHNsaWRlc1tpXS5vZmZzZXRUb3ApIC0gbWludXNPZmZzZXQgLSBzd2lwZXIuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdG9nZ2xlU2xpZGVDbGFzc2VzJDEgPSAoc2xpZGVFbCwgY29uZGl0aW9uLCBjbGFzc05hbWUpID0+IHtcbiAgICBpZiAoY29uZGl0aW9uICYmICFzbGlkZUVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgICBzbGlkZUVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2UgaWYgKCFjb25kaXRpb24gJiYgc2xpZGVFbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiB1cGRhdGVTbGlkZXNQcm9ncmVzcyh0cmFuc2xhdGUpIHtcbiAgICBpZiAodHJhbnNsYXRlID09PSB2b2lkIDApIHtcbiAgICAgIHRyYW5zbGF0ZSA9IHRoaXMgJiYgdGhpcy50cmFuc2xhdGUgfHwgMDtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zO1xuICAgIGNvbnN0IHtcbiAgICAgIHNsaWRlcyxcbiAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsLFxuICAgICAgc25hcEdyaWRcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmIChzbGlkZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgaWYgKHR5cGVvZiBzbGlkZXNbMF0uc3dpcGVyU2xpZGVPZmZzZXQgPT09ICd1bmRlZmluZWQnKSBzd2lwZXIudXBkYXRlU2xpZGVzT2Zmc2V0KCk7XG4gICAgbGV0IG9mZnNldENlbnRlciA9IC10cmFuc2xhdGU7XG4gICAgaWYgKHJ0bCkgb2Zmc2V0Q2VudGVyID0gdHJhbnNsYXRlO1xuICAgIHN3aXBlci52aXNpYmxlU2xpZGVzSW5kZXhlcyA9IFtdO1xuICAgIHN3aXBlci52aXNpYmxlU2xpZGVzID0gW107XG4gICAgbGV0IHNwYWNlQmV0d2VlbiA9IHBhcmFtcy5zcGFjZUJldHdlZW47XG4gICAgaWYgKHR5cGVvZiBzcGFjZUJldHdlZW4gPT09ICdzdHJpbmcnICYmIHNwYWNlQmV0d2Vlbi5pbmRleE9mKCclJykgPj0gMCkge1xuICAgICAgc3BhY2VCZXR3ZWVuID0gcGFyc2VGbG9hdChzcGFjZUJldHdlZW4ucmVwbGFjZSgnJScsICcnKSkgLyAxMDAgKiBzd2lwZXIuc2l6ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcGFjZUJldHdlZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICBzcGFjZUJldHdlZW4gPSBwYXJzZUZsb2F0KHNwYWNlQmV0d2Vlbik7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBzbGlkZSA9IHNsaWRlc1tpXTtcbiAgICAgIGxldCBzbGlkZU9mZnNldCA9IHNsaWRlLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgaWYgKHBhcmFtcy5jc3NNb2RlICYmIHBhcmFtcy5jZW50ZXJlZFNsaWRlcykge1xuICAgICAgICBzbGlkZU9mZnNldCAtPSBzbGlkZXNbMF0uc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICB9XG4gICAgICBjb25zdCBzbGlkZVByb2dyZXNzID0gKG9mZnNldENlbnRlciArIChwYXJhbXMuY2VudGVyZWRTbGlkZXMgPyBzd2lwZXIubWluVHJhbnNsYXRlKCkgOiAwKSAtIHNsaWRlT2Zmc2V0KSAvIChzbGlkZS5zd2lwZXJTbGlkZVNpemUgKyBzcGFjZUJldHdlZW4pO1xuICAgICAgY29uc3Qgb3JpZ2luYWxTbGlkZVByb2dyZXNzID0gKG9mZnNldENlbnRlciAtIHNuYXBHcmlkWzBdICsgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyA/IHN3aXBlci5taW5UcmFuc2xhdGUoKSA6IDApIC0gc2xpZGVPZmZzZXQpIC8gKHNsaWRlLnN3aXBlclNsaWRlU2l6ZSArIHNwYWNlQmV0d2Vlbik7XG4gICAgICBjb25zdCBzbGlkZUJlZm9yZSA9IC0ob2Zmc2V0Q2VudGVyIC0gc2xpZGVPZmZzZXQpO1xuICAgICAgY29uc3Qgc2xpZGVBZnRlciA9IHNsaWRlQmVmb3JlICsgc3dpcGVyLnNsaWRlc1NpemVzR3JpZFtpXTtcbiAgICAgIGNvbnN0IGlzRnVsbHlWaXNpYmxlID0gc2xpZGVCZWZvcmUgPj0gMCAmJiBzbGlkZUJlZm9yZSA8PSBzd2lwZXIuc2l6ZSAtIHN3aXBlci5zbGlkZXNTaXplc0dyaWRbaV07XG4gICAgICBjb25zdCBpc1Zpc2libGUgPSBzbGlkZUJlZm9yZSA+PSAwICYmIHNsaWRlQmVmb3JlIDwgc3dpcGVyLnNpemUgLSAxIHx8IHNsaWRlQWZ0ZXIgPiAxICYmIHNsaWRlQWZ0ZXIgPD0gc3dpcGVyLnNpemUgfHwgc2xpZGVCZWZvcmUgPD0gMCAmJiBzbGlkZUFmdGVyID49IHN3aXBlci5zaXplO1xuICAgICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgICBzd2lwZXIudmlzaWJsZVNsaWRlcy5wdXNoKHNsaWRlKTtcbiAgICAgICAgc3dpcGVyLnZpc2libGVTbGlkZXNJbmRleGVzLnB1c2goaSk7XG4gICAgICB9XG4gICAgICB0b2dnbGVTbGlkZUNsYXNzZXMkMShzbGlkZSwgaXNWaXNpYmxlLCBwYXJhbXMuc2xpZGVWaXNpYmxlQ2xhc3MpO1xuICAgICAgdG9nZ2xlU2xpZGVDbGFzc2VzJDEoc2xpZGUsIGlzRnVsbHlWaXNpYmxlLCBwYXJhbXMuc2xpZGVGdWxseVZpc2libGVDbGFzcyk7XG4gICAgICBzbGlkZS5wcm9ncmVzcyA9IHJ0bCA/IC1zbGlkZVByb2dyZXNzIDogc2xpZGVQcm9ncmVzcztcbiAgICAgIHNsaWRlLm9yaWdpbmFsUHJvZ3Jlc3MgPSBydGwgPyAtb3JpZ2luYWxTbGlkZVByb2dyZXNzIDogb3JpZ2luYWxTbGlkZVByb2dyZXNzO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzKHRyYW5zbGF0ZSkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKHR5cGVvZiB0cmFuc2xhdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBtdWx0aXBsaWVyID0gc3dpcGVyLnJ0bFRyYW5zbGF0ZSA/IC0xIDogMTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgdHJhbnNsYXRlID0gc3dpcGVyICYmIHN3aXBlci50cmFuc2xhdGUgJiYgc3dpcGVyLnRyYW5zbGF0ZSAqIG11bHRpcGxpZXIgfHwgMDtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcztcbiAgICBjb25zdCB0cmFuc2xhdGVzRGlmZiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICBsZXQge1xuICAgICAgcHJvZ3Jlc3MsXG4gICAgICBpc0JlZ2lubmluZyxcbiAgICAgIGlzRW5kLFxuICAgICAgcHJvZ3Jlc3NMb29wXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCB3YXNCZWdpbm5pbmcgPSBpc0JlZ2lubmluZztcbiAgICBjb25zdCB3YXNFbmQgPSBpc0VuZDtcbiAgICBpZiAodHJhbnNsYXRlc0RpZmYgPT09IDApIHtcbiAgICAgIHByb2dyZXNzID0gMDtcbiAgICAgIGlzQmVnaW5uaW5nID0gdHJ1ZTtcbiAgICAgIGlzRW5kID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvZ3Jlc3MgPSAodHJhbnNsYXRlIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSAvIHRyYW5zbGF0ZXNEaWZmO1xuICAgICAgY29uc3QgaXNCZWdpbm5pbmdSb3VuZGVkID0gTWF0aC5hYnModHJhbnNsYXRlIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSA8IDE7XG4gICAgICBjb25zdCBpc0VuZFJvdW5kZWQgPSBNYXRoLmFicyh0cmFuc2xhdGUgLSBzd2lwZXIubWF4VHJhbnNsYXRlKCkpIDwgMTtcbiAgICAgIGlzQmVnaW5uaW5nID0gaXNCZWdpbm5pbmdSb3VuZGVkIHx8IHByb2dyZXNzIDw9IDA7XG4gICAgICBpc0VuZCA9IGlzRW5kUm91bmRlZCB8fCBwcm9ncmVzcyA+PSAxO1xuICAgICAgaWYgKGlzQmVnaW5uaW5nUm91bmRlZCkgcHJvZ3Jlc3MgPSAwO1xuICAgICAgaWYgKGlzRW5kUm91bmRlZCkgcHJvZ3Jlc3MgPSAxO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgIGNvbnN0IGZpcnN0U2xpZGVJbmRleCA9IHN3aXBlci5nZXRTbGlkZUluZGV4QnlEYXRhKDApO1xuICAgICAgY29uc3QgbGFzdFNsaWRlSW5kZXggPSBzd2lwZXIuZ2V0U2xpZGVJbmRleEJ5RGF0YShzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDEpO1xuICAgICAgY29uc3QgZmlyc3RTbGlkZVRyYW5zbGF0ZSA9IHN3aXBlci5zbGlkZXNHcmlkW2ZpcnN0U2xpZGVJbmRleF07XG4gICAgICBjb25zdCBsYXN0U2xpZGVUcmFuc2xhdGUgPSBzd2lwZXIuc2xpZGVzR3JpZFtsYXN0U2xpZGVJbmRleF07XG4gICAgICBjb25zdCB0cmFuc2xhdGVNYXggPSBzd2lwZXIuc2xpZGVzR3JpZFtzd2lwZXIuc2xpZGVzR3JpZC5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZUFicyA9IE1hdGguYWJzKHRyYW5zbGF0ZSk7XG4gICAgICBpZiAodHJhbnNsYXRlQWJzID49IGZpcnN0U2xpZGVUcmFuc2xhdGUpIHtcbiAgICAgICAgcHJvZ3Jlc3NMb29wID0gKHRyYW5zbGF0ZUFicyAtIGZpcnN0U2xpZGVUcmFuc2xhdGUpIC8gdHJhbnNsYXRlTWF4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvZ3Jlc3NMb29wID0gKHRyYW5zbGF0ZUFicyArIHRyYW5zbGF0ZU1heCAtIGxhc3RTbGlkZVRyYW5zbGF0ZSkgLyB0cmFuc2xhdGVNYXg7XG4gICAgICB9XG4gICAgICBpZiAocHJvZ3Jlc3NMb29wID4gMSkgcHJvZ3Jlc3NMb29wIC09IDE7XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgICBwcm9ncmVzcyxcbiAgICAgIHByb2dyZXNzTG9vcCxcbiAgICAgIGlzQmVnaW5uaW5nLFxuICAgICAgaXNFbmRcbiAgICB9KTtcbiAgICBpZiAocGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgfHwgcGFyYW1zLmNlbnRlcmVkU2xpZGVzICYmIHBhcmFtcy5hdXRvSGVpZ2h0KSBzd2lwZXIudXBkYXRlU2xpZGVzUHJvZ3Jlc3ModHJhbnNsYXRlKTtcbiAgICBpZiAoaXNCZWdpbm5pbmcgJiYgIXdhc0JlZ2lubmluZykge1xuICAgICAgc3dpcGVyLmVtaXQoJ3JlYWNoQmVnaW5uaW5nIHRvRWRnZScpO1xuICAgIH1cbiAgICBpZiAoaXNFbmQgJiYgIXdhc0VuZCkge1xuICAgICAgc3dpcGVyLmVtaXQoJ3JlYWNoRW5kIHRvRWRnZScpO1xuICAgIH1cbiAgICBpZiAod2FzQmVnaW5uaW5nICYmICFpc0JlZ2lubmluZyB8fCB3YXNFbmQgJiYgIWlzRW5kKSB7XG4gICAgICBzd2lwZXIuZW1pdCgnZnJvbUVkZ2UnKTtcbiAgICB9XG4gICAgc3dpcGVyLmVtaXQoJ3Byb2dyZXNzJywgcHJvZ3Jlc3MpO1xuICB9XG5cbiAgY29uc3QgdG9nZ2xlU2xpZGVDbGFzc2VzID0gKHNsaWRlRWwsIGNvbmRpdGlvbiwgY2xhc3NOYW1lKSA9PiB7XG4gICAgaWYgKGNvbmRpdGlvbiAmJiAhc2xpZGVFbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgc2xpZGVFbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfSBlbHNlIGlmICghY29uZGl0aW9uICYmIHNsaWRlRWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgIHNsaWRlRWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gdXBkYXRlU2xpZGVzQ2xhc3NlcygpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHNsaWRlcyxcbiAgICAgIHBhcmFtcyxcbiAgICAgIHNsaWRlc0VsLFxuICAgICAgYWN0aXZlSW5kZXhcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgY29uc3QgZ3JpZEVuYWJsZWQgPSBzd2lwZXIuZ3JpZCAmJiBwYXJhbXMuZ3JpZCAmJiBwYXJhbXMuZ3JpZC5yb3dzID4gMTtcbiAgICBjb25zdCBnZXRGaWx0ZXJlZFNsaWRlID0gc2VsZWN0b3IgPT4ge1xuICAgICAgcmV0dXJuIGVsZW1lbnRDaGlsZHJlbihzbGlkZXNFbCwgYC4ke3BhcmFtcy5zbGlkZUNsYXNzfSR7c2VsZWN0b3J9LCBzd2lwZXItc2xpZGUke3NlbGVjdG9yfWApWzBdO1xuICAgIH07XG4gICAgbGV0IGFjdGl2ZVNsaWRlO1xuICAgIGxldCBwcmV2U2xpZGU7XG4gICAgbGV0IG5leHRTbGlkZTtcbiAgICBpZiAoaXNWaXJ0dWFsKSB7XG4gICAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgICAgbGV0IHNsaWRlSW5kZXggPSBhY3RpdmVJbmRleCAtIHN3aXBlci52aXJ0dWFsLnNsaWRlc0JlZm9yZTtcbiAgICAgICAgaWYgKHNsaWRlSW5kZXggPCAwKSBzbGlkZUluZGV4ID0gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCArIHNsaWRlSW5kZXg7XG4gICAgICAgIGlmIChzbGlkZUluZGV4ID49IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGgpIHNsaWRlSW5kZXggLT0gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aDtcbiAgICAgICAgYWN0aXZlU2xpZGUgPSBnZXRGaWx0ZXJlZFNsaWRlKGBbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3NsaWRlSW5kZXh9XCJdYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RpdmVTbGlkZSA9IGdldEZpbHRlcmVkU2xpZGUoYFtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7YWN0aXZlSW5kZXh9XCJdYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChncmlkRW5hYmxlZCkge1xuICAgICAgICBhY3RpdmVTbGlkZSA9IHNsaWRlcy5maWx0ZXIoc2xpZGVFbCA9PiBzbGlkZUVsLmNvbHVtbiA9PT0gYWN0aXZlSW5kZXgpWzBdO1xuICAgICAgICBuZXh0U2xpZGUgPSBzbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5jb2x1bW4gPT09IGFjdGl2ZUluZGV4ICsgMSlbMF07XG4gICAgICAgIHByZXZTbGlkZSA9IHNsaWRlcy5maWx0ZXIoc2xpZGVFbCA9PiBzbGlkZUVsLmNvbHVtbiA9PT0gYWN0aXZlSW5kZXggLSAxKVswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGl2ZVNsaWRlID0gc2xpZGVzW2FjdGl2ZUluZGV4XTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFjdGl2ZVNsaWRlKSB7XG4gICAgICBpZiAoIWdyaWRFbmFibGVkKSB7XG4gICAgICAgIC8vIE5leHQgU2xpZGVcbiAgICAgICAgbmV4dFNsaWRlID0gZWxlbWVudE5leHRBbGwoYWN0aXZlU2xpZGUsIGAuJHtwYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApWzBdO1xuICAgICAgICBpZiAocGFyYW1zLmxvb3AgJiYgIW5leHRTbGlkZSkge1xuICAgICAgICAgIG5leHRTbGlkZSA9IHNsaWRlc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZXYgU2xpZGVcbiAgICAgICAgcHJldlNsaWRlID0gZWxlbWVudFByZXZBbGwoYWN0aXZlU2xpZGUsIGAuJHtwYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApWzBdO1xuICAgICAgICBpZiAocGFyYW1zLmxvb3AgJiYgIXByZXZTbGlkZSA9PT0gMCkge1xuICAgICAgICAgIHByZXZTbGlkZSA9IHNsaWRlc1tzbGlkZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICB0b2dnbGVTbGlkZUNsYXNzZXMoc2xpZGVFbCwgc2xpZGVFbCA9PT0gYWN0aXZlU2xpZGUsIHBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzKTtcbiAgICAgIHRvZ2dsZVNsaWRlQ2xhc3NlcyhzbGlkZUVsLCBzbGlkZUVsID09PSBuZXh0U2xpZGUsIHBhcmFtcy5zbGlkZU5leHRDbGFzcyk7XG4gICAgICB0b2dnbGVTbGlkZUNsYXNzZXMoc2xpZGVFbCwgc2xpZGVFbCA9PT0gcHJldlNsaWRlLCBwYXJhbXMuc2xpZGVQcmV2Q2xhc3MpO1xuICAgIH0pO1xuICAgIHN3aXBlci5lbWl0U2xpZGVzQ2xhc3NlcygpO1xuICB9XG5cbiAgY29uc3QgcHJvY2Vzc0xhenlQcmVsb2FkZXIgPSAoc3dpcGVyLCBpbWFnZUVsKSA9PiB7XG4gICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLnBhcmFtcykgcmV0dXJuO1xuICAgIGNvbnN0IHNsaWRlU2VsZWN0b3IgPSAoKSA9PiBzd2lwZXIuaXNFbGVtZW50ID8gYHN3aXBlci1zbGlkZWAgOiBgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfWA7XG4gICAgY29uc3Qgc2xpZGVFbCA9IGltYWdlRWwuY2xvc2VzdChzbGlkZVNlbGVjdG9yKCkpO1xuICAgIGlmIChzbGlkZUVsKSB7XG4gICAgICBsZXQgbGF6eUVsID0gc2xpZGVFbC5xdWVyeVNlbGVjdG9yKGAuJHtzd2lwZXIucGFyYW1zLmxhenlQcmVsb2FkZXJDbGFzc31gKTtcbiAgICAgIGlmICghbGF6eUVsICYmIHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgaWYgKHNsaWRlRWwuc2hhZG93Um9vdCkge1xuICAgICAgICAgIGxhenlFbCA9IHNsaWRlRWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGAuJHtzd2lwZXIucGFyYW1zLmxhenlQcmVsb2FkZXJDbGFzc31gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpbml0IGxhdGVyXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzbGlkZUVsLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgICAgbGF6eUVsID0gc2xpZGVFbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoYC4ke3N3aXBlci5wYXJhbXMubGF6eVByZWxvYWRlckNsYXNzfWApO1xuICAgICAgICAgICAgICBpZiAobGF6eUVsKSBsYXp5RWwucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsYXp5RWwpIGxhenlFbC5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVubGF6eSA9IChzd2lwZXIsIGluZGV4KSA9PiB7XG4gICAgaWYgKCFzd2lwZXIuc2xpZGVzW2luZGV4XSkgcmV0dXJuO1xuICAgIGNvbnN0IGltYWdlRWwgPSBzd2lwZXIuc2xpZGVzW2luZGV4XS5xdWVyeVNlbGVjdG9yKCdbbG9hZGluZz1cImxhenlcIl0nKTtcbiAgICBpZiAoaW1hZ2VFbCkgaW1hZ2VFbC5yZW1vdmVBdHRyaWJ1dGUoJ2xvYWRpbmcnKTtcbiAgfTtcbiAgY29uc3QgcHJlbG9hZCA9IHN3aXBlciA9PiB7XG4gICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLnBhcmFtcykgcmV0dXJuO1xuICAgIGxldCBhbW91bnQgPSBzd2lwZXIucGFyYW1zLmxhenlQcmVsb2FkUHJldk5leHQ7XG4gICAgY29uc3QgbGVuID0gc3dpcGVyLnNsaWRlcy5sZW5ndGg7XG4gICAgaWYgKCFsZW4gfHwgIWFtb3VudCB8fCBhbW91bnQgPCAwKSByZXR1cm47XG4gICAgYW1vdW50ID0gTWF0aC5taW4oYW1vdW50LCBsZW4pO1xuICAgIGNvbnN0IHNsaWRlc1BlclZpZXcgPSBzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcgPT09ICdhdXRvJyA/IHN3aXBlci5zbGlkZXNQZXJWaWV3RHluYW1pYygpIDogTWF0aC5jZWlsKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyk7XG4gICAgY29uc3QgYWN0aXZlSW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuZ3JpZCAmJiBzd2lwZXIucGFyYW1zLmdyaWQucm93cyA+IDEpIHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNvbHVtbiA9IGFjdGl2ZUluZGV4O1xuICAgICAgY29uc3QgcHJlbG9hZENvbHVtbnMgPSBbYWN0aXZlQ29sdW1uIC0gYW1vdW50XTtcbiAgICAgIHByZWxvYWRDb2x1bW5zLnB1c2goLi4uQXJyYXkuZnJvbSh7XG4gICAgICAgIGxlbmd0aDogYW1vdW50XG4gICAgICB9KS5tYXAoKF8sIGkpID0+IHtcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUNvbHVtbiArIHNsaWRlc1BlclZpZXcgKyBpO1xuICAgICAgfSkpO1xuICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKChzbGlkZUVsLCBpKSA9PiB7XG4gICAgICAgIGlmIChwcmVsb2FkQ29sdW1ucy5pbmNsdWRlcyhzbGlkZUVsLmNvbHVtbikpIHVubGF6eShzd2lwZXIsIGkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNsaWRlSW5kZXhMYXN0SW5WaWV3ID0gYWN0aXZlSW5kZXggKyBzbGlkZXNQZXJWaWV3IC0gMTtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5yZXdpbmQgfHwgc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICBmb3IgKGxldCBpID0gYWN0aXZlSW5kZXggLSBhbW91bnQ7IGkgPD0gc2xpZGVJbmRleExhc3RJblZpZXcgKyBhbW91bnQ7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCByZWFsSW5kZXggPSAoaSAlIGxlbiArIGxlbikgJSBsZW47XG4gICAgICAgIGlmIChyZWFsSW5kZXggPCBhY3RpdmVJbmRleCB8fCByZWFsSW5kZXggPiBzbGlkZUluZGV4TGFzdEluVmlldykgdW5sYXp5KHN3aXBlciwgcmVhbEluZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IE1hdGgubWF4KGFjdGl2ZUluZGV4IC0gYW1vdW50LCAwKTsgaSA8PSBNYXRoLm1pbihzbGlkZUluZGV4TGFzdEluVmlldyArIGFtb3VudCwgbGVuIC0gMSk7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaSAhPT0gYWN0aXZlSW5kZXggJiYgKGkgPiBzbGlkZUluZGV4TGFzdEluVmlldyB8fCBpIDwgYWN0aXZlSW5kZXgpKSB7XG4gICAgICAgICAgdW5sYXp5KHN3aXBlciwgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0QWN0aXZlSW5kZXhCeVRyYW5zbGF0ZShzd2lwZXIpIHtcbiAgICBjb25zdCB7XG4gICAgICBzbGlkZXNHcmlkLFxuICAgICAgcGFyYW1zXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCB0cmFuc2xhdGUgPSBzd2lwZXIucnRsVHJhbnNsYXRlID8gc3dpcGVyLnRyYW5zbGF0ZSA6IC1zd2lwZXIudHJhbnNsYXRlO1xuICAgIGxldCBhY3RpdmVJbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlc0dyaWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmICh0eXBlb2Ygc2xpZGVzR3JpZFtpICsgMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0cmFuc2xhdGUgPj0gc2xpZGVzR3JpZFtpXSAmJiB0cmFuc2xhdGUgPCBzbGlkZXNHcmlkW2kgKyAxXSAtIChzbGlkZXNHcmlkW2kgKyAxXSAtIHNsaWRlc0dyaWRbaV0pIC8gMikge1xuICAgICAgICAgIGFjdGl2ZUluZGV4ID0gaTtcbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2xhdGUgPj0gc2xpZGVzR3JpZFtpXSAmJiB0cmFuc2xhdGUgPCBzbGlkZXNHcmlkW2kgKyAxXSkge1xuICAgICAgICAgIGFjdGl2ZUluZGV4ID0gaSArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRlID49IHNsaWRlc0dyaWRbaV0pIHtcbiAgICAgICAgYWN0aXZlSW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBOb3JtYWxpemUgc2xpZGVJbmRleFxuICAgIGlmIChwYXJhbXMubm9ybWFsaXplU2xpZGVJbmRleCkge1xuICAgICAgaWYgKGFjdGl2ZUluZGV4IDwgMCB8fCB0eXBlb2YgYWN0aXZlSW5kZXggPT09ICd1bmRlZmluZWQnKSBhY3RpdmVJbmRleCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBhY3RpdmVJbmRleDtcbiAgfVxuICBmdW5jdGlvbiB1cGRhdGVBY3RpdmVJbmRleChuZXdBY3RpdmVJbmRleCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3QgdHJhbnNsYXRlID0gc3dpcGVyLnJ0bFRyYW5zbGF0ZSA/IHN3aXBlci50cmFuc2xhdGUgOiAtc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICBjb25zdCB7XG4gICAgICBzbmFwR3JpZCxcbiAgICAgIHBhcmFtcyxcbiAgICAgIGFjdGl2ZUluZGV4OiBwcmV2aW91c0luZGV4LFxuICAgICAgcmVhbEluZGV4OiBwcmV2aW91c1JlYWxJbmRleCxcbiAgICAgIHNuYXBJbmRleDogcHJldmlvdXNTbmFwSW5kZXhcbiAgICB9ID0gc3dpcGVyO1xuICAgIGxldCBhY3RpdmVJbmRleCA9IG5ld0FjdGl2ZUluZGV4O1xuICAgIGxldCBzbmFwSW5kZXg7XG4gICAgY29uc3QgZ2V0VmlydHVhbFJlYWxJbmRleCA9IGFJbmRleCA9PiB7XG4gICAgICBsZXQgcmVhbEluZGV4ID0gYUluZGV4IC0gc3dpcGVyLnZpcnR1YWwuc2xpZGVzQmVmb3JlO1xuICAgICAgaWYgKHJlYWxJbmRleCA8IDApIHtcbiAgICAgICAgcmVhbEluZGV4ID0gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCArIHJlYWxJbmRleDtcbiAgICAgIH1cbiAgICAgIGlmIChyZWFsSW5kZXggPj0gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCkge1xuICAgICAgICByZWFsSW5kZXggLT0gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZWFsSW5kZXg7XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIGFjdGl2ZUluZGV4ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgYWN0aXZlSW5kZXggPSBnZXRBY3RpdmVJbmRleEJ5VHJhbnNsYXRlKHN3aXBlcik7XG4gICAgfVxuICAgIGlmIChzbmFwR3JpZC5pbmRleE9mKHRyYW5zbGF0ZSkgPj0gMCkge1xuICAgICAgc25hcEluZGV4ID0gc25hcEdyaWQuaW5kZXhPZih0cmFuc2xhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBza2lwID0gTWF0aC5taW4ocGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCwgYWN0aXZlSW5kZXgpO1xuICAgICAgc25hcEluZGV4ID0gc2tpcCArIE1hdGguZmxvb3IoKGFjdGl2ZUluZGV4IC0gc2tpcCkgLyBwYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICAgIH1cbiAgICBpZiAoc25hcEluZGV4ID49IHNuYXBHcmlkLmxlbmd0aCkgc25hcEluZGV4ID0gc25hcEdyaWQubGVuZ3RoIC0gMTtcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IHByZXZpb3VzSW5kZXggJiYgIXN3aXBlci5wYXJhbXMubG9vcCkge1xuICAgICAgaWYgKHNuYXBJbmRleCAhPT0gcHJldmlvdXNTbmFwSW5kZXgpIHtcbiAgICAgICAgc3dpcGVyLnNuYXBJbmRleCA9IHNuYXBJbmRleDtcbiAgICAgICAgc3dpcGVyLmVtaXQoJ3NuYXBJbmRleENoYW5nZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IHByZXZpb3VzSW5kZXggJiYgc3dpcGVyLnBhcmFtcy5sb29wICYmIHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICBzd2lwZXIucmVhbEluZGV4ID0gZ2V0VmlydHVhbFJlYWxJbmRleChhY3RpdmVJbmRleCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGdyaWRFbmFibGVkID0gc3dpcGVyLmdyaWQgJiYgcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDE7XG5cbiAgICAvLyBHZXQgcmVhbCBpbmRleFxuICAgIGxldCByZWFsSW5kZXg7XG4gICAgaWYgKHN3aXBlci52aXJ0dWFsICYmIHBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgcGFyYW1zLmxvb3ApIHtcbiAgICAgIHJlYWxJbmRleCA9IGdldFZpcnR1YWxSZWFsSW5kZXgoYWN0aXZlSW5kZXgpO1xuICAgIH0gZWxzZSBpZiAoZ3JpZEVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IGZpcnN0U2xpZGVJbkNvbHVtbiA9IHN3aXBlci5zbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5jb2x1bW4gPT09IGFjdGl2ZUluZGV4KVswXTtcbiAgICAgIGxldCBhY3RpdmVTbGlkZUluZGV4ID0gcGFyc2VJbnQoZmlyc3RTbGlkZUluQ29sdW1uLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSwgMTApO1xuICAgICAgaWYgKE51bWJlci5pc05hTihhY3RpdmVTbGlkZUluZGV4KSkge1xuICAgICAgICBhY3RpdmVTbGlkZUluZGV4ID0gTWF0aC5tYXgoc3dpcGVyLnNsaWRlcy5pbmRleE9mKGZpcnN0U2xpZGVJbkNvbHVtbiksIDApO1xuICAgICAgfVxuICAgICAgcmVhbEluZGV4ID0gTWF0aC5mbG9vcihhY3RpdmVTbGlkZUluZGV4IC8gcGFyYW1zLmdyaWQucm93cyk7XG4gICAgfSBlbHNlIGlmIChzd2lwZXIuc2xpZGVzW2FjdGl2ZUluZGV4XSkge1xuICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IHN3aXBlci5zbGlkZXNbYWN0aXZlSW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKTtcbiAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgIHJlYWxJbmRleCA9IHBhcnNlSW50KHNsaWRlSW5kZXgsIDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlYWxJbmRleCA9IGFjdGl2ZUluZGV4O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWFsSW5kZXggPSBhY3RpdmVJbmRleDtcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIsIHtcbiAgICAgIHByZXZpb3VzU25hcEluZGV4LFxuICAgICAgc25hcEluZGV4LFxuICAgICAgcHJldmlvdXNSZWFsSW5kZXgsXG4gICAgICByZWFsSW5kZXgsXG4gICAgICBwcmV2aW91c0luZGV4LFxuICAgICAgYWN0aXZlSW5kZXhcbiAgICB9KTtcbiAgICBpZiAoc3dpcGVyLmluaXRpYWxpemVkKSB7XG4gICAgICBwcmVsb2FkKHN3aXBlcik7XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCdhY3RpdmVJbmRleENoYW5nZScpO1xuICAgIHN3aXBlci5lbWl0KCdzbmFwSW5kZXhDaGFuZ2UnKTtcbiAgICBpZiAoc3dpcGVyLmluaXRpYWxpemVkIHx8IHN3aXBlci5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0KSB7XG4gICAgICBpZiAocHJldmlvdXNSZWFsSW5kZXggIT09IHJlYWxJbmRleCkge1xuICAgICAgICBzd2lwZXIuZW1pdCgncmVhbEluZGV4Q2hhbmdlJyk7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdCgnc2xpZGVDaGFuZ2UnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVDbGlja2VkU2xpZGUoZWwsIHBhdGgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXM7XG4gICAgbGV0IHNsaWRlID0gZWwuY2xvc2VzdChgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICBpZiAoIXNsaWRlICYmIHN3aXBlci5pc0VsZW1lbnQgJiYgcGF0aCAmJiBwYXRoLmxlbmd0aCA+IDEgJiYgcGF0aC5pbmNsdWRlcyhlbCkpIHtcbiAgICAgIFsuLi5wYXRoLnNsaWNlKHBhdGguaW5kZXhPZihlbCkgKyAxLCBwYXRoLmxlbmd0aCldLmZvckVhY2gocGF0aEVsID0+IHtcbiAgICAgICAgaWYgKCFzbGlkZSAmJiBwYXRoRWwubWF0Y2hlcyAmJiBwYXRoRWwubWF0Y2hlcyhgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKSkge1xuICAgICAgICAgIHNsaWRlID0gcGF0aEVsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHNsaWRlRm91bmQgPSBmYWxzZTtcbiAgICBsZXQgc2xpZGVJbmRleDtcbiAgICBpZiAoc2xpZGUpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dpcGVyLnNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoc3dpcGVyLnNsaWRlc1tpXSA9PT0gc2xpZGUpIHtcbiAgICAgICAgICBzbGlkZUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBzbGlkZUluZGV4ID0gaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2xpZGUgJiYgc2xpZGVGb3VuZCkge1xuICAgICAgc3dpcGVyLmNsaWNrZWRTbGlkZSA9IHNsaWRlO1xuICAgICAgaWYgKHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICAgIHN3aXBlci5jbGlja2VkSW5kZXggPSBwYXJzZUludChzbGlkZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JyksIDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci5jbGlja2VkSW5kZXggPSBzbGlkZUluZGV4O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIuY2xpY2tlZFNsaWRlID0gdW5kZWZpbmVkO1xuICAgICAgc3dpcGVyLmNsaWNrZWRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5zbGlkZVRvQ2xpY2tlZFNsaWRlICYmIHN3aXBlci5jbGlja2VkSW5kZXggIT09IHVuZGVmaW5lZCAmJiBzd2lwZXIuY2xpY2tlZEluZGV4ICE9PSBzd2lwZXIuYWN0aXZlSW5kZXgpIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvQ2xpY2tlZFNsaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHVwZGF0ZSA9IHtcbiAgICB1cGRhdGVTaXplLFxuICAgIHVwZGF0ZVNsaWRlcyxcbiAgICB1cGRhdGVBdXRvSGVpZ2h0LFxuICAgIHVwZGF0ZVNsaWRlc09mZnNldCxcbiAgICB1cGRhdGVTbGlkZXNQcm9ncmVzcyxcbiAgICB1cGRhdGVQcm9ncmVzcyxcbiAgICB1cGRhdGVTbGlkZXNDbGFzc2VzLFxuICAgIHVwZGF0ZUFjdGl2ZUluZGV4LFxuICAgIHVwZGF0ZUNsaWNrZWRTbGlkZVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFN3aXBlclRyYW5zbGF0ZShheGlzKSB7XG4gICAgaWYgKGF4aXMgPT09IHZvaWQgMCkge1xuICAgICAgYXhpcyA9IHRoaXMuaXNIb3Jpem9udGFsKCkgPyAneCcgOiAneSc7XG4gICAgfVxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgICB0cmFuc2xhdGUsXG4gICAgICB3cmFwcGVyRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmIChwYXJhbXMudmlydHVhbFRyYW5zbGF0ZSkge1xuICAgICAgcmV0dXJuIHJ0bCA/IC10cmFuc2xhdGUgOiB0cmFuc2xhdGU7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgcmV0dXJuIHRyYW5zbGF0ZTtcbiAgICB9XG4gICAgbGV0IGN1cnJlbnRUcmFuc2xhdGUgPSBnZXRUcmFuc2xhdGUod3JhcHBlckVsLCBheGlzKTtcbiAgICBjdXJyZW50VHJhbnNsYXRlICs9IHN3aXBlci5jc3NPdmVyZmxvd0FkanVzdG1lbnQoKTtcbiAgICBpZiAocnRsKSBjdXJyZW50VHJhbnNsYXRlID0gLWN1cnJlbnRUcmFuc2xhdGU7XG4gICAgcmV0dXJuIGN1cnJlbnRUcmFuc2xhdGUgfHwgMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSh0cmFuc2xhdGUsIGJ5Q29udHJvbGxlcikge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcnRsVHJhbnNsYXRlOiBydGwsXG4gICAgICBwYXJhbXMsXG4gICAgICB3cmFwcGVyRWwsXG4gICAgICBwcm9ncmVzc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgbGV0IHggPSAwO1xuICAgIGxldCB5ID0gMDtcbiAgICBjb25zdCB6ID0gMDtcbiAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICB4ID0gcnRsID8gLXRyYW5zbGF0ZSA6IHRyYW5zbGF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgeSA9IHRyYW5zbGF0ZTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yb3VuZExlbmd0aHMpIHtcbiAgICAgIHggPSBNYXRoLmZsb29yKHgpO1xuICAgICAgeSA9IE1hdGguZmxvb3IoeSk7XG4gICAgfVxuICAgIHN3aXBlci5wcmV2aW91c1RyYW5zbGF0ZSA9IHN3aXBlci50cmFuc2xhdGU7XG4gICAgc3dpcGVyLnRyYW5zbGF0ZSA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/IHggOiB5O1xuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgd3JhcHBlckVsW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdzY3JvbGxMZWZ0JyA6ICdzY3JvbGxUb3AnXSA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/IC14IDogLXk7XG4gICAgfSBlbHNlIGlmICghcGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUpIHtcbiAgICAgIGlmIChzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgeCAtPSBzd2lwZXIuY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5IC09IHN3aXBlci5jc3NPdmVyZmxvd0FkanVzdG1lbnQoKTtcbiAgICAgIH1cbiAgICAgIHdyYXBwZXJFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt4fXB4LCAke3l9cHgsICR7en1weClgO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gdXBkYXRlIHByb2dyZXNzXG4gICAgbGV0IG5ld1Byb2dyZXNzO1xuICAgIGNvbnN0IHRyYW5zbGF0ZXNEaWZmID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpIC0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICAgIGlmICh0cmFuc2xhdGVzRGlmZiA9PT0gMCkge1xuICAgICAgbmV3UHJvZ3Jlc3MgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdQcm9ncmVzcyA9ICh0cmFuc2xhdGUgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIC8gdHJhbnNsYXRlc0RpZmY7XG4gICAgfVxuICAgIGlmIChuZXdQcm9ncmVzcyAhPT0gcHJvZ3Jlc3MpIHtcbiAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyh0cmFuc2xhdGUpO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgnc2V0VHJhbnNsYXRlJywgc3dpcGVyLnRyYW5zbGF0ZSwgYnlDb250cm9sbGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1pblRyYW5zbGF0ZSgpIHtcbiAgICByZXR1cm4gLXRoaXMuc25hcEdyaWRbMF07XG4gIH1cblxuICBmdW5jdGlvbiBtYXhUcmFuc2xhdGUoKSB7XG4gICAgcmV0dXJuIC10aGlzLnNuYXBHcmlkW3RoaXMuc25hcEdyaWQubGVuZ3RoIC0gMV07XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGVUbyh0cmFuc2xhdGUsIHNwZWVkLCBydW5DYWxsYmFja3MsIHRyYW5zbGF0ZUJvdW5kcywgaW50ZXJuYWwpIHtcbiAgICBpZiAodHJhbnNsYXRlID09PSB2b2lkIDApIHtcbiAgICAgIHRyYW5zbGF0ZSA9IDA7XG4gICAgfVxuICAgIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgICBzcGVlZCA9IHRoaXMucGFyYW1zLnNwZWVkO1xuICAgIH1cbiAgICBpZiAocnVuQ2FsbGJhY2tzID09PSB2b2lkIDApIHtcbiAgICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0cmFuc2xhdGVCb3VuZHMgPT09IHZvaWQgMCkge1xuICAgICAgdHJhbnNsYXRlQm91bmRzID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICB3cmFwcGVyRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmIChzd2lwZXIuYW5pbWF0aW5nICYmIHBhcmFtcy5wcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb24pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgbWluVHJhbnNsYXRlID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICAgIGNvbnN0IG1heFRyYW5zbGF0ZSA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKTtcbiAgICBsZXQgbmV3VHJhbnNsYXRlO1xuICAgIGlmICh0cmFuc2xhdGVCb3VuZHMgJiYgdHJhbnNsYXRlID4gbWluVHJhbnNsYXRlKSBuZXdUcmFuc2xhdGUgPSBtaW5UcmFuc2xhdGU7ZWxzZSBpZiAodHJhbnNsYXRlQm91bmRzICYmIHRyYW5zbGF0ZSA8IG1heFRyYW5zbGF0ZSkgbmV3VHJhbnNsYXRlID0gbWF4VHJhbnNsYXRlO2Vsc2UgbmV3VHJhbnNsYXRlID0gdHJhbnNsYXRlO1xuXG4gICAgLy8gVXBkYXRlIHByb2dyZXNzXG4gICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKG5ld1RyYW5zbGF0ZSk7XG4gICAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBjb25zdCBpc0ggPSBzd2lwZXIuaXNIb3Jpem9udGFsKCk7XG4gICAgICBpZiAoc3BlZWQgPT09IDApIHtcbiAgICAgICAgd3JhcHBlckVsW2lzSCA/ICdzY3JvbGxMZWZ0JyA6ICdzY3JvbGxUb3AnXSA9IC1uZXdUcmFuc2xhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXN3aXBlci5zdXBwb3J0LnNtb290aFNjcm9sbCkge1xuICAgICAgICAgIGFuaW1hdGVDU1NNb2RlU2Nyb2xsKHtcbiAgICAgICAgICAgIHN3aXBlcixcbiAgICAgICAgICAgIHRhcmdldFBvc2l0aW9uOiAtbmV3VHJhbnNsYXRlLFxuICAgICAgICAgICAgc2lkZTogaXNIID8gJ2xlZnQnIDogJ3RvcCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB3cmFwcGVyRWwuc2Nyb2xsVG8oe1xuICAgICAgICAgIFtpc0ggPyAnbGVmdCcgOiAndG9wJ106IC1uZXdUcmFuc2xhdGUsXG4gICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChzcGVlZCA9PT0gMCkge1xuICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24oMCk7XG4gICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKG5ld1RyYW5zbGF0ZSk7XG4gICAgICBpZiAocnVuQ2FsbGJhY2tzKSB7XG4gICAgICAgIHN3aXBlci5lbWl0KCdiZWZvcmVUcmFuc2l0aW9uU3RhcnQnLCBzcGVlZCwgaW50ZXJuYWwpO1xuICAgICAgICBzd2lwZXIuZW1pdCgndHJhbnNpdGlvbkVuZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihzcGVlZCk7XG4gICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKG5ld1RyYW5zbGF0ZSk7XG4gICAgICBpZiAocnVuQ2FsbGJhY2tzKSB7XG4gICAgICAgIHN3aXBlci5lbWl0KCdiZWZvcmVUcmFuc2l0aW9uU3RhcnQnLCBzcGVlZCwgaW50ZXJuYWwpO1xuICAgICAgICBzd2lwZXIuZW1pdCgndHJhbnNpdGlvblN0YXJ0Jyk7XG4gICAgICB9XG4gICAgICBpZiAoIXN3aXBlci5hbmltYXRpbmcpIHtcbiAgICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IHRydWU7XG4gICAgICAgIGlmICghc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCkge1xuICAgICAgICAgIHN3aXBlci5vblRyYW5zbGF0ZVRvV3JhcHBlclRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKGUpIHtcbiAgICAgICAgICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCAhPT0gdGhpcykgcmV0dXJuO1xuICAgICAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCk7XG4gICAgICAgICAgICBzd2lwZXIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kID0gbnVsbDtcbiAgICAgICAgICAgIGRlbGV0ZSBzd2lwZXIub25UcmFuc2xhdGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kO1xuICAgICAgICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHJ1bkNhbGxiYWNrcykge1xuICAgICAgICAgICAgICBzd2lwZXIuZW1pdCgndHJhbnNpdGlvbkVuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgc3dpcGVyLm9uVHJhbnNsYXRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgdmFyIHRyYW5zbGF0ZSA9IHtcbiAgICBnZXRUcmFuc2xhdGU6IGdldFN3aXBlclRyYW5zbGF0ZSxcbiAgICBzZXRUcmFuc2xhdGUsXG4gICAgbWluVHJhbnNsYXRlLFxuICAgIG1heFRyYW5zbGF0ZSxcbiAgICB0cmFuc2xhdGVUb1xuICB9O1xuXG4gIGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZHVyYXRpb24sIGJ5Q29udHJvbGxlcikge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKCFzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSBkdXJhdGlvbiA9PT0gMCA/IGAwbXNgIDogJyc7XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCdzZXRUcmFuc2l0aW9uJywgZHVyYXRpb24sIGJ5Q29udHJvbGxlcik7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2l0aW9uRW1pdChfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIHJ1bkNhbGxiYWNrcyxcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIHN0ZXBcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCB7XG4gICAgICBhY3RpdmVJbmRleCxcbiAgICAgIHByZXZpb3VzSW5kZXhcbiAgICB9ID0gc3dpcGVyO1xuICAgIGxldCBkaXIgPSBkaXJlY3Rpb247XG4gICAgaWYgKCFkaXIpIHtcbiAgICAgIGlmIChhY3RpdmVJbmRleCA+IHByZXZpb3VzSW5kZXgpIGRpciA9ICduZXh0JztlbHNlIGlmIChhY3RpdmVJbmRleCA8IHByZXZpb3VzSW5kZXgpIGRpciA9ICdwcmV2JztlbHNlIGRpciA9ICdyZXNldCc7XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KGB0cmFuc2l0aW9uJHtzdGVwfWApO1xuICAgIGlmIChydW5DYWxsYmFja3MgJiYgYWN0aXZlSW5kZXggIT09IHByZXZpb3VzSW5kZXgpIHtcbiAgICAgIGlmIChkaXIgPT09ICdyZXNldCcpIHtcbiAgICAgICAgc3dpcGVyLmVtaXQoYHNsaWRlUmVzZXRUcmFuc2l0aW9uJHtzdGVwfWApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdChgc2xpZGVDaGFuZ2VUcmFuc2l0aW9uJHtzdGVwfWApO1xuICAgICAgaWYgKGRpciA9PT0gJ25leHQnKSB7XG4gICAgICAgIHN3aXBlci5lbWl0KGBzbGlkZU5leHRUcmFuc2l0aW9uJHtzdGVwfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLmVtaXQoYHNsaWRlUHJldlRyYW5zaXRpb24ke3N0ZXB9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvblN0YXJ0KHJ1bkNhbGxiYWNrcywgZGlyZWN0aW9uKSB7XG4gICAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgaWYgKHBhcmFtcy5jc3NNb2RlKSByZXR1cm47XG4gICAgaWYgKHBhcmFtcy5hdXRvSGVpZ2h0KSB7XG4gICAgICBzd2lwZXIudXBkYXRlQXV0b0hlaWdodCgpO1xuICAgIH1cbiAgICB0cmFuc2l0aW9uRW1pdCh7XG4gICAgICBzd2lwZXIsXG4gICAgICBydW5DYWxsYmFja3MsXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBzdGVwOiAnU3RhcnQnXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKHJ1bkNhbGxiYWNrcywgZGlyZWN0aW9uKSB7XG4gICAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgc3dpcGVyLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgIGlmIChwYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgIHN3aXBlci5zZXRUcmFuc2l0aW9uKDApO1xuICAgIHRyYW5zaXRpb25FbWl0KHtcbiAgICAgIHN3aXBlcixcbiAgICAgIHJ1bkNhbGxiYWNrcyxcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIHN0ZXA6ICdFbmQnXG4gICAgfSk7XG4gIH1cblxuICB2YXIgdHJhbnNpdGlvbiA9IHtcbiAgICBzZXRUcmFuc2l0aW9uLFxuICAgIHRyYW5zaXRpb25TdGFydCxcbiAgICB0cmFuc2l0aW9uRW5kXG4gIH07XG5cbiAgZnVuY3Rpb24gc2xpZGVUbyhpbmRleCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwsIGluaXRpYWwpIHtcbiAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkge1xuICAgICAgaW5kZXggPSAwO1xuICAgIH1cbiAgICBpZiAocnVuQ2FsbGJhY2tzID09PSB2b2lkIDApIHtcbiAgICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaW5kZXggPT09ICdzdHJpbmcnKSB7XG4gICAgICBpbmRleCA9IHBhcnNlSW50KGluZGV4LCAxMCk7XG4gICAgfVxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgbGV0IHNsaWRlSW5kZXggPSBpbmRleDtcbiAgICBpZiAoc2xpZGVJbmRleCA8IDApIHNsaWRlSW5kZXggPSAwO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHNuYXBHcmlkLFxuICAgICAgc2xpZGVzR3JpZCxcbiAgICAgIHByZXZpb3VzSW5kZXgsXG4gICAgICBhY3RpdmVJbmRleCxcbiAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsLFxuICAgICAgd3JhcHBlckVsLFxuICAgICAgZW5hYmxlZFxuICAgIH0gPSBzd2lwZXI7XG4gICAgaWYgKCFlbmFibGVkICYmICFpbnRlcm5hbCAmJiAhaW5pdGlhbCB8fCBzd2lwZXIuZGVzdHJveWVkIHx8IHN3aXBlci5hbmltYXRpbmcgJiYgcGFyYW1zLnByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNwZWVkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3BlZWQgPSBzd2lwZXIucGFyYW1zLnNwZWVkO1xuICAgIH1cbiAgICBjb25zdCBza2lwID0gTWF0aC5taW4oc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIHNsaWRlSW5kZXgpO1xuICAgIGxldCBzbmFwSW5kZXggPSBza2lwICsgTWF0aC5mbG9vcigoc2xpZGVJbmRleCAtIHNraXApIC8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cCk7XG4gICAgaWYgKHNuYXBJbmRleCA+PSBzbmFwR3JpZC5sZW5ndGgpIHNuYXBJbmRleCA9IHNuYXBHcmlkLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgdHJhbnNsYXRlID0gLXNuYXBHcmlkW3NuYXBJbmRleF07XG4gICAgLy8gTm9ybWFsaXplIHNsaWRlSW5kZXhcbiAgICBpZiAocGFyYW1zLm5vcm1hbGl6ZVNsaWRlSW5kZXgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzR3JpZC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkVHJhbnNsYXRlID0gLU1hdGguZmxvb3IodHJhbnNsYXRlICogMTAwKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEdyaWQgPSBNYXRoLmZsb29yKHNsaWRlc0dyaWRbaV0gKiAxMDApO1xuICAgICAgICBjb25zdCBub3JtYWxpemVkR3JpZE5leHQgPSBNYXRoLmZsb29yKHNsaWRlc0dyaWRbaSArIDFdICogMTAwKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzbGlkZXNHcmlkW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAobm9ybWFsaXplZFRyYW5zbGF0ZSA+PSBub3JtYWxpemVkR3JpZCAmJiBub3JtYWxpemVkVHJhbnNsYXRlIDwgbm9ybWFsaXplZEdyaWROZXh0IC0gKG5vcm1hbGl6ZWRHcmlkTmV4dCAtIG5vcm1hbGl6ZWRHcmlkKSAvIDIpIHtcbiAgICAgICAgICAgIHNsaWRlSW5kZXggPSBpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobm9ybWFsaXplZFRyYW5zbGF0ZSA+PSBub3JtYWxpemVkR3JpZCAmJiBub3JtYWxpemVkVHJhbnNsYXRlIDwgbm9ybWFsaXplZEdyaWROZXh0KSB7XG4gICAgICAgICAgICBzbGlkZUluZGV4ID0gaSArIDE7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWRUcmFuc2xhdGUgPj0gbm9ybWFsaXplZEdyaWQpIHtcbiAgICAgICAgICBzbGlkZUluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBEaXJlY3Rpb25zIGxvY2tzXG4gICAgaWYgKHN3aXBlci5pbml0aWFsaXplZCAmJiBzbGlkZUluZGV4ICE9PSBhY3RpdmVJbmRleCkge1xuICAgICAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZU5leHQgJiYgKHJ0bCA/IHRyYW5zbGF0ZSA+IHN3aXBlci50cmFuc2xhdGUgJiYgdHJhbnNsYXRlID4gc3dpcGVyLm1pblRyYW5zbGF0ZSgpIDogdHJhbnNsYXRlIDwgc3dpcGVyLnRyYW5zbGF0ZSAmJiB0cmFuc2xhdGUgPCBzd2lwZXIubWluVHJhbnNsYXRlKCkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghc3dpcGVyLmFsbG93U2xpZGVQcmV2ICYmIHRyYW5zbGF0ZSA+IHN3aXBlci50cmFuc2xhdGUgJiYgdHJhbnNsYXRlID4gc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSB7XG4gICAgICAgIGlmICgoYWN0aXZlSW5kZXggfHwgMCkgIT09IHNsaWRlSW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNsaWRlSW5kZXggIT09IChwcmV2aW91c0luZGV4IHx8IDApICYmIHJ1bkNhbGxiYWNrcykge1xuICAgICAgc3dpcGVyLmVtaXQoJ2JlZm9yZVNsaWRlQ2hhbmdlU3RhcnQnKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcHJvZ3Jlc3NcbiAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3ModHJhbnNsYXRlKTtcbiAgICBsZXQgZGlyZWN0aW9uO1xuICAgIGlmIChzbGlkZUluZGV4ID4gYWN0aXZlSW5kZXgpIGRpcmVjdGlvbiA9ICduZXh0JztlbHNlIGlmIChzbGlkZUluZGV4IDwgYWN0aXZlSW5kZXgpIGRpcmVjdGlvbiA9ICdwcmV2JztlbHNlIGRpcmVjdGlvbiA9ICdyZXNldCc7XG5cbiAgICAvLyBVcGRhdGUgSW5kZXhcbiAgICBpZiAocnRsICYmIC10cmFuc2xhdGUgPT09IHN3aXBlci50cmFuc2xhdGUgfHwgIXJ0bCAmJiB0cmFuc2xhdGUgPT09IHN3aXBlci50cmFuc2xhdGUpIHtcbiAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleChzbGlkZUluZGV4KTtcbiAgICAgIC8vIFVwZGF0ZSBIZWlnaHRcbiAgICAgIGlmIChwYXJhbXMuYXV0b0hlaWdodCkge1xuICAgICAgICBzd2lwZXIudXBkYXRlQXV0b0hlaWdodCgpO1xuICAgICAgfVxuICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgIGlmIChwYXJhbXMuZWZmZWN0ICE9PSAnc2xpZGUnKSB7XG4gICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUodHJhbnNsYXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJlY3Rpb24gIT09ICdyZXNldCcpIHtcbiAgICAgICAgc3dpcGVyLnRyYW5zaXRpb25TdGFydChydW5DYWxsYmFja3MsIGRpcmVjdGlvbik7XG4gICAgICAgIHN3aXBlci50cmFuc2l0aW9uRW5kKHJ1bkNhbGxiYWNrcywgZGlyZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBjb25zdCBpc0ggPSBzd2lwZXIuaXNIb3Jpem9udGFsKCk7XG4gICAgICBjb25zdCB0ID0gcnRsID8gdHJhbnNsYXRlIDogLXRyYW5zbGF0ZTtcbiAgICAgIGlmIChzcGVlZCA9PT0gMCkge1xuICAgICAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcbiAgICAgICAgaWYgKGlzVmlydHVhbCkge1xuICAgICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUuc2Nyb2xsU25hcFR5cGUgPSAnbm9uZSc7XG4gICAgICAgICAgc3dpcGVyLl9pbW1lZGlhdGVWaXJ0dWFsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNWaXJ0dWFsICYmICFzd2lwZXIuX2Nzc01vZGVWaXJ0dWFsSW5pdGlhbFNldCAmJiBzd2lwZXIucGFyYW1zLmluaXRpYWxTbGlkZSA+IDApIHtcbiAgICAgICAgICBzd2lwZXIuX2Nzc01vZGVWaXJ0dWFsSW5pdGlhbFNldCA9IHRydWU7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHdyYXBwZXJFbFtpc0ggPyAnc2Nyb2xsTGVmdCcgOiAnc2Nyb2xsVG9wJ10gPSB0O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdyYXBwZXJFbFtpc0ggPyAnc2Nyb2xsTGVmdCcgOiAnc2Nyb2xsVG9wJ10gPSB0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZS5zY3JvbGxTbmFwVHlwZSA9ICcnO1xuICAgICAgICAgICAgc3dpcGVyLl9pbW1lZGlhdGVWaXJ0dWFsID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghc3dpcGVyLnN1cHBvcnQuc21vb3RoU2Nyb2xsKSB7XG4gICAgICAgICAgYW5pbWF0ZUNTU01vZGVTY3JvbGwoe1xuICAgICAgICAgICAgc3dpcGVyLFxuICAgICAgICAgICAgdGFyZ2V0UG9zaXRpb246IHQsXG4gICAgICAgICAgICBzaWRlOiBpc0ggPyAnbGVmdCcgOiAndG9wJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHdyYXBwZXJFbC5zY3JvbGxUbyh7XG4gICAgICAgICAgW2lzSCA/ICdsZWZ0JyA6ICd0b3AnXTogdCxcbiAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc3dpcGVyLnNldFRyYW5zaXRpb24oc3BlZWQpO1xuICAgIHN3aXBlci5zZXRUcmFuc2xhdGUodHJhbnNsYXRlKTtcbiAgICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoc2xpZGVJbmRleCk7XG4gICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICBzd2lwZXIuZW1pdCgnYmVmb3JlVHJhbnNpdGlvblN0YXJ0Jywgc3BlZWQsIGludGVybmFsKTtcbiAgICBzd2lwZXIudHJhbnNpdGlvblN0YXJ0KHJ1bkNhbGxiYWNrcywgZGlyZWN0aW9uKTtcbiAgICBpZiAoc3BlZWQgPT09IDApIHtcbiAgICAgIHN3aXBlci50cmFuc2l0aW9uRW5kKHJ1bkNhbGxiYWNrcywgZGlyZWN0aW9uKTtcbiAgICB9IGVsc2UgaWYgKCFzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICBzd2lwZXIuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgIGlmICghc3dpcGVyLm9uU2xpZGVUb1dyYXBwZXJUcmFuc2l0aW9uRW5kKSB7XG4gICAgICAgIHN3aXBlci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoZSkge1xuICAgICAgICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgICBpZiAoZS50YXJnZXQgIT09IHRoaXMpIHJldHVybjtcbiAgICAgICAgICBzd2lwZXIud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgICAgICAgIHN3aXBlci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZCA9IG51bGw7XG4gICAgICAgICAgZGVsZXRlIHN3aXBlci5vblNsaWRlVG9XcmFwcGVyVHJhbnNpdGlvbkVuZDtcbiAgICAgICAgICBzd2lwZXIudHJhbnNpdGlvbkVuZChydW5DYWxsYmFja3MsIGRpcmVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBzd2lwZXIud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBzd2lwZXIub25TbGlkZVRvV3JhcHBlclRyYW5zaXRpb25FbmQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNsaWRlVG9Mb29wKGluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCkge1xuICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbmRleCA9IDA7XG4gICAgfVxuICAgIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IGluZGV4QXNOdW1iZXIgPSBwYXJzZUludChpbmRleCwgMTApO1xuICAgICAgaW5kZXggPSBpbmRleEFzTnVtYmVyO1xuICAgIH1cbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmIChzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgaWYgKHR5cGVvZiBzcGVlZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHNwZWVkID0gc3dpcGVyLnBhcmFtcy5zcGVlZDtcbiAgICB9XG4gICAgY29uc3QgZ3JpZEVuYWJsZWQgPSBzd2lwZXIuZ3JpZCAmJiBzd2lwZXIucGFyYW1zLmdyaWQgJiYgc3dpcGVyLnBhcmFtcy5ncmlkLnJvd3MgPiAxO1xuICAgIGxldCBuZXdJbmRleCA9IGluZGV4O1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgIGlmIChzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgbmV3SW5kZXggPSBuZXdJbmRleCArIHN3aXBlci52aXJ0dWFsLnNsaWRlc0JlZm9yZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB0YXJnZXRTbGlkZUluZGV4O1xuICAgICAgICBpZiAoZ3JpZEVuYWJsZWQpIHtcbiAgICAgICAgICBjb25zdCBzbGlkZUluZGV4ID0gbmV3SW5kZXggKiBzd2lwZXIucGFyYW1zLmdyaWQucm93cztcbiAgICAgICAgICB0YXJnZXRTbGlkZUluZGV4ID0gc3dpcGVyLnNsaWRlcy5maWx0ZXIoc2xpZGVFbCA9PiBzbGlkZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKSAqIDEgPT09IHNsaWRlSW5kZXgpWzBdLmNvbHVtbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXRTbGlkZUluZGV4ID0gc3dpcGVyLmdldFNsaWRlSW5kZXhCeURhdGEobmV3SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbHMgPSBncmlkRW5hYmxlZCA/IE1hdGguY2VpbChzd2lwZXIuc2xpZGVzLmxlbmd0aCAvIHN3aXBlci5wYXJhbXMuZ3JpZC5yb3dzKSA6IHN3aXBlci5zbGlkZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgY2VudGVyZWRTbGlkZXNcbiAgICAgICAgfSA9IHN3aXBlci5wYXJhbXM7XG4gICAgICAgIGxldCBzbGlkZXNQZXJWaWV3ID0gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3O1xuICAgICAgICBpZiAoc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgc2xpZGVzUGVyVmlldyA9IHN3aXBlci5zbGlkZXNQZXJWaWV3RHluYW1pYygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXcgPSBNYXRoLmNlaWwocGFyc2VGbG9hdChzd2lwZXIucGFyYW1zLnNsaWRlc1BlclZpZXcsIDEwKSk7XG4gICAgICAgICAgaWYgKGNlbnRlcmVkU2xpZGVzICYmIHNsaWRlc1BlclZpZXcgJSAyID09PSAwKSB7XG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3ID0gc2xpZGVzUGVyVmlldyArIDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBuZWVkTG9vcEZpeCA9IGNvbHMgLSB0YXJnZXRTbGlkZUluZGV4IDwgc2xpZGVzUGVyVmlldztcbiAgICAgICAgaWYgKGNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgICAgbmVlZExvb3BGaXggPSBuZWVkTG9vcEZpeCB8fCB0YXJnZXRTbGlkZUluZGV4IDwgTWF0aC5jZWlsKHNsaWRlc1BlclZpZXcgLyAyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZXJuYWwgJiYgY2VudGVyZWRTbGlkZXMgJiYgc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ICE9PSAnYXV0bycgJiYgIWdyaWRFbmFibGVkKSB7XG4gICAgICAgICAgbmVlZExvb3BGaXggPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmVlZExvb3BGaXgpIHtcbiAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBjZW50ZXJlZFNsaWRlcyA/IHRhcmdldFNsaWRlSW5kZXggPCBzd2lwZXIuYWN0aXZlSW5kZXggPyAncHJldicgOiAnbmV4dCcgOiB0YXJnZXRTbGlkZUluZGV4IC0gc3dpcGVyLmFjdGl2ZUluZGV4IC0gMSA8IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyA/ICduZXh0JyA6ICdwcmV2JztcbiAgICAgICAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgICAgICBzbGlkZVRvOiB0cnVlLFxuICAgICAgICAgICAgYWN0aXZlU2xpZGVJbmRleDogZGlyZWN0aW9uID09PSAnbmV4dCcgPyB0YXJnZXRTbGlkZUluZGV4ICsgMSA6IHRhcmdldFNsaWRlSW5kZXggLSBjb2xzICsgMSxcbiAgICAgICAgICAgIHNsaWRlUmVhbEluZGV4OiBkaXJlY3Rpb24gPT09ICduZXh0JyA/IHN3aXBlci5yZWFsSW5kZXggOiB1bmRlZmluZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3JpZEVuYWJsZWQpIHtcbiAgICAgICAgICBjb25zdCBzbGlkZUluZGV4ID0gbmV3SW5kZXggKiBzd2lwZXIucGFyYW1zLmdyaWQucm93cztcbiAgICAgICAgICBuZXdJbmRleCA9IHN3aXBlci5zbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JykgKiAxID09PSBzbGlkZUluZGV4KVswXS5jb2x1bW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3SW5kZXggPSBzd2lwZXIuZ2V0U2xpZGVJbmRleEJ5RGF0YShuZXdJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKG5ld0luZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN3aXBlcjtcbiAgfVxuXG4gIC8qIGVzbGludCBuby11bnVzZWQtdmFyczogXCJvZmZcIiAqL1xuICBmdW5jdGlvbiBzbGlkZU5leHQoc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpIHtcbiAgICBpZiAocnVuQ2FsbGJhY2tzID09PSB2b2lkIDApIHtcbiAgICAgIHJ1bkNhbGxiYWNrcyA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgZW5hYmxlZCxcbiAgICAgIHBhcmFtcyxcbiAgICAgIGFuaW1hdGluZ1xuICAgIH0gPSBzd2lwZXI7XG4gICAgaWYgKCFlbmFibGVkIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybiBzd2lwZXI7XG4gICAgaWYgKHR5cGVvZiBzcGVlZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHNwZWVkID0gc3dpcGVyLnBhcmFtcy5zcGVlZDtcbiAgICB9XG4gICAgbGV0IHBlckdyb3VwID0gcGFyYW1zLnNsaWRlc1Blckdyb3VwO1xuICAgIGlmIChwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ2F1dG8nICYmIHBhcmFtcy5zbGlkZXNQZXJHcm91cCA9PT0gMSAmJiBwYXJhbXMuc2xpZGVzUGVyR3JvdXBBdXRvKSB7XG4gICAgICBwZXJHcm91cCA9IE1hdGgubWF4KHN3aXBlci5zbGlkZXNQZXJWaWV3RHluYW1pYygnY3VycmVudCcsIHRydWUpLCAxKTtcbiAgICB9XG4gICAgY29uc3QgaW5jcmVtZW50ID0gc3dpcGVyLmFjdGl2ZUluZGV4IDwgcGFyYW1zLnNsaWRlc1Blckdyb3VwU2tpcCA/IDEgOiBwZXJHcm91cDtcbiAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgaWYgKGFuaW1hdGluZyAmJiAhaXNWaXJ0dWFsICYmIHBhcmFtcy5sb29wUHJldmVudHNTbGlkaW5nKSByZXR1cm4gZmFsc2U7XG4gICAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICAgIGRpcmVjdGlvbjogJ25leHQnXG4gICAgICB9KTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgc3dpcGVyLl9jbGllbnRMZWZ0ID0gc3dpcGVyLndyYXBwZXJFbC5jbGllbnRMZWZ0O1xuICAgICAgaWYgKHN3aXBlci5hY3RpdmVJbmRleCA9PT0gc3dpcGVyLnNsaWRlcy5sZW5ndGggLSAxICYmIHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4ICsgaW5jcmVtZW50LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXdpbmQgJiYgc3dpcGVyLmlzRW5kKSB7XG4gICAgICByZXR1cm4gc3dpcGVyLnNsaWRlVG8oMCwgc3BlZWQsIHJ1bkNhbGxiYWNrcywgaW50ZXJuYWwpO1xuICAgIH1cbiAgICByZXR1cm4gc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4ICsgaW5jcmVtZW50LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIgKi9cbiAgZnVuY3Rpb24gc2xpZGVQcmV2KHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKSB7XG4gICAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHNuYXBHcmlkLFxuICAgICAgc2xpZGVzR3JpZCxcbiAgICAgIHJ0bFRyYW5zbGF0ZSxcbiAgICAgIGVuYWJsZWQsXG4gICAgICBhbmltYXRpbmdcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghZW5hYmxlZCB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm4gc3dpcGVyO1xuICAgIGlmICh0eXBlb2Ygc3BlZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzcGVlZCA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gICAgfVxuICAgIGNvbnN0IGlzVmlydHVhbCA9IHN3aXBlci52aXJ0dWFsICYmIHBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBpZiAoYW5pbWF0aW5nICYmICFpc1ZpcnR1YWwgJiYgcGFyYW1zLmxvb3BQcmV2ZW50c1NsaWRpbmcpIHJldHVybiBmYWxzZTtcbiAgICAgIHN3aXBlci5sb29wRml4KHtcbiAgICAgICAgZGlyZWN0aW9uOiAncHJldidcbiAgICAgIH0pO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICBzd2lwZXIuX2NsaWVudExlZnQgPSBzd2lwZXIud3JhcHBlckVsLmNsaWVudExlZnQ7XG4gICAgfVxuICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHJ0bFRyYW5zbGF0ZSA/IHN3aXBlci50cmFuc2xhdGUgOiAtc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICBmdW5jdGlvbiBub3JtYWxpemUodmFsKSB7XG4gICAgICBpZiAodmFsIDwgMCkgcmV0dXJuIC1NYXRoLmZsb29yKE1hdGguYWJzKHZhbCkpO1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IodmFsKTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZFRyYW5zbGF0ZSA9IG5vcm1hbGl6ZSh0cmFuc2xhdGUpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTbmFwR3JpZCA9IHNuYXBHcmlkLm1hcCh2YWwgPT4gbm9ybWFsaXplKHZhbCkpO1xuICAgIGxldCBwcmV2U25hcCA9IHNuYXBHcmlkW25vcm1hbGl6ZWRTbmFwR3JpZC5pbmRleE9mKG5vcm1hbGl6ZWRUcmFuc2xhdGUpIC0gMV07XG4gICAgaWYgKHR5cGVvZiBwcmV2U25hcCA9PT0gJ3VuZGVmaW5lZCcgJiYgcGFyYW1zLmNzc01vZGUpIHtcbiAgICAgIGxldCBwcmV2U25hcEluZGV4O1xuICAgICAgc25hcEdyaWQuZm9yRWFjaCgoc25hcCwgc25hcEluZGV4KSA9PiB7XG4gICAgICAgIGlmIChub3JtYWxpemVkVHJhbnNsYXRlID49IHNuYXApIHtcbiAgICAgICAgICAvLyBwcmV2U25hcCA9IHNuYXA7XG4gICAgICAgICAgcHJldlNuYXBJbmRleCA9IHNuYXBJbmRleDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIHByZXZTbmFwSW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHByZXZTbmFwID0gc25hcEdyaWRbcHJldlNuYXBJbmRleCA+IDAgPyBwcmV2U25hcEluZGV4IC0gMSA6IHByZXZTbmFwSW5kZXhdO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgcHJldkluZGV4ID0gMDtcbiAgICBpZiAodHlwZW9mIHByZXZTbmFwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcHJldkluZGV4ID0gc2xpZGVzR3JpZC5pbmRleE9mKHByZXZTbmFwKTtcbiAgICAgIGlmIChwcmV2SW5kZXggPCAwKSBwcmV2SW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXggLSAxO1xuICAgICAgaWYgKHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgJiYgcGFyYW1zLnNsaWRlc1Blckdyb3VwID09PSAxICYmIHBhcmFtcy5zbGlkZXNQZXJHcm91cEF1dG8pIHtcbiAgICAgICAgcHJldkluZGV4ID0gcHJldkluZGV4IC0gc3dpcGVyLnNsaWRlc1BlclZpZXdEeW5hbWljKCdwcmV2aW91cycsIHRydWUpICsgMTtcbiAgICAgICAgcHJldkluZGV4ID0gTWF0aC5tYXgocHJldkluZGV4LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXdpbmQgJiYgc3dpcGVyLmlzQmVnaW5uaW5nKSB7XG4gICAgICBjb25zdCBsYXN0SW5kZXggPSBzd2lwZXIucGFyYW1zLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgc3dpcGVyLnZpcnR1YWwgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIC0gMSA6IHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMTtcbiAgICAgIHJldHVybiBzd2lwZXIuc2xpZGVUbyhsYXN0SW5kZXgsIHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5sb29wICYmIHN3aXBlci5hY3RpdmVJbmRleCA9PT0gMCAmJiBwYXJhbXMuY3NzTW9kZSkge1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8ocHJldkluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gc3dpcGVyLnNsaWRlVG8ocHJldkluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIgKi9cbiAgZnVuY3Rpb24gc2xpZGVSZXNldChzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCkge1xuICAgIGlmIChydW5DYWxsYmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgcnVuQ2FsbGJhY2tzID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgIGlmICh0eXBlb2Ygc3BlZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzcGVlZCA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gICAgfVxuICAgIHJldHVybiBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuYWN0aXZlSW5kZXgsIHNwZWVkLCBydW5DYWxsYmFja3MsIGludGVybmFsKTtcbiAgfVxuXG4gIC8qIGVzbGludCBuby11bnVzZWQtdmFyczogXCJvZmZcIiAqL1xuICBmdW5jdGlvbiBzbGlkZVRvQ2xvc2VzdChzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCwgdGhyZXNob2xkKSB7XG4gICAgaWYgKHJ1bkNhbGxiYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICBydW5DYWxsYmFja3MgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhyZXNob2xkID09PSB2b2lkIDApIHtcbiAgICAgIHRocmVzaG9sZCA9IDAuNTtcbiAgICB9XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgIGlmICh0eXBlb2Ygc3BlZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzcGVlZCA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gICAgfVxuICAgIGxldCBpbmRleCA9IHN3aXBlci5hY3RpdmVJbmRleDtcbiAgICBjb25zdCBza2lwID0gTWF0aC5taW4oc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAsIGluZGV4KTtcbiAgICBjb25zdCBzbmFwSW5kZXggPSBza2lwICsgTWF0aC5mbG9vcigoaW5kZXggLSBza2lwKSAvIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXApO1xuICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyBzd2lwZXIudHJhbnNsYXRlIDogLXN3aXBlci50cmFuc2xhdGU7XG4gICAgaWYgKHRyYW5zbGF0ZSA+PSBzd2lwZXIuc25hcEdyaWRbc25hcEluZGV4XSkge1xuICAgICAgLy8gVGhlIGN1cnJlbnQgdHJhbnNsYXRlIGlzIG9uIG9yIGFmdGVyIHRoZSBjdXJyZW50IHNuYXAgaW5kZXgsIHNvIHRoZSBjaG9pY2VcbiAgICAgIC8vIGlzIGJldHdlZW4gdGhlIGN1cnJlbnQgaW5kZXggYW5kIHRoZSBvbmUgYWZ0ZXIgaXQuXG4gICAgICBjb25zdCBjdXJyZW50U25hcCA9IHN3aXBlci5zbmFwR3JpZFtzbmFwSW5kZXhdO1xuICAgICAgY29uc3QgbmV4dFNuYXAgPSBzd2lwZXIuc25hcEdyaWRbc25hcEluZGV4ICsgMV07XG4gICAgICBpZiAodHJhbnNsYXRlIC0gY3VycmVudFNuYXAgPiAobmV4dFNuYXAgLSBjdXJyZW50U25hcCkgKiB0aHJlc2hvbGQpIHtcbiAgICAgICAgaW5kZXggKz0gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlIGN1cnJlbnQgdHJhbnNsYXRlIGlzIGJlZm9yZSB0aGUgY3VycmVudCBzbmFwIGluZGV4LCBzbyB0aGUgY2hvaWNlXG4gICAgICAvLyBpcyBiZXR3ZWVuIHRoZSBjdXJyZW50IGluZGV4IGFuZCB0aGUgb25lIGJlZm9yZSBpdC5cbiAgICAgIGNvbnN0IHByZXZTbmFwID0gc3dpcGVyLnNuYXBHcmlkW3NuYXBJbmRleCAtIDFdO1xuICAgICAgY29uc3QgY3VycmVudFNuYXAgPSBzd2lwZXIuc25hcEdyaWRbc25hcEluZGV4XTtcbiAgICAgIGlmICh0cmFuc2xhdGUgLSBwcmV2U25hcCA8PSAoY3VycmVudFNuYXAgLSBwcmV2U25hcCkgKiB0aHJlc2hvbGQpIHtcbiAgICAgICAgaW5kZXggLT0gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICAgIH1cbiAgICB9XG4gICAgaW5kZXggPSBNYXRoLm1heChpbmRleCwgMCk7XG4gICAgaW5kZXggPSBNYXRoLm1pbihpbmRleCwgc3dpcGVyLnNsaWRlc0dyaWQubGVuZ3RoIC0gMSk7XG4gICAgcmV0dXJuIHN3aXBlci5zbGlkZVRvKGluZGV4LCBzcGVlZCwgcnVuQ2FsbGJhY2tzLCBpbnRlcm5hbCk7XG4gIH1cblxuICBmdW5jdGlvbiBzbGlkZVRvQ2xpY2tlZFNsaWRlKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICBzbGlkZXNFbFxuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3Qgc2xpZGVzUGVyVmlldyA9IHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgPyBzd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IHBhcmFtcy5zbGlkZXNQZXJWaWV3O1xuICAgIGxldCBzbGlkZVRvSW5kZXggPSBzd2lwZXIuY2xpY2tlZEluZGV4O1xuICAgIGxldCByZWFsSW5kZXg7XG4gICAgY29uc3Qgc2xpZGVTZWxlY3RvciA9IHN3aXBlci5pc0VsZW1lbnQgPyBgc3dpcGVyLXNsaWRlYCA6IGAuJHtwYXJhbXMuc2xpZGVDbGFzc31gO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgaWYgKHN3aXBlci5hbmltYXRpbmcpIHJldHVybjtcbiAgICAgIHJlYWxJbmRleCA9IHBhcnNlSW50KHN3aXBlci5jbGlja2VkU2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCk7XG4gICAgICBpZiAocGFyYW1zLmNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIGlmIChzbGlkZVRvSW5kZXggPCBzd2lwZXIubG9vcGVkU2xpZGVzIC0gc2xpZGVzUGVyVmlldyAvIDIgfHwgc2xpZGVUb0luZGV4ID4gc3dpcGVyLnNsaWRlcy5sZW5ndGggLSBzd2lwZXIubG9vcGVkU2xpZGVzICsgc2xpZGVzUGVyVmlldyAvIDIpIHtcbiAgICAgICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgICAgICAgIHNsaWRlVG9JbmRleCA9IHN3aXBlci5nZXRTbGlkZUluZGV4KGVsZW1lbnRDaGlsZHJlbihzbGlkZXNFbCwgYCR7c2xpZGVTZWxlY3Rvcn1bZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3JlYWxJbmRleH1cIl1gKVswXSk7XG4gICAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzbGlkZVRvSW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNsaWRlVG9JbmRleCA+IHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gc2xpZGVzUGVyVmlldykge1xuICAgICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgICAgICBzbGlkZVRvSW5kZXggPSBzd2lwZXIuZ2V0U2xpZGVJbmRleChlbGVtZW50Q2hpbGRyZW4oc2xpZGVzRWwsIGAke3NsaWRlU2VsZWN0b3J9W2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtyZWFsSW5kZXh9XCJdYClbMF0pO1xuICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc2xpZGVUb0luZGV4KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhzbGlkZVRvSW5kZXgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIuc2xpZGVUbyhzbGlkZVRvSW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzbGlkZSA9IHtcbiAgICBzbGlkZVRvLFxuICAgIHNsaWRlVG9Mb29wLFxuICAgIHNsaWRlTmV4dCxcbiAgICBzbGlkZVByZXYsXG4gICAgc2xpZGVSZXNldCxcbiAgICBzbGlkZVRvQ2xvc2VzdCxcbiAgICBzbGlkZVRvQ2xpY2tlZFNsaWRlXG4gIH07XG5cbiAgZnVuY3Rpb24gbG9vcENyZWF0ZShzbGlkZVJlYWxJbmRleCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgc2xpZGVzRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghcGFyYW1zLmxvb3AgfHwgc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHJldHVybjtcbiAgICBjb25zdCBpbml0U2xpZGVzID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc2xpZGVzID0gZWxlbWVudENoaWxkcmVuKHNsaWRlc0VsLCBgLiR7cGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICAgIHNsaWRlcy5mb3JFYWNoKChlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgZ3JpZEVuYWJsZWQgPSBzd2lwZXIuZ3JpZCAmJiBwYXJhbXMuZ3JpZCAmJiBwYXJhbXMuZ3JpZC5yb3dzID4gMTtcbiAgICBjb25zdCBzbGlkZXNQZXJHcm91cCA9IHBhcmFtcy5zbGlkZXNQZXJHcm91cCAqIChncmlkRW5hYmxlZCA/IHBhcmFtcy5ncmlkLnJvd3MgOiAxKTtcbiAgICBjb25zdCBzaG91bGRGaWxsR3JvdXAgPSBzd2lwZXIuc2xpZGVzLmxlbmd0aCAlIHNsaWRlc1Blckdyb3VwICE9PSAwO1xuICAgIGNvbnN0IHNob3VsZEZpbGxHcmlkID0gZ3JpZEVuYWJsZWQgJiYgc3dpcGVyLnNsaWRlcy5sZW5ndGggJSBwYXJhbXMuZ3JpZC5yb3dzICE9PSAwO1xuICAgIGNvbnN0IGFkZEJsYW5rU2xpZGVzID0gYW1vdW50T2ZTbGlkZXMgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnRPZlNsaWRlczsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlRWwgPSBzd2lwZXIuaXNFbGVtZW50ID8gY3JlYXRlRWxlbWVudCgnc3dpcGVyLXNsaWRlJywgW3BhcmFtcy5zbGlkZUJsYW5rQ2xhc3NdKSA6IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIFtwYXJhbXMuc2xpZGVDbGFzcywgcGFyYW1zLnNsaWRlQmxhbmtDbGFzc10pO1xuICAgICAgICBzd2lwZXIuc2xpZGVzRWwuYXBwZW5kKHNsaWRlRWwpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKHNob3VsZEZpbGxHcm91cCkge1xuICAgICAgaWYgKHBhcmFtcy5sb29wQWRkQmxhbmtTbGlkZXMpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVzVG9BZGQgPSBzbGlkZXNQZXJHcm91cCAtIHN3aXBlci5zbGlkZXMubGVuZ3RoICUgc2xpZGVzUGVyR3JvdXA7XG4gICAgICAgIGFkZEJsYW5rU2xpZGVzKHNsaWRlc1RvQWRkKTtcbiAgICAgICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaG93V2FybmluZygnU3dpcGVyIExvb3AgV2FybmluZzogVGhlIG51bWJlciBvZiBzbGlkZXMgaXMgbm90IGV2ZW4gdG8gc2xpZGVzUGVyR3JvdXAsIGxvb3AgbW9kZSBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5LiBZb3UgbmVlZCB0byBhZGQgbW9yZSBzbGlkZXMgKG9yIG1ha2UgZHVwbGljYXRlcywgb3IgZW1wdHkgc2xpZGVzKScpO1xuICAgICAgfVxuICAgICAgaW5pdFNsaWRlcygpO1xuICAgIH0gZWxzZSBpZiAoc2hvdWxkRmlsbEdyaWQpIHtcbiAgICAgIGlmIChwYXJhbXMubG9vcEFkZEJsYW5rU2xpZGVzKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlc1RvQWRkID0gcGFyYW1zLmdyaWQucm93cyAtIHN3aXBlci5zbGlkZXMubGVuZ3RoICUgcGFyYW1zLmdyaWQucm93cztcbiAgICAgICAgYWRkQmxhbmtTbGlkZXMoc2xpZGVzVG9BZGQpO1xuICAgICAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNob3dXYXJuaW5nKCdTd2lwZXIgTG9vcCBXYXJuaW5nOiBUaGUgbnVtYmVyIG9mIHNsaWRlcyBpcyBub3QgZXZlbiB0byBncmlkLnJvd3MsIGxvb3AgbW9kZSBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5LiBZb3UgbmVlZCB0byBhZGQgbW9yZSBzbGlkZXMgKG9yIG1ha2UgZHVwbGljYXRlcywgb3IgZW1wdHkgc2xpZGVzKScpO1xuICAgICAgfVxuICAgICAgaW5pdFNsaWRlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbml0U2xpZGVzKCk7XG4gICAgfVxuICAgIHN3aXBlci5sb29wRml4KHtcbiAgICAgIHNsaWRlUmVhbEluZGV4LFxuICAgICAgZGlyZWN0aW9uOiBwYXJhbXMuY2VudGVyZWRTbGlkZXMgPyB1bmRlZmluZWQgOiAnbmV4dCdcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvb3BGaXgoX3RlbXApIHtcbiAgICBsZXQge1xuICAgICAgc2xpZGVSZWFsSW5kZXgsXG4gICAgICBzbGlkZVRvID0gdHJ1ZSxcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIGFjdGl2ZVNsaWRlSW5kZXgsXG4gICAgICBieUNvbnRyb2xsZXIsXG4gICAgICBieU1vdXNld2hlZWxcbiAgICB9ID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXA7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMubG9vcCkgcmV0dXJuO1xuICAgIHN3aXBlci5lbWl0KCdiZWZvcmVMb29wRml4Jyk7XG4gICAgY29uc3Qge1xuICAgICAgc2xpZGVzLFxuICAgICAgYWxsb3dTbGlkZVByZXYsXG4gICAgICBhbGxvd1NsaWRlTmV4dCxcbiAgICAgIHNsaWRlc0VsLFxuICAgICAgcGFyYW1zXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCB7XG4gICAgICBjZW50ZXJlZFNsaWRlc1xuICAgIH0gPSBwYXJhbXM7XG4gICAgc3dpcGVyLmFsbG93U2xpZGVQcmV2ID0gdHJ1ZTtcbiAgICBzd2lwZXIuYWxsb3dTbGlkZU5leHQgPSB0cnVlO1xuICAgIGlmIChzd2lwZXIudmlydHVhbCAmJiBwYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICBpZiAoc2xpZGVUbykge1xuICAgICAgICBpZiAoIXBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBzd2lwZXIuc25hcEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBzd2lwZXIuc25hcEluZGV4IDwgcGFyYW1zLnNsaWRlc1BlclZpZXcpIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoICsgc3dpcGVyLnNuYXBJbmRleCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHN3aXBlci5zbmFwSW5kZXggPT09IHN3aXBlci5zbmFwR3JpZC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnZpcnR1YWwuc2xpZGVzQmVmb3JlLCAwLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IGFsbG93U2xpZGVQcmV2O1xuICAgICAgc3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gYWxsb3dTbGlkZU5leHQ7XG4gICAgICBzd2lwZXIuZW1pdCgnbG9vcEZpeCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgc2xpZGVzUGVyVmlldyA9IHBhcmFtcy5zbGlkZXNQZXJWaWV3O1xuICAgIGlmIChzbGlkZXNQZXJWaWV3ID09PSAnYXV0bycpIHtcbiAgICAgIHNsaWRlc1BlclZpZXcgPSBzd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVzUGVyVmlldyA9IE1hdGguY2VpbChwYXJzZUZsb2F0KHBhcmFtcy5zbGlkZXNQZXJWaWV3LCAxMCkpO1xuICAgICAgaWYgKGNlbnRlcmVkU2xpZGVzICYmIHNsaWRlc1BlclZpZXcgJSAyID09PSAwKSB7XG4gICAgICAgIHNsaWRlc1BlclZpZXcgPSBzbGlkZXNQZXJWaWV3ICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2xpZGVzUGVyR3JvdXAgPSBwYXJhbXMuc2xpZGVzUGVyR3JvdXBBdXRvID8gc2xpZGVzUGVyVmlldyA6IHBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICBsZXQgbG9vcGVkU2xpZGVzID0gc2xpZGVzUGVyR3JvdXA7XG4gICAgaWYgKGxvb3BlZFNsaWRlcyAlIHNsaWRlc1Blckdyb3VwICE9PSAwKSB7XG4gICAgICBsb29wZWRTbGlkZXMgKz0gc2xpZGVzUGVyR3JvdXAgLSBsb29wZWRTbGlkZXMgJSBzbGlkZXNQZXJHcm91cDtcbiAgICB9XG4gICAgbG9vcGVkU2xpZGVzICs9IHBhcmFtcy5sb29wQWRkaXRpb25hbFNsaWRlcztcbiAgICBzd2lwZXIubG9vcGVkU2xpZGVzID0gbG9vcGVkU2xpZGVzO1xuICAgIGNvbnN0IGdyaWRFbmFibGVkID0gc3dpcGVyLmdyaWQgJiYgcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDE7XG4gICAgaWYgKHNsaWRlcy5sZW5ndGggPCBzbGlkZXNQZXJWaWV3ICsgbG9vcGVkU2xpZGVzKSB7XG4gICAgICBzaG93V2FybmluZygnU3dpcGVyIExvb3AgV2FybmluZzogVGhlIG51bWJlciBvZiBzbGlkZXMgaXMgbm90IGVub3VnaCBmb3IgbG9vcCBtb2RlLCBpdCB3aWxsIGJlIGRpc2FibGVkIGFuZCBub3QgZnVuY3Rpb24gcHJvcGVybHkuIFlvdSBuZWVkIHRvIGFkZCBtb3JlIHNsaWRlcyAob3IgbWFrZSBkdXBsaWNhdGVzKSBvciBsb3dlciB0aGUgdmFsdWVzIG9mIHNsaWRlc1BlclZpZXcgYW5kIHNsaWRlc1Blckdyb3VwIHBhcmFtZXRlcnMnKTtcbiAgICB9IGVsc2UgaWYgKGdyaWRFbmFibGVkICYmIHBhcmFtcy5ncmlkLmZpbGwgPT09ICdyb3cnKSB7XG4gICAgICBzaG93V2FybmluZygnU3dpcGVyIExvb3AgV2FybmluZzogTG9vcCBtb2RlIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggZ3JpZC5maWxsID0gYHJvd2AnKTtcbiAgICB9XG4gICAgY29uc3QgcHJlcGVuZFNsaWRlc0luZGV4ZXMgPSBbXTtcbiAgICBjb25zdCBhcHBlbmRTbGlkZXNJbmRleGVzID0gW107XG4gICAgbGV0IGFjdGl2ZUluZGV4ID0gc3dpcGVyLmFjdGl2ZUluZGV4O1xuICAgIGlmICh0eXBlb2YgYWN0aXZlU2xpZGVJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGFjdGl2ZVNsaWRlSW5kZXggPSBzd2lwZXIuZ2V0U2xpZGVJbmRleChzbGlkZXMuZmlsdGVyKGVsID0+IGVsLmNsYXNzTGlzdC5jb250YWlucyhwYXJhbXMuc2xpZGVBY3RpdmVDbGFzcykpWzBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0aXZlSW5kZXggPSBhY3RpdmVTbGlkZUluZGV4O1xuICAgIH1cbiAgICBjb25zdCBpc05leHQgPSBkaXJlY3Rpb24gPT09ICduZXh0JyB8fCAhZGlyZWN0aW9uO1xuICAgIGNvbnN0IGlzUHJldiA9IGRpcmVjdGlvbiA9PT0gJ3ByZXYnIHx8ICFkaXJlY3Rpb247XG4gICAgbGV0IHNsaWRlc1ByZXBlbmRlZCA9IDA7XG4gICAgbGV0IHNsaWRlc0FwcGVuZGVkID0gMDtcbiAgICBjb25zdCBjb2xzID0gZ3JpZEVuYWJsZWQgPyBNYXRoLmNlaWwoc2xpZGVzLmxlbmd0aCAvIHBhcmFtcy5ncmlkLnJvd3MpIDogc2xpZGVzLmxlbmd0aDtcbiAgICBjb25zdCBhY3RpdmVDb2xJbmRleCA9IGdyaWRFbmFibGVkID8gc2xpZGVzW2FjdGl2ZVNsaWRlSW5kZXhdLmNvbHVtbiA6IGFjdGl2ZVNsaWRlSW5kZXg7XG4gICAgY29uc3QgYWN0aXZlQ29sSW5kZXhXaXRoU2hpZnQgPSBhY3RpdmVDb2xJbmRleCArIChjZW50ZXJlZFNsaWRlcyAmJiB0eXBlb2Ygc2V0VHJhbnNsYXRlID09PSAndW5kZWZpbmVkJyA/IC1zbGlkZXNQZXJWaWV3IC8gMiArIDAuNSA6IDApO1xuICAgIC8vIHByZXBlbmQgbGFzdCBzbGlkZXMgYmVmb3JlIHN0YXJ0XG4gICAgaWYgKGFjdGl2ZUNvbEluZGV4V2l0aFNoaWZ0IDwgbG9vcGVkU2xpZGVzKSB7XG4gICAgICBzbGlkZXNQcmVwZW5kZWQgPSBNYXRoLm1heChsb29wZWRTbGlkZXMgLSBhY3RpdmVDb2xJbmRleFdpdGhTaGlmdCwgc2xpZGVzUGVyR3JvdXApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb29wZWRTbGlkZXMgLSBhY3RpdmVDb2xJbmRleFdpdGhTaGlmdDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaSAtIE1hdGguZmxvb3IoaSAvIGNvbHMpICogY29scztcbiAgICAgICAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICAgICAgY29uc3QgY29sSW5kZXhUb1ByZXBlbmQgPSBjb2xzIC0gaW5kZXggLSAxO1xuICAgICAgICAgIGZvciAobGV0IGkgPSBzbGlkZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgIGlmIChzbGlkZXNbaV0uY29sdW1uID09PSBjb2xJbmRleFRvUHJlcGVuZCkgcHJlcGVuZFNsaWRlc0luZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc2xpZGVzLmZvckVhY2goKHNsaWRlLCBzbGlkZUluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gICBpZiAoc2xpZGUuY29sdW1uID09PSBjb2xJbmRleFRvUHJlcGVuZCkgcHJlcGVuZFNsaWRlc0luZGV4ZXMucHVzaChzbGlkZUluZGV4KTtcbiAgICAgICAgICAvLyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmVwZW5kU2xpZGVzSW5kZXhlcy5wdXNoKGNvbHMgLSBpbmRleCAtIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhY3RpdmVDb2xJbmRleFdpdGhTaGlmdCArIHNsaWRlc1BlclZpZXcgPiBjb2xzIC0gbG9vcGVkU2xpZGVzKSB7XG4gICAgICBzbGlkZXNBcHBlbmRlZCA9IE1hdGgubWF4KGFjdGl2ZUNvbEluZGV4V2l0aFNoaWZ0IC0gKGNvbHMgLSBsb29wZWRTbGlkZXMgKiAyKSwgc2xpZGVzUGVyR3JvdXApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNBcHBlbmRlZDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaSAtIE1hdGguZmxvb3IoaSAvIGNvbHMpICogY29scztcbiAgICAgICAgaWYgKGdyaWRFbmFibGVkKSB7XG4gICAgICAgICAgc2xpZGVzLmZvckVhY2goKHNsaWRlLCBzbGlkZUluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoc2xpZGUuY29sdW1uID09PSBpbmRleCkgYXBwZW5kU2xpZGVzSW5kZXhlcy5wdXNoKHNsaWRlSW5kZXgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwcGVuZFNsaWRlc0luZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc3dpcGVyLl9fcHJldmVudE9ic2VydmVyX18gPSB0cnVlO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBzd2lwZXIuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9IGZhbHNlO1xuICAgIH0pO1xuICAgIGlmIChpc1ByZXYpIHtcbiAgICAgIHByZXBlbmRTbGlkZXNJbmRleGVzLmZvckVhY2goaW5kZXggPT4ge1xuICAgICAgICBzbGlkZXNbaW5kZXhdLnN3aXBlckxvb3BNb3ZlRE9NID0gdHJ1ZTtcbiAgICAgICAgc2xpZGVzRWwucHJlcGVuZChzbGlkZXNbaW5kZXhdKTtcbiAgICAgICAgc2xpZGVzW2luZGV4XS5zd2lwZXJMb29wTW92ZURPTSA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc05leHQpIHtcbiAgICAgIGFwcGVuZFNsaWRlc0luZGV4ZXMuZm9yRWFjaChpbmRleCA9PiB7XG4gICAgICAgIHNsaWRlc1tpbmRleF0uc3dpcGVyTG9vcE1vdmVET00gPSB0cnVlO1xuICAgICAgICBzbGlkZXNFbC5hcHBlbmQoc2xpZGVzW2luZGV4XSk7XG4gICAgICAgIHNsaWRlc1tpbmRleF0uc3dpcGVyTG9vcE1vdmVET00gPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgaWYgKHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycpIHtcbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICB9IGVsc2UgaWYgKGdyaWRFbmFibGVkICYmIChwcmVwZW5kU2xpZGVzSW5kZXhlcy5sZW5ndGggPiAwICYmIGlzUHJldiB8fCBhcHBlbmRTbGlkZXNJbmRleGVzLmxlbmd0aCA+IDAgJiYgaXNOZXh0KSkge1xuICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgc2xpZGVJbmRleCkgPT4ge1xuICAgICAgICBzd2lwZXIuZ3JpZC51cGRhdGVTbGlkZShzbGlkZUluZGV4LCBzbGlkZSwgc3dpcGVyLnNsaWRlcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzKSB7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzT2Zmc2V0KCk7XG4gICAgfVxuICAgIGlmIChzbGlkZVRvKSB7XG4gICAgICBpZiAocHJlcGVuZFNsaWRlc0luZGV4ZXMubGVuZ3RoID4gMCAmJiBpc1ByZXYpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzbGlkZVJlYWxJbmRleCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGVUcmFuc2xhdGUgPSBzd2lwZXIuc2xpZGVzR3JpZFthY3RpdmVJbmRleF07XG4gICAgICAgICAgY29uc3QgbmV3U2xpZGVUcmFuc2xhdGUgPSBzd2lwZXIuc2xpZGVzR3JpZFthY3RpdmVJbmRleCArIHNsaWRlc1ByZXBlbmRlZF07XG4gICAgICAgICAgY29uc3QgZGlmZiA9IG5ld1NsaWRlVHJhbnNsYXRlIC0gY3VycmVudFNsaWRlVHJhbnNsYXRlO1xuICAgICAgICAgIGlmIChieU1vdXNld2hlZWwpIHtcbiAgICAgICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUoc3dpcGVyLnRyYW5zbGF0ZSAtIGRpZmYpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhhY3RpdmVJbmRleCArIE1hdGguY2VpbChzbGlkZXNQcmVwZW5kZWQpLCAwLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoc2V0VHJhbnNsYXRlKSB7XG4gICAgICAgICAgICAgIHN3aXBlci50b3VjaEV2ZW50c0RhdGEuc3RhcnRUcmFuc2xhdGUgPSBzd2lwZXIudG91Y2hFdmVudHNEYXRhLnN0YXJ0VHJhbnNsYXRlIC0gZGlmZjtcbiAgICAgICAgICAgICAgc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5jdXJyZW50VHJhbnNsYXRlID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5jdXJyZW50VHJhbnNsYXRlIC0gZGlmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNldFRyYW5zbGF0ZSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpZnQgPSBncmlkRW5hYmxlZCA/IHByZXBlbmRTbGlkZXNJbmRleGVzLmxlbmd0aCAvIHBhcmFtcy5ncmlkLnJvd3MgOiBwcmVwZW5kU2xpZGVzSW5kZXhlcy5sZW5ndGg7XG4gICAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuYWN0aXZlSW5kZXggKyBzaGlmdCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5jdXJyZW50VHJhbnNsYXRlID0gc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXBwZW5kU2xpZGVzSW5kZXhlcy5sZW5ndGggPiAwICYmIGlzTmV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHNsaWRlUmVhbEluZGV4ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZVRyYW5zbGF0ZSA9IHN3aXBlci5zbGlkZXNHcmlkW2FjdGl2ZUluZGV4XTtcbiAgICAgICAgICBjb25zdCBuZXdTbGlkZVRyYW5zbGF0ZSA9IHN3aXBlci5zbGlkZXNHcmlkW2FjdGl2ZUluZGV4IC0gc2xpZGVzQXBwZW5kZWRdO1xuICAgICAgICAgIGNvbnN0IGRpZmYgPSBuZXdTbGlkZVRyYW5zbGF0ZSAtIGN1cnJlbnRTbGlkZVRyYW5zbGF0ZTtcbiAgICAgICAgICBpZiAoYnlNb3VzZXdoZWVsKSB7XG4gICAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKHN3aXBlci50cmFuc2xhdGUgLSBkaWZmKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG8oYWN0aXZlSW5kZXggLSBzbGlkZXNBcHBlbmRlZCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgaWYgKHNldFRyYW5zbGF0ZSkge1xuICAgICAgICAgICAgICBzd2lwZXIudG91Y2hFdmVudHNEYXRhLnN0YXJ0VHJhbnNsYXRlID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5zdGFydFRyYW5zbGF0ZSAtIGRpZmY7XG4gICAgICAgICAgICAgIHN3aXBlci50b3VjaEV2ZW50c0RhdGEuY3VycmVudFRyYW5zbGF0ZSA9IHN3aXBlci50b3VjaEV2ZW50c0RhdGEuY3VycmVudFRyYW5zbGF0ZSAtIGRpZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNoaWZ0ID0gZ3JpZEVuYWJsZWQgPyBhcHBlbmRTbGlkZXNJbmRleGVzLmxlbmd0aCAvIHBhcmFtcy5ncmlkLnJvd3MgOiBhcHBlbmRTbGlkZXNJbmRleGVzLmxlbmd0aDtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuYWN0aXZlSW5kZXggLSBzaGlmdCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IGFsbG93U2xpZGVQcmV2O1xuICAgIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IGFsbG93U2xpZGVOZXh0O1xuICAgIGlmIChzd2lwZXIuY29udHJvbGxlciAmJiBzd2lwZXIuY29udHJvbGxlci5jb250cm9sICYmICFieUNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnN0IGxvb3BQYXJhbXMgPSB7XG4gICAgICAgIHNsaWRlUmVhbEluZGV4LFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgICAgYWN0aXZlU2xpZGVJbmRleCxcbiAgICAgICAgYnlDb250cm9sbGVyOiB0cnVlXG4gICAgICB9O1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCkpIHtcbiAgICAgICAgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbC5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgIGlmICghYy5kZXN0cm95ZWQgJiYgYy5wYXJhbXMubG9vcCkgYy5sb29wRml4KHtcbiAgICAgICAgICAgIC4uLmxvb3BQYXJhbXMsXG4gICAgICAgICAgICBzbGlkZVRvOiBjLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSBwYXJhbXMuc2xpZGVzUGVyVmlldyA/IHNsaWRlVG8gOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCBpbnN0YW5jZW9mIHN3aXBlci5jb25zdHJ1Y3RvciAmJiBzd2lwZXIuY29udHJvbGxlci5jb250cm9sLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wubG9vcEZpeCh7XG4gICAgICAgICAgLi4ubG9vcFBhcmFtcyxcbiAgICAgICAgICBzbGlkZVRvOiBzd2lwZXIuY29udHJvbGxlci5jb250cm9sLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSBwYXJhbXMuc2xpZGVzUGVyVmlldyA/IHNsaWRlVG8gOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgc3dpcGVyLmVtaXQoJ2xvb3BGaXgnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvb3BEZXN0cm95KCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgc2xpZGVzRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghcGFyYW1zLmxvb3AgfHwgc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHJldHVybjtcbiAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgY29uc3QgbmV3U2xpZGVzT3JkZXIgPSBbXTtcbiAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHR5cGVvZiBzbGlkZUVsLnN3aXBlclNsaWRlSW5kZXggPT09ICd1bmRlZmluZWQnID8gc2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JykgKiAxIDogc2xpZGVFbC5zd2lwZXJTbGlkZUluZGV4O1xuICAgICAgbmV3U2xpZGVzT3JkZXJbaW5kZXhdID0gc2xpZGVFbDtcbiAgICB9KTtcbiAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICBzbGlkZUVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnKTtcbiAgICB9KTtcbiAgICBuZXdTbGlkZXNPcmRlci5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgc2xpZGVzRWwuYXBwZW5kKHNsaWRlRWwpO1xuICAgIH0pO1xuICAgIHN3aXBlci5yZWNhbGNTbGlkZXMoKTtcbiAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIucmVhbEluZGV4LCAwKTtcbiAgfVxuXG4gIHZhciBsb29wID0ge1xuICAgIGxvb3BDcmVhdGUsXG4gICAgbG9vcEZpeCxcbiAgICBsb29wRGVzdHJveVxuICB9O1xuXG4gIGZ1bmN0aW9uIHNldEdyYWJDdXJzb3IobW92aW5nKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBpZiAoIXN3aXBlci5wYXJhbXMuc2ltdWxhdGVUb3VjaCB8fCBzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc3dpcGVyLmlzTG9ja2VkIHx8IHN3aXBlci5wYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgIGNvbnN0IGVsID0gc3dpcGVyLnBhcmFtcy50b3VjaEV2ZW50c1RhcmdldCA9PT0gJ2NvbnRhaW5lcicgPyBzd2lwZXIuZWwgOiBzd2lwZXIud3JhcHBlckVsO1xuICAgIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICBzd2lwZXIuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9IHRydWU7XG4gICAgfVxuICAgIGVsLnN0eWxlLmN1cnNvciA9ICdtb3ZlJztcbiAgICBlbC5zdHlsZS5jdXJzb3IgPSBtb3ZpbmcgPyAnZ3JhYmJpbmcnIDogJ2dyYWInO1xuICAgIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBzd2lwZXIuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdW5zZXRHcmFiQ3Vyc29yKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiBzd2lwZXIuaXNMb2NrZWQgfHwgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICBzd2lwZXIuX19wcmV2ZW50T2JzZXJ2ZXJfXyA9IHRydWU7XG4gICAgfVxuICAgIHN3aXBlcltzd2lwZXIucGFyYW1zLnRvdWNoRXZlbnRzVGFyZ2V0ID09PSAnY29udGFpbmVyJyA/ICdlbCcgOiAnd3JhcHBlckVsJ10uc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgaWYgKHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHN3aXBlci5fX3ByZXZlbnRPYnNlcnZlcl9fID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB2YXIgZ3JhYkN1cnNvciA9IHtcbiAgICBzZXRHcmFiQ3Vyc29yLFxuICAgIHVuc2V0R3JhYkN1cnNvclxuICB9O1xuXG4gIC8vIE1vZGlmaWVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTQ1MjA1NTQvY3VzdG9tLWVsZW1lbnQtZ2V0cm9vdG5vZGUtY2xvc2VzdC1mdW5jdGlvbi1jcm9zc2luZy1tdWx0aXBsZS1wYXJlbnQtc2hhZG93ZFxuICBmdW5jdGlvbiBjbG9zZXN0RWxlbWVudChzZWxlY3RvciwgYmFzZSkge1xuICAgIGlmIChiYXNlID09PSB2b2lkIDApIHtcbiAgICAgIGJhc2UgPSB0aGlzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBfX2Nsb3Nlc3RGcm9tKGVsKSB7XG4gICAgICBpZiAoIWVsIHx8IGVsID09PSBnZXREb2N1bWVudCgpIHx8IGVsID09PSBnZXRXaW5kb3coKSkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAoZWwuYXNzaWduZWRTbG90KSBlbCA9IGVsLmFzc2lnbmVkU2xvdDtcbiAgICAgIGNvbnN0IGZvdW5kID0gZWwuY2xvc2VzdChzZWxlY3Rvcik7XG4gICAgICBpZiAoIWZvdW5kICYmICFlbC5nZXRSb290Tm9kZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3VuZCB8fCBfX2Nsb3Nlc3RGcm9tKGVsLmdldFJvb3ROb2RlKCkuaG9zdCk7XG4gICAgfVxuICAgIHJldHVybiBfX2Nsb3Nlc3RGcm9tKGJhc2UpO1xuICB9XG4gIGZ1bmN0aW9uIHByZXZlbnRFZGdlU3dpcGUoc3dpcGVyLCBldmVudCwgc3RhcnRYKSB7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBlZGdlU3dpcGVEZXRlY3Rpb24gPSBwYXJhbXMuZWRnZVN3aXBlRGV0ZWN0aW9uO1xuICAgIGNvbnN0IGVkZ2VTd2lwZVRocmVzaG9sZCA9IHBhcmFtcy5lZGdlU3dpcGVUaHJlc2hvbGQ7XG4gICAgaWYgKGVkZ2VTd2lwZURldGVjdGlvbiAmJiAoc3RhcnRYIDw9IGVkZ2VTd2lwZVRocmVzaG9sZCB8fCBzdGFydFggPj0gd2luZG93LmlubmVyV2lkdGggLSBlZGdlU3dpcGVUaHJlc2hvbGQpKSB7XG4gICAgICBpZiAoZWRnZVN3aXBlRGV0ZWN0aW9uID09PSAncHJldmVudCcpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIG9uVG91Y2hTdGFydChldmVudCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgIGxldCBlID0gZXZlbnQ7XG4gICAgaWYgKGUub3JpZ2luYWxFdmVudCkgZSA9IGUub3JpZ2luYWxFdmVudDtcbiAgICBjb25zdCBkYXRhID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YTtcbiAgICBpZiAoZS50eXBlID09PSAncG9pbnRlcmRvd24nKSB7XG4gICAgICBpZiAoZGF0YS5wb2ludGVySWQgIT09IG51bGwgJiYgZGF0YS5wb2ludGVySWQgIT09IGUucG9pbnRlcklkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGRhdGEucG9pbnRlcklkID0gZS5wb2ludGVySWQ7XG4gICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICd0b3VjaHN0YXJ0JyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBkYXRhLnRvdWNoSWQgPSBlLnRhcmdldFRvdWNoZXNbMF0uaWRlbnRpZmllcjtcbiAgICB9XG4gICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAvLyBkb24ndCBwcm9jZWVkIHRvdWNoIGV2ZW50XG4gICAgICBwcmV2ZW50RWRnZVN3aXBlKHN3aXBlciwgZSwgZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgdG91Y2hlcyxcbiAgICAgIGVuYWJsZWRcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghZW5hYmxlZCkgcmV0dXJuO1xuICAgIGlmICghcGFyYW1zLnNpbXVsYXRlVG91Y2ggJiYgZS5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJykgcmV0dXJuO1xuICAgIGlmIChzd2lwZXIuYW5pbWF0aW5nICYmIHBhcmFtcy5wcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFzd2lwZXIuYW5pbWF0aW5nICYmIHBhcmFtcy5jc3NNb2RlICYmIHBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgIH1cbiAgICBsZXQgdGFyZ2V0RWwgPSBlLnRhcmdldDtcbiAgICBpZiAocGFyYW1zLnRvdWNoRXZlbnRzVGFyZ2V0ID09PSAnd3JhcHBlcicpIHtcbiAgICAgIGlmICghc3dpcGVyLndyYXBwZXJFbC5jb250YWlucyh0YXJnZXRFbCkpIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCd3aGljaCcgaW4gZSAmJiBlLndoaWNoID09PSAzKSByZXR1cm47XG4gICAgaWYgKCdidXR0b24nIGluIGUgJiYgZS5idXR0b24gPiAwKSByZXR1cm47XG4gICAgaWYgKGRhdGEuaXNUb3VjaGVkICYmIGRhdGEuaXNNb3ZlZCkgcmV0dXJuO1xuXG4gICAgLy8gY2hhbmdlIHRhcmdldCBlbCBmb3Igc2hhZG93IHJvb3QgY29tcG9uZW50XG4gICAgY29uc3Qgc3dpcGluZ0NsYXNzSGFzVmFsdWUgPSAhIXBhcmFtcy5ub1N3aXBpbmdDbGFzcyAmJiBwYXJhbXMubm9Td2lwaW5nQ2xhc3MgIT09ICcnO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IGV2ZW50UGF0aCA9IGUuY29tcG9zZWRQYXRoID8gZS5jb21wb3NlZFBhdGgoKSA6IGUucGF0aDtcbiAgICBpZiAoc3dpcGluZ0NsYXNzSGFzVmFsdWUgJiYgZS50YXJnZXQgJiYgZS50YXJnZXQuc2hhZG93Um9vdCAmJiBldmVudFBhdGgpIHtcbiAgICAgIHRhcmdldEVsID0gZXZlbnRQYXRoWzBdO1xuICAgIH1cbiAgICBjb25zdCBub1N3aXBpbmdTZWxlY3RvciA9IHBhcmFtcy5ub1N3aXBpbmdTZWxlY3RvciA/IHBhcmFtcy5ub1N3aXBpbmdTZWxlY3RvciA6IGAuJHtwYXJhbXMubm9Td2lwaW5nQ2xhc3N9YDtcbiAgICBjb25zdCBpc1RhcmdldFNoYWRvdyA9ICEhKGUudGFyZ2V0ICYmIGUudGFyZ2V0LnNoYWRvd1Jvb3QpO1xuXG4gICAgLy8gdXNlIGNsb3Nlc3RFbGVtZW50IGZvciBzaGFkb3cgcm9vdCBlbGVtZW50IHRvIGdldCB0aGUgYWN0dWFsIGNsb3Nlc3QgZm9yIG5lc3RlZCBzaGFkb3cgcm9vdCBlbGVtZW50XG4gICAgaWYgKHBhcmFtcy5ub1N3aXBpbmcgJiYgKGlzVGFyZ2V0U2hhZG93ID8gY2xvc2VzdEVsZW1lbnQobm9Td2lwaW5nU2VsZWN0b3IsIHRhcmdldEVsKSA6IHRhcmdldEVsLmNsb3Nlc3Qobm9Td2lwaW5nU2VsZWN0b3IpKSkge1xuICAgICAgc3dpcGVyLmFsbG93Q2xpY2sgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnN3aXBlSGFuZGxlcikge1xuICAgICAgaWYgKCF0YXJnZXRFbC5jbG9zZXN0KHBhcmFtcy5zd2lwZUhhbmRsZXIpKSByZXR1cm47XG4gICAgfVxuICAgIHRvdWNoZXMuY3VycmVudFggPSBlLnBhZ2VYO1xuICAgIHRvdWNoZXMuY3VycmVudFkgPSBlLnBhZ2VZO1xuICAgIGNvbnN0IHN0YXJ0WCA9IHRvdWNoZXMuY3VycmVudFg7XG4gICAgY29uc3Qgc3RhcnRZID0gdG91Y2hlcy5jdXJyZW50WTtcblxuICAgIC8vIERvIE5PVCBzdGFydCBpZiBpT1MgZWRnZSBzd2lwZSBpcyBkZXRlY3RlZC4gT3RoZXJ3aXNlIGlPUyBhcHAgY2Fubm90IHN3aXBlLXRvLWdvLWJhY2sgYW55bW9yZVxuXG4gICAgaWYgKCFwcmV2ZW50RWRnZVN3aXBlKHN3aXBlciwgZSwgc3RhcnRYKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKGRhdGEsIHtcbiAgICAgIGlzVG91Y2hlZDogdHJ1ZSxcbiAgICAgIGlzTW92ZWQ6IGZhbHNlLFxuICAgICAgYWxsb3dUb3VjaENhbGxiYWNrczogdHJ1ZSxcbiAgICAgIGlzU2Nyb2xsaW5nOiB1bmRlZmluZWQsXG4gICAgICBzdGFydE1vdmluZzogdW5kZWZpbmVkXG4gICAgfSk7XG4gICAgdG91Y2hlcy5zdGFydFggPSBzdGFydFg7XG4gICAgdG91Y2hlcy5zdGFydFkgPSBzdGFydFk7XG4gICAgZGF0YS50b3VjaFN0YXJ0VGltZSA9IG5vdygpO1xuICAgIHN3aXBlci5hbGxvd0NsaWNrID0gdHJ1ZTtcbiAgICBzd2lwZXIudXBkYXRlU2l6ZSgpO1xuICAgIHN3aXBlci5zd2lwZURpcmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICBpZiAocGFyYW1zLnRocmVzaG9sZCA+IDApIGRhdGEuYWxsb3dUaHJlc2hvbGRNb3ZlID0gZmFsc2U7XG4gICAgbGV0IHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICBpZiAodGFyZ2V0RWwubWF0Y2hlcyhkYXRhLmZvY3VzYWJsZUVsZW1lbnRzKSkge1xuICAgICAgcHJldmVudERlZmF1bHQgPSBmYWxzZTtcbiAgICAgIGlmICh0YXJnZXRFbC5ub2RlTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgZGF0YS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5tYXRjaGVzKGRhdGEuZm9jdXNhYmxlRWxlbWVudHMpICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRhcmdldEVsKSB7XG4gICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgICB9XG4gICAgY29uc3Qgc2hvdWxkUHJldmVudERlZmF1bHQgPSBwcmV2ZW50RGVmYXVsdCAmJiBzd2lwZXIuYWxsb3dUb3VjaE1vdmUgJiYgcGFyYW1zLnRvdWNoU3RhcnRQcmV2ZW50RGVmYXVsdDtcbiAgICBpZiAoKHBhcmFtcy50b3VjaFN0YXJ0Rm9yY2VQcmV2ZW50RGVmYXVsdCB8fCBzaG91bGRQcmV2ZW50RGVmYXVsdCkgJiYgIXRhcmdldEVsLmlzQ29udGVudEVkaXRhYmxlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMuZnJlZU1vZGUgJiYgcGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgJiYgc3dpcGVyLmZyZWVNb2RlICYmIHN3aXBlci5hbmltYXRpbmcgJiYgIXBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBzd2lwZXIuZnJlZU1vZGUub25Ub3VjaFN0YXJ0KCk7XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCd0b3VjaFN0YXJ0JywgZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoTW92ZShldmVudCkge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IGRhdGEgPSBzd2lwZXIudG91Y2hFdmVudHNEYXRhO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIHRvdWNoZXMsXG4gICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgIGVuYWJsZWRcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghZW5hYmxlZCkgcmV0dXJuO1xuICAgIGlmICghcGFyYW1zLnNpbXVsYXRlVG91Y2ggJiYgZXZlbnQucG9pbnRlclR5cGUgPT09ICdtb3VzZScpIHJldHVybjtcbiAgICBsZXQgZSA9IGV2ZW50O1xuICAgIGlmIChlLm9yaWdpbmFsRXZlbnQpIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgaWYgKGUudHlwZSA9PT0gJ3BvaW50ZXJtb3ZlJykge1xuICAgICAgaWYgKGRhdGEudG91Y2hJZCAhPT0gbnVsbCkgcmV0dXJuOyAvLyByZXR1cm4gZnJvbSBwb2ludGVyIGlmIHdlIHVzZSB0b3VjaFxuICAgICAgY29uc3QgaWQgPSBlLnBvaW50ZXJJZDtcbiAgICAgIGlmIChpZCAhPT0gZGF0YS5wb2ludGVySWQpIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHRhcmdldFRvdWNoO1xuICAgIGlmIChlLnR5cGUgPT09ICd0b3VjaG1vdmUnKSB7XG4gICAgICB0YXJnZXRUb3VjaCA9IFsuLi5lLmNoYW5nZWRUb3VjaGVzXS5maWx0ZXIodCA9PiB0LmlkZW50aWZpZXIgPT09IGRhdGEudG91Y2hJZClbMF07XG4gICAgICBpZiAoIXRhcmdldFRvdWNoIHx8IHRhcmdldFRvdWNoLmlkZW50aWZpZXIgIT09IGRhdGEudG91Y2hJZCkgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRUb3VjaCA9IGU7XG4gICAgfVxuICAgIGlmICghZGF0YS5pc1RvdWNoZWQpIHtcbiAgICAgIGlmIChkYXRhLnN0YXJ0TW92aW5nICYmIGRhdGEuaXNTY3JvbGxpbmcpIHtcbiAgICAgICAgc3dpcGVyLmVtaXQoJ3RvdWNoTW92ZU9wcG9zaXRlJywgZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhZ2VYID0gdGFyZ2V0VG91Y2gucGFnZVg7XG4gICAgY29uc3QgcGFnZVkgPSB0YXJnZXRUb3VjaC5wYWdlWTtcbiAgICBpZiAoZS5wcmV2ZW50ZWRCeU5lc3RlZFN3aXBlcikge1xuICAgICAgdG91Y2hlcy5zdGFydFggPSBwYWdlWDtcbiAgICAgIHRvdWNoZXMuc3RhcnRZID0gcGFnZVk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghc3dpcGVyLmFsbG93VG91Y2hNb3ZlKSB7XG4gICAgICBpZiAoIWUudGFyZ2V0Lm1hdGNoZXMoZGF0YS5mb2N1c2FibGVFbGVtZW50cykpIHtcbiAgICAgICAgc3dpcGVyLmFsbG93Q2xpY2sgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmlzVG91Y2hlZCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRvdWNoZXMsIHtcbiAgICAgICAgICBzdGFydFg6IHBhZ2VYLFxuICAgICAgICAgIHN0YXJ0WTogcGFnZVksXG4gICAgICAgICAgY3VycmVudFg6IHBhZ2VYLFxuICAgICAgICAgIGN1cnJlbnRZOiBwYWdlWVxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS50b3VjaFN0YXJ0VGltZSA9IG5vdygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnRvdWNoUmVsZWFzZU9uRWRnZXMgJiYgIXBhcmFtcy5sb29wKSB7XG4gICAgICBpZiAoc3dpcGVyLmlzVmVydGljYWwoKSkge1xuICAgICAgICAvLyBWZXJ0aWNhbFxuICAgICAgICBpZiAocGFnZVkgPCB0b3VjaGVzLnN0YXJ0WSAmJiBzd2lwZXIudHJhbnNsYXRlIDw9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSB8fCBwYWdlWSA+IHRvdWNoZXMuc3RhcnRZICYmIHN3aXBlci50cmFuc2xhdGUgPj0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSB7XG4gICAgICAgICAgZGF0YS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgICBkYXRhLmlzTW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocGFnZVggPCB0b3VjaGVzLnN0YXJ0WCAmJiBzd2lwZXIudHJhbnNsYXRlIDw9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSB8fCBwYWdlWCA+IHRvdWNoZXMuc3RhcnRYICYmIHN3aXBlci50cmFuc2xhdGUgPj0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBlLnRhcmdldC5tYXRjaGVzKGRhdGEuZm9jdXNhYmxlRWxlbWVudHMpKSB7XG4gICAgICAgIGRhdGEuaXNNb3ZlZCA9IHRydWU7XG4gICAgICAgIHN3aXBlci5hbGxvd0NsaWNrID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEuYWxsb3dUb3VjaENhbGxiYWNrcykge1xuICAgICAgc3dpcGVyLmVtaXQoJ3RvdWNoTW92ZScsIGUpO1xuICAgIH1cbiAgICB0b3VjaGVzLnByZXZpb3VzWCA9IHRvdWNoZXMuY3VycmVudFg7XG4gICAgdG91Y2hlcy5wcmV2aW91c1kgPSB0b3VjaGVzLmN1cnJlbnRZO1xuICAgIHRvdWNoZXMuY3VycmVudFggPSBwYWdlWDtcbiAgICB0b3VjaGVzLmN1cnJlbnRZID0gcGFnZVk7XG4gICAgY29uc3QgZGlmZlggPSB0b3VjaGVzLmN1cnJlbnRYIC0gdG91Y2hlcy5zdGFydFg7XG4gICAgY29uc3QgZGlmZlkgPSB0b3VjaGVzLmN1cnJlbnRZIC0gdG91Y2hlcy5zdGFydFk7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMudGhyZXNob2xkICYmIE1hdGguc3FydChkaWZmWCAqKiAyICsgZGlmZlkgKiogMikgPCBzd2lwZXIucGFyYW1zLnRocmVzaG9sZCkgcmV0dXJuO1xuICAgIGlmICh0eXBlb2YgZGF0YS5pc1Njcm9sbGluZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxldCB0b3VjaEFuZ2xlO1xuICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSAmJiB0b3VjaGVzLmN1cnJlbnRZID09PSB0b3VjaGVzLnN0YXJ0WSB8fCBzd2lwZXIuaXNWZXJ0aWNhbCgpICYmIHRvdWNoZXMuY3VycmVudFggPT09IHRvdWNoZXMuc3RhcnRYKSB7XG4gICAgICAgIGRhdGEuaXNTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBpZiAoZGlmZlggKiBkaWZmWCArIGRpZmZZICogZGlmZlkgPj0gMjUpIHtcbiAgICAgICAgICB0b3VjaEFuZ2xlID0gTWF0aC5hdGFuMihNYXRoLmFicyhkaWZmWSksIE1hdGguYWJzKGRpZmZYKSkgKiAxODAgLyBNYXRoLlBJO1xuICAgICAgICAgIGRhdGEuaXNTY3JvbGxpbmcgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyB0b3VjaEFuZ2xlID4gcGFyYW1zLnRvdWNoQW5nbGUgOiA5MCAtIHRvdWNoQW5nbGUgPiBwYXJhbXMudG91Y2hBbmdsZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZGF0YS5pc1Njcm9sbGluZykge1xuICAgICAgc3dpcGVyLmVtaXQoJ3RvdWNoTW92ZU9wcG9zaXRlJywgZSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5zdGFydE1vdmluZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0b3VjaGVzLmN1cnJlbnRYICE9PSB0b3VjaGVzLnN0YXJ0WCB8fCB0b3VjaGVzLmN1cnJlbnRZICE9PSB0b3VjaGVzLnN0YXJ0WSkge1xuICAgICAgICBkYXRhLnN0YXJ0TW92aW5nID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEuaXNTY3JvbGxpbmcgfHwgZS50eXBlID09PSAndG91Y2htb3ZlJyAmJiBkYXRhLnByZXZlbnRUb3VjaE1vdmVGcm9tUG9pbnRlck1vdmUpIHtcbiAgICAgIGRhdGEuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghZGF0YS5zdGFydE1vdmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2lwZXIuYWxsb3dDbGljayA9IGZhbHNlO1xuICAgIGlmICghcGFyYW1zLmNzc01vZGUgJiYgZS5jYW5jZWxhYmxlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMudG91Y2hNb3ZlU3RvcFByb3BhZ2F0aW9uICYmICFwYXJhbXMubmVzdGVkKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBsZXQgZGlmZiA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/IGRpZmZYIDogZGlmZlk7XG4gICAgbGV0IHRvdWNoZXNEaWZmID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gdG91Y2hlcy5jdXJyZW50WCAtIHRvdWNoZXMucHJldmlvdXNYIDogdG91Y2hlcy5jdXJyZW50WSAtIHRvdWNoZXMucHJldmlvdXNZO1xuICAgIGlmIChwYXJhbXMub25lV2F5TW92ZW1lbnQpIHtcbiAgICAgIGRpZmYgPSBNYXRoLmFicyhkaWZmKSAqIChydGwgPyAxIDogLTEpO1xuICAgICAgdG91Y2hlc0RpZmYgPSBNYXRoLmFicyh0b3VjaGVzRGlmZikgKiAocnRsID8gMSA6IC0xKTtcbiAgICB9XG4gICAgdG91Y2hlcy5kaWZmID0gZGlmZjtcbiAgICBkaWZmICo9IHBhcmFtcy50b3VjaFJhdGlvO1xuICAgIGlmIChydGwpIHtcbiAgICAgIGRpZmYgPSAtZGlmZjtcbiAgICAgIHRvdWNoZXNEaWZmID0gLXRvdWNoZXNEaWZmO1xuICAgIH1cbiAgICBjb25zdCBwcmV2VG91Y2hlc0RpcmVjdGlvbiA9IHN3aXBlci50b3VjaGVzRGlyZWN0aW9uO1xuICAgIHN3aXBlci5zd2lwZURpcmVjdGlvbiA9IGRpZmYgPiAwID8gJ3ByZXYnIDogJ25leHQnO1xuICAgIHN3aXBlci50b3VjaGVzRGlyZWN0aW9uID0gdG91Y2hlc0RpZmYgPiAwID8gJ3ByZXYnIDogJ25leHQnO1xuICAgIGNvbnN0IGlzTG9vcCA9IHN3aXBlci5wYXJhbXMubG9vcCAmJiAhcGFyYW1zLmNzc01vZGU7XG4gICAgY29uc3QgYWxsb3dMb29wRml4ID0gc3dpcGVyLnRvdWNoZXNEaXJlY3Rpb24gPT09ICduZXh0JyAmJiBzd2lwZXIuYWxsb3dTbGlkZU5leHQgfHwgc3dpcGVyLnRvdWNoZXNEaXJlY3Rpb24gPT09ICdwcmV2JyAmJiBzd2lwZXIuYWxsb3dTbGlkZVByZXY7XG4gICAgaWYgKCFkYXRhLmlzTW92ZWQpIHtcbiAgICAgIGlmIChpc0xvb3AgJiYgYWxsb3dMb29wRml4KSB7XG4gICAgICAgIHN3aXBlci5sb29wRml4KHtcbiAgICAgICAgICBkaXJlY3Rpb246IHN3aXBlci5zd2lwZURpcmVjdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGRhdGEuc3RhcnRUcmFuc2xhdGUgPSBzd2lwZXIuZ2V0VHJhbnNsYXRlKCk7XG4gICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbigwKTtcbiAgICAgIGlmIChzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICAgIGNvbnN0IGV2dCA9IG5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQoJ3RyYW5zaXRpb25lbmQnLCB7XG4gICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgYnlTd2lwZXJUb3VjaE1vdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgIH1cbiAgICAgIGRhdGEuYWxsb3dNb21lbnR1bUJvdW5jZSA9IGZhbHNlO1xuICAgICAgLy8gR3JhYiBDdXJzb3JcbiAgICAgIGlmIChwYXJhbXMuZ3JhYkN1cnNvciAmJiAoc3dpcGVyLmFsbG93U2xpZGVOZXh0ID09PSB0cnVlIHx8IHN3aXBlci5hbGxvd1NsaWRlUHJldiA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgc3dpcGVyLnNldEdyYWJDdXJzb3IodHJ1ZSk7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdCgnc2xpZGVyRmlyc3RNb3ZlJywgZSk7XG4gICAgfVxuICAgIGxldCBsb29wRml4ZWQ7XG4gICAgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgaWYgKGRhdGEuaXNNb3ZlZCAmJiBkYXRhLmFsbG93VGhyZXNob2xkTW92ZSAmJiBwcmV2VG91Y2hlc0RpcmVjdGlvbiAhPT0gc3dpcGVyLnRvdWNoZXNEaXJlY3Rpb24gJiYgaXNMb29wICYmIGFsbG93TG9vcEZpeCAmJiBNYXRoLmFicyhkaWZmKSA+PSAxKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRvdWNoZXMsIHtcbiAgICAgICAgc3RhcnRYOiBwYWdlWCxcbiAgICAgICAgc3RhcnRZOiBwYWdlWSxcbiAgICAgICAgY3VycmVudFg6IHBhZ2VYLFxuICAgICAgICBjdXJyZW50WTogcGFnZVksXG4gICAgICAgIHN0YXJ0VHJhbnNsYXRlOiBkYXRhLmN1cnJlbnRUcmFuc2xhdGVcbiAgICAgIH0pO1xuICAgICAgZGF0YS5sb29wU3dhcFJlc2V0ID0gdHJ1ZTtcbiAgICAgIGRhdGEuc3RhcnRUcmFuc2xhdGUgPSBkYXRhLmN1cnJlbnRUcmFuc2xhdGU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCdzbGlkZXJNb3ZlJywgZSk7XG4gICAgZGF0YS5pc01vdmVkID0gdHJ1ZTtcbiAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBkaWZmICsgZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgICBsZXQgZGlzYWJsZVBhcmVudFN3aXBlciA9IHRydWU7XG4gICAgbGV0IHJlc2lzdGFuY2VSYXRpbyA9IHBhcmFtcy5yZXNpc3RhbmNlUmF0aW87XG4gICAgaWYgKHBhcmFtcy50b3VjaFJlbGVhc2VPbkVkZ2VzKSB7XG4gICAgICByZXNpc3RhbmNlUmF0aW8gPSAwO1xuICAgIH1cbiAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgIGlmIChpc0xvb3AgJiYgYWxsb3dMb29wRml4ICYmICFsb29wRml4ZWQgJiYgZGF0YS5hbGxvd1RocmVzaG9sZE1vdmUgJiYgZGF0YS5jdXJyZW50VHJhbnNsYXRlID4gKHBhcmFtcy5jZW50ZXJlZFNsaWRlcyA/IHN3aXBlci5taW5UcmFuc2xhdGUoKSAtIHN3aXBlci5zbGlkZXNTaXplc0dyaWRbc3dpcGVyLmFjdGl2ZUluZGV4ICsgMV0gOiBzd2lwZXIubWluVHJhbnNsYXRlKCkpKSB7XG4gICAgICAgIHN3aXBlci5sb29wRml4KHtcbiAgICAgICAgICBkaXJlY3Rpb246ICdwcmV2JyxcbiAgICAgICAgICBzZXRUcmFuc2xhdGU6IHRydWUsXG4gICAgICAgICAgYWN0aXZlU2xpZGVJbmRleDogMFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPiBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICAgICAgZGlzYWJsZVBhcmVudFN3aXBlciA9IGZhbHNlO1xuICAgICAgICBpZiAocGFyYW1zLnJlc2lzdGFuY2UpIHtcbiAgICAgICAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBzd2lwZXIubWluVHJhbnNsYXRlKCkgLSAxICsgKC1zd2lwZXIubWluVHJhbnNsYXRlKCkgKyBkYXRhLnN0YXJ0VHJhbnNsYXRlICsgZGlmZikgKiogcmVzaXN0YW5jZVJhdGlvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xuICAgICAgaWYgKGlzTG9vcCAmJiBhbGxvd0xvb3BGaXggJiYgIWxvb3BGaXhlZCAmJiBkYXRhLmFsbG93VGhyZXNob2xkTW92ZSAmJiBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPCAocGFyYW1zLmNlbnRlcmVkU2xpZGVzID8gc3dpcGVyLm1heFRyYW5zbGF0ZSgpICsgc3dpcGVyLnNsaWRlc1NpemVzR3JpZFtzd2lwZXIuc2xpZGVzU2l6ZXNHcmlkLmxlbmd0aCAtIDFdIDogc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSkge1xuICAgICAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICAgICAgZGlyZWN0aW9uOiAnbmV4dCcsXG4gICAgICAgICAgc2V0VHJhbnNsYXRlOiB0cnVlLFxuICAgICAgICAgIGFjdGl2ZVNsaWRlSW5kZXg6IHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gKHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgPyBzd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IE1hdGguY2VpbChwYXJzZUZsb2F0KHBhcmFtcy5zbGlkZXNQZXJWaWV3LCAxMCkpKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPCBzd2lwZXIubWF4VHJhbnNsYXRlKCkpIHtcbiAgICAgICAgZGlzYWJsZVBhcmVudFN3aXBlciA9IGZhbHNlO1xuICAgICAgICBpZiAocGFyYW1zLnJlc2lzdGFuY2UpIHtcbiAgICAgICAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBzd2lwZXIubWF4VHJhbnNsYXRlKCkgKyAxIC0gKHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIGRhdGEuc3RhcnRUcmFuc2xhdGUgLSBkaWZmKSAqKiByZXNpc3RhbmNlUmF0aW87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRpc2FibGVQYXJlbnRTd2lwZXIpIHtcbiAgICAgIGUucHJldmVudGVkQnlOZXN0ZWRTd2lwZXIgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIERpcmVjdGlvbnMgbG9ja3NcbiAgICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlTmV4dCAmJiBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICduZXh0JyAmJiBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPCBkYXRhLnN0YXJ0VHJhbnNsYXRlKSB7XG4gICAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBkYXRhLnN0YXJ0VHJhbnNsYXRlO1xuICAgIH1cbiAgICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlUHJldiAmJiBzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICdwcmV2JyAmJiBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPiBkYXRhLnN0YXJ0VHJhbnNsYXRlKSB7XG4gICAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBkYXRhLnN0YXJ0VHJhbnNsYXRlO1xuICAgIH1cbiAgICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlUHJldiAmJiAhc3dpcGVyLmFsbG93U2xpZGVOZXh0KSB7XG4gICAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBkYXRhLnN0YXJ0VHJhbnNsYXRlO1xuICAgIH1cblxuICAgIC8vIFRocmVzaG9sZFxuICAgIGlmIChwYXJhbXMudGhyZXNob2xkID4gMCkge1xuICAgICAgaWYgKE1hdGguYWJzKGRpZmYpID4gcGFyYW1zLnRocmVzaG9sZCB8fCBkYXRhLmFsbG93VGhyZXNob2xkTW92ZSkge1xuICAgICAgICBpZiAoIWRhdGEuYWxsb3dUaHJlc2hvbGRNb3ZlKSB7XG4gICAgICAgICAgZGF0YS5hbGxvd1RocmVzaG9sZE1vdmUgPSB0cnVlO1xuICAgICAgICAgIHRvdWNoZXMuc3RhcnRYID0gdG91Y2hlcy5jdXJyZW50WDtcbiAgICAgICAgICB0b3VjaGVzLnN0YXJ0WSA9IHRvdWNoZXMuY3VycmVudFk7XG4gICAgICAgICAgZGF0YS5jdXJyZW50VHJhbnNsYXRlID0gZGF0YS5zdGFydFRyYW5zbGF0ZTtcbiAgICAgICAgICB0b3VjaGVzLmRpZmYgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyB0b3VjaGVzLmN1cnJlbnRYIC0gdG91Y2hlcy5zdGFydFggOiB0b3VjaGVzLmN1cnJlbnRZIC0gdG91Y2hlcy5zdGFydFk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLmN1cnJlbnRUcmFuc2xhdGUgPSBkYXRhLnN0YXJ0VHJhbnNsYXRlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghcGFyYW1zLmZvbGxvd0ZpbmdlciB8fCBwYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSBpbmRleCBpbiBmcmVlIG1vZGVcbiAgICBpZiAocGFyYW1zLmZyZWVNb2RlICYmIHBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmIHN3aXBlci5mcmVlTW9kZSB8fCBwYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcykge1xuICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLmZyZWVNb2RlICYmIHBhcmFtcy5mcmVlTW9kZS5lbmFibGVkICYmIHN3aXBlci5mcmVlTW9kZSkge1xuICAgICAgc3dpcGVyLmZyZWVNb2RlLm9uVG91Y2hNb3ZlKCk7XG4gICAgfVxuICAgIC8vIFVwZGF0ZSBwcm9ncmVzc1xuICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhkYXRhLmN1cnJlbnRUcmFuc2xhdGUpO1xuICAgIC8vIFVwZGF0ZSB0cmFuc2xhdGVcbiAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKGRhdGEuY3VycmVudFRyYW5zbGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoRW5kKGV2ZW50KSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCBkYXRhID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YTtcbiAgICBsZXQgZSA9IGV2ZW50O1xuICAgIGlmIChlLm9yaWdpbmFsRXZlbnQpIGUgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgbGV0IHRhcmdldFRvdWNoO1xuICAgIGNvbnN0IGlzVG91Y2hFdmVudCA9IGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCc7XG4gICAgaWYgKCFpc1RvdWNoRXZlbnQpIHtcbiAgICAgIGlmIChkYXRhLnRvdWNoSWQgIT09IG51bGwpIHJldHVybjsgLy8gcmV0dXJuIGZyb20gcG9pbnRlciBpZiB3ZSB1c2UgdG91Y2hcbiAgICAgIGlmIChlLnBvaW50ZXJJZCAhPT0gZGF0YS5wb2ludGVySWQpIHJldHVybjtcbiAgICAgIHRhcmdldFRvdWNoID0gZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0VG91Y2ggPSBbLi4uZS5jaGFuZ2VkVG91Y2hlc10uZmlsdGVyKHQgPT4gdC5pZGVudGlmaWVyID09PSBkYXRhLnRvdWNoSWQpWzBdO1xuICAgICAgaWYgKCF0YXJnZXRUb3VjaCB8fCB0YXJnZXRUb3VjaC5pZGVudGlmaWVyICE9PSBkYXRhLnRvdWNoSWQpIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFsncG9pbnRlcmNhbmNlbCcsICdwb2ludGVyb3V0JywgJ3BvaW50ZXJsZWF2ZScsICdjb250ZXh0bWVudSddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgIGNvbnN0IHByb2NlZWQgPSBbJ3BvaW50ZXJjYW5jZWwnLCAnY29udGV4dG1lbnUnXS5pbmNsdWRlcyhlLnR5cGUpICYmIChzd2lwZXIuYnJvd3Nlci5pc1NhZmFyaSB8fCBzd2lwZXIuYnJvd3Nlci5pc1dlYlZpZXcpO1xuICAgICAgaWYgKCFwcm9jZWVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgZGF0YS5wb2ludGVySWQgPSBudWxsO1xuICAgIGRhdGEudG91Y2hJZCA9IG51bGw7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgdG91Y2hlcyxcbiAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsLFxuICAgICAgc2xpZGVzR3JpZCxcbiAgICAgIGVuYWJsZWRcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmICghZW5hYmxlZCkgcmV0dXJuO1xuICAgIGlmICghcGFyYW1zLnNpbXVsYXRlVG91Y2ggJiYgZS5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJykgcmV0dXJuO1xuICAgIGlmIChkYXRhLmFsbG93VG91Y2hDYWxsYmFja3MpIHtcbiAgICAgIHN3aXBlci5lbWl0KCd0b3VjaEVuZCcsIGUpO1xuICAgIH1cbiAgICBkYXRhLmFsbG93VG91Y2hDYWxsYmFja3MgPSBmYWxzZTtcbiAgICBpZiAoIWRhdGEuaXNUb3VjaGVkKSB7XG4gICAgICBpZiAoZGF0YS5pc01vdmVkICYmIHBhcmFtcy5ncmFiQ3Vyc29yKSB7XG4gICAgICAgIHN3aXBlci5zZXRHcmFiQ3Vyc29yKGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGRhdGEuaXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgZGF0YS5zdGFydE1vdmluZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJldHVybiBHcmFiIEN1cnNvclxuICAgIGlmIChwYXJhbXMuZ3JhYkN1cnNvciAmJiBkYXRhLmlzTW92ZWQgJiYgZGF0YS5pc1RvdWNoZWQgJiYgKHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9PT0gdHJ1ZSB8fCBzd2lwZXIuYWxsb3dTbGlkZVByZXYgPT09IHRydWUpKSB7XG4gICAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcihmYWxzZSk7XG4gICAgfVxuXG4gICAgLy8gVGltZSBkaWZmXG4gICAgY29uc3QgdG91Y2hFbmRUaW1lID0gbm93KCk7XG4gICAgY29uc3QgdGltZURpZmYgPSB0b3VjaEVuZFRpbWUgLSBkYXRhLnRvdWNoU3RhcnRUaW1lO1xuXG4gICAgLy8gVGFwLCBkb3VibGVUYXAsIENsaWNrXG4gICAgaWYgKHN3aXBlci5hbGxvd0NsaWNrKSB7XG4gICAgICBjb25zdCBwYXRoVHJlZSA9IGUucGF0aCB8fCBlLmNvbXBvc2VkUGF0aCAmJiBlLmNvbXBvc2VkUGF0aCgpO1xuICAgICAgc3dpcGVyLnVwZGF0ZUNsaWNrZWRTbGlkZShwYXRoVHJlZSAmJiBwYXRoVHJlZVswXSB8fCBlLnRhcmdldCwgcGF0aFRyZWUpO1xuICAgICAgc3dpcGVyLmVtaXQoJ3RhcCBjbGljaycsIGUpO1xuICAgICAgaWYgKHRpbWVEaWZmIDwgMzAwICYmIHRvdWNoRW5kVGltZSAtIGRhdGEubGFzdENsaWNrVGltZSA8IDMwMCkge1xuICAgICAgICBzd2lwZXIuZW1pdCgnZG91YmxlVGFwIGRvdWJsZUNsaWNrJywgZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGRhdGEubGFzdENsaWNrVGltZSA9IG5vdygpO1xuICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLmRlc3Ryb3llZCkgc3dpcGVyLmFsbG93Q2xpY2sgPSB0cnVlO1xuICAgIH0pO1xuICAgIGlmICghZGF0YS5pc1RvdWNoZWQgfHwgIWRhdGEuaXNNb3ZlZCB8fCAhc3dpcGVyLnN3aXBlRGlyZWN0aW9uIHx8IHRvdWNoZXMuZGlmZiA9PT0gMCAmJiAhZGF0YS5sb29wU3dhcFJlc2V0IHx8IGRhdGEuY3VycmVudFRyYW5zbGF0ZSA9PT0gZGF0YS5zdGFydFRyYW5zbGF0ZSAmJiAhZGF0YS5sb29wU3dhcFJlc2V0KSB7XG4gICAgICBkYXRhLmlzVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgZGF0YS5pc01vdmVkID0gZmFsc2U7XG4gICAgICBkYXRhLnN0YXJ0TW92aW5nID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRhdGEuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgZGF0YS5pc01vdmVkID0gZmFsc2U7XG4gICAgZGF0YS5zdGFydE1vdmluZyA9IGZhbHNlO1xuICAgIGxldCBjdXJyZW50UG9zO1xuICAgIGlmIChwYXJhbXMuZm9sbG93RmluZ2VyKSB7XG4gICAgICBjdXJyZW50UG9zID0gcnRsID8gc3dpcGVyLnRyYW5zbGF0ZSA6IC1zd2lwZXIudHJhbnNsYXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50UG9zID0gLWRhdGEuY3VycmVudFRyYW5zbGF0ZTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwYXJhbXMuZnJlZU1vZGUgJiYgcGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQpIHtcbiAgICAgIHN3aXBlci5mcmVlTW9kZS5vblRvdWNoRW5kKHtcbiAgICAgICAgY3VycmVudFBvc1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRmluZCBjdXJyZW50IHNsaWRlXG4gICAgY29uc3Qgc3dpcGVUb0xhc3QgPSBjdXJyZW50UG9zID49IC1zd2lwZXIubWF4VHJhbnNsYXRlKCkgJiYgIXN3aXBlci5wYXJhbXMubG9vcDtcbiAgICBsZXQgc3RvcEluZGV4ID0gMDtcbiAgICBsZXQgZ3JvdXBTaXplID0gc3dpcGVyLnNsaWRlc1NpemVzR3JpZFswXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlc0dyaWQubGVuZ3RoOyBpICs9IGkgPCBwYXJhbXMuc2xpZGVzUGVyR3JvdXBTa2lwID8gMSA6IHBhcmFtcy5zbGlkZXNQZXJHcm91cCkge1xuICAgICAgY29uc3QgaW5jcmVtZW50ID0gaSA8IHBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAgLSAxID8gMSA6IHBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICAgIGlmICh0eXBlb2Ygc2xpZGVzR3JpZFtpICsgaW5jcmVtZW50XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHN3aXBlVG9MYXN0IHx8IGN1cnJlbnRQb3MgPj0gc2xpZGVzR3JpZFtpXSAmJiBjdXJyZW50UG9zIDwgc2xpZGVzR3JpZFtpICsgaW5jcmVtZW50XSkge1xuICAgICAgICAgIHN0b3BJbmRleCA9IGk7XG4gICAgICAgICAgZ3JvdXBTaXplID0gc2xpZGVzR3JpZFtpICsgaW5jcmVtZW50XSAtIHNsaWRlc0dyaWRbaV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3dpcGVUb0xhc3QgfHwgY3VycmVudFBvcyA+PSBzbGlkZXNHcmlkW2ldKSB7XG4gICAgICAgIHN0b3BJbmRleCA9IGk7XG4gICAgICAgIGdyb3VwU2l6ZSA9IHNsaWRlc0dyaWRbc2xpZGVzR3JpZC5sZW5ndGggLSAxXSAtIHNsaWRlc0dyaWRbc2xpZGVzR3JpZC5sZW5ndGggLSAyXTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJld2luZEZpcnN0SW5kZXggPSBudWxsO1xuICAgIGxldCByZXdpbmRMYXN0SW5kZXggPSBudWxsO1xuICAgIGlmIChwYXJhbXMucmV3aW5kKSB7XG4gICAgICBpZiAoc3dpcGVyLmlzQmVnaW5uaW5nKSB7XG4gICAgICAgIHJld2luZExhc3RJbmRleCA9IHBhcmFtcy52aXJ0dWFsICYmIHBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgc3dpcGVyLnZpcnR1YWwgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIC0gMSA6IHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMTtcbiAgICAgIH0gZWxzZSBpZiAoc3dpcGVyLmlzRW5kKSB7XG4gICAgICAgIHJld2luZEZpcnN0SW5kZXggPSAwO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBGaW5kIGN1cnJlbnQgc2xpZGUgc2l6ZVxuICAgIGNvbnN0IHJhdGlvID0gKGN1cnJlbnRQb3MgLSBzbGlkZXNHcmlkW3N0b3BJbmRleF0pIC8gZ3JvdXBTaXplO1xuICAgIGNvbnN0IGluY3JlbWVudCA9IHN0b3BJbmRleCA8IHBhcmFtcy5zbGlkZXNQZXJHcm91cFNraXAgLSAxID8gMSA6IHBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICBpZiAodGltZURpZmYgPiBwYXJhbXMubG9uZ1N3aXBlc01zKSB7XG4gICAgICAvLyBMb25nIHRvdWNoZXNcbiAgICAgIGlmICghcGFyYW1zLmxvbmdTd2lwZXMpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5zd2lwZURpcmVjdGlvbiA9PT0gJ25leHQnKSB7XG4gICAgICAgIGlmIChyYXRpbyA+PSBwYXJhbXMubG9uZ1N3aXBlc1JhdGlvKSBzd2lwZXIuc2xpZGVUbyhwYXJhbXMucmV3aW5kICYmIHN3aXBlci5pc0VuZCA/IHJld2luZEZpcnN0SW5kZXggOiBzdG9wSW5kZXggKyBpbmNyZW1lbnQpO2Vsc2Ugc3dpcGVyLnNsaWRlVG8oc3RvcEluZGV4KTtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICdwcmV2Jykge1xuICAgICAgICBpZiAocmF0aW8gPiAxIC0gcGFyYW1zLmxvbmdTd2lwZXNSYXRpbykge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHN0b3BJbmRleCArIGluY3JlbWVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmV3aW5kTGFzdEluZGV4ICE9PSBudWxsICYmIHJhdGlvIDwgMCAmJiBNYXRoLmFicyhyYXRpbykgPiBwYXJhbXMubG9uZ1N3aXBlc1JhdGlvKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8ocmV3aW5kTGFzdEluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzdG9wSW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNob3J0IHN3aXBlc1xuICAgICAgaWYgKCFwYXJhbXMuc2hvcnRTd2lwZXMpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNOYXZCdXR0b25UYXJnZXQgPSBzd2lwZXIubmF2aWdhdGlvbiAmJiAoZS50YXJnZXQgPT09IHN3aXBlci5uYXZpZ2F0aW9uLm5leHRFbCB8fCBlLnRhcmdldCA9PT0gc3dpcGVyLm5hdmlnYXRpb24ucHJldkVsKTtcbiAgICAgIGlmICghaXNOYXZCdXR0b25UYXJnZXQpIHtcbiAgICAgICAgaWYgKHN3aXBlci5zd2lwZURpcmVjdGlvbiA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlVG8ocmV3aW5kRmlyc3RJbmRleCAhPT0gbnVsbCA/IHJld2luZEZpcnN0SW5kZXggOiBzdG9wSW5kZXggKyBpbmNyZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzd2lwZXIuc3dpcGVEaXJlY3Rpb24gPT09ICdwcmV2Jykge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHJld2luZExhc3RJbmRleCAhPT0gbnVsbCA/IHJld2luZExhc3RJbmRleCA6IHN0b3BJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQgPT09IHN3aXBlci5uYXZpZ2F0aW9uLm5leHRFbCkge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhzdG9wSW5kZXggKyBpbmNyZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3RvcEluZGV4KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcmFtcyxcbiAgICAgIGVsXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoZWwgJiYgZWwub2Zmc2V0V2lkdGggPT09IDApIHJldHVybjtcblxuICAgIC8vIEJyZWFrcG9pbnRzXG4gICAgaWYgKHBhcmFtcy5icmVha3BvaW50cykge1xuICAgICAgc3dpcGVyLnNldEJyZWFrcG9pbnQoKTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIGxvY2tzXG4gICAgY29uc3Qge1xuICAgICAgYWxsb3dTbGlkZU5leHQsXG4gICAgICBhbGxvd1NsaWRlUHJldixcbiAgICAgIHNuYXBHcmlkXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBpc1ZpcnR1YWwgPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZDtcblxuICAgIC8vIERpc2FibGUgbG9ja3Mgb24gcmVzaXplXG4gICAgc3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gdHJ1ZTtcbiAgICBzd2lwZXIuYWxsb3dTbGlkZVByZXYgPSB0cnVlO1xuICAgIHN3aXBlci51cGRhdGVTaXplKCk7XG4gICAgc3dpcGVyLnVwZGF0ZVNsaWRlcygpO1xuICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgY29uc3QgaXNWaXJ0dWFsTG9vcCA9IGlzVmlydHVhbCAmJiBwYXJhbXMubG9vcDtcbiAgICBpZiAoKHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgfHwgcGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxKSAmJiBzd2lwZXIuaXNFbmQgJiYgIXN3aXBlci5pc0JlZ2lubmluZyAmJiAhc3dpcGVyLnBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiAhaXNWaXJ0dWFsTG9vcCkge1xuICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnNsaWRlcy5sZW5ndGggLSAxLCAwLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3AgJiYgIWlzVmlydHVhbCkge1xuICAgICAgICBzd2lwZXIuc2xpZGVUb0xvb3Aoc3dpcGVyLnJlYWxJbmRleCwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4LCAwLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzd2lwZXIuYXV0b3BsYXkgJiYgc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcgJiYgc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHN3aXBlci5hdXRvcGxheS5yZXNpemVUaW1lb3V0KTtcbiAgICAgIHN3aXBlci5hdXRvcGxheS5yZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChzd2lwZXIuYXV0b3BsYXkgJiYgc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcgJiYgc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCkge1xuICAgICAgICAgIHN3aXBlci5hdXRvcGxheS5yZXN1bWUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIGxvY2tzIGFmdGVyIHJlc2l6ZVxuICAgIHN3aXBlci5hbGxvd1NsaWRlUHJldiA9IGFsbG93U2xpZGVQcmV2O1xuICAgIHN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IGFsbG93U2xpZGVOZXh0O1xuICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc25hcEdyaWQgIT09IHN3aXBlci5zbmFwR3JpZCkge1xuICAgICAgc3dpcGVyLmNoZWNrT3ZlcmZsb3coKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHJldHVybjtcbiAgICBpZiAoIXN3aXBlci5hbGxvd0NsaWNrKSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5wcmV2ZW50Q2xpY2tzKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5wcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb24gJiYgc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgd3JhcHBlckVsLFxuICAgICAgcnRsVHJhbnNsYXRlLFxuICAgICAgZW5hYmxlZFxuICAgIH0gPSBzd2lwZXI7XG4gICAgaWYgKCFlbmFibGVkKSByZXR1cm47XG4gICAgc3dpcGVyLnByZXZpb3VzVHJhbnNsYXRlID0gc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICBzd2lwZXIudHJhbnNsYXRlID0gLXdyYXBwZXJFbC5zY3JvbGxMZWZ0O1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2lwZXIudHJhbnNsYXRlID0gLXdyYXBwZXJFbC5zY3JvbGxUb3A7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIGlmIChzd2lwZXIudHJhbnNsYXRlID09PSAwKSBzd2lwZXIudHJhbnNsYXRlID0gMDtcbiAgICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoKTtcbiAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIGxldCBuZXdQcm9ncmVzcztcbiAgICBjb25zdCB0cmFuc2xhdGVzRGlmZiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICBpZiAodHJhbnNsYXRlc0RpZmYgPT09IDApIHtcbiAgICAgIG5ld1Byb2dyZXNzID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3UHJvZ3Jlc3MgPSAoc3dpcGVyLnRyYW5zbGF0ZSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKSkgLyB0cmFuc2xhdGVzRGlmZjtcbiAgICB9XG4gICAgaWYgKG5ld1Byb2dyZXNzICE9PSBzd2lwZXIucHJvZ3Jlc3MpIHtcbiAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhydGxUcmFuc2xhdGUgPyAtc3dpcGVyLnRyYW5zbGF0ZSA6IHN3aXBlci50cmFuc2xhdGUpO1xuICAgIH1cbiAgICBzd2lwZXIuZW1pdCgnc2V0VHJhbnNsYXRlJywgc3dpcGVyLnRyYW5zbGF0ZSwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Mb2FkKGUpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIHByb2Nlc3NMYXp5UHJlbG9hZGVyKHN3aXBlciwgZS50YXJnZXQpO1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUgfHwgc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ICE9PSAnYXV0bycgJiYgIXN3aXBlci5wYXJhbXMuYXV0b0hlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2lwZXIudXBkYXRlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRvY3VtZW50VG91Y2hTdGFydCgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGlmIChzd2lwZXIuZG9jdW1lbnRUb3VjaEhhbmRsZXJQcm9jZWVkZWQpIHJldHVybjtcbiAgICBzd2lwZXIuZG9jdW1lbnRUb3VjaEhhbmRsZXJQcm9jZWVkZWQgPSB0cnVlO1xuICAgIGlmIChzd2lwZXIucGFyYW1zLnRvdWNoUmVsZWFzZU9uRWRnZXMpIHtcbiAgICAgIHN3aXBlci5lbC5zdHlsZS50b3VjaEFjdGlvbiA9ICdhdXRvJztcbiAgICB9XG4gIH1cblxuICBjb25zdCBldmVudHMgPSAoc3dpcGVyLCBtZXRob2QpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgZWwsXG4gICAgICB3cmFwcGVyRWwsXG4gICAgICBkZXZpY2VcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IGNhcHR1cmUgPSAhIXBhcmFtcy5uZXN0ZWQ7XG4gICAgY29uc3QgZG9tTWV0aG9kID0gbWV0aG9kID09PSAnb24nID8gJ2FkZEV2ZW50TGlzdGVuZXInIDogJ3JlbW92ZUV2ZW50TGlzdGVuZXInO1xuICAgIGNvbnN0IHN3aXBlck1ldGhvZCA9IG1ldGhvZDtcbiAgICBpZiAoIWVsIHx8IHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHJldHVybjtcblxuICAgIC8vIFRvdWNoIEV2ZW50c1xuICAgIGRvY3VtZW50W2RvbU1ldGhvZF0oJ3RvdWNoc3RhcnQnLCBzd2lwZXIub25Eb2N1bWVudFRvdWNoU3RhcnQsIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgY2FwdHVyZVxuICAgIH0pO1xuICAgIGVsW2RvbU1ldGhvZF0oJ3RvdWNoc3RhcnQnLCBzd2lwZXIub25Ub3VjaFN0YXJ0LCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIGVsW2RvbU1ldGhvZF0oJ3BvaW50ZXJkb3duJywgc3dpcGVyLm9uVG91Y2hTdGFydCwge1xuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKCd0b3VjaG1vdmUnLCBzd2lwZXIub25Ub3VjaE1vdmUsIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgY2FwdHVyZVxuICAgIH0pO1xuICAgIGRvY3VtZW50W2RvbU1ldGhvZF0oJ3BvaW50ZXJtb3ZlJywgc3dpcGVyLm9uVG91Y2hNb3ZlLCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZSxcbiAgICAgIGNhcHR1cmVcbiAgICB9KTtcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKCd0b3VjaGVuZCcsIHN3aXBlci5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgncG9pbnRlcnVwJywgc3dpcGVyLm9uVG91Y2hFbmQsIHtcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKCdwb2ludGVyY2FuY2VsJywgc3dpcGVyLm9uVG91Y2hFbmQsIHtcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKCd0b3VjaGNhbmNlbCcsIHN3aXBlci5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgncG9pbnRlcm91dCcsIHN3aXBlci5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gICAgZG9jdW1lbnRbZG9tTWV0aG9kXSgncG9pbnRlcmxlYXZlJywgc3dpcGVyLm9uVG91Y2hFbmQsIHtcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgICBkb2N1bWVudFtkb21NZXRob2RdKCdjb250ZXh0bWVudScsIHN3aXBlci5vblRvdWNoRW5kLCB7XG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG5cbiAgICAvLyBQcmV2ZW50IExpbmtzIENsaWNrc1xuICAgIGlmIChwYXJhbXMucHJldmVudENsaWNrcyB8fCBwYXJhbXMucHJldmVudENsaWNrc1Byb3BhZ2F0aW9uKSB7XG4gICAgICBlbFtkb21NZXRob2RdKCdjbGljaycsIHN3aXBlci5vbkNsaWNrLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICB3cmFwcGVyRWxbZG9tTWV0aG9kXSgnc2Nyb2xsJywgc3dpcGVyLm9uU2Nyb2xsKTtcbiAgICB9XG5cbiAgICAvLyBSZXNpemUgaGFuZGxlclxuICAgIGlmIChwYXJhbXMudXBkYXRlT25XaW5kb3dSZXNpemUpIHtcbiAgICAgIHN3aXBlcltzd2lwZXJNZXRob2RdKGRldmljZS5pb3MgfHwgZGV2aWNlLmFuZHJvaWQgPyAncmVzaXplIG9yaWVudGF0aW9uY2hhbmdlIG9ic2VydmVyVXBkYXRlJyA6ICdyZXNpemUgb2JzZXJ2ZXJVcGRhdGUnLCBvblJlc2l6ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlcltzd2lwZXJNZXRob2RdKCdvYnNlcnZlclVwZGF0ZScsIG9uUmVzaXplLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBJbWFnZXMgbG9hZGVyXG4gICAgZWxbZG9tTWV0aG9kXSgnbG9hZCcsIHN3aXBlci5vbkxvYWQsIHtcbiAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9KTtcbiAgfTtcbiAgZnVuY3Rpb24gYXR0YWNoRXZlbnRzKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zXG4gICAgfSA9IHN3aXBlcjtcbiAgICBzd2lwZXIub25Ub3VjaFN0YXJ0ID0gb25Ub3VjaFN0YXJ0LmJpbmQoc3dpcGVyKTtcbiAgICBzd2lwZXIub25Ub3VjaE1vdmUgPSBvblRvdWNoTW92ZS5iaW5kKHN3aXBlcik7XG4gICAgc3dpcGVyLm9uVG91Y2hFbmQgPSBvblRvdWNoRW5kLmJpbmQoc3dpcGVyKTtcbiAgICBzd2lwZXIub25Eb2N1bWVudFRvdWNoU3RhcnQgPSBvbkRvY3VtZW50VG91Y2hTdGFydC5iaW5kKHN3aXBlcik7XG4gICAgaWYgKHBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICBzd2lwZXIub25TY3JvbGwgPSBvblNjcm9sbC5iaW5kKHN3aXBlcik7XG4gICAgfVxuICAgIHN3aXBlci5vbkNsaWNrID0gb25DbGljay5iaW5kKHN3aXBlcik7XG4gICAgc3dpcGVyLm9uTG9hZCA9IG9uTG9hZC5iaW5kKHN3aXBlcik7XG4gICAgZXZlbnRzKHN3aXBlciwgJ29uJyk7XG4gIH1cbiAgZnVuY3Rpb24gZGV0YWNoRXZlbnRzKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgZXZlbnRzKHN3aXBlciwgJ29mZicpO1xuICB9XG4gIHZhciBldmVudHMkMSA9IHtcbiAgICBhdHRhY2hFdmVudHMsXG4gICAgZGV0YWNoRXZlbnRzXG4gIH07XG5cbiAgY29uc3QgaXNHcmlkRW5hYmxlZCA9IChzd2lwZXIsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBzd2lwZXIuZ3JpZCAmJiBwYXJhbXMuZ3JpZCAmJiBwYXJhbXMuZ3JpZC5yb3dzID4gMTtcbiAgfTtcbiAgZnVuY3Rpb24gc2V0QnJlYWtwb2ludCgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIHJlYWxJbmRleCxcbiAgICAgIGluaXRpYWxpemVkLFxuICAgICAgcGFyYW1zLFxuICAgICAgZWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IGJyZWFrcG9pbnRzID0gcGFyYW1zLmJyZWFrcG9pbnRzO1xuICAgIGlmICghYnJlYWtwb2ludHMgfHwgYnJlYWtwb2ludHMgJiYgT2JqZWN0LmtleXMoYnJlYWtwb2ludHMpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gR2V0IGJyZWFrcG9pbnQgZm9yIHdpbmRvdyB3aWR0aCBhbmQgdXBkYXRlIHBhcmFtZXRlcnNcbiAgICBjb25zdCBicmVha3BvaW50ID0gc3dpcGVyLmdldEJyZWFrcG9pbnQoYnJlYWtwb2ludHMsIHN3aXBlci5wYXJhbXMuYnJlYWtwb2ludHNCYXNlLCBzd2lwZXIuZWwpO1xuICAgIGlmICghYnJlYWtwb2ludCB8fCBzd2lwZXIuY3VycmVudEJyZWFrcG9pbnQgPT09IGJyZWFrcG9pbnQpIHJldHVybjtcbiAgICBjb25zdCBicmVha3BvaW50T25seVBhcmFtcyA9IGJyZWFrcG9pbnQgaW4gYnJlYWtwb2ludHMgPyBicmVha3BvaW50c1ticmVha3BvaW50XSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBicmVha3BvaW50UGFyYW1zID0gYnJlYWtwb2ludE9ubHlQYXJhbXMgfHwgc3dpcGVyLm9yaWdpbmFsUGFyYW1zO1xuICAgIGNvbnN0IHdhc011bHRpUm93ID0gaXNHcmlkRW5hYmxlZChzd2lwZXIsIHBhcmFtcyk7XG4gICAgY29uc3QgaXNNdWx0aVJvdyA9IGlzR3JpZEVuYWJsZWQoc3dpcGVyLCBicmVha3BvaW50UGFyYW1zKTtcbiAgICBjb25zdCB3YXNHcmFiQ3Vyc29yID0gc3dpcGVyLnBhcmFtcy5ncmFiQ3Vyc29yO1xuICAgIGNvbnN0IGlzR3JhYkN1cnNvciA9IGJyZWFrcG9pbnRQYXJhbXMuZ3JhYkN1cnNvcjtcbiAgICBjb25zdCB3YXNFbmFibGVkID0gcGFyYW1zLmVuYWJsZWQ7XG4gICAgaWYgKHdhc011bHRpUm93ICYmICFpc011bHRpUm93KSB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGAke3BhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfWdyaWRgLCBgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkLWNvbHVtbmApO1xuICAgICAgc3dpcGVyLmVtaXRDb250YWluZXJDbGFzc2VzKCk7XG4gICAgfSBlbHNlIGlmICghd2FzTXVsdGlSb3cgJiYgaXNNdWx0aVJvdykge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkYCk7XG4gICAgICBpZiAoYnJlYWtwb2ludFBhcmFtcy5ncmlkLmZpbGwgJiYgYnJlYWtwb2ludFBhcmFtcy5ncmlkLmZpbGwgPT09ICdjb2x1bW4nIHx8ICFicmVha3BvaW50UGFyYW1zLmdyaWQuZmlsbCAmJiBwYXJhbXMuZ3JpZC5maWxsID09PSAnY29sdW1uJykge1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGAke3BhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfWdyaWQtY29sdW1uYCk7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdENvbnRhaW5lckNsYXNzZXMoKTtcbiAgICB9XG4gICAgaWYgKHdhc0dyYWJDdXJzb3IgJiYgIWlzR3JhYkN1cnNvcikge1xuICAgICAgc3dpcGVyLnVuc2V0R3JhYkN1cnNvcigpO1xuICAgIH0gZWxzZSBpZiAoIXdhc0dyYWJDdXJzb3IgJiYgaXNHcmFiQ3Vyc29yKSB7XG4gICAgICBzd2lwZXIuc2V0R3JhYkN1cnNvcigpO1xuICAgIH1cblxuICAgIC8vIFRvZ2dsZSBuYXZpZ2F0aW9uLCBwYWdpbmF0aW9uLCBzY3JvbGxiYXJcbiAgICBbJ25hdmlnYXRpb24nLCAncGFnaW5hdGlvbicsICdzY3JvbGxiYXInXS5mb3JFYWNoKHByb3AgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBicmVha3BvaW50UGFyYW1zW3Byb3BdID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgICAgY29uc3Qgd2FzTW9kdWxlRW5hYmxlZCA9IHBhcmFtc1twcm9wXSAmJiBwYXJhbXNbcHJvcF0uZW5hYmxlZDtcbiAgICAgIGNvbnN0IGlzTW9kdWxlRW5hYmxlZCA9IGJyZWFrcG9pbnRQYXJhbXNbcHJvcF0gJiYgYnJlYWtwb2ludFBhcmFtc1twcm9wXS5lbmFibGVkO1xuICAgICAgaWYgKHdhc01vZHVsZUVuYWJsZWQgJiYgIWlzTW9kdWxlRW5hYmxlZCkge1xuICAgICAgICBzd2lwZXJbcHJvcF0uZGlzYWJsZSgpO1xuICAgICAgfVxuICAgICAgaWYgKCF3YXNNb2R1bGVFbmFibGVkICYmIGlzTW9kdWxlRW5hYmxlZCkge1xuICAgICAgICBzd2lwZXJbcHJvcF0uZW5hYmxlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgZGlyZWN0aW9uQ2hhbmdlZCA9IGJyZWFrcG9pbnRQYXJhbXMuZGlyZWN0aW9uICYmIGJyZWFrcG9pbnRQYXJhbXMuZGlyZWN0aW9uICE9PSBwYXJhbXMuZGlyZWN0aW9uO1xuICAgIGNvbnN0IG5lZWRzUmVMb29wID0gcGFyYW1zLmxvb3AgJiYgKGJyZWFrcG9pbnRQYXJhbXMuc2xpZGVzUGVyVmlldyAhPT0gcGFyYW1zLnNsaWRlc1BlclZpZXcgfHwgZGlyZWN0aW9uQ2hhbmdlZCk7XG4gICAgY29uc3Qgd2FzTG9vcCA9IHBhcmFtcy5sb29wO1xuICAgIGlmIChkaXJlY3Rpb25DaGFuZ2VkICYmIGluaXRpYWxpemVkKSB7XG4gICAgICBzd2lwZXIuY2hhbmdlRGlyZWN0aW9uKCk7XG4gICAgfVxuICAgIGV4dGVuZCQxKHN3aXBlci5wYXJhbXMsIGJyZWFrcG9pbnRQYXJhbXMpO1xuICAgIGNvbnN0IGlzRW5hYmxlZCA9IHN3aXBlci5wYXJhbXMuZW5hYmxlZDtcbiAgICBjb25zdCBoYXNMb29wID0gc3dpcGVyLnBhcmFtcy5sb29wO1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgICBhbGxvd1RvdWNoTW92ZTogc3dpcGVyLnBhcmFtcy5hbGxvd1RvdWNoTW92ZSxcbiAgICAgIGFsbG93U2xpZGVOZXh0OiBzd2lwZXIucGFyYW1zLmFsbG93U2xpZGVOZXh0LFxuICAgICAgYWxsb3dTbGlkZVByZXY6IHN3aXBlci5wYXJhbXMuYWxsb3dTbGlkZVByZXZcbiAgICB9KTtcbiAgICBpZiAod2FzRW5hYmxlZCAmJiAhaXNFbmFibGVkKSB7XG4gICAgICBzd2lwZXIuZGlzYWJsZSgpO1xuICAgIH0gZWxzZSBpZiAoIXdhc0VuYWJsZWQgJiYgaXNFbmFibGVkKSB7XG4gICAgICBzd2lwZXIuZW5hYmxlKCk7XG4gICAgfVxuICAgIHN3aXBlci5jdXJyZW50QnJlYWtwb2ludCA9IGJyZWFrcG9pbnQ7XG4gICAgc3dpcGVyLmVtaXQoJ19iZWZvcmVCcmVha3BvaW50JywgYnJlYWtwb2ludFBhcmFtcyk7XG4gICAgaWYgKGluaXRpYWxpemVkKSB7XG4gICAgICBpZiAobmVlZHNSZUxvb3ApIHtcbiAgICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgICAgIHN3aXBlci5sb29wQ3JlYXRlKHJlYWxJbmRleCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoIXdhc0xvb3AgJiYgaGFzTG9vcCkge1xuICAgICAgICBzd2lwZXIubG9vcENyZWF0ZShyZWFsSW5kZXgpO1xuICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzKCk7XG4gICAgICB9IGVsc2UgaWYgKHdhc0xvb3AgJiYgIWhhc0xvb3ApIHtcbiAgICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXBlci5lbWl0KCdicmVha3BvaW50JywgYnJlYWtwb2ludFBhcmFtcyk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRCcmVha3BvaW50KGJyZWFrcG9pbnRzLCBiYXNlLCBjb250YWluZXJFbCkge1xuICAgIGlmIChiYXNlID09PSB2b2lkIDApIHtcbiAgICAgIGJhc2UgPSAnd2luZG93JztcbiAgICB9XG4gICAgaWYgKCFicmVha3BvaW50cyB8fCBiYXNlID09PSAnY29udGFpbmVyJyAmJiAhY29udGFpbmVyRWwpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgbGV0IGJyZWFrcG9pbnQgPSBmYWxzZTtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBjb25zdCBjdXJyZW50SGVpZ2h0ID0gYmFzZSA9PT0gJ3dpbmRvdycgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiBjb250YWluZXJFbC5jbGllbnRIZWlnaHQ7XG4gICAgY29uc3QgcG9pbnRzID0gT2JqZWN0LmtleXMoYnJlYWtwb2ludHMpLm1hcChwb2ludCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHBvaW50ID09PSAnc3RyaW5nJyAmJiBwb2ludC5pbmRleE9mKCdAJykgPT09IDApIHtcbiAgICAgICAgY29uc3QgbWluUmF0aW8gPSBwYXJzZUZsb2F0KHBvaW50LnN1YnN0cigxKSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gY3VycmVudEhlaWdodCAqIG1pblJhdGlvO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIHBvaW50XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcG9pbnQsXG4gICAgICAgIHBvaW50XG4gICAgICB9O1xuICAgIH0pO1xuICAgIHBvaW50cy5zb3J0KChhLCBiKSA9PiBwYXJzZUludChhLnZhbHVlLCAxMCkgLSBwYXJzZUludChiLnZhbHVlLCAxMCkpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBvaW50LFxuICAgICAgICB2YWx1ZVxuICAgICAgfSA9IHBvaW50c1tpXTtcbiAgICAgIGlmIChiYXNlID09PSAnd2luZG93Jykge1xuICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoYChtaW4td2lkdGg6ICR7dmFsdWV9cHgpYCkubWF0Y2hlcykge1xuICAgICAgICAgIGJyZWFrcG9pbnQgPSBwb2ludDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8PSBjb250YWluZXJFbC5jbGllbnRXaWR0aCkge1xuICAgICAgICBicmVha3BvaW50ID0gcG9pbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBicmVha3BvaW50IHx8ICdtYXgnO1xuICB9XG5cbiAgdmFyIGJyZWFrcG9pbnRzID0ge1xuICAgIHNldEJyZWFrcG9pbnQsXG4gICAgZ2V0QnJlYWtwb2ludFxuICB9O1xuXG4gIGZ1bmN0aW9uIHByZXBhcmVDbGFzc2VzKGVudHJpZXMsIHByZWZpeCkge1xuICAgIGNvbnN0IHJlc3VsdENsYXNzZXMgPSBbXTtcbiAgICBlbnRyaWVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGl0ZW0pLmZvckVhY2goY2xhc3NOYW1lcyA9PiB7XG4gICAgICAgICAgaWYgKGl0ZW1bY2xhc3NOYW1lc10pIHtcbiAgICAgICAgICAgIHJlc3VsdENsYXNzZXMucHVzaChwcmVmaXggKyBjbGFzc05hbWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmVzdWx0Q2xhc3Nlcy5wdXNoKHByZWZpeCArIGl0ZW0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRDbGFzc2VzO1xuICB9XG4gIGZ1bmN0aW9uIGFkZENsYXNzZXMoKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBjbGFzc05hbWVzLFxuICAgICAgcGFyYW1zLFxuICAgICAgcnRsLFxuICAgICAgZWwsXG4gICAgICBkZXZpY2VcbiAgICB9ID0gc3dpcGVyO1xuICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgIGNvbnN0IHN1ZmZpeGVzID0gcHJlcGFyZUNsYXNzZXMoWydpbml0aWFsaXplZCcsIHBhcmFtcy5kaXJlY3Rpb24sIHtcbiAgICAgICdmcmVlLW1vZGUnOiBzd2lwZXIucGFyYW1zLmZyZWVNb2RlICYmIHBhcmFtcy5mcmVlTW9kZS5lbmFibGVkXG4gICAgfSwge1xuICAgICAgJ2F1dG9oZWlnaHQnOiBwYXJhbXMuYXV0b0hlaWdodFxuICAgIH0sIHtcbiAgICAgICdydGwnOiBydGxcbiAgICB9LCB7XG4gICAgICAnZ3JpZCc6IHBhcmFtcy5ncmlkICYmIHBhcmFtcy5ncmlkLnJvd3MgPiAxXG4gICAgfSwge1xuICAgICAgJ2dyaWQtY29sdW1uJzogcGFyYW1zLmdyaWQgJiYgcGFyYW1zLmdyaWQucm93cyA+IDEgJiYgcGFyYW1zLmdyaWQuZmlsbCA9PT0gJ2NvbHVtbidcbiAgICB9LCB7XG4gICAgICAnYW5kcm9pZCc6IGRldmljZS5hbmRyb2lkXG4gICAgfSwge1xuICAgICAgJ2lvcyc6IGRldmljZS5pb3NcbiAgICB9LCB7XG4gICAgICAnY3NzLW1vZGUnOiBwYXJhbXMuY3NzTW9kZVxuICAgIH0sIHtcbiAgICAgICdjZW50ZXJlZCc6IHBhcmFtcy5jc3NNb2RlICYmIHBhcmFtcy5jZW50ZXJlZFNsaWRlc1xuICAgIH0sIHtcbiAgICAgICd3YXRjaC1wcm9ncmVzcyc6IHBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzXG4gICAgfV0sIHBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzKTtcbiAgICBjbGFzc05hbWVzLnB1c2goLi4uc3VmZml4ZXMpO1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7XG4gICAgc3dpcGVyLmVtaXRDb250YWluZXJDbGFzc2VzKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVDbGFzc2VzKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgZWwsXG4gICAgICBjbGFzc05hbWVzXG4gICAgfSA9IHN3aXBlcjtcbiAgICBpZiAoIWVsIHx8IHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHJldHVybjtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZXMpO1xuICAgIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICB9XG5cbiAgdmFyIGNsYXNzZXMgPSB7XG4gICAgYWRkQ2xhc3NlcyxcbiAgICByZW1vdmVDbGFzc2VzXG4gIH07XG5cbiAgZnVuY3Rpb24gY2hlY2tPdmVyZmxvdygpIHtcbiAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgIGNvbnN0IHtcbiAgICAgIGlzTG9ja2VkOiB3YXNMb2NrZWQsXG4gICAgICBwYXJhbXNcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IHtcbiAgICAgIHNsaWRlc09mZnNldEJlZm9yZVxuICAgIH0gPSBwYXJhbXM7XG4gICAgaWYgKHNsaWRlc09mZnNldEJlZm9yZSkge1xuICAgICAgY29uc3QgbGFzdFNsaWRlSW5kZXggPSBzd2lwZXIuc2xpZGVzLmxlbmd0aCAtIDE7XG4gICAgICBjb25zdCBsYXN0U2xpZGVSaWdodEVkZ2UgPSBzd2lwZXIuc2xpZGVzR3JpZFtsYXN0U2xpZGVJbmRleF0gKyBzd2lwZXIuc2xpZGVzU2l6ZXNHcmlkW2xhc3RTbGlkZUluZGV4XSArIHNsaWRlc09mZnNldEJlZm9yZSAqIDI7XG4gICAgICBzd2lwZXIuaXNMb2NrZWQgPSBzd2lwZXIuc2l6ZSA+IGxhc3RTbGlkZVJpZ2h0RWRnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVyLmlzTG9ja2VkID0gc3dpcGVyLnNuYXBHcmlkLmxlbmd0aCA9PT0gMTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5hbGxvd1NsaWRlTmV4dCA9PT0gdHJ1ZSkge1xuICAgICAgc3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gIXN3aXBlci5pc0xvY2tlZDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5hbGxvd1NsaWRlUHJldiA9PT0gdHJ1ZSkge1xuICAgICAgc3dpcGVyLmFsbG93U2xpZGVQcmV2ID0gIXN3aXBlci5pc0xvY2tlZDtcbiAgICB9XG4gICAgaWYgKHdhc0xvY2tlZCAmJiB3YXNMb2NrZWQgIT09IHN3aXBlci5pc0xvY2tlZCkge1xuICAgICAgc3dpcGVyLmlzRW5kID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh3YXNMb2NrZWQgIT09IHN3aXBlci5pc0xvY2tlZCkge1xuICAgICAgc3dpcGVyLmVtaXQoc3dpcGVyLmlzTG9ja2VkID8gJ2xvY2snIDogJ3VubG9jaycpO1xuICAgIH1cbiAgfVxuICB2YXIgY2hlY2tPdmVyZmxvdyQxID0ge1xuICAgIGNoZWNrT3ZlcmZsb3dcbiAgfTtcblxuICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgaW5pdDogdHJ1ZSxcbiAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICBvbmVXYXlNb3ZlbWVudDogZmFsc2UsXG4gICAgc3dpcGVyRWxlbWVudE5vZGVOYW1lOiAnU1dJUEVSLUNPTlRBSU5FUicsXG4gICAgdG91Y2hFdmVudHNUYXJnZXQ6ICd3cmFwcGVyJyxcbiAgICBpbml0aWFsU2xpZGU6IDAsXG4gICAgc3BlZWQ6IDMwMCxcbiAgICBjc3NNb2RlOiBmYWxzZSxcbiAgICB1cGRhdGVPbldpbmRvd1Jlc2l6ZTogdHJ1ZSxcbiAgICByZXNpemVPYnNlcnZlcjogdHJ1ZSxcbiAgICBuZXN0ZWQ6IGZhbHNlLFxuICAgIGNyZWF0ZUVsZW1lbnRzOiBmYWxzZSxcbiAgICBldmVudHNQcmVmaXg6ICdzd2lwZXInLFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgZm9jdXNhYmxlRWxlbWVudHM6ICdpbnB1dCwgc2VsZWN0LCBvcHRpb24sIHRleHRhcmVhLCBidXR0b24sIHZpZGVvLCBsYWJlbCcsXG4gICAgLy8gT3ZlcnJpZGVzXG4gICAgd2lkdGg6IG51bGwsXG4gICAgaGVpZ2h0OiBudWxsLFxuICAgIC8vXG4gICAgcHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uOiBmYWxzZSxcbiAgICAvLyBzc3JcbiAgICB1c2VyQWdlbnQ6IG51bGwsXG4gICAgdXJsOiBudWxsLFxuICAgIC8vIFRvIHN1cHBvcnQgaU9TJ3Mgc3dpcGUtdG8tZ28tYmFjayBnZXN0dXJlICh3aGVuIGJlaW5nIHVzZWQgaW4tYXBwKS5cbiAgICBlZGdlU3dpcGVEZXRlY3Rpb246IGZhbHNlLFxuICAgIGVkZ2VTd2lwZVRocmVzaG9sZDogMjAsXG4gICAgLy8gQXV0b2hlaWdodFxuICAgIGF1dG9IZWlnaHQ6IGZhbHNlLFxuICAgIC8vIFNldCB3cmFwcGVyIHdpZHRoXG4gICAgc2V0V3JhcHBlclNpemU6IGZhbHNlLFxuICAgIC8vIFZpcnR1YWwgVHJhbnNsYXRlXG4gICAgdmlydHVhbFRyYW5zbGF0ZTogZmFsc2UsXG4gICAgLy8gRWZmZWN0c1xuICAgIGVmZmVjdDogJ3NsaWRlJyxcbiAgICAvLyAnc2xpZGUnIG9yICdmYWRlJyBvciAnY3ViZScgb3IgJ2NvdmVyZmxvdycgb3IgJ2ZsaXAnXG5cbiAgICAvLyBCcmVha3BvaW50c1xuICAgIGJyZWFrcG9pbnRzOiB1bmRlZmluZWQsXG4gICAgYnJlYWtwb2ludHNCYXNlOiAnd2luZG93JyxcbiAgICAvLyBTbGlkZXMgZ3JpZFxuICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgIHNsaWRlc1Blckdyb3VwU2tpcDogMCxcbiAgICBzbGlkZXNQZXJHcm91cEF1dG86IGZhbHNlLFxuICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcbiAgICBjZW50ZXJlZFNsaWRlc0JvdW5kczogZmFsc2UsXG4gICAgc2xpZGVzT2Zmc2V0QmVmb3JlOiAwLFxuICAgIC8vIGluIHB4XG4gICAgc2xpZGVzT2Zmc2V0QWZ0ZXI6IDAsXG4gICAgLy8gaW4gcHhcbiAgICBub3JtYWxpemVTbGlkZUluZGV4OiB0cnVlLFxuICAgIGNlbnRlckluc3VmZmljaWVudFNsaWRlczogZmFsc2UsXG4gICAgLy8gRGlzYWJsZSBzd2lwZXIgYW5kIGhpZGUgbmF2aWdhdGlvbiB3aGVuIGNvbnRhaW5lciBub3Qgb3ZlcmZsb3dcbiAgICB3YXRjaE92ZXJmbG93OiB0cnVlLFxuICAgIC8vIFJvdW5kIGxlbmd0aFxuICAgIHJvdW5kTGVuZ3RoczogZmFsc2UsXG4gICAgLy8gVG91Y2hlc1xuICAgIHRvdWNoUmF0aW86IDEsXG4gICAgdG91Y2hBbmdsZTogNDUsXG4gICAgc2ltdWxhdGVUb3VjaDogdHJ1ZSxcbiAgICBzaG9ydFN3aXBlczogdHJ1ZSxcbiAgICBsb25nU3dpcGVzOiB0cnVlLFxuICAgIGxvbmdTd2lwZXNSYXRpbzogMC41LFxuICAgIGxvbmdTd2lwZXNNczogMzAwLFxuICAgIGZvbGxvd0ZpbmdlcjogdHJ1ZSxcbiAgICBhbGxvd1RvdWNoTW92ZTogdHJ1ZSxcbiAgICB0aHJlc2hvbGQ6IDUsXG4gICAgdG91Y2hNb3ZlU3RvcFByb3BhZ2F0aW9uOiBmYWxzZSxcbiAgICB0b3VjaFN0YXJ0UHJldmVudERlZmF1bHQ6IHRydWUsXG4gICAgdG91Y2hTdGFydEZvcmNlUHJldmVudERlZmF1bHQ6IGZhbHNlLFxuICAgIHRvdWNoUmVsZWFzZU9uRWRnZXM6IGZhbHNlLFxuICAgIC8vIFVuaXF1ZSBOYXZpZ2F0aW9uIEVsZW1lbnRzXG4gICAgdW5pcXVlTmF2RWxlbWVudHM6IHRydWUsXG4gICAgLy8gUmVzaXN0YW5jZVxuICAgIHJlc2lzdGFuY2U6IHRydWUsXG4gICAgcmVzaXN0YW5jZVJhdGlvOiAwLjg1LFxuICAgIC8vIFByb2dyZXNzXG4gICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogZmFsc2UsXG4gICAgLy8gQ3Vyc29yXG4gICAgZ3JhYkN1cnNvcjogZmFsc2UsXG4gICAgLy8gQ2xpY2tzXG4gICAgcHJldmVudENsaWNrczogdHJ1ZSxcbiAgICBwcmV2ZW50Q2xpY2tzUHJvcGFnYXRpb246IHRydWUsXG4gICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogZmFsc2UsXG4gICAgLy8gbG9vcFxuICAgIGxvb3A6IGZhbHNlLFxuICAgIGxvb3BBZGRCbGFua1NsaWRlczogdHJ1ZSxcbiAgICBsb29wQWRkaXRpb25hbFNsaWRlczogMCxcbiAgICBsb29wUHJldmVudHNTbGlkaW5nOiB0cnVlLFxuICAgIC8vIHJld2luZFxuICAgIHJld2luZDogZmFsc2UsXG4gICAgLy8gU3dpcGluZy9ubyBzd2lwaW5nXG4gICAgYWxsb3dTbGlkZVByZXY6IHRydWUsXG4gICAgYWxsb3dTbGlkZU5leHQ6IHRydWUsXG4gICAgc3dpcGVIYW5kbGVyOiBudWxsLFxuICAgIC8vICcuc3dpcGUtaGFuZGxlcicsXG4gICAgbm9Td2lwaW5nOiB0cnVlLFxuICAgIG5vU3dpcGluZ0NsYXNzOiAnc3dpcGVyLW5vLXN3aXBpbmcnLFxuICAgIG5vU3dpcGluZ1NlbGVjdG9yOiBudWxsLFxuICAgIC8vIFBhc3NpdmUgTGlzdGVuZXJzXG4gICAgcGFzc2l2ZUxpc3RlbmVyczogdHJ1ZSxcbiAgICBtYXhCYWNrZmFjZUhpZGRlblNsaWRlczogMTAsXG4gICAgLy8gTlNcbiAgICBjb250YWluZXJNb2RpZmllckNsYXNzOiAnc3dpcGVyLScsXG4gICAgLy8gTkVXXG4gICAgc2xpZGVDbGFzczogJ3N3aXBlci1zbGlkZScsXG4gICAgc2xpZGVCbGFua0NsYXNzOiAnc3dpcGVyLXNsaWRlLWJsYW5rJyxcbiAgICBzbGlkZUFjdGl2ZUNsYXNzOiAnc3dpcGVyLXNsaWRlLWFjdGl2ZScsXG4gICAgc2xpZGVWaXNpYmxlQ2xhc3M6ICdzd2lwZXItc2xpZGUtdmlzaWJsZScsXG4gICAgc2xpZGVGdWxseVZpc2libGVDbGFzczogJ3N3aXBlci1zbGlkZS1mdWxseS12aXNpYmxlJyxcbiAgICBzbGlkZU5leHRDbGFzczogJ3N3aXBlci1zbGlkZS1uZXh0JyxcbiAgICBzbGlkZVByZXZDbGFzczogJ3N3aXBlci1zbGlkZS1wcmV2JyxcbiAgICB3cmFwcGVyQ2xhc3M6ICdzd2lwZXItd3JhcHBlcicsXG4gICAgbGF6eVByZWxvYWRlckNsYXNzOiAnc3dpcGVyLWxhenktcHJlbG9hZGVyJyxcbiAgICBsYXp5UHJlbG9hZFByZXZOZXh0OiAwLFxuICAgIC8vIENhbGxiYWNrc1xuICAgIHJ1bkNhbGxiYWNrc09uSW5pdDogdHJ1ZSxcbiAgICAvLyBJbnRlcm5hbHNcbiAgICBfZW1pdENsYXNzZXM6IGZhbHNlXG4gIH07XG5cbiAgZnVuY3Rpb24gbW9kdWxlRXh0ZW5kUGFyYW1zKHBhcmFtcywgYWxsTW9kdWxlc1BhcmFtcykge1xuICAgIHJldHVybiBmdW5jdGlvbiBleHRlbmRQYXJhbXMob2JqKSB7XG4gICAgICBpZiAob2JqID09PSB2b2lkIDApIHtcbiAgICAgICAgb2JqID0ge307XG4gICAgICB9XG4gICAgICBjb25zdCBtb2R1bGVQYXJhbU5hbWUgPSBPYmplY3Qua2V5cyhvYmopWzBdO1xuICAgICAgY29uc3QgbW9kdWxlUGFyYW1zID0gb2JqW21vZHVsZVBhcmFtTmFtZV07XG4gICAgICBpZiAodHlwZW9mIG1vZHVsZVBhcmFtcyAhPT0gJ29iamVjdCcgfHwgbW9kdWxlUGFyYW1zID09PSBudWxsKSB7XG4gICAgICAgIGV4dGVuZCQxKGFsbE1vZHVsZXNQYXJhbXMsIG9iaik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSA9PT0gdHJ1ZSkge1xuICAgICAgICBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSA9IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAobW9kdWxlUGFyYW1OYW1lID09PSAnbmF2aWdhdGlvbicgJiYgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0gJiYgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0uZW5hYmxlZCAmJiAhcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0ucHJldkVsICYmICFwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXS5uZXh0RWwpIHtcbiAgICAgICAgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0uYXV0byA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoWydwYWdpbmF0aW9uJywgJ3Njcm9sbGJhciddLmluZGV4T2YobW9kdWxlUGFyYW1OYW1lKSA+PSAwICYmIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdICYmIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdLmVuYWJsZWQgJiYgIXBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdLmVsKSB7XG4gICAgICAgIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdLmF1dG8gPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCEobW9kdWxlUGFyYW1OYW1lIGluIHBhcmFtcyAmJiAnZW5hYmxlZCcgaW4gbW9kdWxlUGFyYW1zKSkge1xuICAgICAgICBleHRlbmQkMShhbGxNb2R1bGVzUGFyYW1zLCBvYmopO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdID09PSAnb2JqZWN0JyAmJiAhKCdlbmFibGVkJyBpbiBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSkpIHtcbiAgICAgICAgcGFyYW1zW21vZHVsZVBhcmFtTmFtZV0uZW5hYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoIXBhcmFtc1ttb2R1bGVQYXJhbU5hbWVdKSBwYXJhbXNbbW9kdWxlUGFyYW1OYW1lXSA9IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgIH07XG4gICAgICBleHRlbmQkMShhbGxNb2R1bGVzUGFyYW1zLCBvYmopO1xuICAgIH07XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246IFwib2ZmXCIgKi9cbiAgY29uc3QgcHJvdG90eXBlcyA9IHtcbiAgICBldmVudHNFbWl0dGVyLFxuICAgIHVwZGF0ZSxcbiAgICB0cmFuc2xhdGUsXG4gICAgdHJhbnNpdGlvbixcbiAgICBzbGlkZSxcbiAgICBsb29wLFxuICAgIGdyYWJDdXJzb3IsXG4gICAgZXZlbnRzOiBldmVudHMkMSxcbiAgICBicmVha3BvaW50cyxcbiAgICBjaGVja092ZXJmbG93OiBjaGVja092ZXJmbG93JDEsXG4gICAgY2xhc3Nlc1xuICB9O1xuICBjb25zdCBleHRlbmRlZERlZmF1bHRzID0ge307XG4gIGNsYXNzIFN3aXBlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBsZXQgZWw7XG4gICAgICBsZXQgcGFyYW1zO1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDEgJiYgYXJnc1swXS5jb25zdHJ1Y3RvciAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnc1swXSkuc2xpY2UoOCwgLTEpID09PSAnT2JqZWN0Jykge1xuICAgICAgICBwYXJhbXMgPSBhcmdzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgW2VsLCBwYXJhbXNdID0gYXJncztcbiAgICAgIH1cbiAgICAgIGlmICghcGFyYW1zKSBwYXJhbXMgPSB7fTtcbiAgICAgIHBhcmFtcyA9IGV4dGVuZCQxKHt9LCBwYXJhbXMpO1xuICAgICAgaWYgKGVsICYmICFwYXJhbXMuZWwpIHBhcmFtcy5lbCA9IGVsO1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgICAgaWYgKHBhcmFtcy5lbCAmJiB0eXBlb2YgcGFyYW1zLmVsID09PSAnc3RyaW5nJyAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBhcmFtcy5lbCkubGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCBzd2lwZXJzID0gW107XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLmVsKS5mb3JFYWNoKGNvbnRhaW5lckVsID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBleHRlbmQkMSh7fSwgcGFyYW1zLCB7XG4gICAgICAgICAgICBlbDogY29udGFpbmVyRWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzd2lwZXJzLnB1c2gobmV3IFN3aXBlcihuZXdQYXJhbXMpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdHJ1Y3Rvci1yZXR1cm5cbiAgICAgICAgcmV0dXJuIHN3aXBlcnM7XG4gICAgICB9XG5cbiAgICAgIC8vIFN3aXBlciBJbnN0YW5jZVxuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIHN3aXBlci5fX3N3aXBlcl9fID0gdHJ1ZTtcbiAgICAgIHN3aXBlci5zdXBwb3J0ID0gZ2V0U3VwcG9ydCgpO1xuICAgICAgc3dpcGVyLmRldmljZSA9IGdldERldmljZSh7XG4gICAgICAgIHVzZXJBZ2VudDogcGFyYW1zLnVzZXJBZ2VudFxuICAgICAgfSk7XG4gICAgICBzd2lwZXIuYnJvd3NlciA9IGdldEJyb3dzZXIoKTtcbiAgICAgIHN3aXBlci5ldmVudHNMaXN0ZW5lcnMgPSB7fTtcbiAgICAgIHN3aXBlci5ldmVudHNBbnlMaXN0ZW5lcnMgPSBbXTtcbiAgICAgIHN3aXBlci5tb2R1bGVzID0gWy4uLnN3aXBlci5fX21vZHVsZXNfX107XG4gICAgICBpZiAocGFyYW1zLm1vZHVsZXMgJiYgQXJyYXkuaXNBcnJheShwYXJhbXMubW9kdWxlcykpIHtcbiAgICAgICAgc3dpcGVyLm1vZHVsZXMucHVzaCguLi5wYXJhbXMubW9kdWxlcyk7XG4gICAgICB9XG4gICAgICBjb25zdCBhbGxNb2R1bGVzUGFyYW1zID0ge307XG4gICAgICBzd2lwZXIubW9kdWxlcy5mb3JFYWNoKG1vZCA9PiB7XG4gICAgICAgIG1vZCh7XG4gICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgIHN3aXBlcixcbiAgICAgICAgICBleHRlbmRQYXJhbXM6IG1vZHVsZUV4dGVuZFBhcmFtcyhwYXJhbXMsIGFsbE1vZHVsZXNQYXJhbXMpLFxuICAgICAgICAgIG9uOiBzd2lwZXIub24uYmluZChzd2lwZXIpLFxuICAgICAgICAgIG9uY2U6IHN3aXBlci5vbmNlLmJpbmQoc3dpcGVyKSxcbiAgICAgICAgICBvZmY6IHN3aXBlci5vZmYuYmluZChzd2lwZXIpLFxuICAgICAgICAgIGVtaXQ6IHN3aXBlci5lbWl0LmJpbmQoc3dpcGVyKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBFeHRlbmQgZGVmYXVsdHMgd2l0aCBtb2R1bGVzIHBhcmFtc1xuICAgICAgY29uc3Qgc3dpcGVyUGFyYW1zID0gZXh0ZW5kJDEoe30sIGRlZmF1bHRzLCBhbGxNb2R1bGVzUGFyYW1zKTtcblxuICAgICAgLy8gRXh0ZW5kIGRlZmF1bHRzIHdpdGggcGFzc2VkIHBhcmFtc1xuICAgICAgc3dpcGVyLnBhcmFtcyA9IGV4dGVuZCQxKHt9LCBzd2lwZXJQYXJhbXMsIGV4dGVuZGVkRGVmYXVsdHMsIHBhcmFtcyk7XG4gICAgICBzd2lwZXIub3JpZ2luYWxQYXJhbXMgPSBleHRlbmQkMSh7fSwgc3dpcGVyLnBhcmFtcyk7XG4gICAgICBzd2lwZXIucGFzc2VkUGFyYW1zID0gZXh0ZW5kJDEoe30sIHBhcmFtcyk7XG5cbiAgICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zICYmIHN3aXBlci5wYXJhbXMub24pIHtcbiAgICAgICAgT2JqZWN0LmtleXMoc3dpcGVyLnBhcmFtcy5vbikuZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgIHN3aXBlci5vbihldmVudE5hbWUsIHN3aXBlci5wYXJhbXMub25bZXZlbnROYW1lXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMgJiYgc3dpcGVyLnBhcmFtcy5vbkFueSkge1xuICAgICAgICBzd2lwZXIub25Bbnkoc3dpcGVyLnBhcmFtcy5vbkFueSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4dGVuZCBTd2lwZXJcbiAgICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgICAgIGVuYWJsZWQ6IHN3aXBlci5wYXJhbXMuZW5hYmxlZCxcbiAgICAgICAgZWwsXG4gICAgICAgIC8vIENsYXNzZXNcbiAgICAgICAgY2xhc3NOYW1lczogW10sXG4gICAgICAgIC8vIFNsaWRlc1xuICAgICAgICBzbGlkZXM6IFtdLFxuICAgICAgICBzbGlkZXNHcmlkOiBbXSxcbiAgICAgICAgc25hcEdyaWQ6IFtdLFxuICAgICAgICBzbGlkZXNTaXplc0dyaWQ6IFtdLFxuICAgICAgICAvLyBpc0RpcmVjdGlvblxuICAgICAgICBpc0hvcml6b250YWwoKSB7XG4gICAgICAgICAgcmV0dXJuIHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICAgIH0sXG4gICAgICAgIGlzVmVydGljYWwoKSB7XG4gICAgICAgICAgcmV0dXJuIHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uID09PSAndmVydGljYWwnO1xuICAgICAgICB9LFxuICAgICAgICAvLyBJbmRleGVzXG4gICAgICAgIGFjdGl2ZUluZGV4OiAwLFxuICAgICAgICByZWFsSW5kZXg6IDAsXG4gICAgICAgIC8vXG4gICAgICAgIGlzQmVnaW5uaW5nOiB0cnVlLFxuICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgIC8vIFByb3BzXG4gICAgICAgIHRyYW5zbGF0ZTogMCxcbiAgICAgICAgcHJldmlvdXNUcmFuc2xhdGU6IDAsXG4gICAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgICB2ZWxvY2l0eTogMCxcbiAgICAgICAgYW5pbWF0aW5nOiBmYWxzZSxcbiAgICAgICAgY3NzT3ZlcmZsb3dBZGp1c3RtZW50KCkge1xuICAgICAgICAgIC8vIFJldHVybnMgMCB1bmxlc3MgYHRyYW5zbGF0ZWAgaXMgPiAyKioyM1xuICAgICAgICAgIC8vIFNob3VsZCBiZSBzdWJ0cmFjdGVkIGZyb20gY3NzIHZhbHVlcyB0byBwcmV2ZW50IG92ZXJmbG93XG4gICAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmModGhpcy50cmFuc2xhdGUgLyAyICoqIDIzKSAqIDIgKiogMjM7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIExvY2tzXG4gICAgICAgIGFsbG93U2xpZGVOZXh0OiBzd2lwZXIucGFyYW1zLmFsbG93U2xpZGVOZXh0LFxuICAgICAgICBhbGxvd1NsaWRlUHJldjogc3dpcGVyLnBhcmFtcy5hbGxvd1NsaWRlUHJldixcbiAgICAgICAgLy8gVG91Y2ggRXZlbnRzXG4gICAgICAgIHRvdWNoRXZlbnRzRGF0YToge1xuICAgICAgICAgIGlzVG91Y2hlZDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlzTW92ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBhbGxvd1RvdWNoQ2FsbGJhY2tzOiB1bmRlZmluZWQsXG4gICAgICAgICAgdG91Y2hTdGFydFRpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpc1Njcm9sbGluZzogdW5kZWZpbmVkLFxuICAgICAgICAgIGN1cnJlbnRUcmFuc2xhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBzdGFydFRyYW5zbGF0ZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGFsbG93VGhyZXNob2xkTW92ZTogdW5kZWZpbmVkLFxuICAgICAgICAgIC8vIEZvcm0gZWxlbWVudHMgdG8gbWF0Y2hcbiAgICAgICAgICBmb2N1c2FibGVFbGVtZW50czogc3dpcGVyLnBhcmFtcy5mb2N1c2FibGVFbGVtZW50cyxcbiAgICAgICAgICAvLyBMYXN0IGNsaWNrIHRpbWVcbiAgICAgICAgICBsYXN0Q2xpY2tUaW1lOiAwLFxuICAgICAgICAgIGNsaWNrVGltZW91dDogdW5kZWZpbmVkLFxuICAgICAgICAgIC8vIFZlbG9jaXRpZXNcbiAgICAgICAgICB2ZWxvY2l0aWVzOiBbXSxcbiAgICAgICAgICBhbGxvd01vbWVudHVtQm91bmNlOiB1bmRlZmluZWQsXG4gICAgICAgICAgc3RhcnRNb3Zpbmc6IHVuZGVmaW5lZCxcbiAgICAgICAgICBwb2ludGVySWQ6IG51bGwsXG4gICAgICAgICAgdG91Y2hJZDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICAvLyBDbGlja3NcbiAgICAgICAgYWxsb3dDbGljazogdHJ1ZSxcbiAgICAgICAgLy8gVG91Y2hlc1xuICAgICAgICBhbGxvd1RvdWNoTW92ZTogc3dpcGVyLnBhcmFtcy5hbGxvd1RvdWNoTW92ZSxcbiAgICAgICAgdG91Y2hlczoge1xuICAgICAgICAgIHN0YXJ0WDogMCxcbiAgICAgICAgICBzdGFydFk6IDAsXG4gICAgICAgICAgY3VycmVudFg6IDAsXG4gICAgICAgICAgY3VycmVudFk6IDAsXG4gICAgICAgICAgZGlmZjogMFxuICAgICAgICB9LFxuICAgICAgICAvLyBJbWFnZXNcbiAgICAgICAgaW1hZ2VzVG9Mb2FkOiBbXSxcbiAgICAgICAgaW1hZ2VzTG9hZGVkOiAwXG4gICAgICB9KTtcbiAgICAgIHN3aXBlci5lbWl0KCdfc3dpcGVyJyk7XG5cbiAgICAgIC8vIEluaXRcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmluaXQpIHtcbiAgICAgICAgc3dpcGVyLmluaXQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIGFwcCBpbnN0YW5jZVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0cnVjdG9yLXJldHVyblxuICAgICAgcmV0dXJuIHN3aXBlcjtcbiAgICB9XG4gICAgZ2V0RGlyZWN0aW9uTGFiZWwocHJvcGVydHkpIHtcbiAgICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0eTtcbiAgICAgIH1cbiAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ3dpZHRoJzogJ2hlaWdodCcsXG4gICAgICAgICdtYXJnaW4tdG9wJzogJ21hcmdpbi1sZWZ0JyxcbiAgICAgICAgJ21hcmdpbi1ib3R0b20gJzogJ21hcmdpbi1yaWdodCcsXG4gICAgICAgICdtYXJnaW4tbGVmdCc6ICdtYXJnaW4tdG9wJyxcbiAgICAgICAgJ21hcmdpbi1yaWdodCc6ICdtYXJnaW4tYm90dG9tJyxcbiAgICAgICAgJ3BhZGRpbmctbGVmdCc6ICdwYWRkaW5nLXRvcCcsXG4gICAgICAgICdwYWRkaW5nLXJpZ2h0JzogJ3BhZGRpbmctYm90dG9tJyxcbiAgICAgICAgJ21hcmdpblJpZ2h0JzogJ21hcmdpbkJvdHRvbSdcbiAgICAgIH1bcHJvcGVydHldO1xuICAgIH1cbiAgICBnZXRTbGlkZUluZGV4KHNsaWRlRWwpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzRWwsXG4gICAgICAgIHBhcmFtc1xuICAgICAgfSA9IHRoaXM7XG4gICAgICBjb25zdCBzbGlkZXMgPSBlbGVtZW50Q2hpbGRyZW4oc2xpZGVzRWwsIGAuJHtwYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApO1xuICAgICAgY29uc3QgZmlyc3RTbGlkZUluZGV4ID0gZWxlbWVudEluZGV4KHNsaWRlc1swXSk7XG4gICAgICByZXR1cm4gZWxlbWVudEluZGV4KHNsaWRlRWwpIC0gZmlyc3RTbGlkZUluZGV4O1xuICAgIH1cbiAgICBnZXRTbGlkZUluZGV4QnlEYXRhKGluZGV4KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTbGlkZUluZGV4KHRoaXMuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpICogMSA9PT0gaW5kZXgpWzBdKTtcbiAgICB9XG4gICAgcmVjYWxjU2xpZGVzKCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzRWwsXG4gICAgICAgIHBhcmFtc1xuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIHN3aXBlci5zbGlkZXMgPSBlbGVtZW50Q2hpbGRyZW4oc2xpZGVzRWwsIGAuJHtwYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApO1xuICAgIH1cbiAgICBlbmFibGUoKSB7XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgaWYgKHN3aXBlci5lbmFibGVkKSByZXR1cm47XG4gICAgICBzd2lwZXIuZW5hYmxlZCA9IHRydWU7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5ncmFiQ3Vyc29yKSB7XG4gICAgICAgIHN3aXBlci5zZXRHcmFiQ3Vyc29yKCk7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZW1pdCgnZW5hYmxlJyk7XG4gICAgfVxuICAgIGRpc2FibGUoKSB7XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgaWYgKCFzd2lwZXIuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgc3dpcGVyLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmdyYWJDdXJzb3IpIHtcbiAgICAgICAgc3dpcGVyLnVuc2V0R3JhYkN1cnNvcigpO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmVtaXQoJ2Rpc2FibGUnKTtcbiAgICB9XG4gICAgc2V0UHJvZ3Jlc3MocHJvZ3Jlc3MsIHNwZWVkKSB7XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgcHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heChwcm9ncmVzcywgMCksIDEpO1xuICAgICAgY29uc3QgbWluID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICAgICAgY29uc3QgbWF4ID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpO1xuICAgICAgY29uc3QgY3VycmVudCA9IChtYXggLSBtaW4pICogcHJvZ3Jlc3MgKyBtaW47XG4gICAgICBzd2lwZXIudHJhbnNsYXRlVG8oY3VycmVudCwgdHlwZW9mIHNwZWVkID09PSAndW5kZWZpbmVkJyA/IDAgOiBzcGVlZCk7XG4gICAgICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoKTtcbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgfVxuICAgIGVtaXRDb250YWluZXJDbGFzc2VzKCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5fZW1pdENsYXNzZXMgfHwgIXN3aXBlci5lbCkgcmV0dXJuO1xuICAgICAgY29uc3QgY2xzID0gc3dpcGVyLmVsLmNsYXNzTmFtZS5zcGxpdCgnICcpLmZpbHRlcihjbGFzc05hbWUgPT4ge1xuICAgICAgICByZXR1cm4gY2xhc3NOYW1lLmluZGV4T2YoJ3N3aXBlcicpID09PSAwIHx8IGNsYXNzTmFtZS5pbmRleE9mKHN3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzcykgPT09IDA7XG4gICAgICB9KTtcbiAgICAgIHN3aXBlci5lbWl0KCdfY29udGFpbmVyQ2xhc3NlcycsIGNscy5qb2luKCcgJykpO1xuICAgIH1cbiAgICBnZXRTbGlkZUNsYXNzZXMoc2xpZGVFbCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkKSByZXR1cm4gJyc7XG4gICAgICByZXR1cm4gc2xpZGVFbC5jbGFzc05hbWUuc3BsaXQoJyAnKS5maWx0ZXIoY2xhc3NOYW1lID0+IHtcbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZS5pbmRleE9mKCdzd2lwZXItc2xpZGUnKSA9PT0gMCB8fCBjbGFzc05hbWUuaW5kZXhPZihzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3MpID09PSAwO1xuICAgICAgfSkuam9pbignICcpO1xuICAgIH1cbiAgICBlbWl0U2xpZGVzQ2xhc3NlcygpIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuX2VtaXRDbGFzc2VzIHx8ICFzd2lwZXIuZWwpIHJldHVybjtcbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSBbXTtcbiAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lcyA9IHN3aXBlci5nZXRTbGlkZUNsYXNzZXMoc2xpZGVFbCk7XG4gICAgICAgIHVwZGF0ZXMucHVzaCh7XG4gICAgICAgICAgc2xpZGVFbCxcbiAgICAgICAgICBjbGFzc05hbWVzXG4gICAgICAgIH0pO1xuICAgICAgICBzd2lwZXIuZW1pdCgnX3NsaWRlQ2xhc3MnLCBzbGlkZUVsLCBjbGFzc05hbWVzKTtcbiAgICAgIH0pO1xuICAgICAgc3dpcGVyLmVtaXQoJ19zbGlkZUNsYXNzZXMnLCB1cGRhdGVzKTtcbiAgICB9XG4gICAgc2xpZGVzUGVyVmlld0R5bmFtaWModmlldywgZXhhY3QpIHtcbiAgICAgIGlmICh2aWV3ID09PSB2b2lkIDApIHtcbiAgICAgICAgdmlldyA9ICdjdXJyZW50JztcbiAgICAgIH1cbiAgICAgIGlmIChleGFjdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGV4YWN0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgY29uc3Qge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHNsaWRlcyxcbiAgICAgICAgc2xpZGVzR3JpZCxcbiAgICAgICAgc2xpZGVzU2l6ZXNHcmlkLFxuICAgICAgICBzaXplOiBzd2lwZXJTaXplLFxuICAgICAgICBhY3RpdmVJbmRleFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGxldCBzcHYgPSAxO1xuICAgICAgaWYgKHR5cGVvZiBwYXJhbXMuc2xpZGVzUGVyVmlldyA9PT0gJ251bWJlcicpIHJldHVybiBwYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICAgIGlmIChwYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgbGV0IHNsaWRlU2l6ZSA9IHNsaWRlc1thY3RpdmVJbmRleF0gPyBNYXRoLmNlaWwoc2xpZGVzW2FjdGl2ZUluZGV4XS5zd2lwZXJTbGlkZVNpemUpIDogMDtcbiAgICAgICAgbGV0IGJyZWFrTG9vcDtcbiAgICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZUluZGV4ICsgMTsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChzbGlkZXNbaV0gJiYgIWJyZWFrTG9vcCkge1xuICAgICAgICAgICAgc2xpZGVTaXplICs9IE1hdGguY2VpbChzbGlkZXNbaV0uc3dpcGVyU2xpZGVTaXplKTtcbiAgICAgICAgICAgIHNwdiArPSAxO1xuICAgICAgICAgICAgaWYgKHNsaWRlU2l6ZSA+IHN3aXBlclNpemUpIGJyZWFrTG9vcCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSBhY3RpdmVJbmRleCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgICAgaWYgKHNsaWRlc1tpXSAmJiAhYnJlYWtMb29wKSB7XG4gICAgICAgICAgICBzbGlkZVNpemUgKz0gc2xpZGVzW2ldLnN3aXBlclNsaWRlU2l6ZTtcbiAgICAgICAgICAgIHNwdiArPSAxO1xuICAgICAgICAgICAgaWYgKHNsaWRlU2l6ZSA+IHN3aXBlclNpemUpIGJyZWFrTG9vcCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgaWYgKHZpZXcgPT09ICdjdXJyZW50Jykge1xuICAgICAgICAgIGZvciAobGV0IGkgPSBhY3RpdmVJbmRleCArIDE7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlSW5WaWV3ID0gZXhhY3QgPyBzbGlkZXNHcmlkW2ldICsgc2xpZGVzU2l6ZXNHcmlkW2ldIC0gc2xpZGVzR3JpZFthY3RpdmVJbmRleF0gPCBzd2lwZXJTaXplIDogc2xpZGVzR3JpZFtpXSAtIHNsaWRlc0dyaWRbYWN0aXZlSW5kZXhdIDwgc3dpcGVyU2l6ZTtcbiAgICAgICAgICAgIGlmIChzbGlkZUluVmlldykge1xuICAgICAgICAgICAgICBzcHYgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcHJldmlvdXNcbiAgICAgICAgICBmb3IgKGxldCBpID0gYWN0aXZlSW5kZXggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgY29uc3Qgc2xpZGVJblZpZXcgPSBzbGlkZXNHcmlkW2FjdGl2ZUluZGV4XSAtIHNsaWRlc0dyaWRbaV0gPCBzd2lwZXJTaXplO1xuICAgICAgICAgICAgaWYgKHNsaWRlSW5WaWV3KSB7XG4gICAgICAgICAgICAgIHNwdiArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNwdjtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc25hcEdyaWQsXG4gICAgICAgIHBhcmFtc1xuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIC8vIEJyZWFrcG9pbnRzXG4gICAgICBpZiAocGFyYW1zLmJyZWFrcG9pbnRzKSB7XG4gICAgICAgIHN3aXBlci5zZXRCcmVha3BvaW50KCk7XG4gICAgICB9XG4gICAgICBbLi4uc3dpcGVyLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsb2FkaW5nPVwibGF6eVwiXScpXS5mb3JFYWNoKGltYWdlRWwgPT4ge1xuICAgICAgICBpZiAoaW1hZ2VFbC5jb21wbGV0ZSkge1xuICAgICAgICAgIHByb2Nlc3NMYXp5UHJlbG9hZGVyKHN3aXBlciwgaW1hZ2VFbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc3dpcGVyLnVwZGF0ZVNpemUoKTtcbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcygpO1xuICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgIGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlVmFsdWUgPSBzd2lwZXIucnRsVHJhbnNsYXRlID8gc3dpcGVyLnRyYW5zbGF0ZSAqIC0xIDogc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNsYXRlID0gTWF0aC5taW4oTWF0aC5tYXgodHJhbnNsYXRlVmFsdWUsIHN3aXBlci5tYXhUcmFuc2xhdGUoKSksIHN3aXBlci5taW5UcmFuc2xhdGUoKSk7XG4gICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUobmV3VHJhbnNsYXRlKTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICB9XG4gICAgICBsZXQgdHJhbnNsYXRlZDtcbiAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUgJiYgcGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgJiYgIXBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHNldFRyYW5zbGF0ZSgpO1xuICAgICAgICBpZiAocGFyYW1zLmF1dG9IZWlnaHQpIHtcbiAgICAgICAgICBzd2lwZXIudXBkYXRlQXV0b0hlaWdodCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoKHBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgfHwgcGFyYW1zLnNsaWRlc1BlclZpZXcgPiAxKSAmJiBzd2lwZXIuaXNFbmQgJiYgIXBhcmFtcy5jZW50ZXJlZFNsaWRlcykge1xuICAgICAgICAgIGNvbnN0IHNsaWRlcyA9IHN3aXBlci52aXJ0dWFsICYmIHBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMgOiBzd2lwZXIuc2xpZGVzO1xuICAgICAgICAgIHRyYW5zbGF0ZWQgPSBzd2lwZXIuc2xpZGVUbyhzbGlkZXMubGVuZ3RoIC0gMSwgMCwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyYW5zbGF0ZWQgPSBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuYWN0aXZlSW5kZXgsIDAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYW5zbGF0ZWQpIHtcbiAgICAgICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy53YXRjaE92ZXJmbG93ICYmIHNuYXBHcmlkICE9PSBzd2lwZXIuc25hcEdyaWQpIHtcbiAgICAgICAgc3dpcGVyLmNoZWNrT3ZlcmZsb3coKTtcbiAgICAgIH1cbiAgICAgIHN3aXBlci5lbWl0KCd1cGRhdGUnKTtcbiAgICB9XG4gICAgY2hhbmdlRGlyZWN0aW9uKG5ld0RpcmVjdGlvbiwgbmVlZFVwZGF0ZSkge1xuICAgICAgaWYgKG5lZWRVcGRhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICBuZWVkVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBjb25zdCBjdXJyZW50RGlyZWN0aW9uID0gc3dpcGVyLnBhcmFtcy5kaXJlY3Rpb247XG4gICAgICBpZiAoIW5ld0RpcmVjdGlvbikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgbmV3RGlyZWN0aW9uID0gY3VycmVudERpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJztcbiAgICAgIH1cbiAgICAgIGlmIChuZXdEaXJlY3Rpb24gPT09IGN1cnJlbnREaXJlY3Rpb24gfHwgbmV3RGlyZWN0aW9uICE9PSAnaG9yaXpvbnRhbCcgJiYgbmV3RGlyZWN0aW9uICE9PSAndmVydGljYWwnKSB7XG4gICAgICAgIHJldHVybiBzd2lwZXI7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LnJlbW92ZShgJHtzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9JHtjdXJyZW50RGlyZWN0aW9ufWApO1xuICAgICAgc3dpcGVyLmVsLmNsYXNzTGlzdC5hZGQoYCR7c3dpcGVyLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfSR7bmV3RGlyZWN0aW9ufWApO1xuICAgICAgc3dpcGVyLmVtaXRDb250YWluZXJDbGFzc2VzKCk7XG4gICAgICBzd2lwZXIucGFyYW1zLmRpcmVjdGlvbiA9IG5ld0RpcmVjdGlvbjtcbiAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaChzbGlkZUVsID0+IHtcbiAgICAgICAgaWYgKG5ld0RpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgIHNsaWRlRWwuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbGlkZUVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHN3aXBlci5lbWl0KCdjaGFuZ2VEaXJlY3Rpb24nKTtcbiAgICAgIGlmIChuZWVkVXBkYXRlKSBzd2lwZXIudXBkYXRlKCk7XG4gICAgICByZXR1cm4gc3dpcGVyO1xuICAgIH1cbiAgICBjaGFuZ2VMYW5ndWFnZURpcmVjdGlvbihkaXJlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBpZiAoc3dpcGVyLnJ0bCAmJiBkaXJlY3Rpb24gPT09ICdydGwnIHx8ICFzd2lwZXIucnRsICYmIGRpcmVjdGlvbiA9PT0gJ2x0cicpIHJldHVybjtcbiAgICAgIHN3aXBlci5ydGwgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xuICAgICAgc3dpcGVyLnJ0bFRyYW5zbGF0ZSA9IHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgJiYgc3dpcGVyLnJ0bDtcbiAgICAgIGlmIChzd2lwZXIucnRsKSB7XG4gICAgICAgIHN3aXBlci5lbC5jbGFzc0xpc3QuYWRkKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ydGxgKTtcbiAgICAgICAgc3dpcGVyLmVsLmRpciA9ICdydGwnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLmVsLmNsYXNzTGlzdC5yZW1vdmUoYCR7c3dpcGVyLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfXJ0bGApO1xuICAgICAgICBzd2lwZXIuZWwuZGlyID0gJ2x0cic7XG4gICAgICB9XG4gICAgICBzd2lwZXIudXBkYXRlKCk7XG4gICAgfVxuICAgIG1vdW50KGVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgICBpZiAoc3dpcGVyLm1vdW50ZWQpIHJldHVybiB0cnVlO1xuXG4gICAgICAvLyBGaW5kIGVsXG4gICAgICBsZXQgZWwgPSBlbGVtZW50IHx8IHN3aXBlci5wYXJhbXMuZWw7XG4gICAgICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgICAgfVxuICAgICAgaWYgKCFlbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBlbC5zd2lwZXIgPSBzd2lwZXI7XG4gICAgICBpZiAoZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLmhvc3QgJiYgZWwucGFyZW50Tm9kZS5ob3N0Lm5vZGVOYW1lID09PSBzd2lwZXIucGFyYW1zLnN3aXBlckVsZW1lbnROb2RlTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIHN3aXBlci5pc0VsZW1lbnQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZ2V0V3JhcHBlclNlbGVjdG9yID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gYC4keyhzd2lwZXIucGFyYW1zLndyYXBwZXJDbGFzcyB8fCAnJykudHJpbSgpLnNwbGl0KCcgJykuam9pbignLicpfWA7XG4gICAgICB9O1xuICAgICAgY29uc3QgZ2V0V3JhcHBlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGVsICYmIGVsLnNoYWRvd1Jvb3QgJiYgZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKSB7XG4gICAgICAgICAgY29uc3QgcmVzID0gZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGdldFdyYXBwZXJTZWxlY3RvcigpKTtcbiAgICAgICAgICAvLyBDaGlsZHJlbiBuZWVkcyB0byByZXR1cm4gc2xvdCBpdGVtc1xuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW1lbnRDaGlsZHJlbihlbCwgZ2V0V3JhcHBlclNlbGVjdG9yKCkpWzBdO1xuICAgICAgfTtcbiAgICAgIC8vIEZpbmQgV3JhcHBlclxuICAgICAgbGV0IHdyYXBwZXJFbCA9IGdldFdyYXBwZXIoKTtcbiAgICAgIGlmICghd3JhcHBlckVsICYmIHN3aXBlci5wYXJhbXMuY3JlYXRlRWxlbWVudHMpIHtcbiAgICAgICAgd3JhcHBlckVsID0gY3JlYXRlRWxlbWVudCgnZGl2Jywgc3dpcGVyLnBhcmFtcy53cmFwcGVyQ2xhc3MpO1xuICAgICAgICBlbC5hcHBlbmQod3JhcHBlckVsKTtcbiAgICAgICAgZWxlbWVudENoaWxkcmVuKGVsLCBgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfWApLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgICAgd3JhcHBlckVsLmFwcGVuZChzbGlkZUVsKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgICAgICBlbCxcbiAgICAgICAgd3JhcHBlckVsLFxuICAgICAgICBzbGlkZXNFbDogc3dpcGVyLmlzRWxlbWVudCAmJiAhZWwucGFyZW50Tm9kZS5ob3N0LnNsaWRlU2xvdHMgPyBlbC5wYXJlbnROb2RlLmhvc3QgOiB3cmFwcGVyRWwsXG4gICAgICAgIGhvc3RFbDogc3dpcGVyLmlzRWxlbWVudCA/IGVsLnBhcmVudE5vZGUuaG9zdCA6IGVsLFxuICAgICAgICBtb3VudGVkOiB0cnVlLFxuICAgICAgICAvLyBSVExcbiAgICAgICAgcnRsOiBlbC5kaXIudG9Mb3dlckNhc2UoKSA9PT0gJ3J0bCcgfHwgZWxlbWVudFN0eWxlKGVsLCAnZGlyZWN0aW9uJykgPT09ICdydGwnLFxuICAgICAgICBydGxUcmFuc2xhdGU6IHN3aXBlci5wYXJhbXMuZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgJiYgKGVsLmRpci50b0xvd2VyQ2FzZSgpID09PSAncnRsJyB8fCBlbGVtZW50U3R5bGUoZWwsICdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcpLFxuICAgICAgICB3cm9uZ1JUTDogZWxlbWVudFN0eWxlKHdyYXBwZXJFbCwgJ2Rpc3BsYXknKSA9PT0gJy13ZWJraXQtYm94J1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaW5pdChlbCkge1xuICAgICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICAgIGlmIChzd2lwZXIuaW5pdGlhbGl6ZWQpIHJldHVybiBzd2lwZXI7XG4gICAgICBjb25zdCBtb3VudGVkID0gc3dpcGVyLm1vdW50KGVsKTtcbiAgICAgIGlmIChtb3VudGVkID09PSBmYWxzZSkgcmV0dXJuIHN3aXBlcjtcbiAgICAgIHN3aXBlci5lbWl0KCdiZWZvcmVJbml0Jyk7XG5cbiAgICAgIC8vIFNldCBicmVha3BvaW50XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5icmVha3BvaW50cykge1xuICAgICAgICBzd2lwZXIuc2V0QnJlYWtwb2ludCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgQ2xhc3Nlc1xuICAgICAgc3dpcGVyLmFkZENsYXNzZXMoKTtcblxuICAgICAgLy8gVXBkYXRlIHNpemVcbiAgICAgIHN3aXBlci51cGRhdGVTaXplKCk7XG5cbiAgICAgIC8vIFVwZGF0ZSBzbGlkZXNcbiAgICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cpIHtcbiAgICAgICAgc3dpcGVyLmNoZWNrT3ZlcmZsb3coKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IEdyYWIgQ3Vyc29yXG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5ncmFiQ3Vyc29yICYmIHN3aXBlci5lbmFibGVkKSB7XG4gICAgICAgIHN3aXBlci5zZXRHcmFiQ3Vyc29yKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNsaWRlIFRvIEluaXRpYWwgU2xpZGVcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3AgJiYgc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnBhcmFtcy5pbml0aWFsU2xpZGUgKyBzd2lwZXIudmlydHVhbC5zbGlkZXNCZWZvcmUsIDAsIHN3aXBlci5wYXJhbXMucnVuQ2FsbGJhY2tzT25Jbml0LCBmYWxzZSwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIucGFyYW1zLmluaXRpYWxTbGlkZSwgMCwgc3dpcGVyLnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQsIGZhbHNlLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGxvb3BcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgc3dpcGVyLmxvb3BDcmVhdGUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQXR0YWNoIGV2ZW50c1xuICAgICAgc3dpcGVyLmF0dGFjaEV2ZW50cygpO1xuICAgICAgY29uc3QgbGF6eUVsZW1lbnRzID0gWy4uLnN3aXBlci5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbbG9hZGluZz1cImxhenlcIl0nKV07XG4gICAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICBsYXp5RWxlbWVudHMucHVzaCguLi5zd2lwZXIuaG9zdEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsb2FkaW5nPVwibGF6eVwiXScpKTtcbiAgICAgIH1cbiAgICAgIGxhenlFbGVtZW50cy5mb3JFYWNoKGltYWdlRWwgPT4ge1xuICAgICAgICBpZiAoaW1hZ2VFbC5jb21wbGV0ZSkge1xuICAgICAgICAgIHByb2Nlc3NMYXp5UHJlbG9hZGVyKHN3aXBlciwgaW1hZ2VFbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZSA9PiB7XG4gICAgICAgICAgICBwcm9jZXNzTGF6eVByZWxvYWRlcihzd2lwZXIsIGUudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBwcmVsb2FkKHN3aXBlcik7XG5cbiAgICAgIC8vIEluaXQgRmxhZ1xuICAgICAgc3dpcGVyLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIHByZWxvYWQoc3dpcGVyKTtcblxuICAgICAgLy8gRW1pdFxuICAgICAgc3dpcGVyLmVtaXQoJ2luaXQnKTtcbiAgICAgIHN3aXBlci5lbWl0KCdhZnRlckluaXQnKTtcbiAgICAgIHJldHVybiBzd2lwZXI7XG4gICAgfVxuICAgIGRlc3Ryb3koZGVsZXRlSW5zdGFuY2UsIGNsZWFuU3R5bGVzKSB7XG4gICAgICBpZiAoZGVsZXRlSW5zdGFuY2UgPT09IHZvaWQgMCkge1xuICAgICAgICBkZWxldGVJbnN0YW5jZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoY2xlYW5TdHlsZXMgPT09IHZvaWQgMCkge1xuICAgICAgICBjbGVhblN0eWxlcyA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBzd2lwZXIgPSB0aGlzO1xuICAgICAgY29uc3Qge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIGVsLFxuICAgICAgICB3cmFwcGVyRWwsXG4gICAgICAgIHNsaWRlc1xuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGlmICh0eXBlb2Ygc3dpcGVyLnBhcmFtcyA9PT0gJ3VuZGVmaW5lZCcgfHwgc3dpcGVyLmRlc3Ryb3llZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN3aXBlci5lbWl0KCdiZWZvcmVEZXN0cm95Jyk7XG5cbiAgICAgIC8vIEluaXQgRmxhZ1xuICAgICAgc3dpcGVyLmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgIC8vIERldGFjaCBldmVudHNcbiAgICAgIHN3aXBlci5kZXRhY2hFdmVudHMoKTtcblxuICAgICAgLy8gRGVzdHJveSBsb29wXG4gICAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFudXAgc3R5bGVzXG4gICAgICBpZiAoY2xlYW5TdHlsZXMpIHtcbiAgICAgICAgc3dpcGVyLnJlbW92ZUNsYXNzZXMoKTtcbiAgICAgICAgaWYgKGVsICYmIHR5cGVvZiBlbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdyYXBwZXJFbCkge1xuICAgICAgICAgIHdyYXBwZXJFbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNsaWRlcyAmJiBzbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgICAgc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgICAgICBzbGlkZUVsLmNsYXNzTGlzdC5yZW1vdmUocGFyYW1zLnNsaWRlVmlzaWJsZUNsYXNzLCBwYXJhbXMuc2xpZGVGdWxseVZpc2libGVDbGFzcywgcGFyYW1zLnNsaWRlQWN0aXZlQ2xhc3MsIHBhcmFtcy5zbGlkZU5leHRDbGFzcywgcGFyYW1zLnNsaWRlUHJldkNsYXNzKTtcbiAgICAgICAgICAgIHNsaWRlRWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgc2xpZGVFbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4Jyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN3aXBlci5lbWl0KCdkZXN0cm95Jyk7XG5cbiAgICAgIC8vIERldGFjaCBlbWl0dGVyIGV2ZW50c1xuICAgICAgT2JqZWN0LmtleXMoc3dpcGVyLmV2ZW50c0xpc3RlbmVycykuZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICBzd2lwZXIub2ZmKGV2ZW50TmFtZSk7XG4gICAgICB9KTtcbiAgICAgIGlmIChkZWxldGVJbnN0YW5jZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHN3aXBlci5lbCAmJiB0eXBlb2Ygc3dpcGVyLmVsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHN3aXBlci5lbC5zd2lwZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZVByb3BzKHN3aXBlcik7XG4gICAgICB9XG4gICAgICBzd2lwZXIuZGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgZXh0ZW5kRGVmYXVsdHMobmV3RGVmYXVsdHMpIHtcbiAgICAgIGV4dGVuZCQxKGV4dGVuZGVkRGVmYXVsdHMsIG5ld0RlZmF1bHRzKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBleHRlbmRlZERlZmF1bHRzKCkge1xuICAgICAgcmV0dXJuIGV4dGVuZGVkRGVmYXVsdHM7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgZGVmYXVsdHMoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdHM7XG4gICAgfVxuICAgIHN0YXRpYyBpbnN0YWxsTW9kdWxlKG1vZCkge1xuICAgICAgaWYgKCFTd2lwZXIucHJvdG90eXBlLl9fbW9kdWxlc19fKSBTd2lwZXIucHJvdG90eXBlLl9fbW9kdWxlc19fID0gW107XG4gICAgICBjb25zdCBtb2R1bGVzID0gU3dpcGVyLnByb3RvdHlwZS5fX21vZHVsZXNfXztcbiAgICAgIGlmICh0eXBlb2YgbW9kID09PSAnZnVuY3Rpb24nICYmIG1vZHVsZXMuaW5kZXhPZihtb2QpIDwgMCkge1xuICAgICAgICBtb2R1bGVzLnB1c2gobW9kKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHVzZShtb2R1bGUpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG1vZHVsZSkpIHtcbiAgICAgICAgbW9kdWxlLmZvckVhY2gobSA9PiBTd2lwZXIuaW5zdGFsbE1vZHVsZShtKSk7XG4gICAgICAgIHJldHVybiBTd2lwZXI7XG4gICAgICB9XG4gICAgICBTd2lwZXIuaW5zdGFsbE1vZHVsZShtb2R1bGUpO1xuICAgICAgcmV0dXJuIFN3aXBlcjtcbiAgICB9XG4gIH1cbiAgT2JqZWN0LmtleXMocHJvdG90eXBlcykuZm9yRWFjaChwcm90b3R5cGVHcm91cCA9PiB7XG4gICAgT2JqZWN0LmtleXMocHJvdG90eXBlc1twcm90b3R5cGVHcm91cF0pLmZvckVhY2gocHJvdG9NZXRob2QgPT4ge1xuICAgICAgU3dpcGVyLnByb3RvdHlwZVtwcm90b01ldGhvZF0gPSBwcm90b3R5cGVzW3Byb3RvdHlwZUdyb3VwXVtwcm90b01ldGhvZF07XG4gICAgfSk7XG4gIH0pO1xuICBTd2lwZXIudXNlKFtSZXNpemUsIE9ic2VydmVyXSk7XG5cbiAgZnVuY3Rpb24gVmlydHVhbChfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uLFxuICAgICAgZW1pdFxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICB2aXJ0dWFsOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBzbGlkZXM6IFtdLFxuICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgcmVuZGVyU2xpZGU6IG51bGwsXG4gICAgICAgIHJlbmRlckV4dGVybmFsOiBudWxsLFxuICAgICAgICByZW5kZXJFeHRlcm5hbFVwZGF0ZTogdHJ1ZSxcbiAgICAgICAgYWRkU2xpZGVzQmVmb3JlOiAwLFxuICAgICAgICBhZGRTbGlkZXNBZnRlcjogMFxuICAgICAgfVxuICAgIH0pO1xuICAgIGxldCBjc3NNb2RlVGltZW91dDtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgc3dpcGVyLnZpcnR1YWwgPSB7XG4gICAgICBjYWNoZToge30sXG4gICAgICBmcm9tOiB1bmRlZmluZWQsXG4gICAgICB0bzogdW5kZWZpbmVkLFxuICAgICAgc2xpZGVzOiBbXSxcbiAgICAgIG9mZnNldDogMCxcbiAgICAgIHNsaWRlc0dyaWQ6IFtdXG4gICAgfTtcbiAgICBjb25zdCB0ZW1wRE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZnVuY3Rpb24gcmVuZGVyU2xpZGUoc2xpZGUsIGluZGV4KSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnZpcnR1YWw7XG4gICAgICBpZiAocGFyYW1zLmNhY2hlICYmIHN3aXBlci52aXJ0dWFsLmNhY2hlW2luZGV4XSkge1xuICAgICAgICByZXR1cm4gc3dpcGVyLnZpcnR1YWwuY2FjaGVbaW5kZXhdO1xuICAgICAgfVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICBsZXQgc2xpZGVFbDtcbiAgICAgIGlmIChwYXJhbXMucmVuZGVyU2xpZGUpIHtcbiAgICAgICAgc2xpZGVFbCA9IHBhcmFtcy5yZW5kZXJTbGlkZS5jYWxsKHN3aXBlciwgc2xpZGUsIGluZGV4KTtcbiAgICAgICAgaWYgKHR5cGVvZiBzbGlkZUVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRlbXBET00uaW5uZXJIVE1MID0gc2xpZGVFbDtcbiAgICAgICAgICBzbGlkZUVsID0gdGVtcERPTS5jaGlsZHJlblswXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgIHNsaWRlRWwgPSBjcmVhdGVFbGVtZW50KCdzd2lwZXItc2xpZGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlRWwgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3MpO1xuICAgICAgfVxuICAgICAgc2xpZGVFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JywgaW5kZXgpO1xuICAgICAgaWYgKCFwYXJhbXMucmVuZGVyU2xpZGUpIHtcbiAgICAgICAgc2xpZGVFbC5pbm5lckhUTUwgPSBzbGlkZTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMuY2FjaGUpIHtcbiAgICAgICAgc3dpcGVyLnZpcnR1YWwuY2FjaGVbaW5kZXhdID0gc2xpZGVFbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzbGlkZUVsO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoZm9yY2UsIGJlZm9yZUluaXQpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzUGVyVmlldyxcbiAgICAgICAgc2xpZGVzUGVyR3JvdXAsXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzLFxuICAgICAgICBsb29wOiBpc0xvb3AsXG4gICAgICAgIGluaXRpYWxTbGlkZVxuICAgICAgfSA9IHN3aXBlci5wYXJhbXM7XG4gICAgICBpZiAoYmVmb3JlSW5pdCAmJiAhaXNMb29wICYmIGluaXRpYWxTbGlkZSA+IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qge1xuICAgICAgICBhZGRTbGlkZXNCZWZvcmUsXG4gICAgICAgIGFkZFNsaWRlc0FmdGVyXG4gICAgICB9ID0gc3dpcGVyLnBhcmFtcy52aXJ0dWFsO1xuICAgICAgY29uc3Qge1xuICAgICAgICBmcm9tOiBwcmV2aW91c0Zyb20sXG4gICAgICAgIHRvOiBwcmV2aW91c1RvLFxuICAgICAgICBzbGlkZXMsXG4gICAgICAgIHNsaWRlc0dyaWQ6IHByZXZpb3VzU2xpZGVzR3JpZCxcbiAgICAgICAgb2Zmc2V0OiBwcmV2aW91c09mZnNldFxuICAgICAgfSA9IHN3aXBlci52aXJ0dWFsO1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICB9XG4gICAgICBjb25zdCBhY3RpdmVJbmRleCA9IHN3aXBlci5hY3RpdmVJbmRleCB8fCAwO1xuICAgICAgbGV0IG9mZnNldFByb3A7XG4gICAgICBpZiAoc3dpcGVyLnJ0bFRyYW5zbGF0ZSkgb2Zmc2V0UHJvcCA9ICdyaWdodCc7ZWxzZSBvZmZzZXRQcm9wID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJ2xlZnQnIDogJ3RvcCc7XG4gICAgICBsZXQgc2xpZGVzQWZ0ZXI7XG4gICAgICBsZXQgc2xpZGVzQmVmb3JlO1xuICAgICAgaWYgKGNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIHNsaWRlc0FmdGVyID0gTWF0aC5mbG9vcihzbGlkZXNQZXJWaWV3IC8gMikgKyBzbGlkZXNQZXJHcm91cCArIGFkZFNsaWRlc0FmdGVyO1xuICAgICAgICBzbGlkZXNCZWZvcmUgPSBNYXRoLmZsb29yKHNsaWRlc1BlclZpZXcgLyAyKSArIHNsaWRlc1Blckdyb3VwICsgYWRkU2xpZGVzQmVmb3JlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVzQWZ0ZXIgPSBzbGlkZXNQZXJWaWV3ICsgKHNsaWRlc1Blckdyb3VwIC0gMSkgKyBhZGRTbGlkZXNBZnRlcjtcbiAgICAgICAgc2xpZGVzQmVmb3JlID0gKGlzTG9vcCA/IHNsaWRlc1BlclZpZXcgOiBzbGlkZXNQZXJHcm91cCkgKyBhZGRTbGlkZXNCZWZvcmU7XG4gICAgICB9XG4gICAgICBsZXQgZnJvbSA9IGFjdGl2ZUluZGV4IC0gc2xpZGVzQmVmb3JlO1xuICAgICAgbGV0IHRvID0gYWN0aXZlSW5kZXggKyBzbGlkZXNBZnRlcjtcbiAgICAgIGlmICghaXNMb29wKSB7XG4gICAgICAgIGZyb20gPSBNYXRoLm1heChmcm9tLCAwKTtcbiAgICAgICAgdG8gPSBNYXRoLm1pbih0bywgc2xpZGVzLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuICAgICAgbGV0IG9mZnNldCA9IChzd2lwZXIuc2xpZGVzR3JpZFtmcm9tXSB8fCAwKSAtIChzd2lwZXIuc2xpZGVzR3JpZFswXSB8fCAwKTtcbiAgICAgIGlmIChpc0xvb3AgJiYgYWN0aXZlSW5kZXggPj0gc2xpZGVzQmVmb3JlKSB7XG4gICAgICAgIGZyb20gLT0gc2xpZGVzQmVmb3JlO1xuICAgICAgICBpZiAoIWNlbnRlcmVkU2xpZGVzKSBvZmZzZXQgKz0gc3dpcGVyLnNsaWRlc0dyaWRbMF07XG4gICAgICB9IGVsc2UgaWYgKGlzTG9vcCAmJiBhY3RpdmVJbmRleCA8IHNsaWRlc0JlZm9yZSkge1xuICAgICAgICBmcm9tID0gLXNsaWRlc0JlZm9yZTtcbiAgICAgICAgaWYgKGNlbnRlcmVkU2xpZGVzKSBvZmZzZXQgKz0gc3dpcGVyLnNsaWRlc0dyaWRbMF07XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKHN3aXBlci52aXJ0dWFsLCB7XG4gICAgICAgIGZyb20sXG4gICAgICAgIHRvLFxuICAgICAgICBvZmZzZXQsXG4gICAgICAgIHNsaWRlc0dyaWQ6IHN3aXBlci5zbGlkZXNHcmlkLFxuICAgICAgICBzbGlkZXNCZWZvcmUsXG4gICAgICAgIHNsaWRlc0FmdGVyXG4gICAgICB9KTtcbiAgICAgIGZ1bmN0aW9uIG9uUmVuZGVyZWQoKSB7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXMoKTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICAgIGVtaXQoJ3ZpcnR1YWxVcGRhdGUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2aW91c0Zyb20gPT09IGZyb20gJiYgcHJldmlvdXNUbyA9PT0gdG8gJiYgIWZvcmNlKSB7XG4gICAgICAgIGlmIChzd2lwZXIuc2xpZGVzR3JpZCAhPT0gcHJldmlvdXNTbGlkZXNHcmlkICYmIG9mZnNldCAhPT0gcHJldmlvdXNPZmZzZXQpIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgICAgICBzbGlkZUVsLnN0eWxlW29mZnNldFByb3BdID0gYCR7b2Zmc2V0IC0gTWF0aC5hYnMoc3dpcGVyLmNzc092ZXJmbG93QWRqdXN0bWVudCgpKX1weGA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKCk7XG4gICAgICAgIGVtaXQoJ3ZpcnR1YWxVcGRhdGUnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbC5yZW5kZXJFeHRlcm5hbCkge1xuICAgICAgICBzd2lwZXIucGFyYW1zLnZpcnR1YWwucmVuZGVyRXh0ZXJuYWwuY2FsbChzd2lwZXIsIHtcbiAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgICB0byxcbiAgICAgICAgICBzbGlkZXM6IGZ1bmN0aW9uIGdldFNsaWRlcygpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlc1RvUmVuZGVyID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8PSB0bzsgaSArPSAxKSB7XG4gICAgICAgICAgICAgIHNsaWRlc1RvUmVuZGVyLnB1c2goc2xpZGVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzbGlkZXNUb1JlbmRlcjtcbiAgICAgICAgICB9KClcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwucmVuZGVyRXh0ZXJuYWxVcGRhdGUpIHtcbiAgICAgICAgICBvblJlbmRlcmVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW1pdCgndmlydHVhbFVwZGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZXBlbmRJbmRleGVzID0gW107XG4gICAgICBjb25zdCBhcHBlbmRJbmRleGVzID0gW107XG4gICAgICBjb25zdCBnZXRTbGlkZUluZGV4ID0gaW5kZXggPT4ge1xuICAgICAgICBsZXQgc2xpZGVJbmRleCA9IGluZGV4O1xuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgc2xpZGVJbmRleCA9IHNsaWRlcy5sZW5ndGggKyBpbmRleDtcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZUluZGV4ID49IHNsaWRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICBzbGlkZUluZGV4ID0gc2xpZGVJbmRleCAtIHNsaWRlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNsaWRlSW5kZXg7XG4gICAgICB9O1xuICAgICAgaWYgKGZvcmNlKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZXMuZmlsdGVyKGVsID0+IGVsLm1hdGNoZXMoYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApKS5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAgIHNsaWRlRWwucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHByZXZpb3VzRnJvbTsgaSA8PSBwcmV2aW91c1RvOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoaSA8IGZyb20gfHwgaSA+IHRvKSB7XG4gICAgICAgICAgICBjb25zdCBzbGlkZUluZGV4ID0gZ2V0U2xpZGVJbmRleChpKTtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZXMuZmlsdGVyKGVsID0+IGVsLm1hdGNoZXMoYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc31bZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3NsaWRlSW5kZXh9XCJdLCBzd2lwZXItc2xpZGVbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3NsaWRlSW5kZXh9XCJdYCkpLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgICAgICAgIHNsaWRlRWwucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGxvb3BGcm9tID0gaXNMb29wID8gLXNsaWRlcy5sZW5ndGggOiAwO1xuICAgICAgY29uc3QgbG9vcFRvID0gaXNMb29wID8gc2xpZGVzLmxlbmd0aCAqIDIgOiBzbGlkZXMubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IGxvb3BGcm9tOyBpIDwgbG9vcFRvOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGkgPj0gZnJvbSAmJiBpIDw9IHRvKSB7XG4gICAgICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IGdldFNsaWRlSW5kZXgoaSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiBwcmV2aW91c1RvID09PSAndW5kZWZpbmVkJyB8fCBmb3JjZSkge1xuICAgICAgICAgICAgYXBwZW5kSW5kZXhlcy5wdXNoKHNsaWRlSW5kZXgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaSA+IHByZXZpb3VzVG8pIGFwcGVuZEluZGV4ZXMucHVzaChzbGlkZUluZGV4KTtcbiAgICAgICAgICAgIGlmIChpIDwgcHJldmlvdXNGcm9tKSBwcmVwZW5kSW5kZXhlcy5wdXNoKHNsaWRlSW5kZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXBwZW5kSW5kZXhlcy5mb3JFYWNoKGluZGV4ID0+IHtcbiAgICAgICAgc3dpcGVyLnNsaWRlc0VsLmFwcGVuZChyZW5kZXJTbGlkZShzbGlkZXNbaW5kZXhdLCBpbmRleCkpO1xuICAgICAgfSk7XG4gICAgICBpZiAoaXNMb29wKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBwcmVwZW5kSW5kZXhlcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcHJlcGVuZEluZGV4ZXNbaV07XG4gICAgICAgICAgc3dpcGVyLnNsaWRlc0VsLnByZXBlbmQocmVuZGVyU2xpZGUoc2xpZGVzW2luZGV4XSwgaW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJlcGVuZEluZGV4ZXMuc29ydCgoYSwgYikgPT4gYiAtIGEpO1xuICAgICAgICBwcmVwZW5kSW5kZXhlcy5mb3JFYWNoKGluZGV4ID0+IHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVzRWwucHJlcGVuZChyZW5kZXJTbGlkZShzbGlkZXNbaW5kZXhdLCBpbmRleCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnRDaGlsZHJlbihzd2lwZXIuc2xpZGVzRWwsICcuc3dpcGVyLXNsaWRlLCBzd2lwZXItc2xpZGUnKS5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICBzbGlkZUVsLnN0eWxlW29mZnNldFByb3BdID0gYCR7b2Zmc2V0IC0gTWF0aC5hYnMoc3dpcGVyLmNzc092ZXJmbG93QWRqdXN0bWVudCgpKX1weGA7XG4gICAgICB9KTtcbiAgICAgIG9uUmVuZGVyZWQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXBwZW5kU2xpZGUoc2xpZGVzKSB7XG4gICAgICBpZiAodHlwZW9mIHNsaWRlcyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gc2xpZGVzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKHNsaWRlc1tpXSkgc3dpcGVyLnZpcnR1YWwuc2xpZGVzLnB1c2goc2xpZGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnZpcnR1YWwuc2xpZGVzLnB1c2goc2xpZGVzKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJlcGVuZFNsaWRlKHNsaWRlcykge1xuICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgICBsZXQgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleCArIDE7XG4gICAgICBsZXQgbnVtYmVyT2ZOZXdTbGlkZXMgPSAxO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2xpZGVzKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChzbGlkZXNbaV0pIHN3aXBlci52aXJ0dWFsLnNsaWRlcy51bnNoaWZ0KHNsaWRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleCArIHNsaWRlcy5sZW5ndGg7XG4gICAgICAgIG51bWJlck9mTmV3U2xpZGVzID0gc2xpZGVzLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcy51bnNoaWZ0KHNsaWRlcyk7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmNhY2hlKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gc3dpcGVyLnZpcnR1YWwuY2FjaGU7XG4gICAgICAgIGNvbnN0IG5ld0NhY2hlID0ge307XG4gICAgICAgIE9iamVjdC5rZXlzKGNhY2hlKS5mb3JFYWNoKGNhY2hlZEluZGV4ID0+IHtcbiAgICAgICAgICBjb25zdCBjYWNoZWRFbCA9IGNhY2hlW2NhY2hlZEluZGV4XTtcbiAgICAgICAgICBjb25zdCBjYWNoZWRFbEluZGV4ID0gY2FjaGVkRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpO1xuICAgICAgICAgIGlmIChjYWNoZWRFbEluZGV4KSB7XG4gICAgICAgICAgICBjYWNoZWRFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JywgcGFyc2VJbnQoY2FjaGVkRWxJbmRleCwgMTApICsgbnVtYmVyT2ZOZXdTbGlkZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdDYWNoZVtwYXJzZUludChjYWNoZWRJbmRleCwgMTApICsgbnVtYmVyT2ZOZXdTbGlkZXNdID0gY2FjaGVkRWw7XG4gICAgICAgIH0pO1xuICAgICAgICBzd2lwZXIudmlydHVhbC5jYWNoZSA9IG5ld0NhY2hlO1xuICAgICAgfVxuICAgICAgdXBkYXRlKHRydWUpO1xuICAgICAgc3dpcGVyLnNsaWRlVG8obmV3QWN0aXZlSW5kZXgsIDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVTbGlkZShzbGlkZXNJbmRleGVzKSB7XG4gICAgICBpZiAodHlwZW9mIHNsaWRlc0luZGV4ZXMgPT09ICd1bmRlZmluZWQnIHx8IHNsaWRlc0luZGV4ZXMgPT09IG51bGwpIHJldHVybjtcbiAgICAgIGxldCBhY3RpdmVJbmRleCA9IHN3aXBlci5hY3RpdmVJbmRleDtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNsaWRlc0luZGV4ZXMpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzbGlkZXNJbmRleGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbC5jYWNoZSkge1xuICAgICAgICAgICAgZGVsZXRlIHN3aXBlci52aXJ0dWFsLmNhY2hlW3NsaWRlc0luZGV4ZXNbaV1dO1xuICAgICAgICAgICAgLy8gc2hpZnQgY2FjaGUgaW5kZXhlc1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3dpcGVyLnZpcnR1YWwuY2FjaGUpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgaWYgKGtleSA+IHNsaWRlc0luZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICBzd2lwZXIudmlydHVhbC5jYWNoZVtrZXkgLSAxXSA9IHN3aXBlci52aXJ0dWFsLmNhY2hlW2tleV07XG4gICAgICAgICAgICAgICAgc3dpcGVyLnZpcnR1YWwuY2FjaGVba2V5IC0gMV0uc2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcsIGtleSAtIDEpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzd2lwZXIudmlydHVhbC5jYWNoZVtrZXldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpcGVyLnZpcnR1YWwuc2xpZGVzLnNwbGljZShzbGlkZXNJbmRleGVzW2ldLCAxKTtcbiAgICAgICAgICBpZiAoc2xpZGVzSW5kZXhlc1tpXSA8IGFjdGl2ZUluZGV4KSBhY3RpdmVJbmRleCAtPSAxO1xuICAgICAgICAgIGFjdGl2ZUluZGV4ID0gTWF0aC5tYXgoYWN0aXZlSW5kZXgsIDApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmNhY2hlKSB7XG4gICAgICAgICAgZGVsZXRlIHN3aXBlci52aXJ0dWFsLmNhY2hlW3NsaWRlc0luZGV4ZXNdO1xuICAgICAgICAgIC8vIHNoaWZ0IGNhY2hlIGluZGV4ZXNcbiAgICAgICAgICBPYmplY3Qua2V5cyhzd2lwZXIudmlydHVhbC5jYWNoZSkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleSA+IHNsaWRlc0luZGV4ZXMpIHtcbiAgICAgICAgICAgICAgc3dpcGVyLnZpcnR1YWwuY2FjaGVba2V5IC0gMV0gPSBzd2lwZXIudmlydHVhbC5jYWNoZVtrZXldO1xuICAgICAgICAgICAgICBzd2lwZXIudmlydHVhbC5jYWNoZVtrZXkgLSAxXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4Jywga2V5IC0gMSk7XG4gICAgICAgICAgICAgIGRlbGV0ZSBzd2lwZXIudmlydHVhbC5jYWNoZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHN3aXBlci52aXJ0dWFsLnNsaWRlcy5zcGxpY2Uoc2xpZGVzSW5kZXhlcywgMSk7XG4gICAgICAgIGlmIChzbGlkZXNJbmRleGVzIDwgYWN0aXZlSW5kZXgpIGFjdGl2ZUluZGV4IC09IDE7XG4gICAgICAgIGFjdGl2ZUluZGV4ID0gTWF0aC5tYXgoYWN0aXZlSW5kZXgsIDApO1xuICAgICAgfVxuICAgICAgdXBkYXRlKHRydWUpO1xuICAgICAgc3dpcGVyLnNsaWRlVG8oYWN0aXZlSW5kZXgsIDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxTbGlkZXMoKSB7XG4gICAgICBzd2lwZXIudmlydHVhbC5zbGlkZXMgPSBbXTtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwuY2FjaGUpIHtcbiAgICAgICAgc3dpcGVyLnZpcnR1YWwuY2FjaGUgPSB7fTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZSh0cnVlKTtcbiAgICAgIHN3aXBlci5zbGlkZVRvKDAsIDApO1xuICAgIH1cbiAgICBvbignYmVmb3JlSW5pdCcsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGxldCBkb21TbGlkZXNBc3NpZ25lZDtcbiAgICAgIGlmICh0eXBlb2Ygc3dpcGVyLnBhc3NlZFBhcmFtcy52aXJ0dWFsLnNsaWRlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVzID0gWy4uLnN3aXBlci5zbGlkZXNFbC5jaGlsZHJlbl0uZmlsdGVyKGVsID0+IGVsLm1hdGNoZXMoYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApKTtcbiAgICAgICAgaWYgKHNsaWRlcyAmJiBzbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgICAgc3dpcGVyLnZpcnR1YWwuc2xpZGVzID0gWy4uLnNsaWRlc107XG4gICAgICAgICAgZG9tU2xpZGVzQXNzaWduZWQgPSB0cnVlO1xuICAgICAgICAgIHNsaWRlcy5mb3JFYWNoKChzbGlkZUVsLCBzbGlkZUluZGV4KSA9PiB7XG4gICAgICAgICAgICBzbGlkZUVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItc2xpZGUtaW5kZXgnLCBzbGlkZUluZGV4KTtcbiAgICAgICAgICAgIHN3aXBlci52aXJ0dWFsLmNhY2hlW3NsaWRlSW5kZXhdID0gc2xpZGVFbDtcbiAgICAgICAgICAgIHNsaWRlRWwucmVtb3ZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghZG9tU2xpZGVzQXNzaWduZWQpIHtcbiAgICAgICAgc3dpcGVyLnZpcnR1YWwuc2xpZGVzID0gc3dpcGVyLnBhcmFtcy52aXJ0dWFsLnNsaWRlcztcbiAgICAgIH1cbiAgICAgIHN3aXBlci5jbGFzc05hbWVzLnB1c2goYCR7c3dpcGVyLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfXZpcnR1YWxgKTtcbiAgICAgIHN3aXBlci5wYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9IHRydWU7XG4gICAgICBzd2lwZXIub3JpZ2luYWxQYXJhbXMud2F0Y2hTbGlkZXNQcm9ncmVzcyA9IHRydWU7XG4gICAgICB1cGRhdGUoZmFsc2UsIHRydWUpO1xuICAgIH0pO1xuICAgIG9uKCdzZXRUcmFuc2xhdGUnLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlICYmICFzd2lwZXIuX2ltbWVkaWF0ZVZpcnR1YWwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNzc01vZGVUaW1lb3V0KTtcbiAgICAgICAgY3NzTW9kZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdpbml0IHVwZGF0ZSByZXNpemUnLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkKSByZXR1cm47XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHNldENTU1Byb3BlcnR5KHN3aXBlci53cmFwcGVyRWwsICctLXN3aXBlci12aXJ0dWFsLXNpemUnLCBgJHtzd2lwZXIudmlydHVhbFNpemV9cHhgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci52aXJ0dWFsLCB7XG4gICAgICBhcHBlbmRTbGlkZSxcbiAgICAgIHByZXBlbmRTbGlkZSxcbiAgICAgIHJlbW92ZVNsaWRlLFxuICAgICAgcmVtb3ZlQWxsU2xpZGVzLFxuICAgICAgdXBkYXRlXG4gICAgfSk7XG4gIH1cblxuICAvKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuICBmdW5jdGlvbiBLZXlib2FyZChfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uLFxuICAgICAgZW1pdFxuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICBjb25zdCB3aW5kb3cgPSBnZXRXaW5kb3coKTtcbiAgICBzd2lwZXIua2V5Ym9hcmQgPSB7XG4gICAgICBlbmFibGVkOiBmYWxzZVxuICAgIH07XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGtleWJvYXJkOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcbiAgICAgICAgcGFnZVVwRG93bjogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGhhbmRsZShldmVudCkge1xuICAgICAgaWYgKCFzd2lwZXIuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgY29uc3Qge1xuICAgICAgICBydGxUcmFuc2xhdGU6IHJ0bFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGxldCBlID0gZXZlbnQ7XG4gICAgICBpZiAoZS5vcmlnaW5hbEV2ZW50KSBlID0gZS5vcmlnaW5hbEV2ZW50OyAvLyBqcXVlcnkgZml4XG4gICAgICBjb25zdCBrYyA9IGUua2V5Q29kZSB8fCBlLmNoYXJDb2RlO1xuICAgICAgY29uc3QgcGFnZVVwRG93biA9IHN3aXBlci5wYXJhbXMua2V5Ym9hcmQucGFnZVVwRG93bjtcbiAgICAgIGNvbnN0IGlzUGFnZVVwID0gcGFnZVVwRG93biAmJiBrYyA9PT0gMzM7XG4gICAgICBjb25zdCBpc1BhZ2VEb3duID0gcGFnZVVwRG93biAmJiBrYyA9PT0gMzQ7XG4gICAgICBjb25zdCBpc0Fycm93TGVmdCA9IGtjID09PSAzNztcbiAgICAgIGNvbnN0IGlzQXJyb3dSaWdodCA9IGtjID09PSAzOTtcbiAgICAgIGNvbnN0IGlzQXJyb3dVcCA9IGtjID09PSAzODtcbiAgICAgIGNvbnN0IGlzQXJyb3dEb3duID0ga2MgPT09IDQwO1xuICAgICAgLy8gRGlyZWN0aW9ucyBsb2Nrc1xuICAgICAgaWYgKCFzd2lwZXIuYWxsb3dTbGlkZU5leHQgJiYgKHN3aXBlci5pc0hvcml6b250YWwoKSAmJiBpc0Fycm93UmlnaHQgfHwgc3dpcGVyLmlzVmVydGljYWwoKSAmJiBpc0Fycm93RG93biB8fCBpc1BhZ2VEb3duKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoIXN3aXBlci5hbGxvd1NsaWRlUHJldiAmJiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpICYmIGlzQXJyb3dMZWZ0IHx8IHN3aXBlci5pc1ZlcnRpY2FsKCkgJiYgaXNBcnJvd1VwIHx8IGlzUGFnZVVwKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lICYmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGV4dGFyZWEnKSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMua2V5Ym9hcmQub25seUluVmlld3BvcnQgJiYgKGlzUGFnZVVwIHx8IGlzUGFnZURvd24gfHwgaXNBcnJvd0xlZnQgfHwgaXNBcnJvd1JpZ2h0IHx8IGlzQXJyb3dVcCB8fCBpc0Fycm93RG93bikpIHtcbiAgICAgICAgbGV0IGluVmlldyA9IGZhbHNlO1xuICAgICAgICAvLyBDaGVjayB0aGF0IHN3aXBlciBzaG91bGQgYmUgaW5zaWRlIG9mIHZpc2libGUgYXJlYSBvZiB3aW5kb3dcbiAgICAgICAgaWYgKGVsZW1lbnRQYXJlbnRzKHN3aXBlci5lbCwgYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApLmxlbmd0aCA+IDAgJiYgZWxlbWVudFBhcmVudHMoc3dpcGVyLmVsLCBgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzfWApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWwgPSBzd2lwZXIuZWw7XG4gICAgICAgIGNvbnN0IHN3aXBlcldpZHRoID0gZWwuY2xpZW50V2lkdGg7XG4gICAgICAgIGNvbnN0IHN3aXBlckhlaWdodCA9IGVsLmNsaWVudEhlaWdodDtcbiAgICAgICAgY29uc3Qgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY29uc3Qgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBjb25zdCBzd2lwZXJPZmZzZXQgPSBlbGVtZW50T2Zmc2V0KGVsKTtcbiAgICAgICAgaWYgKHJ0bCkgc3dpcGVyT2Zmc2V0LmxlZnQgLT0gZWwuc2Nyb2xsTGVmdDtcbiAgICAgICAgY29uc3Qgc3dpcGVyQ29vcmQgPSBbW3N3aXBlck9mZnNldC5sZWZ0LCBzd2lwZXJPZmZzZXQudG9wXSwgW3N3aXBlck9mZnNldC5sZWZ0ICsgc3dpcGVyV2lkdGgsIHN3aXBlck9mZnNldC50b3BdLCBbc3dpcGVyT2Zmc2V0LmxlZnQsIHN3aXBlck9mZnNldC50b3AgKyBzd2lwZXJIZWlnaHRdLCBbc3dpcGVyT2Zmc2V0LmxlZnQgKyBzd2lwZXJXaWR0aCwgc3dpcGVyT2Zmc2V0LnRvcCArIHN3aXBlckhlaWdodF1dO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3aXBlckNvb3JkLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgcG9pbnQgPSBzd2lwZXJDb29yZFtpXTtcbiAgICAgICAgICBpZiAocG9pbnRbMF0gPj0gMCAmJiBwb2ludFswXSA8PSB3aW5kb3dXaWR0aCAmJiBwb2ludFsxXSA+PSAwICYmIHBvaW50WzFdIDw9IHdpbmRvd0hlaWdodCkge1xuICAgICAgICAgICAgaWYgKHBvaW50WzBdID09PSAwICYmIHBvaW50WzFdID09PSAwKSBjb250aW51ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgaW5WaWV3ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpblZpZXcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIGlmIChpc1BhZ2VVcCB8fCBpc1BhZ2VEb3duIHx8IGlzQXJyb3dMZWZ0IHx8IGlzQXJyb3dSaWdodCkge1xuICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChpc1BhZ2VEb3duIHx8IGlzQXJyb3dSaWdodCkgJiYgIXJ0bCB8fCAoaXNQYWdlVXAgfHwgaXNBcnJvd0xlZnQpICYmIHJ0bCkgc3dpcGVyLnNsaWRlTmV4dCgpO1xuICAgICAgICBpZiAoKGlzUGFnZVVwIHx8IGlzQXJyb3dMZWZ0KSAmJiAhcnRsIHx8IChpc1BhZ2VEb3duIHx8IGlzQXJyb3dSaWdodCkgJiYgcnRsKSBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNQYWdlVXAgfHwgaXNQYWdlRG93biB8fCBpc0Fycm93VXAgfHwgaXNBcnJvd0Rvd24pIHtcbiAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1BhZ2VEb3duIHx8IGlzQXJyb3dEb3duKSBzd2lwZXIuc2xpZGVOZXh0KCk7XG4gICAgICAgIGlmIChpc1BhZ2VVcCB8fCBpc0Fycm93VXApIHN3aXBlci5zbGlkZVByZXYoKTtcbiAgICAgIH1cbiAgICAgIGVtaXQoJ2tleVByZXNzJywga2MpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgaWYgKHN3aXBlci5rZXlib2FyZC5lbmFibGVkKSByZXR1cm47XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlKTtcbiAgICAgIHN3aXBlci5rZXlib2FyZC5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIGlmICghc3dpcGVyLmtleWJvYXJkLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGUpO1xuICAgICAgc3dpcGVyLmtleWJvYXJkLmVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5rZXlib2FyZC5lbmFibGVkKSB7XG4gICAgICAgIGVuYWJsZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5rZXlib2FyZC5lbmFibGVkKSB7XG4gICAgICAgIGRpc2FibGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5rZXlib2FyZCwge1xuICAgICAgZW5hYmxlLFxuICAgICAgZGlzYWJsZVxuICAgIH0pO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbiAgZnVuY3Rpb24gTW91c2V3aGVlbChfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uLFxuICAgICAgZW1pdFxuICAgIH0gPSBfcmVmO1xuICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBtb3VzZXdoZWVsOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICByZWxlYXNlT25FZGdlczogZmFsc2UsXG4gICAgICAgIGludmVydDogZmFsc2UsXG4gICAgICAgIGZvcmNlVG9BeGlzOiBmYWxzZSxcbiAgICAgICAgc2Vuc2l0aXZpdHk6IDEsXG4gICAgICAgIGV2ZW50c1RhcmdldDogJ2NvbnRhaW5lcicsXG4gICAgICAgIHRocmVzaG9sZERlbHRhOiBudWxsLFxuICAgICAgICB0aHJlc2hvbGRUaW1lOiBudWxsLFxuICAgICAgICBub01vdXNld2hlZWxDbGFzczogJ3N3aXBlci1uby1tb3VzZXdoZWVsJ1xuICAgICAgfVxuICAgIH0pO1xuICAgIHN3aXBlci5tb3VzZXdoZWVsID0ge1xuICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICB9O1xuICAgIGxldCB0aW1lb3V0O1xuICAgIGxldCBsYXN0U2Nyb2xsVGltZSA9IG5vdygpO1xuICAgIGxldCBsYXN0RXZlbnRCZWZvcmVTbmFwO1xuICAgIGNvbnN0IHJlY2VudFdoZWVsRXZlbnRzID0gW107XG4gICAgZnVuY3Rpb24gbm9ybWFsaXplKGUpIHtcbiAgICAgIC8vIFJlYXNvbmFibGUgZGVmYXVsdHNcbiAgICAgIGNvbnN0IFBJWEVMX1NURVAgPSAxMDtcbiAgICAgIGNvbnN0IExJTkVfSEVJR0hUID0gNDA7XG4gICAgICBjb25zdCBQQUdFX0hFSUdIVCA9IDgwMDtcbiAgICAgIGxldCBzWCA9IDA7XG4gICAgICBsZXQgc1kgPSAwOyAvLyBzcGluWCwgc3BpbllcbiAgICAgIGxldCBwWCA9IDA7XG4gICAgICBsZXQgcFkgPSAwOyAvLyBwaXhlbFgsIHBpeGVsWVxuXG4gICAgICAvLyBMZWdhY3lcbiAgICAgIGlmICgnZGV0YWlsJyBpbiBlKSB7XG4gICAgICAgIHNZID0gZS5kZXRhaWw7XG4gICAgICB9XG4gICAgICBpZiAoJ3doZWVsRGVsdGEnIGluIGUpIHtcbiAgICAgICAgc1kgPSAtZS53aGVlbERlbHRhIC8gMTIwO1xuICAgICAgfVxuICAgICAgaWYgKCd3aGVlbERlbHRhWScgaW4gZSkge1xuICAgICAgICBzWSA9IC1lLndoZWVsRGVsdGFZIC8gMTIwO1xuICAgICAgfVxuICAgICAgaWYgKCd3aGVlbERlbHRhWCcgaW4gZSkge1xuICAgICAgICBzWCA9IC1lLndoZWVsRGVsdGFYIC8gMTIwO1xuICAgICAgfVxuXG4gICAgICAvLyBzaWRlIHNjcm9sbGluZyBvbiBGRiB3aXRoIERPTU1vdXNlU2Nyb2xsXG4gICAgICBpZiAoJ2F4aXMnIGluIGUgJiYgZS5heGlzID09PSBlLkhPUklaT05UQUxfQVhJUykge1xuICAgICAgICBzWCA9IHNZO1xuICAgICAgICBzWSA9IDA7XG4gICAgICB9XG4gICAgICBwWCA9IHNYICogUElYRUxfU1RFUDtcbiAgICAgIHBZID0gc1kgKiBQSVhFTF9TVEVQO1xuICAgICAgaWYgKCdkZWx0YVknIGluIGUpIHtcbiAgICAgICAgcFkgPSBlLmRlbHRhWTtcbiAgICAgIH1cbiAgICAgIGlmICgnZGVsdGFYJyBpbiBlKSB7XG4gICAgICAgIHBYID0gZS5kZWx0YVg7XG4gICAgICB9XG4gICAgICBpZiAoZS5zaGlmdEtleSAmJiAhcFgpIHtcbiAgICAgICAgLy8gaWYgdXNlciBzY3JvbGxzIHdpdGggc2hpZnQgaGUgd2FudHMgaG9yaXpvbnRhbCBzY3JvbGxcbiAgICAgICAgcFggPSBwWTtcbiAgICAgICAgcFkgPSAwO1xuICAgICAgfVxuICAgICAgaWYgKChwWCB8fCBwWSkgJiYgZS5kZWx0YU1vZGUpIHtcbiAgICAgICAgaWYgKGUuZGVsdGFNb2RlID09PSAxKSB7XG4gICAgICAgICAgLy8gZGVsdGEgaW4gTElORSB1bml0c1xuICAgICAgICAgIHBYICo9IExJTkVfSEVJR0hUO1xuICAgICAgICAgIHBZICo9IExJTkVfSEVJR0hUO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGRlbHRhIGluIFBBR0UgdW5pdHNcbiAgICAgICAgICBwWCAqPSBQQUdFX0hFSUdIVDtcbiAgICAgICAgICBwWSAqPSBQQUdFX0hFSUdIVDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGYWxsLWJhY2sgaWYgc3BpbiBjYW5ub3QgYmUgZGV0ZXJtaW5lZFxuICAgICAgaWYgKHBYICYmICFzWCkge1xuICAgICAgICBzWCA9IHBYIDwgMSA/IC0xIDogMTtcbiAgICAgIH1cbiAgICAgIGlmIChwWSAmJiAhc1kpIHtcbiAgICAgICAgc1kgPSBwWSA8IDEgPyAtMSA6IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzcGluWDogc1gsXG4gICAgICAgIHNwaW5ZOiBzWSxcbiAgICAgICAgcGl4ZWxYOiBwWCxcbiAgICAgICAgcGl4ZWxZOiBwWVxuICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlTW91c2VFbnRlcigpIHtcbiAgICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHN3aXBlci5tb3VzZUVudGVyZWQgPSB0cnVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVNb3VzZUxlYXZlKCkge1xuICAgICAgaWYgKCFzd2lwZXIuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgc3dpcGVyLm1vdXNlRW50ZXJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhbmltYXRlU2xpZGVyKG5ld0V2ZW50KSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLnRocmVzaG9sZERlbHRhICYmIG5ld0V2ZW50LmRlbHRhIDwgc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLnRocmVzaG9sZERlbHRhKSB7XG4gICAgICAgIC8vIFByZXZlbnQgaWYgZGVsdGEgb2Ygd2hlZWwgc2Nyb2xsIGRlbHRhIGlzIGJlbG93IGNvbmZpZ3VyZWQgdGhyZXNob2xkXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwudGhyZXNob2xkVGltZSAmJiBub3coKSAtIGxhc3RTY3JvbGxUaW1lIDwgc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLnRocmVzaG9sZFRpbWUpIHtcbiAgICAgICAgLy8gUHJldmVudCBpZiB0aW1lIGJldHdlZW4gc2Nyb2xscyBpcyBiZWxvdyBjb25maWd1cmVkIHRocmVzaG9sZFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBtb3ZlbWVudCBpcyBOT1QgYmlnIGVub3VnaCBhbmRcbiAgICAgIC8vIGlmIHRoZSBsYXN0IHRpbWUgdGhlIHVzZXIgc2Nyb2xsZWQgd2FzIHRvbyBjbG9zZSB0byB0aGUgY3VycmVudCBvbmUgKGF2b2lkIGNvbnRpbnVvdXNseSB0cmlnZ2VyaW5nIHRoZSBzbGlkZXIpOlxuICAgICAgLy8gICBEb24ndCBnbyBhbnkgZnVydGhlciAoYXZvaWQgaW5zaWduaWZpY2FudCBzY3JvbGwgbW92ZW1lbnQpLlxuICAgICAgaWYgKG5ld0V2ZW50LmRlbHRhID49IDYgJiYgbm93KCkgLSBsYXN0U2Nyb2xsVGltZSA8IDYwKSB7XG4gICAgICAgIC8vIFJldHVybiBmYWxzZSBhcyBhIGRlZmF1bHRcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICAvLyBJZiB1c2VyIGlzIHNjcm9sbGluZyB0b3dhcmRzIHRoZSBlbmQ6XG4gICAgICAvLyAgIElmIHRoZSBzbGlkZXIgaGFzbid0IGhpdCB0aGUgbGF0ZXN0IHNsaWRlIG9yXG4gICAgICAvLyAgIGlmIHRoZSBzbGlkZXIgaXMgYSBsb29wIGFuZFxuICAgICAgLy8gICBpZiB0aGUgc2xpZGVyIGlzbid0IG1vdmluZyByaWdodCBub3c6XG4gICAgICAvLyAgICAgR28gdG8gbmV4dCBzbGlkZSBhbmRcbiAgICAgIC8vICAgICBlbWl0IGEgc2Nyb2xsIGV2ZW50LlxuICAgICAgLy8gRWxzZSAodGhlIHVzZXIgaXMgc2Nyb2xsaW5nIHRvd2FyZHMgdGhlIGJlZ2lubmluZykgYW5kXG4gICAgICAvLyBpZiB0aGUgc2xpZGVyIGhhc24ndCBoaXQgdGhlIGZpcnN0IHNsaWRlIG9yXG4gICAgICAvLyBpZiB0aGUgc2xpZGVyIGlzIGEgbG9vcCBhbmRcbiAgICAgIC8vIGlmIHRoZSBzbGlkZXIgaXNuJ3QgbW92aW5nIHJpZ2h0IG5vdzpcbiAgICAgIC8vICAgR28gdG8gcHJldiBzbGlkZSBhbmRcbiAgICAgIC8vICAgZW1pdCBhIHNjcm9sbCBldmVudC5cbiAgICAgIGlmIChuZXdFdmVudC5kaXJlY3Rpb24gPCAwKSB7XG4gICAgICAgIGlmICgoIXN3aXBlci5pc0VuZCB8fCBzd2lwZXIucGFyYW1zLmxvb3ApICYmICFzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlTmV4dCgpO1xuICAgICAgICAgIGVtaXQoJ3Njcm9sbCcsIG5ld0V2ZW50LnJhdyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoKCFzd2lwZXIuaXNCZWdpbm5pbmcgfHwgc3dpcGVyLnBhcmFtcy5sb29wKSAmJiAhc3dpcGVyLmFuaW1hdGluZykge1xuICAgICAgICBzd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgICAgIGVtaXQoJ3Njcm9sbCcsIG5ld0V2ZW50LnJhdyk7XG4gICAgICB9XG4gICAgICAvLyBJZiB5b3UgZ290IGhlcmUgaXMgYmVjYXVzZSBhbiBhbmltYXRpb24gaGFzIGJlZW4gdHJpZ2dlcmVkIHNvIHN0b3JlIHRoZSBjdXJyZW50IHRpbWVcbiAgICAgIGxhc3RTY3JvbGxUaW1lID0gbmV3IHdpbmRvdy5EYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgLy8gUmV0dXJuIGZhbHNlIGFzIGEgZGVmYXVsdFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWxlYXNlU2Nyb2xsKG5ld0V2ZW50KSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLm1vdXNld2hlZWw7XG4gICAgICBpZiAobmV3RXZlbnQuZGlyZWN0aW9uIDwgMCkge1xuICAgICAgICBpZiAoc3dpcGVyLmlzRW5kICYmICFzd2lwZXIucGFyYW1zLmxvb3AgJiYgcGFyYW1zLnJlbGVhc2VPbkVkZ2VzKSB7XG4gICAgICAgICAgLy8gUmV0dXJuIHRydWUgdG8gYW5pbWF0ZSBzY3JvbGwgb24gZWRnZXNcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzd2lwZXIuaXNCZWdpbm5pbmcgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiBwYXJhbXMucmVsZWFzZU9uRWRnZXMpIHtcbiAgICAgICAgLy8gUmV0dXJuIHRydWUgdG8gYW5pbWF0ZSBzY3JvbGwgb24gZWRnZXNcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZShldmVudCkge1xuICAgICAgbGV0IGUgPSBldmVudDtcbiAgICAgIGxldCBkaXNhYmxlUGFyZW50U3dpcGVyID0gdHJ1ZTtcbiAgICAgIGlmICghc3dpcGVyLmVuYWJsZWQpIHJldHVybjtcblxuICAgICAgLy8gSWdub3JlIGV2ZW50IGlmIHRoZSB0YXJnZXQgb3IgaXRzIHBhcmVudHMgaGF2ZSB0aGUgc3dpcGVyLW5vLW1vdXNld2hlZWwgY2xhc3NcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xvc2VzdChgLiR7c3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLm5vTW91c2V3aGVlbENsYXNzfWApKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLm1vdXNld2hlZWw7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGxldCB0YXJnZXRFbCA9IHN3aXBlci5lbDtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwuZXZlbnRzVGFyZ2V0ICE9PSAnY29udGFpbmVyJykge1xuICAgICAgICB0YXJnZXRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCk7XG4gICAgICB9XG4gICAgICBjb25zdCB0YXJnZXRFbENvbnRhaW5zVGFyZ2V0ID0gdGFyZ2V0RWwgJiYgdGFyZ2V0RWwuY29udGFpbnMoZS50YXJnZXQpO1xuICAgICAgaWYgKCFzd2lwZXIubW91c2VFbnRlcmVkICYmICF0YXJnZXRFbENvbnRhaW5zVGFyZ2V0ICYmICFwYXJhbXMucmVsZWFzZU9uRWRnZXMpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKGUub3JpZ2luYWxFdmVudCkgZSA9IGUub3JpZ2luYWxFdmVudDsgLy8ganF1ZXJ5IGZpeFxuICAgICAgbGV0IGRlbHRhID0gMDtcbiAgICAgIGNvbnN0IHJ0bEZhY3RvciA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyAtMSA6IDE7XG4gICAgICBjb25zdCBkYXRhID0gbm9ybWFsaXplKGUpO1xuICAgICAgaWYgKHBhcmFtcy5mb3JjZVRvQXhpcykge1xuICAgICAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgICAgaWYgKE1hdGguYWJzKGRhdGEucGl4ZWxYKSA+IE1hdGguYWJzKGRhdGEucGl4ZWxZKSkgZGVsdGEgPSAtZGF0YS5waXhlbFggKiBydGxGYWN0b3I7ZWxzZSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChNYXRoLmFicyhkYXRhLnBpeGVsWSkgPiBNYXRoLmFicyhkYXRhLnBpeGVsWCkpIGRlbHRhID0gLWRhdGEucGl4ZWxZO2Vsc2UgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWx0YSA9IE1hdGguYWJzKGRhdGEucGl4ZWxYKSA+IE1hdGguYWJzKGRhdGEucGl4ZWxZKSA/IC1kYXRhLnBpeGVsWCAqIHJ0bEZhY3RvciA6IC1kYXRhLnBpeGVsWTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWx0YSA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAocGFyYW1zLmludmVydCkgZGVsdGEgPSAtZGVsdGE7XG5cbiAgICAgIC8vIEdldCB0aGUgc2Nyb2xsIHBvc2l0aW9uc1xuICAgICAgbGV0IHBvc2l0aW9ucyA9IHN3aXBlci5nZXRUcmFuc2xhdGUoKSArIGRlbHRhICogcGFyYW1zLnNlbnNpdGl2aXR5O1xuICAgICAgaWYgKHBvc2l0aW9ucyA+PSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHBvc2l0aW9ucyA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICAgIGlmIChwb3NpdGlvbnMgPD0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSBwb3NpdGlvbnMgPSBzd2lwZXIubWF4VHJhbnNsYXRlKCk7XG5cbiAgICAgIC8vIFdoZW4gbG9vcCBpcyB0cnVlOlxuICAgICAgLy8gICAgIHRoZSBkaXNhYmxlUGFyZW50U3dpcGVyIHdpbGwgYmUgdHJ1ZS5cbiAgICAgIC8vIFdoZW4gbG9vcCBpcyBmYWxzZTpcbiAgICAgIC8vICAgICBpZiB0aGUgc2Nyb2xsIHBvc2l0aW9ucyBpcyBub3Qgb24gZWRnZSxcbiAgICAgIC8vICAgICB0aGVuIHRoZSBkaXNhYmxlUGFyZW50U3dpcGVyIHdpbGwgYmUgdHJ1ZS5cbiAgICAgIC8vICAgICBpZiB0aGUgc2Nyb2xsIG9uIGVkZ2UgcG9zaXRpb25zLFxuICAgICAgLy8gICAgIHRoZW4gdGhlIGRpc2FibGVQYXJlbnRTd2lwZXIgd2lsbCBiZSBmYWxzZS5cbiAgICAgIGRpc2FibGVQYXJlbnRTd2lwZXIgPSBzd2lwZXIucGFyYW1zLmxvb3AgPyB0cnVlIDogIShwb3NpdGlvbnMgPT09IHN3aXBlci5taW5UcmFuc2xhdGUoKSB8fCBwb3NpdGlvbnMgPT09IHN3aXBlci5tYXhUcmFuc2xhdGUoKSk7XG4gICAgICBpZiAoZGlzYWJsZVBhcmVudFN3aXBlciAmJiBzd2lwZXIucGFyYW1zLm5lc3RlZCkgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5mcmVlTW9kZSB8fCAhc3dpcGVyLnBhcmFtcy5mcmVlTW9kZS5lbmFibGVkKSB7XG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBuZXcgZXZlbnQgaW4gYSB2YXJpYWJsZSB3aGljaCBzdG9yZXMgdGhlIHJlbGV2YW50IGRhdGFcbiAgICAgICAgY29uc3QgbmV3RXZlbnQgPSB7XG4gICAgICAgICAgdGltZTogbm93KCksXG4gICAgICAgICAgZGVsdGE6IE1hdGguYWJzKGRlbHRhKSxcbiAgICAgICAgICBkaXJlY3Rpb246IE1hdGguc2lnbihkZWx0YSksXG4gICAgICAgICAgcmF3OiBldmVudFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEtlZXAgdGhlIG1vc3QgcmVjZW50IGV2ZW50c1xuICAgICAgICBpZiAocmVjZW50V2hlZWxFdmVudHMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICByZWNlbnRXaGVlbEV2ZW50cy5zaGlmdCgpOyAvLyBvbmx5IHN0b3JlIHRoZSBsYXN0IE4gZXZlbnRzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcmV2RXZlbnQgPSByZWNlbnRXaGVlbEV2ZW50cy5sZW5ndGggPyByZWNlbnRXaGVlbEV2ZW50c1tyZWNlbnRXaGVlbEV2ZW50cy5sZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmVjZW50V2hlZWxFdmVudHMucHVzaChuZXdFdmVudCk7XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIHByZXZpb3VzIHJlY29yZGVkIGV2ZW50OlxuICAgICAgICAvLyAgIElmIGRpcmVjdGlvbiBoYXMgY2hhbmdlZCBvclxuICAgICAgICAvLyAgIGlmIHRoZSBzY3JvbGwgaXMgcXVpY2tlciB0aGFuIHRoZSBwcmV2aW91cyBvbmU6XG4gICAgICAgIC8vICAgICBBbmltYXRlIHRoZSBzbGlkZXIuXG4gICAgICAgIC8vIEVsc2UgKHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgdGhlIHdoZWVsIGlzIG1vdmVkKTpcbiAgICAgICAgLy8gICAgIEFuaW1hdGUgdGhlIHNsaWRlci5cbiAgICAgICAgaWYgKHByZXZFdmVudCkge1xuICAgICAgICAgIGlmIChuZXdFdmVudC5kaXJlY3Rpb24gIT09IHByZXZFdmVudC5kaXJlY3Rpb24gfHwgbmV3RXZlbnQuZGVsdGEgPiBwcmV2RXZlbnQuZGVsdGEgfHwgbmV3RXZlbnQudGltZSA+IHByZXZFdmVudC50aW1lICsgMTUwKSB7XG4gICAgICAgICAgICBhbmltYXRlU2xpZGVyKG5ld0V2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYW5pbWF0ZVNsaWRlcihuZXdFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBpdCdzIHRpbWUgdG8gcmVsZWFzZSB0aGUgc2Nyb2xsOlxuICAgICAgICAvLyAgIFJldHVybiBub3cgc28geW91IGRvbid0IGhpdCB0aGUgcHJldmVudERlZmF1bHQuXG4gICAgICAgIGlmIChyZWxlYXNlU2Nyb2xsKG5ld0V2ZW50KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGcmVlbW9kZSBvciBzY3JvbGxDb250YWluZXI6XG5cbiAgICAgICAgLy8gSWYgd2UgcmVjZW50bHkgc25hcHBlZCBhZnRlciBhIG1vbWVudHVtIHNjcm9sbCwgdGhlbiBpZ25vcmUgd2hlZWwgZXZlbnRzXG4gICAgICAgIC8vIHRvIGdpdmUgdGltZSBmb3IgdGhlIGRlY2VsZXJhdGlvbiB0byBmaW5pc2guIFN0b3AgaWdub3JpbmcgYWZ0ZXIgNTAwIG1zZWNzXG4gICAgICAgIC8vIG9yIGlmIGl0J3MgYSBuZXcgc2Nyb2xsIChsYXJnZXIgZGVsdGEgb3IgaW52ZXJzZSBzaWduIGFzIGxhc3QgZXZlbnQgYmVmb3JlXG4gICAgICAgIC8vIGFuIGVuZC1vZi1tb21lbnR1bSBzbmFwKS5cbiAgICAgICAgY29uc3QgbmV3RXZlbnQgPSB7XG4gICAgICAgICAgdGltZTogbm93KCksXG4gICAgICAgICAgZGVsdGE6IE1hdGguYWJzKGRlbHRhKSxcbiAgICAgICAgICBkaXJlY3Rpb246IE1hdGguc2lnbihkZWx0YSlcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaWdub3JlV2hlZWxFdmVudHMgPSBsYXN0RXZlbnRCZWZvcmVTbmFwICYmIG5ld0V2ZW50LnRpbWUgPCBsYXN0RXZlbnRCZWZvcmVTbmFwLnRpbWUgKyA1MDAgJiYgbmV3RXZlbnQuZGVsdGEgPD0gbGFzdEV2ZW50QmVmb3JlU25hcC5kZWx0YSAmJiBuZXdFdmVudC5kaXJlY3Rpb24gPT09IGxhc3RFdmVudEJlZm9yZVNuYXAuZGlyZWN0aW9uO1xuICAgICAgICBpZiAoIWlnbm9yZVdoZWVsRXZlbnRzKSB7XG4gICAgICAgICAgbGFzdEV2ZW50QmVmb3JlU25hcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBsZXQgcG9zaXRpb24gPSBzd2lwZXIuZ2V0VHJhbnNsYXRlKCkgKyBkZWx0YSAqIHBhcmFtcy5zZW5zaXRpdml0eTtcbiAgICAgICAgICBjb25zdCB3YXNCZWdpbm5pbmcgPSBzd2lwZXIuaXNCZWdpbm5pbmc7XG4gICAgICAgICAgY29uc3Qgd2FzRW5kID0gc3dpcGVyLmlzRW5kO1xuICAgICAgICAgIGlmIChwb3NpdGlvbiA+PSBzd2lwZXIubWluVHJhbnNsYXRlKCkpIHBvc2l0aW9uID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpO1xuICAgICAgICAgIGlmIChwb3NpdGlvbiA8PSBzd2lwZXIubWF4VHJhbnNsYXRlKCkpIHBvc2l0aW9uID0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpO1xuICAgICAgICAgIHN3aXBlci5zZXRUcmFuc2l0aW9uKDApO1xuICAgICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUocG9zaXRpb24pO1xuICAgICAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcygpO1xuICAgICAgICAgIHN3aXBlci51cGRhdGVBY3RpdmVJbmRleCgpO1xuICAgICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICAgICAgaWYgKCF3YXNCZWdpbm5pbmcgJiYgc3dpcGVyLmlzQmVnaW5uaW5nIHx8ICF3YXNFbmQgJiYgc3dpcGVyLmlzRW5kKSB7XG4gICAgICAgICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgICAgICBzd2lwZXIubG9vcEZpeCh7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbjogbmV3RXZlbnQuZGlyZWN0aW9uIDwgMCA/ICduZXh0JyA6ICdwcmV2JyxcbiAgICAgICAgICAgICAgYnlNb3VzZXdoZWVsOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdoZWVsIHNjcm9sbGluZyBzdGFydHMgd2l0aCBzdGlja3kgKGFrYSBzbmFwKSBlbmFibGVkLCB0aGVuIGRldGVjdFxuICAgICAgICAgICAgLy8gdGhlIGVuZCBvZiBhIG1vbWVudHVtIHNjcm9sbCBieSBzdG9yaW5nIHJlY2VudCAoTj0xNT8pIHdoZWVsIGV2ZW50cy5cbiAgICAgICAgICAgIC8vIDEuIGRvIGFsbCBOIGV2ZW50cyBoYXZlIGRlY3JlYXNpbmcgb3Igc2FtZSAoYWJzb2x1dGUgdmFsdWUpIGRlbHRhP1xuICAgICAgICAgICAgLy8gMi4gZGlkIGFsbCBOIGV2ZW50cyBhcnJpdmUgaW4gdGhlIGxhc3QgTSAoTT01MDA/KSBtc2Vjcz9cbiAgICAgICAgICAgIC8vIDMuIGRvZXMgdGhlIGVhcmxpZXN0IGV2ZW50IGhhdmUgYW4gKGFic29sdXRlIHZhbHVlKSBkZWx0YSB0aGF0J3NcbiAgICAgICAgICAgIC8vICAgIGF0IGxlYXN0IFAgKFA9MT8pIGxhcmdlciB0aGFuIHRoZSBtb3N0IHJlY2VudCBldmVudCdzIGRlbHRhP1xuICAgICAgICAgICAgLy8gNC4gZG9lcyB0aGUgbGF0ZXN0IGV2ZW50IGhhdmUgYSBkZWx0YSB0aGF0J3Mgc21hbGxlciB0aGFuIFEgKFE9Nj8pIHBpeGVscz9cbiAgICAgICAgICAgIC8vIElmIDEtNCBhcmUgXCJ5ZXNcIiB0aGVuIHdlJ3JlIG5lYXIgdGhlIGVuZCBvZiBhIG1vbWVudHVtIHNjcm9sbCBkZWNlbGVyYXRpb24uXG4gICAgICAgICAgICAvLyBTbmFwIGltbWVkaWF0ZWx5IGFuZCBpZ25vcmUgcmVtYWluaW5nIHdoZWVsIGV2ZW50cyBpbiB0aGlzIHNjcm9sbC5cbiAgICAgICAgICAgIC8vIFNlZSBjb21tZW50IGFib3ZlIGZvciBcInJlbWFpbmluZyB3aGVlbCBldmVudHMgaW4gdGhpcyBzY3JvbGxcIiBkZXRlcm1pbmF0aW9uLlxuICAgICAgICAgICAgLy8gSWYgMS00IGFyZW4ndCBzYXRpc2ZpZWQsIHRoZW4gd2FpdCB0byBzbmFwIHVudGlsIDUwMG1zIGFmdGVyIHRoZSBsYXN0IGV2ZW50LlxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgdGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChyZWNlbnRXaGVlbEV2ZW50cy5sZW5ndGggPj0gMTUpIHtcbiAgICAgICAgICAgICAgcmVjZW50V2hlZWxFdmVudHMuc2hpZnQoKTsgLy8gb25seSBzdG9yZSB0aGUgbGFzdCBOIGV2ZW50c1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcmV2RXZlbnQgPSByZWNlbnRXaGVlbEV2ZW50cy5sZW5ndGggPyByZWNlbnRXaGVlbEV2ZW50c1tyZWNlbnRXaGVlbEV2ZW50cy5sZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RXZlbnQgPSByZWNlbnRXaGVlbEV2ZW50c1swXTtcbiAgICAgICAgICAgIHJlY2VudFdoZWVsRXZlbnRzLnB1c2gobmV3RXZlbnQpO1xuICAgICAgICAgICAgaWYgKHByZXZFdmVudCAmJiAobmV3RXZlbnQuZGVsdGEgPiBwcmV2RXZlbnQuZGVsdGEgfHwgbmV3RXZlbnQuZGlyZWN0aW9uICE9PSBwcmV2RXZlbnQuZGlyZWN0aW9uKSkge1xuICAgICAgICAgICAgICAvLyBJbmNyZWFzaW5nIG9yIHJldmVyc2Utc2lnbiBkZWx0YSBtZWFucyB0aGUgdXNlciBzdGFydGVkIHNjcm9sbGluZyBhZ2Fpbi4gQ2xlYXIgdGhlIHdoZWVsIGV2ZW50IGxvZy5cbiAgICAgICAgICAgICAgcmVjZW50V2hlZWxFdmVudHMuc3BsaWNlKDApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWNlbnRXaGVlbEV2ZW50cy5sZW5ndGggPj0gMTUgJiYgbmV3RXZlbnQudGltZSAtIGZpcnN0RXZlbnQudGltZSA8IDUwMCAmJiBmaXJzdEV2ZW50LmRlbHRhIC0gbmV3RXZlbnQuZGVsdGEgPj0gMSAmJiBuZXdFdmVudC5kZWx0YSA8PSA2KSB7XG4gICAgICAgICAgICAgIC8vIFdlJ3JlIGF0IHRoZSBlbmQgb2YgdGhlIGRlY2VsZXJhdGlvbiBvZiBhIG1vbWVudHVtIHNjcm9sbCwgc28gdGhlcmUncyBubyBuZWVkXG4gICAgICAgICAgICAgIC8vIHRvIHdhaXQgZm9yIG1vcmUgZXZlbnRzLiBTbmFwIEFTQVAgb24gdGhlIG5leHQgdGljay5cbiAgICAgICAgICAgICAgLy8gQWxzbywgYmVjYXVzZSB0aGVyZSdzIHNvbWUgcmVtYWluaW5nIG1vbWVudHVtIHdlJ2xsIGJpYXMgdGhlIHNuYXAgaW4gdGhlXG4gICAgICAgICAgICAgIC8vIGRpcmVjdGlvbiBvZiB0aGUgb25nb2luZyBzY3JvbGwgYmVjYXVzZSBpdCdzIGJldHRlciBVWCBmb3IgdGhlIHNjcm9sbCB0byBzbmFwXG4gICAgICAgICAgICAgIC8vIGluIHRoZSBzYW1lIGRpcmVjdGlvbiBhcyB0aGUgc2Nyb2xsIGluc3RlYWQgb2YgcmV2ZXJzaW5nIHRvIHNuYXAuICBUaGVyZWZvcmUsXG4gICAgICAgICAgICAgIC8vIGlmIGl0J3MgYWxyZWFkeSBzY3JvbGxlZCBtb3JlIHRoYW4gMjAlIGluIHRoZSBjdXJyZW50IGRpcmVjdGlvbiwga2VlcCBnb2luZy5cbiAgICAgICAgICAgICAgY29uc3Qgc25hcFRvVGhyZXNob2xkID0gZGVsdGEgPiAwID8gMC44IDogMC4yO1xuICAgICAgICAgICAgICBsYXN0RXZlbnRCZWZvcmVTbmFwID0gbmV3RXZlbnQ7XG4gICAgICAgICAgICAgIHJlY2VudFdoZWVsRXZlbnRzLnNwbGljZSgwKTtcbiAgICAgICAgICAgICAgdGltZW91dCA9IG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzd2lwZXIuc2xpZGVUb0Nsb3Nlc3Qoc3dpcGVyLnBhcmFtcy5zcGVlZCwgdHJ1ZSwgdW5kZWZpbmVkLCBzbmFwVG9UaHJlc2hvbGQpO1xuICAgICAgICAgICAgICB9LCAwKTsgLy8gbm8gZGVsYXk7IG1vdmUgb24gbmV4dCB0aWNrXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGltZW91dCkge1xuICAgICAgICAgICAgICAvLyBpZiB3ZSBnZXQgaGVyZSwgdGhlbiB3ZSBoYXZlbid0IGRldGVjdGVkIHRoZSBlbmQgb2YgYSBtb21lbnR1bSBzY3JvbGwsIHNvXG4gICAgICAgICAgICAgIC8vIHdlJ2xsIGNvbnNpZGVyIGEgc2Nyb2xsIFwiY29tcGxldGVcIiB3aGVuIHRoZXJlIGhhdmVuJ3QgYmVlbiBhbnkgd2hlZWwgZXZlbnRzXG4gICAgICAgICAgICAgIC8vIGZvciA1MDBtcy5cbiAgICAgICAgICAgICAgdGltZW91dCA9IG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzbmFwVG9UaHJlc2hvbGQgPSAwLjU7XG4gICAgICAgICAgICAgICAgbGFzdEV2ZW50QmVmb3JlU25hcCA9IG5ld0V2ZW50O1xuICAgICAgICAgICAgICAgIHJlY2VudFdoZWVsRXZlbnRzLnNwbGljZSgwKTtcbiAgICAgICAgICAgICAgICBzd2lwZXIuc2xpZGVUb0Nsb3Nlc3Qoc3dpcGVyLnBhcmFtcy5zcGVlZCwgdHJ1ZSwgdW5kZWZpbmVkLCBzbmFwVG9UaHJlc2hvbGQpO1xuICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEVtaXQgZXZlbnRcbiAgICAgICAgICBpZiAoIWlnbm9yZVdoZWVsRXZlbnRzKSBlbWl0KCdzY3JvbGwnLCBlKTtcblxuICAgICAgICAgIC8vIFN0b3AgYXV0b3BsYXlcbiAgICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5hdXRvcGxheSAmJiBzd2lwZXIucGFyYW1zLmF1dG9wbGF5RGlzYWJsZU9uSW50ZXJhY3Rpb24pIHN3aXBlci5hdXRvcGxheS5zdG9wKCk7XG4gICAgICAgICAgLy8gUmV0dXJuIHBhZ2Ugc2Nyb2xsIG9uIGVkZ2UgcG9zaXRpb25zXG4gICAgICAgICAgaWYgKHBhcmFtcy5yZWxlYXNlT25FZGdlcyAmJiAocG9zaXRpb24gPT09IHN3aXBlci5taW5UcmFuc2xhdGUoKSB8fCBwb3NpdGlvbiA9PT0gc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBldmVudHMobWV0aG9kKSB7XG4gICAgICBsZXQgdGFyZ2V0RWwgPSBzd2lwZXIuZWw7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5tb3VzZXdoZWVsLmV2ZW50c1RhcmdldCAhPT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgdGFyZ2V0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC5ldmVudHNUYXJnZXQpO1xuICAgICAgfVxuICAgICAgdGFyZ2V0RWxbbWV0aG9kXSgnbW91c2VlbnRlcicsIGhhbmRsZU1vdXNlRW50ZXIpO1xuICAgICAgdGFyZ2V0RWxbbWV0aG9kXSgnbW91c2VsZWF2ZScsIGhhbmRsZU1vdXNlTGVhdmUpO1xuICAgICAgdGFyZ2V0RWxbbWV0aG9kXSgnd2hlZWwnLCBoYW5kbGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBoYW5kbGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIubW91c2V3aGVlbC5lbmFibGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBldmVudHMoJ2FkZEV2ZW50TGlzdGVuZXInKTtcbiAgICAgIHN3aXBlci5tb3VzZXdoZWVsLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoIXN3aXBlci5tb3VzZXdoZWVsLmVuYWJsZWQpIHJldHVybiBmYWxzZTtcbiAgICAgIGV2ZW50cygncmVtb3ZlRXZlbnRMaXN0ZW5lcicpO1xuICAgICAgc3dpcGVyLm1vdXNld2hlZWwuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG9uKCdpbml0JywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLm1vdXNld2hlZWwuZW5hYmxlZCAmJiBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgZGlzYWJsZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHN3aXBlci5wYXJhbXMubW91c2V3aGVlbC5lbmFibGVkKSBlbmFibGUoKTtcbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgZW5hYmxlKCk7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLm1vdXNld2hlZWwuZW5hYmxlZCkgZGlzYWJsZSgpO1xuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLm1vdXNld2hlZWwsIHtcbiAgICAgIGVuYWJsZSxcbiAgICAgIGRpc2FibGVcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRJZk5vdERlZmluZWQoc3dpcGVyLCBvcmlnaW5hbFBhcmFtcywgcGFyYW1zLCBjaGVja1Byb3BzKSB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuY3JlYXRlRWxlbWVudHMpIHtcbiAgICAgIE9iamVjdC5rZXlzKGNoZWNrUHJvcHMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKCFwYXJhbXNba2V5XSAmJiBwYXJhbXMuYXV0byA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGxldCBlbGVtZW50ID0gZWxlbWVudENoaWxkcmVuKHN3aXBlci5lbCwgYC4ke2NoZWNrUHJvcHNba2V5XX1gKVswXTtcbiAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBjaGVja1Byb3BzW2tleV0pO1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjaGVja1Byb3BzW2tleV07XG4gICAgICAgICAgICBzd2lwZXIuZWwuYXBwZW5kKGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJhbXNba2V5XSA9IGVsZW1lbnQ7XG4gICAgICAgICAgb3JpZ2luYWxQYXJhbXNba2V5XSA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgZnVuY3Rpb24gTmF2aWdhdGlvbihfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uLFxuICAgICAgZW1pdFxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogbnVsbCxcbiAgICAgICAgcHJldkVsOiBudWxsLFxuICAgICAgICBoaWRlT25DbGljazogZmFsc2UsXG4gICAgICAgIGRpc2FibGVkQ2xhc3M6ICdzd2lwZXItYnV0dG9uLWRpc2FibGVkJyxcbiAgICAgICAgaGlkZGVuQ2xhc3M6ICdzd2lwZXItYnV0dG9uLWhpZGRlbicsXG4gICAgICAgIGxvY2tDbGFzczogJ3N3aXBlci1idXR0b24tbG9jaycsXG4gICAgICAgIG5hdmlnYXRpb25EaXNhYmxlZENsYXNzOiAnc3dpcGVyLW5hdmlnYXRpb24tZGlzYWJsZWQnXG4gICAgICB9XG4gICAgfSk7XG4gICAgc3dpcGVyLm5hdmlnYXRpb24gPSB7XG4gICAgICBuZXh0RWw6IG51bGwsXG4gICAgICBwcmV2RWw6IG51bGxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGdldEVsKGVsKSB7XG4gICAgICBsZXQgcmVzO1xuICAgICAgaWYgKGVsICYmIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgJiYgc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICByZXMgPSBzd2lwZXIuZWwucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgICAgIGlmIChyZXMpIHJldHVybiByZXM7XG4gICAgICB9XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHJlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsKV07XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzICYmIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgJiYgcmVzICYmIHJlcy5sZW5ndGggPiAxICYmIHN3aXBlci5lbC5xdWVyeVNlbGVjdG9yQWxsKGVsKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICByZXMgPSBzd2lwZXIuZWwucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzICYmIHJlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICByZXMgPSByZXNbMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlbCAmJiAhcmVzKSByZXR1cm4gZWw7XG4gICAgICAvLyBpZiAoQXJyYXkuaXNBcnJheShyZXMpICYmIHJlcy5sZW5ndGggPT09IDEpIHJlcyA9IHJlc1swXTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvZ2dsZUVsKGVsLCBkaXNhYmxlZCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uO1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgaWYgKHN1YkVsKSB7XG4gICAgICAgICAgc3ViRWwuY2xhc3NMaXN0W2Rpc2FibGVkID8gJ2FkZCcgOiAncmVtb3ZlJ10oLi4ucGFyYW1zLmRpc2FibGVkQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgaWYgKHN1YkVsLnRhZ05hbWUgPT09ICdCVVRUT04nKSBzdWJFbC5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgICAgICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdFtzd2lwZXIuaXNMb2NrZWQgPyAnYWRkJyA6ICdyZW1vdmUnXShwYXJhbXMubG9ja0NsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAvLyBVcGRhdGUgTmF2aWdhdGlvbiBCdXR0b25zXG4gICAgICBjb25zdCB7XG4gICAgICAgIG5leHRFbCxcbiAgICAgICAgcHJldkVsXG4gICAgICB9ID0gc3dpcGVyLm5hdmlnYXRpb247XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIHRvZ2dsZUVsKHByZXZFbCwgZmFsc2UpO1xuICAgICAgICB0b2dnbGVFbChuZXh0RWwsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdG9nZ2xlRWwocHJldkVsLCBzd2lwZXIuaXNCZWdpbm5pbmcgJiYgIXN3aXBlci5wYXJhbXMucmV3aW5kKTtcbiAgICAgIHRvZ2dsZUVsKG5leHRFbCwgc3dpcGVyLmlzRW5kICYmICFzd2lwZXIucGFyYW1zLnJld2luZCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uUHJldkNsaWNrKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChzd2lwZXIuaXNCZWdpbm5pbmcgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiAhc3dpcGVyLnBhcmFtcy5yZXdpbmQpIHJldHVybjtcbiAgICAgIHN3aXBlci5zbGlkZVByZXYoKTtcbiAgICAgIGVtaXQoJ25hdmlnYXRpb25QcmV2Jyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uTmV4dENsaWNrKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChzd2lwZXIuaXNFbmQgJiYgIXN3aXBlci5wYXJhbXMubG9vcCAmJiAhc3dpcGVyLnBhcmFtcy5yZXdpbmQpIHJldHVybjtcbiAgICAgIHN3aXBlci5zbGlkZU5leHQoKTtcbiAgICAgIGVtaXQoJ25hdmlnYXRpb25OZXh0Jyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLm5hdmlnYXRpb247XG4gICAgICBzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24gPSBjcmVhdGVFbGVtZW50SWZOb3REZWZpbmVkKHN3aXBlciwgc3dpcGVyLm9yaWdpbmFsUGFyYW1zLm5hdmlnYXRpb24sIHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbiwge1xuICAgICAgICBuZXh0RWw6ICdzd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICdzd2lwZXItYnV0dG9uLXByZXYnXG4gICAgICB9KTtcbiAgICAgIGlmICghKHBhcmFtcy5uZXh0RWwgfHwgcGFyYW1zLnByZXZFbCkpIHJldHVybjtcbiAgICAgIGxldCBuZXh0RWwgPSBnZXRFbChwYXJhbXMubmV4dEVsKTtcbiAgICAgIGxldCBwcmV2RWwgPSBnZXRFbChwYXJhbXMucHJldkVsKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLm5hdmlnYXRpb24sIHtcbiAgICAgICAgbmV4dEVsLFxuICAgICAgICBwcmV2RWxcbiAgICAgIH0pO1xuICAgICAgbmV4dEVsID0gbWFrZUVsZW1lbnRzQXJyYXkobmV4dEVsKTtcbiAgICAgIHByZXZFbCA9IG1ha2VFbGVtZW50c0FycmF5KHByZXZFbCk7XG4gICAgICBjb25zdCBpbml0QnV0dG9uID0gKGVsLCBkaXIpID0+IHtcbiAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkaXIgPT09ICduZXh0JyA/IG9uTmV4dENsaWNrIDogb25QcmV2Q2xpY2spO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3dpcGVyLmVuYWJsZWQgJiYgZWwpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKC4uLnBhcmFtcy5sb2NrQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBuZXh0RWwuZm9yRWFjaChlbCA9PiBpbml0QnV0dG9uKGVsLCAnbmV4dCcpKTtcbiAgICAgIHByZXZFbC5mb3JFYWNoKGVsID0+IGluaXRCdXR0b24oZWwsICdwcmV2JykpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgbGV0IHtcbiAgICAgICAgbmV4dEVsLFxuICAgICAgICBwcmV2RWxcbiAgICAgIH0gPSBzd2lwZXIubmF2aWdhdGlvbjtcbiAgICAgIG5leHRFbCA9IG1ha2VFbGVtZW50c0FycmF5KG5leHRFbCk7XG4gICAgICBwcmV2RWwgPSBtYWtlRWxlbWVudHNBcnJheShwcmV2RWwpO1xuICAgICAgY29uc3QgZGVzdHJveUJ1dHRvbiA9IChlbCwgZGlyKSA9PiB7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGlyID09PSAnbmV4dCcgPyBvbk5leHRDbGljayA6IG9uUHJldkNsaWNrKTtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5zd2lwZXIucGFyYW1zLm5hdmlnYXRpb24uZGlzYWJsZWRDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgIH07XG4gICAgICBuZXh0RWwuZm9yRWFjaChlbCA9PiBkZXN0cm95QnV0dG9uKGVsLCAnbmV4dCcpKTtcbiAgICAgIHByZXZFbC5mb3JFYWNoKGVsID0+IGRlc3Ryb3lCdXR0b24oZWwsICdwcmV2JykpO1xuICAgIH1cbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24uZW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIGRpc2FibGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluaXQoKTtcbiAgICAgICAgdXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3RvRWRnZSBmcm9tRWRnZSBsb2NrIHVubG9jaycsICgpID0+IHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgICAgZGVzdHJveSgpO1xuICAgIH0pO1xuICAgIG9uKCdlbmFibGUgZGlzYWJsZScsICgpID0+IHtcbiAgICAgIGxldCB7XG4gICAgICAgIG5leHRFbCxcbiAgICAgICAgcHJldkVsXG4gICAgICB9ID0gc3dpcGVyLm5hdmlnYXRpb247XG4gICAgICBuZXh0RWwgPSBtYWtlRWxlbWVudHNBcnJheShuZXh0RWwpO1xuICAgICAgcHJldkVsID0gbWFrZUVsZW1lbnRzQXJyYXkocHJldkVsKTtcbiAgICAgIGlmIChzd2lwZXIuZW5hYmxlZCkge1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgWy4uLm5leHRFbCwgLi4ucHJldkVsXS5maWx0ZXIoZWwgPT4gISFlbCkuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QuYWRkKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5sb2NrQ2xhc3MpKTtcbiAgICB9KTtcbiAgICBvbignY2xpY2snLCAoX3MsIGUpID0+IHtcbiAgICAgIGxldCB7XG4gICAgICAgIG5leHRFbCxcbiAgICAgICAgcHJldkVsXG4gICAgICB9ID0gc3dpcGVyLm5hdmlnYXRpb247XG4gICAgICBuZXh0RWwgPSBtYWtlRWxlbWVudHNBcnJheShuZXh0RWwpO1xuICAgICAgcHJldkVsID0gbWFrZUVsZW1lbnRzQXJyYXkocHJldkVsKTtcbiAgICAgIGNvbnN0IHRhcmdldEVsID0gZS50YXJnZXQ7XG4gICAgICBsZXQgdGFyZ2V0SXNCdXR0b24gPSBwcmV2RWwuaW5jbHVkZXModGFyZ2V0RWwpIHx8IG5leHRFbC5pbmNsdWRlcyh0YXJnZXRFbCk7XG4gICAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCAmJiAhdGFyZ2V0SXNCdXR0b24pIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IGUucGF0aCB8fCBlLmNvbXBvc2VkUGF0aCAmJiBlLmNvbXBvc2VkUGF0aCgpO1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgIHRhcmdldElzQnV0dG9uID0gcGF0aC5maW5kKHBhdGhFbCA9PiBuZXh0RWwuaW5jbHVkZXMocGF0aEVsKSB8fCBwcmV2RWwuaW5jbHVkZXMocGF0aEVsKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24uaGlkZU9uQ2xpY2sgJiYgIXRhcmdldElzQnV0dG9uKSB7XG4gICAgICAgIGlmIChzd2lwZXIucGFnaW5hdGlvbiAmJiBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24gJiYgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmNsaWNrYWJsZSAmJiAoc3dpcGVyLnBhZ2luYXRpb24uZWwgPT09IHRhcmdldEVsIHx8IHN3aXBlci5wYWdpbmF0aW9uLmVsLmNvbnRhaW5zKHRhcmdldEVsKSkpIHJldHVybjtcbiAgICAgICAgbGV0IGlzSGlkZGVuO1xuICAgICAgICBpZiAobmV4dEVsLmxlbmd0aCkge1xuICAgICAgICAgIGlzSGlkZGVuID0gbmV4dEVsWzBdLmNsYXNzTGlzdC5jb250YWlucyhzd2lwZXIucGFyYW1zLm5hdmlnYXRpb24uaGlkZGVuQ2xhc3MpO1xuICAgICAgICB9IGVsc2UgaWYgKHByZXZFbC5sZW5ndGgpIHtcbiAgICAgICAgICBpc0hpZGRlbiA9IHByZXZFbFswXS5jbGFzc0xpc3QuY29udGFpbnMoc3dpcGVyLnBhcmFtcy5uYXZpZ2F0aW9uLmhpZGRlbkNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNIaWRkZW4gPT09IHRydWUpIHtcbiAgICAgICAgICBlbWl0KCduYXZpZ2F0aW9uU2hvdycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtaXQoJ25hdmlnYXRpb25IaWRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgWy4uLm5leHRFbCwgLi4ucHJldkVsXS5maWx0ZXIoZWwgPT4gISFlbCkuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QudG9nZ2xlKHN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5oaWRkZW5DbGFzcykpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGVuYWJsZSA9ICgpID0+IHtcbiAgICAgIHN3aXBlci5lbC5jbGFzc0xpc3QucmVtb3ZlKC4uLnN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5uYXZpZ2F0aW9uRGlzYWJsZWRDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgIGluaXQoKTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH07XG4gICAgY29uc3QgZGlzYWJsZSA9ICgpID0+IHtcbiAgICAgIHN3aXBlci5lbC5jbGFzc0xpc3QuYWRkKC4uLnN3aXBlci5wYXJhbXMubmF2aWdhdGlvbi5uYXZpZ2F0aW9uRGlzYWJsZWRDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgIGRlc3Ryb3koKTtcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLm5hdmlnYXRpb24sIHtcbiAgICAgIGVuYWJsZSxcbiAgICAgIGRpc2FibGUsXG4gICAgICB1cGRhdGUsXG4gICAgICBpbml0LFxuICAgICAgZGVzdHJveVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xhc3Nlc1RvU2VsZWN0b3IoY2xhc3Nlcykge1xuICAgIGlmIChjbGFzc2VzID09PSB2b2lkIDApIHtcbiAgICAgIGNsYXNzZXMgPSAnJztcbiAgICB9XG4gICAgcmV0dXJuIGAuJHtjbGFzc2VzLnRyaW0oKS5yZXBsYWNlKC8oW1xcLjohK1xcL10pL2csICdcXFxcJDEnKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIC5yZXBsYWNlKC8gL2csICcuJyl9YDtcbiAgfVxuXG4gIGZ1bmN0aW9uIFBhZ2luYXRpb24oX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvbixcbiAgICAgIGVtaXRcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCBwZnggPSAnc3dpcGVyLXBhZ2luYXRpb24nO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiBudWxsLFxuICAgICAgICBidWxsZXRFbGVtZW50OiAnc3BhbicsXG4gICAgICAgIGNsaWNrYWJsZTogZmFsc2UsXG4gICAgICAgIGhpZGVPbkNsaWNrOiBmYWxzZSxcbiAgICAgICAgcmVuZGVyQnVsbGV0OiBudWxsLFxuICAgICAgICByZW5kZXJQcm9ncmVzc2JhcjogbnVsbCxcbiAgICAgICAgcmVuZGVyRnJhY3Rpb246IG51bGwsXG4gICAgICAgIHJlbmRlckN1c3RvbTogbnVsbCxcbiAgICAgICAgcHJvZ3Jlc3NiYXJPcHBvc2l0ZTogZmFsc2UsXG4gICAgICAgIHR5cGU6ICdidWxsZXRzJyxcbiAgICAgICAgLy8gJ2J1bGxldHMnIG9yICdwcm9ncmVzc2Jhcicgb3IgJ2ZyYWN0aW9uJyBvciAnY3VzdG9tJ1xuICAgICAgICBkeW5hbWljQnVsbGV0czogZmFsc2UsXG4gICAgICAgIGR5bmFtaWNNYWluQnVsbGV0czogMSxcbiAgICAgICAgZm9ybWF0RnJhY3Rpb25DdXJyZW50OiBudW1iZXIgPT4gbnVtYmVyLFxuICAgICAgICBmb3JtYXRGcmFjdGlvblRvdGFsOiBudW1iZXIgPT4gbnVtYmVyLFxuICAgICAgICBidWxsZXRDbGFzczogYCR7cGZ4fS1idWxsZXRgLFxuICAgICAgICBidWxsZXRBY3RpdmVDbGFzczogYCR7cGZ4fS1idWxsZXQtYWN0aXZlYCxcbiAgICAgICAgbW9kaWZpZXJDbGFzczogYCR7cGZ4fS1gLFxuICAgICAgICBjdXJyZW50Q2xhc3M6IGAke3BmeH0tY3VycmVudGAsXG4gICAgICAgIHRvdGFsQ2xhc3M6IGAke3BmeH0tdG90YWxgLFxuICAgICAgICBoaWRkZW5DbGFzczogYCR7cGZ4fS1oaWRkZW5gLFxuICAgICAgICBwcm9ncmVzc2JhckZpbGxDbGFzczogYCR7cGZ4fS1wcm9ncmVzc2Jhci1maWxsYCxcbiAgICAgICAgcHJvZ3Jlc3NiYXJPcHBvc2l0ZUNsYXNzOiBgJHtwZnh9LXByb2dyZXNzYmFyLW9wcG9zaXRlYCxcbiAgICAgICAgY2xpY2thYmxlQ2xhc3M6IGAke3BmeH0tY2xpY2thYmxlYCxcbiAgICAgICAgbG9ja0NsYXNzOiBgJHtwZnh9LWxvY2tgLFxuICAgICAgICBob3Jpem9udGFsQ2xhc3M6IGAke3BmeH0taG9yaXpvbnRhbGAsXG4gICAgICAgIHZlcnRpY2FsQ2xhc3M6IGAke3BmeH0tdmVydGljYWxgLFxuICAgICAgICBwYWdpbmF0aW9uRGlzYWJsZWRDbGFzczogYCR7cGZ4fS1kaXNhYmxlZGBcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzd2lwZXIucGFnaW5hdGlvbiA9IHtcbiAgICAgIGVsOiBudWxsLFxuICAgICAgYnVsbGV0czogW11cbiAgICB9O1xuICAgIGxldCBidWxsZXRTaXplO1xuICAgIGxldCBkeW5hbWljQnVsbGV0SW5kZXggPSAwO1xuICAgIGZ1bmN0aW9uIGlzUGFnaW5hdGlvbkRpc2FibGVkKCkge1xuICAgICAgcmV0dXJuICFzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uZWwgfHwgIXN3aXBlci5wYWdpbmF0aW9uLmVsIHx8IEFycmF5LmlzQXJyYXkoc3dpcGVyLnBhZ2luYXRpb24uZWwpICYmIHN3aXBlci5wYWdpbmF0aW9uLmVsLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0U2lkZUJ1bGxldHMoYnVsbGV0RWwsIHBvc2l0aW9uKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGJ1bGxldEFjdGl2ZUNsYXNzXG4gICAgICB9ID0gc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICAgaWYgKCFidWxsZXRFbCkgcmV0dXJuO1xuICAgICAgYnVsbGV0RWwgPSBidWxsZXRFbFtgJHtwb3NpdGlvbiA9PT0gJ3ByZXYnID8gJ3ByZXZpb3VzJyA6ICduZXh0J31FbGVtZW50U2libGluZ2BdO1xuICAgICAgaWYgKGJ1bGxldEVsKSB7XG4gICAgICAgIGJ1bGxldEVsLmNsYXNzTGlzdC5hZGQoYCR7YnVsbGV0QWN0aXZlQ2xhc3N9LSR7cG9zaXRpb259YCk7XG4gICAgICAgIGJ1bGxldEVsID0gYnVsbGV0RWxbYCR7cG9zaXRpb24gPT09ICdwcmV2JyA/ICdwcmV2aW91cycgOiAnbmV4dCd9RWxlbWVudFNpYmxpbmdgXTtcbiAgICAgICAgaWYgKGJ1bGxldEVsKSB7XG4gICAgICAgICAgYnVsbGV0RWwuY2xhc3NMaXN0LmFkZChgJHtidWxsZXRBY3RpdmVDbGFzc30tJHtwb3NpdGlvbn0tJHtwb3NpdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbkJ1bGxldENsaWNrKGUpIHtcbiAgICAgIGNvbnN0IGJ1bGxldEVsID0gZS50YXJnZXQuY2xvc2VzdChjbGFzc2VzVG9TZWxlY3Rvcihzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0Q2xhc3MpKTtcbiAgICAgIGlmICghYnVsbGV0RWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaW5kZXggPSBlbGVtZW50SW5kZXgoYnVsbGV0RWwpICogc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cDtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgaWYgKHN3aXBlci5yZWFsSW5kZXggPT09IGluZGV4KSByZXR1cm47XG4gICAgICAgIHN3aXBlci5zbGlkZVRvTG9vcChpbmRleCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhpbmRleCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIC8vIFJlbmRlciB8fCBVcGRhdGUgUGFnaW5hdGlvbiBidWxsZXRzL2l0ZW1zXG4gICAgICBjb25zdCBydGwgPSBzd2lwZXIucnRsO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICAgaWYgKGlzUGFnaW5hdGlvbkRpc2FibGVkKCkpIHJldHVybjtcbiAgICAgIGxldCBlbCA9IHN3aXBlci5wYWdpbmF0aW9uLmVsO1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICAvLyBDdXJyZW50L1RvdGFsXG4gICAgICBsZXQgY3VycmVudDtcbiAgICAgIGxldCBwcmV2aW91c0luZGV4O1xuICAgICAgY29uc3Qgc2xpZGVzTGVuZ3RoID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIudmlydHVhbC5zbGlkZXMubGVuZ3RoIDogc3dpcGVyLnNsaWRlcy5sZW5ndGg7XG4gICAgICBjb25zdCB0b3RhbCA9IHN3aXBlci5wYXJhbXMubG9vcCA/IE1hdGguY2VpbChzbGlkZXNMZW5ndGggLyBzd2lwZXIucGFyYW1zLnNsaWRlc1Blckdyb3VwKSA6IHN3aXBlci5zbmFwR3JpZC5sZW5ndGg7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wKSB7XG4gICAgICAgIHByZXZpb3VzSW5kZXggPSBzd2lwZXIucHJldmlvdXNSZWFsSW5kZXggfHwgMDtcbiAgICAgICAgY3VycmVudCA9IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXAgPiAxID8gTWF0aC5mbG9vcihzd2lwZXIucmVhbEluZGV4IC8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cCkgOiBzd2lwZXIucmVhbEluZGV4O1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3dpcGVyLnNuYXBJbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY3VycmVudCA9IHN3aXBlci5zbmFwSW5kZXg7XG4gICAgICAgIHByZXZpb3VzSW5kZXggPSBzd2lwZXIucHJldmlvdXNTbmFwSW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2aW91c0luZGV4ID0gc3dpcGVyLnByZXZpb3VzSW5kZXggfHwgMDtcbiAgICAgICAgY3VycmVudCA9IHN3aXBlci5hY3RpdmVJbmRleCB8fCAwO1xuICAgICAgfVxuICAgICAgLy8gVHlwZXNcbiAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2J1bGxldHMnICYmIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMgJiYgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldHMgPSBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzO1xuICAgICAgICBsZXQgZmlyc3RJbmRleDtcbiAgICAgICAgbGV0IGxhc3RJbmRleDtcbiAgICAgICAgbGV0IG1pZEluZGV4O1xuICAgICAgICBpZiAocGFyYW1zLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgICAgYnVsbGV0U2l6ZSA9IGVsZW1lbnRPdXRlclNpemUoYnVsbGV0c1swXSwgc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJ3dpZHRoJyA6ICdoZWlnaHQnLCB0cnVlKTtcbiAgICAgICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgICAgIHN1YkVsLnN0eWxlW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICd3aWR0aCcgOiAnaGVpZ2h0J10gPSBgJHtidWxsZXRTaXplICogKHBhcmFtcy5keW5hbWljTWFpbkJ1bGxldHMgKyA0KX1weGA7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHBhcmFtcy5keW5hbWljTWFpbkJ1bGxldHMgPiAxICYmIHByZXZpb3VzSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHluYW1pY0J1bGxldEluZGV4ICs9IGN1cnJlbnQgLSAocHJldmlvdXNJbmRleCB8fCAwKTtcbiAgICAgICAgICAgIGlmIChkeW5hbWljQnVsbGV0SW5kZXggPiBwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzIC0gMSkge1xuICAgICAgICAgICAgICBkeW5hbWljQnVsbGV0SW5kZXggPSBwYXJhbXMuZHluYW1pY01haW5CdWxsZXRzIC0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZHluYW1pY0J1bGxldEluZGV4IDwgMCkge1xuICAgICAgICAgICAgICBkeW5hbWljQnVsbGV0SW5kZXggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmaXJzdEluZGV4ID0gTWF0aC5tYXgoY3VycmVudCAtIGR5bmFtaWNCdWxsZXRJbmRleCwgMCk7XG4gICAgICAgICAgbGFzdEluZGV4ID0gZmlyc3RJbmRleCArIChNYXRoLm1pbihidWxsZXRzLmxlbmd0aCwgcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cykgLSAxKTtcbiAgICAgICAgICBtaWRJbmRleCA9IChsYXN0SW5kZXggKyBmaXJzdEluZGV4KSAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgYnVsbGV0cy5mb3JFYWNoKGJ1bGxldEVsID0+IHtcbiAgICAgICAgICBjb25zdCBjbGFzc2VzVG9SZW1vdmUgPSBbLi4uWycnLCAnLW5leHQnLCAnLW5leHQtbmV4dCcsICctcHJldicsICctcHJldi1wcmV2JywgJy1tYWluJ10ubWFwKHN1ZmZpeCA9PiBgJHtwYXJhbXMuYnVsbGV0QWN0aXZlQ2xhc3N9JHtzdWZmaXh9YCldLm1hcChzID0+IHR5cGVvZiBzID09PSAnc3RyaW5nJyAmJiBzLmluY2x1ZGVzKCcgJykgPyBzLnNwbGl0KCcgJykgOiBzKS5mbGF0KCk7XG4gICAgICAgICAgYnVsbGV0RWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc2VzVG9SZW1vdmUpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBidWxsZXRzLmZvckVhY2goYnVsbGV0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1bGxldEluZGV4ID0gZWxlbWVudEluZGV4KGJ1bGxldCk7XG4gICAgICAgICAgICBpZiAoYnVsbGV0SW5kZXggPT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgYnVsbGV0LmNsYXNzTGlzdC5hZGQoLi4ucGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgIGJ1bGxldC5zZXRBdHRyaWJ1dGUoJ3BhcnQnLCAnYnVsbGV0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyYW1zLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgICAgICAgIGlmIChidWxsZXRJbmRleCA+PSBmaXJzdEluZGV4ICYmIGJ1bGxldEluZGV4IDw9IGxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgIGJ1bGxldC5jbGFzc0xpc3QuYWRkKC4uLmAke3BhcmFtcy5idWxsZXRBY3RpdmVDbGFzc30tbWFpbmAuc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGJ1bGxldEluZGV4ID09PSBmaXJzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgc2V0U2lkZUJ1bGxldHMoYnVsbGV0LCAncHJldicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChidWxsZXRJbmRleCA9PT0gbGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgc2V0U2lkZUJ1bGxldHMoYnVsbGV0LCAnbmV4dCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgYnVsbGV0ID0gYnVsbGV0c1tjdXJyZW50XTtcbiAgICAgICAgICBpZiAoYnVsbGV0KSB7XG4gICAgICAgICAgICBidWxsZXQuY2xhc3NMaXN0LmFkZCguLi5wYXJhbXMuYnVsbGV0QWN0aXZlQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgICAgICBidWxsZXRzLmZvckVhY2goKGJ1bGxldEVsLCBidWxsZXRJbmRleCkgPT4ge1xuICAgICAgICAgICAgICBidWxsZXRFbC5zZXRBdHRyaWJ1dGUoJ3BhcnQnLCBidWxsZXRJbmRleCA9PT0gY3VycmVudCA/ICdidWxsZXQtYWN0aXZlJyA6ICdidWxsZXQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocGFyYW1zLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdERpc3BsYXllZEJ1bGxldCA9IGJ1bGxldHNbZmlyc3RJbmRleF07XG4gICAgICAgICAgICBjb25zdCBsYXN0RGlzcGxheWVkQnVsbGV0ID0gYnVsbGV0c1tsYXN0SW5kZXhdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGZpcnN0SW5kZXg7IGkgPD0gbGFzdEluZGV4OyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgaWYgKGJ1bGxldHNbaV0pIHtcbiAgICAgICAgICAgICAgICBidWxsZXRzW2ldLmNsYXNzTGlzdC5hZGQoLi4uYCR7cGFyYW1zLmJ1bGxldEFjdGl2ZUNsYXNzfS1tYWluYC5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0U2lkZUJ1bGxldHMoZmlyc3REaXNwbGF5ZWRCdWxsZXQsICdwcmV2Jyk7XG4gICAgICAgICAgICBzZXRTaWRlQnVsbGV0cyhsYXN0RGlzcGxheWVkQnVsbGV0LCAnbmV4dCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgICAgY29uc3QgZHluYW1pY0J1bGxldHNMZW5ndGggPSBNYXRoLm1pbihidWxsZXRzLmxlbmd0aCwgcGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyArIDQpO1xuICAgICAgICAgIGNvbnN0IGJ1bGxldHNPZmZzZXQgPSAoYnVsbGV0U2l6ZSAqIGR5bmFtaWNCdWxsZXRzTGVuZ3RoIC0gYnVsbGV0U2l6ZSkgLyAyIC0gbWlkSW5kZXggKiBidWxsZXRTaXplO1xuICAgICAgICAgIGNvbnN0IG9mZnNldFByb3AgPSBydGwgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgICAgICAgIGJ1bGxldHMuZm9yRWFjaChidWxsZXQgPT4ge1xuICAgICAgICAgICAgYnVsbGV0LnN0eWxlW3N3aXBlci5pc0hvcml6b250YWwoKSA/IG9mZnNldFByb3AgOiAndG9wJ10gPSBgJHtidWxsZXRzT2Zmc2V0fXB4YDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWwuZm9yRWFjaCgoc3ViRWwsIHN1YkVsSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKHBhcmFtcy50eXBlID09PSAnZnJhY3Rpb24nKSB7XG4gICAgICAgICAgc3ViRWwucXVlcnlTZWxlY3RvckFsbChjbGFzc2VzVG9TZWxlY3RvcihwYXJhbXMuY3VycmVudENsYXNzKSkuZm9yRWFjaChmcmFjdGlvbkVsID0+IHtcbiAgICAgICAgICAgIGZyYWN0aW9uRWwudGV4dENvbnRlbnQgPSBwYXJhbXMuZm9ybWF0RnJhY3Rpb25DdXJyZW50KGN1cnJlbnQgKyAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdWJFbC5xdWVyeVNlbGVjdG9yQWxsKGNsYXNzZXNUb1NlbGVjdG9yKHBhcmFtcy50b3RhbENsYXNzKSkuZm9yRWFjaCh0b3RhbEVsID0+IHtcbiAgICAgICAgICAgIHRvdGFsRWwudGV4dENvbnRlbnQgPSBwYXJhbXMuZm9ybWF0RnJhY3Rpb25Ub3RhbCh0b3RhbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy50eXBlID09PSAncHJvZ3Jlc3NiYXInKSB7XG4gICAgICAgICAgbGV0IHByb2dyZXNzYmFyRGlyZWN0aW9uO1xuICAgICAgICAgIGlmIChwYXJhbXMucHJvZ3Jlc3NiYXJPcHBvc2l0ZSkge1xuICAgICAgICAgICAgcHJvZ3Jlc3NiYXJEaXJlY3Rpb24gPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9ncmVzc2JhckRpcmVjdGlvbiA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNjYWxlID0gKGN1cnJlbnQgKyAxKSAvIHRvdGFsO1xuICAgICAgICAgIGxldCBzY2FsZVggPSAxO1xuICAgICAgICAgIGxldCBzY2FsZVkgPSAxO1xuICAgICAgICAgIGlmIChwcm9ncmVzc2JhckRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBzY2FsZVggPSBzY2FsZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NhbGVZID0gc2NhbGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1YkVsLnF1ZXJ5U2VsZWN0b3JBbGwoY2xhc3Nlc1RvU2VsZWN0b3IocGFyYW1zLnByb2dyZXNzYmFyRmlsbENsYXNzKSkuZm9yRWFjaChwcm9ncmVzc0VsID0+IHtcbiAgICAgICAgICAgIHByb2dyZXNzRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZVgoJHtzY2FsZVh9KSBzY2FsZVkoJHtzY2FsZVl9KWA7XG4gICAgICAgICAgICBwcm9ncmVzc0VsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke3N3aXBlci5wYXJhbXMuc3BlZWR9bXNgO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2N1c3RvbScgJiYgcGFyYW1zLnJlbmRlckN1c3RvbSkge1xuICAgICAgICAgIHN1YkVsLmlubmVySFRNTCA9IHBhcmFtcy5yZW5kZXJDdXN0b20oc3dpcGVyLCBjdXJyZW50ICsgMSwgdG90YWwpO1xuICAgICAgICAgIGlmIChzdWJFbEluZGV4ID09PSAwKSBlbWl0KCdwYWdpbmF0aW9uUmVuZGVyJywgc3ViRWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdWJFbEluZGV4ID09PSAwKSBlbWl0KCdwYWdpbmF0aW9uUmVuZGVyJywgc3ViRWwpO1xuICAgICAgICAgIGVtaXQoJ3BhZ2luYXRpb25VcGRhdGUnLCBzdWJFbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMud2F0Y2hPdmVyZmxvdyAmJiBzd2lwZXIuZW5hYmxlZCkge1xuICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdFtzd2lwZXIuaXNMb2NrZWQgPyAnYWRkJyA6ICdyZW1vdmUnXShwYXJhbXMubG9ja0NsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIC8vIFJlbmRlciBDb250YWluZXJcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGlmIChpc1BhZ2luYXRpb25EaXNhYmxlZCgpKSByZXR1cm47XG4gICAgICBjb25zdCBzbGlkZXNMZW5ndGggPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggOiBzd2lwZXIuZ3JpZCAmJiBzd2lwZXIucGFyYW1zLmdyaWQucm93cyA+IDEgPyBzd2lwZXIuc2xpZGVzLmxlbmd0aCAvIE1hdGguY2VpbChzd2lwZXIucGFyYW1zLmdyaWQucm93cykgOiBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcbiAgICAgIGxldCBlbCA9IHN3aXBlci5wYWdpbmF0aW9uLmVsO1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBsZXQgcGFnaW5hdGlvbkhUTUwgPSAnJztcbiAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2J1bGxldHMnKSB7XG4gICAgICAgIGxldCBudW1iZXJPZkJ1bGxldHMgPSBzd2lwZXIucGFyYW1zLmxvb3AgPyBNYXRoLmNlaWwoc2xpZGVzTGVuZ3RoIC8gc3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJHcm91cCkgOiBzd2lwZXIuc25hcEdyaWQubGVuZ3RoO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5mcmVlTW9kZSAmJiBzd2lwZXIucGFyYW1zLmZyZWVNb2RlLmVuYWJsZWQgJiYgbnVtYmVyT2ZCdWxsZXRzID4gc2xpZGVzTGVuZ3RoKSB7XG4gICAgICAgICAgbnVtYmVyT2ZCdWxsZXRzID0gc2xpZGVzTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZCdWxsZXRzOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAocGFyYW1zLnJlbmRlckJ1bGxldCkge1xuICAgICAgICAgICAgcGFnaW5hdGlvbkhUTUwgKz0gcGFyYW1zLnJlbmRlckJ1bGxldC5jYWxsKHN3aXBlciwgaSwgcGFyYW1zLmJ1bGxldENsYXNzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgICBwYWdpbmF0aW9uSFRNTCArPSBgPCR7cGFyYW1zLmJ1bGxldEVsZW1lbnR9ICR7c3dpcGVyLmlzRWxlbWVudCA/ICdwYXJ0PVwiYnVsbGV0XCInIDogJyd9IGNsYXNzPVwiJHtwYXJhbXMuYnVsbGV0Q2xhc3N9XCI+PC8ke3BhcmFtcy5idWxsZXRFbGVtZW50fT5gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy50eXBlID09PSAnZnJhY3Rpb24nKSB7XG4gICAgICAgIGlmIChwYXJhbXMucmVuZGVyRnJhY3Rpb24pIHtcbiAgICAgICAgICBwYWdpbmF0aW9uSFRNTCA9IHBhcmFtcy5yZW5kZXJGcmFjdGlvbi5jYWxsKHN3aXBlciwgcGFyYW1zLmN1cnJlbnRDbGFzcywgcGFyYW1zLnRvdGFsQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhZ2luYXRpb25IVE1MID0gYDxzcGFuIGNsYXNzPVwiJHtwYXJhbXMuY3VycmVudENsYXNzfVwiPjwvc3Bhbj5gICsgJyAvICcgKyBgPHNwYW4gY2xhc3M9XCIke3BhcmFtcy50b3RhbENsYXNzfVwiPjwvc3Bhbj5gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdwcm9ncmVzc2JhcicpIHtcbiAgICAgICAgaWYgKHBhcmFtcy5yZW5kZXJQcm9ncmVzc2Jhcikge1xuICAgICAgICAgIHBhZ2luYXRpb25IVE1MID0gcGFyYW1zLnJlbmRlclByb2dyZXNzYmFyLmNhbGwoc3dpcGVyLCBwYXJhbXMucHJvZ3Jlc3NiYXJGaWxsQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhZ2luYXRpb25IVE1MID0gYDxzcGFuIGNsYXNzPVwiJHtwYXJhbXMucHJvZ3Jlc3NiYXJGaWxsQ2xhc3N9XCI+PC9zcGFuPmA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMgPSBbXTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBpZiAocGFyYW1zLnR5cGUgIT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgc3ViRWwuaW5uZXJIVE1MID0gcGFnaW5hdGlvbkhUTUwgfHwgJyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy50eXBlID09PSAnYnVsbGV0cycpIHtcbiAgICAgICAgICBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzLnB1c2goLi4uc3ViRWwucXVlcnlTZWxlY3RvckFsbChjbGFzc2VzVG9TZWxlY3RvcihwYXJhbXMuYnVsbGV0Q2xhc3MpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHBhcmFtcy50eXBlICE9PSAnY3VzdG9tJykge1xuICAgICAgICBlbWl0KCdwYWdpbmF0aW9uUmVuZGVyJywgZWxbMF0pO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uID0gY3JlYXRlRWxlbWVudElmTm90RGVmaW5lZChzd2lwZXIsIHN3aXBlci5vcmlnaW5hbFBhcmFtcy5wYWdpbmF0aW9uLCBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24sIHtcbiAgICAgICAgZWw6ICdzd2lwZXItcGFnaW5hdGlvbidcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uO1xuICAgICAgaWYgKCFwYXJhbXMuZWwpIHJldHVybjtcbiAgICAgIGxldCBlbDtcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmVsID09PSAnc3RyaW5nJyAmJiBzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgIGVsID0gc3dpcGVyLmVsLnF1ZXJ5U2VsZWN0b3IocGFyYW1zLmVsKTtcbiAgICAgIH1cbiAgICAgIGlmICghZWwgJiYgdHlwZW9mIHBhcmFtcy5lbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWwgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChwYXJhbXMuZWwpXTtcbiAgICAgIH1cbiAgICAgIGlmICghZWwpIHtcbiAgICAgICAgZWwgPSBwYXJhbXMuZWw7XG4gICAgICB9XG4gICAgICBpZiAoIWVsIHx8IGVsLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMudW5pcXVlTmF2RWxlbWVudHMgJiYgdHlwZW9mIHBhcmFtcy5lbCA9PT0gJ3N0cmluZycgJiYgQXJyYXkuaXNBcnJheShlbCkgJiYgZWwubGVuZ3RoID4gMSkge1xuICAgICAgICBlbCA9IFsuLi5zd2lwZXIuZWwucXVlcnlTZWxlY3RvckFsbChwYXJhbXMuZWwpXTtcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQgYmVsb25ncyB0byBhbm90aGVyIG5lc3RlZCBTd2lwZXJcbiAgICAgICAgaWYgKGVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBlbCA9IGVsLmZpbHRlcihzdWJFbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudFBhcmVudHMoc3ViRWwsICcuc3dpcGVyJylbMF0gIT09IHN3aXBlci5lbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSlbMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsKSAmJiBlbC5sZW5ndGggPT09IDEpIGVsID0gZWxbMF07XG4gICAgICBPYmplY3QuYXNzaWduKHN3aXBlci5wYWdpbmF0aW9uLCB7XG4gICAgICAgIGVsXG4gICAgICB9KTtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2J1bGxldHMnICYmIHBhcmFtcy5jbGlja2FibGUpIHtcbiAgICAgICAgICBzdWJFbC5jbGFzc0xpc3QuYWRkKC4uLihwYXJhbXMuY2xpY2thYmxlQ2xhc3MgfHwgJycpLnNwbGl0KCcgJykpO1xuICAgICAgICB9XG4gICAgICAgIHN1YkVsLmNsYXNzTGlzdC5hZGQocGFyYW1zLm1vZGlmaWVyQ2xhc3MgKyBwYXJhbXMudHlwZSk7XG4gICAgICAgIHN1YkVsLmNsYXNzTGlzdC5hZGQoc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gcGFyYW1zLmhvcml6b250YWxDbGFzcyA6IHBhcmFtcy52ZXJ0aWNhbENsYXNzKTtcbiAgICAgICAgaWYgKHBhcmFtcy50eXBlID09PSAnYnVsbGV0cycgJiYgcGFyYW1zLmR5bmFtaWNCdWxsZXRzKSB7XG4gICAgICAgICAgc3ViRWwuY2xhc3NMaXN0LmFkZChgJHtwYXJhbXMubW9kaWZpZXJDbGFzc30ke3BhcmFtcy50eXBlfS1keW5hbWljYCk7XG4gICAgICAgICAgZHluYW1pY0J1bGxldEluZGV4ID0gMDtcbiAgICAgICAgICBpZiAocGFyYW1zLmR5bmFtaWNNYWluQnVsbGV0cyA8IDEpIHtcbiAgICAgICAgICAgIHBhcmFtcy5keW5hbWljTWFpbkJ1bGxldHMgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdwcm9ncmVzc2JhcicgJiYgcGFyYW1zLnByb2dyZXNzYmFyT3Bwb3NpdGUpIHtcbiAgICAgICAgICBzdWJFbC5jbGFzc0xpc3QuYWRkKHBhcmFtcy5wcm9ncmVzc2Jhck9wcG9zaXRlQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMuY2xpY2thYmxlKSB7XG4gICAgICAgICAgc3ViRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJ1bGxldENsaWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN3aXBlci5lbmFibGVkKSB7XG4gICAgICAgICAgc3ViRWwuY2xhc3NMaXN0LmFkZChwYXJhbXMubG9ja0NsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb247XG4gICAgICBpZiAoaXNQYWdpbmF0aW9uRGlzYWJsZWQoKSkgcmV0dXJuO1xuICAgICAgbGV0IGVsID0gc3dpcGVyLnBhZ2luYXRpb24uZWw7XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdC5yZW1vdmUocGFyYW1zLmhpZGRlbkNsYXNzKTtcbiAgICAgICAgICBzdWJFbC5jbGFzc0xpc3QucmVtb3ZlKHBhcmFtcy5tb2RpZmllckNsYXNzICsgcGFyYW1zLnR5cGUpO1xuICAgICAgICAgIHN1YkVsLmNsYXNzTGlzdC5yZW1vdmUoc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gcGFyYW1zLmhvcml6b250YWxDbGFzcyA6IHBhcmFtcy52ZXJ0aWNhbENsYXNzKTtcbiAgICAgICAgICBpZiAocGFyYW1zLmNsaWNrYWJsZSkge1xuICAgICAgICAgICAgc3ViRWwuY2xhc3NMaXN0LnJlbW92ZSguLi4ocGFyYW1zLmNsaWNrYWJsZUNsYXNzIHx8ICcnKS5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgIHN1YkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CdWxsZXRDbGljayk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzKSBzd2lwZXIucGFnaW5hdGlvbi5idWxsZXRzLmZvckVhY2goc3ViRWwgPT4gc3ViRWwuY2xhc3NMaXN0LnJlbW92ZSguLi5wYXJhbXMuYnVsbGV0QWN0aXZlQ2xhc3Muc3BsaXQoJyAnKSkpO1xuICAgIH1cbiAgICBvbignY2hhbmdlRGlyZWN0aW9uJywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFnaW5hdGlvbiB8fCAhc3dpcGVyLnBhZ2luYXRpb24uZWwpIHJldHVybjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbjtcbiAgICAgIGxldCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc3dpcGVyLnBhZ2luYXRpb247XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5jbGFzc0xpc3QucmVtb3ZlKHBhcmFtcy5ob3Jpem9udGFsQ2xhc3MsIHBhcmFtcy52ZXJ0aWNhbENsYXNzKTtcbiAgICAgICAgc3ViRWwuY2xhc3NMaXN0LmFkZChzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBwYXJhbXMuaG9yaXpvbnRhbENsYXNzIDogcGFyYW1zLnZlcnRpY2FsQ2xhc3MpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBkaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0KCk7XG4gICAgICAgIHJlbmRlcigpO1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignYWN0aXZlSW5kZXhDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHN3aXBlci5zbmFwSW5kZXggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdzbmFwSW5kZXhDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9KTtcbiAgICBvbignc25hcEdyaWRMZW5ndGhDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoKTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIG9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgICAgZGVzdHJveSgpO1xuICAgIH0pO1xuICAgIG9uKCdlbmFibGUgZGlzYWJsZScsICgpID0+IHtcbiAgICAgIGxldCB7XG4gICAgICAgIGVsXG4gICAgICB9ID0gc3dpcGVyLnBhZ2luYXRpb247XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4gc3ViRWwuY2xhc3NMaXN0W3N3aXBlci5lbmFibGVkID8gJ3JlbW92ZScgOiAnYWRkJ10oc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmxvY2tDbGFzcykpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdsb2NrIHVubG9jaycsICgpID0+IHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIG9uKCdjbGljaycsIChfcywgZSkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0RWwgPSBlLnRhcmdldDtcbiAgICAgIGNvbnN0IGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoc3dpcGVyLnBhZ2luYXRpb24uZWwpO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5lbCAmJiBzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uaGlkZU9uQ2xpY2sgJiYgZWwgJiYgZWwubGVuZ3RoID4gMCAmJiAhdGFyZ2V0RWwuY2xhc3NMaXN0LmNvbnRhaW5zKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcykpIHtcbiAgICAgICAgaWYgKHN3aXBlci5uYXZpZ2F0aW9uICYmIChzd2lwZXIubmF2aWdhdGlvbi5uZXh0RWwgJiYgdGFyZ2V0RWwgPT09IHN3aXBlci5uYXZpZ2F0aW9uLm5leHRFbCB8fCBzd2lwZXIubmF2aWdhdGlvbi5wcmV2RWwgJiYgdGFyZ2V0RWwgPT09IHN3aXBlci5uYXZpZ2F0aW9uLnByZXZFbCkpIHJldHVybjtcbiAgICAgICAgY29uc3QgaXNIaWRkZW4gPSBlbFswXS5jbGFzc0xpc3QuY29udGFpbnMoc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmhpZGRlbkNsYXNzKTtcbiAgICAgICAgaWYgKGlzSGlkZGVuID09PSB0cnVlKSB7XG4gICAgICAgICAgZW1pdCgncGFnaW5hdGlvblNob3cnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbWl0KCdwYWdpbmF0aW9uSGlkZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4gc3ViRWwuY2xhc3NMaXN0LnRvZ2dsZShzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uaGlkZGVuQ2xhc3MpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBlbmFibGUgPSAoKSA9PiB7XG4gICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LnJlbW92ZShzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpO1xuICAgICAgbGV0IHtcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzd2lwZXIucGFnaW5hdGlvbjtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiBzdWJFbC5jbGFzc0xpc3QucmVtb3ZlKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5wYWdpbmF0aW9uRGlzYWJsZWRDbGFzcykpO1xuICAgICAgfVxuICAgICAgaW5pdCgpO1xuICAgICAgcmVuZGVyKCk7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGRpc2FibGUgPSAoKSA9PiB7XG4gICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LmFkZChzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24ucGFnaW5hdGlvbkRpc2FibGVkQ2xhc3MpO1xuICAgICAgbGV0IHtcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzd2lwZXIucGFnaW5hdGlvbjtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiBzdWJFbC5jbGFzc0xpc3QuYWRkKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5wYWdpbmF0aW9uRGlzYWJsZWRDbGFzcykpO1xuICAgICAgfVxuICAgICAgZGVzdHJveSgpO1xuICAgIH07XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIucGFnaW5hdGlvbiwge1xuICAgICAgZW5hYmxlLFxuICAgICAgZGlzYWJsZSxcbiAgICAgIHJlbmRlcixcbiAgICAgIHVwZGF0ZSxcbiAgICAgIGluaXQsXG4gICAgICBkZXN0cm95XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBTY3JvbGxiYXIoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvbixcbiAgICAgIGVtaXRcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgbGV0IGlzVG91Y2hlZCA9IGZhbHNlO1xuICAgIGxldCB0aW1lb3V0ID0gbnVsbDtcbiAgICBsZXQgZHJhZ1RpbWVvdXQgPSBudWxsO1xuICAgIGxldCBkcmFnU3RhcnRQb3M7XG4gICAgbGV0IGRyYWdTaXplO1xuICAgIGxldCB0cmFja1NpemU7XG4gICAgbGV0IGRpdmlkZXI7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIHNjcm9sbGJhcjoge1xuICAgICAgICBlbDogbnVsbCxcbiAgICAgICAgZHJhZ1NpemU6ICdhdXRvJyxcbiAgICAgICAgaGlkZTogZmFsc2UsXG4gICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgIHNuYXBPblJlbGVhc2U6IHRydWUsXG4gICAgICAgIGxvY2tDbGFzczogJ3N3aXBlci1zY3JvbGxiYXItbG9jaycsXG4gICAgICAgIGRyYWdDbGFzczogJ3N3aXBlci1zY3JvbGxiYXItZHJhZycsXG4gICAgICAgIHNjcm9sbGJhckRpc2FibGVkQ2xhc3M6ICdzd2lwZXItc2Nyb2xsYmFyLWRpc2FibGVkJyxcbiAgICAgICAgaG9yaXpvbnRhbENsYXNzOiBgc3dpcGVyLXNjcm9sbGJhci1ob3Jpem9udGFsYCxcbiAgICAgICAgdmVydGljYWxDbGFzczogYHN3aXBlci1zY3JvbGxiYXItdmVydGljYWxgXG4gICAgICB9XG4gICAgfSk7XG4gICAgc3dpcGVyLnNjcm9sbGJhciA9IHtcbiAgICAgIGVsOiBudWxsLFxuICAgICAgZHJhZ0VsOiBudWxsXG4gICAgfTtcbiAgICBmdW5jdGlvbiBzZXRUcmFuc2xhdGUoKSB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmVsIHx8ICFzd2lwZXIuc2Nyb2xsYmFyLmVsKSByZXR1cm47XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNjcm9sbGJhcixcbiAgICAgICAgcnRsVHJhbnNsYXRlOiBydGxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRyYWdFbCxcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnNjcm9sbGJhcjtcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gc3dpcGVyLnBhcmFtcy5sb29wID8gc3dpcGVyLnByb2dyZXNzTG9vcCA6IHN3aXBlci5wcm9ncmVzcztcbiAgICAgIGxldCBuZXdTaXplID0gZHJhZ1NpemU7XG4gICAgICBsZXQgbmV3UG9zID0gKHRyYWNrU2l6ZSAtIGRyYWdTaXplKSAqIHByb2dyZXNzO1xuICAgICAgaWYgKHJ0bCkge1xuICAgICAgICBuZXdQb3MgPSAtbmV3UG9zO1xuICAgICAgICBpZiAobmV3UG9zID4gMCkge1xuICAgICAgICAgIG5ld1NpemUgPSBkcmFnU2l6ZSAtIG5ld1BvcztcbiAgICAgICAgICBuZXdQb3MgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKC1uZXdQb3MgKyBkcmFnU2l6ZSA+IHRyYWNrU2l6ZSkge1xuICAgICAgICAgIG5ld1NpemUgPSB0cmFja1NpemUgKyBuZXdQb3M7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobmV3UG9zIDwgMCkge1xuICAgICAgICBuZXdTaXplID0gZHJhZ1NpemUgKyBuZXdQb3M7XG4gICAgICAgIG5ld1BvcyA9IDA7XG4gICAgICB9IGVsc2UgaWYgKG5ld1BvcyArIGRyYWdTaXplID4gdHJhY2tTaXplKSB7XG4gICAgICAgIG5ld1NpemUgPSB0cmFja1NpemUgLSBuZXdQb3M7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHtuZXdQb3N9cHgsIDAsIDApYDtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLndpZHRoID0gYCR7bmV3U2l6ZX1weGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkcmFnRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDBweCwgJHtuZXdQb3N9cHgsIDApYDtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLmhlaWdodCA9IGAke25ld1NpemV9cHhgO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy5oaWRlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgICBlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnNDAwbXMnO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0VHJhbnNpdGlvbihkdXJhdGlvbikge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhc3dpcGVyLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgICAgc3dpcGVyLnNjcm9sbGJhci5kcmFnRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVTaXplKCkge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhc3dpcGVyLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgICAgY29uc3Qge1xuICAgICAgICBzY3JvbGxiYXJcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRyYWdFbCxcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgICBkcmFnRWwuc3R5bGUud2lkdGggPSAnJztcbiAgICAgIGRyYWdFbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgIHRyYWNrU2l6ZSA9IHN3aXBlci5pc0hvcml6b250YWwoKSA/IGVsLm9mZnNldFdpZHRoIDogZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgZGl2aWRlciA9IHN3aXBlci5zaXplIC8gKHN3aXBlci52aXJ0dWFsU2l6ZSArIHN3aXBlci5wYXJhbXMuc2xpZGVzT2Zmc2V0QmVmb3JlIC0gKHN3aXBlci5wYXJhbXMuY2VudGVyZWRTbGlkZXMgPyBzd2lwZXIuc25hcEdyaWRbMF0gOiAwKSk7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuZHJhZ1NpemUgPT09ICdhdXRvJykge1xuICAgICAgICBkcmFnU2l6ZSA9IHRyYWNrU2l6ZSAqIGRpdmlkZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkcmFnU2l6ZSA9IHBhcnNlSW50KHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdTaXplLCAxMCk7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIGRyYWdFbC5zdHlsZS53aWR0aCA9IGAke2RyYWdTaXplfXB4YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdFbC5zdHlsZS5oZWlnaHQgPSBgJHtkcmFnU2l6ZX1weGA7XG4gICAgICB9XG4gICAgICBpZiAoZGl2aWRlciA+PSAxKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuaGlkZSkge1xuICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLndhdGNoT3ZlcmZsb3cgJiYgc3dpcGVyLmVuYWJsZWQpIHtcbiAgICAgICAgc2Nyb2xsYmFyLmVsLmNsYXNzTGlzdFtzd2lwZXIuaXNMb2NrZWQgPyAnYWRkJyA6ICdyZW1vdmUnXShzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5sb2NrQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQb2ludGVyUG9zaXRpb24oZSkge1xuICAgICAgcmV0dXJuIHN3aXBlci5pc0hvcml6b250YWwoKSA/IGUuY2xpZW50WCA6IGUuY2xpZW50WTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0RHJhZ1Bvc2l0aW9uKGUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2Nyb2xsYmFyLFxuICAgICAgICBydGxUcmFuc2xhdGU6IHJ0bFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgICBsZXQgcG9zaXRpb25SYXRpbztcbiAgICAgIHBvc2l0aW9uUmF0aW8gPSAoZ2V0UG9pbnRlclBvc2l0aW9uKGUpIC0gZWxlbWVudE9mZnNldChlbClbc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJ2xlZnQnIDogJ3RvcCddIC0gKGRyYWdTdGFydFBvcyAhPT0gbnVsbCA/IGRyYWdTdGFydFBvcyA6IGRyYWdTaXplIC8gMikpIC8gKHRyYWNrU2l6ZSAtIGRyYWdTaXplKTtcbiAgICAgIHBvc2l0aW9uUmF0aW8gPSBNYXRoLm1heChNYXRoLm1pbihwb3NpdGlvblJhdGlvLCAxKSwgMCk7XG4gICAgICBpZiAocnRsKSB7XG4gICAgICAgIHBvc2l0aW9uUmF0aW8gPSAxIC0gcG9zaXRpb25SYXRpbztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gc3dpcGVyLm1pblRyYW5zbGF0ZSgpICsgKHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKSkgKiBwb3NpdGlvblJhdGlvO1xuICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKHBvc2l0aW9uKTtcbiAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUocG9zaXRpb24pO1xuICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICBzd2lwZXIudXBkYXRlU2xpZGVzQ2xhc3NlcygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkRyYWdTdGFydChlKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnNjcm9sbGJhcjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2Nyb2xsYmFyLFxuICAgICAgICB3cmFwcGVyRWxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGVsLFxuICAgICAgICBkcmFnRWxcbiAgICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgICBpc1RvdWNoZWQgPSB0cnVlO1xuICAgICAgZHJhZ1N0YXJ0UG9zID0gZS50YXJnZXQgPT09IGRyYWdFbCA/IGdldFBvaW50ZXJQb3NpdGlvbihlKSAtIGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdsZWZ0JyA6ICd0b3AnXSA6IG51bGw7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgd3JhcHBlckVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcxMDBtcyc7XG4gICAgICBkcmFnRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzEwMG1zJztcbiAgICAgIHNldERyYWdQb3NpdGlvbihlKTtcbiAgICAgIGNsZWFyVGltZW91dChkcmFnVGltZW91dCk7XG4gICAgICBlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMG1zJztcbiAgICAgIGlmIChwYXJhbXMuaGlkZSkge1xuICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5zdHlsZVsnc2Nyb2xsLXNuYXAtdHlwZSddID0gJ25vbmUnO1xuICAgICAgfVxuICAgICAgZW1pdCgnc2Nyb2xsYmFyRHJhZ1N0YXJ0JywgZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uRHJhZ01vdmUoZSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzY3JvbGxiYXIsXG4gICAgICAgIHdyYXBwZXJFbFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWwsXG4gICAgICAgIGRyYWdFbFxuICAgICAgfSA9IHNjcm9sbGJhcjtcbiAgICAgIGlmICghaXNUb3VjaGVkKSByZXR1cm47XG4gICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCAmJiBlLmNhbmNlbGFibGUpIGUucHJldmVudERlZmF1bHQoKTtlbHNlIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgIHNldERyYWdQb3NpdGlvbihlKTtcbiAgICAgIHdyYXBwZXJFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMG1zJztcbiAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwbXMnO1xuICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwbXMnO1xuICAgICAgZW1pdCgnc2Nyb2xsYmFyRHJhZ01vdmUnLCBlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25EcmFnRW5kKGUpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyO1xuICAgICAgY29uc3Qge1xuICAgICAgICBzY3JvbGxiYXIsXG4gICAgICAgIHdyYXBwZXJFbFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzY3JvbGxiYXI7XG4gICAgICBpZiAoIWlzVG91Y2hlZCkgcmV0dXJuO1xuICAgICAgaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGVbJ3Njcm9sbC1zbmFwLXR5cGUnXSA9ICcnO1xuICAgICAgICB3cmFwcGVyRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAocGFyYW1zLmhpZGUpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGRyYWdUaW1lb3V0KTtcbiAgICAgICAgZHJhZ1RpbWVvdXQgPSBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzQwMG1zJztcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgICBlbWl0KCdzY3JvbGxiYXJEcmFnRW5kJywgZSk7XG4gICAgICBpZiAocGFyYW1zLnNuYXBPblJlbGVhc2UpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG9DbG9zZXN0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV2ZW50cyhtZXRob2QpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2Nyb2xsYmFyLFxuICAgICAgICBwYXJhbXNcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCBlbCA9IHNjcm9sbGJhci5lbDtcbiAgICAgIGlmICghZWwpIHJldHVybjtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGVsO1xuICAgICAgY29uc3QgYWN0aXZlTGlzdGVuZXIgPSBwYXJhbXMucGFzc2l2ZUxpc3RlbmVycyA/IHtcbiAgICAgICAgcGFzc2l2ZTogZmFsc2UsXG4gICAgICAgIGNhcHR1cmU6IGZhbHNlXG4gICAgICB9IDogZmFsc2U7XG4gICAgICBjb25zdCBwYXNzaXZlTGlzdGVuZXIgPSBwYXJhbXMucGFzc2l2ZUxpc3RlbmVycyA/IHtcbiAgICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgICAgY2FwdHVyZTogZmFsc2VcbiAgICAgIH0gOiBmYWxzZTtcbiAgICAgIGlmICghdGFyZ2V0KSByZXR1cm47XG4gICAgICBjb25zdCBldmVudE1ldGhvZCA9IG1ldGhvZCA9PT0gJ29uJyA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdyZW1vdmVFdmVudExpc3RlbmVyJztcbiAgICAgIHRhcmdldFtldmVudE1ldGhvZF0oJ3BvaW50ZXJkb3duJywgb25EcmFnU3RhcnQsIGFjdGl2ZUxpc3RlbmVyKTtcbiAgICAgIGRvY3VtZW50W2V2ZW50TWV0aG9kXSgncG9pbnRlcm1vdmUnLCBvbkRyYWdNb3ZlLCBhY3RpdmVMaXN0ZW5lcik7XG4gICAgICBkb2N1bWVudFtldmVudE1ldGhvZF0oJ3BvaW50ZXJ1cCcsIG9uRHJhZ0VuZCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5hYmxlRHJhZ2dhYmxlKCkge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhc3dpcGVyLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgICAgZXZlbnRzKCdvbicpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaXNhYmxlRHJhZ2dhYmxlKCkge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5lbCB8fCAhc3dpcGVyLnNjcm9sbGJhci5lbCkgcmV0dXJuO1xuICAgICAgZXZlbnRzKCdvZmYnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2Nyb2xsYmFyLFxuICAgICAgICBlbDogc3dpcGVyRWxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBzd2lwZXIucGFyYW1zLnNjcm9sbGJhciA9IGNyZWF0ZUVsZW1lbnRJZk5vdERlZmluZWQoc3dpcGVyLCBzd2lwZXIub3JpZ2luYWxQYXJhbXMuc2Nyb2xsYmFyLCBzd2lwZXIucGFyYW1zLnNjcm9sbGJhciwge1xuICAgICAgICBlbDogJ3N3aXBlci1zY3JvbGxiYXInXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyO1xuICAgICAgaWYgKCFwYXJhbXMuZWwpIHJldHVybjtcbiAgICAgIGxldCBlbDtcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmVsID09PSAnc3RyaW5nJyAmJiBzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICAgIGVsID0gc3dpcGVyLmVsLnF1ZXJ5U2VsZWN0b3IocGFyYW1zLmVsKTtcbiAgICAgIH1cbiAgICAgIGlmICghZWwgJiYgdHlwZW9mIHBhcmFtcy5lbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBhcmFtcy5lbCk7XG4gICAgICAgIGlmICghZWwubGVuZ3RoKSByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKCFlbCkge1xuICAgICAgICBlbCA9IHBhcmFtcy5lbDtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLnVuaXF1ZU5hdkVsZW1lbnRzICYmIHR5cGVvZiBwYXJhbXMuZWwgPT09ICdzdHJpbmcnICYmIGVsLmxlbmd0aCA+IDEgJiYgc3dpcGVyRWwucXVlcnlTZWxlY3RvckFsbChwYXJhbXMuZWwpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbCA9IHN3aXBlckVsLnF1ZXJ5U2VsZWN0b3IocGFyYW1zLmVsKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbC5sZW5ndGggPiAwKSBlbCA9IGVsWzBdO1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBwYXJhbXMuaG9yaXpvbnRhbENsYXNzIDogcGFyYW1zLnZlcnRpY2FsQ2xhc3MpO1xuICAgICAgbGV0IGRyYWdFbDtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICBkcmFnRWwgPSBlbC5xdWVyeVNlbGVjdG9yKGNsYXNzZXNUb1NlbGVjdG9yKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdDbGFzcykpO1xuICAgICAgICBpZiAoIWRyYWdFbCkge1xuICAgICAgICAgIGRyYWdFbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmRyYWdDbGFzcyk7XG4gICAgICAgICAgZWwuYXBwZW5kKGRyYWdFbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIE9iamVjdC5hc3NpZ24oc2Nyb2xsYmFyLCB7XG4gICAgICAgIGVsLFxuICAgICAgICBkcmFnRWxcbiAgICAgIH0pO1xuICAgICAgaWYgKHBhcmFtcy5kcmFnZ2FibGUpIHtcbiAgICAgICAgZW5hYmxlRHJhZ2dhYmxlKCk7XG4gICAgICB9XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0W3N3aXBlci5lbmFibGVkID8gJ3JlbW92ZScgOiAnYWRkJ10oLi4uY2xhc3Nlc1RvVG9rZW5zKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmxvY2tDbGFzcykpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXI7XG4gICAgICBjb25zdCBlbCA9IHN3aXBlci5zY3JvbGxiYXIuZWw7XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc2VzVG9Ub2tlbnMoc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gcGFyYW1zLmhvcml6b250YWxDbGFzcyA6IHBhcmFtcy52ZXJ0aWNhbENsYXNzKSk7XG4gICAgICB9XG4gICAgICBkaXNhYmxlRHJhZ2dhYmxlKCk7XG4gICAgfVxuICAgIG9uKCdjaGFuZ2VEaXJlY3Rpb24nLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5zY3JvbGxiYXIgfHwgIXN3aXBlci5zY3JvbGxiYXIuZWwpIHJldHVybjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyO1xuICAgICAgbGV0IHtcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzd2lwZXIuc2Nyb2xsYmFyO1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuY2xhc3NMaXN0LnJlbW92ZShwYXJhbXMuaG9yaXpvbnRhbENsYXNzLCBwYXJhbXMudmVydGljYWxDbGFzcyk7XG4gICAgICAgIHN1YkVsLmNsYXNzTGlzdC5hZGQoc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gcGFyYW1zLmhvcml6b250YWxDbGFzcyA6IHBhcmFtcy52ZXJ0aWNhbENsYXNzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIG9uKCdpbml0JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuc2Nyb2xsYmFyLmVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBkaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0KCk7XG4gICAgICAgIHVwZGF0ZVNpemUoKTtcbiAgICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3VwZGF0ZSByZXNpemUgb2JzZXJ2ZXJVcGRhdGUgbG9jayB1bmxvY2sgY2hhbmdlRGlyZWN0aW9uJywgKCkgPT4ge1xuICAgICAgdXBkYXRlU2l6ZSgpO1xuICAgIH0pO1xuICAgIG9uKCdzZXRUcmFuc2xhdGUnLCAoKSA9PiB7XG4gICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNpdGlvbicsIChfcywgZHVyYXRpb24pID0+IHtcbiAgICAgIHNldFRyYW5zaXRpb24oZHVyYXRpb24pO1xuICAgIH0pO1xuICAgIG9uKCdlbmFibGUgZGlzYWJsZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWxcbiAgICAgIH0gPSBzd2lwZXIuc2Nyb2xsYmFyO1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdFtzd2lwZXIuZW5hYmxlZCA/ICdyZW1vdmUnIDogJ2FkZCddKC4uLmNsYXNzZXNUb1Rva2Vucyhzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5sb2NrQ2xhc3MpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICBjb25zdCBlbmFibGUgPSAoKSA9PiB7XG4gICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LnJlbW92ZSguLi5jbGFzc2VzVG9Ub2tlbnMoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuc2Nyb2xsYmFyRGlzYWJsZWRDbGFzcykpO1xuICAgICAgaWYgKHN3aXBlci5zY3JvbGxiYXIuZWwpIHtcbiAgICAgICAgc3dpcGVyLnNjcm9sbGJhci5lbC5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzZXNUb1Rva2Vucyhzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5zY3JvbGxiYXJEaXNhYmxlZENsYXNzKSk7XG4gICAgICB9XG4gICAgICBpbml0KCk7XG4gICAgICB1cGRhdGVTaXplKCk7XG4gICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGRpc2FibGUgPSAoKSA9PiB7XG4gICAgICBzd2lwZXIuZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzVG9Ub2tlbnMoc3dpcGVyLnBhcmFtcy5zY3JvbGxiYXIuc2Nyb2xsYmFyRGlzYWJsZWRDbGFzcykpO1xuICAgICAgaWYgKHN3aXBlci5zY3JvbGxiYXIuZWwpIHtcbiAgICAgICAgc3dpcGVyLnNjcm9sbGJhci5lbC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXNUb1Rva2Vucyhzd2lwZXIucGFyYW1zLnNjcm9sbGJhci5zY3JvbGxiYXJEaXNhYmxlZENsYXNzKSk7XG4gICAgICB9XG4gICAgICBkZXN0cm95KCk7XG4gICAgfTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5zY3JvbGxiYXIsIHtcbiAgICAgIGVuYWJsZSxcbiAgICAgIGRpc2FibGUsXG4gICAgICB1cGRhdGVTaXplLFxuICAgICAgc2V0VHJhbnNsYXRlLFxuICAgICAgaW5pdCxcbiAgICAgIGRlc3Ryb3lcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFBhcmFsbGF4KF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgcGFyYWxsYXg6IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBlbGVtZW50c1NlbGVjdG9yID0gJ1tkYXRhLXN3aXBlci1wYXJhbGxheF0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC14XSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXldLCBbZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eV0sIFtkYXRhLXN3aXBlci1wYXJhbGxheC1zY2FsZV0nO1xuICAgIGNvbnN0IHNldFRyYW5zZm9ybSA9IChlbCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcnRsXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgcnRsRmFjdG9yID0gcnRsID8gLTEgOiAxO1xuICAgICAgY29uc3QgcCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItcGFyYWxsYXgnKSB8fCAnMCc7XG4gICAgICBsZXQgeCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItcGFyYWxsYXgteCcpO1xuICAgICAgbGV0IHkgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXBhcmFsbGF4LXknKTtcbiAgICAgIGNvbnN0IHNjYWxlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1wYXJhbGxheC1zY2FsZScpO1xuICAgICAgY29uc3Qgb3BhY2l0eSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItcGFyYWxsYXgtb3BhY2l0eScpO1xuICAgICAgY29uc3Qgcm90YXRlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1wYXJhbGxheC1yb3RhdGUnKTtcbiAgICAgIGlmICh4IHx8IHkpIHtcbiAgICAgICAgeCA9IHggfHwgJzAnO1xuICAgICAgICB5ID0geSB8fCAnMCc7XG4gICAgICB9IGVsc2UgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICB4ID0gcDtcbiAgICAgICAgeSA9ICcwJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHkgPSBwO1xuICAgICAgICB4ID0gJzAnO1xuICAgICAgfVxuICAgICAgaWYgKHguaW5kZXhPZignJScpID49IDApIHtcbiAgICAgICAgeCA9IGAke3BhcnNlSW50KHgsIDEwKSAqIHByb2dyZXNzICogcnRsRmFjdG9yfSVgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeCA9IGAke3ggKiBwcm9ncmVzcyAqIHJ0bEZhY3Rvcn1weGA7XG4gICAgICB9XG4gICAgICBpZiAoeS5pbmRleE9mKCclJykgPj0gMCkge1xuICAgICAgICB5ID0gYCR7cGFyc2VJbnQoeSwgMTApICogcHJvZ3Jlc3N9JWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5ID0gYCR7eSAqIHByb2dyZXNzfXB4YDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb3BhY2l0eSAhPT0gJ3VuZGVmaW5lZCcgJiYgb3BhY2l0eSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBjdXJyZW50T3BhY2l0eSA9IG9wYWNpdHkgLSAob3BhY2l0eSAtIDEpICogKDEgLSBNYXRoLmFicyhwcm9ncmVzcykpO1xuICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gY3VycmVudE9wYWNpdHk7XG4gICAgICB9XG4gICAgICBsZXQgdHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7eH0sICR7eX0sIDBweClgO1xuICAgICAgaWYgKHR5cGVvZiBzY2FsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgc2NhbGUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFNjYWxlID0gc2NhbGUgLSAoc2NhbGUgLSAxKSAqICgxIC0gTWF0aC5hYnMocHJvZ3Jlc3MpKTtcbiAgICAgICAgdHJhbnNmb3JtICs9IGAgc2NhbGUoJHtjdXJyZW50U2NhbGV9KWA7XG4gICAgICB9XG4gICAgICBpZiAocm90YXRlICYmIHR5cGVvZiByb3RhdGUgIT09ICd1bmRlZmluZWQnICYmIHJvdGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBjdXJyZW50Um90YXRlID0gcm90YXRlICogcHJvZ3Jlc3MgKiAtMTtcbiAgICAgICAgdHJhbnNmb3JtICs9IGAgcm90YXRlKCR7Y3VycmVudFJvdGF0ZX1kZWcpYDtcbiAgICAgIH1cbiAgICAgIGVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWwsXG4gICAgICAgIHNsaWRlcyxcbiAgICAgICAgcHJvZ3Jlc3MsXG4gICAgICAgIHNuYXBHcmlkLFxuICAgICAgICBpc0VsZW1lbnRcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCBlbGVtZW50cyA9IGVsZW1lbnRDaGlsZHJlbihlbCwgZWxlbWVudHNTZWxlY3Rvcik7XG4gICAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50cy5wdXNoKC4uLmVsZW1lbnRDaGlsZHJlbihzd2lwZXIuaG9zdEVsLCBlbGVtZW50c1NlbGVjdG9yKSk7XG4gICAgICB9XG4gICAgICBlbGVtZW50cy5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc2V0VHJhbnNmb3JtKHN1YkVsLCBwcm9ncmVzcyk7XG4gICAgICB9KTtcbiAgICAgIHNsaWRlcy5mb3JFYWNoKChzbGlkZUVsLCBzbGlkZUluZGV4KSA9PiB7XG4gICAgICAgIGxldCBzbGlkZVByb2dyZXNzID0gc2xpZGVFbC5wcm9ncmVzcztcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXAgPiAxICYmIHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgc2xpZGVQcm9ncmVzcyArPSBNYXRoLmNlaWwoc2xpZGVJbmRleCAvIDIpIC0gcHJvZ3Jlc3MgKiAoc25hcEdyaWQubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVQcm9ncmVzcyA9IE1hdGgubWluKE1hdGgubWF4KHNsaWRlUHJvZ3Jlc3MsIC0xKSwgMSk7XG4gICAgICAgIHNsaWRlRWwucXVlcnlTZWxlY3RvckFsbChgJHtlbGVtZW50c1NlbGVjdG9yfSwgW2RhdGEtc3dpcGVyLXBhcmFsbGF4LXJvdGF0ZV1gKS5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgICBzZXRUcmFuc2Zvcm0oc3ViRWwsIHNsaWRlUHJvZ3Jlc3MpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2V0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChkdXJhdGlvbikge1xuICAgICAgaWYgKGR1cmF0aW9uID09PSB2b2lkIDApIHtcbiAgICAgICAgZHVyYXRpb24gPSBzd2lwZXIucGFyYW1zLnNwZWVkO1xuICAgICAgfVxuICAgICAgY29uc3Qge1xuICAgICAgICBlbCxcbiAgICAgICAgaG9zdEVsXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uZWwucXVlcnlTZWxlY3RvckFsbChlbGVtZW50c1NlbGVjdG9yKV07XG4gICAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50cy5wdXNoKC4uLmhvc3RFbC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRzU2VsZWN0b3IpKTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnRzLmZvckVhY2gocGFyYWxsYXhFbCA9PiB7XG4gICAgICAgIGxldCBwYXJhbGxheER1cmF0aW9uID0gcGFyc2VJbnQocGFyYWxsYXhFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXBhcmFsbGF4LWR1cmF0aW9uJyksIDEwKSB8fCBkdXJhdGlvbjtcbiAgICAgICAgaWYgKGR1cmF0aW9uID09PSAwKSBwYXJhbGxheER1cmF0aW9uID0gMDtcbiAgICAgICAgcGFyYWxsYXhFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtwYXJhbGxheER1cmF0aW9ufW1zYDtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgc3dpcGVyLnBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzID0gdHJ1ZTtcbiAgICAgIHN3aXBlci5vcmlnaW5hbFBhcmFtcy53YXRjaFNsaWRlc1Byb2dyZXNzID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5wYXJhbGxheC5lbmFibGVkKSByZXR1cm47XG4gICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNsYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnBhcmFsbGF4LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHNldFRyYW5zbGF0ZSgpO1xuICAgIH0pO1xuICAgIG9uKCdzZXRUcmFuc2l0aW9uJywgKF9zd2lwZXIsIGR1cmF0aW9uKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMucGFyYWxsYXguZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgc2V0VHJhbnNpdGlvbihkdXJhdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBab29tKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb24sXG4gICAgICBlbWl0XG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIHpvb206IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIGxpbWl0VG9PcmlnaW5hbFNpemU6IGZhbHNlLFxuICAgICAgICBtYXhSYXRpbzogMyxcbiAgICAgICAgbWluUmF0aW86IDEsXG4gICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgY29udGFpbmVyQ2xhc3M6ICdzd2lwZXItem9vbS1jb250YWluZXInLFxuICAgICAgICB6b29tZWRTbGlkZUNsYXNzOiAnc3dpcGVyLXNsaWRlLXpvb21lZCdcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzd2lwZXIuem9vbSA9IHtcbiAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgfTtcbiAgICBsZXQgY3VycmVudFNjYWxlID0gMTtcbiAgICBsZXQgaXNTY2FsaW5nID0gZmFsc2U7XG4gICAgbGV0IGZha2VHZXN0dXJlVG91Y2hlZDtcbiAgICBsZXQgZmFrZUdlc3R1cmVNb3ZlZDtcbiAgICBjb25zdCBldkNhY2hlID0gW107XG4gICAgY29uc3QgZ2VzdHVyZSA9IHtcbiAgICAgIG9yaWdpblg6IDAsXG4gICAgICBvcmlnaW5ZOiAwLFxuICAgICAgc2xpZGVFbDogdW5kZWZpbmVkLFxuICAgICAgc2xpZGVXaWR0aDogdW5kZWZpbmVkLFxuICAgICAgc2xpZGVIZWlnaHQ6IHVuZGVmaW5lZCxcbiAgICAgIGltYWdlRWw6IHVuZGVmaW5lZCxcbiAgICAgIGltYWdlV3JhcEVsOiB1bmRlZmluZWQsXG4gICAgICBtYXhSYXRpbzogM1xuICAgIH07XG4gICAgY29uc3QgaW1hZ2UgPSB7XG4gICAgICBpc1RvdWNoZWQ6IHVuZGVmaW5lZCxcbiAgICAgIGlzTW92ZWQ6IHVuZGVmaW5lZCxcbiAgICAgIGN1cnJlbnRYOiB1bmRlZmluZWQsXG4gICAgICBjdXJyZW50WTogdW5kZWZpbmVkLFxuICAgICAgbWluWDogdW5kZWZpbmVkLFxuICAgICAgbWluWTogdW5kZWZpbmVkLFxuICAgICAgbWF4WDogdW5kZWZpbmVkLFxuICAgICAgbWF4WTogdW5kZWZpbmVkLFxuICAgICAgd2lkdGg6IHVuZGVmaW5lZCxcbiAgICAgIGhlaWdodDogdW5kZWZpbmVkLFxuICAgICAgc3RhcnRYOiB1bmRlZmluZWQsXG4gICAgICBzdGFydFk6IHVuZGVmaW5lZCxcbiAgICAgIHRvdWNoZXNTdGFydDoge30sXG4gICAgICB0b3VjaGVzQ3VycmVudDoge31cbiAgICB9O1xuICAgIGNvbnN0IHZlbG9jaXR5ID0ge1xuICAgICAgeDogdW5kZWZpbmVkLFxuICAgICAgeTogdW5kZWZpbmVkLFxuICAgICAgcHJldlBvc2l0aW9uWDogdW5kZWZpbmVkLFxuICAgICAgcHJldlBvc2l0aW9uWTogdW5kZWZpbmVkLFxuICAgICAgcHJldlRpbWU6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgbGV0IHNjYWxlID0gMTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3dpcGVyLnpvb20sICdzY2FsZScsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHNjYWxlO1xuICAgICAgfSxcbiAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICBpZiAoc2NhbGUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgaW1hZ2VFbCA9IGdlc3R1cmUuaW1hZ2VFbDtcbiAgICAgICAgICBjb25zdCBzbGlkZUVsID0gZ2VzdHVyZS5zbGlkZUVsO1xuICAgICAgICAgIGVtaXQoJ3pvb21DaGFuZ2UnLCB2YWx1ZSwgaW1hZ2VFbCwgc2xpZGVFbCk7XG4gICAgICAgIH1cbiAgICAgICAgc2NhbGUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiBnZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKCkge1xuICAgICAgaWYgKGV2Q2FjaGUubGVuZ3RoIDwgMikgcmV0dXJuIDE7XG4gICAgICBjb25zdCB4MSA9IGV2Q2FjaGVbMF0ucGFnZVg7XG4gICAgICBjb25zdCB5MSA9IGV2Q2FjaGVbMF0ucGFnZVk7XG4gICAgICBjb25zdCB4MiA9IGV2Q2FjaGVbMV0ucGFnZVg7XG4gICAgICBjb25zdCB5MiA9IGV2Q2FjaGVbMV0ucGFnZVk7XG4gICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydCgoeDIgLSB4MSkgKiogMiArICh5MiAtIHkxKSAqKiAyKTtcbiAgICAgIHJldHVybiBkaXN0YW5jZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0TWF4UmF0aW8oKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnpvb207XG4gICAgICBjb25zdCBtYXhSYXRpbyA9IGdlc3R1cmUuaW1hZ2VXcmFwRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci16b29tJykgfHwgcGFyYW1zLm1heFJhdGlvO1xuICAgICAgaWYgKHBhcmFtcy5saW1pdFRvT3JpZ2luYWxTaXplICYmIGdlc3R1cmUuaW1hZ2VFbCAmJiBnZXN0dXJlLmltYWdlRWwubmF0dXJhbFdpZHRoKSB7XG4gICAgICAgIGNvbnN0IGltYWdlTWF4UmF0aW8gPSBnZXN0dXJlLmltYWdlRWwubmF0dXJhbFdpZHRoIC8gZ2VzdHVyZS5pbWFnZUVsLm9mZnNldFdpZHRoO1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oaW1hZ2VNYXhSYXRpbywgbWF4UmF0aW8pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1heFJhdGlvO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRTY2FsZU9yaWdpbigpIHtcbiAgICAgIGlmIChldkNhY2hlLmxlbmd0aCA8IDIpIHJldHVybiB7XG4gICAgICAgIHg6IG51bGwsXG4gICAgICAgIHk6IG51bGxcbiAgICAgIH07XG4gICAgICBjb25zdCBib3ggPSBnZXN0dXJlLmltYWdlRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICByZXR1cm4gWyhldkNhY2hlWzBdLnBhZ2VYICsgKGV2Q2FjaGVbMV0ucGFnZVggLSBldkNhY2hlWzBdLnBhZ2VYKSAvIDIgLSBib3gueCAtIHdpbmRvdy5zY3JvbGxYKSAvIGN1cnJlbnRTY2FsZSwgKGV2Q2FjaGVbMF0ucGFnZVkgKyAoZXZDYWNoZVsxXS5wYWdlWSAtIGV2Q2FjaGVbMF0ucGFnZVkpIC8gMiAtIGJveC55IC0gd2luZG93LnNjcm9sbFkpIC8gY3VycmVudFNjYWxlXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U2xpZGVTZWxlY3RvcigpIHtcbiAgICAgIHJldHVybiBzd2lwZXIuaXNFbGVtZW50ID8gYHN3aXBlci1zbGlkZWAgOiBgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfWA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV2ZW50V2l0aGluU2xpZGUoZSkge1xuICAgICAgY29uc3Qgc2xpZGVTZWxlY3RvciA9IGdldFNsaWRlU2VsZWN0b3IoKTtcbiAgICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKHNsaWRlU2VsZWN0b3IpKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChzd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuY29udGFpbnMoZS50YXJnZXQpKS5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXZlbnRXaXRoaW5ab29tQ29udGFpbmVyKGUpIHtcbiAgICAgIGNvbnN0IHNlbGVjdG9yID0gYC4ke3N3aXBlci5wYXJhbXMuem9vbS5jb250YWluZXJDbGFzc31gO1xuICAgICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoc2VsZWN0b3IpKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChbLi4uc3dpcGVyLmhvc3RFbC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKV0uZmlsdGVyKGNvbnRhaW5lckVsID0+IGNvbnRhaW5lckVsLmNvbnRhaW5zKGUudGFyZ2V0KSkubGVuZ3RoID4gMCkgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRXZlbnRzXG4gICAgZnVuY3Rpb24gb25HZXN0dXJlU3RhcnQoZSkge1xuICAgICAgaWYgKGUucG9pbnRlclR5cGUgPT09ICdtb3VzZScpIHtcbiAgICAgICAgZXZDYWNoZS5zcGxpY2UoMCwgZXZDYWNoZS5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgaWYgKCFldmVudFdpdGhpblNsaWRlKGUpKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnpvb207XG4gICAgICBmYWtlR2VzdHVyZVRvdWNoZWQgPSBmYWxzZTtcbiAgICAgIGZha2VHZXN0dXJlTW92ZWQgPSBmYWxzZTtcbiAgICAgIGV2Q2FjaGUucHVzaChlKTtcbiAgICAgIGlmIChldkNhY2hlLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmFrZUdlc3R1cmVUb3VjaGVkID0gdHJ1ZTtcbiAgICAgIGdlc3R1cmUuc2NhbGVTdGFydCA9IGdldERpc3RhbmNlQmV0d2VlblRvdWNoZXMoKTtcbiAgICAgIGlmICghZ2VzdHVyZS5zbGlkZUVsKSB7XG4gICAgICAgIGdlc3R1cmUuc2xpZGVFbCA9IGUudGFyZ2V0LmNsb3Nlc3QoYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApO1xuICAgICAgICBpZiAoIWdlc3R1cmUuc2xpZGVFbCkgZ2VzdHVyZS5zbGlkZUVsID0gc3dpcGVyLnNsaWRlc1tzd2lwZXIuYWN0aXZlSW5kZXhdO1xuICAgICAgICBsZXQgaW1hZ2VFbCA9IGdlc3R1cmUuc2xpZGVFbC5xdWVyeVNlbGVjdG9yKGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YCk7XG4gICAgICAgIGlmIChpbWFnZUVsKSB7XG4gICAgICAgICAgaW1hZ2VFbCA9IGltYWdlRWwucXVlcnlTZWxlY3RvckFsbCgncGljdHVyZSwgaW1nLCBzdmcsIGNhbnZhcywgLnN3aXBlci16b29tLXRhcmdldCcpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGdlc3R1cmUuaW1hZ2VFbCA9IGltYWdlRWw7XG4gICAgICAgIGlmIChpbWFnZUVsKSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbCA9IGVsZW1lbnRQYXJlbnRzKGdlc3R1cmUuaW1hZ2VFbCwgYC4ke3BhcmFtcy5jb250YWluZXJDbGFzc31gKVswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnZXN0dXJlLmltYWdlV3JhcEVsID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZ2VzdHVyZS5pbWFnZVdyYXBFbCkge1xuICAgICAgICAgIGdlc3R1cmUuaW1hZ2VFbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ2VzdHVyZS5tYXhSYXRpbyA9IGdldE1heFJhdGlvKCk7XG4gICAgICB9XG4gICAgICBpZiAoZ2VzdHVyZS5pbWFnZUVsKSB7XG4gICAgICAgIGNvbnN0IFtvcmlnaW5YLCBvcmlnaW5ZXSA9IGdldFNjYWxlT3JpZ2luKCk7XG4gICAgICAgIGdlc3R1cmUub3JpZ2luWCA9IG9yaWdpblg7XG4gICAgICAgIGdlc3R1cmUub3JpZ2luWSA9IG9yaWdpblk7XG4gICAgICAgIGdlc3R1cmUuaW1hZ2VFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMG1zJztcbiAgICAgIH1cbiAgICAgIGlzU2NhbGluZyA9IHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uR2VzdHVyZUNoYW5nZShlKSB7XG4gICAgICBpZiAoIWV2ZW50V2l0aGluU2xpZGUoZSkpIHJldHVybjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuem9vbTtcbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGNvbnN0IHBvaW50ZXJJbmRleCA9IGV2Q2FjaGUuZmluZEluZGV4KGNhY2hlZEV2ID0+IGNhY2hlZEV2LnBvaW50ZXJJZCA9PT0gZS5wb2ludGVySWQpO1xuICAgICAgaWYgKHBvaW50ZXJJbmRleCA+PSAwKSBldkNhY2hlW3BvaW50ZXJJbmRleF0gPSBlO1xuICAgICAgaWYgKGV2Q2FjaGUubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmYWtlR2VzdHVyZU1vdmVkID0gdHJ1ZTtcbiAgICAgIGdlc3R1cmUuc2NhbGVNb3ZlID0gZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcygpO1xuICAgICAgaWYgKCFnZXN0dXJlLmltYWdlRWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgem9vbS5zY2FsZSA9IGdlc3R1cmUuc2NhbGVNb3ZlIC8gZ2VzdHVyZS5zY2FsZVN0YXJ0ICogY3VycmVudFNjYWxlO1xuICAgICAgaWYgKHpvb20uc2NhbGUgPiBnZXN0dXJlLm1heFJhdGlvKSB7XG4gICAgICAgIHpvb20uc2NhbGUgPSBnZXN0dXJlLm1heFJhdGlvIC0gMSArICh6b29tLnNjYWxlIC0gZ2VzdHVyZS5tYXhSYXRpbyArIDEpICoqIDAuNTtcbiAgICAgIH1cbiAgICAgIGlmICh6b29tLnNjYWxlIDwgcGFyYW1zLm1pblJhdGlvKSB7XG4gICAgICAgIHpvb20uc2NhbGUgPSBwYXJhbXMubWluUmF0aW8gKyAxIC0gKHBhcmFtcy5taW5SYXRpbyAtIHpvb20uc2NhbGUgKyAxKSAqKiAwLjU7XG4gICAgICB9XG4gICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgke3pvb20uc2NhbGV9KWA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uR2VzdHVyZUVuZChlKSB7XG4gICAgICBpZiAoIWV2ZW50V2l0aGluU2xpZGUoZSkpIHJldHVybjtcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnICYmIGUudHlwZSA9PT0gJ3BvaW50ZXJvdXQnKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnpvb207XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBjb25zdCBwb2ludGVySW5kZXggPSBldkNhY2hlLmZpbmRJbmRleChjYWNoZWRFdiA9PiBjYWNoZWRFdi5wb2ludGVySWQgPT09IGUucG9pbnRlcklkKTtcbiAgICAgIGlmIChwb2ludGVySW5kZXggPj0gMCkgZXZDYWNoZS5zcGxpY2UocG9pbnRlckluZGV4LCAxKTtcbiAgICAgIGlmICghZmFrZUdlc3R1cmVUb3VjaGVkIHx8ICFmYWtlR2VzdHVyZU1vdmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZha2VHZXN0dXJlVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgZmFrZUdlc3R1cmVNb3ZlZCA9IGZhbHNlO1xuICAgICAgaWYgKCFnZXN0dXJlLmltYWdlRWwpIHJldHVybjtcbiAgICAgIHpvb20uc2NhbGUgPSBNYXRoLm1heChNYXRoLm1pbih6b29tLnNjYWxlLCBnZXN0dXJlLm1heFJhdGlvKSwgcGFyYW1zLm1pblJhdGlvKTtcbiAgICAgIGdlc3R1cmUuaW1hZ2VFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtzd2lwZXIucGFyYW1zLnNwZWVkfW1zYDtcbiAgICAgIGdlc3R1cmUuaW1hZ2VFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKCR7em9vbS5zY2FsZX0pYDtcbiAgICAgIGN1cnJlbnRTY2FsZSA9IHpvb20uc2NhbGU7XG4gICAgICBpc1NjYWxpbmcgPSBmYWxzZTtcbiAgICAgIGlmICh6b29tLnNjYWxlID4gMSAmJiBnZXN0dXJlLnNsaWRlRWwpIHtcbiAgICAgICAgZ2VzdHVyZS5zbGlkZUVsLmNsYXNzTGlzdC5hZGQoYCR7cGFyYW1zLnpvb21lZFNsaWRlQ2xhc3N9YCk7XG4gICAgICB9IGVsc2UgaWYgKHpvb20uc2NhbGUgPD0gMSAmJiBnZXN0dXJlLnNsaWRlRWwpIHtcbiAgICAgICAgZ2VzdHVyZS5zbGlkZUVsLmNsYXNzTGlzdC5yZW1vdmUoYCR7cGFyYW1zLnpvb21lZFNsaWRlQ2xhc3N9YCk7XG4gICAgICB9XG4gICAgICBpZiAoem9vbS5zY2FsZSA9PT0gMSkge1xuICAgICAgICBnZXN0dXJlLm9yaWdpblggPSAwO1xuICAgICAgICBnZXN0dXJlLm9yaWdpblkgPSAwO1xuICAgICAgICBnZXN0dXJlLnNsaWRlRWwgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBhbGxvd1RvdWNoTW92ZVRpbWVvdXQ7XG4gICAgZnVuY3Rpb24gYWxsb3dUb3VjaE1vdmUoKSB7XG4gICAgICBzd2lwZXIudG91Y2hFdmVudHNEYXRhLnByZXZlbnRUb3VjaE1vdmVGcm9tUG9pbnRlck1vdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJldmVudFRvdWNoTW92ZSgpIHtcbiAgICAgIGNsZWFyVGltZW91dChhbGxvd1RvdWNoTW92ZVRpbWVvdXQpO1xuICAgICAgc3dpcGVyLnRvdWNoRXZlbnRzRGF0YS5wcmV2ZW50VG91Y2hNb3ZlRnJvbVBvaW50ZXJNb3ZlID0gdHJ1ZTtcbiAgICAgIGFsbG93VG91Y2hNb3ZlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhbGxvd1RvdWNoTW92ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7XG4gICAgICBjb25zdCBkZXZpY2UgPSBzd2lwZXIuZGV2aWNlO1xuICAgICAgaWYgKCFnZXN0dXJlLmltYWdlRWwpIHJldHVybjtcbiAgICAgIGlmIChpbWFnZS5pc1RvdWNoZWQpIHJldHVybjtcbiAgICAgIGlmIChkZXZpY2UuYW5kcm9pZCAmJiBlLmNhbmNlbGFibGUpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGltYWdlLmlzVG91Y2hlZCA9IHRydWU7XG4gICAgICBjb25zdCBldmVudCA9IGV2Q2FjaGUubGVuZ3RoID4gMCA/IGV2Q2FjaGVbMF0gOiBlO1xuICAgICAgaW1hZ2UudG91Y2hlc1N0YXJ0LnggPSBldmVudC5wYWdlWDtcbiAgICAgIGltYWdlLnRvdWNoZXNTdGFydC55ID0gZXZlbnQucGFnZVk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICAgIGlmICghZXZlbnRXaXRoaW5TbGlkZShlKSB8fCAhZXZlbnRXaXRoaW5ab29tQ29udGFpbmVyKGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGlmICghZ2VzdHVyZS5pbWFnZUVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghaW1hZ2UuaXNUb3VjaGVkIHx8ICFnZXN0dXJlLnNsaWRlRWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFpbWFnZS5pc01vdmVkKSB7XG4gICAgICAgIGltYWdlLndpZHRoID0gZ2VzdHVyZS5pbWFnZUVsLm9mZnNldFdpZHRoIHx8IGdlc3R1cmUuaW1hZ2VFbC5jbGllbnRXaWR0aDtcbiAgICAgICAgaW1hZ2UuaGVpZ2h0ID0gZ2VzdHVyZS5pbWFnZUVsLm9mZnNldEhlaWdodCB8fCBnZXN0dXJlLmltYWdlRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICBpbWFnZS5zdGFydFggPSBnZXRUcmFuc2xhdGUoZ2VzdHVyZS5pbWFnZVdyYXBFbCwgJ3gnKSB8fCAwO1xuICAgICAgICBpbWFnZS5zdGFydFkgPSBnZXRUcmFuc2xhdGUoZ2VzdHVyZS5pbWFnZVdyYXBFbCwgJ3knKSB8fCAwO1xuICAgICAgICBnZXN0dXJlLnNsaWRlV2lkdGggPSBnZXN0dXJlLnNsaWRlRWwub2Zmc2V0V2lkdGg7XG4gICAgICAgIGdlc3R1cmUuc2xpZGVIZWlnaHQgPSBnZXN0dXJlLnNsaWRlRWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwbXMnO1xuICAgICAgfVxuICAgICAgLy8gRGVmaW5lIGlmIHdlIG5lZWQgaW1hZ2UgZHJhZ1xuICAgICAgY29uc3Qgc2NhbGVkV2lkdGggPSBpbWFnZS53aWR0aCAqIHpvb20uc2NhbGU7XG4gICAgICBjb25zdCBzY2FsZWRIZWlnaHQgPSBpbWFnZS5oZWlnaHQgKiB6b29tLnNjYWxlO1xuICAgICAgaW1hZ2UubWluWCA9IE1hdGgubWluKGdlc3R1cmUuc2xpZGVXaWR0aCAvIDIgLSBzY2FsZWRXaWR0aCAvIDIsIDApO1xuICAgICAgaW1hZ2UubWF4WCA9IC1pbWFnZS5taW5YO1xuICAgICAgaW1hZ2UubWluWSA9IE1hdGgubWluKGdlc3R1cmUuc2xpZGVIZWlnaHQgLyAyIC0gc2NhbGVkSGVpZ2h0IC8gMiwgMCk7XG4gICAgICBpbWFnZS5tYXhZID0gLWltYWdlLm1pblk7XG4gICAgICBpbWFnZS50b3VjaGVzQ3VycmVudC54ID0gZXZDYWNoZS5sZW5ndGggPiAwID8gZXZDYWNoZVswXS5wYWdlWCA6IGUucGFnZVg7XG4gICAgICBpbWFnZS50b3VjaGVzQ3VycmVudC55ID0gZXZDYWNoZS5sZW5ndGggPiAwID8gZXZDYWNoZVswXS5wYWdlWSA6IGUucGFnZVk7XG4gICAgICBjb25zdCB0b3VjaGVzRGlmZiA9IE1hdGgubWF4KE1hdGguYWJzKGltYWdlLnRvdWNoZXNDdXJyZW50LnggLSBpbWFnZS50b3VjaGVzU3RhcnQueCksIE1hdGguYWJzKGltYWdlLnRvdWNoZXNDdXJyZW50LnkgLSBpbWFnZS50b3VjaGVzU3RhcnQueSkpO1xuICAgICAgaWYgKHRvdWNoZXNEaWZmID4gNSkge1xuICAgICAgICBzd2lwZXIuYWxsb3dDbGljayA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCFpbWFnZS5pc01vdmVkICYmICFpc1NjYWxpbmcpIHtcbiAgICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSAmJiAoTWF0aC5mbG9vcihpbWFnZS5taW5YKSA9PT0gTWF0aC5mbG9vcihpbWFnZS5zdGFydFgpICYmIGltYWdlLnRvdWNoZXNDdXJyZW50LnggPCBpbWFnZS50b3VjaGVzU3RhcnQueCB8fCBNYXRoLmZsb29yKGltYWdlLm1heFgpID09PSBNYXRoLmZsb29yKGltYWdlLnN0YXJ0WCkgJiYgaW1hZ2UudG91Y2hlc0N1cnJlbnQueCA+IGltYWdlLnRvdWNoZXNTdGFydC54KSkge1xuICAgICAgICAgIGltYWdlLmlzVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgICAgIGFsbG93VG91Y2hNb3ZlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3dpcGVyLmlzSG9yaXpvbnRhbCgpICYmIChNYXRoLmZsb29yKGltYWdlLm1pblkpID09PSBNYXRoLmZsb29yKGltYWdlLnN0YXJ0WSkgJiYgaW1hZ2UudG91Y2hlc0N1cnJlbnQueSA8IGltYWdlLnRvdWNoZXNTdGFydC55IHx8IE1hdGguZmxvb3IoaW1hZ2UubWF4WSkgPT09IE1hdGguZmxvb3IoaW1hZ2Uuc3RhcnRZKSAmJiBpbWFnZS50b3VjaGVzQ3VycmVudC55ID4gaW1hZ2UudG91Y2hlc1N0YXJ0LnkpKSB7XG4gICAgICAgICAgaW1hZ2UuaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgICAgICAgYWxsb3dUb3VjaE1vdmUoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlLmNhbmNlbGFibGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHByZXZlbnRUb3VjaE1vdmUoKTtcbiAgICAgIGltYWdlLmlzTW92ZWQgPSB0cnVlO1xuICAgICAgY29uc3Qgc2NhbGVSYXRpbyA9ICh6b29tLnNjYWxlIC0gY3VycmVudFNjYWxlKSAvIChnZXN0dXJlLm1heFJhdGlvIC0gc3dpcGVyLnBhcmFtcy56b29tLm1pblJhdGlvKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgb3JpZ2luWCxcbiAgICAgICAgb3JpZ2luWVxuICAgICAgfSA9IGdlc3R1cmU7XG4gICAgICBpbWFnZS5jdXJyZW50WCA9IGltYWdlLnRvdWNoZXNDdXJyZW50LnggLSBpbWFnZS50b3VjaGVzU3RhcnQueCArIGltYWdlLnN0YXJ0WCArIHNjYWxlUmF0aW8gKiAoaW1hZ2Uud2lkdGggLSBvcmlnaW5YICogMik7XG4gICAgICBpbWFnZS5jdXJyZW50WSA9IGltYWdlLnRvdWNoZXNDdXJyZW50LnkgLSBpbWFnZS50b3VjaGVzU3RhcnQueSArIGltYWdlLnN0YXJ0WSArIHNjYWxlUmF0aW8gKiAoaW1hZ2UuaGVpZ2h0IC0gb3JpZ2luWSAqIDIpO1xuICAgICAgaWYgKGltYWdlLmN1cnJlbnRYIDwgaW1hZ2UubWluWCkge1xuICAgICAgICBpbWFnZS5jdXJyZW50WCA9IGltYWdlLm1pblggKyAxIC0gKGltYWdlLm1pblggLSBpbWFnZS5jdXJyZW50WCArIDEpICoqIDAuODtcbiAgICAgIH1cbiAgICAgIGlmIChpbWFnZS5jdXJyZW50WCA+IGltYWdlLm1heFgpIHtcbiAgICAgICAgaW1hZ2UuY3VycmVudFggPSBpbWFnZS5tYXhYIC0gMSArIChpbWFnZS5jdXJyZW50WCAtIGltYWdlLm1heFggKyAxKSAqKiAwLjg7XG4gICAgICB9XG4gICAgICBpZiAoaW1hZ2UuY3VycmVudFkgPCBpbWFnZS5taW5ZKSB7XG4gICAgICAgIGltYWdlLmN1cnJlbnRZID0gaW1hZ2UubWluWSArIDEgLSAoaW1hZ2UubWluWSAtIGltYWdlLmN1cnJlbnRZICsgMSkgKiogMC44O1xuICAgICAgfVxuICAgICAgaWYgKGltYWdlLmN1cnJlbnRZID4gaW1hZ2UubWF4WSkge1xuICAgICAgICBpbWFnZS5jdXJyZW50WSA9IGltYWdlLm1heFkgLSAxICsgKGltYWdlLmN1cnJlbnRZIC0gaW1hZ2UubWF4WSArIDEpICoqIDAuODtcbiAgICAgIH1cblxuICAgICAgLy8gVmVsb2NpdHlcbiAgICAgIGlmICghdmVsb2NpdHkucHJldlBvc2l0aW9uWCkgdmVsb2NpdHkucHJldlBvc2l0aW9uWCA9IGltYWdlLnRvdWNoZXNDdXJyZW50Lng7XG4gICAgICBpZiAoIXZlbG9jaXR5LnByZXZQb3NpdGlvblkpIHZlbG9jaXR5LnByZXZQb3NpdGlvblkgPSBpbWFnZS50b3VjaGVzQ3VycmVudC55O1xuICAgICAgaWYgKCF2ZWxvY2l0eS5wcmV2VGltZSkgdmVsb2NpdHkucHJldlRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdmVsb2NpdHkueCA9IChpbWFnZS50b3VjaGVzQ3VycmVudC54IC0gdmVsb2NpdHkucHJldlBvc2l0aW9uWCkgLyAoRGF0ZS5ub3coKSAtIHZlbG9jaXR5LnByZXZUaW1lKSAvIDI7XG4gICAgICB2ZWxvY2l0eS55ID0gKGltYWdlLnRvdWNoZXNDdXJyZW50LnkgLSB2ZWxvY2l0eS5wcmV2UG9zaXRpb25ZKSAvIChEYXRlLm5vdygpIC0gdmVsb2NpdHkucHJldlRpbWUpIC8gMjtcbiAgICAgIGlmIChNYXRoLmFicyhpbWFnZS50b3VjaGVzQ3VycmVudC54IC0gdmVsb2NpdHkucHJldlBvc2l0aW9uWCkgPCAyKSB2ZWxvY2l0eS54ID0gMDtcbiAgICAgIGlmIChNYXRoLmFicyhpbWFnZS50b3VjaGVzQ3VycmVudC55IC0gdmVsb2NpdHkucHJldlBvc2l0aW9uWSkgPCAyKSB2ZWxvY2l0eS55ID0gMDtcbiAgICAgIHZlbG9jaXR5LnByZXZQb3NpdGlvblggPSBpbWFnZS50b3VjaGVzQ3VycmVudC54O1xuICAgICAgdmVsb2NpdHkucHJldlBvc2l0aW9uWSA9IGltYWdlLnRvdWNoZXNDdXJyZW50Lnk7XG4gICAgICB2ZWxvY2l0eS5wcmV2VGltZSA9IERhdGUubm93KCk7XG4gICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke2ltYWdlLmN1cnJlbnRYfXB4LCAke2ltYWdlLmN1cnJlbnRZfXB4LDApYDtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25Ub3VjaEVuZCgpIHtcbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGlmICghZ2VzdHVyZS5pbWFnZUVsKSByZXR1cm47XG4gICAgICBpZiAoIWltYWdlLmlzVG91Y2hlZCB8fCAhaW1hZ2UuaXNNb3ZlZCkge1xuICAgICAgICBpbWFnZS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgaW1hZ2UuaXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpbWFnZS5pc1RvdWNoZWQgPSBmYWxzZTtcbiAgICAgIGltYWdlLmlzTW92ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBtb21lbnR1bUR1cmF0aW9uWCA9IDMwMDtcbiAgICAgIGxldCBtb21lbnR1bUR1cmF0aW9uWSA9IDMwMDtcbiAgICAgIGNvbnN0IG1vbWVudHVtRGlzdGFuY2VYID0gdmVsb2NpdHkueCAqIG1vbWVudHVtRHVyYXRpb25YO1xuICAgICAgY29uc3QgbmV3UG9zaXRpb25YID0gaW1hZ2UuY3VycmVudFggKyBtb21lbnR1bURpc3RhbmNlWDtcbiAgICAgIGNvbnN0IG1vbWVudHVtRGlzdGFuY2VZID0gdmVsb2NpdHkueSAqIG1vbWVudHVtRHVyYXRpb25ZO1xuICAgICAgY29uc3QgbmV3UG9zaXRpb25ZID0gaW1hZ2UuY3VycmVudFkgKyBtb21lbnR1bURpc3RhbmNlWTtcblxuICAgICAgLy8gRml4IGR1cmF0aW9uXG4gICAgICBpZiAodmVsb2NpdHkueCAhPT0gMCkgbW9tZW50dW1EdXJhdGlvblggPSBNYXRoLmFicygobmV3UG9zaXRpb25YIC0gaW1hZ2UuY3VycmVudFgpIC8gdmVsb2NpdHkueCk7XG4gICAgICBpZiAodmVsb2NpdHkueSAhPT0gMCkgbW9tZW50dW1EdXJhdGlvblkgPSBNYXRoLmFicygobmV3UG9zaXRpb25ZIC0gaW1hZ2UuY3VycmVudFkpIC8gdmVsb2NpdHkueSk7XG4gICAgICBjb25zdCBtb21lbnR1bUR1cmF0aW9uID0gTWF0aC5tYXgobW9tZW50dW1EdXJhdGlvblgsIG1vbWVudHVtRHVyYXRpb25ZKTtcbiAgICAgIGltYWdlLmN1cnJlbnRYID0gbmV3UG9zaXRpb25YO1xuICAgICAgaW1hZ2UuY3VycmVudFkgPSBuZXdQb3NpdGlvblk7XG4gICAgICAvLyBEZWZpbmUgaWYgd2UgbmVlZCBpbWFnZSBkcmFnXG4gICAgICBjb25zdCBzY2FsZWRXaWR0aCA9IGltYWdlLndpZHRoICogem9vbS5zY2FsZTtcbiAgICAgIGNvbnN0IHNjYWxlZEhlaWdodCA9IGltYWdlLmhlaWdodCAqIHpvb20uc2NhbGU7XG4gICAgICBpbWFnZS5taW5YID0gTWF0aC5taW4oZ2VzdHVyZS5zbGlkZVdpZHRoIC8gMiAtIHNjYWxlZFdpZHRoIC8gMiwgMCk7XG4gICAgICBpbWFnZS5tYXhYID0gLWltYWdlLm1pblg7XG4gICAgICBpbWFnZS5taW5ZID0gTWF0aC5taW4oZ2VzdHVyZS5zbGlkZUhlaWdodCAvIDIgLSBzY2FsZWRIZWlnaHQgLyAyLCAwKTtcbiAgICAgIGltYWdlLm1heFkgPSAtaW1hZ2UubWluWTtcbiAgICAgIGltYWdlLmN1cnJlbnRYID0gTWF0aC5tYXgoTWF0aC5taW4oaW1hZ2UuY3VycmVudFgsIGltYWdlLm1heFgpLCBpbWFnZS5taW5YKTtcbiAgICAgIGltYWdlLmN1cnJlbnRZID0gTWF0aC5tYXgoTWF0aC5taW4oaW1hZ2UuY3VycmVudFksIGltYWdlLm1heFkpLCBpbWFnZS5taW5ZKTtcbiAgICAgIGdlc3R1cmUuaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7bW9tZW50dW1EdXJhdGlvbn1tc2A7XG4gICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke2ltYWdlLmN1cnJlbnRYfXB4LCAke2ltYWdlLmN1cnJlbnRZfXB4LDApYDtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25UcmFuc2l0aW9uRW5kKCkge1xuICAgICAgY29uc3Qgem9vbSA9IHN3aXBlci56b29tO1xuICAgICAgaWYgKGdlc3R1cmUuc2xpZGVFbCAmJiBzd2lwZXIuYWN0aXZlSW5kZXggIT09IHN3aXBlci5zbGlkZXMuaW5kZXhPZihnZXN0dXJlLnNsaWRlRWwpKSB7XG4gICAgICAgIGlmIChnZXN0dXJlLmltYWdlRWwpIHtcbiAgICAgICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZSgxKSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdlc3R1cmUuaW1hZ2VXcmFwRWwpIHtcbiAgICAgICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLDAsMCknO1xuICAgICAgICB9XG4gICAgICAgIGdlc3R1cmUuc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKGAke3N3aXBlci5wYXJhbXMuem9vbS56b29tZWRTbGlkZUNsYXNzfWApO1xuICAgICAgICB6b29tLnNjYWxlID0gMTtcbiAgICAgICAgY3VycmVudFNjYWxlID0gMTtcbiAgICAgICAgZ2VzdHVyZS5zbGlkZUVsID0gdW5kZWZpbmVkO1xuICAgICAgICBnZXN0dXJlLmltYWdlRWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIGdlc3R1cmUuaW1hZ2VXcmFwRWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIGdlc3R1cmUub3JpZ2luWCA9IDA7XG4gICAgICAgIGdlc3R1cmUub3JpZ2luWSA9IDA7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHpvb21JbihlKSB7XG4gICAgICBjb25zdCB6b29tID0gc3dpcGVyLnpvb207XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLnpvb207XG4gICAgICBpZiAoIWdlc3R1cmUuc2xpZGVFbCkge1xuICAgICAgICBpZiAoZSAmJiBlLnRhcmdldCkge1xuICAgICAgICAgIGdlc3R1cmUuc2xpZGVFbCA9IGUudGFyZ2V0LmNsb3Nlc3QoYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVDbGFzc30sIHN3aXBlci1zbGlkZWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZ2VzdHVyZS5zbGlkZUVsKSB7XG4gICAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCAmJiBzd2lwZXIudmlydHVhbCkge1xuICAgICAgICAgICAgZ2VzdHVyZS5zbGlkZUVsID0gZWxlbWVudENoaWxkcmVuKHN3aXBlci5zbGlkZXNFbCwgYC4ke3N3aXBlci5wYXJhbXMuc2xpZGVBY3RpdmVDbGFzc31gKVswXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2VzdHVyZS5zbGlkZUVsID0gc3dpcGVyLnNsaWRlc1tzd2lwZXIuYWN0aXZlSW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgaW1hZ2VFbCA9IGdlc3R1cmUuc2xpZGVFbC5xdWVyeVNlbGVjdG9yKGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YCk7XG4gICAgICAgIGlmIChpbWFnZUVsKSB7XG4gICAgICAgICAgaW1hZ2VFbCA9IGltYWdlRWwucXVlcnlTZWxlY3RvckFsbCgncGljdHVyZSwgaW1nLCBzdmcsIGNhbnZhcywgLnN3aXBlci16b29tLXRhcmdldCcpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGdlc3R1cmUuaW1hZ2VFbCA9IGltYWdlRWw7XG4gICAgICAgIGlmIChpbWFnZUVsKSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbCA9IGVsZW1lbnRQYXJlbnRzKGdlc3R1cmUuaW1hZ2VFbCwgYC4ke3BhcmFtcy5jb250YWluZXJDbGFzc31gKVswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnZXN0dXJlLmltYWdlV3JhcEVsID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWdlc3R1cmUuaW1hZ2VFbCB8fCAhZ2VzdHVyZS5pbWFnZVdyYXBFbCkgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUudG91Y2hBY3Rpb24gPSAnbm9uZSc7XG4gICAgICB9XG4gICAgICBnZXN0dXJlLnNsaWRlRWwuY2xhc3NMaXN0LmFkZChgJHtwYXJhbXMuem9vbWVkU2xpZGVDbGFzc31gKTtcbiAgICAgIGxldCB0b3VjaFg7XG4gICAgICBsZXQgdG91Y2hZO1xuICAgICAgbGV0IG9mZnNldFg7XG4gICAgICBsZXQgb2Zmc2V0WTtcbiAgICAgIGxldCBkaWZmWDtcbiAgICAgIGxldCBkaWZmWTtcbiAgICAgIGxldCB0cmFuc2xhdGVYO1xuICAgICAgbGV0IHRyYW5zbGF0ZVk7XG4gICAgICBsZXQgaW1hZ2VXaWR0aDtcbiAgICAgIGxldCBpbWFnZUhlaWdodDtcbiAgICAgIGxldCBzY2FsZWRXaWR0aDtcbiAgICAgIGxldCBzY2FsZWRIZWlnaHQ7XG4gICAgICBsZXQgdHJhbnNsYXRlTWluWDtcbiAgICAgIGxldCB0cmFuc2xhdGVNaW5ZO1xuICAgICAgbGV0IHRyYW5zbGF0ZU1heFg7XG4gICAgICBsZXQgdHJhbnNsYXRlTWF4WTtcbiAgICAgIGxldCBzbGlkZVdpZHRoO1xuICAgICAgbGV0IHNsaWRlSGVpZ2h0O1xuICAgICAgaWYgKHR5cGVvZiBpbWFnZS50b3VjaGVzU3RhcnQueCA9PT0gJ3VuZGVmaW5lZCcgJiYgZSkge1xuICAgICAgICB0b3VjaFggPSBlLnBhZ2VYO1xuICAgICAgICB0b3VjaFkgPSBlLnBhZ2VZO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG91Y2hYID0gaW1hZ2UudG91Y2hlc1N0YXJ0Lng7XG4gICAgICAgIHRvdWNoWSA9IGltYWdlLnRvdWNoZXNTdGFydC55O1xuICAgICAgfVxuICAgICAgY29uc3QgZm9yY2Vab29tUmF0aW8gPSB0eXBlb2YgZSA9PT0gJ251bWJlcicgPyBlIDogbnVsbDtcbiAgICAgIGlmIChjdXJyZW50U2NhbGUgPT09IDEgJiYgZm9yY2Vab29tUmF0aW8pIHtcbiAgICAgICAgdG91Y2hYID0gdW5kZWZpbmVkO1xuICAgICAgICB0b3VjaFkgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBjb25zdCBtYXhSYXRpbyA9IGdldE1heFJhdGlvKCk7XG4gICAgICB6b29tLnNjYWxlID0gZm9yY2Vab29tUmF0aW8gfHwgbWF4UmF0aW87XG4gICAgICBjdXJyZW50U2NhbGUgPSBmb3JjZVpvb21SYXRpbyB8fCBtYXhSYXRpbztcbiAgICAgIGlmIChlICYmICEoY3VycmVudFNjYWxlID09PSAxICYmIGZvcmNlWm9vbVJhdGlvKSkge1xuICAgICAgICBzbGlkZVdpZHRoID0gZ2VzdHVyZS5zbGlkZUVsLm9mZnNldFdpZHRoO1xuICAgICAgICBzbGlkZUhlaWdodCA9IGdlc3R1cmUuc2xpZGVFbC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIG9mZnNldFggPSBlbGVtZW50T2Zmc2V0KGdlc3R1cmUuc2xpZGVFbCkubGVmdCArIHdpbmRvdy5zY3JvbGxYO1xuICAgICAgICBvZmZzZXRZID0gZWxlbWVudE9mZnNldChnZXN0dXJlLnNsaWRlRWwpLnRvcCArIHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICBkaWZmWCA9IG9mZnNldFggKyBzbGlkZVdpZHRoIC8gMiAtIHRvdWNoWDtcbiAgICAgICAgZGlmZlkgPSBvZmZzZXRZICsgc2xpZGVIZWlnaHQgLyAyIC0gdG91Y2hZO1xuICAgICAgICBpbWFnZVdpZHRoID0gZ2VzdHVyZS5pbWFnZUVsLm9mZnNldFdpZHRoIHx8IGdlc3R1cmUuaW1hZ2VFbC5jbGllbnRXaWR0aDtcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBnZXN0dXJlLmltYWdlRWwub2Zmc2V0SGVpZ2h0IHx8IGdlc3R1cmUuaW1hZ2VFbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgIHNjYWxlZFdpZHRoID0gaW1hZ2VXaWR0aCAqIHpvb20uc2NhbGU7XG4gICAgICAgIHNjYWxlZEhlaWdodCA9IGltYWdlSGVpZ2h0ICogem9vbS5zY2FsZTtcbiAgICAgICAgdHJhbnNsYXRlTWluWCA9IE1hdGgubWluKHNsaWRlV2lkdGggLyAyIC0gc2NhbGVkV2lkdGggLyAyLCAwKTtcbiAgICAgICAgdHJhbnNsYXRlTWluWSA9IE1hdGgubWluKHNsaWRlSGVpZ2h0IC8gMiAtIHNjYWxlZEhlaWdodCAvIDIsIDApO1xuICAgICAgICB0cmFuc2xhdGVNYXhYID0gLXRyYW5zbGF0ZU1pblg7XG4gICAgICAgIHRyYW5zbGF0ZU1heFkgPSAtdHJhbnNsYXRlTWluWTtcbiAgICAgICAgdHJhbnNsYXRlWCA9IGRpZmZYICogem9vbS5zY2FsZTtcbiAgICAgICAgdHJhbnNsYXRlWSA9IGRpZmZZICogem9vbS5zY2FsZTtcbiAgICAgICAgaWYgKHRyYW5zbGF0ZVggPCB0cmFuc2xhdGVNaW5YKSB7XG4gICAgICAgICAgdHJhbnNsYXRlWCA9IHRyYW5zbGF0ZU1pblg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVggPiB0cmFuc2xhdGVNYXhYKSB7XG4gICAgICAgICAgdHJhbnNsYXRlWCA9IHRyYW5zbGF0ZU1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVkgPCB0cmFuc2xhdGVNaW5ZKSB7XG4gICAgICAgICAgdHJhbnNsYXRlWSA9IHRyYW5zbGF0ZU1pblk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVkgPiB0cmFuc2xhdGVNYXhZKSB7XG4gICAgICAgICAgdHJhbnNsYXRlWSA9IHRyYW5zbGF0ZU1heFk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zbGF0ZVggPSAwO1xuICAgICAgICB0cmFuc2xhdGVZID0gMDtcbiAgICAgIH1cbiAgICAgIGlmIChmb3JjZVpvb21SYXRpbyAmJiB6b29tLnNjYWxlID09PSAxKSB7XG4gICAgICAgIGdlc3R1cmUub3JpZ2luWCA9IDA7XG4gICAgICAgIGdlc3R1cmUub3JpZ2luWSA9IDA7XG4gICAgICB9XG4gICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICczMDBtcyc7XG4gICAgICBnZXN0dXJlLmltYWdlV3JhcEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3RyYW5zbGF0ZVh9cHgsICR7dHJhbnNsYXRlWX1weCwwKWA7XG4gICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzMwMG1zJztcbiAgICAgIGdlc3R1cmUuaW1hZ2VFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKCR7em9vbS5zY2FsZX0pYDtcbiAgICB9XG4gICAgZnVuY3Rpb24gem9vbU91dCgpIHtcbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuem9vbTtcbiAgICAgIGlmICghZ2VzdHVyZS5zbGlkZUVsKSB7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgJiYgc3dpcGVyLnZpcnR1YWwpIHtcbiAgICAgICAgICBnZXN0dXJlLnNsaWRlRWwgPSBlbGVtZW50Q2hpbGRyZW4oc3dpcGVyLnNsaWRlc0VsLCBgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUFjdGl2ZUNsYXNzfWApWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdlc3R1cmUuc2xpZGVFbCA9IHN3aXBlci5zbGlkZXNbc3dpcGVyLmFjdGl2ZUluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaW1hZ2VFbCA9IGdlc3R1cmUuc2xpZGVFbC5xdWVyeVNlbGVjdG9yKGAuJHtwYXJhbXMuY29udGFpbmVyQ2xhc3N9YCk7XG4gICAgICAgIGlmIChpbWFnZUVsKSB7XG4gICAgICAgICAgaW1hZ2VFbCA9IGltYWdlRWwucXVlcnlTZWxlY3RvckFsbCgncGljdHVyZSwgaW1nLCBzdmcsIGNhbnZhcywgLnN3aXBlci16b29tLXRhcmdldCcpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGdlc3R1cmUuaW1hZ2VFbCA9IGltYWdlRWw7XG4gICAgICAgIGlmIChpbWFnZUVsKSB7XG4gICAgICAgICAgZ2VzdHVyZS5pbWFnZVdyYXBFbCA9IGVsZW1lbnRQYXJlbnRzKGdlc3R1cmUuaW1hZ2VFbCwgYC4ke3BhcmFtcy5jb250YWluZXJDbGFzc31gKVswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnZXN0dXJlLmltYWdlV3JhcEVsID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWdlc3R1cmUuaW1hZ2VFbCB8fCAhZ2VzdHVyZS5pbWFnZVdyYXBFbCkgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUudG91Y2hBY3Rpb24gPSAnJztcbiAgICAgIH1cbiAgICAgIHpvb20uc2NhbGUgPSAxO1xuICAgICAgY3VycmVudFNjYWxlID0gMTtcbiAgICAgIGdlc3R1cmUuaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzMwMG1zJztcbiAgICAgIGdlc3R1cmUuaW1hZ2VXcmFwRWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsMCwwKSc7XG4gICAgICBnZXN0dXJlLmltYWdlRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzMwMG1zJztcbiAgICAgIGdlc3R1cmUuaW1hZ2VFbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKDEpJztcbiAgICAgIGdlc3R1cmUuc2xpZGVFbC5jbGFzc0xpc3QucmVtb3ZlKGAke3BhcmFtcy56b29tZWRTbGlkZUNsYXNzfWApO1xuICAgICAgZ2VzdHVyZS5zbGlkZUVsID0gdW5kZWZpbmVkO1xuICAgICAgZ2VzdHVyZS5vcmlnaW5YID0gMDtcbiAgICAgIGdlc3R1cmUub3JpZ2luWSA9IDA7XG4gICAgfVxuXG4gICAgLy8gVG9nZ2xlIFpvb21cbiAgICBmdW5jdGlvbiB6b29tVG9nZ2xlKGUpIHtcbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGlmICh6b29tLnNjYWxlICYmIHpvb20uc2NhbGUgIT09IDEpIHtcbiAgICAgICAgLy8gWm9vbSBPdXRcbiAgICAgICAgem9vbU91dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gWm9vbSBJblxuICAgICAgICB6b29tSW4oZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldExpc3RlbmVycygpIHtcbiAgICAgIGNvbnN0IHBhc3NpdmVMaXN0ZW5lciA9IHN3aXBlci5wYXJhbXMucGFzc2l2ZUxpc3RlbmVycyA/IHtcbiAgICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgICAgY2FwdHVyZTogZmFsc2VcbiAgICAgIH0gOiBmYWxzZTtcbiAgICAgIGNvbnN0IGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmUgPSBzd2lwZXIucGFyYW1zLnBhc3NpdmVMaXN0ZW5lcnMgPyB7XG4gICAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgICB9IDogdHJ1ZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhc3NpdmVMaXN0ZW5lcixcbiAgICAgICAgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBBdHRhY2gvRGV0YWNoIEV2ZW50c1xuICAgIGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIGNvbnN0IHpvb20gPSBzd2lwZXIuem9vbTtcbiAgICAgIGlmICh6b29tLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHpvb20uZW5hYmxlZCA9IHRydWU7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBhc3NpdmVMaXN0ZW5lcixcbiAgICAgICAgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZVxuICAgICAgfSA9IGdldExpc3RlbmVycygpO1xuXG4gICAgICAvLyBTY2FsZSBpbWFnZVxuICAgICAgc3dpcGVyLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uR2VzdHVyZVN0YXJ0LCBwYXNzaXZlTGlzdGVuZXIpO1xuICAgICAgc3dpcGVyLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uR2VzdHVyZUNoYW5nZSwgYWN0aXZlTGlzdGVuZXJXaXRoQ2FwdHVyZSk7XG4gICAgICBbJ3BvaW50ZXJ1cCcsICdwb2ludGVyY2FuY2VsJywgJ3BvaW50ZXJvdXQnXS5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIG9uR2VzdHVyZUVuZCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb3ZlIGltYWdlXG4gICAgICBzd2lwZXIud3JhcHBlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Ub3VjaE1vdmUsIGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgY29uc3Qgem9vbSA9IHN3aXBlci56b29tO1xuICAgICAgaWYgKCF6b29tLmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHpvb20uZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgY29uc3Qge1xuICAgICAgICBwYXNzaXZlTGlzdGVuZXIsXG4gICAgICAgIGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmVcbiAgICAgIH0gPSBnZXRMaXN0ZW5lcnMoKTtcblxuICAgICAgLy8gU2NhbGUgaW1hZ2VcbiAgICAgIHN3aXBlci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvbkdlc3R1cmVTdGFydCwgcGFzc2l2ZUxpc3RlbmVyKTtcbiAgICAgIHN3aXBlci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvbkdlc3R1cmVDaGFuZ2UsIGFjdGl2ZUxpc3RlbmVyV2l0aENhcHR1cmUpO1xuICAgICAgWydwb2ludGVydXAnLCAncG9pbnRlcmNhbmNlbCcsICdwb2ludGVyb3V0J10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBvbkdlc3R1cmVFbmQsIHBhc3NpdmVMaXN0ZW5lcik7XG4gICAgICB9KTtcblxuICAgICAgLy8gTW92ZSBpbWFnZVxuICAgICAgc3dpcGVyLndyYXBwZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlLCBhY3RpdmVMaXN0ZW5lcldpdGhDYXB0dXJlKTtcbiAgICB9XG4gICAgb24oJ2luaXQnLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy56b29tLmVuYWJsZWQpIHtcbiAgICAgICAgZW5hYmxlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBkaXNhYmxlKCk7XG4gICAgfSk7XG4gICAgb24oJ3RvdWNoU3RhcnQnLCAoX3MsIGUpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnpvb20uZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgb25Ub3VjaFN0YXJ0KGUpO1xuICAgIH0pO1xuICAgIG9uKCd0b3VjaEVuZCcsIChfcywgZSkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIuem9vbS5lbmFibGVkKSByZXR1cm47XG4gICAgICBvblRvdWNoRW5kKCk7XG4gICAgfSk7XG4gICAgb24oJ2RvdWJsZVRhcCcsIChfcywgZSkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIuYW5pbWF0aW5nICYmIHN3aXBlci5wYXJhbXMuem9vbS5lbmFibGVkICYmIHN3aXBlci56b29tLmVuYWJsZWQgJiYgc3dpcGVyLnBhcmFtcy56b29tLnRvZ2dsZSkge1xuICAgICAgICB6b29tVG9nZ2xlKGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCd0cmFuc2l0aW9uRW5kJywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci56b29tLmVuYWJsZWQgJiYgc3dpcGVyLnBhcmFtcy56b29tLmVuYWJsZWQpIHtcbiAgICAgICAgb25UcmFuc2l0aW9uRW5kKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3NsaWRlQ2hhbmdlJywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci56b29tLmVuYWJsZWQgJiYgc3dpcGVyLnBhcmFtcy56b29tLmVuYWJsZWQgJiYgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSB7XG4gICAgICAgIG9uVHJhbnNpdGlvbkVuZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnpvb20sIHtcbiAgICAgIGVuYWJsZSxcbiAgICAgIGRpc2FibGUsXG4gICAgICBpbjogem9vbUluLFxuICAgICAgb3V0OiB6b29tT3V0LFxuICAgICAgdG9nZ2xlOiB6b29tVG9nZ2xlXG4gICAgfSk7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tYml0d2lzZTogW1wiZXJyb3JcIiwgeyBcImFsbG93XCI6IFtcIj4+XCJdIH1dICovXG4gIGZ1bmN0aW9uIENvbnRyb2xsZXIoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvblxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBjb250cm9sbGVyOiB7XG4gICAgICAgIGNvbnRyb2w6IHVuZGVmaW5lZCxcbiAgICAgICAgaW52ZXJzZTogZmFsc2UsXG4gICAgICAgIGJ5OiAnc2xpZGUnIC8vIG9yICdjb250YWluZXInXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzd2lwZXIuY29udHJvbGxlciA9IHtcbiAgICAgIGNvbnRyb2w6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgZnVuY3Rpb24gTGluZWFyU3BsaW5lKHgsIHkpIHtcbiAgICAgIGNvbnN0IGJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIHNlYXJjaCgpIHtcbiAgICAgICAgbGV0IG1heEluZGV4O1xuICAgICAgICBsZXQgbWluSW5kZXg7XG4gICAgICAgIGxldCBndWVzcztcbiAgICAgICAgcmV0dXJuIChhcnJheSwgdmFsKSA9PiB7XG4gICAgICAgICAgbWluSW5kZXggPSAtMTtcbiAgICAgICAgICBtYXhJbmRleCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgICAgICB3aGlsZSAobWF4SW5kZXggLSBtaW5JbmRleCA+IDEpIHtcbiAgICAgICAgICAgIGd1ZXNzID0gbWF4SW5kZXggKyBtaW5JbmRleCA+PiAxO1xuICAgICAgICAgICAgaWYgKGFycmF5W2d1ZXNzXSA8PSB2YWwpIHtcbiAgICAgICAgICAgICAgbWluSW5kZXggPSBndWVzcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1heEluZGV4ID0gZ3Vlc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBtYXhJbmRleDtcbiAgICAgICAgfTtcbiAgICAgIH0oKTtcbiAgICAgIHRoaXMueCA9IHg7XG4gICAgICB0aGlzLnkgPSB5O1xuICAgICAgdGhpcy5sYXN0SW5kZXggPSB4Lmxlbmd0aCAtIDE7XG4gICAgICAvLyBHaXZlbiBhbiB4IHZhbHVlICh4MiksIHJldHVybiB0aGUgZXhwZWN0ZWQgeTIgdmFsdWU6XG4gICAgICAvLyAoeDEseTEpIGlzIHRoZSBrbm93biBwb2ludCBiZWZvcmUgZ2l2ZW4gdmFsdWUsXG4gICAgICAvLyAoeDMseTMpIGlzIHRoZSBrbm93biBwb2ludCBhZnRlciBnaXZlbiB2YWx1ZS5cbiAgICAgIGxldCBpMTtcbiAgICAgIGxldCBpMztcbiAgICAgIHRoaXMuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiBpbnRlcnBvbGF0ZSh4Mikge1xuICAgICAgICBpZiAoIXgyKSByZXR1cm4gMDtcblxuICAgICAgICAvLyBHZXQgdGhlIGluZGV4ZXMgb2YgeDEgYW5kIHgzICh0aGUgYXJyYXkgaW5kZXhlcyBiZWZvcmUgYW5kIGFmdGVyIGdpdmVuIHgyKTpcbiAgICAgICAgaTMgPSBiaW5hcnlTZWFyY2godGhpcy54LCB4Mik7XG4gICAgICAgIGkxID0gaTMgLSAxO1xuXG4gICAgICAgIC8vIFdlIGhhdmUgb3VyIGluZGV4ZXMgaTEgJiBpMywgc28gd2UgY2FuIGNhbGN1bGF0ZSBhbHJlYWR5OlxuICAgICAgICAvLyB5MiA6PSAoKHgy4oiSeDEpIMOXICh5M+KIknkxKSkgw7cgKHgz4oiSeDEpICsgeTFcbiAgICAgICAgcmV0dXJuICh4MiAtIHRoaXMueFtpMV0pICogKHRoaXMueVtpM10gLSB0aGlzLnlbaTFdKSAvICh0aGlzLnhbaTNdIC0gdGhpcy54W2kxXSkgKyB0aGlzLnlbaTFdO1xuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRJbnRlcnBvbGF0ZUZ1bmN0aW9uKGMpIHtcbiAgICAgIHN3aXBlci5jb250cm9sbGVyLnNwbGluZSA9IHN3aXBlci5wYXJhbXMubG9vcCA/IG5ldyBMaW5lYXJTcGxpbmUoc3dpcGVyLnNsaWRlc0dyaWQsIGMuc2xpZGVzR3JpZCkgOiBuZXcgTGluZWFyU3BsaW5lKHN3aXBlci5zbmFwR3JpZCwgYy5zbmFwR3JpZCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFRyYW5zbGF0ZShfdCwgYnlDb250cm9sbGVyKSB7XG4gICAgICBjb25zdCBjb250cm9sbGVkID0gc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbDtcbiAgICAgIGxldCBtdWx0aXBsaWVyO1xuICAgICAgbGV0IGNvbnRyb2xsZWRUcmFuc2xhdGU7XG4gICAgICBjb25zdCBTd2lwZXIgPSBzd2lwZXIuY29uc3RydWN0b3I7XG4gICAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVkVHJhbnNsYXRlKGMpIHtcbiAgICAgICAgaWYgKGMuZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAgICAgLy8gdGhpcyB3aWxsIGNyZWF0ZSBhbiBJbnRlcnBvbGF0ZSBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgc25hcEdyaWRzXG4gICAgICAgIC8vIHggaXMgdGhlIEdyaWQgb2YgdGhlIHNjcm9sbGVkIHNjcm9sbGVyIGFuZCB5IHdpbGwgYmUgdGhlIGNvbnRyb2xsZWQgc2Nyb2xsZXJcbiAgICAgICAgLy8gaXQgbWFrZXMgc2Vuc2UgdG8gY3JlYXRlIHRoaXMgb25seSBvbmNlIGFuZCByZWNhbGwgaXQgZm9yIHRoZSBpbnRlcnBvbGF0aW9uXG4gICAgICAgIC8vIHRoZSBmdW5jdGlvbiBkb2VzIGEgbG90IG9mIHZhbHVlIGNhY2hpbmcgZm9yIHBlcmZvcm1hbmNlXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHN3aXBlci5ydGxUcmFuc2xhdGUgPyAtc3dpcGVyLnRyYW5zbGF0ZSA6IHN3aXBlci50cmFuc2xhdGU7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuYnkgPT09ICdzbGlkZScpIHtcbiAgICAgICAgICBnZXRJbnRlcnBvbGF0ZUZ1bmN0aW9uKGMpO1xuICAgICAgICAgIC8vIGkgYW0gbm90IHN1cmUgd2h5IHRoZSB2YWx1ZXMgaGF2ZSB0byBiZSBtdWx0aXBsaWNhdGVkIHRoaXMgd2F5LCB0cmllZCB0byBpbnZlcnQgdGhlIHNuYXBHcmlkXG4gICAgICAgICAgLy8gYnV0IGl0IGRpZCBub3Qgd29yayBvdXRcbiAgICAgICAgICBjb250cm9sbGVkVHJhbnNsYXRlID0gLXN3aXBlci5jb250cm9sbGVyLnNwbGluZS5pbnRlcnBvbGF0ZSgtdHJhbnNsYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbnRyb2xsZWRUcmFuc2xhdGUgfHwgc3dpcGVyLnBhcmFtcy5jb250cm9sbGVyLmJ5ID09PSAnY29udGFpbmVyJykge1xuICAgICAgICAgIG11bHRpcGxpZXIgPSAoYy5tYXhUcmFuc2xhdGUoKSAtIGMubWluVHJhbnNsYXRlKCkpIC8gKHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIHN3aXBlci5taW5UcmFuc2xhdGUoKSk7XG4gICAgICAgICAgaWYgKE51bWJlci5pc05hTihtdWx0aXBsaWVyKSB8fCAhTnVtYmVyLmlzRmluaXRlKG11bHRpcGxpZXIpKSB7XG4gICAgICAgICAgICBtdWx0aXBsaWVyID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udHJvbGxlZFRyYW5zbGF0ZSA9ICh0cmFuc2xhdGUgLSBzd2lwZXIubWluVHJhbnNsYXRlKCkpICogbXVsdGlwbGllciArIGMubWluVHJhbnNsYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY29udHJvbGxlci5pbnZlcnNlKSB7XG4gICAgICAgICAgY29udHJvbGxlZFRyYW5zbGF0ZSA9IGMubWF4VHJhbnNsYXRlKCkgLSBjb250cm9sbGVkVHJhbnNsYXRlO1xuICAgICAgICB9XG4gICAgICAgIGMudXBkYXRlUHJvZ3Jlc3MoY29udHJvbGxlZFRyYW5zbGF0ZSk7XG4gICAgICAgIGMuc2V0VHJhbnNsYXRlKGNvbnRyb2xsZWRUcmFuc2xhdGUsIHN3aXBlcik7XG4gICAgICAgIGMudXBkYXRlQWN0aXZlSW5kZXgoKTtcbiAgICAgICAgYy51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250cm9sbGVkKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRyb2xsZWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoY29udHJvbGxlZFtpXSAhPT0gYnlDb250cm9sbGVyICYmIGNvbnRyb2xsZWRbaV0gaW5zdGFuY2VvZiBTd2lwZXIpIHtcbiAgICAgICAgICAgIHNldENvbnRyb2xsZWRUcmFuc2xhdGUoY29udHJvbGxlZFtpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbnRyb2xsZWQgaW5zdGFuY2VvZiBTd2lwZXIgJiYgYnlDb250cm9sbGVyICE9PSBjb250cm9sbGVkKSB7XG4gICAgICAgIHNldENvbnRyb2xsZWRUcmFuc2xhdGUoY29udHJvbGxlZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFRyYW5zaXRpb24oZHVyYXRpb24sIGJ5Q29udHJvbGxlcikge1xuICAgICAgY29uc3QgU3dpcGVyID0gc3dpcGVyLmNvbnN0cnVjdG9yO1xuICAgICAgY29uc3QgY29udHJvbGxlZCA9IHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgICBsZXQgaTtcbiAgICAgIGZ1bmN0aW9uIHNldENvbnRyb2xsZWRUcmFuc2l0aW9uKGMpIHtcbiAgICAgICAgaWYgKGMuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgIGMuc2V0VHJhbnNpdGlvbihkdXJhdGlvbiwgc3dpcGVyKTtcbiAgICAgICAgaWYgKGR1cmF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgYy50cmFuc2l0aW9uU3RhcnQoKTtcbiAgICAgICAgICBpZiAoYy5wYXJhbXMuYXV0b0hlaWdodCkge1xuICAgICAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgICBjLnVwZGF0ZUF1dG9IZWlnaHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50VHJhbnNpdGlvbkVuZChjLndyYXBwZXJFbCwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjb250cm9sbGVkKSByZXR1cm47XG4gICAgICAgICAgICBjLnRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29udHJvbGxlZCkpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbnRyb2xsZWQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoY29udHJvbGxlZFtpXSAhPT0gYnlDb250cm9sbGVyICYmIGNvbnRyb2xsZWRbaV0gaW5zdGFuY2VvZiBTd2lwZXIpIHtcbiAgICAgICAgICAgIHNldENvbnRyb2xsZWRUcmFuc2l0aW9uKGNvbnRyb2xsZWRbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb250cm9sbGVkIGluc3RhbmNlb2YgU3dpcGVyICYmIGJ5Q29udHJvbGxlciAhPT0gY29udHJvbGxlZCkge1xuICAgICAgICBzZXRDb250cm9sbGVkVHJhbnNpdGlvbihjb250cm9sbGVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlU3BsaW5lKCkge1xuICAgICAgaWYgKCFzd2lwZXIuY29udHJvbGxlci5jb250cm9sKSByZXR1cm47XG4gICAgICBpZiAoc3dpcGVyLmNvbnRyb2xsZXIuc3BsaW5lKSB7XG4gICAgICAgIHN3aXBlci5jb250cm9sbGVyLnNwbGluZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZGVsZXRlIHN3aXBlci5jb250cm9sbGVyLnNwbGluZTtcbiAgICAgIH1cbiAgICB9XG4gICAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgdHlwZW9mIHN3aXBlci5wYXJhbXMuY29udHJvbGxlci5jb250cm9sID09PSAnc3RyaW5nJyB8fCBzd2lwZXIucGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgICBjb25zdCBjb250cm9sRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3dpcGVyLnBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2wpO1xuICAgICAgICBpZiAoY29udHJvbEVsZW1lbnQgJiYgY29udHJvbEVsZW1lbnQuc3dpcGVyKSB7XG4gICAgICAgICAgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCA9IGNvbnRyb2xFbGVtZW50LnN3aXBlcjtcbiAgICAgICAgfSBlbHNlIGlmIChjb250cm9sRWxlbWVudCkge1xuICAgICAgICAgIGNvbnN0IG9uQ29udHJvbGxlclN3aXBlciA9IGUgPT4ge1xuICAgICAgICAgICAgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCA9IGUuZGV0YWlsWzBdO1xuICAgICAgICAgICAgc3dpcGVyLnVwZGF0ZSgpO1xuICAgICAgICAgICAgY29udHJvbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5pdCcsIG9uQ29udHJvbGxlclN3aXBlcik7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb250cm9sRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbml0Jywgb25Db250cm9sbGVyU3dpcGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzd2lwZXIuY29udHJvbGxlci5jb250cm9sID0gc3dpcGVyLnBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgfSk7XG4gICAgb24oJ3VwZGF0ZScsICgpID0+IHtcbiAgICAgIHJlbW92ZVNwbGluZSgpO1xuICAgIH0pO1xuICAgIG9uKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICByZW1vdmVTcGxpbmUoKTtcbiAgICB9KTtcbiAgICBvbignb2JzZXJ2ZXJVcGRhdGUnLCAoKSA9PiB7XG4gICAgICByZW1vdmVTcGxpbmUoKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNsYXRlJywgKF9zLCB0cmFuc2xhdGUsIGJ5Q29udHJvbGxlcikgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIuY29udHJvbGxlci5jb250cm9sIHx8IHN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICBzd2lwZXIuY29udHJvbGxlci5zZXRUcmFuc2xhdGUodHJhbnNsYXRlLCBieUNvbnRyb2xsZXIpO1xuICAgIH0pO1xuICAgIG9uKCdzZXRUcmFuc2l0aW9uJywgKF9zLCBkdXJhdGlvbiwgYnlDb250cm9sbGVyKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgfHwgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbC5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgIHN3aXBlci5jb250cm9sbGVyLnNldFRyYW5zaXRpb24oZHVyYXRpb24sIGJ5Q29udHJvbGxlcik7XG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIuY29udHJvbGxlciwge1xuICAgICAgc2V0VHJhbnNsYXRlLFxuICAgICAgc2V0VHJhbnNpdGlvblxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gQTExeShfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGExMXk6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbm90aWZpY2F0aW9uQ2xhc3M6ICdzd2lwZXItbm90aWZpY2F0aW9uJyxcbiAgICAgICAgcHJldlNsaWRlTWVzc2FnZTogJ1ByZXZpb3VzIHNsaWRlJyxcbiAgICAgICAgbmV4dFNsaWRlTWVzc2FnZTogJ05leHQgc2xpZGUnLFxuICAgICAgICBmaXJzdFNsaWRlTWVzc2FnZTogJ1RoaXMgaXMgdGhlIGZpcnN0IHNsaWRlJyxcbiAgICAgICAgbGFzdFNsaWRlTWVzc2FnZTogJ1RoaXMgaXMgdGhlIGxhc3Qgc2xpZGUnLFxuICAgICAgICBwYWdpbmF0aW9uQnVsbGV0TWVzc2FnZTogJ0dvIHRvIHNsaWRlIHt7aW5kZXh9fScsXG4gICAgICAgIHNsaWRlTGFiZWxNZXNzYWdlOiAne3tpbmRleH19IC8ge3tzbGlkZXNMZW5ndGh9fScsXG4gICAgICAgIGNvbnRhaW5lck1lc3NhZ2U6IG51bGwsXG4gICAgICAgIGNvbnRhaW5lclJvbGVEZXNjcmlwdGlvbk1lc3NhZ2U6IG51bGwsXG4gICAgICAgIGl0ZW1Sb2xlRGVzY3JpcHRpb25NZXNzYWdlOiBudWxsLFxuICAgICAgICBzbGlkZVJvbGU6ICdncm91cCcsXG4gICAgICAgIGlkOiBudWxsXG4gICAgICB9XG4gICAgfSk7XG4gICAgc3dpcGVyLmExMXkgPSB7XG4gICAgICBjbGlja2VkOiBmYWxzZVxuICAgIH07XG4gICAgbGV0IGxpdmVSZWdpb24gPSBudWxsO1xuICAgIGxldCBwcmV2ZW50Rm9jdXNIYW5kbGVyO1xuICAgIGxldCBmb2N1c1RhcmdldFNsaWRlRWw7XG4gICAgbGV0IHZpc2liaWxpdHlDaGFuZ2VkVGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgZnVuY3Rpb24gbm90aWZ5KG1lc3NhZ2UpIHtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGxpdmVSZWdpb247XG4gICAgICBpZiAobm90aWZpY2F0aW9uLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgbm90aWZpY2F0aW9uLmlubmVySFRNTCA9ICcnO1xuICAgICAgbm90aWZpY2F0aW9uLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcihzaXplKSB7XG4gICAgICBpZiAoc2l6ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNpemUgPSAxNjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJhbmRvbUNoYXIgPSAoKSA9PiBNYXRoLnJvdW5kKDE2ICogTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMTYpO1xuICAgICAgcmV0dXJuICd4Jy5yZXBlYXQoc2l6ZSkucmVwbGFjZSgveC9nLCByYW5kb21DaGFyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFrZUVsRm9jdXNhYmxlKGVsKSB7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywgJzAnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYWtlRWxOb3RGb2N1c2FibGUoZWwpIHtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLnNldEF0dHJpYnV0ZSgndGFiSW5kZXgnLCAnLTEnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRFbFJvbGUoZWwsIHJvbGUpIHtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLnNldEF0dHJpYnV0ZSgncm9sZScsIHJvbGUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZEVsUm9sZURlc2NyaXB0aW9uKGVsLCBkZXNjcmlwdGlvbikge1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuc2V0QXR0cmlidXRlKCdhcmlhLXJvbGVkZXNjcmlwdGlvbicsIGRlc2NyaXB0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRFbENvbnRyb2xzKGVsLCBjb250cm9scykge1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgY29udHJvbHMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZEVsTGFiZWwoZWwsIGxhYmVsKSB7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBsYWJlbCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRWxJZChlbCwgaWQpIHtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRWxMaXZlKGVsLCBsaXZlKSB7XG4gICAgICBlbCA9IG1ha2VFbGVtZW50c0FycmF5KGVsKTtcbiAgICAgIGVsLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICBzdWJFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsIGxpdmUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc2FibGVFbChlbCkge1xuICAgICAgZWwgPSBtYWtlRWxlbWVudHNBcnJheShlbCk7XG4gICAgICBlbC5mb3JFYWNoKHN1YkVsID0+IHtcbiAgICAgICAgc3ViRWwuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5hYmxlRWwoZWwpIHtcbiAgICAgIGVsID0gbWFrZUVsZW1lbnRzQXJyYXkoZWwpO1xuICAgICAgZWwuZm9yRWFjaChzdWJFbCA9PiB7XG4gICAgICAgIHN1YkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkVudGVyT3JTcGFjZUtleShlKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlICE9PSAxMyAmJiBlLmtleUNvZGUgIT09IDMyKSByZXR1cm47XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmExMXk7XG4gICAgICBjb25zdCB0YXJnZXRFbCA9IGUudGFyZ2V0O1xuICAgICAgaWYgKHN3aXBlci5wYWdpbmF0aW9uICYmIHN3aXBlci5wYWdpbmF0aW9uLmVsICYmICh0YXJnZXRFbCA9PT0gc3dpcGVyLnBhZ2luYXRpb24uZWwgfHwgc3dpcGVyLnBhZ2luYXRpb24uZWwuY29udGFpbnMoZS50YXJnZXQpKSkge1xuICAgICAgICBpZiAoIWUudGFyZ2V0Lm1hdGNoZXMoY2xhc3Nlc1RvU2VsZWN0b3Ioc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLmJ1bGxldENsYXNzKSkpIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIubmF2aWdhdGlvbiAmJiBzd2lwZXIubmF2aWdhdGlvbi5wcmV2RWwgJiYgc3dpcGVyLm5hdmlnYXRpb24ubmV4dEVsKSB7XG4gICAgICAgIGNvbnN0IHByZXZFbHMgPSBtYWtlRWxlbWVudHNBcnJheShzd2lwZXIubmF2aWdhdGlvbi5wcmV2RWwpO1xuICAgICAgICBjb25zdCBuZXh0RWxzID0gbWFrZUVsZW1lbnRzQXJyYXkoc3dpcGVyLm5hdmlnYXRpb24ubmV4dEVsKTtcbiAgICAgICAgaWYgKG5leHRFbHMuaW5jbHVkZXModGFyZ2V0RWwpKSB7XG4gICAgICAgICAgaWYgKCEoc3dpcGVyLmlzRW5kICYmICFzd2lwZXIucGFyYW1zLmxvb3ApKSB7XG4gICAgICAgICAgICBzd2lwZXIuc2xpZGVOZXh0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzd2lwZXIuaXNFbmQpIHtcbiAgICAgICAgICAgIG5vdGlmeShwYXJhbXMubGFzdFNsaWRlTWVzc2FnZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vdGlmeShwYXJhbXMubmV4dFNsaWRlTWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2RWxzLmluY2x1ZGVzKHRhcmdldEVsKSkge1xuICAgICAgICAgIGlmICghKHN3aXBlci5pc0JlZ2lubmluZyAmJiAhc3dpcGVyLnBhcmFtcy5sb29wKSkge1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlUHJldigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3dpcGVyLmlzQmVnaW5uaW5nKSB7XG4gICAgICAgICAgICBub3RpZnkocGFyYW1zLmZpcnN0U2xpZGVNZXNzYWdlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm90aWZ5KHBhcmFtcy5wcmV2U2xpZGVNZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFnaW5hdGlvbiAmJiB0YXJnZXRFbC5tYXRjaGVzKGNsYXNzZXNUb1NlbGVjdG9yKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5idWxsZXRDbGFzcykpKSB7XG4gICAgICAgIHRhcmdldEVsLmNsaWNrKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdmlnYXRpb24oKSB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5sb29wIHx8IHN3aXBlci5wYXJhbXMucmV3aW5kIHx8ICFzd2lwZXIubmF2aWdhdGlvbikgcmV0dXJuO1xuICAgICAgY29uc3Qge1xuICAgICAgICBuZXh0RWwsXG4gICAgICAgIHByZXZFbFxuICAgICAgfSA9IHN3aXBlci5uYXZpZ2F0aW9uO1xuICAgICAgaWYgKHByZXZFbCkge1xuICAgICAgICBpZiAoc3dpcGVyLmlzQmVnaW5uaW5nKSB7XG4gICAgICAgICAgZGlzYWJsZUVsKHByZXZFbCk7XG4gICAgICAgICAgbWFrZUVsTm90Rm9jdXNhYmxlKHByZXZFbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW5hYmxlRWwocHJldkVsKTtcbiAgICAgICAgICBtYWtlRWxGb2N1c2FibGUocHJldkVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG5leHRFbCkge1xuICAgICAgICBpZiAoc3dpcGVyLmlzRW5kKSB7XG4gICAgICAgICAgZGlzYWJsZUVsKG5leHRFbCk7XG4gICAgICAgICAgbWFrZUVsTm90Rm9jdXNhYmxlKG5leHRFbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW5hYmxlRWwobmV4dEVsKTtcbiAgICAgICAgICBtYWtlRWxGb2N1c2FibGUobmV4dEVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNQYWdpbmF0aW9uKCkge1xuICAgICAgcmV0dXJuIHN3aXBlci5wYWdpbmF0aW9uICYmIHN3aXBlci5wYWdpbmF0aW9uLmJ1bGxldHMgJiYgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cy5sZW5ndGg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhc0NsaWNrYWJsZVBhZ2luYXRpb24oKSB7XG4gICAgICByZXR1cm4gaGFzUGFnaW5hdGlvbigpICYmIHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVBhZ2luYXRpb24oKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmExMXk7XG4gICAgICBpZiAoIWhhc1BhZ2luYXRpb24oKSkgcmV0dXJuO1xuICAgICAgc3dpcGVyLnBhZ2luYXRpb24uYnVsbGV0cy5mb3JFYWNoKGJ1bGxldEVsID0+IHtcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMucGFnaW5hdGlvbi5jbGlja2FibGUpIHtcbiAgICAgICAgICBtYWtlRWxGb2N1c2FibGUoYnVsbGV0RWwpO1xuICAgICAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5wYWdpbmF0aW9uLnJlbmRlckJ1bGxldCkge1xuICAgICAgICAgICAgYWRkRWxSb2xlKGJ1bGxldEVsLCAnYnV0dG9uJyk7XG4gICAgICAgICAgICBhZGRFbExhYmVsKGJ1bGxldEVsLCBwYXJhbXMucGFnaW5hdGlvbkJ1bGxldE1lc3NhZ2UucmVwbGFjZSgvXFx7XFx7aW5kZXhcXH1cXH0vLCBlbGVtZW50SW5kZXgoYnVsbGV0RWwpICsgMSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVsbGV0RWwubWF0Y2hlcyhjbGFzc2VzVG9TZWxlY3Rvcihzd2lwZXIucGFyYW1zLnBhZ2luYXRpb24uYnVsbGV0QWN0aXZlQ2xhc3MpKSkge1xuICAgICAgICAgIGJ1bGxldEVsLnNldEF0dHJpYnV0ZSgnYXJpYS1jdXJyZW50JywgJ3RydWUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidWxsZXRFbC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaW5pdE5hdkVsID0gKGVsLCB3cmFwcGVySWQsIG1lc3NhZ2UpID0+IHtcbiAgICAgIG1ha2VFbEZvY3VzYWJsZShlbCk7XG4gICAgICBpZiAoZWwudGFnTmFtZSAhPT0gJ0JVVFRPTicpIHtcbiAgICAgICAgYWRkRWxSb2xlKGVsLCAnYnV0dG9uJyk7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbkVudGVyT3JTcGFjZUtleSk7XG4gICAgICB9XG4gICAgICBhZGRFbExhYmVsKGVsLCBtZXNzYWdlKTtcbiAgICAgIGFkZEVsQ29udHJvbHMoZWwsIHdyYXBwZXJJZCk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVQb2ludGVyRG93biA9IGUgPT4ge1xuICAgICAgaWYgKGZvY3VzVGFyZ2V0U2xpZGVFbCAmJiBmb2N1c1RhcmdldFNsaWRlRWwgIT09IGUudGFyZ2V0ICYmICFmb2N1c1RhcmdldFNsaWRlRWwuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgIHByZXZlbnRGb2N1c0hhbmRsZXIgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc3dpcGVyLmExMXkuY2xpY2tlZCA9IHRydWU7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVQb2ludGVyVXAgPSAoKSA9PiB7XG4gICAgICBwcmV2ZW50Rm9jdXNIYW5kbGVyID0gZmFsc2U7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGlmICghc3dpcGVyLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgc3dpcGVyLmExMXkuY2xpY2tlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IG9uVmlzaWJpbGl0eUNoYW5nZSA9IGUgPT4ge1xuICAgICAgdmlzaWJpbGl0eUNoYW5nZWRUaW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUZvY3VzID0gZSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLmExMXkuY2xpY2tlZCkgcmV0dXJuO1xuICAgICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdmlzaWJpbGl0eUNoYW5nZWRUaW1lc3RhbXAgPCAxMDApIHJldHVybjtcbiAgICAgIGNvbnN0IHNsaWRlRWwgPSBlLnRhcmdldC5jbG9zZXN0KGAuJHtzd2lwZXIucGFyYW1zLnNsaWRlQ2xhc3N9LCBzd2lwZXItc2xpZGVgKTtcbiAgICAgIGlmICghc2xpZGVFbCB8fCAhc3dpcGVyLnNsaWRlcy5pbmNsdWRlcyhzbGlkZUVsKSkgcmV0dXJuO1xuICAgICAgZm9jdXNUYXJnZXRTbGlkZUVsID0gc2xpZGVFbDtcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gc3dpcGVyLnNsaWRlcy5pbmRleE9mKHNsaWRlRWwpID09PSBzd2lwZXIuYWN0aXZlSW5kZXg7XG4gICAgICBjb25zdCBpc1Zpc2libGUgPSBzd2lwZXIucGFyYW1zLndhdGNoU2xpZGVzUHJvZ3Jlc3MgJiYgc3dpcGVyLnZpc2libGVTbGlkZXMgJiYgc3dpcGVyLnZpc2libGVTbGlkZXMuaW5jbHVkZXMoc2xpZGVFbCk7XG4gICAgICBpZiAoaXNBY3RpdmUgfHwgaXNWaXNpYmxlKSByZXR1cm47XG4gICAgICBpZiAoZS5zb3VyY2VDYXBhYmlsaXRpZXMgJiYgZS5zb3VyY2VDYXBhYmlsaXRpZXMuZmlyZXNUb3VjaEV2ZW50cykgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICBzd2lwZXIuZWwuc2Nyb2xsTGVmdCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuZWwuc2Nyb2xsVG9wID0gMDtcbiAgICAgIH1cbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGlmIChwcmV2ZW50Rm9jdXNIYW5kbGVyKSByZXR1cm47XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUb0xvb3AocGFyc2VJbnQoc2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JykpLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUbyhzd2lwZXIuc2xpZGVzLmluZGV4T2Yoc2xpZGVFbCksIDApO1xuICAgICAgICB9XG4gICAgICAgIHByZXZlbnRGb2N1c0hhbmRsZXIgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgaW5pdFNsaWRlcyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuYTExeTtcbiAgICAgIGlmIChwYXJhbXMuaXRlbVJvbGVEZXNjcmlwdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgYWRkRWxSb2xlRGVzY3JpcHRpb24oc3dpcGVyLnNsaWRlcywgcGFyYW1zLml0ZW1Sb2xlRGVzY3JpcHRpb25NZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMuc2xpZGVSb2xlKSB7XG4gICAgICAgIGFkZEVsUm9sZShzd2lwZXIuc2xpZGVzLCBwYXJhbXMuc2xpZGVSb2xlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNsaWRlc0xlbmd0aCA9IHN3aXBlci5zbGlkZXMubGVuZ3RoO1xuICAgICAgaWYgKHBhcmFtcy5zbGlkZUxhYmVsTWVzc2FnZSkge1xuICAgICAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goKHNsaWRlRWwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2xpZGVJbmRleCA9IHN3aXBlci5wYXJhbXMubG9vcCA/IHBhcnNlSW50KHNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCkgOiBpbmRleDtcbiAgICAgICAgICBjb25zdCBhcmlhTGFiZWxNZXNzYWdlID0gcGFyYW1zLnNsaWRlTGFiZWxNZXNzYWdlLnJlcGxhY2UoL1xce1xce2luZGV4XFx9XFx9Lywgc2xpZGVJbmRleCArIDEpLnJlcGxhY2UoL1xce1xce3NsaWRlc0xlbmd0aFxcfVxcfS8sIHNsaWRlc0xlbmd0aCk7XG4gICAgICAgICAgYWRkRWxMYWJlbChzbGlkZUVsLCBhcmlhTGFiZWxNZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5hMTF5O1xuICAgICAgc3dpcGVyLmVsLmFwcGVuZChsaXZlUmVnaW9uKTtcblxuICAgICAgLy8gQ29udGFpbmVyXG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IHN3aXBlci5lbDtcbiAgICAgIGlmIChwYXJhbXMuY29udGFpbmVyUm9sZURlc2NyaXB0aW9uTWVzc2FnZSkge1xuICAgICAgICBhZGRFbFJvbGVEZXNjcmlwdGlvbihjb250YWluZXJFbCwgcGFyYW1zLmNvbnRhaW5lclJvbGVEZXNjcmlwdGlvbk1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy5jb250YWluZXJNZXNzYWdlKSB7XG4gICAgICAgIGFkZEVsTGFiZWwoY29udGFpbmVyRWwsIHBhcmFtcy5jb250YWluZXJNZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgLy8gV3JhcHBlclxuICAgICAgY29uc3Qgd3JhcHBlckVsID0gc3dpcGVyLndyYXBwZXJFbDtcbiAgICAgIGNvbnN0IHdyYXBwZXJJZCA9IHBhcmFtcy5pZCB8fCB3cmFwcGVyRWwuZ2V0QXR0cmlidXRlKCdpZCcpIHx8IGBzd2lwZXItd3JhcHBlci0ke2dldFJhbmRvbU51bWJlcigxNil9YDtcbiAgICAgIGNvbnN0IGxpdmUgPSBzd2lwZXIucGFyYW1zLmF1dG9wbGF5ICYmIHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZW5hYmxlZCA/ICdvZmYnIDogJ3BvbGl0ZSc7XG4gICAgICBhZGRFbElkKHdyYXBwZXJFbCwgd3JhcHBlcklkKTtcbiAgICAgIGFkZEVsTGl2ZSh3cmFwcGVyRWwsIGxpdmUpO1xuXG4gICAgICAvLyBTbGlkZVxuICAgICAgaW5pdFNsaWRlcygpO1xuXG4gICAgICAvLyBOYXZpZ2F0aW9uXG4gICAgICBsZXQge1xuICAgICAgICBuZXh0RWwsXG4gICAgICAgIHByZXZFbFxuICAgICAgfSA9IHN3aXBlci5uYXZpZ2F0aW9uID8gc3dpcGVyLm5hdmlnYXRpb24gOiB7fTtcbiAgICAgIG5leHRFbCA9IG1ha2VFbGVtZW50c0FycmF5KG5leHRFbCk7XG4gICAgICBwcmV2RWwgPSBtYWtlRWxlbWVudHNBcnJheShwcmV2RWwpO1xuICAgICAgaWYgKG5leHRFbCkge1xuICAgICAgICBuZXh0RWwuZm9yRWFjaChlbCA9PiBpbml0TmF2RWwoZWwsIHdyYXBwZXJJZCwgcGFyYW1zLm5leHRTbGlkZU1lc3NhZ2UpKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2RWwpIHtcbiAgICAgICAgcHJldkVsLmZvckVhY2goZWwgPT4gaW5pdE5hdkVsKGVsLCB3cmFwcGVySWQsIHBhcmFtcy5wcmV2U2xpZGVNZXNzYWdlKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhZ2luYXRpb25cbiAgICAgIGlmIChoYXNDbGlja2FibGVQYWdpbmF0aW9uKCkpIHtcbiAgICAgICAgY29uc3QgcGFnaW5hdGlvbkVsID0gbWFrZUVsZW1lbnRzQXJyYXkoc3dpcGVyLnBhZ2luYXRpb24uZWwpO1xuICAgICAgICBwYWdpbmF0aW9uRWwuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uRW50ZXJPclNwYWNlS2V5KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRhYiBmb2N1c1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgICBzd2lwZXIuZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBoYW5kbGVGb2N1cywgdHJ1ZSk7XG4gICAgICBzd2lwZXIuZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBoYW5kbGVGb2N1cywgdHJ1ZSk7XG4gICAgICBzd2lwZXIuZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBoYW5kbGVQb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICBzd2lwZXIuZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgaGFuZGxlUG9pbnRlclVwLCB0cnVlKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICBpZiAobGl2ZVJlZ2lvbikgbGl2ZVJlZ2lvbi5yZW1vdmUoKTtcbiAgICAgIGxldCB7XG4gICAgICAgIG5leHRFbCxcbiAgICAgICAgcHJldkVsXG4gICAgICB9ID0gc3dpcGVyLm5hdmlnYXRpb24gPyBzd2lwZXIubmF2aWdhdGlvbiA6IHt9O1xuICAgICAgbmV4dEVsID0gbWFrZUVsZW1lbnRzQXJyYXkobmV4dEVsKTtcbiAgICAgIHByZXZFbCA9IG1ha2VFbGVtZW50c0FycmF5KHByZXZFbCk7XG4gICAgICBpZiAobmV4dEVsKSB7XG4gICAgICAgIG5leHRFbC5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbkVudGVyT3JTcGFjZUtleSkpO1xuICAgICAgfVxuICAgICAgaWYgKHByZXZFbCkge1xuICAgICAgICBwcmV2RWwuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25FbnRlck9yU3BhY2VLZXkpKTtcbiAgICAgIH1cblxuICAgICAgLy8gUGFnaW5hdGlvblxuICAgICAgaWYgKGhhc0NsaWNrYWJsZVBhZ2luYXRpb24oKSkge1xuICAgICAgICBjb25zdCBwYWdpbmF0aW9uRWwgPSBtYWtlRWxlbWVudHNBcnJheShzd2lwZXIucGFnaW5hdGlvbi5lbCk7XG4gICAgICAgIHBhZ2luYXRpb25FbC5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25FbnRlck9yU3BhY2VLZXkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBvblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgICAgLy8gVGFiIGZvY3VzXG4gICAgICBpZiAoc3dpcGVyLmVsICYmIHR5cGVvZiBzd2lwZXIuZWwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHN3aXBlci5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIGhhbmRsZUZvY3VzLCB0cnVlKTtcbiAgICAgICAgc3dpcGVyLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgaGFuZGxlUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICBzd2lwZXIuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgaGFuZGxlUG9pbnRlclVwLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgICBsaXZlUmVnaW9uID0gY3JlYXRlRWxlbWVudCgnc3BhbicsIHN3aXBlci5wYXJhbXMuYTExeS5ub3RpZmljYXRpb25DbGFzcyk7XG4gICAgICBsaXZlUmVnaW9uLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ2Fzc2VydGl2ZScpO1xuICAgICAgbGl2ZVJlZ2lvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtYXRvbWljJywgJ3RydWUnKTtcbiAgICB9KTtcbiAgICBvbignYWZ0ZXJJbml0JywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmExMXkuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgaW5pdCgpO1xuICAgIH0pO1xuICAgIG9uKCdzbGlkZXNMZW5ndGhDaGFuZ2Ugc25hcEdyaWRMZW5ndGhDaGFuZ2Ugc2xpZGVzR3JpZExlbmd0aENoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5hMTF5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGluaXRTbGlkZXMoKTtcbiAgICB9KTtcbiAgICBvbignZnJvbUVkZ2UgdG9FZGdlIGFmdGVySW5pdCBsb2NrIHVubG9jaycsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5hMTF5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHVwZGF0ZU5hdmlnYXRpb24oKTtcbiAgICB9KTtcbiAgICBvbigncGFnaW5hdGlvblVwZGF0ZScsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5hMTF5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIHVwZGF0ZVBhZ2luYXRpb24oKTtcbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5hMTF5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGRlc3Ryb3koKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEhpc3RvcnkoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvblxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBoaXN0b3J5OiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICByb290OiAnJyxcbiAgICAgICAgcmVwbGFjZVN0YXRlOiBmYWxzZSxcbiAgICAgICAga2V5OiAnc2xpZGVzJyxcbiAgICAgICAga2VlcFF1ZXJ5OiBmYWxzZVxuICAgICAgfVxuICAgIH0pO1xuICAgIGxldCBpbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGxldCBwYXRocyA9IHt9O1xuICAgIGNvbnN0IHNsdWdpZnkgPSB0ZXh0ID0+IHtcbiAgICAgIHJldHVybiB0ZXh0LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpLnJlcGxhY2UoL1teXFx3LV0rL2csICcnKS5yZXBsYWNlKC8tLSsvZywgJy0nKS5yZXBsYWNlKC9eLSsvLCAnJykucmVwbGFjZSgvLSskLywgJycpO1xuICAgIH07XG4gICAgY29uc3QgZ2V0UGF0aFZhbHVlcyA9IHVybE92ZXJyaWRlID0+IHtcbiAgICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgICAgbGV0IGxvY2F0aW9uO1xuICAgICAgaWYgKHVybE92ZXJyaWRlKSB7XG4gICAgICAgIGxvY2F0aW9uID0gbmV3IFVSTCh1cmxPdmVycmlkZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhdGhBcnJheSA9IGxvY2F0aW9uLnBhdGhuYW1lLnNsaWNlKDEpLnNwbGl0KCcvJykuZmlsdGVyKHBhcnQgPT4gcGFydCAhPT0gJycpO1xuICAgICAgY29uc3QgdG90YWwgPSBwYXRoQXJyYXkubGVuZ3RoO1xuICAgICAgY29uc3Qga2V5ID0gcGF0aEFycmF5W3RvdGFsIC0gMl07XG4gICAgICBjb25zdCB2YWx1ZSA9IHBhdGhBcnJheVt0b3RhbCAtIDFdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5LFxuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHNldEhpc3RvcnkgPSAoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgICBpZiAoIWluaXRpYWxpemVkIHx8ICFzd2lwZXIucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgbGV0IGxvY2F0aW9uO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMudXJsKSB7XG4gICAgICAgIGxvY2F0aW9uID0gbmV3IFVSTChzd2lwZXIucGFyYW1zLnVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNsaWRlID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIuc2xpZGVzRWwucXVlcnlTZWxlY3RvcihgW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtpbmRleH1cIl1gKSA6IHN3aXBlci5zbGlkZXNbaW5kZXhdO1xuICAgICAgbGV0IHZhbHVlID0gc2x1Z2lmeShzbGlkZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGlzdG9yeScpKTtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmhpc3Rvcnkucm9vdC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxldCByb290ID0gc3dpcGVyLnBhcmFtcy5oaXN0b3J5LnJvb3Q7XG4gICAgICAgIGlmIChyb290W3Jvb3QubGVuZ3RoIC0gMV0gPT09ICcvJykgcm9vdCA9IHJvb3Quc2xpY2UoMCwgcm9vdC5sZW5ndGggLSAxKTtcbiAgICAgICAgdmFsdWUgPSBgJHtyb290fS8ke2tleSA/IGAke2tleX0vYCA6ICcnfSR7dmFsdWV9YDtcbiAgICAgIH0gZWxzZSBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgdmFsdWUgPSBgJHtrZXkgPyBgJHtrZXl9L2AgOiAnJ30ke3ZhbHVlfWA7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmtlZXBRdWVyeSkge1xuICAgICAgICB2YWx1ZSArPSBsb2NhdGlvbi5zZWFyY2g7XG4gICAgICB9XG4gICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB3aW5kb3cuaGlzdG9yeS5zdGF0ZTtcbiAgICAgIGlmIChjdXJyZW50U3RhdGUgJiYgY3VycmVudFN0YXRlLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe1xuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0sIG51bGwsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7XG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfSwgbnVsbCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2Nyb2xsVG9TbGlkZSA9IChzcGVlZCwgdmFsdWUsIHJ1bkNhbGxiYWNrcykgPT4ge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBzd2lwZXIuc2xpZGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3Qgc2xpZGUgPSBzd2lwZXIuc2xpZGVzW2ldO1xuICAgICAgICAgIGNvbnN0IHNsaWRlSGlzdG9yeSA9IHNsdWdpZnkoc2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhpc3RvcnknKSk7XG4gICAgICAgICAgaWYgKHNsaWRlSGlzdG9yeSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3dpcGVyLmdldFNsaWRlSW5kZXgoc2xpZGUpO1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG8oaW5kZXgsIHNwZWVkLCBydW5DYWxsYmFja3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oMCwgc3BlZWQsIHJ1bkNhbGxiYWNrcyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRIaXN0b3J5UG9wU3RhdGUgPSAoKSA9PiB7XG4gICAgICBwYXRocyA9IGdldFBhdGhWYWx1ZXMoc3dpcGVyLnBhcmFtcy51cmwpO1xuICAgICAgc2Nyb2xsVG9TbGlkZShzd2lwZXIucGFyYW1zLnNwZWVkLCBwYXRocy52YWx1ZSwgZmFsc2UpO1xuICAgIH07XG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdygpO1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmhpc3RvcnkpIHJldHVybjtcbiAgICAgIGlmICghd2luZG93Lmhpc3RvcnkgfHwgIXdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSkge1xuICAgICAgICBzd2lwZXIucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBzd2lwZXIucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpbml0aWFsaXplZCA9IHRydWU7XG4gICAgICBwYXRocyA9IGdldFBhdGhWYWx1ZXMoc3dpcGVyLnBhcmFtcy51cmwpO1xuICAgICAgaWYgKCFwYXRocy5rZXkgJiYgIXBhdGhzLnZhbHVlKSB7XG4gICAgICAgIGlmICghc3dpcGVyLnBhcmFtcy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHNldEhpc3RvcnlQb3BTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2Nyb2xsVG9TbGlkZSgwLCBwYXRocy52YWx1ZSwgc3dpcGVyLnBhcmFtcy5ydW5DYWxsYmFja3NPbkluaXQpO1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHNldEhpc3RvcnlQb3BTdGF0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgc2V0SGlzdG9yeVBvcFN0YXRlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIG9uKCdpbml0JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuaGlzdG9yeS5lbmFibGVkKSB7XG4gICAgICAgIGluaXQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmhpc3RvcnkuZW5hYmxlZCkge1xuICAgICAgICBkZXN0cm95KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3RyYW5zaXRpb25FbmQgX2ZyZWVNb2RlTm9Nb21lbnR1bVJlbGVhc2UnLCAoKSA9PiB7XG4gICAgICBpZiAoaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgc2V0SGlzdG9yeShzd2lwZXIucGFyYW1zLmhpc3Rvcnkua2V5LCBzd2lwZXIuYWN0aXZlSW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdzbGlkZUNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmIChpbml0aWFsaXplZCAmJiBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgc2V0SGlzdG9yeShzd2lwZXIucGFyYW1zLmhpc3Rvcnkua2V5LCBzd2lwZXIuYWN0aXZlSW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gSGFzaE5hdmlnYXRpb24oX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBlbWl0LFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgY29uc3Qgd2luZG93ID0gZ2V0V2luZG93KCk7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGhhc2hOYXZpZ2F0aW9uOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICByZXBsYWNlU3RhdGU6IGZhbHNlLFxuICAgICAgICB3YXRjaFN0YXRlOiBmYWxzZSxcbiAgICAgICAgZ2V0U2xpZGVJbmRleChfcywgaGFzaCkge1xuICAgICAgICAgIGlmIChzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3Qgc2xpZGVXaXRoSGFzaCA9IHN3aXBlci5zbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGFzaCcpID09PSBoYXNoKVswXTtcbiAgICAgICAgICAgIGlmICghc2xpZGVXaXRoSGFzaCkgcmV0dXJuIDA7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KHNsaWRlV2l0aEhhc2guZ2V0QXR0cmlidXRlKCdkYXRhLXN3aXBlci1zbGlkZS1pbmRleCcpLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzd2lwZXIuZ2V0U2xpZGVJbmRleChlbGVtZW50Q2hpbGRyZW4oc3dpcGVyLnNsaWRlc0VsLCBgLiR7c3dpcGVyLnBhcmFtcy5zbGlkZUNsYXNzfVtkYXRhLWhhc2g9XCIke2hhc2h9XCJdLCBzd2lwZXItc2xpZGVbZGF0YS1oYXNoPVwiJHtoYXNofVwiXWApWzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IG9uSGFzaENoYW5nZSA9ICgpID0+IHtcbiAgICAgIGVtaXQoJ2hhc2hDaGFuZ2UnKTtcbiAgICAgIGNvbnN0IG5ld0hhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJyk7XG4gICAgICBjb25zdCBhY3RpdmVTbGlkZUVsID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIuc2xpZGVzRWwucXVlcnlTZWxlY3RvcihgW2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4PVwiJHtzd2lwZXIuYWN0aXZlSW5kZXh9XCJdYCkgOiBzd2lwZXIuc2xpZGVzW3N3aXBlci5hY3RpdmVJbmRleF07XG4gICAgICBjb25zdCBhY3RpdmVTbGlkZUhhc2ggPSBhY3RpdmVTbGlkZUVsID8gYWN0aXZlU2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGFzaCcpIDogJyc7XG4gICAgICBpZiAobmV3SGFzaCAhPT0gYWN0aXZlU2xpZGVIYXNoKSB7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ID0gc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5nZXRTbGlkZUluZGV4KHN3aXBlciwgbmV3SGFzaCk7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3SW5kZXggPT09ICd1bmRlZmluZWQnIHx8IE51bWJlci5pc05hTihuZXdJbmRleCkpIHJldHVybjtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8obmV3SW5kZXgpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0SGFzaCA9ICgpID0+IHtcbiAgICAgIGlmICghaW5pdGlhbGl6ZWQgfHwgIXN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgY29uc3QgYWN0aXZlU2xpZGVFbCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnNsaWRlc0VsLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXN3aXBlci1zbGlkZS1pbmRleD1cIiR7c3dpcGVyLmFjdGl2ZUluZGV4fVwiXWApIDogc3dpcGVyLnNsaWRlc1tzd2lwZXIuYWN0aXZlSW5kZXhdO1xuICAgICAgY29uc3QgYWN0aXZlU2xpZGVIYXNoID0gYWN0aXZlU2xpZGVFbCA/IGFjdGl2ZVNsaWRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhhc2gnKSB8fCBhY3RpdmVTbGlkZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1oaXN0b3J5JykgOiAnJztcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmhhc2hOYXZpZ2F0aW9uLnJlcGxhY2VTdGF0ZSAmJiB3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsIGAjJHthY3RpdmVTbGlkZUhhc2h9YCB8fCAnJyk7XG4gICAgICAgIGVtaXQoJ2hhc2hTZXQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLmhhc2ggPSBhY3RpdmVTbGlkZUhhc2ggfHwgJyc7XG4gICAgICAgIGVtaXQoJ2hhc2hTZXQnKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCB8fCBzd2lwZXIucGFyYW1zLmhpc3RvcnkgJiYgc3dpcGVyLnBhcmFtcy5oaXN0b3J5LmVuYWJsZWQpIHJldHVybjtcbiAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIGNvbnN0IGhhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJyk7XG4gICAgICBpZiAoaGFzaCkge1xuICAgICAgICBjb25zdCBzcGVlZCA9IDA7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5nZXRTbGlkZUluZGV4KHN3aXBlciwgaGFzaCk7XG4gICAgICAgIHN3aXBlci5zbGlkZVRvKGluZGV4IHx8IDAsIHNwZWVkLCBzd2lwZXIucGFyYW1zLnJ1bkNhbGxiYWNrc09uSW5pdCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi53YXRjaFN0YXRlKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgb25IYXNoQ2hhbmdlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi53YXRjaFN0YXRlKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgb25IYXNoQ2hhbmdlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIG9uKCdpbml0JywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuaGFzaE5hdmlnYXRpb24uZW5hYmxlZCkge1xuICAgICAgICBpbml0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5oYXNoTmF2aWdhdGlvbi5lbmFibGVkKSB7XG4gICAgICAgIGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbigndHJhbnNpdGlvbkVuZCBfZnJlZU1vZGVOb01vbWVudHVtUmVsZWFzZScsICgpID0+IHtcbiAgICAgIGlmIChpbml0aWFsaXplZCkge1xuICAgICAgICBzZXRIYXNoKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3NsaWRlQ2hhbmdlJywgKCkgPT4ge1xuICAgICAgaWYgKGluaXRpYWxpemVkICYmIHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzZXRIYXNoKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tdW5kZXJzY29yZS1kYW5nbGU6IFwib2ZmXCIgKi9cbiAgLyogZXNsaW50IG5vLXVzZS1iZWZvcmUtZGVmaW5lOiBcIm9mZlwiICovXG4gIGZ1bmN0aW9uIEF1dG9wbGF5KF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb24sXG4gICAgICBlbWl0LFxuICAgICAgcGFyYW1zXG4gICAgfSA9IF9yZWY7XG4gICAgc3dpcGVyLmF1dG9wbGF5ID0ge1xuICAgICAgcnVubmluZzogZmFsc2UsXG4gICAgICBwYXVzZWQ6IGZhbHNlLFxuICAgICAgdGltZUxlZnQ6IDBcbiAgICB9O1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBhdXRvcGxheToge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgZGVsYXk6IDMwMDAsXG4gICAgICAgIHdhaXRGb3JUcmFuc2l0aW9uOiB0cnVlLFxuICAgICAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgICAgIHN0b3BPbkxhc3RTbGlkZTogZmFsc2UsXG4gICAgICAgIHJldmVyc2VEaXJlY3Rpb246IGZhbHNlLFxuICAgICAgICBwYXVzZU9uTW91c2VFbnRlcjogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgdGltZW91dDtcbiAgICBsZXQgcmFmO1xuICAgIGxldCBhdXRvcGxheURlbGF5VG90YWwgPSBwYXJhbXMgJiYgcGFyYW1zLmF1dG9wbGF5ID8gcGFyYW1zLmF1dG9wbGF5LmRlbGF5IDogMzAwMDtcbiAgICBsZXQgYXV0b3BsYXlEZWxheUN1cnJlbnQgPSBwYXJhbXMgJiYgcGFyYW1zLmF1dG9wbGF5ID8gcGFyYW1zLmF1dG9wbGF5LmRlbGF5IDogMzAwMDtcbiAgICBsZXQgYXV0b3BsYXlUaW1lTGVmdDtcbiAgICBsZXQgYXV0b3BsYXlTdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBsZXQgd2FzUGF1c2VkO1xuICAgIGxldCBpc1RvdWNoZWQ7XG4gICAgbGV0IHBhdXNlZEJ5VG91Y2g7XG4gICAgbGV0IHRvdWNoU3RhcnRUaW1lb3V0O1xuICAgIGxldCBzbGlkZUNoYW5nZWQ7XG4gICAgbGV0IHBhdXNlZEJ5SW50ZXJhY3Rpb247XG4gICAgbGV0IHBhdXNlZEJ5UG9pbnRlckVudGVyO1xuICAgIGZ1bmN0aW9uIG9uVHJhbnNpdGlvbkVuZChlKSB7XG4gICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIud3JhcHBlckVsKSByZXR1cm47XG4gICAgICBpZiAoZS50YXJnZXQgIT09IHN3aXBlci53cmFwcGVyRWwpIHJldHVybjtcbiAgICAgIHN3aXBlci53cmFwcGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIG9uVHJhbnNpdGlvbkVuZCk7XG4gICAgICBpZiAocGF1c2VkQnlQb2ludGVyRW50ZXIgfHwgZS5kZXRhaWwgJiYgZS5kZXRhaWwuYnlTd2lwZXJUb3VjaE1vdmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzdW1lKCk7XG4gICAgfVxuICAgIGNvbnN0IGNhbGNUaW1lTGVmdCA9ICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5hdXRvcGxheS5wYXVzZWQpIHtcbiAgICAgICAgd2FzUGF1c2VkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAod2FzUGF1c2VkKSB7XG4gICAgICAgIGF1dG9wbGF5RGVsYXlDdXJyZW50ID0gYXV0b3BsYXlUaW1lTGVmdDtcbiAgICAgICAgd2FzUGF1c2VkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCB0aW1lTGVmdCA9IHN3aXBlci5hdXRvcGxheS5wYXVzZWQgPyBhdXRvcGxheVRpbWVMZWZ0IDogYXV0b3BsYXlTdGFydFRpbWUgKyBhdXRvcGxheURlbGF5Q3VycmVudCAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgc3dpcGVyLmF1dG9wbGF5LnRpbWVMZWZ0ID0gdGltZUxlZnQ7XG4gICAgICBlbWl0KCdhdXRvcGxheVRpbWVMZWZ0JywgdGltZUxlZnQsIHRpbWVMZWZ0IC8gYXV0b3BsYXlEZWxheVRvdGFsKTtcbiAgICAgIHJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGNhbGNUaW1lTGVmdCgpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRTbGlkZURlbGF5ID0gKCkgPT4ge1xuICAgICAgbGV0IGFjdGl2ZVNsaWRlRWw7XG4gICAgICBpZiAoc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQpIHtcbiAgICAgICAgYWN0aXZlU2xpZGVFbCA9IHN3aXBlci5zbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1zbGlkZS1hY3RpdmUnKSlbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RpdmVTbGlkZUVsID0gc3dpcGVyLnNsaWRlc1tzd2lwZXIuYWN0aXZlSW5kZXhdO1xuICAgICAgfVxuICAgICAgaWYgKCFhY3RpdmVTbGlkZUVsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgY29uc3QgY3VycmVudFNsaWRlRGVsYXkgPSBwYXJzZUludChhY3RpdmVTbGlkZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zd2lwZXItYXV0b3BsYXknKSwgMTApO1xuICAgICAgcmV0dXJuIGN1cnJlbnRTbGlkZURlbGF5O1xuICAgIH07XG4gICAgY29uc3QgcnVuID0gZGVsYXlGb3JjZSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZik7XG4gICAgICBjYWxjVGltZUxlZnQoKTtcbiAgICAgIGxldCBkZWxheSA9IHR5cGVvZiBkZWxheUZvcmNlID09PSAndW5kZWZpbmVkJyA/IHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGVsYXkgOiBkZWxheUZvcmNlO1xuICAgICAgYXV0b3BsYXlEZWxheVRvdGFsID0gc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kZWxheTtcbiAgICAgIGF1dG9wbGF5RGVsYXlDdXJyZW50ID0gc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kZWxheTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZURlbGF5ID0gZ2V0U2xpZGVEZWxheSgpO1xuICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oY3VycmVudFNsaWRlRGVsYXkpICYmIGN1cnJlbnRTbGlkZURlbGF5ID4gMCAmJiB0eXBlb2YgZGVsYXlGb3JjZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVsYXkgPSBjdXJyZW50U2xpZGVEZWxheTtcbiAgICAgICAgYXV0b3BsYXlEZWxheVRvdGFsID0gY3VycmVudFNsaWRlRGVsYXk7XG4gICAgICAgIGF1dG9wbGF5RGVsYXlDdXJyZW50ID0gY3VycmVudFNsaWRlRGVsYXk7XG4gICAgICB9XG4gICAgICBhdXRvcGxheVRpbWVMZWZ0ID0gZGVsYXk7XG4gICAgICBjb25zdCBzcGVlZCA9IHN3aXBlci5wYXJhbXMuc3BlZWQ7XG4gICAgICBjb25zdCBwcm9jZWVkID0gKCkgPT4ge1xuICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9wbGF5LnJldmVyc2VEaXJlY3Rpb24pIHtcbiAgICAgICAgICBpZiAoIXN3aXBlci5pc0JlZ2lubmluZyB8fCBzd2lwZXIucGFyYW1zLmxvb3AgfHwgc3dpcGVyLnBhcmFtcy5yZXdpbmQpIHtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZVByZXYoc3BlZWQsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgZW1pdCgnYXV0b3BsYXknKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFzd2lwZXIucGFyYW1zLmF1dG9wbGF5LnN0b3BPbkxhc3RTbGlkZSkge1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLnNsaWRlcy5sZW5ndGggLSAxLCBzcGVlZCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBlbWl0KCdhdXRvcGxheScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIXN3aXBlci5pc0VuZCB8fCBzd2lwZXIucGFyYW1zLmxvb3AgfHwgc3dpcGVyLnBhcmFtcy5yZXdpbmQpIHtcbiAgICAgICAgICAgIHN3aXBlci5zbGlkZU5leHQoc3BlZWQsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgZW1pdCgnYXV0b3BsYXknKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFzd2lwZXIucGFyYW1zLmF1dG9wbGF5LnN0b3BPbkxhc3RTbGlkZSkge1xuICAgICAgICAgICAgc3dpcGVyLnNsaWRlVG8oMCwgc3BlZWQsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgZW1pdCgnYXV0b3BsYXknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICAgIGF1dG9wbGF5U3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHJ1bigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBwcm9jZWVkKCk7XG4gICAgICAgIH0sIGRlbGF5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgcHJvY2VlZCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICByZXR1cm4gZGVsYXk7XG4gICAgfTtcbiAgICBjb25zdCBzdGFydCA9ICgpID0+IHtcbiAgICAgIGF1dG9wbGF5U3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBzd2lwZXIuYXV0b3BsYXkucnVubmluZyA9IHRydWU7XG4gICAgICBydW4oKTtcbiAgICAgIGVtaXQoJ2F1dG9wbGF5U3RhcnQnKTtcbiAgICB9O1xuICAgIGNvbnN0IHN0b3AgPSAoKSA9PiB7XG4gICAgICBzd2lwZXIuYXV0b3BsYXkucnVubmluZyA9IGZhbHNlO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmKTtcbiAgICAgIGVtaXQoJ2F1dG9wbGF5U3RvcCcpO1xuICAgIH07XG4gICAgY29uc3QgcGF1c2UgPSAoaW50ZXJuYWwsIHJlc2V0KSA9PiB7XG4gICAgICBpZiAoc3dpcGVyLmRlc3Ryb3llZCB8fCAhc3dpcGVyLmF1dG9wbGF5LnJ1bm5pbmcpIHJldHVybjtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgcGF1c2VkQnlJbnRlcmFjdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9jZWVkID0gKCkgPT4ge1xuICAgICAgICBlbWl0KCdhdXRvcGxheVBhdXNlJyk7XG4gICAgICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9wbGF5LndhaXRGb3JUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgb25UcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bWUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHN3aXBlci5hdXRvcGxheS5wYXVzZWQgPSB0cnVlO1xuICAgICAgaWYgKHJlc2V0KSB7XG4gICAgICAgIGlmIChzbGlkZUNoYW5nZWQpIHtcbiAgICAgICAgICBhdXRvcGxheVRpbWVMZWZ0ID0gc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kZWxheTtcbiAgICAgICAgfVxuICAgICAgICBzbGlkZUNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgcHJvY2VlZCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBkZWxheSA9IGF1dG9wbGF5VGltZUxlZnQgfHwgc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kZWxheTtcbiAgICAgIGF1dG9wbGF5VGltZUxlZnQgPSBkZWxheSAtIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGF1dG9wbGF5U3RhcnRUaW1lKTtcbiAgICAgIGlmIChzd2lwZXIuaXNFbmQgJiYgYXV0b3BsYXlUaW1lTGVmdCA8IDAgJiYgIXN3aXBlci5wYXJhbXMubG9vcCkgcmV0dXJuO1xuICAgICAgaWYgKGF1dG9wbGF5VGltZUxlZnQgPCAwKSBhdXRvcGxheVRpbWVMZWZ0ID0gMDtcbiAgICAgIHByb2NlZWQoKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlc3VtZSA9ICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuaXNFbmQgJiYgYXV0b3BsYXlUaW1lTGVmdCA8IDAgJiYgIXN3aXBlci5wYXJhbXMubG9vcCB8fCBzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgYXV0b3BsYXlTdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIGlmIChwYXVzZWRCeUludGVyYWN0aW9uKSB7XG4gICAgICAgIHBhdXNlZEJ5SW50ZXJhY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgcnVuKGF1dG9wbGF5VGltZUxlZnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnVuKCk7XG4gICAgICB9XG4gICAgICBzd2lwZXIuYXV0b3BsYXkucGF1c2VkID0gZmFsc2U7XG4gICAgICBlbWl0KCdhdXRvcGxheVJlc3VtZScpO1xuICAgIH07XG4gICAgY29uc3Qgb25WaXNpYmlsaXR5Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSByZXR1cm47XG4gICAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuICAgICAgICBwYXVzZWRCeUludGVyYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgcGF1c2UodHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcbiAgICAgICAgcmVzdW1lKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvblBvaW50ZXJFbnRlciA9IGUgPT4ge1xuICAgICAgaWYgKGUucG9pbnRlclR5cGUgIT09ICdtb3VzZScpIHJldHVybjtcbiAgICAgIHBhdXNlZEJ5SW50ZXJhY3Rpb24gPSB0cnVlO1xuICAgICAgcGF1c2VkQnlQb2ludGVyRW50ZXIgPSB0cnVlO1xuICAgICAgaWYgKHN3aXBlci5hbmltYXRpbmcgfHwgc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCkgcmV0dXJuO1xuICAgICAgcGF1c2UodHJ1ZSk7XG4gICAgfTtcbiAgICBjb25zdCBvblBvaW50ZXJMZWF2ZSA9IGUgPT4ge1xuICAgICAgaWYgKGUucG9pbnRlclR5cGUgIT09ICdtb3VzZScpIHJldHVybjtcbiAgICAgIHBhdXNlZEJ5UG9pbnRlckVudGVyID0gZmFsc2U7XG4gICAgICBpZiAoc3dpcGVyLmF1dG9wbGF5LnBhdXNlZCkge1xuICAgICAgICByZXN1bWUoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGF0dGFjaE1vdXNlRXZlbnRzID0gKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkucGF1c2VPbk1vdXNlRW50ZXIpIHtcbiAgICAgICAgc3dpcGVyLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsIG9uUG9pbnRlckVudGVyKTtcbiAgICAgICAgc3dpcGVyLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsIG9uUG9pbnRlckxlYXZlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGRldGFjaE1vdXNlRXZlbnRzID0gKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5lbCAmJiB0eXBlb2Ygc3dpcGVyLmVsICE9PSAnc3RyaW5nJykge1xuICAgICAgICBzd2lwZXIuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmVudGVyJywgb25Qb2ludGVyRW50ZXIpO1xuICAgICAgICBzd2lwZXIuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgb25Qb2ludGVyTGVhdmUpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgYXR0YWNoRG9jdW1lbnRFdmVudHMgPSAoKSA9PiB7XG4gICAgICBjb25zdCBkb2N1bWVudCA9IGdldERvY3VtZW50KCk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICB9O1xuICAgIGNvbnN0IGRldGFjaERvY3VtZW50RXZlbnRzID0gKCkgPT4ge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBnZXREb2N1bWVudCgpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgfTtcbiAgICBvbignaW5pdCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmVuYWJsZWQpIHtcbiAgICAgICAgYXR0YWNoTW91c2VFdmVudHMoKTtcbiAgICAgICAgYXR0YWNoRG9jdW1lbnRFdmVudHMoKTtcbiAgICAgICAgc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignZGVzdHJveScsICgpID0+IHtcbiAgICAgIGRldGFjaE1vdXNlRXZlbnRzKCk7XG4gICAgICBkZXRhY2hEb2N1bWVudEV2ZW50cygpO1xuICAgICAgaWYgKHN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSB7XG4gICAgICAgIHN0b3AoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignX2ZyZWVNb2RlU3RhdGljUmVsZWFzZScsICgpID0+IHtcbiAgICAgIGlmIChwYXVzZWRCeVRvdWNoIHx8IHBhdXNlZEJ5SW50ZXJhY3Rpb24pIHtcbiAgICAgICAgcmVzdW1lKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ19mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlJywgKCkgPT4ge1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLmF1dG9wbGF5LmRpc2FibGVPbkludGVyYWN0aW9uKSB7XG4gICAgICAgIHBhdXNlKHRydWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKCdiZWZvcmVUcmFuc2l0aW9uU3RhcnQnLCAoX3MsIHNwZWVkLCBpbnRlcm5hbCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSByZXR1cm47XG4gICAgICBpZiAoaW50ZXJuYWwgfHwgIXN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24pIHtcbiAgICAgICAgcGF1c2UodHJ1ZSwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdG9wKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oJ3NsaWRlckZpcnN0TW92ZScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkIHx8ICFzd2lwZXIuYXV0b3BsYXkucnVubmluZykgcmV0dXJuO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuYXV0b3BsYXkuZGlzYWJsZU9uSW50ZXJhY3Rpb24pIHtcbiAgICAgICAgc3RvcCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpc1RvdWNoZWQgPSB0cnVlO1xuICAgICAgcGF1c2VkQnlUb3VjaCA9IGZhbHNlO1xuICAgICAgcGF1c2VkQnlJbnRlcmFjdGlvbiA9IGZhbHNlO1xuICAgICAgdG91Y2hTdGFydFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcGF1c2VkQnlJbnRlcmFjdGlvbiA9IHRydWU7XG4gICAgICAgIHBhdXNlZEJ5VG91Y2ggPSB0cnVlO1xuICAgICAgICBwYXVzZSh0cnVlKTtcbiAgICAgIH0sIDIwMCk7XG4gICAgfSk7XG4gICAgb24oJ3RvdWNoRW5kJywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5hdXRvcGxheS5ydW5uaW5nIHx8ICFpc1RvdWNoZWQpIHJldHVybjtcbiAgICAgIGNsZWFyVGltZW91dCh0b3VjaFN0YXJ0VGltZW91dCk7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5hdXRvcGxheS5kaXNhYmxlT25JbnRlcmFjdGlvbikge1xuICAgICAgICBwYXVzZWRCeVRvdWNoID0gZmFsc2U7XG4gICAgICAgIGlzVG91Y2hlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocGF1c2VkQnlUb3VjaCAmJiBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHJlc3VtZSgpO1xuICAgICAgcGF1c2VkQnlUb3VjaCA9IGZhbHNlO1xuICAgICAgaXNUb3VjaGVkID0gZmFsc2U7XG4gICAgfSk7XG4gICAgb24oJ3NsaWRlQ2hhbmdlJywgKCkgPT4ge1xuICAgICAgaWYgKHN3aXBlci5kZXN0cm95ZWQgfHwgIXN3aXBlci5hdXRvcGxheS5ydW5uaW5nKSByZXR1cm47XG4gICAgICBzbGlkZUNoYW5nZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLmF1dG9wbGF5LCB7XG4gICAgICBzdGFydCxcbiAgICAgIHN0b3AsXG4gICAgICBwYXVzZSxcbiAgICAgIHJlc3VtZVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gVGh1bWIoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvblxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICB0aHVtYnM6IHtcbiAgICAgICAgc3dpcGVyOiBudWxsLFxuICAgICAgICBtdWx0aXBsZUFjdGl2ZVRodW1iczogdHJ1ZSxcbiAgICAgICAgYXV0b1Njcm9sbE9mZnNldDogMCxcbiAgICAgICAgc2xpZGVUaHVtYkFjdGl2ZUNsYXNzOiAnc3dpcGVyLXNsaWRlLXRodW1iLWFjdGl2ZScsXG4gICAgICAgIHRodW1ic0NvbnRhaW5lckNsYXNzOiAnc3dpcGVyLXRodW1icydcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICBsZXQgc3dpcGVyQ3JlYXRlZCA9IGZhbHNlO1xuICAgIHN3aXBlci50aHVtYnMgPSB7XG4gICAgICBzd2lwZXI6IG51bGxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIG9uVGh1bWJDbGljaygpIHtcbiAgICAgIGNvbnN0IHRodW1ic1N3aXBlciA9IHN3aXBlci50aHVtYnMuc3dpcGVyO1xuICAgICAgaWYgKCF0aHVtYnNTd2lwZXIgfHwgdGh1bWJzU3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgY29uc3QgY2xpY2tlZEluZGV4ID0gdGh1bWJzU3dpcGVyLmNsaWNrZWRJbmRleDtcbiAgICAgIGNvbnN0IGNsaWNrZWRTbGlkZSA9IHRodW1ic1N3aXBlci5jbGlja2VkU2xpZGU7XG4gICAgICBpZiAoY2xpY2tlZFNsaWRlICYmIGNsaWNrZWRTbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoc3dpcGVyLnBhcmFtcy50aHVtYnMuc2xpZGVUaHVtYkFjdGl2ZUNsYXNzKSkgcmV0dXJuO1xuICAgICAgaWYgKHR5cGVvZiBjbGlja2VkSW5kZXggPT09ICd1bmRlZmluZWQnIHx8IGNsaWNrZWRJbmRleCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgbGV0IHNsaWRlVG9JbmRleDtcbiAgICAgIGlmICh0aHVtYnNTd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgc2xpZGVUb0luZGV4ID0gcGFyc2VJbnQodGh1bWJzU3dpcGVyLmNsaWNrZWRTbGlkZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JyksIDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlVG9JbmRleCA9IGNsaWNrZWRJbmRleDtcbiAgICAgIH1cbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG9Mb29wKHNsaWRlVG9JbmRleCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2lwZXIuc2xpZGVUbyhzbGlkZVRvSW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICB0aHVtYnM6IHRodW1ic1BhcmFtc1xuICAgICAgfSA9IHN3aXBlci5wYXJhbXM7XG4gICAgICBpZiAoaW5pdGlhbGl6ZWQpIHJldHVybiBmYWxzZTtcbiAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIGNvbnN0IFN3aXBlckNsYXNzID0gc3dpcGVyLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKHRodW1ic1BhcmFtcy5zd2lwZXIgaW5zdGFuY2VvZiBTd2lwZXJDbGFzcykge1xuICAgICAgICBzd2lwZXIudGh1bWJzLnN3aXBlciA9IHRodW1ic1BhcmFtcy5zd2lwZXI7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnRodW1icy5zd2lwZXIub3JpZ2luYWxQYXJhbXMsIHtcbiAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuYXNzaWduKHN3aXBlci50aHVtYnMuc3dpcGVyLnBhcmFtcywge1xuICAgICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHN3aXBlci50aHVtYnMuc3dpcGVyLnVwZGF0ZSgpO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdCQxKHRodW1ic1BhcmFtcy5zd2lwZXIpKSB7XG4gICAgICAgIGNvbnN0IHRodW1ic1N3aXBlclBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHRodW1ic1BhcmFtcy5zd2lwZXIpO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRodW1ic1N3aXBlclBhcmFtcywge1xuICAgICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHN3aXBlci50aHVtYnMuc3dpcGVyID0gbmV3IFN3aXBlckNsYXNzKHRodW1ic1N3aXBlclBhcmFtcyk7XG4gICAgICAgIHN3aXBlckNyZWF0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc3dpcGVyLnRodW1icy5zd2lwZXIuZWwuY2xhc3NMaXN0LmFkZChzd2lwZXIucGFyYW1zLnRodW1icy50aHVtYnNDb250YWluZXJDbGFzcyk7XG4gICAgICBzd2lwZXIudGh1bWJzLnN3aXBlci5vbigndGFwJywgb25UaHVtYkNsaWNrKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoaW5pdGlhbCkge1xuICAgICAgY29uc3QgdGh1bWJzU3dpcGVyID0gc3dpcGVyLnRodW1icy5zd2lwZXI7XG4gICAgICBpZiAoIXRodW1ic1N3aXBlciB8fCB0aHVtYnNTd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICBjb25zdCBzbGlkZXNQZXJWaWV3ID0gdGh1bWJzU3dpcGVyLnBhcmFtcy5zbGlkZXNQZXJWaWV3ID09PSAnYXV0bycgPyB0aHVtYnNTd2lwZXIuc2xpZGVzUGVyVmlld0R5bmFtaWMoKSA6IHRodW1ic1N3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldztcblxuICAgICAgLy8gQWN0aXZhdGUgdGh1bWJzXG4gICAgICBsZXQgdGh1bWJzVG9BY3RpdmF0ZSA9IDE7XG4gICAgICBjb25zdCB0aHVtYkFjdGl2ZUNsYXNzID0gc3dpcGVyLnBhcmFtcy50aHVtYnMuc2xpZGVUaHVtYkFjdGl2ZUNsYXNzO1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldyA+IDEgJiYgIXN3aXBlci5wYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgdGh1bWJzVG9BY3RpdmF0ZSA9IHN3aXBlci5wYXJhbXMuc2xpZGVzUGVyVmlldztcbiAgICAgIH1cbiAgICAgIGlmICghc3dpcGVyLnBhcmFtcy50aHVtYnMubXVsdGlwbGVBY3RpdmVUaHVtYnMpIHtcbiAgICAgICAgdGh1bWJzVG9BY3RpdmF0ZSA9IDE7XG4gICAgICB9XG4gICAgICB0aHVtYnNUb0FjdGl2YXRlID0gTWF0aC5mbG9vcih0aHVtYnNUb0FjdGl2YXRlKTtcbiAgICAgIHRodW1ic1N3aXBlci5zbGlkZXMuZm9yRWFjaChzbGlkZUVsID0+IHNsaWRlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aHVtYkFjdGl2ZUNsYXNzKSk7XG4gICAgICBpZiAodGh1bWJzU3dpcGVyLnBhcmFtcy5sb29wIHx8IHRodW1ic1N3aXBlci5wYXJhbXMudmlydHVhbCAmJiB0aHVtYnNTd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRodW1ic1RvQWN0aXZhdGU7IGkgKz0gMSkge1xuICAgICAgICAgIGVsZW1lbnRDaGlsZHJlbih0aHVtYnNTd2lwZXIuc2xpZGVzRWwsIGBbZGF0YS1zd2lwZXItc2xpZGUtaW5kZXg9XCIke3N3aXBlci5yZWFsSW5kZXggKyBpfVwiXWApLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgICAgICBzbGlkZUVsLmNsYXNzTGlzdC5hZGQodGh1bWJBY3RpdmVDbGFzcyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGh1bWJzVG9BY3RpdmF0ZTsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKHRodW1ic1N3aXBlci5zbGlkZXNbc3dpcGVyLnJlYWxJbmRleCArIGldKSB7XG4gICAgICAgICAgICB0aHVtYnNTd2lwZXIuc2xpZGVzW3N3aXBlci5yZWFsSW5kZXggKyBpXS5jbGFzc0xpc3QuYWRkKHRodW1iQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgYXV0b1Njcm9sbE9mZnNldCA9IHN3aXBlci5wYXJhbXMudGh1bWJzLmF1dG9TY3JvbGxPZmZzZXQ7XG4gICAgICBjb25zdCB1c2VPZmZzZXQgPSBhdXRvU2Nyb2xsT2Zmc2V0ICYmICF0aHVtYnNTd2lwZXIucGFyYW1zLmxvb3A7XG4gICAgICBpZiAoc3dpcGVyLnJlYWxJbmRleCAhPT0gdGh1bWJzU3dpcGVyLnJlYWxJbmRleCB8fCB1c2VPZmZzZXQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRodW1ic0luZGV4ID0gdGh1bWJzU3dpcGVyLmFjdGl2ZUluZGV4O1xuICAgICAgICBsZXQgbmV3VGh1bWJzSW5kZXg7XG4gICAgICAgIGxldCBkaXJlY3Rpb247XG4gICAgICAgIGlmICh0aHVtYnNTd2lwZXIucGFyYW1zLmxvb3ApIHtcbiAgICAgICAgICBjb25zdCBuZXdUaHVtYnNTbGlkZSA9IHRodW1ic1N3aXBlci5zbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JykgPT09IGAke3N3aXBlci5yZWFsSW5kZXh9YClbMF07XG4gICAgICAgICAgbmV3VGh1bWJzSW5kZXggPSB0aHVtYnNTd2lwZXIuc2xpZGVzLmluZGV4T2YobmV3VGh1bWJzU2xpZGUpO1xuICAgICAgICAgIGRpcmVjdGlvbiA9IHN3aXBlci5hY3RpdmVJbmRleCA+IHN3aXBlci5wcmV2aW91c0luZGV4ID8gJ25leHQnIDogJ3ByZXYnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1RodW1ic0luZGV4ID0gc3dpcGVyLnJlYWxJbmRleDtcbiAgICAgICAgICBkaXJlY3Rpb24gPSBuZXdUaHVtYnNJbmRleCA+IHN3aXBlci5wcmV2aW91c0luZGV4ID8gJ25leHQnIDogJ3ByZXYnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VPZmZzZXQpIHtcbiAgICAgICAgICBuZXdUaHVtYnNJbmRleCArPSBkaXJlY3Rpb24gPT09ICduZXh0JyA/IGF1dG9TY3JvbGxPZmZzZXQgOiAtMSAqIGF1dG9TY3JvbGxPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRodW1ic1N3aXBlci52aXNpYmxlU2xpZGVzSW5kZXhlcyAmJiB0aHVtYnNTd2lwZXIudmlzaWJsZVNsaWRlc0luZGV4ZXMuaW5kZXhPZihuZXdUaHVtYnNJbmRleCkgPCAwKSB7XG4gICAgICAgICAgaWYgKHRodW1ic1N3aXBlci5wYXJhbXMuY2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgICAgIGlmIChuZXdUaHVtYnNJbmRleCA+IGN1cnJlbnRUaHVtYnNJbmRleCkge1xuICAgICAgICAgICAgICBuZXdUaHVtYnNJbmRleCA9IG5ld1RodW1ic0luZGV4IC0gTWF0aC5mbG9vcihzbGlkZXNQZXJWaWV3IC8gMikgKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbmV3VGh1bWJzSW5kZXggPSBuZXdUaHVtYnNJbmRleCArIE1hdGguZmxvb3Ioc2xpZGVzUGVyVmlldyAvIDIpIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1RodW1ic0luZGV4ID4gY3VycmVudFRodW1ic0luZGV4ICYmIHRodW1ic1N3aXBlci5wYXJhbXMuc2xpZGVzUGVyR3JvdXAgPT09IDEpIDtcbiAgICAgICAgICB0aHVtYnNTd2lwZXIuc2xpZGVUbyhuZXdUaHVtYnNJbmRleCwgaW5pdGlhbCA/IDAgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG9uKCdiZWZvcmVJbml0JywgKCkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICB0aHVtYnNcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgICAgaWYgKCF0aHVtYnMgfHwgIXRodW1icy5zd2lwZXIpIHJldHVybjtcbiAgICAgIGlmICh0eXBlb2YgdGh1bWJzLnN3aXBlciA9PT0gJ3N0cmluZycgfHwgdGh1bWJzLnN3aXBlciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgICAgY29uc3QgZ2V0VGh1bWJzRWxlbWVudEFuZEluaXQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGh1bWJzRWxlbWVudCA9IHR5cGVvZiB0aHVtYnMuc3dpcGVyID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGh1bWJzLnN3aXBlcikgOiB0aHVtYnMuc3dpcGVyO1xuICAgICAgICAgIGlmICh0aHVtYnNFbGVtZW50ICYmIHRodW1ic0VsZW1lbnQuc3dpcGVyKSB7XG4gICAgICAgICAgICB0aHVtYnMuc3dpcGVyID0gdGh1bWJzRWxlbWVudC5zd2lwZXI7XG4gICAgICAgICAgICBpbml0KCk7XG4gICAgICAgICAgICB1cGRhdGUodHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aHVtYnNFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBvblRodW1ic1N3aXBlciA9IGUgPT4ge1xuICAgICAgICAgICAgICB0aHVtYnMuc3dpcGVyID0gZS5kZXRhaWxbMF07XG4gICAgICAgICAgICAgIHRodW1ic0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5pdCcsIG9uVGh1bWJzU3dpcGVyKTtcbiAgICAgICAgICAgICAgaW5pdCgpO1xuICAgICAgICAgICAgICB1cGRhdGUodHJ1ZSk7XG4gICAgICAgICAgICAgIHRodW1icy5zd2lwZXIudXBkYXRlKCk7XG4gICAgICAgICAgICAgIHN3aXBlci51cGRhdGUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aHVtYnNFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2luaXQnLCBvblRodW1ic1N3aXBlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHVtYnNFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB3YXRjaEZvclRodW1ic1RvQXBwZWFyID0gKCkgPT4ge1xuICAgICAgICAgIGlmIChzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgdGh1bWJzRWxlbWVudCA9IGdldFRodW1ic0VsZW1lbnRBbmRJbml0KCk7XG4gICAgICAgICAgaWYgKCF0aHVtYnNFbGVtZW50KSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUod2F0Y2hGb3JUaHVtYnNUb0FwcGVhcik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUod2F0Y2hGb3JUaHVtYnNUb0FwcGVhcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0KCk7XG4gICAgICAgIHVwZGF0ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvbignc2xpZGVDaGFuZ2UgdXBkYXRlIHJlc2l6ZSBvYnNlcnZlclVwZGF0ZScsICgpID0+IHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIG9uKCdzZXRUcmFuc2l0aW9uJywgKF9zLCBkdXJhdGlvbikgPT4ge1xuICAgICAgY29uc3QgdGh1bWJzU3dpcGVyID0gc3dpcGVyLnRodW1icy5zd2lwZXI7XG4gICAgICBpZiAoIXRodW1ic1N3aXBlciB8fCB0aHVtYnNTd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICB0aHVtYnNTd2lwZXIuc2V0VHJhbnNpdGlvbihkdXJhdGlvbik7XG4gICAgfSk7XG4gICAgb24oJ2JlZm9yZURlc3Ryb3knLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aHVtYnNTd2lwZXIgPSBzd2lwZXIudGh1bWJzLnN3aXBlcjtcbiAgICAgIGlmICghdGh1bWJzU3dpcGVyIHx8IHRodW1ic1N3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgIGlmIChzd2lwZXJDcmVhdGVkKSB7XG4gICAgICAgIHRodW1ic1N3aXBlci5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIudGh1bWJzLCB7XG4gICAgICBpbml0LFxuICAgICAgdXBkYXRlXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBmcmVlTW9kZShfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIGVtaXQsXG4gICAgICBvbmNlXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGZyZWVNb2RlOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBtb21lbnR1bTogdHJ1ZSxcbiAgICAgICAgbW9tZW50dW1SYXRpbzogMSxcbiAgICAgICAgbW9tZW50dW1Cb3VuY2U6IHRydWUsXG4gICAgICAgIG1vbWVudHVtQm91bmNlUmF0aW86IDEsXG4gICAgICAgIG1vbWVudHVtVmVsb2NpdHlSYXRpbzogMSxcbiAgICAgICAgc3RpY2t5OiBmYWxzZSxcbiAgICAgICAgbWluaW11bVZlbG9jaXR5OiAwLjAyXG4gICAgICB9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgICAgY29uc3QgdHJhbnNsYXRlID0gc3dpcGVyLmdldFRyYW5zbGF0ZSgpO1xuICAgICAgc3dpcGVyLnNldFRyYW5zbGF0ZSh0cmFuc2xhdGUpO1xuICAgICAgc3dpcGVyLnNldFRyYW5zaXRpb24oMCk7XG4gICAgICBzd2lwZXIudG91Y2hFdmVudHNEYXRhLnZlbG9jaXRpZXMubGVuZ3RoID0gMDtcbiAgICAgIHN3aXBlci5mcmVlTW9kZS5vblRvdWNoRW5kKHtcbiAgICAgICAgY3VycmVudFBvczogc3dpcGVyLnJ0bCA/IHN3aXBlci50cmFuc2xhdGUgOiAtc3dpcGVyLnRyYW5zbGF0ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKCkge1xuICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY3NzTW9kZSkgcmV0dXJuO1xuICAgICAgY29uc3Qge1xuICAgICAgICB0b3VjaEV2ZW50c0RhdGE6IGRhdGEsXG4gICAgICAgIHRvdWNoZXNcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICAvLyBWZWxvY2l0eVxuICAgICAgaWYgKGRhdGEudmVsb2NpdGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGF0YS52ZWxvY2l0aWVzLnB1c2goe1xuICAgICAgICAgIHBvc2l0aW9uOiB0b3VjaGVzW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdzdGFydFgnIDogJ3N0YXJ0WSddLFxuICAgICAgICAgIHRpbWU6IGRhdGEudG91Y2hTdGFydFRpbWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBkYXRhLnZlbG9jaXRpZXMucHVzaCh7XG4gICAgICAgIHBvc2l0aW9uOiB0b3VjaGVzW3N3aXBlci5pc0hvcml6b250YWwoKSA/ICdjdXJyZW50WCcgOiAnY3VycmVudFknXSxcbiAgICAgICAgdGltZTogbm93KClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblRvdWNoRW5kKF9yZWYyKSB7XG4gICAgICBsZXQge1xuICAgICAgICBjdXJyZW50UG9zXG4gICAgICB9ID0gX3JlZjI7XG4gICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSByZXR1cm47XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgd3JhcHBlckVsLFxuICAgICAgICBydGxUcmFuc2xhdGU6IHJ0bCxcbiAgICAgICAgc25hcEdyaWQsXG4gICAgICAgIHRvdWNoRXZlbnRzRGF0YTogZGF0YVxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIC8vIFRpbWUgZGlmZlxuICAgICAgY29uc3QgdG91Y2hFbmRUaW1lID0gbm93KCk7XG4gICAgICBjb25zdCB0aW1lRGlmZiA9IHRvdWNoRW5kVGltZSAtIGRhdGEudG91Y2hTdGFydFRpbWU7XG4gICAgICBpZiAoY3VycmVudFBvcyA8IC1zd2lwZXIubWluVHJhbnNsYXRlKCkpIHtcbiAgICAgICAgc3dpcGVyLnNsaWRlVG8oc3dpcGVyLmFjdGl2ZUluZGV4KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRQb3MgPiAtc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSB7XG4gICAgICAgIGlmIChzd2lwZXIuc2xpZGVzLmxlbmd0aCA8IHNuYXBHcmlkLmxlbmd0aCkge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHNuYXBHcmlkLmxlbmd0aCAtIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3aXBlci5zbGlkZVRvKHN3aXBlci5zbGlkZXMubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bSkge1xuICAgICAgICBpZiAoZGF0YS52ZWxvY2l0aWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBjb25zdCBsYXN0TW92ZUV2ZW50ID0gZGF0YS52ZWxvY2l0aWVzLnBvcCgpO1xuICAgICAgICAgIGNvbnN0IHZlbG9jaXR5RXZlbnQgPSBkYXRhLnZlbG9jaXRpZXMucG9wKCk7XG4gICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBsYXN0TW92ZUV2ZW50LnBvc2l0aW9uIC0gdmVsb2NpdHlFdmVudC5wb3NpdGlvbjtcbiAgICAgICAgICBjb25zdCB0aW1lID0gbGFzdE1vdmVFdmVudC50aW1lIC0gdmVsb2NpdHlFdmVudC50aW1lO1xuICAgICAgICAgIHN3aXBlci52ZWxvY2l0eSA9IGRpc3RhbmNlIC8gdGltZTtcbiAgICAgICAgICBzd2lwZXIudmVsb2NpdHkgLz0gMjtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoc3dpcGVyLnZlbG9jaXR5KSA8IHBhcmFtcy5mcmVlTW9kZS5taW5pbXVtVmVsb2NpdHkpIHtcbiAgICAgICAgICAgIHN3aXBlci52ZWxvY2l0eSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHRoaXMgaW1wbGllcyB0aGF0IHRoZSB1c2VyIHN0b3BwZWQgbW92aW5nIGEgZmluZ2VyIHRoZW4gcmVsZWFzZWQuXG4gICAgICAgICAgLy8gVGhlcmUgd291bGQgYmUgbm8gZXZlbnRzIHdpdGggZGlzdGFuY2UgemVybywgc28gdGhlIGxhc3QgZXZlbnQgaXMgc3RhbGUuXG4gICAgICAgICAgaWYgKHRpbWUgPiAxNTAgfHwgbm93KCkgLSBsYXN0TW92ZUV2ZW50LnRpbWUgPiAzMDApIHtcbiAgICAgICAgICAgIHN3aXBlci52ZWxvY2l0eSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3aXBlci52ZWxvY2l0eSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgc3dpcGVyLnZlbG9jaXR5ICo9IHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bVZlbG9jaXR5UmF0aW87XG4gICAgICAgIGRhdGEudmVsb2NpdGllcy5sZW5ndGggPSAwO1xuICAgICAgICBsZXQgbW9tZW50dW1EdXJhdGlvbiA9IDEwMDAgKiBwYXJhbXMuZnJlZU1vZGUubW9tZW50dW1SYXRpbztcbiAgICAgICAgY29uc3QgbW9tZW50dW1EaXN0YW5jZSA9IHN3aXBlci52ZWxvY2l0eSAqIG1vbWVudHVtRHVyYXRpb247XG4gICAgICAgIGxldCBuZXdQb3NpdGlvbiA9IHN3aXBlci50cmFuc2xhdGUgKyBtb21lbnR1bURpc3RhbmNlO1xuICAgICAgICBpZiAocnRsKSBuZXdQb3NpdGlvbiA9IC1uZXdQb3NpdGlvbjtcbiAgICAgICAgbGV0IGRvQm91bmNlID0gZmFsc2U7XG4gICAgICAgIGxldCBhZnRlckJvdW5jZVBvc2l0aW9uO1xuICAgICAgICBjb25zdCBib3VuY2VBbW91bnQgPSBNYXRoLmFicyhzd2lwZXIudmVsb2NpdHkpICogMjAgKiBwYXJhbXMuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2VSYXRpbztcbiAgICAgICAgbGV0IG5lZWRzTG9vcEZpeDtcbiAgICAgICAgaWYgKG5ld1Bvc2l0aW9uIDwgc3dpcGVyLm1heFRyYW5zbGF0ZSgpKSB7XG4gICAgICAgICAgaWYgKHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bUJvdW5jZSkge1xuICAgICAgICAgICAgaWYgKG5ld1Bvc2l0aW9uICsgc3dpcGVyLm1heFRyYW5zbGF0ZSgpIDwgLWJvdW5jZUFtb3VudCkge1xuICAgICAgICAgICAgICBuZXdQb3NpdGlvbiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKSAtIGJvdW5jZUFtb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFmdGVyQm91bmNlUG9zaXRpb24gPSBzd2lwZXIubWF4VHJhbnNsYXRlKCk7XG4gICAgICAgICAgICBkb0JvdW5jZSA9IHRydWU7XG4gICAgICAgICAgICBkYXRhLmFsbG93TW9tZW50dW1Cb3VuY2UgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdQb3NpdGlvbiA9IHN3aXBlci5tYXhUcmFuc2xhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHBhcmFtcy5sb29wICYmIHBhcmFtcy5jZW50ZXJlZFNsaWRlcykgbmVlZHNMb29wRml4ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdQb3NpdGlvbiA+IHN3aXBlci5taW5UcmFuc2xhdGUoKSkge1xuICAgICAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUubW9tZW50dW1Cb3VuY2UpIHtcbiAgICAgICAgICAgIGlmIChuZXdQb3NpdGlvbiAtIHN3aXBlci5taW5UcmFuc2xhdGUoKSA+IGJvdW5jZUFtb3VudCkge1xuICAgICAgICAgICAgICBuZXdQb3NpdGlvbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKSArIGJvdW5jZUFtb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFmdGVyQm91bmNlUG9zaXRpb24gPSBzd2lwZXIubWluVHJhbnNsYXRlKCk7XG4gICAgICAgICAgICBkb0JvdW5jZSA9IHRydWU7XG4gICAgICAgICAgICBkYXRhLmFsbG93TW9tZW50dW1Cb3VuY2UgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdQb3NpdGlvbiA9IHN3aXBlci5taW5UcmFuc2xhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHBhcmFtcy5sb29wICYmIHBhcmFtcy5jZW50ZXJlZFNsaWRlcykgbmVlZHNMb29wRml4ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgbGV0IG5leHRTbGlkZTtcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNuYXBHcmlkLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgICAgICBpZiAoc25hcEdyaWRbal0gPiAtbmV3UG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgbmV4dFNsaWRlID0gajtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChNYXRoLmFicyhzbmFwR3JpZFtuZXh0U2xpZGVdIC0gbmV3UG9zaXRpb24pIDwgTWF0aC5hYnMoc25hcEdyaWRbbmV4dFNsaWRlIC0gMV0gLSBuZXdQb3NpdGlvbikgfHwgc3dpcGVyLnN3aXBlRGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgIG5ld1Bvc2l0aW9uID0gc25hcEdyaWRbbmV4dFNsaWRlXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBzbmFwR3JpZFtuZXh0U2xpZGUgLSAxXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3UG9zaXRpb24gPSAtbmV3UG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lZWRzTG9vcEZpeCkge1xuICAgICAgICAgIG9uY2UoJ3RyYW5zaXRpb25FbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICBzd2lwZXIubG9vcEZpeCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpeCBkdXJhdGlvblxuICAgICAgICBpZiAoc3dpcGVyLnZlbG9jaXR5ICE9PSAwKSB7XG4gICAgICAgICAgaWYgKHJ0bCkge1xuICAgICAgICAgICAgbW9tZW50dW1EdXJhdGlvbiA9IE1hdGguYWJzKCgtbmV3UG9zaXRpb24gLSBzd2lwZXIudHJhbnNsYXRlKSAvIHN3aXBlci52ZWxvY2l0eSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vbWVudHVtRHVyYXRpb24gPSBNYXRoLmFicygobmV3UG9zaXRpb24gLSBzd2lwZXIudHJhbnNsYXRlKSAvIHN3aXBlci52ZWxvY2l0eSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwYXJhbXMuZnJlZU1vZGUuc3RpY2t5KSB7XG4gICAgICAgICAgICAvLyBJZiBmcmVlTW9kZS5zdGlja3kgaXMgYWN0aXZlIGFuZCB0aGUgdXNlciBlbmRzIGEgc3dpcGUgd2l0aCBhIHNsb3ctdmVsb2NpdHlcbiAgICAgICAgICAgIC8vIGV2ZW50LCB0aGVuIGR1cmF0aW9ucyBjYW4gYmUgMjArIHNlY29uZHMgdG8gc2xpZGUgb25lIChvciB6ZXJvISkgc2xpZGVzLlxuICAgICAgICAgICAgLy8gSXQncyBlYXN5IHRvIHNlZSB0aGlzIHdoZW4gc2ltdWxhdGluZyB0b3VjaCB3aXRoIG1vdXNlIGV2ZW50cy4gVG8gZml4IHRoaXMsXG4gICAgICAgICAgICAvLyBsaW1pdCBzaW5nbGUtc2xpZGUgc3dpcGVzIHRvIHRoZSBkZWZhdWx0IHNsaWRlIGR1cmF0aW9uLiBUaGlzIGFsc28gaGFzIHRoZVxuICAgICAgICAgICAgLy8gbmljZSBzaWRlIGVmZmVjdCBvZiBtYXRjaGluZyBzbGlkZSBzcGVlZCBpZiB0aGUgdXNlciBzdG9wcGVkIG1vdmluZyBiZWZvcmVcbiAgICAgICAgICAgIC8vIGxpZnRpbmcgZmluZ2VyIG9yIG1vdXNlIHZzLiBtb3Zpbmcgc2xvd2x5IGJlZm9yZSBsaWZ0aW5nIHRoZSBmaW5nZXIvbW91c2UuXG4gICAgICAgICAgICAvLyBGb3IgZmFzdGVyIHN3aXBlcywgYWxzbyBhcHBseSBsaW1pdHMgKGFsYmVpdCBoaWdoZXIgb25lcykuXG4gICAgICAgICAgICBjb25zdCBtb3ZlRGlzdGFuY2UgPSBNYXRoLmFicygocnRsID8gLW5ld1Bvc2l0aW9uIDogbmV3UG9zaXRpb24pIC0gc3dpcGVyLnRyYW5zbGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2xpZGVTaXplID0gc3dpcGVyLnNsaWRlc1NpemVzR3JpZFtzd2lwZXIuYWN0aXZlSW5kZXhdO1xuICAgICAgICAgICAgaWYgKG1vdmVEaXN0YW5jZSA8IGN1cnJlbnRTbGlkZVNpemUpIHtcbiAgICAgICAgICAgICAgbW9tZW50dW1EdXJhdGlvbiA9IHBhcmFtcy5zcGVlZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobW92ZURpc3RhbmNlIDwgMiAqIGN1cnJlbnRTbGlkZVNpemUpIHtcbiAgICAgICAgICAgICAgbW9tZW50dW1EdXJhdGlvbiA9IHBhcmFtcy5zcGVlZCAqIDEuNTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1vbWVudHVtRHVyYXRpb24gPSBwYXJhbXMuc3BlZWQgKiAyLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5mcmVlTW9kZS5zdGlja3kpIHtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVUb0Nsb3Nlc3QoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5mcmVlTW9kZS5tb21lbnR1bUJvdW5jZSAmJiBkb0JvdW5jZSkge1xuICAgICAgICAgIHN3aXBlci51cGRhdGVQcm9ncmVzcyhhZnRlckJvdW5jZVBvc2l0aW9uKTtcbiAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihtb21lbnR1bUR1cmF0aW9uKTtcbiAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgICBzd2lwZXIudHJhbnNpdGlvblN0YXJ0KHRydWUsIHN3aXBlci5zd2lwZURpcmVjdGlvbik7XG4gICAgICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgZWxlbWVudFRyYW5zaXRpb25FbmQod3JhcHBlckVsLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkIHx8ICFkYXRhLmFsbG93TW9tZW50dW1Cb3VuY2UpIHJldHVybjtcbiAgICAgICAgICAgIGVtaXQoJ21vbWVudHVtQm91bmNlJyk7XG4gICAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihwYXJhbXMuc3BlZWQpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHN3aXBlci5zZXRUcmFuc2xhdGUoYWZ0ZXJCb3VuY2VQb3NpdGlvbik7XG4gICAgICAgICAgICAgIGVsZW1lbnRUcmFuc2l0aW9uRW5kKHdyYXBwZXJFbCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc3dpcGVyIHx8IHN3aXBlci5kZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBzd2lwZXIudHJhbnNpdGlvbkVuZCgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHN3aXBlci52ZWxvY2l0eSkge1xuICAgICAgICAgIGVtaXQoJ19mcmVlTW9kZU5vTW9tZW50dW1SZWxlYXNlJyk7XG4gICAgICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNpdGlvbihtb21lbnR1bUR1cmF0aW9uKTtcbiAgICAgICAgICBzd2lwZXIuc2V0VHJhbnNsYXRlKG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgICBzd2lwZXIudHJhbnNpdGlvblN0YXJ0KHRydWUsIHN3aXBlci5zd2lwZURpcmVjdGlvbik7XG4gICAgICAgICAgaWYgKCFzd2lwZXIuYW5pbWF0aW5nKSB7XG4gICAgICAgICAgICBzd2lwZXIuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsZW1lbnRUcmFuc2l0aW9uRW5kKHdyYXBwZXJFbCwgKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgICAgICAgIHN3aXBlci50cmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3dpcGVyLnVwZGF0ZVByb2dyZXNzKG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBzd2lwZXIudXBkYXRlQWN0aXZlSW5kZXgoKTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZVNsaWRlc0NsYXNzZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAocGFyYW1zLmZyZWVNb2RlLnN0aWNreSkge1xuICAgICAgICBzd2lwZXIuc2xpZGVUb0Nsb3Nlc3QoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmIChwYXJhbXMuZnJlZU1vZGUpIHtcbiAgICAgICAgZW1pdCgnX2ZyZWVNb2RlTm9Nb21lbnR1bVJlbGVhc2UnKTtcbiAgICAgIH1cbiAgICAgIGlmICghcGFyYW1zLmZyZWVNb2RlLm1vbWVudHVtIHx8IHRpbWVEaWZmID49IHBhcmFtcy5sb25nU3dpcGVzTXMpIHtcbiAgICAgICAgZW1pdCgnX2ZyZWVNb2RlU3RhdGljUmVsZWFzZScpO1xuICAgICAgICBzd2lwZXIudXBkYXRlUHJvZ3Jlc3MoKTtcbiAgICAgICAgc3dpcGVyLnVwZGF0ZUFjdGl2ZUluZGV4KCk7XG4gICAgICAgIHN3aXBlci51cGRhdGVTbGlkZXNDbGFzc2VzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLCB7XG4gICAgICBmcmVlTW9kZToge1xuICAgICAgICBvblRvdWNoU3RhcnQsXG4gICAgICAgIG9uVG91Y2hNb3ZlLFxuICAgICAgICBvblRvdWNoRW5kXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBHcmlkKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgZ3JpZDoge1xuICAgICAgICByb3dzOiAxLFxuICAgICAgICBmaWxsOiAnY29sdW1uJ1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxldCBzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzO1xuICAgIGxldCBzbGlkZXNQZXJSb3c7XG4gICAgbGV0IG51bUZ1bGxDb2x1bW5zO1xuICAgIGxldCB3YXNNdWx0aVJvdztcbiAgICBjb25zdCBnZXRTcGFjZUJldHdlZW4gPSAoKSA9PiB7XG4gICAgICBsZXQgc3BhY2VCZXR3ZWVuID0gc3dpcGVyLnBhcmFtcy5zcGFjZUJldHdlZW47XG4gICAgICBpZiAodHlwZW9mIHNwYWNlQmV0d2VlbiA9PT0gJ3N0cmluZycgJiYgc3BhY2VCZXR3ZWVuLmluZGV4T2YoJyUnKSA+PSAwKSB7XG4gICAgICAgIHNwYWNlQmV0d2VlbiA9IHBhcnNlRmxvYXQoc3BhY2VCZXR3ZWVuLnJlcGxhY2UoJyUnLCAnJykpIC8gMTAwICogc3dpcGVyLnNpemU7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcGFjZUJldHdlZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNwYWNlQmV0d2VlbiA9IHBhcnNlRmxvYXQoc3BhY2VCZXR3ZWVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzcGFjZUJldHdlZW47XG4gICAgfTtcbiAgICBjb25zdCBpbml0U2xpZGVzID0gc2xpZGVzID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzUGVyVmlld1xuICAgICAgfSA9IHN3aXBlci5wYXJhbXM7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHJvd3MsXG4gICAgICAgIGZpbGxcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zLmdyaWQ7XG4gICAgICBjb25zdCBzbGlkZXNMZW5ndGggPSBzd2lwZXIudmlydHVhbCAmJiBzd2lwZXIucGFyYW1zLnZpcnR1YWwuZW5hYmxlZCA/IHN3aXBlci52aXJ0dWFsLnNsaWRlcy5sZW5ndGggOiBzbGlkZXMubGVuZ3RoO1xuICAgICAgbnVtRnVsbENvbHVtbnMgPSBNYXRoLmZsb29yKHNsaWRlc0xlbmd0aCAvIHJvd3MpO1xuICAgICAgaWYgKE1hdGguZmxvb3Ioc2xpZGVzTGVuZ3RoIC8gcm93cykgPT09IHNsaWRlc0xlbmd0aCAvIHJvd3MpIHtcbiAgICAgICAgc2xpZGVzTnVtYmVyRXZlblRvUm93cyA9IHNsaWRlc0xlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MgPSBNYXRoLmNlaWwoc2xpZGVzTGVuZ3RoIC8gcm93cykgKiByb3dzO1xuICAgICAgfVxuICAgICAgaWYgKHNsaWRlc1BlclZpZXcgIT09ICdhdXRvJyAmJiBmaWxsID09PSAncm93Jykge1xuICAgICAgICBzbGlkZXNOdW1iZXJFdmVuVG9Sb3dzID0gTWF0aC5tYXgoc2xpZGVzTnVtYmVyRXZlblRvUm93cywgc2xpZGVzUGVyVmlldyAqIHJvd3MpO1xuICAgICAgfVxuICAgICAgc2xpZGVzUGVyUm93ID0gc2xpZGVzTnVtYmVyRXZlblRvUm93cyAvIHJvd3M7XG4gICAgfTtcbiAgICBjb25zdCB1bnNldFNsaWRlcyA9ICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIuc2xpZGVzKSB7XG4gICAgICAgIHN3aXBlci5zbGlkZXMuZm9yRWFjaChzbGlkZSA9PiB7XG4gICAgICAgICAgaWYgKHNsaWRlLnN3aXBlclNsaWRlR3JpZFNldCkge1xuICAgICAgICAgICAgc2xpZGUuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICBzbGlkZS5zdHlsZVtzd2lwZXIuZ2V0RGlyZWN0aW9uTGFiZWwoJ21hcmdpbi10b3AnKV0gPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdXBkYXRlU2xpZGUgPSAoaSwgc2xpZGUsIHNsaWRlcykgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZXNQZXJHcm91cFxuICAgICAgfSA9IHN3aXBlci5wYXJhbXM7XG4gICAgICBjb25zdCBzcGFjZUJldHdlZW4gPSBnZXRTcGFjZUJldHdlZW4oKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcm93cyxcbiAgICAgICAgZmlsbFxuICAgICAgfSA9IHN3aXBlci5wYXJhbXMuZ3JpZDtcbiAgICAgIGNvbnN0IHNsaWRlc0xlbmd0aCA9IHN3aXBlci52aXJ0dWFsICYmIHN3aXBlci5wYXJhbXMudmlydHVhbC5lbmFibGVkID8gc3dpcGVyLnZpcnR1YWwuc2xpZGVzLmxlbmd0aCA6IHNsaWRlcy5sZW5ndGg7XG4gICAgICAvLyBTZXQgc2xpZGVzIG9yZGVyXG4gICAgICBsZXQgbmV3U2xpZGVPcmRlckluZGV4O1xuICAgICAgbGV0IGNvbHVtbjtcbiAgICAgIGxldCByb3c7XG4gICAgICBpZiAoZmlsbCA9PT0gJ3JvdycgJiYgc2xpZGVzUGVyR3JvdXAgPiAxKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBNYXRoLmZsb29yKGkgLyAoc2xpZGVzUGVyR3JvdXAgKiByb3dzKSk7XG4gICAgICAgIGNvbnN0IHNsaWRlSW5kZXhJbkdyb3VwID0gaSAtIHJvd3MgKiBzbGlkZXNQZXJHcm91cCAqIGdyb3VwSW5kZXg7XG4gICAgICAgIGNvbnN0IGNvbHVtbnNJbkdyb3VwID0gZ3JvdXBJbmRleCA9PT0gMCA/IHNsaWRlc1Blckdyb3VwIDogTWF0aC5taW4oTWF0aC5jZWlsKChzbGlkZXNMZW5ndGggLSBncm91cEluZGV4ICogcm93cyAqIHNsaWRlc1Blckdyb3VwKSAvIHJvd3MpLCBzbGlkZXNQZXJHcm91cCk7XG4gICAgICAgIHJvdyA9IE1hdGguZmxvb3Ioc2xpZGVJbmRleEluR3JvdXAgLyBjb2x1bW5zSW5Hcm91cCk7XG4gICAgICAgIGNvbHVtbiA9IHNsaWRlSW5kZXhJbkdyb3VwIC0gcm93ICogY29sdW1uc0luR3JvdXAgKyBncm91cEluZGV4ICogc2xpZGVzUGVyR3JvdXA7XG4gICAgICAgIG5ld1NsaWRlT3JkZXJJbmRleCA9IGNvbHVtbiArIHJvdyAqIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3MgLyByb3dzO1xuICAgICAgICBzbGlkZS5zdHlsZS5vcmRlciA9IG5ld1NsaWRlT3JkZXJJbmRleDtcbiAgICAgIH0gZWxzZSBpZiAoZmlsbCA9PT0gJ2NvbHVtbicpIHtcbiAgICAgICAgY29sdW1uID0gTWF0aC5mbG9vcihpIC8gcm93cyk7XG4gICAgICAgIHJvdyA9IGkgLSBjb2x1bW4gKiByb3dzO1xuICAgICAgICBpZiAoY29sdW1uID4gbnVtRnVsbENvbHVtbnMgfHwgY29sdW1uID09PSBudW1GdWxsQ29sdW1ucyAmJiByb3cgPT09IHJvd3MgLSAxKSB7XG4gICAgICAgICAgcm93ICs9IDE7XG4gICAgICAgICAgaWYgKHJvdyA+PSByb3dzKSB7XG4gICAgICAgICAgICByb3cgPSAwO1xuICAgICAgICAgICAgY29sdW1uICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb3cgPSBNYXRoLmZsb29yKGkgLyBzbGlkZXNQZXJSb3cpO1xuICAgICAgICBjb2x1bW4gPSBpIC0gcm93ICogc2xpZGVzUGVyUm93O1xuICAgICAgfVxuICAgICAgc2xpZGUucm93ID0gcm93O1xuICAgICAgc2xpZGUuY29sdW1uID0gY29sdW1uO1xuICAgICAgc2xpZGUuc3R5bGUuaGVpZ2h0ID0gYGNhbGMoKDEwMCUgLSAkeyhyb3dzIC0gMSkgKiBzcGFjZUJldHdlZW59cHgpIC8gJHtyb3dzfSlgO1xuICAgICAgc2xpZGUuc3R5bGVbc3dpcGVyLmdldERpcmVjdGlvbkxhYmVsKCdtYXJnaW4tdG9wJyldID0gcm93ICE9PSAwID8gc3BhY2VCZXR3ZWVuICYmIGAke3NwYWNlQmV0d2Vlbn1weGAgOiAnJztcbiAgICAgIHNsaWRlLnN3aXBlclNsaWRlR3JpZFNldCA9IHRydWU7XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVXcmFwcGVyU2l6ZSA9IChzbGlkZVNpemUsIHNuYXBHcmlkKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNlbnRlcmVkU2xpZGVzLFxuICAgICAgICByb3VuZExlbmd0aHNcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zO1xuICAgICAgY29uc3Qgc3BhY2VCZXR3ZWVuID0gZ2V0U3BhY2VCZXR3ZWVuKCk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHJvd3NcbiAgICAgIH0gPSBzd2lwZXIucGFyYW1zLmdyaWQ7XG4gICAgICBzd2lwZXIudmlydHVhbFNpemUgPSAoc2xpZGVTaXplICsgc3BhY2VCZXR3ZWVuKSAqIHNsaWRlc051bWJlckV2ZW5Ub1Jvd3M7XG4gICAgICBzd2lwZXIudmlydHVhbFNpemUgPSBNYXRoLmNlaWwoc3dpcGVyLnZpcnR1YWxTaXplIC8gcm93cykgLSBzcGFjZUJldHdlZW47XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICBzd2lwZXIud3JhcHBlckVsLnN0eWxlW3N3aXBlci5nZXREaXJlY3Rpb25MYWJlbCgnd2lkdGgnKV0gPSBgJHtzd2lwZXIudmlydHVhbFNpemUgKyBzcGFjZUJldHdlZW59cHhgO1xuICAgICAgfVxuICAgICAgaWYgKGNlbnRlcmVkU2xpZGVzKSB7XG4gICAgICAgIGNvbnN0IG5ld1NsaWRlc0dyaWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbmFwR3JpZC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGxldCBzbGlkZXNHcmlkSXRlbSA9IHNuYXBHcmlkW2ldO1xuICAgICAgICAgIGlmIChyb3VuZExlbmd0aHMpIHNsaWRlc0dyaWRJdGVtID0gTWF0aC5mbG9vcihzbGlkZXNHcmlkSXRlbSk7XG4gICAgICAgICAgaWYgKHNuYXBHcmlkW2ldIDwgc3dpcGVyLnZpcnR1YWxTaXplICsgc25hcEdyaWRbMF0pIG5ld1NsaWRlc0dyaWQucHVzaChzbGlkZXNHcmlkSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgc25hcEdyaWQuc3BsaWNlKDAsIHNuYXBHcmlkLmxlbmd0aCk7XG4gICAgICAgIHNuYXBHcmlkLnB1c2goLi4ubmV3U2xpZGVzR3JpZCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvbkluaXQgPSAoKSA9PiB7XG4gICAgICB3YXNNdWx0aVJvdyA9IHN3aXBlci5wYXJhbXMuZ3JpZCAmJiBzd2lwZXIucGFyYW1zLmdyaWQucm93cyA+IDE7XG4gICAgfTtcbiAgICBjb25zdCBvblVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBlbFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IGlzTXVsdGlSb3cgPSBwYXJhbXMuZ3JpZCAmJiBwYXJhbXMuZ3JpZC5yb3dzID4gMTtcbiAgICAgIGlmICh3YXNNdWx0aVJvdyAmJiAhaXNNdWx0aVJvdykge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGAke3BhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfWdyaWRgLCBgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkLWNvbHVtbmApO1xuICAgICAgICBudW1GdWxsQ29sdW1ucyA9IDE7XG4gICAgICAgIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICAgICAgfSBlbHNlIGlmICghd2FzTXVsdGlSb3cgJiYgaXNNdWx0aVJvdykge1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGAke3BhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfWdyaWRgKTtcbiAgICAgICAgaWYgKHBhcmFtcy5ncmlkLmZpbGwgPT09ICdjb2x1bW4nKSB7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChgJHtwYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc31ncmlkLWNvbHVtbmApO1xuICAgICAgICB9XG4gICAgICAgIHN3aXBlci5lbWl0Q29udGFpbmVyQ2xhc3NlcygpO1xuICAgICAgfVxuICAgICAgd2FzTXVsdGlSb3cgPSBpc011bHRpUm93O1xuICAgIH07XG4gICAgb24oJ2luaXQnLCBvbkluaXQpO1xuICAgIG9uKCd1cGRhdGUnLCBvblVwZGF0ZSk7XG4gICAgc3dpcGVyLmdyaWQgPSB7XG4gICAgICBpbml0U2xpZGVzLFxuICAgICAgdW5zZXRTbGlkZXMsXG4gICAgICB1cGRhdGVTbGlkZSxcbiAgICAgIHVwZGF0ZVdyYXBwZXJTaXplXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGVuZFNsaWRlKHNsaWRlcykge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgc2xpZGVzRWxcbiAgICB9ID0gc3dpcGVyO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgfVxuICAgIGNvbnN0IGFwcGVuZEVsZW1lbnQgPSBzbGlkZUVsID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygc2xpZGVFbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgdGVtcERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0ZW1wRE9NLmlubmVySFRNTCA9IHNsaWRlRWw7XG4gICAgICAgIHNsaWRlc0VsLmFwcGVuZCh0ZW1wRE9NLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgdGVtcERPTS5pbm5lckhUTUwgPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlc0VsLmFwcGVuZChzbGlkZUVsKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmICh0eXBlb2Ygc2xpZGVzID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBzbGlkZXMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChzbGlkZXNbaV0pIGFwcGVuZEVsZW1lbnQoc2xpZGVzW2ldKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXBwZW5kRWxlbWVudChzbGlkZXMpO1xuICAgIH1cbiAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICAgIH1cbiAgICBpZiAoIXBhcmFtcy5vYnNlcnZlciB8fCBzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICBzd2lwZXIudXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcHJlcGVuZFNsaWRlKHNsaWRlcykge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICBzbGlkZXNFbFxuICAgIH0gPSBzd2lwZXI7XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXIubG9vcERlc3Ryb3koKTtcbiAgICB9XG4gICAgbGV0IG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlSW5kZXggKyAxO1xuICAgIGNvbnN0IHByZXBlbmRFbGVtZW50ID0gc2xpZGVFbCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHNsaWRlRWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IHRlbXBET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGVtcERPTS5pbm5lckhUTUwgPSBzbGlkZUVsO1xuICAgICAgICBzbGlkZXNFbC5wcmVwZW5kKHRlbXBET00uY2hpbGRyZW5bMF0pO1xuICAgICAgICB0ZW1wRE9NLmlubmVySFRNTCA9ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVzRWwucHJlcGVuZChzbGlkZUVsKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmICh0eXBlb2Ygc2xpZGVzID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBzbGlkZXMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChzbGlkZXNbaV0pIHByZXBlbmRFbGVtZW50KHNsaWRlc1tpXSk7XG4gICAgICB9XG4gICAgICBuZXdBY3RpdmVJbmRleCA9IGFjdGl2ZUluZGV4ICsgc2xpZGVzLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlcGVuZEVsZW1lbnQoc2xpZGVzKTtcbiAgICB9XG4gICAgc3dpcGVyLnJlY2FsY1NsaWRlcygpO1xuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLmxvb3BDcmVhdGUoKTtcbiAgICB9XG4gICAgaWYgKCFwYXJhbXMub2JzZXJ2ZXIgfHwgc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgc3dpcGVyLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBzd2lwZXIuc2xpZGVUbyhuZXdBY3RpdmVJbmRleCwgMCwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkU2xpZGUoaW5kZXgsIHNsaWRlcykge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zLFxuICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICBzbGlkZXNFbFxuICAgIH0gPSBzd2lwZXI7XG4gICAgbGV0IGFjdGl2ZUluZGV4QnVmZmVyID0gYWN0aXZlSW5kZXg7XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBhY3RpdmVJbmRleEJ1ZmZlciAtPSBzd2lwZXIubG9vcGVkU2xpZGVzO1xuICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgfVxuICAgIGNvbnN0IGJhc2VMZW5ndGggPSBzd2lwZXIuc2xpZGVzLmxlbmd0aDtcbiAgICBpZiAoaW5kZXggPD0gMCkge1xuICAgICAgc3dpcGVyLnByZXBlbmRTbGlkZShzbGlkZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaW5kZXggPj0gYmFzZUxlbmd0aCkge1xuICAgICAgc3dpcGVyLmFwcGVuZFNsaWRlKHNsaWRlcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZXdBY3RpdmVJbmRleCA9IGFjdGl2ZUluZGV4QnVmZmVyID4gaW5kZXggPyBhY3RpdmVJbmRleEJ1ZmZlciArIDEgOiBhY3RpdmVJbmRleEJ1ZmZlcjtcbiAgICBjb25zdCBzbGlkZXNCdWZmZXIgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gYmFzZUxlbmd0aCAtIDE7IGkgPj0gaW5kZXg7IGkgLT0gMSkge1xuICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gc3dpcGVyLnNsaWRlc1tpXTtcbiAgICAgIGN1cnJlbnRTbGlkZS5yZW1vdmUoKTtcbiAgICAgIHNsaWRlc0J1ZmZlci51bnNoaWZ0KGN1cnJlbnRTbGlkZSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2xpZGVzID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBzbGlkZXMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChzbGlkZXNbaV0pIHNsaWRlc0VsLmFwcGVuZChzbGlkZXNbaV0pO1xuICAgICAgfVxuICAgICAgbmV3QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleEJ1ZmZlciA+IGluZGV4ID8gYWN0aXZlSW5kZXhCdWZmZXIgKyBzbGlkZXMubGVuZ3RoIDogYWN0aXZlSW5kZXhCdWZmZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlc0VsLmFwcGVuZChzbGlkZXMpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlc0J1ZmZlci5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgc2xpZGVzRWwuYXBwZW5kKHNsaWRlc0J1ZmZlcltpXSk7XG4gICAgfVxuICAgIHN3aXBlci5yZWNhbGNTbGlkZXMoKTtcbiAgICBpZiAocGFyYW1zLmxvb3ApIHtcbiAgICAgIHN3aXBlci5sb29wQ3JlYXRlKCk7XG4gICAgfVxuICAgIGlmICghcGFyYW1zLm9ic2VydmVyIHx8IHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgIHN3aXBlci51cGRhdGUoKTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXIuc2xpZGVUbyhuZXdBY3RpdmVJbmRleCArIHN3aXBlci5sb29wZWRTbGlkZXMsIDAsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpcGVyLnNsaWRlVG8obmV3QWN0aXZlSW5kZXgsIDAsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVTbGlkZShzbGlkZXNJbmRleGVzKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBwYXJhbXMsXG4gICAgICBhY3RpdmVJbmRleFxuICAgIH0gPSBzd2lwZXI7XG4gICAgbGV0IGFjdGl2ZUluZGV4QnVmZmVyID0gYWN0aXZlSW5kZXg7XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBhY3RpdmVJbmRleEJ1ZmZlciAtPSBzd2lwZXIubG9vcGVkU2xpZGVzO1xuICAgICAgc3dpcGVyLmxvb3BEZXN0cm95KCk7XG4gICAgfVxuICAgIGxldCBuZXdBY3RpdmVJbmRleCA9IGFjdGl2ZUluZGV4QnVmZmVyO1xuICAgIGxldCBpbmRleFRvUmVtb3ZlO1xuICAgIGlmICh0eXBlb2Ygc2xpZGVzSW5kZXhlcyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gc2xpZGVzSW5kZXhlcykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXNJbmRleGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGluZGV4VG9SZW1vdmUgPSBzbGlkZXNJbmRleGVzW2ldO1xuICAgICAgICBpZiAoc3dpcGVyLnNsaWRlc1tpbmRleFRvUmVtb3ZlXSkgc3dpcGVyLnNsaWRlc1tpbmRleFRvUmVtb3ZlXS5yZW1vdmUoKTtcbiAgICAgICAgaWYgKGluZGV4VG9SZW1vdmUgPCBuZXdBY3RpdmVJbmRleCkgbmV3QWN0aXZlSW5kZXggLT0gMTtcbiAgICAgIH1cbiAgICAgIG5ld0FjdGl2ZUluZGV4ID0gTWF0aC5tYXgobmV3QWN0aXZlSW5kZXgsIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbmRleFRvUmVtb3ZlID0gc2xpZGVzSW5kZXhlcztcbiAgICAgIGlmIChzd2lwZXIuc2xpZGVzW2luZGV4VG9SZW1vdmVdKSBzd2lwZXIuc2xpZGVzW2luZGV4VG9SZW1vdmVdLnJlbW92ZSgpO1xuICAgICAgaWYgKGluZGV4VG9SZW1vdmUgPCBuZXdBY3RpdmVJbmRleCkgbmV3QWN0aXZlSW5kZXggLT0gMTtcbiAgICAgIG5ld0FjdGl2ZUluZGV4ID0gTWF0aC5tYXgobmV3QWN0aXZlSW5kZXgsIDApO1xuICAgIH1cbiAgICBzd2lwZXIucmVjYWxjU2xpZGVzKCk7XG4gICAgaWYgKHBhcmFtcy5sb29wKSB7XG4gICAgICBzd2lwZXIubG9vcENyZWF0ZSgpO1xuICAgIH1cbiAgICBpZiAoIXBhcmFtcy5vYnNlcnZlciB8fCBzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICBzd2lwZXIudXBkYXRlKCk7XG4gICAgfVxuICAgIGlmIChwYXJhbXMubG9vcCkge1xuICAgICAgc3dpcGVyLnNsaWRlVG8obmV3QWN0aXZlSW5kZXggKyBzd2lwZXIubG9vcGVkU2xpZGVzLCAwLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXBlci5zbGlkZVRvKG5ld0FjdGl2ZUluZGV4LCAwLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQWxsU2xpZGVzKCkge1xuICAgIGNvbnN0IHN3aXBlciA9IHRoaXM7XG4gICAgY29uc3Qgc2xpZGVzSW5kZXhlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dpcGVyLnNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgc2xpZGVzSW5kZXhlcy5wdXNoKGkpO1xuICAgIH1cbiAgICBzd2lwZXIucmVtb3ZlU2xpZGUoc2xpZGVzSW5kZXhlcyk7XG4gIH1cblxuICBmdW5jdGlvbiBNYW5pcHVsYXRpb24oX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXJcbiAgICB9ID0gX3JlZjtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlciwge1xuICAgICAgYXBwZW5kU2xpZGU6IGFwcGVuZFNsaWRlLmJpbmQoc3dpcGVyKSxcbiAgICAgIHByZXBlbmRTbGlkZTogcHJlcGVuZFNsaWRlLmJpbmQoc3dpcGVyKSxcbiAgICAgIGFkZFNsaWRlOiBhZGRTbGlkZS5iaW5kKHN3aXBlciksXG4gICAgICByZW1vdmVTbGlkZTogcmVtb3ZlU2xpZGUuYmluZChzd2lwZXIpLFxuICAgICAgcmVtb3ZlQWxsU2xpZGVzOiByZW1vdmVBbGxTbGlkZXMuYmluZChzd2lwZXIpXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBlZmZlY3RJbml0KHBhcmFtcykge1xuICAgIGNvbnN0IHtcbiAgICAgIGVmZmVjdCxcbiAgICAgIHN3aXBlcixcbiAgICAgIG9uLFxuICAgICAgc2V0VHJhbnNsYXRlLFxuICAgICAgc2V0VHJhbnNpdGlvbixcbiAgICAgIG92ZXJ3cml0ZVBhcmFtcyxcbiAgICAgIHBlcnNwZWN0aXZlLFxuICAgICAgcmVjcmVhdGVTaGFkb3dzLFxuICAgICAgZ2V0RWZmZWN0UGFyYW1zXG4gICAgfSA9IHBhcmFtcztcbiAgICBvbignYmVmb3JlSW5pdCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgICBzd2lwZXIuY2xhc3NOYW1lcy5wdXNoKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc30ke2VmZmVjdH1gKTtcbiAgICAgIGlmIChwZXJzcGVjdGl2ZSAmJiBwZXJzcGVjdGl2ZSgpKSB7XG4gICAgICAgIHN3aXBlci5jbGFzc05hbWVzLnB1c2goYCR7c3dpcGVyLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfTNkYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBvdmVyd3JpdGVQYXJhbXNSZXN1bHQgPSBvdmVyd3JpdGVQYXJhbXMgPyBvdmVyd3JpdGVQYXJhbXMoKSA6IHt9O1xuICAgICAgT2JqZWN0LmFzc2lnbihzd2lwZXIucGFyYW1zLCBvdmVyd3JpdGVQYXJhbXNSZXN1bHQpO1xuICAgICAgT2JqZWN0LmFzc2lnbihzd2lwZXIub3JpZ2luYWxQYXJhbXMsIG92ZXJ3cml0ZVBhcmFtc1Jlc3VsdCk7XG4gICAgfSk7XG4gICAgb24oJ3NldFRyYW5zbGF0ZScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgICBzZXRUcmFuc2xhdGUoKTtcbiAgICB9KTtcbiAgICBvbignc2V0VHJhbnNpdGlvbicsIChfcywgZHVyYXRpb24pID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgICBzZXRUcmFuc2l0aW9uKGR1cmF0aW9uKTtcbiAgICB9KTtcbiAgICBvbigndHJhbnNpdGlvbkVuZCcsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgICBpZiAocmVjcmVhdGVTaGFkb3dzKSB7XG4gICAgICAgIGlmICghZ2V0RWZmZWN0UGFyYW1zIHx8ICFnZXRFZmZlY3RQYXJhbXMoKS5zbGlkZVNoYWRvd3MpIHJldHVybjtcbiAgICAgICAgLy8gcmVtb3ZlIHNoYWRvd3NcbiAgICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICAgIHNsaWRlRWwucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0JykuZm9yRWFjaChzaGFkb3dFbCA9PiBzaGFkb3dFbC5yZW1vdmUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjcmVhdGUgbmV3IG9uZVxuICAgICAgICByZWNyZWF0ZVNoYWRvd3MoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgcmVxdWlyZVVwZGF0ZU9uVmlydHVhbDtcbiAgICBvbigndmlydHVhbFVwZGF0ZScsICgpID0+IHtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgICBpZiAoIXN3aXBlci5zbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgIHJlcXVpcmVVcGRhdGVPblZpcnR1YWwgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgaWYgKHJlcXVpcmVVcGRhdGVPblZpcnR1YWwgJiYgc3dpcGVyLnNsaWRlcyAmJiBzd2lwZXIuc2xpZGVzLmxlbmd0aCkge1xuICAgICAgICAgIHNldFRyYW5zbGF0ZSgpO1xuICAgICAgICAgIHJlcXVpcmVVcGRhdGVPblZpcnR1YWwgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBlZmZlY3RUYXJnZXQoZWZmZWN0UGFyYW1zLCBzbGlkZUVsKSB7XG4gICAgY29uc3QgdHJhbnNmb3JtRWwgPSBnZXRTbGlkZVRyYW5zZm9ybUVsKHNsaWRlRWwpO1xuICAgIGlmICh0cmFuc2Zvcm1FbCAhPT0gc2xpZGVFbCkge1xuICAgICAgdHJhbnNmb3JtRWwuc3R5bGUuYmFja2ZhY2VWaXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICB0cmFuc2Zvcm1FbC5zdHlsZVsnLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5J10gPSAnaGlkZGVuJztcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUVsO1xuICB9XG5cbiAgZnVuY3Rpb24gZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIHRyYW5zZm9ybUVsZW1lbnRzLFxuICAgICAgYWxsU2xpZGVzXG4gICAgfSA9IF9yZWY7XG4gICAgY29uc3Qge1xuICAgICAgYWN0aXZlSW5kZXhcbiAgICB9ID0gc3dpcGVyO1xuICAgIGNvbnN0IGdldFNsaWRlID0gZWwgPT4ge1xuICAgICAgaWYgKCFlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIC8vIGFzc3VtZSBzaGFkb3cgcm9vdFxuICAgICAgICBjb25zdCBzbGlkZSA9IHN3aXBlci5zbGlkZXMuZmlsdGVyKHNsaWRlRWwgPT4gc2xpZGVFbC5zaGFkb3dSb290ICYmIHNsaWRlRWwuc2hhZG93Um9vdCA9PT0gZWwucGFyZW50Tm9kZSlbMF07XG4gICAgICAgIHJldHVybiBzbGlkZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbC5wYXJlbnRFbGVtZW50O1xuICAgIH07XG4gICAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZSAmJiBkdXJhdGlvbiAhPT0gMCkge1xuICAgICAgbGV0IGV2ZW50VHJpZ2dlcmVkID0gZmFsc2U7XG4gICAgICBsZXQgdHJhbnNpdGlvbkVuZFRhcmdldDtcbiAgICAgIGlmIChhbGxTbGlkZXMpIHtcbiAgICAgICAgdHJhbnNpdGlvbkVuZFRhcmdldCA9IHRyYW5zZm9ybUVsZW1lbnRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbkVuZFRhcmdldCA9IHRyYW5zZm9ybUVsZW1lbnRzLmZpbHRlcih0cmFuc2Zvcm1FbCA9PiB7XG4gICAgICAgICAgY29uc3QgZWwgPSB0cmFuc2Zvcm1FbC5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1zbGlkZS10cmFuc2Zvcm0nKSA/IGdldFNsaWRlKHRyYW5zZm9ybUVsKSA6IHRyYW5zZm9ybUVsO1xuICAgICAgICAgIHJldHVybiBzd2lwZXIuZ2V0U2xpZGVJbmRleChlbCkgPT09IGFjdGl2ZUluZGV4O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRyYW5zaXRpb25FbmRUYXJnZXQuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGVsZW1lbnRUcmFuc2l0aW9uRW5kKGVsLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKGV2ZW50VHJpZ2dlcmVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgIGV2ZW50VHJpZ2dlcmVkID0gdHJ1ZTtcbiAgICAgICAgICBzd2lwZXIuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgY29uc3QgZXZ0ID0gbmV3IHdpbmRvdy5DdXN0b21FdmVudCgndHJhbnNpdGlvbmVuZCcsIHtcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gRWZmZWN0RmFkZShfcmVmKSB7XG4gICAgbGV0IHtcbiAgICAgIHN3aXBlcixcbiAgICAgIGV4dGVuZFBhcmFtcyxcbiAgICAgIG9uXG4gICAgfSA9IF9yZWY7XG4gICAgZXh0ZW5kUGFyYW1zKHtcbiAgICAgIGZhZGVFZmZlY3Q6IHtcbiAgICAgICAgY3Jvc3NGYWRlOiBmYWxzZVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5mYWRlRWZmZWN0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVFbCA9IHN3aXBlci5zbGlkZXNbaV07XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHNsaWRlRWwuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgIGxldCB0eCA9IC1vZmZzZXQ7XG4gICAgICAgIGlmICghc3dpcGVyLnBhcmFtcy52aXJ0dWFsVHJhbnNsYXRlKSB0eCAtPSBzd2lwZXIudHJhbnNsYXRlO1xuICAgICAgICBsZXQgdHkgPSAwO1xuICAgICAgICBpZiAoIXN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgIHR5ID0gdHg7XG4gICAgICAgICAgdHggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNsaWRlT3BhY2l0eSA9IHN3aXBlci5wYXJhbXMuZmFkZUVmZmVjdC5jcm9zc0ZhZGUgPyBNYXRoLm1heCgxIC0gTWF0aC5hYnMoc2xpZGVFbC5wcm9ncmVzcyksIDApIDogMSArIE1hdGgubWluKE1hdGgubWF4KHNsaWRlRWwucHJvZ3Jlc3MsIC0xKSwgMCk7XG4gICAgICAgIGNvbnN0IHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgc2xpZGVFbCk7XG4gICAgICAgIHRhcmdldEVsLnN0eWxlLm9wYWNpdHkgPSBzbGlkZU9wYWNpdHk7XG4gICAgICAgIHRhcmdldEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3R4fXB4LCAke3R5fXB4LCAwcHgpYDtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zaXRpb24gPSBkdXJhdGlvbiA9PiB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1FbGVtZW50cyA9IHN3aXBlci5zbGlkZXMubWFwKHNsaWRlRWwgPT4gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKSk7XG4gICAgICB0cmFuc2Zvcm1FbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgfSk7XG4gICAgICBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCh7XG4gICAgICAgIHN3aXBlcixcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIHRyYW5zZm9ybUVsZW1lbnRzLFxuICAgICAgICBhbGxTbGlkZXM6IHRydWVcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZWZmZWN0SW5pdCh7XG4gICAgICBlZmZlY3Q6ICdmYWRlJyxcbiAgICAgIHN3aXBlcixcbiAgICAgIG9uLFxuICAgICAgc2V0VHJhbnNsYXRlLFxuICAgICAgc2V0VHJhbnNpdGlvbixcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogKCkgPT4gKHtcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgICAgdmlydHVhbFRyYW5zbGF0ZTogIXN3aXBlci5wYXJhbXMuY3NzTW9kZVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEVmZmVjdEN1YmUoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvblxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBjdWJlRWZmZWN0OiB7XG4gICAgICAgIHNsaWRlU2hhZG93czogdHJ1ZSxcbiAgICAgICAgc2hhZG93OiB0cnVlLFxuICAgICAgICBzaGFkb3dPZmZzZXQ6IDIwLFxuICAgICAgICBzaGFkb3dTY2FsZTogMC45NFxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNyZWF0ZVNsaWRlU2hhZG93cyA9IChzbGlkZUVsLCBwcm9ncmVzcywgaXNIb3Jpem9udGFsKSA9PiB7XG4gICAgICBsZXQgc2hhZG93QmVmb3JlID0gaXNIb3Jpem9udGFsID8gc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0JykgOiBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCcpO1xuICAgICAgbGV0IHNoYWRvd0FmdGVyID0gaXNIb3Jpem9udGFsID8gc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCcpIDogc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20nKTtcbiAgICAgIGlmICghc2hhZG93QmVmb3JlKSB7XG4gICAgICAgIHNoYWRvd0JlZm9yZSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIGBzd2lwZXItc2xpZGUtc2hhZG93LWN1YmUgc3dpcGVyLXNsaWRlLXNoYWRvdy0ke2lzSG9yaXpvbnRhbCA/ICdsZWZ0JyA6ICd0b3AnfWAuc3BsaXQoJyAnKSk7XG4gICAgICAgIHNsaWRlRWwuYXBwZW5kKHNoYWRvd0JlZm9yZSk7XG4gICAgICB9XG4gICAgICBpZiAoIXNoYWRvd0FmdGVyKSB7XG4gICAgICAgIHNoYWRvd0FmdGVyID0gY3JlYXRlRWxlbWVudCgnZGl2JywgYHN3aXBlci1zbGlkZS1zaGFkb3ctY3ViZSBzd2lwZXItc2xpZGUtc2hhZG93LSR7aXNIb3Jpem9udGFsID8gJ3JpZ2h0JyA6ICdib3R0b20nfWAuc3BsaXQoJyAnKSk7XG4gICAgICAgIHNsaWRlRWwuYXBwZW5kKHNoYWRvd0FmdGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChzaGFkb3dCZWZvcmUpIHNoYWRvd0JlZm9yZS5zdHlsZS5vcGFjaXR5ID0gTWF0aC5tYXgoLXByb2dyZXNzLCAwKTtcbiAgICAgIGlmIChzaGFkb3dBZnRlcikgc2hhZG93QWZ0ZXIuc3R5bGUub3BhY2l0eSA9IE1hdGgubWF4KHByb2dyZXNzLCAwKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlY3JlYXRlU2hhZG93cyA9ICgpID0+IHtcbiAgICAgIC8vIGNyZWF0ZSBuZXcgb25lc1xuICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWF4KE1hdGgubWluKHNsaWRlRWwucHJvZ3Jlc3MsIDEpLCAtMSk7XG4gICAgICAgIGNyZWF0ZVNsaWRlU2hhZG93cyhzbGlkZUVsLCBwcm9ncmVzcywgaXNIb3Jpem9udGFsKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2V0VHJhbnNsYXRlID0gKCkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBlbCxcbiAgICAgICAgd3JhcHBlckVsLFxuICAgICAgICBzbGlkZXMsXG4gICAgICAgIHdpZHRoOiBzd2lwZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBzd2lwZXJIZWlnaHQsXG4gICAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsLFxuICAgICAgICBzaXplOiBzd2lwZXJTaXplLFxuICAgICAgICBicm93c2VyXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5jdWJlRWZmZWN0O1xuICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gc3dpcGVyLmlzSG9yaXpvbnRhbCgpO1xuICAgICAgY29uc3QgaXNWaXJ0dWFsID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQ7XG4gICAgICBsZXQgd3JhcHBlclJvdGF0ZSA9IDA7XG4gICAgICBsZXQgY3ViZVNoYWRvd0VsO1xuICAgICAgaWYgKHBhcmFtcy5zaGFkb3cpIHtcbiAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICAgIGN1YmVTaGFkb3dFbCA9IHN3aXBlci53cmFwcGVyRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1jdWJlLXNoYWRvdycpO1xuICAgICAgICAgIGlmICghY3ViZVNoYWRvd0VsKSB7XG4gICAgICAgICAgICBjdWJlU2hhZG93RWwgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCAnc3dpcGVyLWN1YmUtc2hhZG93Jyk7XG4gICAgICAgICAgICBzd2lwZXIud3JhcHBlckVsLmFwcGVuZChjdWJlU2hhZG93RWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdWJlU2hhZG93RWwuc3R5bGUuaGVpZ2h0ID0gYCR7c3dpcGVyV2lkdGh9cHhgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1YmVTaGFkb3dFbCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItY3ViZS1zaGFkb3cnKTtcbiAgICAgICAgICBpZiAoIWN1YmVTaGFkb3dFbCkge1xuICAgICAgICAgICAgY3ViZVNoYWRvd0VsID0gY3JlYXRlRWxlbWVudCgnZGl2JywgJ3N3aXBlci1jdWJlLXNoYWRvdycpO1xuICAgICAgICAgICAgZWwuYXBwZW5kKGN1YmVTaGFkb3dFbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBzbGlkZUVsID0gc2xpZGVzW2ldO1xuICAgICAgICBsZXQgc2xpZGVJbmRleCA9IGk7XG4gICAgICAgIGlmIChpc1ZpcnR1YWwpIHtcbiAgICAgICAgICBzbGlkZUluZGV4ID0gcGFyc2VJbnQoc2xpZGVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3dpcGVyLXNsaWRlLWluZGV4JyksIDEwKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2xpZGVBbmdsZSA9IHNsaWRlSW5kZXggKiA5MDtcbiAgICAgICAgbGV0IHJvdW5kID0gTWF0aC5mbG9vcihzbGlkZUFuZ2xlIC8gMzYwKTtcbiAgICAgICAgaWYgKHJ0bCkge1xuICAgICAgICAgIHNsaWRlQW5nbGUgPSAtc2xpZGVBbmdsZTtcbiAgICAgICAgICByb3VuZCA9IE1hdGguZmxvb3IoLXNsaWRlQW5nbGUgLyAzNjApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5tYXgoTWF0aC5taW4oc2xpZGVFbC5wcm9ncmVzcywgMSksIC0xKTtcbiAgICAgICAgbGV0IHR4ID0gMDtcbiAgICAgICAgbGV0IHR5ID0gMDtcbiAgICAgICAgbGV0IHR6ID0gMDtcbiAgICAgICAgaWYgKHNsaWRlSW5kZXggJSA0ID09PSAwKSB7XG4gICAgICAgICAgdHggPSAtcm91bmQgKiA0ICogc3dpcGVyU2l6ZTtcbiAgICAgICAgICB0eiA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoKHNsaWRlSW5kZXggLSAxKSAlIDQgPT09IDApIHtcbiAgICAgICAgICB0eCA9IDA7XG4gICAgICAgICAgdHogPSAtcm91bmQgKiA0ICogc3dpcGVyU2l6ZTtcbiAgICAgICAgfSBlbHNlIGlmICgoc2xpZGVJbmRleCAtIDIpICUgNCA9PT0gMCkge1xuICAgICAgICAgIHR4ID0gc3dpcGVyU2l6ZSArIHJvdW5kICogNCAqIHN3aXBlclNpemU7XG4gICAgICAgICAgdHogPSBzd2lwZXJTaXplO1xuICAgICAgICB9IGVsc2UgaWYgKChzbGlkZUluZGV4IC0gMykgJSA0ID09PSAwKSB7XG4gICAgICAgICAgdHggPSAtc3dpcGVyU2l6ZTtcbiAgICAgICAgICB0eiA9IDMgKiBzd2lwZXJTaXplICsgc3dpcGVyU2l6ZSAqIDQgKiByb3VuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnRsKSB7XG4gICAgICAgICAgdHggPSAtdHg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0hvcml6b250YWwpIHtcbiAgICAgICAgICB0eSA9IHR4O1xuICAgICAgICAgIHR4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgcm90YXRlWCgke2lzSG9yaXpvbnRhbCA/IDAgOiAtc2xpZGVBbmdsZX1kZWcpIHJvdGF0ZVkoJHtpc0hvcml6b250YWwgPyBzbGlkZUFuZ2xlIDogMH1kZWcpIHRyYW5zbGF0ZTNkKCR7dHh9cHgsICR7dHl9cHgsICR7dHp9cHgpYDtcbiAgICAgICAgaWYgKHByb2dyZXNzIDw9IDEgJiYgcHJvZ3Jlc3MgPiAtMSkge1xuICAgICAgICAgIHdyYXBwZXJSb3RhdGUgPSBzbGlkZUluZGV4ICogOTAgKyBwcm9ncmVzcyAqIDkwO1xuICAgICAgICAgIGlmIChydGwpIHdyYXBwZXJSb3RhdGUgPSAtc2xpZGVJbmRleCAqIDkwIC0gcHJvZ3Jlc3MgKiA5MDtcbiAgICAgICAgICBpZiAoc3dpcGVyLmJyb3dzZXIgJiYgc3dpcGVyLmJyb3dzZXIubmVlZDNkRml4ICYmIE1hdGguYWJzKHdyYXBwZXJSb3RhdGUpIC8gOTAgJSAyID09PSAxKSB7XG4gICAgICAgICAgICB3cmFwcGVyUm90YXRlICs9IDAuMDAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzbGlkZUVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgaWYgKHBhcmFtcy5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgICBjcmVhdGVTbGlkZVNoYWRvd3Moc2xpZGVFbCwgcHJvZ3Jlc3MsIGlzSG9yaXpvbnRhbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdyYXBwZXJFbC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBgNTAlIDUwJSAtJHtzd2lwZXJTaXplIC8gMn1weGA7XG4gICAgICB3cmFwcGVyRWwuc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbiddID0gYDUwJSA1MCUgLSR7c3dpcGVyU2l6ZSAvIDJ9cHhgO1xuICAgICAgaWYgKHBhcmFtcy5zaGFkb3cpIHtcbiAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICAgIGN1YmVTaGFkb3dFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMHB4LCAke3N3aXBlcldpZHRoIC8gMiArIHBhcmFtcy5zaGFkb3dPZmZzZXR9cHgsICR7LXN3aXBlcldpZHRoIC8gMn1weCkgcm90YXRlWCg4OS45OWRlZykgcm90YXRlWigwZGVnKSBzY2FsZSgke3BhcmFtcy5zaGFkb3dTY2FsZX0pYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzaGFkb3dBbmdsZSA9IE1hdGguYWJzKHdyYXBwZXJSb3RhdGUpIC0gTWF0aC5mbG9vcihNYXRoLmFicyh3cmFwcGVyUm90YXRlKSAvIDkwKSAqIDkwO1xuICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSAxLjUgLSAoTWF0aC5zaW4oc2hhZG93QW5nbGUgKiAyICogTWF0aC5QSSAvIDM2MCkgLyAyICsgTWF0aC5jb3Moc2hhZG93QW5nbGUgKiAyICogTWF0aC5QSSAvIDM2MCkgLyAyKTtcbiAgICAgICAgICBjb25zdCBzY2FsZTEgPSBwYXJhbXMuc2hhZG93U2NhbGU7XG4gICAgICAgICAgY29uc3Qgc2NhbGUyID0gcGFyYW1zLnNoYWRvd1NjYWxlIC8gbXVsdGlwbGllcjtcbiAgICAgICAgICBjb25zdCBvZmZzZXQgPSBwYXJhbXMuc2hhZG93T2Zmc2V0O1xuICAgICAgICAgIGN1YmVTaGFkb3dFbC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUzZCgke3NjYWxlMX0sIDEsICR7c2NhbGUyfSkgdHJhbnNsYXRlM2QoMHB4LCAke3N3aXBlckhlaWdodCAvIDIgKyBvZmZzZXR9cHgsICR7LXN3aXBlckhlaWdodCAvIDIgLyBzY2FsZTJ9cHgpIHJvdGF0ZVgoLTg5Ljk5ZGVnKWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHpGYWN0b3IgPSAoYnJvd3Nlci5pc1NhZmFyaSB8fCBicm93c2VyLmlzV2ViVmlldykgJiYgYnJvd3Nlci5uZWVkUGVyc3BlY3RpdmVGaXggPyAtc3dpcGVyU2l6ZSAvIDIgOiAwO1xuICAgICAgd3JhcHBlckVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwcHgsMCwke3pGYWN0b3J9cHgpIHJvdGF0ZVgoJHtzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAwIDogd3JhcHBlclJvdGF0ZX1kZWcpIHJvdGF0ZVkoJHtzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyAtd3JhcHBlclJvdGF0ZSA6IDB9ZGVnKWA7XG4gICAgICB3cmFwcGVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3dpcGVyLWN1YmUtdHJhbnNsYXRlLXonLCBgJHt6RmFjdG9yfXB4YCk7XG4gICAgfTtcbiAgICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBlbCxcbiAgICAgICAgc2xpZGVzXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgIHNsaWRlRWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgICBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpLmZvckVhY2goc3ViRWwgPT4ge1xuICAgICAgICAgIHN1YkVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGlmIChzd2lwZXIucGFyYW1zLmN1YmVFZmZlY3Quc2hhZG93ICYmICFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgY29uc3Qgc2hhZG93RWwgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWN1YmUtc2hhZG93Jyk7XG4gICAgICAgIGlmIChzaGFkb3dFbCkgc2hhZG93RWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgfVxuICAgIH07XG4gICAgZWZmZWN0SW5pdCh7XG4gICAgICBlZmZlY3Q6ICdjdWJlJyxcbiAgICAgIHN3aXBlcixcbiAgICAgIG9uLFxuICAgICAgc2V0VHJhbnNsYXRlLFxuICAgICAgc2V0VHJhbnNpdGlvbixcbiAgICAgIHJlY3JlYXRlU2hhZG93cyxcbiAgICAgIGdldEVmZmVjdFBhcmFtczogKCkgPT4gc3dpcGVyLnBhcmFtcy5jdWJlRWZmZWN0LFxuICAgICAgcGVyc3BlY3RpdmU6ICgpID0+IHRydWUsXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICByZXNpc3RhbmNlUmF0aW86IDAsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxuICAgICAgICB2aXJ0dWFsVHJhbnNsYXRlOiB0cnVlXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlU2hhZG93KHN1ZmZpeCwgc2xpZGVFbCwgc2lkZSkge1xuICAgIGNvbnN0IHNoYWRvd0NsYXNzID0gYHN3aXBlci1zbGlkZS1zaGFkb3cke3NpZGUgPyBgLSR7c2lkZX1gIDogJyd9JHtzdWZmaXggPyBgIHN3aXBlci1zbGlkZS1zaGFkb3ctJHtzdWZmaXh9YCA6ICcnfWA7XG4gICAgY29uc3Qgc2hhZG93Q29udGFpbmVyID0gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKTtcbiAgICBsZXQgc2hhZG93RWwgPSBzaGFkb3dDb250YWluZXIucXVlcnlTZWxlY3RvcihgLiR7c2hhZG93Q2xhc3Muc3BsaXQoJyAnKS5qb2luKCcuJyl9YCk7XG4gICAgaWYgKCFzaGFkb3dFbCkge1xuICAgICAgc2hhZG93RWwgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBzaGFkb3dDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgIHNoYWRvd0NvbnRhaW5lci5hcHBlbmQoc2hhZG93RWwpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZG93RWw7XG4gIH1cblxuICBmdW5jdGlvbiBFZmZlY3RGbGlwKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgZmxpcEVmZmVjdDoge1xuICAgICAgICBzbGlkZVNoYWRvd3M6IHRydWUsXG4gICAgICAgIGxpbWl0Um90YXRpb246IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjcmVhdGVTbGlkZVNoYWRvd3MgPSAoc2xpZGVFbCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIGxldCBzaGFkb3dCZWZvcmUgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKSA6IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wJyk7XG4gICAgICBsZXQgc2hhZG93QWZ0ZXIgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCkgPyBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0JykgOiBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbScpO1xuICAgICAgaWYgKCFzaGFkb3dCZWZvcmUpIHtcbiAgICAgICAgc2hhZG93QmVmb3JlID0gY3JlYXRlU2hhZG93KCdmbGlwJywgc2xpZGVFbCwgc3dpcGVyLmlzSG9yaXpvbnRhbCgpID8gJ2xlZnQnIDogJ3RvcCcpO1xuICAgICAgfVxuICAgICAgaWYgKCFzaGFkb3dBZnRlcikge1xuICAgICAgICBzaGFkb3dBZnRlciA9IGNyZWF0ZVNoYWRvdygnZmxpcCcsIHNsaWRlRWwsIHN3aXBlci5pc0hvcml6b250YWwoKSA/ICdyaWdodCcgOiAnYm90dG9tJyk7XG4gICAgICB9XG4gICAgICBpZiAoc2hhZG93QmVmb3JlKSBzaGFkb3dCZWZvcmUuc3R5bGUub3BhY2l0eSA9IE1hdGgubWF4KC1wcm9ncmVzcywgMCk7XG4gICAgICBpZiAoc2hhZG93QWZ0ZXIpIHNoYWRvd0FmdGVyLnN0eWxlLm9wYWNpdHkgPSBNYXRoLm1heChwcm9ncmVzcywgMCk7XG4gICAgfTtcbiAgICBjb25zdCByZWNyZWF0ZVNoYWRvd3MgPSAoKSA9PiB7XG4gICAgICAvLyBTZXQgc2hhZG93c1xuICAgICAgc3dpcGVyLnBhcmFtcy5mbGlwRWZmZWN0O1xuICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSBzbGlkZUVsLnByb2dyZXNzO1xuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5mbGlwRWZmZWN0LmxpbWl0Um90YXRpb24pIHtcbiAgICAgICAgICBwcm9ncmVzcyA9IE1hdGgubWF4KE1hdGgubWluKHNsaWRlRWwucHJvZ3Jlc3MsIDEpLCAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY3JlYXRlU2xpZGVTaGFkb3dzKHNsaWRlRWwsIHByb2dyZXNzKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2V0VHJhbnNsYXRlID0gKCkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZXMsXG4gICAgICAgIHJ0bFRyYW5zbGF0ZTogcnRsXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5mbGlwRWZmZWN0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVFbCA9IHNsaWRlc1tpXTtcbiAgICAgICAgbGV0IHByb2dyZXNzID0gc2xpZGVFbC5wcm9ncmVzcztcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuZmxpcEVmZmVjdC5saW1pdFJvdGF0aW9uKSB7XG4gICAgICAgICAgcHJvZ3Jlc3MgPSBNYXRoLm1heChNYXRoLm1pbihzbGlkZUVsLnByb2dyZXNzLCAxKSwgLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHNsaWRlRWwuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJvdGF0ZSA9IC0xODAgKiBwcm9ncmVzcztcbiAgICAgICAgbGV0IHJvdGF0ZVkgPSByb3RhdGU7XG4gICAgICAgIGxldCByb3RhdGVYID0gMDtcbiAgICAgICAgbGV0IHR4ID0gc3dpcGVyLnBhcmFtcy5jc3NNb2RlID8gLW9mZnNldCAtIHN3aXBlci50cmFuc2xhdGUgOiAtb2Zmc2V0O1xuICAgICAgICBsZXQgdHkgPSAwO1xuICAgICAgICBpZiAoIXN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICAgIHR5ID0gdHg7XG4gICAgICAgICAgdHggPSAwO1xuICAgICAgICAgIHJvdGF0ZVggPSAtcm90YXRlWTtcbiAgICAgICAgICByb3RhdGVZID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChydGwpIHtcbiAgICAgICAgICByb3RhdGVZID0gLXJvdGF0ZVk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN3aXBlci5icm93c2VyICYmIHN3aXBlci5icm93c2VyLm5lZWQzZEZpeCkge1xuICAgICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGVZKSAvIDkwICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgcm90YXRlWSArPSAwLjAwMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0ZVgpIC8gOTAgJSAyID09PSAxKSB7XG4gICAgICAgICAgICByb3RhdGVYICs9IDAuMDAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzbGlkZUVsLnN0eWxlLnpJbmRleCA9IC1NYXRoLmFicyhNYXRoLnJvdW5kKHByb2dyZXNzKSkgKyBzbGlkZXMubGVuZ3RoO1xuICAgICAgICBpZiAocGFyYW1zLnNsaWRlU2hhZG93cykge1xuICAgICAgICAgIGNyZWF0ZVNsaWRlU2hhZG93cyhzbGlkZUVsLCBwcm9ncmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHh9cHgsICR7dHl9cHgsIDBweCkgcm90YXRlWCgke3JvdGF0ZVh9ZGVnKSByb3RhdGVZKCR7cm90YXRlWX1kZWcpYDtcbiAgICAgICAgY29uc3QgdGFyZ2V0RWwgPSBlZmZlY3RUYXJnZXQocGFyYW1zLCBzbGlkZUVsKTtcbiAgICAgICAgdGFyZ2V0RWwuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0VHJhbnNpdGlvbiA9IGR1cmF0aW9uID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybUVsZW1lbnRzID0gc3dpcGVyLnNsaWRlcy5tYXAoc2xpZGVFbCA9PiBnZXRTbGlkZVRyYW5zZm9ybUVsKHNsaWRlRWwpKTtcbiAgICAgIHRyYW5zZm9ybUVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpLmZvckVhY2goc2hhZG93RWwgPT4ge1xuICAgICAgICAgIHNoYWRvd0VsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kKHtcbiAgICAgICAgc3dpcGVyLFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgdHJhbnNmb3JtRWxlbWVudHNcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZWZmZWN0SW5pdCh7XG4gICAgICBlZmZlY3Q6ICdmbGlwJyxcbiAgICAgIHN3aXBlcixcbiAgICAgIG9uLFxuICAgICAgc2V0VHJhbnNsYXRlLFxuICAgICAgc2V0VHJhbnNpdGlvbixcbiAgICAgIHJlY3JlYXRlU2hhZG93cyxcbiAgICAgIGdldEVmZmVjdFBhcmFtczogKCkgPT4gc3dpcGVyLnBhcmFtcy5mbGlwRWZmZWN0LFxuICAgICAgcGVyc3BlY3RpdmU6ICgpID0+IHRydWUsXG4gICAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBFZmZlY3RDb3ZlcmZsb3coX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBleHRlbmRQYXJhbXMsXG4gICAgICBvblxuICAgIH0gPSBfcmVmO1xuICAgIGV4dGVuZFBhcmFtcyh7XG4gICAgICBjb3ZlcmZsb3dFZmZlY3Q6IHtcbiAgICAgICAgcm90YXRlOiA1MCxcbiAgICAgICAgc3RyZXRjaDogMCxcbiAgICAgICAgZGVwdGg6IDEwMCxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG1vZGlmaWVyOiAxLFxuICAgICAgICBzbGlkZVNoYWRvd3M6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHdpZHRoOiBzd2lwZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBzd2lwZXJIZWlnaHQsXG4gICAgICAgIHNsaWRlcyxcbiAgICAgICAgc2xpZGVzU2l6ZXNHcmlkXG4gICAgICB9ID0gc3dpcGVyO1xuICAgICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5jb3ZlcmZsb3dFZmZlY3Q7XG4gICAgICBjb25zdCBpc0hvcml6b250YWwgPSBzd2lwZXIuaXNIb3Jpem9udGFsKCk7XG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSBzd2lwZXIudHJhbnNsYXRlO1xuICAgICAgY29uc3QgY2VudGVyID0gaXNIb3Jpem9udGFsID8gLXRyYW5zZm9ybSArIHN3aXBlcldpZHRoIC8gMiA6IC10cmFuc2Zvcm0gKyBzd2lwZXJIZWlnaHQgLyAyO1xuICAgICAgY29uc3Qgcm90YXRlID0gaXNIb3Jpem9udGFsID8gcGFyYW1zLnJvdGF0ZSA6IC1wYXJhbXMucm90YXRlO1xuICAgICAgY29uc3QgdHJhbnNsYXRlID0gcGFyYW1zLmRlcHRoO1xuICAgICAgLy8gRWFjaCBzbGlkZSBvZmZzZXQgZnJvbSBjZW50ZXJcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBzbGlkZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVFbCA9IHNsaWRlc1tpXTtcbiAgICAgICAgY29uc3Qgc2xpZGVTaXplID0gc2xpZGVzU2l6ZXNHcmlkW2ldO1xuICAgICAgICBjb25zdCBzbGlkZU9mZnNldCA9IHNsaWRlRWwuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICAgIGNvbnN0IGNlbnRlck9mZnNldCA9IChjZW50ZXIgLSBzbGlkZU9mZnNldCAtIHNsaWRlU2l6ZSAvIDIpIC8gc2xpZGVTaXplO1xuICAgICAgICBjb25zdCBvZmZzZXRNdWx0aXBsaWVyID0gdHlwZW9mIHBhcmFtcy5tb2RpZmllciA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmFtcy5tb2RpZmllcihjZW50ZXJPZmZzZXQpIDogY2VudGVyT2Zmc2V0ICogcGFyYW1zLm1vZGlmaWVyO1xuICAgICAgICBsZXQgcm90YXRlWSA9IGlzSG9yaXpvbnRhbCA/IHJvdGF0ZSAqIG9mZnNldE11bHRpcGxpZXIgOiAwO1xuICAgICAgICBsZXQgcm90YXRlWCA9IGlzSG9yaXpvbnRhbCA/IDAgOiByb3RhdGUgKiBvZmZzZXRNdWx0aXBsaWVyO1xuICAgICAgICAvLyB2YXIgcm90YXRlWiA9IDBcbiAgICAgICAgbGV0IHRyYW5zbGF0ZVogPSAtdHJhbnNsYXRlICogTWF0aC5hYnMob2Zmc2V0TXVsdGlwbGllcik7XG4gICAgICAgIGxldCBzdHJldGNoID0gcGFyYW1zLnN0cmV0Y2g7XG4gICAgICAgIC8vIEFsbG93IHBlcmNlbnRhZ2UgdG8gbWFrZSBhIHJlbGF0aXZlIHN0cmV0Y2ggZm9yIHJlc3BvbnNpdmUgc2xpZGVyc1xuICAgICAgICBpZiAodHlwZW9mIHN0cmV0Y2ggPT09ICdzdHJpbmcnICYmIHN0cmV0Y2guaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgICAgICAgIHN0cmV0Y2ggPSBwYXJzZUZsb2F0KHBhcmFtcy5zdHJldGNoKSAvIDEwMCAqIHNsaWRlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdHJhbnNsYXRlWSA9IGlzSG9yaXpvbnRhbCA/IDAgOiBzdHJldGNoICogb2Zmc2V0TXVsdGlwbGllcjtcbiAgICAgICAgbGV0IHRyYW5zbGF0ZVggPSBpc0hvcml6b250YWwgPyBzdHJldGNoICogb2Zmc2V0TXVsdGlwbGllciA6IDA7XG4gICAgICAgIGxldCBzY2FsZSA9IDEgLSAoMSAtIHBhcmFtcy5zY2FsZSkgKiBNYXRoLmFicyhvZmZzZXRNdWx0aXBsaWVyKTtcblxuICAgICAgICAvLyBGaXggZm9yIHVsdHJhIHNtYWxsIHZhbHVlc1xuICAgICAgICBpZiAoTWF0aC5hYnModHJhbnNsYXRlWCkgPCAwLjAwMSkgdHJhbnNsYXRlWCA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyh0cmFuc2xhdGVZKSA8IDAuMDAxKSB0cmFuc2xhdGVZID0gMDtcbiAgICAgICAgaWYgKE1hdGguYWJzKHRyYW5zbGF0ZVopIDwgMC4wMDEpIHRyYW5zbGF0ZVogPSAwO1xuICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRlWSkgPCAwLjAwMSkgcm90YXRlWSA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGVYKSA8IDAuMDAxKSByb3RhdGVYID0gMDtcbiAgICAgICAgaWYgKE1hdGguYWJzKHNjYWxlKSA8IDAuMDAxKSBzY2FsZSA9IDA7XG4gICAgICAgIGlmIChzd2lwZXIuYnJvd3NlciAmJiBzd2lwZXIuYnJvd3Nlci5uZWVkM2RGaXgpIHtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRlWSkgLyA5MCAlIDIgPT09IDEpIHtcbiAgICAgICAgICAgIHJvdGF0ZVkgKz0gMC4wMDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGVYKSAvIDkwICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgcm90YXRlWCArPSAwLjAwMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2xpZGVUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0cmFuc2xhdGVYfXB4LCR7dHJhbnNsYXRlWX1weCwke3RyYW5zbGF0ZVp9cHgpICByb3RhdGVYKCR7cm90YXRlWH1kZWcpIHJvdGF0ZVkoJHtyb3RhdGVZfWRlZykgc2NhbGUoJHtzY2FsZX0pYDtcbiAgICAgICAgY29uc3QgdGFyZ2V0RWwgPSBlZmZlY3RUYXJnZXQocGFyYW1zLCBzbGlkZUVsKTtcbiAgICAgICAgdGFyZ2V0RWwuc3R5bGUudHJhbnNmb3JtID0gc2xpZGVUcmFuc2Zvcm07XG4gICAgICAgIHNsaWRlRWwuc3R5bGUuekluZGV4ID0gLU1hdGguYWJzKE1hdGgucm91bmQob2Zmc2V0TXVsdGlwbGllcikpICsgMTtcbiAgICAgICAgaWYgKHBhcmFtcy5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgICAvLyBTZXQgc2hhZG93c1xuICAgICAgICAgIGxldCBzaGFkb3dCZWZvcmVFbCA9IGlzSG9yaXpvbnRhbCA/IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpIDogc2xpZGVFbC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AnKTtcbiAgICAgICAgICBsZXQgc2hhZG93QWZ0ZXJFbCA9IGlzSG9yaXpvbnRhbCA/IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQnKSA6IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tJyk7XG4gICAgICAgICAgaWYgKCFzaGFkb3dCZWZvcmVFbCkge1xuICAgICAgICAgICAgc2hhZG93QmVmb3JlRWwgPSBjcmVhdGVTaGFkb3coJ2NvdmVyZmxvdycsIHNsaWRlRWwsIGlzSG9yaXpvbnRhbCA/ICdsZWZ0JyA6ICd0b3AnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFzaGFkb3dBZnRlckVsKSB7XG4gICAgICAgICAgICBzaGFkb3dBZnRlckVsID0gY3JlYXRlU2hhZG93KCdjb3ZlcmZsb3cnLCBzbGlkZUVsLCBpc0hvcml6b250YWwgPyAncmlnaHQnIDogJ2JvdHRvbScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hhZG93QmVmb3JlRWwpIHNoYWRvd0JlZm9yZUVsLnN0eWxlLm9wYWNpdHkgPSBvZmZzZXRNdWx0aXBsaWVyID4gMCA/IG9mZnNldE11bHRpcGxpZXIgOiAwO1xuICAgICAgICAgIGlmIChzaGFkb3dBZnRlckVsKSBzaGFkb3dBZnRlckVsLnN0eWxlLm9wYWNpdHkgPSAtb2Zmc2V0TXVsdGlwbGllciA+IDAgPyAtb2Zmc2V0TXVsdGlwbGllciA6IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zaXRpb24gPSBkdXJhdGlvbiA9PiB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1FbGVtZW50cyA9IHN3aXBlci5zbGlkZXMubWFwKHNsaWRlRWwgPT4gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKSk7XG4gICAgICB0cmFuc2Zvcm1FbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlLXNoYWRvdy10b3AsIC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0LCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20sIC5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQnKS5mb3JFYWNoKHNoYWRvd0VsID0+IHtcbiAgICAgICAgICBzaGFkb3dFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBlZmZlY3RJbml0KHtcbiAgICAgIGVmZmVjdDogJ2NvdmVyZmxvdycsXG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb24sXG4gICAgICBwZXJzcGVjdGl2ZTogKCkgPT4gdHJ1ZSxcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogKCkgPT4gKHtcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEVmZmVjdENyZWF0aXZlKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgY3JlYXRpdmVFZmZlY3Q6IHtcbiAgICAgICAgbGltaXRQcm9ncmVzczogMSxcbiAgICAgICAgc2hhZG93UGVyUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgICBwcm9ncmVzc011bHRpcGxpZXI6IDEsXG4gICAgICAgIHBlcnNwZWN0aXZlOiB0cnVlLFxuICAgICAgICBwcmV2OiB7XG4gICAgICAgICAgdHJhbnNsYXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgcm90YXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBzY2FsZTogMVxuICAgICAgICB9LFxuICAgICAgICBuZXh0OiB7XG4gICAgICAgICAgdHJhbnNsYXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgcm90YXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBzY2FsZTogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgZ2V0VHJhbnNsYXRlVmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlO1xuICAgICAgcmV0dXJuIGAke3ZhbHVlfXB4YDtcbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzLFxuICAgICAgICB3cmFwcGVyRWwsXG4gICAgICAgIHNsaWRlc1NpemVzR3JpZFxuICAgICAgfSA9IHN3aXBlcjtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHN3aXBlci5wYXJhbXMuY3JlYXRpdmVFZmZlY3Q7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHByb2dyZXNzTXVsdGlwbGllcjogbXVsdGlwbGllclxuICAgICAgfSA9IHBhcmFtcztcbiAgICAgIGNvbnN0IGlzQ2VudGVyZWRTbGlkZXMgPSBzd2lwZXIucGFyYW1zLmNlbnRlcmVkU2xpZGVzO1xuICAgICAgaWYgKGlzQ2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgY29uc3QgbWFyZ2luID0gc2xpZGVzU2l6ZXNHcmlkWzBdIC8gMiAtIHN3aXBlci5wYXJhbXMuc2xpZGVzT2Zmc2V0QmVmb3JlIHx8IDA7XG4gICAgICAgIHdyYXBwZXJFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWChjYWxjKDUwJSAtICR7bWFyZ2lufXB4KSlgO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc2xpZGVFbCA9IHNsaWRlc1tpXTtcbiAgICAgICAgY29uc3Qgc2xpZGVQcm9ncmVzcyA9IHNsaWRlRWwucHJvZ3Jlc3M7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oTWF0aC5tYXgoc2xpZGVFbC5wcm9ncmVzcywgLXBhcmFtcy5saW1pdFByb2dyZXNzKSwgcGFyYW1zLmxpbWl0UHJvZ3Jlc3MpO1xuICAgICAgICBsZXQgb3JpZ2luYWxQcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICBpZiAoIWlzQ2VudGVyZWRTbGlkZXMpIHtcbiAgICAgICAgICBvcmlnaW5hbFByb2dyZXNzID0gTWF0aC5taW4oTWF0aC5tYXgoc2xpZGVFbC5vcmlnaW5hbFByb2dyZXNzLCAtcGFyYW1zLmxpbWl0UHJvZ3Jlc3MpLCBwYXJhbXMubGltaXRQcm9ncmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc2xpZGVFbC5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgICAgY29uc3QgdCA9IFtzd2lwZXIucGFyYW1zLmNzc01vZGUgPyAtb2Zmc2V0IC0gc3dpcGVyLnRyYW5zbGF0ZSA6IC1vZmZzZXQsIDAsIDBdO1xuICAgICAgICBjb25zdCByID0gWzAsIDAsIDBdO1xuICAgICAgICBsZXQgY3VzdG9tID0gZmFsc2U7XG4gICAgICAgIGlmICghc3dpcGVyLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAgICAgdFsxXSA9IHRbMF07XG4gICAgICAgICAgdFswXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgdHJhbnNsYXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgcm90YXRlOiBbMCwgMCwgMF0sXG4gICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICB9O1xuICAgICAgICBpZiAocHJvZ3Jlc3MgPCAwKSB7XG4gICAgICAgICAgZGF0YSA9IHBhcmFtcy5uZXh0O1xuICAgICAgICAgIGN1c3RvbSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3MgPiAwKSB7XG4gICAgICAgICAgZGF0YSA9IHBhcmFtcy5wcmV2O1xuICAgICAgICAgIGN1c3RvbSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHRyYW5zbGF0ZVxuICAgICAgICB0LmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHRbaW5kZXhdID0gYGNhbGMoJHt2YWx1ZX1weCArICgke2dldFRyYW5zbGF0ZVZhbHVlKGRhdGEudHJhbnNsYXRlW2luZGV4XSl9ICogJHtNYXRoLmFicyhwcm9ncmVzcyAqIG11bHRpcGxpZXIpfSkpYDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHNldCByb3RhdGVzXG4gICAgICAgIHIuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgbGV0IHZhbCA9IGRhdGEucm90YXRlW2luZGV4XSAqIE1hdGguYWJzKHByb2dyZXNzICogbXVsdGlwbGllcik7XG4gICAgICAgICAgaWYgKHN3aXBlci5icm93c2VyICYmIHN3aXBlci5icm93c2VyLm5lZWQzZEZpeCAmJiBNYXRoLmFicyh2YWwpIC8gOTAgJSAyID09PSAxKSB7XG4gICAgICAgICAgICB2YWwgKz0gMC4wMDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJbaW5kZXhdID0gdmFsO1xuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVFbC5zdHlsZS56SW5kZXggPSAtTWF0aC5hYnMoTWF0aC5yb3VuZChzbGlkZVByb2dyZXNzKSkgKyBzbGlkZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0cmFuc2xhdGVTdHJpbmcgPSB0LmpvaW4oJywgJyk7XG4gICAgICAgIGNvbnN0IHJvdGF0ZVN0cmluZyA9IGByb3RhdGVYKCR7clswXX1kZWcpIHJvdGF0ZVkoJHtyWzFdfWRlZykgcm90YXRlWigke3JbMl19ZGVnKWA7XG4gICAgICAgIGNvbnN0IHNjYWxlU3RyaW5nID0gb3JpZ2luYWxQcm9ncmVzcyA8IDAgPyBgc2NhbGUoJHsxICsgKDEgLSBkYXRhLnNjYWxlKSAqIG9yaWdpbmFsUHJvZ3Jlc3MgKiBtdWx0aXBsaWVyfSlgIDogYHNjYWxlKCR7MSAtICgxIC0gZGF0YS5zY2FsZSkgKiBvcmlnaW5hbFByb2dyZXNzICogbXVsdGlwbGllcn0pYDtcbiAgICAgICAgY29uc3Qgb3BhY2l0eVN0cmluZyA9IG9yaWdpbmFsUHJvZ3Jlc3MgPCAwID8gMSArICgxIC0gZGF0YS5vcGFjaXR5KSAqIG9yaWdpbmFsUHJvZ3Jlc3MgKiBtdWx0aXBsaWVyIDogMSAtICgxIC0gZGF0YS5vcGFjaXR5KSAqIG9yaWdpbmFsUHJvZ3Jlc3MgKiBtdWx0aXBsaWVyO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0cmFuc2xhdGVTdHJpbmd9KSAke3JvdGF0ZVN0cmluZ30gJHtzY2FsZVN0cmluZ31gO1xuXG4gICAgICAgIC8vIFNldCBzaGFkb3dzXG4gICAgICAgIGlmIChjdXN0b20gJiYgZGF0YS5zaGFkb3cgfHwgIWN1c3RvbSkge1xuICAgICAgICAgIGxldCBzaGFkb3dFbCA9IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3cnKTtcbiAgICAgICAgICBpZiAoIXNoYWRvd0VsICYmIGRhdGEuc2hhZG93KSB7XG4gICAgICAgICAgICBzaGFkb3dFbCA9IGNyZWF0ZVNoYWRvdygnY3JlYXRpdmUnLCBzbGlkZUVsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoYWRvd0VsKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFkb3dPcGFjaXR5ID0gcGFyYW1zLnNoYWRvd1BlclByb2dyZXNzID8gcHJvZ3Jlc3MgKiAoMSAvIHBhcmFtcy5saW1pdFByb2dyZXNzKSA6IHByb2dyZXNzO1xuICAgICAgICAgICAgc2hhZG93RWwuc3R5bGUub3BhY2l0eSA9IE1hdGgubWluKE1hdGgubWF4KE1hdGguYWJzKHNoYWRvd09wYWNpdHkpLCAwKSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgc2xpZGVFbCk7XG4gICAgICAgIHRhcmdldEVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgdGFyZ2V0RWwuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHlTdHJpbmc7XG4gICAgICAgIGlmIChkYXRhLm9yaWdpbikge1xuICAgICAgICAgIHRhcmdldEVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGRhdGEub3JpZ2luO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgICAgY29uc3QgdHJhbnNmb3JtRWxlbWVudHMgPSBzd2lwZXIuc2xpZGVzLm1hcChzbGlkZUVsID0+IGdldFNsaWRlVHJhbnNmb3JtRWwoc2xpZGVFbCkpO1xuICAgICAgdHJhbnNmb3JtRWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZS1zaGFkb3cnKS5mb3JFYWNoKHNoYWRvd0VsID0+IHtcbiAgICAgICAgICBzaGFkb3dFbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCh7XG4gICAgICAgIHN3aXBlcixcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIHRyYW5zZm9ybUVsZW1lbnRzLFxuICAgICAgICBhbGxTbGlkZXM6IHRydWVcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZWZmZWN0SW5pdCh7XG4gICAgICBlZmZlY3Q6ICdjcmVhdGl2ZScsXG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb24sXG4gICAgICBwZXJzcGVjdGl2ZTogKCkgPT4gc3dpcGVyLnBhcmFtcy5jcmVhdGl2ZUVmZmVjdC5wZXJzcGVjdGl2ZSxcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogKCkgPT4gKHtcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgdmlydHVhbFRyYW5zbGF0ZTogIXN3aXBlci5wYXJhbXMuY3NzTW9kZVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEVmZmVjdENhcmRzKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgc3dpcGVyLFxuICAgICAgZXh0ZW5kUGFyYW1zLFxuICAgICAgb25cbiAgICB9ID0gX3JlZjtcbiAgICBleHRlbmRQYXJhbXMoe1xuICAgICAgY2FyZHNFZmZlY3Q6IHtcbiAgICAgICAgc2xpZGVTaGFkb3dzOiB0cnVlLFxuICAgICAgICByb3RhdGU6IHRydWUsXG4gICAgICAgIHBlclNsaWRlUm90YXRlOiAyLFxuICAgICAgICBwZXJTbGlkZU9mZnNldDogOFxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHNldFRyYW5zbGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2xpZGVzLFxuICAgICAgICBhY3RpdmVJbmRleCxcbiAgICAgICAgcnRsVHJhbnNsYXRlOiBydGxcbiAgICAgIH0gPSBzd2lwZXI7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmNhcmRzRWZmZWN0O1xuICAgICAgY29uc3Qge1xuICAgICAgICBzdGFydFRyYW5zbGF0ZSxcbiAgICAgICAgaXNUb3VjaGVkXG4gICAgICB9ID0gc3dpcGVyLnRvdWNoRXZlbnRzRGF0YTtcbiAgICAgIGNvbnN0IGN1cnJlbnRUcmFuc2xhdGUgPSBydGwgPyAtc3dpcGVyLnRyYW5zbGF0ZSA6IHN3aXBlci50cmFuc2xhdGU7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBzbGlkZUVsID0gc2xpZGVzW2ldO1xuICAgICAgICBjb25zdCBzbGlkZVByb2dyZXNzID0gc2xpZGVFbC5wcm9ncmVzcztcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heChzbGlkZVByb2dyZXNzLCAtNCksIDQpO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gc2xpZGVFbC5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgICAgaWYgKHN3aXBlci5wYXJhbXMuY2VudGVyZWRTbGlkZXMgJiYgIXN3aXBlci5wYXJhbXMuY3NzTW9kZSkge1xuICAgICAgICAgIHN3aXBlci53cmFwcGVyRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtzd2lwZXIubWluVHJhbnNsYXRlKCl9cHgpYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3dpcGVyLnBhcmFtcy5jZW50ZXJlZFNsaWRlcyAmJiBzd2lwZXIucGFyYW1zLmNzc01vZGUpIHtcbiAgICAgICAgICBvZmZzZXQgLT0gc2xpZGVzWzBdLnN3aXBlclNsaWRlT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGxldCB0WCA9IHN3aXBlci5wYXJhbXMuY3NzTW9kZSA/IC1vZmZzZXQgLSBzd2lwZXIudHJhbnNsYXRlIDogLW9mZnNldDtcbiAgICAgICAgbGV0IHRZID0gMDtcbiAgICAgICAgY29uc3QgdFogPSAtMTAwICogTWF0aC5hYnMocHJvZ3Jlc3MpO1xuICAgICAgICBsZXQgc2NhbGUgPSAxO1xuICAgICAgICBsZXQgcm90YXRlID0gLXBhcmFtcy5wZXJTbGlkZVJvdGF0ZSAqIHByb2dyZXNzO1xuICAgICAgICBsZXQgdFhBZGQgPSBwYXJhbXMucGVyU2xpZGVPZmZzZXQgLSBNYXRoLmFicyhwcm9ncmVzcykgKiAwLjc1O1xuICAgICAgICBjb25zdCBzbGlkZUluZGV4ID0gc3dpcGVyLnZpcnR1YWwgJiYgc3dpcGVyLnBhcmFtcy52aXJ0dWFsLmVuYWJsZWQgPyBzd2lwZXIudmlydHVhbC5mcm9tICsgaSA6IGk7XG4gICAgICAgIGNvbnN0IGlzU3dpcGVUb05leHQgPSAoc2xpZGVJbmRleCA9PT0gYWN0aXZlSW5kZXggfHwgc2xpZGVJbmRleCA9PT0gYWN0aXZlSW5kZXggLSAxKSAmJiBwcm9ncmVzcyA+IDAgJiYgcHJvZ3Jlc3MgPCAxICYmIChpc1RvdWNoZWQgfHwgc3dpcGVyLnBhcmFtcy5jc3NNb2RlKSAmJiBjdXJyZW50VHJhbnNsYXRlIDwgc3RhcnRUcmFuc2xhdGU7XG4gICAgICAgIGNvbnN0IGlzU3dpcGVUb1ByZXYgPSAoc2xpZGVJbmRleCA9PT0gYWN0aXZlSW5kZXggfHwgc2xpZGVJbmRleCA9PT0gYWN0aXZlSW5kZXggKyAxKSAmJiBwcm9ncmVzcyA8IDAgJiYgcHJvZ3Jlc3MgPiAtMSAmJiAoaXNUb3VjaGVkIHx8IHN3aXBlci5wYXJhbXMuY3NzTW9kZSkgJiYgY3VycmVudFRyYW5zbGF0ZSA+IHN0YXJ0VHJhbnNsYXRlO1xuICAgICAgICBpZiAoaXNTd2lwZVRvTmV4dCB8fCBpc1N3aXBlVG9QcmV2KSB7XG4gICAgICAgICAgY29uc3Qgc3ViUHJvZ3Jlc3MgPSAoMSAtIE1hdGguYWJzKChNYXRoLmFicyhwcm9ncmVzcykgLSAwLjUpIC8gMC41KSkgKiogMC41O1xuICAgICAgICAgIHJvdGF0ZSArPSAtMjggKiBwcm9ncmVzcyAqIHN1YlByb2dyZXNzO1xuICAgICAgICAgIHNjYWxlICs9IC0wLjUgKiBzdWJQcm9ncmVzcztcbiAgICAgICAgICB0WEFkZCArPSA5NiAqIHN1YlByb2dyZXNzO1xuICAgICAgICAgIHRZID0gYCR7LTI1ICogc3ViUHJvZ3Jlc3MgKiBNYXRoLmFicyhwcm9ncmVzcyl9JWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2dyZXNzIDwgMCkge1xuICAgICAgICAgIC8vIG5leHRcbiAgICAgICAgICB0WCA9IGBjYWxjKCR7dFh9cHggJHtydGwgPyAnLScgOiAnKyd9ICgke3RYQWRkICogTWF0aC5hYnMocHJvZ3Jlc3MpfSUpKWA7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3MgPiAwKSB7XG4gICAgICAgICAgLy8gcHJldlxuICAgICAgICAgIHRYID0gYGNhbGMoJHt0WH1weCAke3J0bCA/ICctJyA6ICcrJ30gKC0ke3RYQWRkICogTWF0aC5hYnMocHJvZ3Jlc3MpfSUpKWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdFggPSBgJHt0WH1weGA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgICBjb25zdCBwcmV2WSA9IHRZO1xuICAgICAgICAgIHRZID0gdFg7XG4gICAgICAgICAgdFggPSBwcmV2WTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2FsZVN0cmluZyA9IHByb2dyZXNzIDwgMCA/IGAkezEgKyAoMSAtIHNjYWxlKSAqIHByb2dyZXNzfWAgOiBgJHsxIC0gKDEgLSBzY2FsZSkgKiBwcm9ncmVzc31gO1xuXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGBcbiAgICAgICAgdHJhbnNsYXRlM2QoJHt0WH0sICR7dFl9LCAke3RafXB4KVxuICAgICAgICByb3RhdGVaKCR7cGFyYW1zLnJvdGF0ZSA/IHJ0bCA/IC1yb3RhdGUgOiByb3RhdGUgOiAwfWRlZylcbiAgICAgICAgc2NhbGUoJHtzY2FsZVN0cmluZ30pXG4gICAgICBgO1xuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXG5cbiAgICAgICAgaWYgKHBhcmFtcy5zbGlkZVNoYWRvd3MpIHtcbiAgICAgICAgICAvLyBTZXQgc2hhZG93c1xuICAgICAgICAgIGxldCBzaGFkb3dFbCA9IHNsaWRlRWwucXVlcnlTZWxlY3RvcignLnN3aXBlci1zbGlkZS1zaGFkb3cnKTtcbiAgICAgICAgICBpZiAoIXNoYWRvd0VsKSB7XG4gICAgICAgICAgICBzaGFkb3dFbCA9IGNyZWF0ZVNoYWRvdygnY2FyZHMnLCBzbGlkZUVsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoYWRvd0VsKSBzaGFkb3dFbC5zdHlsZS5vcGFjaXR5ID0gTWF0aC5taW4oTWF0aC5tYXgoKE1hdGguYWJzKHByb2dyZXNzKSAtIDAuNSkgLyAwLjUsIDApLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBzbGlkZUVsLnN0eWxlLnpJbmRleCA9IC1NYXRoLmFicyhNYXRoLnJvdW5kKHNsaWRlUHJvZ3Jlc3MpKSArIHNsaWRlcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgc2xpZGVFbCk7XG4gICAgICAgIHRhcmdldEVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHNldFRyYW5zaXRpb24gPSBkdXJhdGlvbiA9PiB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1FbGVtZW50cyA9IHN3aXBlci5zbGlkZXMubWFwKHNsaWRlRWwgPT4gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKSk7XG4gICAgICB0cmFuc2Zvcm1FbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7ZHVyYXRpb259bXNgO1xuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlLXNoYWRvdycpLmZvckVhY2goc2hhZG93RWwgPT4ge1xuICAgICAgICAgIHNoYWRvd0VsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kKHtcbiAgICAgICAgc3dpcGVyLFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgdHJhbnNmb3JtRWxlbWVudHNcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZWZmZWN0SW5pdCh7XG4gICAgICBlZmZlY3Q6ICdjYXJkcycsXG4gICAgICBzd2lwZXIsXG4gICAgICBvbixcbiAgICAgIHNldFRyYW5zbGF0ZSxcbiAgICAgIHNldFRyYW5zaXRpb24sXG4gICAgICBwZXJzcGVjdGl2ZTogKCkgPT4gdHJ1ZSxcbiAgICAgIG92ZXJ3cml0ZVBhcmFtczogKCkgPT4gKHtcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgdmlydHVhbFRyYW5zbGF0ZTogIXN3aXBlci5wYXJhbXMuY3NzTW9kZVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTd2lwZXIgMTEuMS40XG4gICAqIE1vc3QgbW9kZXJuIG1vYmlsZSB0b3VjaCBzbGlkZXIgYW5kIGZyYW1ld29yayB3aXRoIGhhcmR3YXJlIGFjY2VsZXJhdGVkIHRyYW5zaXRpb25zXG4gICAqIGh0dHBzOi8vc3dpcGVyanMuY29tXG4gICAqXG4gICAqIENvcHlyaWdodCAyMDE0LTIwMjQgVmxhZGltaXIgS2hhcmxhbXBpZGlcbiAgICpcbiAgICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gICAqXG4gICAqIFJlbGVhc2VkIG9uOiBNYXkgMzAsIDIwMjRcbiAgICovXG5cblxuICAvLyBTd2lwZXIgQ2xhc3NcbiAgY29uc3QgbW9kdWxlcyA9IFtWaXJ0dWFsLCBLZXlib2FyZCwgTW91c2V3aGVlbCwgTmF2aWdhdGlvbiwgUGFnaW5hdGlvbiwgU2Nyb2xsYmFyLCBQYXJhbGxheCwgWm9vbSwgQ29udHJvbGxlciwgQTExeSwgSGlzdG9yeSwgSGFzaE5hdmlnYXRpb24sIEF1dG9wbGF5LCBUaHVtYiwgZnJlZU1vZGUsIEdyaWQsIE1hbmlwdWxhdGlvbiwgRWZmZWN0RmFkZSwgRWZmZWN0Q3ViZSwgRWZmZWN0RmxpcCwgRWZmZWN0Q292ZXJmbG93LCBFZmZlY3RDcmVhdGl2ZSwgRWZmZWN0Q2FyZHNdO1xuICBTd2lwZXIudXNlKG1vZHVsZXMpO1xuXG4gIC8qIHVuZGVyc2NvcmUgaW4gbmFtZSAtPiB3YXRjaCBmb3IgY2hhbmdlcyAqL1xuICBjb25zdCBwYXJhbXNMaXN0ID0gWydldmVudHNQcmVmaXgnLCAnaW5qZWN0U3R5bGVzJywgJ2luamVjdFN0eWxlc1VybHMnLCAnbW9kdWxlcycsICdpbml0JywgJ19kaXJlY3Rpb24nLCAnb25lV2F5TW92ZW1lbnQnLCAnc3dpcGVyRWxlbWVudE5vZGVOYW1lJywgJ3RvdWNoRXZlbnRzVGFyZ2V0JywgJ2luaXRpYWxTbGlkZScsICdfc3BlZWQnLCAnY3NzTW9kZScsICd1cGRhdGVPbldpbmRvd1Jlc2l6ZScsICdyZXNpemVPYnNlcnZlcicsICduZXN0ZWQnLCAnZm9jdXNhYmxlRWxlbWVudHMnLCAnX2VuYWJsZWQnLCAnX3dpZHRoJywgJ19oZWlnaHQnLCAncHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uJywgJ3VzZXJBZ2VudCcsICd1cmwnLCAnX2VkZ2VTd2lwZURldGVjdGlvbicsICdfZWRnZVN3aXBlVGhyZXNob2xkJywgJ19mcmVlTW9kZScsICdfYXV0b0hlaWdodCcsICdzZXRXcmFwcGVyU2l6ZScsICd2aXJ0dWFsVHJhbnNsYXRlJywgJ19lZmZlY3QnLCAnYnJlYWtwb2ludHMnLCAnYnJlYWtwb2ludHNCYXNlJywgJ19zcGFjZUJldHdlZW4nLCAnX3NsaWRlc1BlclZpZXcnLCAnbWF4QmFja2ZhY2VIaWRkZW5TbGlkZXMnLCAnX2dyaWQnLCAnX3NsaWRlc1Blckdyb3VwJywgJ19zbGlkZXNQZXJHcm91cFNraXAnLCAnX3NsaWRlc1Blckdyb3VwQXV0bycsICdfY2VudGVyZWRTbGlkZXMnLCAnX2NlbnRlcmVkU2xpZGVzQm91bmRzJywgJ19zbGlkZXNPZmZzZXRCZWZvcmUnLCAnX3NsaWRlc09mZnNldEFmdGVyJywgJ25vcm1hbGl6ZVNsaWRlSW5kZXgnLCAnX2NlbnRlckluc3VmZmljaWVudFNsaWRlcycsICdfd2F0Y2hPdmVyZmxvdycsICdyb3VuZExlbmd0aHMnLCAndG91Y2hSYXRpbycsICd0b3VjaEFuZ2xlJywgJ3NpbXVsYXRlVG91Y2gnLCAnX3Nob3J0U3dpcGVzJywgJ19sb25nU3dpcGVzJywgJ2xvbmdTd2lwZXNSYXRpbycsICdsb25nU3dpcGVzTXMnLCAnX2ZvbGxvd0ZpbmdlcicsICdhbGxvd1RvdWNoTW92ZScsICdfdGhyZXNob2xkJywgJ3RvdWNoTW92ZVN0b3BQcm9wYWdhdGlvbicsICd0b3VjaFN0YXJ0UHJldmVudERlZmF1bHQnLCAndG91Y2hTdGFydEZvcmNlUHJldmVudERlZmF1bHQnLCAndG91Y2hSZWxlYXNlT25FZGdlcycsICd1bmlxdWVOYXZFbGVtZW50cycsICdfcmVzaXN0YW5jZScsICdfcmVzaXN0YW5jZVJhdGlvJywgJ193YXRjaFNsaWRlc1Byb2dyZXNzJywgJ19ncmFiQ3Vyc29yJywgJ3ByZXZlbnRDbGlja3MnLCAncHJldmVudENsaWNrc1Byb3BhZ2F0aW9uJywgJ19zbGlkZVRvQ2xpY2tlZFNsaWRlJywgJ19sb29wJywgJ2xvb3BBZGRpdGlvbmFsU2xpZGVzJywgJ2xvb3BBZGRCbGFua1NsaWRlcycsICdsb29wUHJldmVudHNTbGlkaW5nJywgJ19yZXdpbmQnLCAnX2FsbG93U2xpZGVQcmV2JywgJ19hbGxvd1NsaWRlTmV4dCcsICdfc3dpcGVIYW5kbGVyJywgJ19ub1N3aXBpbmcnLCAnbm9Td2lwaW5nQ2xhc3MnLCAnbm9Td2lwaW5nU2VsZWN0b3InLCAncGFzc2l2ZUxpc3RlbmVycycsICdjb250YWluZXJNb2RpZmllckNsYXNzJywgJ3NsaWRlQ2xhc3MnLCAnc2xpZGVBY3RpdmVDbGFzcycsICdzbGlkZVZpc2libGVDbGFzcycsICdzbGlkZUZ1bGx5VmlzaWJsZUNsYXNzJywgJ3NsaWRlTmV4dENsYXNzJywgJ3NsaWRlUHJldkNsYXNzJywgJ3NsaWRlQmxhbmtDbGFzcycsICd3cmFwcGVyQ2xhc3MnLCAnbGF6eVByZWxvYWRlckNsYXNzJywgJ2xhenlQcmVsb2FkUHJldk5leHQnLCAncnVuQ2FsbGJhY2tzT25Jbml0JywgJ29ic2VydmVyJywgJ29ic2VydmVQYXJlbnRzJywgJ29ic2VydmVTbGlkZUNoaWxkcmVuJyxcbiAgLy8gbW9kdWxlc1xuICAnYTExeScsICdfYXV0b3BsYXknLCAnX2NvbnRyb2xsZXInLCAnY292ZXJmbG93RWZmZWN0JywgJ2N1YmVFZmZlY3QnLCAnZmFkZUVmZmVjdCcsICdmbGlwRWZmZWN0JywgJ2NyZWF0aXZlRWZmZWN0JywgJ2NhcmRzRWZmZWN0JywgJ2hhc2hOYXZpZ2F0aW9uJywgJ2hpc3RvcnknLCAna2V5Ym9hcmQnLCAnbW91c2V3aGVlbCcsICdfbmF2aWdhdGlvbicsICdfcGFnaW5hdGlvbicsICdwYXJhbGxheCcsICdfc2Nyb2xsYmFyJywgJ190aHVtYnMnLCAndmlydHVhbCcsICd6b29tJywgJ2NvbnRyb2wnXTtcblxuICBmdW5jdGlvbiBpc09iamVjdChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiBvICE9PSBudWxsICYmIG8uY29uc3RydWN0b3IgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKSA9PT0gJ09iamVjdCcgJiYgIW8uX19zd2lwZXJfXztcbiAgfVxuICBmdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzcmMpIHtcbiAgICBjb25zdCBub0V4dGVuZCA9IFsnX19wcm90b19fJywgJ2NvbnN0cnVjdG9yJywgJ3Byb3RvdHlwZSddO1xuICAgIE9iamVjdC5rZXlzKHNyYykuZmlsdGVyKGtleSA9PiBub0V4dGVuZC5pbmRleE9mKGtleSkgPCAwKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRhcmdldFtrZXldID09PSAndW5kZWZpbmVkJykgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTtlbHNlIGlmIChpc09iamVjdChzcmNba2V5XSkgJiYgaXNPYmplY3QodGFyZ2V0W2tleV0pICYmIE9iamVjdC5rZXlzKHNyY1trZXldKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChzcmNba2V5XS5fX3N3aXBlcl9fKSB0YXJnZXRba2V5XSA9IHNyY1trZXldO2Vsc2UgZXh0ZW5kKHRhcmdldFtrZXldLCBzcmNba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNyY1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIG5lZWRzTmF2aWdhdGlvbihwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zLm5hdmlnYXRpb24gJiYgdHlwZW9mIHBhcmFtcy5uYXZpZ2F0aW9uLm5leHRFbCA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHBhcmFtcy5uYXZpZ2F0aW9uLnByZXZFbCA9PT0gJ3VuZGVmaW5lZCc7XG4gIH1cbiAgZnVuY3Rpb24gbmVlZHNQYWdpbmF0aW9uKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMgPT09IHZvaWQgMCkge1xuICAgICAgcGFyYW1zID0ge307XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXMucGFnaW5hdGlvbiAmJiB0eXBlb2YgcGFyYW1zLnBhZ2luYXRpb24uZWwgPT09ICd1bmRlZmluZWQnO1xuICB9XG4gIGZ1bmN0aW9uIG5lZWRzU2Nyb2xsYmFyKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMgPT09IHZvaWQgMCkge1xuICAgICAgcGFyYW1zID0ge307XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXMuc2Nyb2xsYmFyICYmIHR5cGVvZiBwYXJhbXMuc2Nyb2xsYmFyLmVsID09PSAndW5kZWZpbmVkJztcbiAgfVxuICBmdW5jdGlvbiBhdHRyVG9Qcm9wKGF0dHJOYW1lKSB7XG4gICAgaWYgKGF0dHJOYW1lID09PSB2b2lkIDApIHtcbiAgICAgIGF0dHJOYW1lID0gJyc7XG4gICAgfVxuICAgIHJldHVybiBhdHRyTmFtZS5yZXBsYWNlKC8tW2Etel0vZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgnLScsICcnKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVTd2lwZXIoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBzd2lwZXIsXG4gICAgICBzbGlkZXMsXG4gICAgICBwYXNzZWRQYXJhbXMsXG4gICAgICBjaGFuZ2VkUGFyYW1zLFxuICAgICAgbmV4dEVsLFxuICAgICAgcHJldkVsLFxuICAgICAgc2Nyb2xsYmFyRWwsXG4gICAgICBwYWdpbmF0aW9uRWxcbiAgICB9ID0gX3JlZjtcbiAgICBjb25zdCB1cGRhdGVQYXJhbXMgPSBjaGFuZ2VkUGFyYW1zLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnY2hpbGRyZW4nICYmIGtleSAhPT0gJ2RpcmVjdGlvbicgJiYga2V5ICE9PSAnd3JhcHBlckNsYXNzJyk7XG4gICAgY29uc3Qge1xuICAgICAgcGFyYW1zOiBjdXJyZW50UGFyYW1zLFxuICAgICAgcGFnaW5hdGlvbixcbiAgICAgIG5hdmlnYXRpb24sXG4gICAgICBzY3JvbGxiYXIsXG4gICAgICB2aXJ0dWFsLFxuICAgICAgdGh1bWJzXG4gICAgfSA9IHN3aXBlcjtcbiAgICBsZXQgbmVlZFRodW1ic0luaXQ7XG4gICAgbGV0IG5lZWRDb250cm9sbGVySW5pdDtcbiAgICBsZXQgbmVlZFBhZ2luYXRpb25Jbml0O1xuICAgIGxldCBuZWVkU2Nyb2xsYmFySW5pdDtcbiAgICBsZXQgbmVlZE5hdmlnYXRpb25Jbml0O1xuICAgIGxldCBsb29wTmVlZERlc3Ryb3k7XG4gICAgbGV0IGxvb3BOZWVkRW5hYmxlO1xuICAgIGxldCBsb29wTmVlZFJlbG9vcDtcbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygndGh1bWJzJykgJiYgcGFzc2VkUGFyYW1zLnRodW1icyAmJiBwYXNzZWRQYXJhbXMudGh1bWJzLnN3aXBlciAmJiBjdXJyZW50UGFyYW1zLnRodW1icyAmJiAhY3VycmVudFBhcmFtcy50aHVtYnMuc3dpcGVyKSB7XG4gICAgICBuZWVkVGh1bWJzSW5pdCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCdjb250cm9sbGVyJykgJiYgcGFzc2VkUGFyYW1zLmNvbnRyb2xsZXIgJiYgcGFzc2VkUGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCAmJiBjdXJyZW50UGFyYW1zLmNvbnRyb2xsZXIgJiYgIWN1cnJlbnRQYXJhbXMuY29udHJvbGxlci5jb250cm9sKSB7XG4gICAgICBuZWVkQ29udHJvbGxlckluaXQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygncGFnaW5hdGlvbicpICYmIHBhc3NlZFBhcmFtcy5wYWdpbmF0aW9uICYmIChwYXNzZWRQYXJhbXMucGFnaW5hdGlvbi5lbCB8fCBwYWdpbmF0aW9uRWwpICYmIChjdXJyZW50UGFyYW1zLnBhZ2luYXRpb24gfHwgY3VycmVudFBhcmFtcy5wYWdpbmF0aW9uID09PSBmYWxzZSkgJiYgcGFnaW5hdGlvbiAmJiAhcGFnaW5hdGlvbi5lbCkge1xuICAgICAgbmVlZFBhZ2luYXRpb25Jbml0ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ3Njcm9sbGJhcicpICYmIHBhc3NlZFBhcmFtcy5zY3JvbGxiYXIgJiYgKHBhc3NlZFBhcmFtcy5zY3JvbGxiYXIuZWwgfHwgc2Nyb2xsYmFyRWwpICYmIChjdXJyZW50UGFyYW1zLnNjcm9sbGJhciB8fCBjdXJyZW50UGFyYW1zLnNjcm9sbGJhciA9PT0gZmFsc2UpICYmIHNjcm9sbGJhciAmJiAhc2Nyb2xsYmFyLmVsKSB7XG4gICAgICBuZWVkU2Nyb2xsYmFySW5pdCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCduYXZpZ2F0aW9uJykgJiYgcGFzc2VkUGFyYW1zLm5hdmlnYXRpb24gJiYgKHBhc3NlZFBhcmFtcy5uYXZpZ2F0aW9uLnByZXZFbCB8fCBwcmV2RWwpICYmIChwYXNzZWRQYXJhbXMubmF2aWdhdGlvbi5uZXh0RWwgfHwgbmV4dEVsKSAmJiAoY3VycmVudFBhcmFtcy5uYXZpZ2F0aW9uIHx8IGN1cnJlbnRQYXJhbXMubmF2aWdhdGlvbiA9PT0gZmFsc2UpICYmIG5hdmlnYXRpb24gJiYgIW5hdmlnYXRpb24ucHJldkVsICYmICFuYXZpZ2F0aW9uLm5leHRFbCkge1xuICAgICAgbmVlZE5hdmlnYXRpb25Jbml0ID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgZGVzdHJveU1vZHVsZSA9IG1vZCA9PiB7XG4gICAgICBpZiAoIXN3aXBlclttb2RdKSByZXR1cm47XG4gICAgICBzd2lwZXJbbW9kXS5kZXN0cm95KCk7XG4gICAgICBpZiAobW9kID09PSAnbmF2aWdhdGlvbicpIHtcbiAgICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgICBzd2lwZXJbbW9kXS5wcmV2RWwucmVtb3ZlKCk7XG4gICAgICAgICAgc3dpcGVyW21vZF0ubmV4dEVsLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRQYXJhbXNbbW9kXS5wcmV2RWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIGN1cnJlbnRQYXJhbXNbbW9kXS5uZXh0RWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHN3aXBlclttb2RdLnByZXZFbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgc3dpcGVyW21vZF0ubmV4dEVsID0gdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQpIHtcbiAgICAgICAgICBzd2lwZXJbbW9kXS5lbC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50UGFyYW1zW21vZF0uZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHN3aXBlclttb2RdLmVsID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ2xvb3AnKSAmJiBzd2lwZXIuaXNFbGVtZW50KSB7XG4gICAgICBpZiAoY3VycmVudFBhcmFtcy5sb29wICYmICFwYXNzZWRQYXJhbXMubG9vcCkge1xuICAgICAgICBsb29wTmVlZERlc3Ryb3kgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICghY3VycmVudFBhcmFtcy5sb29wICYmIHBhc3NlZFBhcmFtcy5sb29wKSB7XG4gICAgICAgIGxvb3BOZWVkRW5hYmxlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvb3BOZWVkUmVsb29wID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlUGFyYW1zLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChpc09iamVjdChjdXJyZW50UGFyYW1zW2tleV0pICYmIGlzT2JqZWN0KHBhc3NlZFBhcmFtc1trZXldKSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGN1cnJlbnRQYXJhbXNba2V5XSwgcGFzc2VkUGFyYW1zW2tleV0pO1xuICAgICAgICBpZiAoKGtleSA9PT0gJ25hdmlnYXRpb24nIHx8IGtleSA9PT0gJ3BhZ2luYXRpb24nIHx8IGtleSA9PT0gJ3Njcm9sbGJhcicpICYmICdlbmFibGVkJyBpbiBwYXNzZWRQYXJhbXNba2V5XSAmJiAhcGFzc2VkUGFyYW1zW2tleV0uZW5hYmxlZCkge1xuICAgICAgICAgIGRlc3Ryb3lNb2R1bGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBwYXNzZWRQYXJhbXNba2V5XTtcbiAgICAgICAgaWYgKChuZXdWYWx1ZSA9PT0gdHJ1ZSB8fCBuZXdWYWx1ZSA9PT0gZmFsc2UpICYmIChrZXkgPT09ICduYXZpZ2F0aW9uJyB8fCBrZXkgPT09ICdwYWdpbmF0aW9uJyB8fCBrZXkgPT09ICdzY3JvbGxiYXInKSkge1xuICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGRlc3Ryb3lNb2R1bGUoa2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudFBhcmFtc1trZXldID0gcGFzc2VkUGFyYW1zW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodXBkYXRlUGFyYW1zLmluY2x1ZGVzKCdjb250cm9sbGVyJykgJiYgIW5lZWRDb250cm9sbGVySW5pdCAmJiBzd2lwZXIuY29udHJvbGxlciAmJiBzd2lwZXIuY29udHJvbGxlci5jb250cm9sICYmIGN1cnJlbnRQYXJhbXMuY29udHJvbGxlciAmJiBjdXJyZW50UGFyYW1zLmNvbnRyb2xsZXIuY29udHJvbCkge1xuICAgICAgc3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCA9IGN1cnJlbnRQYXJhbXMuY29udHJvbGxlci5jb250cm9sO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnY2hpbGRyZW4nKSAmJiBzbGlkZXMgJiYgdmlydHVhbCAmJiBjdXJyZW50UGFyYW1zLnZpcnR1YWwuZW5hYmxlZCkge1xuICAgICAgdmlydHVhbC5zbGlkZXMgPSBzbGlkZXM7XG4gICAgICB2aXJ0dWFsLnVwZGF0ZSh0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZWRQYXJhbXMuaW5jbHVkZXMoJ3ZpcnR1YWwnKSAmJiB2aXJ0dWFsICYmIGN1cnJlbnRQYXJhbXMudmlydHVhbC5lbmFibGVkKSB7XG4gICAgICBpZiAoc2xpZGVzKSB2aXJ0dWFsLnNsaWRlcyA9IHNsaWRlcztcbiAgICAgIHZpcnR1YWwudXBkYXRlKHRydWUpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFBhcmFtcy5pbmNsdWRlcygnY2hpbGRyZW4nKSAmJiBzbGlkZXMgJiYgY3VycmVudFBhcmFtcy5sb29wKSB7XG4gICAgICBsb29wTmVlZFJlbG9vcCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChuZWVkVGh1bWJzSW5pdCkge1xuICAgICAgY29uc3QgaW5pdGlhbGl6ZWQgPSB0aHVtYnMuaW5pdCgpO1xuICAgICAgaWYgKGluaXRpYWxpemVkKSB0aHVtYnMudXBkYXRlKHRydWUpO1xuICAgIH1cbiAgICBpZiAobmVlZENvbnRyb2xsZXJJbml0KSB7XG4gICAgICBzd2lwZXIuY29udHJvbGxlci5jb250cm9sID0gY3VycmVudFBhcmFtcy5jb250cm9sbGVyLmNvbnRyb2w7XG4gICAgfVxuICAgIGlmIChuZWVkUGFnaW5hdGlvbkluaXQpIHtcbiAgICAgIGlmIChzd2lwZXIuaXNFbGVtZW50ICYmICghcGFnaW5hdGlvbkVsIHx8IHR5cGVvZiBwYWdpbmF0aW9uRWwgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBwYWdpbmF0aW9uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcGFnaW5hdGlvbkVsLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1wYWdpbmF0aW9uJyk7XG4gICAgICAgIHBhZ2luYXRpb25FbC5wYXJ0LmFkZCgncGFnaW5hdGlvbicpO1xuICAgICAgICBzd2lwZXIuZWwuYXBwZW5kQ2hpbGQocGFnaW5hdGlvbkVsKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYWdpbmF0aW9uRWwpIGN1cnJlbnRQYXJhbXMucGFnaW5hdGlvbi5lbCA9IHBhZ2luYXRpb25FbDtcbiAgICAgIHBhZ2luYXRpb24uaW5pdCgpO1xuICAgICAgcGFnaW5hdGlvbi5yZW5kZXIoKTtcbiAgICAgIHBhZ2luYXRpb24udXBkYXRlKCk7XG4gICAgfVxuICAgIGlmIChuZWVkU2Nyb2xsYmFySW5pdCkge1xuICAgICAgaWYgKHN3aXBlci5pc0VsZW1lbnQgJiYgKCFzY3JvbGxiYXJFbCB8fCB0eXBlb2Ygc2Nyb2xsYmFyRWwgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBzY3JvbGxiYXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzY3JvbGxiYXJFbC5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2Nyb2xsYmFyJyk7XG4gICAgICAgIHNjcm9sbGJhckVsLnBhcnQuYWRkKCdzY3JvbGxiYXInKTtcbiAgICAgICAgc3dpcGVyLmVsLmFwcGVuZENoaWxkKHNjcm9sbGJhckVsKTtcbiAgICAgIH1cbiAgICAgIGlmIChzY3JvbGxiYXJFbCkgY3VycmVudFBhcmFtcy5zY3JvbGxiYXIuZWwgPSBzY3JvbGxiYXJFbDtcbiAgICAgIHNjcm9sbGJhci5pbml0KCk7XG4gICAgICBzY3JvbGxiYXIudXBkYXRlU2l6ZSgpO1xuICAgICAgc2Nyb2xsYmFyLnNldFRyYW5zbGF0ZSgpO1xuICAgIH1cbiAgICBpZiAobmVlZE5hdmlnYXRpb25Jbml0KSB7XG4gICAgICBpZiAoc3dpcGVyLmlzRWxlbWVudCkge1xuICAgICAgICBpZiAoIW5leHRFbCB8fCB0eXBlb2YgbmV4dEVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIG5leHRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIG5leHRFbC5jbGFzc0xpc3QuYWRkKCdzd2lwZXItYnV0dG9uLW5leHQnKTtcbiAgICAgICAgICBuZXh0RWwuaW5uZXJIVE1MID0gc3dpcGVyLmhvc3RFbC5jb25zdHJ1Y3Rvci5uZXh0QnV0dG9uU3ZnO1xuICAgICAgICAgIG5leHRFbC5wYXJ0LmFkZCgnYnV0dG9uLW5leHQnKTtcbiAgICAgICAgICBzd2lwZXIuZWwuYXBwZW5kQ2hpbGQobmV4dEVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZXZFbCB8fCB0eXBlb2YgcHJldkVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHByZXZFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHByZXZFbC5jbGFzc0xpc3QuYWRkKCdzd2lwZXItYnV0dG9uLXByZXYnKTtcbiAgICAgICAgICBwcmV2RWwuaW5uZXJIVE1MID0gc3dpcGVyLmhvc3RFbC5jb25zdHJ1Y3Rvci5wcmV2QnV0dG9uU3ZnO1xuICAgICAgICAgIHByZXZFbC5wYXJ0LmFkZCgnYnV0dG9uLXByZXYnKTtcbiAgICAgICAgICBzd2lwZXIuZWwuYXBwZW5kQ2hpbGQocHJldkVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG5leHRFbCkgY3VycmVudFBhcmFtcy5uYXZpZ2F0aW9uLm5leHRFbCA9IG5leHRFbDtcbiAgICAgIGlmIChwcmV2RWwpIGN1cnJlbnRQYXJhbXMubmF2aWdhdGlvbi5wcmV2RWwgPSBwcmV2RWw7XG4gICAgICBuYXZpZ2F0aW9uLmluaXQoKTtcbiAgICAgIG5hdmlnYXRpb24udXBkYXRlKCk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCdhbGxvd1NsaWRlTmV4dCcpKSB7XG4gICAgICBzd2lwZXIuYWxsb3dTbGlkZU5leHQgPSBwYXNzZWRQYXJhbXMuYWxsb3dTbGlkZU5leHQ7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCdhbGxvd1NsaWRlUHJldicpKSB7XG4gICAgICBzd2lwZXIuYWxsb3dTbGlkZVByZXYgPSBwYXNzZWRQYXJhbXMuYWxsb3dTbGlkZVByZXY7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUGFyYW1zLmluY2x1ZGVzKCdkaXJlY3Rpb24nKSkge1xuICAgICAgc3dpcGVyLmNoYW5nZURpcmVjdGlvbihwYXNzZWRQYXJhbXMuZGlyZWN0aW9uLCBmYWxzZSk7XG4gICAgfVxuICAgIGlmIChsb29wTmVlZERlc3Ryb3kgfHwgbG9vcE5lZWRSZWxvb3ApIHtcbiAgICAgIHN3aXBlci5sb29wRGVzdHJveSgpO1xuICAgIH1cbiAgICBpZiAobG9vcE5lZWRFbmFibGUgfHwgbG9vcE5lZWRSZWxvb3ApIHtcbiAgICAgIHN3aXBlci5sb29wQ3JlYXRlKCk7XG4gICAgfVxuICAgIHN3aXBlci51cGRhdGUoKTtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdFZhbHVlID0gdmFsID0+IHtcbiAgICBpZiAocGFyc2VGbG9hdCh2YWwpID09PSBOdW1iZXIodmFsKSkgcmV0dXJuIE51bWJlcih2YWwpO1xuICAgIGlmICh2YWwgPT09ICd0cnVlJykgcmV0dXJuIHRydWU7XG4gICAgaWYgKHZhbCA9PT0gJycpIHJldHVybiB0cnVlO1xuICAgIGlmICh2YWwgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcbiAgICBpZiAodmFsID09PSAnbnVsbCcpIHJldHVybiBudWxsO1xuICAgIGlmICh2YWwgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwuaW5jbHVkZXMoJ3snKSAmJiB2YWwuaW5jbHVkZXMoJ30nKSAmJiB2YWwuaW5jbHVkZXMoJ1wiJykpIHtcbiAgICAgIGxldCB2O1xuICAgICAgdHJ5IHtcbiAgICAgICAgdiA9IEpTT04ucGFyc2UodmFsKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB2ID0gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH07XG4gIGNvbnN0IG1vZHVsZXNQYXJhbXNMaXN0ID0gWydhMTF5JywgJ2F1dG9wbGF5JywgJ2NvbnRyb2xsZXInLCAnY2FyZHMtZWZmZWN0JywgJ2NvdmVyZmxvdy1lZmZlY3QnLCAnY3JlYXRpdmUtZWZmZWN0JywgJ2N1YmUtZWZmZWN0JywgJ2ZhZGUtZWZmZWN0JywgJ2ZsaXAtZWZmZWN0JywgJ2ZyZWUtbW9kZScsICdncmlkJywgJ2hhc2gtbmF2aWdhdGlvbicsICdoaXN0b3J5JywgJ2tleWJvYXJkJywgJ21vdXNld2hlZWwnLCAnbmF2aWdhdGlvbicsICdwYWdpbmF0aW9uJywgJ3BhcmFsbGF4JywgJ3Njcm9sbGJhcicsICd0aHVtYnMnLCAndmlydHVhbCcsICd6b29tJ107XG4gIGZ1bmN0aW9uIGdldFBhcmFtcyhlbGVtZW50LCBwcm9wTmFtZSwgcHJvcFZhbHVlKSB7XG4gICAgY29uc3QgcGFyYW1zID0ge307XG4gICAgY29uc3QgcGFzc2VkUGFyYW1zID0ge307XG4gICAgZXh0ZW5kKHBhcmFtcywgZGVmYXVsdHMpO1xuICAgIGNvbnN0IGxvY2FsUGFyYW1zTGlzdCA9IFsuLi5wYXJhbXNMaXN0LCAnb24nXTtcbiAgICBjb25zdCBhbGxvd2VkUGFyYW1zID0gbG9jYWxQYXJhbXNMaXN0Lm1hcChrZXkgPT4ga2V5LnJlcGxhY2UoL18vLCAnJykpO1xuXG4gICAgLy8gRmlyc3QgY2hlY2sgcHJvcHNcbiAgICBsb2NhbFBhcmFtc0xpc3QuZm9yRWFjaChwYXJhbU5hbWUgPT4ge1xuICAgICAgcGFyYW1OYW1lID0gcGFyYW1OYW1lLnJlcGxhY2UoJ18nLCAnJyk7XG4gICAgICBpZiAodHlwZW9mIGVsZW1lbnRbcGFyYW1OYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcGFzc2VkUGFyYW1zW3BhcmFtTmFtZV0gPSBlbGVtZW50W3BhcmFtTmFtZV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBBdHRyaWJ1dGVzXG4gICAgY29uc3QgYXR0cnNMaXN0ID0gWy4uLmVsZW1lbnQuYXR0cmlidXRlc107XG4gICAgaWYgKHR5cGVvZiBwcm9wTmFtZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHByb3BWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGF0dHJzTGlzdC5wdXNoKHtcbiAgICAgICAgbmFtZTogcHJvcE5hbWUsXG4gICAgICAgIHZhbHVlOiBpc09iamVjdChwcm9wVmFsdWUpID8ge1xuICAgICAgICAgIC4uLnByb3BWYWx1ZVxuICAgICAgICB9IDogcHJvcFZhbHVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgYXR0cnNMaXN0LmZvckVhY2goYXR0ciA9PiB7XG4gICAgICBjb25zdCBtb2R1bGVQYXJhbSA9IG1vZHVsZXNQYXJhbXNMaXN0LmZpbHRlcihtUGFyYW0gPT4gYXR0ci5uYW1lLmluZGV4T2YoYCR7bVBhcmFtfS1gKSA9PT0gMClbMF07XG4gICAgICBpZiAobW9kdWxlUGFyYW0pIHtcbiAgICAgICAgY29uc3QgcGFyZW50T2JqTmFtZSA9IGF0dHJUb1Byb3AobW9kdWxlUGFyYW0pO1xuICAgICAgICBjb25zdCBzdWJPYmpOYW1lID0gYXR0clRvUHJvcChhdHRyLm5hbWUuc3BsaXQoYCR7bW9kdWxlUGFyYW19LWApWzFdKTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXNzZWRQYXJhbXNbcGFyZW50T2JqTmFtZV0gPT09ICd1bmRlZmluZWQnKSBwYXNzZWRQYXJhbXNbcGFyZW50T2JqTmFtZV0gPSB7fTtcbiAgICAgICAgaWYgKHBhc3NlZFBhcmFtc1twYXJlbnRPYmpOYW1lXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHBhc3NlZFBhcmFtc1twYXJlbnRPYmpOYW1lXSA9IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHBhc3NlZFBhcmFtc1twYXJlbnRPYmpOYW1lXVtzdWJPYmpOYW1lXSA9IGZvcm1hdFZhbHVlKGF0dHIudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGF0dHJUb1Byb3AoYXR0ci5uYW1lKTtcbiAgICAgICAgaWYgKCFhbGxvd2VkUGFyYW1zLmluY2x1ZGVzKG5hbWUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZm9ybWF0VmFsdWUoYXR0ci52YWx1ZSk7XG4gICAgICAgIGlmIChwYXNzZWRQYXJhbXNbbmFtZV0gJiYgbW9kdWxlc1BhcmFtc0xpc3QuaW5jbHVkZXMoYXR0ci5uYW1lKSAmJiAhaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgaWYgKHBhc3NlZFBhcmFtc1tuYW1lXS5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0KSB7XG4gICAgICAgICAgICBwYXNzZWRQYXJhbXNbbmFtZV0gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFzc2VkUGFyYW1zW25hbWVdLmVuYWJsZWQgPSAhIXZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhc3NlZFBhcmFtc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgZXh0ZW5kKHBhcmFtcywgcGFzc2VkUGFyYW1zKTtcbiAgICBpZiAocGFyYW1zLm5hdmlnYXRpb24pIHtcbiAgICAgIHBhcmFtcy5uYXZpZ2F0aW9uID0ge1xuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgIC4uLihwYXJhbXMubmF2aWdhdGlvbiAhPT0gdHJ1ZSA/IHBhcmFtcy5uYXZpZ2F0aW9uIDoge30pXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAocGFyYW1zLm5hdmlnYXRpb24gPT09IGZhbHNlKSB7XG4gICAgICBkZWxldGUgcGFyYW1zLm5hdmlnYXRpb247XG4gICAgfVxuICAgIGlmIChwYXJhbXMuc2Nyb2xsYmFyKSB7XG4gICAgICBwYXJhbXMuc2Nyb2xsYmFyID0ge1xuICAgICAgICBlbDogJy5zd2lwZXItc2Nyb2xsYmFyJyxcbiAgICAgICAgLi4uKHBhcmFtcy5zY3JvbGxiYXIgIT09IHRydWUgPyBwYXJhbXMuc2Nyb2xsYmFyIDoge30pXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAocGFyYW1zLnNjcm9sbGJhciA9PT0gZmFsc2UpIHtcbiAgICAgIGRlbGV0ZSBwYXJhbXMuc2Nyb2xsYmFyO1xuICAgIH1cbiAgICBpZiAocGFyYW1zLnBhZ2luYXRpb24pIHtcbiAgICAgIHBhcmFtcy5wYWdpbmF0aW9uID0ge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgIC4uLihwYXJhbXMucGFnaW5hdGlvbiAhPT0gdHJ1ZSA/IHBhcmFtcy5wYWdpbmF0aW9uIDoge30pXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAocGFyYW1zLnBhZ2luYXRpb24gPT09IGZhbHNlKSB7XG4gICAgICBkZWxldGUgcGFyYW1zLnBhZ2luYXRpb247XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBwYXJhbXMsXG4gICAgICBwYXNzZWRQYXJhbXNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFN3aXBlciBDdXN0b20gRWxlbWVudCAxMS4xLjRcbiAgICogTW9zdCBtb2Rlcm4gbW9iaWxlIHRvdWNoIHNsaWRlciBhbmQgZnJhbWV3b3JrIHdpdGggaGFyZHdhcmUgYWNjZWxlcmF0ZWQgdHJhbnNpdGlvbnNcbiAgICogaHR0cHM6Ly9zd2lwZXJqcy5jb21cbiAgICpcbiAgICogQ29weXJpZ2h0IDIwMTQtMjAyNCBWbGFkaW1pciBLaGFybGFtcGlkaVxuICAgKlxuICAgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAgICpcbiAgICogUmVsZWFzZWQgb246IE1heSAzMCwgMjAyNFxuICAgKi9cblxuXG4gIC8qIGVzbGludC1kaXNhYmxlIHNwYWNlZC1jb21tZW50ICovXG5cbiAgY29uc3QgU3dpcGVyQ1NTID0gYDpob3N0ey0tc3dpcGVyLXRoZW1lLWNvbG9yOiMwMDdhZmZ9Omhvc3R7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jazttYXJnaW4tbGVmdDphdXRvO21hcmdpbi1yaWdodDphdXRvO3otaW5kZXg6MX0uc3dpcGVye3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0bztwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzpoaWRkZW47bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDt6LWluZGV4OjE7ZGlzcGxheTpibG9ja30uc3dpcGVyLXZlcnRpY2FsPi5zd2lwZXItd3JhcHBlcntmbGV4LWRpcmVjdGlvbjpjb2x1bW59LnN3aXBlci13cmFwcGVye3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7ei1pbmRleDoxO2Rpc3BsYXk6ZmxleDt0cmFuc2l0aW9uLXByb3BlcnR5OnRyYW5zZm9ybTt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjp2YXIoLS1zd2lwZXItd3JhcHBlci10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbixpbml0aWFsKTtib3gtc2l6aW5nOmNvbnRlbnQtYm94fS5zd2lwZXItYW5kcm9pZCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKSwuc3dpcGVyLWlvcyA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKSwuc3dpcGVyLXdyYXBwZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDBweCwwLDApfS5zd2lwZXItaG9yaXpvbnRhbHt0b3VjaC1hY3Rpb246cGFuLXl9LnN3aXBlci12ZXJ0aWNhbHt0b3VjaC1hY3Rpb246cGFuLXh9OjpzbG90dGVkKHN3aXBlci1zbGlkZSl7ZmxleC1zaHJpbms6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlO3RyYW5zaXRpb24tcHJvcGVydHk6dHJhbnNmb3JtO2Rpc3BsYXk6YmxvY2t9OjpzbG90dGVkKC5zd2lwZXItc2xpZGUtaW52aXNpYmxlLWJsYW5rKXt2aXNpYmlsaXR5OmhpZGRlbn0uc3dpcGVyLWF1dG9oZWlnaHQsLnN3aXBlci1hdXRvaGVpZ2h0IDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe2hlaWdodDphdXRvfS5zd2lwZXItYXV0b2hlaWdodCAuc3dpcGVyLXdyYXBwZXJ7YWxpZ24taXRlbXM6ZmxleC1zdGFydDt0cmFuc2l0aW9uLXByb3BlcnR5OnRyYW5zZm9ybSxoZWlnaHR9LnN3aXBlci1iYWNrZmFjZS1oaWRkZW4gOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjtiYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbn0uc3dpcGVyLTNkLnN3aXBlci1jc3MtbW9kZSAuc3dpcGVyLXdyYXBwZXJ7cGVyc3BlY3RpdmU6MTIwMHB4fS5zd2lwZXItM2QgLnN3aXBlci13cmFwcGVye3RyYW5zZm9ybS1zdHlsZTpwcmVzZXJ2ZS0zZH0uc3dpcGVyLTNke3BlcnNwZWN0aXZlOjEyMDBweH0uc3dpcGVyLTNkIC5zd2lwZXItY3ViZS1zaGFkb3csLnN3aXBlci0zZCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXt0cmFuc2Zvcm0tc3R5bGU6cHJlc2VydmUtM2R9LnN3aXBlci1jc3MtbW9kZT4uc3dpcGVyLXdyYXBwZXJ7b3ZlcmZsb3c6YXV0bztzY3JvbGxiYXItd2lkdGg6bm9uZTstbXMtb3ZlcmZsb3ctc3R5bGU6bm9uZX0uc3dpcGVyLWNzcy1tb2RlPi5zd2lwZXItd3JhcHBlcjo6LXdlYmtpdC1zY3JvbGxiYXJ7ZGlzcGxheTpub25lfS5zd2lwZXItY3NzLW1vZGUgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7c2Nyb2xsLXNuYXAtYWxpZ246c3RhcnQgc3RhcnR9LnN3aXBlci1jc3MtbW9kZS5zd2lwZXItaG9yaXpvbnRhbD4uc3dpcGVyLXdyYXBwZXJ7c2Nyb2xsLXNuYXAtdHlwZTp4IG1hbmRhdG9yeX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXdyYXBwZXJ7c2Nyb2xsLXNuYXAtdHlwZTp5IG1hbmRhdG9yeX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1mcmVlLW1vZGU+LnN3aXBlci13cmFwcGVye3Njcm9sbC1zbmFwLXR5cGU6bm9uZX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1mcmVlLW1vZGUgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7c2Nyb2xsLXNuYXAtYWxpZ246bm9uZX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1jZW50ZXJlZD4uc3dpcGVyLXdyYXBwZXI6OmJlZm9yZXtjb250ZW50OicnO2ZsZXgtc2hyaW5rOjA7b3JkZXI6OTk5OX0uc3dpcGVyLWNzcy1tb2RlLnN3aXBlci1jZW50ZXJlZCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtzY3JvbGwtc25hcC1hbGlnbjpjZW50ZXIgY2VudGVyO3Njcm9sbC1zbmFwLXN0b3A6YWx3YXlzfS5zd2lwZXItY3NzLW1vZGUuc3dpcGVyLWNlbnRlcmVkLnN3aXBlci1ob3Jpem9udGFsIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpOmZpcnN0LWNoaWxke21hcmdpbi1pbmxpbmUtc3RhcnQ6dmFyKC0tc3dpcGVyLWNlbnRlcmVkLW9mZnNldC1iZWZvcmUpfS5zd2lwZXItY3NzLW1vZGUuc3dpcGVyLWNlbnRlcmVkLnN3aXBlci1ob3Jpem9udGFsPi5zd2lwZXItd3JhcHBlcjo6YmVmb3Jle2hlaWdodDoxMDAlO21pbi1oZWlnaHQ6MXB4O3dpZHRoOnZhcigtLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYWZ0ZXIpfS5zd2lwZXItY3NzLW1vZGUuc3dpcGVyLWNlbnRlcmVkLnN3aXBlci12ZXJ0aWNhbCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKTpmaXJzdC1jaGlsZHttYXJnaW4tYmxvY2stc3RhcnQ6dmFyKC0tc3dpcGVyLWNlbnRlcmVkLW9mZnNldC1iZWZvcmUpfS5zd2lwZXItY3NzLW1vZGUuc3dpcGVyLWNlbnRlcmVkLnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXdyYXBwZXI6OmJlZm9yZXt3aWR0aDoxMDAlO21pbi13aWR0aDoxcHg7aGVpZ2h0OnZhcigtLXN3aXBlci1jZW50ZXJlZC1vZmZzZXQtYWZ0ZXIpfS5zd2lwZXItdmlydHVhbCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO3RyYW5zZm9ybTp0cmFuc2xhdGVaKDApfS5zd2lwZXItdmlydHVhbC5zd2lwZXItY3NzLW1vZGUgLnN3aXBlci13cmFwcGVyOjphZnRlcntjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtwb2ludGVyLWV2ZW50czpub25lfS5zd2lwZXItdmlydHVhbC5zd2lwZXItY3NzLW1vZGUuc3dpcGVyLWhvcml6b250YWwgLnN3aXBlci13cmFwcGVyOjphZnRlcntoZWlnaHQ6MXB4O3dpZHRoOnZhcigtLXN3aXBlci12aXJ0dWFsLXNpemUpfS5zd2lwZXItdmlydHVhbC5zd2lwZXItY3NzLW1vZGUuc3dpcGVyLXZlcnRpY2FsIC5zd2lwZXItd3JhcHBlcjo6YWZ0ZXJ7d2lkdGg6MXB4O2hlaWdodDp2YXIoLS1zd2lwZXItdmlydHVhbC1zaXplKX06aG9zdHstLXN3aXBlci1uYXZpZ2F0aW9uLXNpemU6NDRweH0uc3dpcGVyLWJ1dHRvbi1uZXh0LC5zd2lwZXItYnV0dG9uLXByZXZ7cG9zaXRpb246YWJzb2x1dGU7dG9wOnZhcigtLXN3aXBlci1uYXZpZ2F0aW9uLXRvcC1vZmZzZXQsNTAlKTt3aWR0aDpjYWxjKHZhcigtLXN3aXBlci1uYXZpZ2F0aW9uLXNpemUpLyA0NCAqIDI3KTtoZWlnaHQ6dmFyKC0tc3dpcGVyLW5hdmlnYXRpb24tc2l6ZSk7bWFyZ2luLXRvcDpjYWxjKDBweCAtICh2YXIoLS1zd2lwZXItbmF2aWdhdGlvbi1zaXplKS8gMikpO3otaW5kZXg6MTA7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2NvbG9yOnZhcigtLXN3aXBlci1uYXZpZ2F0aW9uLWNvbG9yLHZhcigtLXN3aXBlci10aGVtZS1jb2xvcikpfS5zd2lwZXItYnV0dG9uLW5leHQuc3dpcGVyLWJ1dHRvbi1kaXNhYmxlZCwuc3dpcGVyLWJ1dHRvbi1wcmV2LnN3aXBlci1idXR0b24tZGlzYWJsZWR7b3BhY2l0eTouMzU7Y3Vyc29yOmF1dG87cG9pbnRlci1ldmVudHM6bm9uZX0uc3dpcGVyLWJ1dHRvbi1uZXh0LnN3aXBlci1idXR0b24taGlkZGVuLC5zd2lwZXItYnV0dG9uLXByZXYuc3dpcGVyLWJ1dHRvbi1oaWRkZW57b3BhY2l0eTowO2N1cnNvcjphdXRvO3BvaW50ZXItZXZlbnRzOm5vbmV9LnN3aXBlci1uYXZpZ2F0aW9uLWRpc2FibGVkIC5zd2lwZXItYnV0dG9uLW5leHQsLnN3aXBlci1uYXZpZ2F0aW9uLWRpc2FibGVkIC5zd2lwZXItYnV0dG9uLXByZXZ7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc3dpcGVyLWJ1dHRvbi1uZXh0IHN2Zywuc3dpcGVyLWJ1dHRvbi1wcmV2IHN2Z3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y29udGFpbjt0cmFuc2Zvcm0tb3JpZ2luOmNlbnRlcn0uc3dpcGVyLXJ0bCAuc3dpcGVyLWJ1dHRvbi1uZXh0IHN2Zywuc3dpcGVyLXJ0bCAuc3dpcGVyLWJ1dHRvbi1wcmV2IHN2Z3t0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyl9LnN3aXBlci1idXR0b24tcHJldiwuc3dpcGVyLXJ0bCAuc3dpcGVyLWJ1dHRvbi1uZXh0e2xlZnQ6dmFyKC0tc3dpcGVyLW5hdmlnYXRpb24tc2lkZXMtb2Zmc2V0LDEwcHgpO3JpZ2h0OmF1dG99LnN3aXBlci1idXR0b24tbmV4dCwuc3dpcGVyLXJ0bCAuc3dpcGVyLWJ1dHRvbi1wcmV2e3JpZ2h0OnZhcigtLXN3aXBlci1uYXZpZ2F0aW9uLXNpZGVzLW9mZnNldCwxMHB4KTtsZWZ0OmF1dG99LnN3aXBlci1idXR0b24tbG9ja3tkaXNwbGF5Om5vbmV9LnN3aXBlci1wYWdpbmF0aW9ue3Bvc2l0aW9uOmFic29sdXRlO3RleHQtYWxpZ246Y2VudGVyO3RyYW5zaXRpb246LjNzIG9wYWNpdHk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTt6LWluZGV4OjEwfS5zd2lwZXItcGFnaW5hdGlvbi5zd2lwZXItcGFnaW5hdGlvbi1oaWRkZW57b3BhY2l0eTowfS5zd2lwZXItcGFnaW5hdGlvbi1kaXNhYmxlZD4uc3dpcGVyLXBhZ2luYXRpb24sLnN3aXBlci1wYWdpbmF0aW9uLnN3aXBlci1wYWdpbmF0aW9uLWRpc2FibGVke2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnN3aXBlci1ob3Jpem9udGFsPi5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLnN3aXBlci1wYWdpbmF0aW9uLWhvcml6b250YWwsLnN3aXBlci1wYWdpbmF0aW9uLWN1c3RvbSwuc3dpcGVyLXBhZ2luYXRpb24tZnJhY3Rpb257Ym90dG9tOnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWJvdHRvbSw4cHgpO3RvcDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi10b3AsYXV0byk7bGVmdDowO3dpZHRoOjEwMCV9LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pY3tvdmVyZmxvdzpoaWRkZW47Zm9udC1zaXplOjB9LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pYyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0e3RyYW5zZm9ybTpzY2FsZSguMzMpO3Bvc2l0aW9uOnJlbGF0aXZlfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmV7dHJhbnNmb3JtOnNjYWxlKDEpfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUtbWFpbnt0cmFuc2Zvcm06c2NhbGUoMSl9LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pYyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWFjdGl2ZS1wcmV2e3RyYW5zZm9ybTpzY2FsZSguNjYpfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUtcHJldi1wcmV2e3RyYW5zZm9ybTpzY2FsZSguMzMpfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUtbmV4dHt0cmFuc2Zvcm06c2NhbGUoLjY2KX0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtYWN0aXZlLW5leHQtbmV4dHt0cmFuc2Zvcm06c2NhbGUoLjMzKX0uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0e3dpZHRoOnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC13aWR0aCx2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtc2l6ZSw4cHgpKTtoZWlnaHQ6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWhlaWdodCx2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtc2l6ZSw4cHgpKTtkaXNwbGF5OmlubGluZS1ibG9jaztib3JkZXItcmFkaXVzOnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1ib3JkZXItcmFkaXVzLDUwJSk7YmFja2dyb3VuZDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtaW5hY3RpdmUtY29sb3IsIzAwMCk7b3BhY2l0eTp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtaW5hY3RpdmUtb3BhY2l0eSwgLjIpfWJ1dHRvbi5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXR7Ym9yZGVyOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowO2JveC1zaGFkb3c6bm9uZTstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTthcHBlYXJhbmNlOm5vbmV9LnN3aXBlci1wYWdpbmF0aW9uLWNsaWNrYWJsZSAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0e2N1cnNvcjpwb2ludGVyfS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQ6b25seS1jaGlsZHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQtYWN0aXZle29wYWNpdHk6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LW9wYWNpdHksIDEpO2JhY2tncm91bmQ6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tY29sb3IsdmFyKC0tc3dpcGVyLXRoZW1lLWNvbG9yKSl9LnN3aXBlci1wYWdpbmF0aW9uLXZlcnRpY2FsLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMsLnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0c3tyaWdodDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1yaWdodCw4cHgpO2xlZnQ6dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tbGVmdCxhdXRvKTt0b3A6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwcHgsLTUwJSwwKX0uc3dpcGVyLXBhZ2luYXRpb24tdmVydGljYWwuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LC5zd2lwZXItdmVydGljYWw+LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHttYXJnaW46dmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LXZlcnRpY2FsLWdhcCw2cHgpIDA7ZGlzcGxheTpibG9ja30uc3dpcGVyLXBhZ2luYXRpb24tdmVydGljYWwuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMsLnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWN7dG9wOjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt3aWR0aDo4cHh9LnN3aXBlci1wYWdpbmF0aW9uLXZlcnRpY2FsLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQsLnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHtkaXNwbGF5OmlubGluZS1ibG9jazt0cmFuc2l0aW9uOi4ycyB0cmFuc2Zvcm0sLjJzIHRvcH0uc3dpcGVyLWhvcml6b250YWw+LnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldCwuc3dpcGVyLXBhZ2luYXRpb24taG9yaXpvbnRhbC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXR7bWFyZ2luOjAgdmFyKC0tc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LWhvcml6b250YWwtZ2FwLDRweCl9LnN3aXBlci1ob3Jpem9udGFsPi5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pYywuc3dpcGVyLXBhZ2luYXRpb24taG9yaXpvbnRhbC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pY3tsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTt3aGl0ZS1zcGFjZTpub3dyYXB9LnN3aXBlci1ob3Jpem9udGFsPi5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMtZHluYW1pYyAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0LC5zd2lwZXItcGFnaW5hdGlvbi1ob3Jpem9udGFsLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0cy1keW5hbWljIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXR7dHJhbnNpdGlvbjouMnMgdHJhbnNmb3JtLC4ycyBsZWZ0fS5zd2lwZXItaG9yaXpvbnRhbC5zd2lwZXItcnRsPi5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXRzLWR5bmFtaWMgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHt0cmFuc2l0aW9uOi4ycyB0cmFuc2Zvcm0sLjJzIHJpZ2h0fS5zd2lwZXItcGFnaW5hdGlvbi1mcmFjdGlvbntjb2xvcjp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1mcmFjdGlvbi1jb2xvcixpbmhlcml0KX0uc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXJ7YmFja2dyb3VuZDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci1iZy1jb2xvcixyZ2JhKDAsMCwwLC4yNSkpO3Bvc2l0aW9uOmFic29sdXRlfS5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2JhciAuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItZmlsbHtiYWNrZ3JvdW5kOnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLWNvbG9yLHZhcigtLXN3aXBlci10aGVtZS1jb2xvcikpO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RyYW5zZm9ybTpzY2FsZSgwKTt0cmFuc2Zvcm0tb3JpZ2luOmxlZnQgdG9wfS5zd2lwZXItcnRsIC5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2JhciAuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItZmlsbHt0cmFuc2Zvcm0tb3JpZ2luOnJpZ2h0IHRvcH0uc3dpcGVyLWhvcml6b250YWw+LnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLC5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci5zd2lwZXItcGFnaW5hdGlvbi1ob3Jpem9udGFsLC5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci5zd2lwZXItcGFnaW5hdGlvbi12ZXJ0aWNhbC5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci1vcHBvc2l0ZSwuc3dpcGVyLXZlcnRpY2FsPi5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci5zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci1vcHBvc2l0ZXt3aWR0aDoxMDAlO2hlaWdodDp2YXIoLS1zd2lwZXItcGFnaW5hdGlvbi1wcm9ncmVzc2Jhci1zaXplLDRweCk7bGVmdDowO3RvcDowfS5zd2lwZXItaG9yaXpvbnRhbD4uc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXIuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItb3Bwb3NpdGUsLnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLnN3aXBlci1wYWdpbmF0aW9uLWhvcml6b250YWwuc3dpcGVyLXBhZ2luYXRpb24tcHJvZ3Jlc3NiYXItb3Bwb3NpdGUsLnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLnN3aXBlci1wYWdpbmF0aW9uLXZlcnRpY2FsLC5zd2lwZXItdmVydGljYWw+LnN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFye3dpZHRoOnZhcigtLXN3aXBlci1wYWdpbmF0aW9uLXByb2dyZXNzYmFyLXNpemUsNHB4KTtoZWlnaHQ6MTAwJTtsZWZ0OjA7dG9wOjB9LnN3aXBlci1wYWdpbmF0aW9uLWxvY2t7ZGlzcGxheTpub25lfS5zd2lwZXItc2Nyb2xsYmFye2JvcmRlci1yYWRpdXM6dmFyKC0tc3dpcGVyLXNjcm9sbGJhci1ib3JkZXItcmFkaXVzLDEwcHgpO3Bvc2l0aW9uOnJlbGF0aXZlO3RvdWNoLWFjdGlvbjpub25lO2JhY2tncm91bmQ6dmFyKC0tc3dpcGVyLXNjcm9sbGJhci1iZy1jb2xvcixyZ2JhKDAsMCwwLC4xKSl9LnN3aXBlci1zY3JvbGxiYXItZGlzYWJsZWQ+LnN3aXBlci1zY3JvbGxiYXIsLnN3aXBlci1zY3JvbGxiYXIuc3dpcGVyLXNjcm9sbGJhci1kaXNhYmxlZHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5zd2lwZXItaG9yaXpvbnRhbD4uc3dpcGVyLXNjcm9sbGJhciwuc3dpcGVyLXNjcm9sbGJhci5zd2lwZXItc2Nyb2xsYmFyLWhvcml6b250YWx7cG9zaXRpb246YWJzb2x1dGU7bGVmdDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLXNpZGVzLW9mZnNldCwxJSk7Ym90dG9tOnZhcigtLXN3aXBlci1zY3JvbGxiYXItYm90dG9tLDRweCk7dG9wOnZhcigtLXN3aXBlci1zY3JvbGxiYXItdG9wLGF1dG8pO3otaW5kZXg6NTA7aGVpZ2h0OnZhcigtLXN3aXBlci1zY3JvbGxiYXItc2l6ZSw0cHgpO3dpZHRoOmNhbGMoMTAwJSAtIDIgKiB2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLXNpZGVzLW9mZnNldCwxJSkpfS5zd2lwZXItc2Nyb2xsYmFyLnN3aXBlci1zY3JvbGxiYXItdmVydGljYWwsLnN3aXBlci12ZXJ0aWNhbD4uc3dpcGVyLXNjcm9sbGJhcntwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OnZhcigtLXN3aXBlci1zY3JvbGxiYXItbGVmdCxhdXRvKTtyaWdodDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLXJpZ2h0LDRweCk7dG9wOnZhcigtLXN3aXBlci1zY3JvbGxiYXItc2lkZXMtb2Zmc2V0LDElKTt6LWluZGV4OjUwO3dpZHRoOnZhcigtLXN3aXBlci1zY3JvbGxiYXItc2l6ZSw0cHgpO2hlaWdodDpjYWxjKDEwMCUgLSAyICogdmFyKC0tc3dpcGVyLXNjcm9sbGJhci1zaWRlcy1vZmZzZXQsMSUpKX0uc3dpcGVyLXNjcm9sbGJhci1kcmFne2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZDp2YXIoLS1zd2lwZXItc2Nyb2xsYmFyLWRyYWctYmctY29sb3IscmdiYSgwLDAsMCwuNSkpO2JvcmRlci1yYWRpdXM6dmFyKC0tc3dpcGVyLXNjcm9sbGJhci1ib3JkZXItcmFkaXVzLDEwcHgpO2xlZnQ6MDt0b3A6MH0uc3dpcGVyLXNjcm9sbGJhci1jdXJzb3ItZHJhZ3tjdXJzb3I6bW92ZX0uc3dpcGVyLXNjcm9sbGJhci1sb2Nre2Rpc3BsYXk6bm9uZX06OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS16b29tZWQpe2N1cnNvcjptb3ZlO3RvdWNoLWFjdGlvbjpub25lfS5zd2lwZXIgLnN3aXBlci1ub3RpZmljYXRpb257cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowO3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowO3otaW5kZXg6LTEwMDB9LnN3aXBlci1mcmVlLW1vZGU+LnN3aXBlci13cmFwcGVye3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0O21hcmdpbjowIGF1dG99LnN3aXBlci1ncmlkPi5zd2lwZXItd3JhcHBlcntmbGV4LXdyYXA6d3JhcH0uc3dpcGVyLWdyaWQtY29sdW1uPi5zd2lwZXItd3JhcHBlcntmbGV4LXdyYXA6d3JhcDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LnN3aXBlci1mYWRlLnN3aXBlci1mcmVlLW1vZGUgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXR9LnN3aXBlci1mYWRlIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3BvaW50ZXItZXZlbnRzOm5vbmU7dHJhbnNpdGlvbi1wcm9wZXJ0eTpvcGFjaXR5fS5zd2lwZXItZmFkZSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtwb2ludGVyLWV2ZW50czpub25lfS5zd2lwZXItZmFkZSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpe3BvaW50ZXItZXZlbnRzOmF1dG99LnN3aXBlci1mYWRlIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLWFjdGl2ZSkgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtYWN0aXZlKXtwb2ludGVyLWV2ZW50czphdXRvfS5zd2lwZXItY3ViZXtvdmVyZmxvdzp2aXNpYmxlfS5zd2lwZXItY3ViZSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtwb2ludGVyLWV2ZW50czpub25lOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47ei1pbmRleDoxO3Zpc2liaWxpdHk6aGlkZGVuO3RyYW5zZm9ybS1vcmlnaW46MCAwO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCV9LnN3aXBlci1jdWJlIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3BvaW50ZXItZXZlbnRzOm5vbmV9LnN3aXBlci1jdWJlLnN3aXBlci1ydGwgOjpzbG90dGVkKHN3aXBlci1zbGlkZSl7dHJhbnNmb3JtLW9yaWdpbjoxMDAlIDB9LnN3aXBlci1jdWJlIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLWFjdGl2ZSksLnN3aXBlci1jdWJlIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLWFjdGl2ZSkgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtYWN0aXZlKXtwb2ludGVyLWV2ZW50czphdXRvfS5zd2lwZXItY3ViZSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpLC5zd2lwZXItY3ViZSA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1uZXh0KSwuc3dpcGVyLWN1YmUgOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtcHJldil7cG9pbnRlci1ldmVudHM6YXV0bzt2aXNpYmlsaXR5OnZpc2libGV9LnN3aXBlci1jdWJlIC5zd2lwZXItY3ViZS1zaGFkb3d7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO2JvdHRvbTowcHg7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvcGFjaXR5Oi42O3otaW5kZXg6MH0uc3dpcGVyLWN1YmUgLnN3aXBlci1jdWJlLXNoYWRvdzpiZWZvcmV7Y29udGVudDonJztiYWNrZ3JvdW5kOiMwMDA7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowO2JvdHRvbTowO3JpZ2h0OjA7ZmlsdGVyOmJsdXIoNTBweCl9LnN3aXBlci1jdWJlIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLW5leHQpKzo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3BvaW50ZXItZXZlbnRzOmF1dG87dmlzaWJpbGl0eTp2aXNpYmxlfS5zd2lwZXItZmxpcHtvdmVyZmxvdzp2aXNpYmxlfS5zd2lwZXItZmxpcCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtwb2ludGVyLWV2ZW50czpub25lOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47ei1pbmRleDoxfS5zd2lwZXItZmxpcCA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKSA6OnNsb3R0ZWQoc3dpcGVyLXNsaWRlKXtwb2ludGVyLWV2ZW50czpub25lfS5zd2lwZXItZmxpcCA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpLC5zd2lwZXItZmxpcCA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1hY3RpdmUpIDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLWFjdGl2ZSl7cG9pbnRlci1ldmVudHM6YXV0b30uc3dpcGVyLWNyZWF0aXZlIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpey13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47b3ZlcmZsb3c6aGlkZGVuO3RyYW5zaXRpb24tcHJvcGVydHk6dHJhbnNmb3JtLG9wYWNpdHksaGVpZ2h0fS5zd2lwZXItY2FyZHN7b3ZlcmZsb3c6dmlzaWJsZX0uc3dpcGVyLWNhcmRzIDo6c2xvdHRlZChzd2lwZXItc2xpZGUpe3RyYW5zZm9ybS1vcmlnaW46Y2VudGVyIGJvdHRvbTstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2JhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO292ZXJmbG93OmhpZGRlbn1gO1xuICBjb25zdCBTd2lwZXJTbGlkZUNTUyA9IGA6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3cpLDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20pLDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0KSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQpLDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy10b3Ape3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3BvaW50ZXItZXZlbnRzOm5vbmU7ei1pbmRleDoxMH06OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3cpe2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuMTUpfTo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0KXtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBsZWZ0LHJnYmEoMCwwLDAsLjUpLHJnYmEoMCwwLDAsMCkpfTo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCl7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQscmdiYSgwLDAsMCwuNSkscmdiYSgwLDAsMCwwKSl9OjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCl7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gdG9wLHJnYmEoMCwwLDAsLjUpLHJnYmEoMCwwLDAsMCkpfTo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1ib3R0b20pe2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSxyZ2JhKDAsMCwwLC41KSxyZ2JhKDAsMCwwLDApKX0uc3dpcGVyLWxhenktcHJlbG9hZGVye2FuaW1hdGlvbjpzd2lwZXItcHJlbG9hZGVyLXNwaW4gMXMgaW5maW5pdGUgbGluZWFyO3dpZHRoOjQycHg7aGVpZ2h0OjQycHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo1MCU7dG9wOjUwJTttYXJnaW4tbGVmdDotMjFweDttYXJnaW4tdG9wOi0yMXB4O3otaW5kZXg6MTA7dHJhbnNmb3JtLW9yaWdpbjo1MCU7Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlcjo0cHggc29saWQgdmFyKC0tc3dpcGVyLXByZWxvYWRlci1jb2xvcix2YXIoLS1zd2lwZXItdGhlbWUtY29sb3IpKTtib3JkZXItcmFkaXVzOjUwJTtib3JkZXItdG9wLWNvbG9yOnRyYW5zcGFyZW50fUBrZXlmcmFtZXMgc3dpcGVyLXByZWxvYWRlci1zcGluezAle3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9MTAwJXt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fTo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1jdWJlLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tKSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctY3ViZS5zd2lwZXItc2xpZGUtc2hhZG93LWxlZnQpLDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1jdWJlLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQpLDo6c2xvdHRlZCguc3dpcGVyLXNsaWRlLXNoYWRvdy1jdWJlLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wKXt6LWluZGV4OjA7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjtiYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbn06OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctZmxpcC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSksOjpzbG90dGVkKC5zd2lwZXItc2xpZGUtc2hhZG93LWZsaXAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0KSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctZmxpcC5zd2lwZXItc2xpZGUtc2hhZG93LXJpZ2h0KSw6OnNsb3R0ZWQoLnN3aXBlci1zbGlkZS1zaGFkb3ctZmxpcC5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCl7ei1pbmRleDowOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW59OjpzbG90dGVkKC5zd2lwZXItem9vbS1jb250YWluZXIpe3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyfTo6c2xvdHRlZCguc3dpcGVyLXpvb20tY29udGFpbmVyKT5jYW52YXMsOjpzbG90dGVkKC5zd2lwZXItem9vbS1jb250YWluZXIpPmltZyw6OnNsb3R0ZWQoLnN3aXBlci16b29tLWNvbnRhaW5lcik+c3Zne21heC13aWR0aDoxMDAlO21heC1oZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvbnRhaW59YDtcblxuICBjbGFzcyBEdW1teUhUTUxFbGVtZW50IHt9XG4gIGNvbnN0IENsYXNzVG9FeHRlbmQgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICd1bmRlZmluZWQnID8gRHVtbXlIVE1MRWxlbWVudCA6IEhUTUxFbGVtZW50O1xuICBjb25zdCBhcnJvd1N2ZyA9IGA8c3ZnIHdpZHRoPVwiMTFcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMTEgMjBcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTAuMzgyOTYgMjAuMDc2MkMwLjExMTc4OCAxOS44MDUgMC4xMTE3ODggMTkuMzY1NCAwLjM4Mjk2IDE5LjA5NDJMOS4xOTc1OCAxMC4yNzk2TDAuMzgyOTYgMS40NjQ5N0MwLjExMTc4OCAxLjE5Mzc5IDAuMTExNzg4IDAuNzU0MTM4IDAuMzgyOTYgMC40ODI5NjZDMC42NTQxMzEgMC4yMTE3OTQgMS4wOTM3OSAwLjIxMTc5NCAxLjM2NDk2IDAuNDgyOTY2TDEwLjQzNDEgOS41NTIxNEMxMC44MzU5IDkuOTUzOSAxMC44MzU5IDEwLjYwNTMgMTAuNDM0MSAxMS4wMDdMMS4zNjQ5NiAyMC4wNzYyQzEuMDkzNzkgMjAuMzQ3NCAwLjY1NDEzMSAyMC4zNDc0IDAuMzgyOTYgMjAuMDc2MlpcIiBmaWxsPVwiY3VycmVudENvbG9yXCIvPjwvc3ZnPlxuICAgIGA7XG4gIGNvbnN0IGFkZFN0eWxlID0gKHNoYWRvd1Jvb3QsIHN0eWxlcykgPT4ge1xuICAgIGlmICh0eXBlb2YgQ1NTU3R5bGVTaGVldCAhPT0gJ3VuZGVmaW5lZCcgJiYgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMpIHtcbiAgICAgIGNvbnN0IHN0eWxlU2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xuICAgICAgc3R5bGVTaGVldC5yZXBsYWNlU3luYyhzdHlsZXMpO1xuICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbc3R5bGVTaGVldF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gc3R5bGVzO1xuICAgICAgc2hhZG93Um9vdC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfVxuICB9O1xuICBjbGFzcyBTd2lwZXJDb250YWluZXIgZXh0ZW5kcyBDbGFzc1RvRXh0ZW5kIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7XG4gICAgICAgIG1vZGU6ICdvcGVuJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgbmV4dEJ1dHRvblN2ZygpIHtcbiAgICAgIHJldHVybiBhcnJvd1N2ZztcbiAgICB9XG4gICAgc3RhdGljIGdldCBwcmV2QnV0dG9uU3ZnKCkge1xuICAgICAgcmV0dXJuIGFycm93U3ZnLnJlcGxhY2UoJy8+PC9zdmc+JywgJyB0cmFuc2Zvcm0tb3JpZ2luPVwiY2VudGVyXCIgdHJhbnNmb3JtPVwicm90YXRlKDE4MClcIi8+PC9zdmc+Jyk7XG4gICAgfVxuICAgIGNzc1N0eWxlcygpIHtcbiAgICAgIHJldHVybiBbU3dpcGVyQ1NTLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgLi4uKHRoaXMuaW5qZWN0U3R5bGVzICYmIEFycmF5LmlzQXJyYXkodGhpcy5pbmplY3RTdHlsZXMpID8gdGhpcy5pbmplY3RTdHlsZXMgOiBbXSldLmpvaW4oJ1xcbicpO1xuICAgIH1cbiAgICBjc3NMaW5rcygpIHtcbiAgICAgIHJldHVybiB0aGlzLmluamVjdFN0eWxlc1VybHMgfHwgW107XG4gICAgfVxuICAgIGNhbGNTbGlkZVNsb3RzKCkge1xuICAgICAgY29uc3QgY3VycmVudFNpZGVTbG90cyA9IHRoaXMuc2xpZGVTbG90cyB8fCAwO1xuICAgICAgLy8gc2xpZGUgc2xvdHNcbiAgICAgIGNvbnN0IHNsaWRlU2xvdENoaWxkcmVuID0gWy4uLnRoaXMucXVlcnlTZWxlY3RvckFsbChgW3Nsb3RePXNsaWRlLV1gKV0ubWFwKGNoaWxkID0+IHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGNoaWxkLmdldEF0dHJpYnV0ZSgnc2xvdCcpLnNwbGl0KCdzbGlkZS0nKVsxXSwgMTApO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNsaWRlU2xvdHMgPSBzbGlkZVNsb3RDaGlsZHJlbi5sZW5ndGggPyBNYXRoLm1heCguLi5zbGlkZVNsb3RDaGlsZHJlbikgKyAxIDogMDtcbiAgICAgIGlmICghdGhpcy5yZW5kZXJlZCkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuc2xpZGVTbG90cyA+IGN1cnJlbnRTaWRlU2xvdHMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRTaWRlU2xvdHM7IGkgPCB0aGlzLnNsaWRlU2xvdHM7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IHNsaWRlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzd2lwZXItc2xpZGUnKTtcbiAgICAgICAgICBzbGlkZUVsLnNldEF0dHJpYnV0ZSgncGFydCcsIGBzbGlkZSBzbGlkZS0ke2kgKyAxfWApO1xuICAgICAgICAgIGNvbnN0IHNsb3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Nsb3QnKTtcbiAgICAgICAgICBzbG90RWwuc2V0QXR0cmlidXRlKCduYW1lJywgYHNsaWRlLSR7aSArIDF9YCk7XG4gICAgICAgICAgc2xpZGVFbC5hcHBlbmRDaGlsZChzbG90RWwpO1xuICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXdyYXBwZXInKS5hcHBlbmRDaGlsZChzbGlkZUVsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLnNsaWRlU2xvdHMgPCBjdXJyZW50U2lkZVNsb3RzKSB7XG4gICAgICAgIGNvbnN0IHNsaWRlcyA9IHRoaXMuc3dpcGVyLnNsaWRlcztcbiAgICAgICAgZm9yIChsZXQgaSA9IHNsaWRlcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgIGlmIChpID4gdGhpcy5zbGlkZVNsb3RzKSB7XG4gICAgICAgICAgICBzbGlkZXNbaV0ucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVkKSByZXR1cm47XG4gICAgICB0aGlzLmNhbGNTbGlkZVNsb3RzKCk7XG5cbiAgICAgIC8vIGxvY2FsIHN0eWxlc1xuICAgICAgbGV0IGxvY2FsU3R5bGVzID0gdGhpcy5jc3NTdHlsZXMoKTtcbiAgICAgIGlmICh0aGlzLnNsaWRlU2xvdHMgPiAwKSB7XG4gICAgICAgIGxvY2FsU3R5bGVzID0gbG9jYWxTdHlsZXMucmVwbGFjZSgvOjpzbG90dGVkXFwoKFthLXotMC05Ll0qKVxcKS9nLCAnJDEnKTtcbiAgICAgIH1cbiAgICAgIGlmIChsb2NhbFN0eWxlcy5sZW5ndGgpIHtcbiAgICAgICAgYWRkU3R5bGUodGhpcy5zaGFkb3dSb290LCBsb2NhbFN0eWxlcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmNzc0xpbmtzKCkuZm9yRWFjaCh1cmwgPT4ge1xuICAgICAgICBjb25zdCBsaW5rRXhpc3RzID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoYGxpbmtbaHJlZj1cIiR7dXJsfVwiXWApO1xuICAgICAgICBpZiAobGlua0V4aXN0cykgcmV0dXJuO1xuICAgICAgICBjb25zdCBsaW5rRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG4gICAgICAgIGxpbmtFbC5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICAgIGxpbmtFbC5ocmVmID0gdXJsO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQobGlua0VsKTtcbiAgICAgIH0pO1xuICAgICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc3dpcGVyJyk7XG4gICAgICBlbC5wYXJ0ID0gJ2NvbnRhaW5lcic7XG5cbiAgICAgIC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgZWwuaW5uZXJIVE1MID0gYFxuICAgICAgPHNsb3QgbmFtZT1cImNvbnRhaW5lci1zdGFydFwiPjwvc2xvdD5cbiAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItd3JhcHBlclwiIHBhcnQ9XCJ3cmFwcGVyXCI+XG4gICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgICAgJHtBcnJheS5mcm9tKHtcbiAgICAgIGxlbmd0aDogdGhpcy5zbGlkZVNsb3RzXG4gICAgfSkubWFwKChfLCBpbmRleCkgPT4gYFxuICAgICAgICA8c3dpcGVyLXNsaWRlIHBhcnQ9XCJzbGlkZSBzbGlkZS0ke2luZGV4fVwiPlxuICAgICAgICAgIDxzbG90IG5hbWU9XCJzbGlkZS0ke2luZGV4fVwiPjwvc2xvdD5cbiAgICAgICAgPC9zd2lwZXItc2xpZGU+XG4gICAgICAgIGApLmpvaW4oJycpfVxuICAgICAgPC9kaXY+XG4gICAgICA8c2xvdCBuYW1lPVwiY29udGFpbmVyLWVuZFwiPjwvc2xvdD5cbiAgICAgICR7bmVlZHNOYXZpZ2F0aW9uKHRoaXMucGFzc2VkUGFyYW1zKSA/IGBcbiAgICAgICAgPGRpdiBwYXJ0PVwiYnV0dG9uLXByZXZcIiBjbGFzcz1cInN3aXBlci1idXR0b24tcHJldlwiPiR7dGhpcy5jb25zdHJ1Y3Rvci5wcmV2QnV0dG9uU3ZnfTwvZGl2PlxuICAgICAgICA8ZGl2IHBhcnQ9XCJidXR0b24tbmV4dFwiIGNsYXNzPVwic3dpcGVyLWJ1dHRvbi1uZXh0XCI+JHt0aGlzLmNvbnN0cnVjdG9yLm5leHRCdXR0b25Tdmd9PC9kaXY+XG4gICAgICBgIDogJyd9XG4gICAgICAke25lZWRzUGFnaW5hdGlvbih0aGlzLnBhc3NlZFBhcmFtcykgPyBgXG4gICAgICAgIDxkaXYgcGFydD1cInBhZ2luYXRpb25cIiBjbGFzcz1cInN3aXBlci1wYWdpbmF0aW9uXCI+PC9kaXY+XG4gICAgICBgIDogJyd9XG4gICAgICAke25lZWRzU2Nyb2xsYmFyKHRoaXMucGFzc2VkUGFyYW1zKSA/IGBcbiAgICAgICAgPGRpdiBwYXJ0PVwic2Nyb2xsYmFyXCIgY2xhc3M9XCJzd2lwZXItc2Nyb2xsYmFyXCI+PC9kaXY+XG4gICAgICBgIDogJyd9XG4gICAgYDtcbiAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChlbCk7XG4gICAgICB0aGlzLnJlbmRlcmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkgcmV0dXJuO1xuICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBhcmFtczogc3dpcGVyUGFyYW1zLFxuICAgICAgICBwYXNzZWRQYXJhbXNcbiAgICAgIH0gPSBnZXRQYXJhbXModGhpcyk7XG4gICAgICB0aGlzLnN3aXBlclBhcmFtcyA9IHN3aXBlclBhcmFtcztcbiAgICAgIHRoaXMucGFzc2VkUGFyYW1zID0gcGFzc2VkUGFyYW1zO1xuICAgICAgZGVsZXRlIHRoaXMuc3dpcGVyUGFyYW1zLmluaXQ7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIHRoaXMuc3dpcGVyID0gbmV3IFN3aXBlcih0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLnN3aXBlcicpLCB7XG4gICAgICAgIC4uLihzd2lwZXJQYXJhbXMudmlydHVhbCA/IHt9IDoge1xuICAgICAgICAgIG9ic2VydmVyOiB0cnVlLFxuICAgICAgICAgIG9ic2VydmVTbGlkZUNoaWxkcmVuOiB0aGlzLnNsaWRlU2xvdHMgPiAwXG4gICAgICAgIH0pLFxuICAgICAgICAuLi5zd2lwZXJQYXJhbXMsXG4gICAgICAgIHRvdWNoRXZlbnRzVGFyZ2V0OiAnY29udGFpbmVyJyxcbiAgICAgICAgb25Bbnk6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgaWYgKG5hbWUgPT09ICdvYnNlcnZlclVwZGF0ZScpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbGNTbGlkZVNsb3RzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IHN3aXBlclBhcmFtcy5ldmVudHNQcmVmaXggPyBgJHtzd2lwZXJQYXJhbXMuZXZlbnRzUHJlZml4fSR7bmFtZS50b0xvd2VyQ2FzZSgpfWAgOiBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xuICAgICAgICAgICAgZGV0YWlsOiBhcmdzLFxuICAgICAgICAgICAgYnViYmxlczogbmFtZSAhPT0gJ2hhc2hDaGFuZ2UnLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICBpZiAodGhpcy5pbml0aWFsaXplZCAmJiB0aGlzLm5lc3RlZCAmJiB0aGlzLmNsb3Nlc3QoJ3N3aXBlci1zbGlkZScpICYmIHRoaXMuY2xvc2VzdCgnc3dpcGVyLXNsaWRlJykuc3dpcGVyTG9vcE1vdmVET00pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaW5pdCA9PT0gZmFsc2UgfHwgdGhpcy5nZXRBdHRyaWJ1dGUoJ2luaXQnKSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICBpZiAodGhpcy5uZXN0ZWQgJiYgdGhpcy5jbG9zZXN0KCdzd2lwZXItc2xpZGUnKSAmJiB0aGlzLmNsb3Nlc3QoJ3N3aXBlci1zbGlkZScpLnN3aXBlckxvb3BNb3ZlRE9NKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN3aXBlciAmJiB0aGlzLnN3aXBlci5kZXN0cm95KSB7XG4gICAgICAgIHRoaXMuc3dpcGVyLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdXBkYXRlU3dpcGVyT25Qcm9wQ2hhbmdlKHByb3BOYW1lLCBwcm9wVmFsdWUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGFyYW1zOiBzd2lwZXJQYXJhbXMsXG4gICAgICAgIHBhc3NlZFBhcmFtc1xuICAgICAgfSA9IGdldFBhcmFtcyh0aGlzLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICAgIHRoaXMucGFzc2VkUGFyYW1zID0gcGFzc2VkUGFyYW1zO1xuICAgICAgdGhpcy5zd2lwZXJQYXJhbXMgPSBzd2lwZXJQYXJhbXM7XG4gICAgICBpZiAodGhpcy5zd2lwZXIgJiYgdGhpcy5zd2lwZXIucGFyYW1zW3Byb3BOYW1lXSA9PT0gcHJvcFZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZVN3aXBlcih7XG4gICAgICAgIHN3aXBlcjogdGhpcy5zd2lwZXIsXG4gICAgICAgIHBhc3NlZFBhcmFtczogdGhpcy5wYXNzZWRQYXJhbXMsXG4gICAgICAgIGNoYW5nZWRQYXJhbXM6IFthdHRyVG9Qcm9wKHByb3BOYW1lKV0sXG4gICAgICAgIC4uLihwcm9wTmFtZSA9PT0gJ25hdmlnYXRpb24nICYmIHBhc3NlZFBhcmFtc1twcm9wTmFtZV0gPyB7XG4gICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXG4gICAgICAgICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCdcbiAgICAgICAgfSA6IHt9KSxcbiAgICAgICAgLi4uKHByb3BOYW1lID09PSAncGFnaW5hdGlvbicgJiYgcGFzc2VkUGFyYW1zW3Byb3BOYW1lXSA/IHtcbiAgICAgICAgICBwYWdpbmF0aW9uRWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nXG4gICAgICAgIH0gOiB7fSksXG4gICAgICAgIC4uLihwcm9wTmFtZSA9PT0gJ3Njcm9sbGJhcicgJiYgcGFzc2VkUGFyYW1zW3Byb3BOYW1lXSA/IHtcbiAgICAgICAgICBzY3JvbGxiYXJFbDogJy5zd2lwZXItc2Nyb2xsYmFyJ1xuICAgICAgICB9IDoge30pXG4gICAgICB9KTtcbiAgICB9XG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHIsIHByZXZWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgcmV0dXJuO1xuICAgICAgaWYgKHByZXZWYWx1ZSA9PT0gJ3RydWUnICYmIG5ld1ZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVN3aXBlck9uUHJvcENoYW5nZShhdHRyLCBuZXdWYWx1ZSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgY29uc3QgYXR0cnMgPSBwYXJhbXNMaXN0LmZpbHRlcihwYXJhbSA9PiBwYXJhbS5pbmNsdWRlcygnXycpKS5tYXAocGFyYW0gPT4gcGFyYW0ucmVwbGFjZSgvW0EtWl0vZywgdiA9PiBgLSR7dn1gKS5yZXBsYWNlKCdfJywgJycpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgcmV0dXJuIGF0dHJzO1xuICAgIH1cbiAgfVxuICBwYXJhbXNMaXN0LmZvckVhY2gocGFyYW1OYW1lID0+IHtcbiAgICBpZiAocGFyYW1OYW1lID09PSAnaW5pdCcpIHJldHVybjtcbiAgICBwYXJhbU5hbWUgPSBwYXJhbU5hbWUucmVwbGFjZSgnXycsICcnKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3dpcGVyQ29udGFpbmVyLnByb3RvdHlwZSwgcGFyYW1OYW1lLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5wYXNzZWRQYXJhbXMgfHwge30pW3BhcmFtTmFtZV07XG4gICAgICB9LFxuICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXNzZWRQYXJhbXMpIHRoaXMucGFzc2VkUGFyYW1zID0ge307XG4gICAgICAgIHRoaXMucGFzc2VkUGFyYW1zW3BhcmFtTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSByZXR1cm47XG4gICAgICAgIHRoaXMudXBkYXRlU3dpcGVyT25Qcm9wQ2hhbmdlKHBhcmFtTmFtZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgY2xhc3MgU3dpcGVyU2xpZGUgZXh0ZW5kcyBDbGFzc1RvRXh0ZW5kIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7XG4gICAgICAgIG1vZGU6ICdvcGVuJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgIGNvbnN0IGxhenkgPSB0aGlzLmxhenkgfHwgdGhpcy5nZXRBdHRyaWJ1dGUoJ2xhenknKSA9PT0gJycgfHwgdGhpcy5nZXRBdHRyaWJ1dGUoJ2xhenknKSA9PT0gJ3RydWUnO1xuICAgICAgYWRkU3R5bGUodGhpcy5zaGFkb3dSb290LCBTd2lwZXJTbGlkZUNTUyk7XG4gICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2xvdCcpKTtcbiAgICAgIGlmIChsYXp5KSB7XG4gICAgICAgIGNvbnN0IGxhenlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbGF6eURpdi5jbGFzc0xpc3QuYWRkKCdzd2lwZXItbGF6eS1wcmVsb2FkZXInKTtcbiAgICAgICAgbGF6eURpdi5wYXJ0LmFkZCgncHJlbG9hZGVyJyk7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChsYXp5RGl2KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGNvbnN0IHJlZ2lzdGVyID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIGlmICghd2luZG93LmN1c3RvbUVsZW1lbnRzLmdldCgnc3dpcGVyLWNvbnRhaW5lcicpKSB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdzd2lwZXItY29udGFpbmVyJywgU3dpcGVyQ29udGFpbmVyKTtcbiAgICBpZiAoIXdpbmRvdy5jdXN0b21FbGVtZW50cy5nZXQoJ3N3aXBlci1zbGlkZScpKSB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdzd2lwZXItc2xpZGUnLCBTd2lwZXJTbGlkZSk7XG4gIH07XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5Td2lwZXJFbGVtZW50UmVnaXN0ZXJQYXJhbXMgPSBwYXJhbXMgPT4ge1xuICAgICAgcGFyYW1zTGlzdC5wdXNoKC4uLnBhcmFtcyk7XG4gICAgfTtcbiAgfVxuXG4gIHJlZ2lzdGVyKCk7XG5cbn0pKCk7XG5cbn0se31dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qIVxuICogVW5pZHJhZ2dlciB2My4wLjFcbiAqIERyYWdnYWJsZSBiYXNlIGNsYXNzXG4gKiBNSVQgbGljZW5zZVxuICovXG5cbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgICAgd2luZG93LFxuICAgICAgICByZXF1aXJlKCdldi1lbWl0dGVyJyksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5VbmlkcmFnZ2VyID0gZmFjdG9yeShcbiAgICAgICAgd2luZG93LFxuICAgICAgICB3aW5kb3cuRXZFbWl0dGVyLFxuICAgICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIGZhY3RvcnkoIHdpbmRvdywgRXZFbWl0dGVyICkge1xuXG5mdW5jdGlvbiBVbmlkcmFnZ2VyKCkge31cblxuLy8gaW5oZXJpdCBFdkVtaXR0ZXJcbmxldCBwcm90byA9IFVuaWRyYWdnZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZFbWl0dGVyLnByb3RvdHlwZSApO1xuXG4vLyAtLS0tLSBiaW5kIHN0YXJ0IC0tLS0tIC8vXG5cbi8vIHRyaWdnZXIgaGFuZGxlciBtZXRob2RzIGZvciBldmVudHNcbnByb3RvLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICBsZXQgbWV0aG9kID0gJ29uJyArIGV2ZW50LnR5cGU7XG4gIGlmICggdGhpc1sgbWV0aG9kIF0gKSB7XG4gICAgdGhpc1sgbWV0aG9kIF0oIGV2ZW50ICk7XG4gIH1cbn07XG5cbmxldCBzdGFydEV2ZW50LCBhY3RpdmVFdmVudHM7XG5pZiAoICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyApIHtcbiAgLy8gSEFDSyBwcmVmZXIgVG91Y2ggRXZlbnRzIGFzIHlvdSBjYW4gcHJldmVudERlZmF1bHQgb24gdG91Y2hzdGFydCB0b1xuICAvLyBkaXNhYmxlIHNjcm9sbCBpbiBpT1MgJiBtb2JpbGUgQ2hyb21lIG1ldGFmaXp6eS9mbGlja2l0eSMxMTc3XG4gIHN0YXJ0RXZlbnQgPSAndG91Y2hzdGFydCc7XG4gIGFjdGl2ZUV2ZW50cyA9IFsgJ3RvdWNobW92ZScsICd0b3VjaGVuZCcsICd0b3VjaGNhbmNlbCcgXTtcbn0gZWxzZSBpZiAoIHdpbmRvdy5Qb2ludGVyRXZlbnQgKSB7XG4gIC8vIFBvaW50ZXIgRXZlbnRzXG4gIHN0YXJ0RXZlbnQgPSAncG9pbnRlcmRvd24nO1xuICBhY3RpdmVFdmVudHMgPSBbICdwb2ludGVybW92ZScsICdwb2ludGVydXAnLCAncG9pbnRlcmNhbmNlbCcgXTtcbn0gZWxzZSB7XG4gIC8vIG1vdXNlIGV2ZW50c1xuICBzdGFydEV2ZW50ID0gJ21vdXNlZG93bic7XG4gIGFjdGl2ZUV2ZW50cyA9IFsgJ21vdXNlbW92ZScsICdtb3VzZXVwJyBdO1xufVxuXG4vLyBwcm90b3R5cGUgc28gaXQgY2FuIGJlIG92ZXJ3cml0ZWFibGUgYnkgRmxpY2tpdHlcbnByb3RvLnRvdWNoQWN0aW9uVmFsdWUgPSAnbm9uZSc7XG5cbnByb3RvLmJpbmRIYW5kbGVzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2JpbmRIYW5kbGVzKCAnYWRkRXZlbnRMaXN0ZW5lcicsIHRoaXMudG91Y2hBY3Rpb25WYWx1ZSApO1xufTtcblxucHJvdG8udW5iaW5kSGFuZGxlcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9iaW5kSGFuZGxlcyggJ3JlbW92ZUV2ZW50TGlzdGVuZXInLCAnJyApO1xufTtcblxuLyoqXG4gKiBBZGQgb3IgcmVtb3ZlIHN0YXJ0IGV2ZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gYmluZE1ldGhvZCAtIGFkZEV2ZW50TGlzdGVuZXIgb3IgcmVtb3ZlRXZlbnRMaXN0ZW5lclxuICogQHBhcmFtIHtTdHJpbmd9IHRvdWNoQWN0aW9uIC0gdmFsdWUgZm9yIHRvdWNoLWFjdGlvbiBDU1MgcHJvcGVydHlcbiAqL1xucHJvdG8uX2JpbmRIYW5kbGVzID0gZnVuY3Rpb24oIGJpbmRNZXRob2QsIHRvdWNoQWN0aW9uICkge1xuICB0aGlzLmhhbmRsZXMuZm9yRWFjaCggKCBoYW5kbGUgKSA9PiB7XG4gICAgaGFuZGxlWyBiaW5kTWV0aG9kIF0oIHN0YXJ0RXZlbnQsIHRoaXMgKTtcbiAgICBoYW5kbGVbIGJpbmRNZXRob2QgXSggJ2NsaWNrJywgdGhpcyApO1xuICAgIC8vIHRvdWNoLWFjdGlvbjogbm9uZSB0byBvdmVycmlkZSBicm93c2VyIHRvdWNoIGdlc3R1cmVzLiBtZXRhZml6enkvZmxpY2tpdHkjNTQwXG4gICAgaWYgKCB3aW5kb3cuUG9pbnRlckV2ZW50ICkgaGFuZGxlLnN0eWxlLnRvdWNoQWN0aW9uID0gdG91Y2hBY3Rpb247XG4gIH0gKTtcbn07XG5cbnByb3RvLmJpbmRBY3RpdmVQb2ludGVyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gIGFjdGl2ZUV2ZW50cy5mb3JFYWNoKCAoIGV2ZW50TmFtZSApID0+IHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCB0aGlzICk7XG4gIH0gKTtcbn07XG5cbnByb3RvLnVuYmluZEFjdGl2ZVBvaW50ZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgYWN0aXZlRXZlbnRzLmZvckVhY2goICggZXZlbnROYW1lICkgPT4ge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIHRoaXMgKTtcbiAgfSApO1xufTtcblxuLy8gLS0tLS0gZXZlbnQgaGFuZGxlciBoZWxwZXJzIC0tLS0tIC8vXG5cbi8vIHRyaWdnZXIgbWV0aG9kIHdpdGggbWF0Y2hpbmcgcG9pbnRlclxucHJvdG8ud2l0aFBvaW50ZXIgPSBmdW5jdGlvbiggbWV0aG9kTmFtZSwgZXZlbnQgKSB7XG4gIGlmICggZXZlbnQucG9pbnRlcklkID09PSB0aGlzLnBvaW50ZXJJZGVudGlmaWVyICkge1xuICAgIHRoaXNbIG1ldGhvZE5hbWUgXSggZXZlbnQsIGV2ZW50ICk7XG4gIH1cbn07XG5cbi8vIHRyaWdnZXIgbWV0aG9kIHdpdGggbWF0Y2hpbmcgdG91Y2hcbnByb3RvLndpdGhUb3VjaCA9IGZ1bmN0aW9uKCBtZXRob2ROYW1lLCBldmVudCApIHtcbiAgbGV0IHRvdWNoO1xuICBmb3IgKCBsZXQgY2hhbmdlZFRvdWNoIG9mIGV2ZW50LmNoYW5nZWRUb3VjaGVzICkge1xuICAgIGlmICggY2hhbmdlZFRvdWNoLmlkZW50aWZpZXIgPT09IHRoaXMucG9pbnRlcklkZW50aWZpZXIgKSB7XG4gICAgICB0b3VjaCA9IGNoYW5nZWRUb3VjaDtcbiAgICB9XG4gIH1cbiAgaWYgKCB0b3VjaCApIHRoaXNbIG1ldGhvZE5hbWUgXSggZXZlbnQsIHRvdWNoICk7XG59O1xuXG4vLyAtLS0tLSBzdGFydCBldmVudCAtLS0tLSAvL1xuXG5wcm90by5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy5wb2ludGVyRG93biggZXZlbnQsIGV2ZW50ICk7XG59O1xuXG5wcm90by5vbnRvdWNoc3RhcnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMucG9pbnRlckRvd24oIGV2ZW50LCBldmVudC5jaGFuZ2VkVG91Y2hlc1swXSApO1xufTtcblxucHJvdG8ub25wb2ludGVyZG93biA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy5wb2ludGVyRG93biggZXZlbnQsIGV2ZW50ICk7XG59O1xuXG4vLyBub2RlcyB0aGF0IGhhdmUgdGV4dCBmaWVsZHNcbmNvbnN0IGN1cnNvck5vZGVzID0gWyAnVEVYVEFSRUEnLCAnSU5QVVQnLCAnU0VMRUNUJywgJ09QVElPTicgXTtcbi8vIGlucHV0IHR5cGVzIHRoYXQgZG8gbm90IGhhdmUgdGV4dCBmaWVsZHNcbmNvbnN0IGNsaWNrVHlwZXMgPSBbICdyYWRpbycsICdjaGVja2JveCcsICdidXR0b24nLCAnc3VibWl0JywgJ2ltYWdlJywgJ2ZpbGUnIF07XG5cbi8qKlxuICogYW55IHRpbWUgeW91IHNldCBgZXZlbnQsIHBvaW50ZXJgIGl0IHJlZmVycyB0bzpcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gKiBAcGFyYW0ge0V2ZW50IHwgVG91Y2h9IHBvaW50ZXJcbiAqL1xucHJvdG8ucG9pbnRlckRvd24gPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIC8vIGRpc21pc3MgbXVsdGktdG91Y2ggdGFwcywgcmlnaHQgY2xpY2tzLCBhbmQgY2xpY2tzIG9uIHRleHQgZmllbGRzXG4gIGxldCBpc0N1cnNvck5vZGUgPSBjdXJzb3JOb2Rlcy5pbmNsdWRlcyggZXZlbnQudGFyZ2V0Lm5vZGVOYW1lICk7XG4gIGxldCBpc0NsaWNrVHlwZSA9IGNsaWNrVHlwZXMuaW5jbHVkZXMoIGV2ZW50LnRhcmdldC50eXBlICk7XG4gIGxldCBpc09rYXlFbGVtZW50ID0gIWlzQ3Vyc29yTm9kZSB8fCBpc0NsaWNrVHlwZTtcbiAgbGV0IGlzT2theSA9ICF0aGlzLmlzUG9pbnRlckRvd24gJiYgIWV2ZW50LmJ1dHRvbiAmJiBpc09rYXlFbGVtZW50O1xuICBpZiAoICFpc09rYXkgKSByZXR1cm47XG5cbiAgdGhpcy5pc1BvaW50ZXJEb3duID0gdHJ1ZTtcbiAgLy8gc2F2ZSBwb2ludGVyIGlkZW50aWZpZXIgdG8gbWF0Y2ggdXAgdG91Y2ggZXZlbnRzXG4gIHRoaXMucG9pbnRlcklkZW50aWZpZXIgPSBwb2ludGVyLnBvaW50ZXJJZCAhPT0gdW5kZWZpbmVkID9cbiAgICAvLyBwb2ludGVySWQgZm9yIHBvaW50ZXIgZXZlbnRzLCB0b3VjaC5pbmRlbnRpZmllciBmb3IgdG91Y2ggZXZlbnRzXG4gICAgcG9pbnRlci5wb2ludGVySWQgOiBwb2ludGVyLmlkZW50aWZpZXI7XG4gIC8vIHRyYWNrIHBvc2l0aW9uIGZvciBtb3ZlXG4gIHRoaXMucG9pbnRlckRvd25Qb2ludGVyID0ge1xuICAgIHBhZ2VYOiBwb2ludGVyLnBhZ2VYLFxuICAgIHBhZ2VZOiBwb2ludGVyLnBhZ2VZLFxuICB9O1xuXG4gIHRoaXMuYmluZEFjdGl2ZVBvaW50ZXJFdmVudHMoKTtcbiAgdGhpcy5lbWl0RXZlbnQoICdwb2ludGVyRG93bicsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xufTtcblxuLy8gLS0tLS0gbW92ZSAtLS0tLSAvL1xuXG5wcm90by5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy5wb2ludGVyTW92ZSggZXZlbnQsIGV2ZW50ICk7XG59O1xuXG5wcm90by5vbnBvaW50ZXJtb3ZlID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLndpdGhQb2ludGVyKCAncG9pbnRlck1vdmUnLCBldmVudCApO1xufTtcblxucHJvdG8ub250b3VjaG1vdmUgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMud2l0aFRvdWNoKCAncG9pbnRlck1vdmUnLCBldmVudCApO1xufTtcblxucHJvdG8ucG9pbnRlck1vdmUgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIGxldCBtb3ZlVmVjdG9yID0ge1xuICAgIHg6IHBvaW50ZXIucGFnZVggLSB0aGlzLnBvaW50ZXJEb3duUG9pbnRlci5wYWdlWCxcbiAgICB5OiBwb2ludGVyLnBhZ2VZIC0gdGhpcy5wb2ludGVyRG93blBvaW50ZXIucGFnZVksXG4gIH07XG4gIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlck1vdmUnLCBbIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yIF0gKTtcbiAgLy8gc3RhcnQgZHJhZyBpZiBwb2ludGVyIGhhcyBtb3ZlZCBmYXIgZW5vdWdoIHRvIHN0YXJ0IGRyYWdcbiAgbGV0IGlzRHJhZ1N0YXJ0aW5nID0gIXRoaXMuaXNEcmFnZ2luZyAmJiB0aGlzLmhhc0RyYWdTdGFydGVkKCBtb3ZlVmVjdG9yICk7XG4gIGlmICggaXNEcmFnU3RhcnRpbmcgKSB0aGlzLmRyYWdTdGFydCggZXZlbnQsIHBvaW50ZXIgKTtcbiAgaWYgKCB0aGlzLmlzRHJhZ2dpbmcgKSB0aGlzLmRyYWdNb3ZlKCBldmVudCwgcG9pbnRlciwgbW92ZVZlY3RvciApO1xufTtcblxuLy8gY29uZGl0aW9uIGlmIHBvaW50ZXIgaGFzIG1vdmVkIGZhciBlbm91Z2ggdG8gc3RhcnQgZHJhZ1xucHJvdG8uaGFzRHJhZ1N0YXJ0ZWQgPSBmdW5jdGlvbiggbW92ZVZlY3RvciApIHtcbiAgcmV0dXJuIE1hdGguYWJzKCBtb3ZlVmVjdG9yLnggKSA+IDMgfHwgTWF0aC5hYnMoIG1vdmVWZWN0b3IueSApID4gMztcbn07XG5cbi8vIC0tLS0tIGRyYWcgLS0tLS0gLy9cblxucHJvdG8uZHJhZ1N0YXJ0ID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlO1xuICB0aGlzLmlzUHJldmVudGluZ0NsaWNrcyA9IHRydWU7IC8vIHNldCBmbGFnIHRvIHByZXZlbnQgY2xpY2tzXG4gIHRoaXMuZW1pdEV2ZW50KCAnZHJhZ1N0YXJ0JywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG5wcm90by5kcmFnTW92ZSA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciwgbW92ZVZlY3RvciApIHtcbiAgdGhpcy5lbWl0RXZlbnQoICdkcmFnTW92ZScsIFsgZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgXSApO1xufTtcblxuLy8gLS0tLS0gZW5kIC0tLS0tIC8vXG5cbnByb3RvLm9ubW91c2V1cCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy5wb2ludGVyVXAoIGV2ZW50LCBldmVudCApO1xufTtcblxucHJvdG8ub25wb2ludGVydXAgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMud2l0aFBvaW50ZXIoICdwb2ludGVyVXAnLCBldmVudCApO1xufTtcblxucHJvdG8ub250b3VjaGVuZCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy53aXRoVG91Y2goICdwb2ludGVyVXAnLCBldmVudCApO1xufTtcblxucHJvdG8ucG9pbnRlclVwID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICB0aGlzLnBvaW50ZXJEb25lKCk7XG4gIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlclVwJywgWyBldmVudCwgcG9pbnRlciBdICk7XG5cbiAgaWYgKCB0aGlzLmlzRHJhZ2dpbmcgKSB7XG4gICAgdGhpcy5kcmFnRW5kKCBldmVudCwgcG9pbnRlciApO1xuICB9IGVsc2Uge1xuICAgIC8vIHBvaW50ZXIgZGlkbid0IG1vdmUgZW5vdWdoIGZvciBkcmFnIHRvIHN0YXJ0XG4gICAgdGhpcy5zdGF0aWNDbGljayggZXZlbnQsIHBvaW50ZXIgKTtcbiAgfVxufTtcblxucHJvdG8uZHJhZ0VuZCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7IC8vIHJlc2V0IGZsYWdcbiAgLy8gcmUtZW5hYmxlIGNsaWNraW5nIGFzeW5jXG4gIHNldFRpbWVvdXQoICgpID0+IGRlbGV0ZSB0aGlzLmlzUHJldmVudGluZ0NsaWNrcyApO1xuXG4gIHRoaXMuZW1pdEV2ZW50KCAnZHJhZ0VuZCcsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xufTtcblxuLy8gdHJpZ2dlcmVkIG9uIHBvaW50ZXIgdXAgJiBwb2ludGVyIGNhbmNlbFxucHJvdG8ucG9pbnRlckRvbmUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5pc1BvaW50ZXJEb3duID0gZmFsc2U7XG4gIGRlbGV0ZSB0aGlzLnBvaW50ZXJJZGVudGlmaWVyO1xuICB0aGlzLnVuYmluZEFjdGl2ZVBvaW50ZXJFdmVudHMoKTtcbiAgdGhpcy5lbWl0RXZlbnQoJ3BvaW50ZXJEb25lJyk7XG59O1xuXG4vLyAtLS0tLSBjYW5jZWwgLS0tLS0gLy9cblxucHJvdG8ub25wb2ludGVyY2FuY2VsID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLndpdGhQb2ludGVyKCAncG9pbnRlckNhbmNlbCcsIGV2ZW50ICk7XG59O1xuXG5wcm90by5vbnRvdWNoY2FuY2VsID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLndpdGhUb3VjaCggJ3BvaW50ZXJDYW5jZWwnLCBldmVudCApO1xufTtcblxucHJvdG8ucG9pbnRlckNhbmNlbCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdGhpcy5wb2ludGVyRG9uZSgpO1xuICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJDYW5jZWwnLCBbIGV2ZW50LCBwb2ludGVyIF0gKTtcbn07XG5cbi8vIC0tLS0tIGNsaWNrIC0tLS0tIC8vXG5cbi8vIGhhbmRsZSBhbGwgY2xpY2tzIGFuZCBwcmV2ZW50IGNsaWNrcyB3aGVuIGRyYWdnaW5nXG5wcm90by5vbmNsaWNrID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICBpZiAoIHRoaXMuaXNQcmV2ZW50aW5nQ2xpY2tzICkgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn07XG5cbi8vIHRyaWdnZXJlZCBhZnRlciBwb2ludGVyIGRvd24gJiB1cCB3aXRoIG5vL3RpbnkgbW92ZW1lbnRcbnByb3RvLnN0YXRpY0NsaWNrID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICAvLyBpZ25vcmUgZW11bGF0ZWQgbW91c2UgdXAgY2xpY2tzXG4gIGxldCBpc01vdXNldXAgPSBldmVudC50eXBlID09PSAnbW91c2V1cCc7XG4gIGlmICggaXNNb3VzZXVwICYmIHRoaXMuaXNJZ25vcmluZ01vdXNlVXAgKSByZXR1cm47XG5cbiAgdGhpcy5lbWl0RXZlbnQoICdzdGF0aWNDbGljaycsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xuXG4gIC8vIHNldCBmbGFnIGZvciBlbXVsYXRlZCBjbGlja3MgMzAwbXMgYWZ0ZXIgdG91Y2hlbmRcbiAgaWYgKCBpc01vdXNldXAgKSB7XG4gICAgdGhpcy5pc0lnbm9yaW5nTW91c2VVcCA9IHRydWU7XG4gICAgLy8gcmVzZXQgZmxhZyBhZnRlciA0MDBtc1xuICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgIGRlbGV0ZSB0aGlzLmlzSWdub3JpbmdNb3VzZVVwO1xuICAgIH0sIDQwMCApO1xuICB9XG59O1xuXG4vLyAtLS0tLSAgLS0tLS0gLy9cblxucmV0dXJuIFVuaWRyYWdnZXI7XG5cbn0gKSApO1xuXG59LHtcImV2LWVtaXR0ZXJcIjoxfV0sMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJOSUxcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX25pbC5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInBhcnNlXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9wYXJzZS5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInN0cmluZ2lmeVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfc3RyaW5naWZ5LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjFcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3YuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ2M1wiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdjIuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ2NFwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdjMuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ2NVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdjQuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ2YWxpZGF0ZVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdmFsaWRhdGUuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ2ZXJzaW9uXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF92ZXJzaW9uLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3YgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3YxLmpzXCIpKTtcblxudmFyIF92MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjMuanNcIikpO1xuXG52YXIgX3YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92NC5qc1wiKSk7XG5cbnZhciBfdjQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Y1LmpzXCIpKTtcblxudmFyIF9uaWwgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL25pbC5qc1wiKSk7XG5cbnZhciBfdmVyc2lvbiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdmVyc2lvbi5qc1wiKSk7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxudmFyIF9zdHJpbmdpZnkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3N0cmluZ2lmeS5qc1wiKSk7XG5cbnZhciBfcGFyc2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3BhcnNlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cbn0se1wiLi9uaWwuanNcIjoyNSxcIi4vcGFyc2UuanNcIjoyNixcIi4vc3RyaW5naWZ5LmpzXCI6MzAsXCIuL3YxLmpzXCI6MzEsXCIuL3YzLmpzXCI6MzIsXCIuL3Y0LmpzXCI6MzQsXCIuL3Y1LmpzXCI6MzUsXCIuL3ZhbGlkYXRlLmpzXCI6MzYsXCIuL3ZlcnNpb24uanNcIjozN31dLDIzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG4vKlxuICogQnJvd3Nlci1jb21wYXRpYmxlIEphdmFTY3JpcHQgTUQ1XG4gKlxuICogTW9kaWZpY2F0aW9uIG9mIEphdmFTY3JpcHQgTUQ1XG4gKiBodHRwczovL2dpdGh1Yi5jb20vYmx1ZWltcC9KYXZhU2NyaXB0LU1ENVxuICpcbiAqIENvcHlyaWdodCAyMDExLCBTZWJhc3RpYW4gVHNjaGFuXG4gKiBodHRwczovL2JsdWVpbXAubmV0XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqXG4gKiBCYXNlZCBvblxuICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBSU0EgRGF0YSBTZWN1cml0eSwgSW5jLiBNRDUgTWVzc2FnZVxuICogRGlnZXN0IEFsZ29yaXRobSwgYXMgZGVmaW5lZCBpbiBSRkMgMTMyMS5cbiAqIFZlcnNpb24gMi4yIENvcHlyaWdodCAoQykgUGF1bCBKb2huc3RvbiAxOTk5IC0gMjAwOVxuICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldFxuICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlXG4gKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL2NyeXB0L21kNSBmb3IgbW9yZSBpbmZvLlxuICovXG5mdW5jdGlvbiBtZDUoYnl0ZXMpIHtcbiAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBtc2cgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYnl0ZXMpKTsgLy8gVVRGOCBlc2NhcGVcblxuICAgIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobXNnLmxlbmd0aCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1zZy5sZW5ndGg7ICsraSkge1xuICAgICAgYnl0ZXNbaV0gPSBtc2cuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWQ1VG9IZXhFbmNvZGVkQXJyYXkod29yZHNUb01kNShieXRlc1RvV29yZHMoYnl0ZXMpLCBieXRlcy5sZW5ndGggKiA4KSk7XG59XG4vKlxuICogQ29udmVydCBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzIHRvIGFuIGFycmF5IG9mIGJ5dGVzXG4gKi9cblxuXG5mdW5jdGlvbiBtZDVUb0hleEVuY29kZWRBcnJheShpbnB1dCkge1xuICBjb25zdCBvdXRwdXQgPSBbXTtcbiAgY29uc3QgbGVuZ3RoMzIgPSBpbnB1dC5sZW5ndGggKiAzMjtcbiAgY29uc3QgaGV4VGFiID0gJzAxMjM0NTY3ODlhYmNkZWYnO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoMzI7IGkgKz0gOCkge1xuICAgIGNvbnN0IHggPSBpbnB1dFtpID4+IDVdID4+PiBpICUgMzIgJiAweGZmO1xuICAgIGNvbnN0IGhleCA9IHBhcnNlSW50KGhleFRhYi5jaGFyQXQoeCA+Pj4gNCAmIDB4MGYpICsgaGV4VGFiLmNoYXJBdCh4ICYgMHgwZiksIDE2KTtcbiAgICBvdXRwdXQucHVzaChoZXgpO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIG91dHB1dCBsZW5ndGggd2l0aCBwYWRkaW5nIGFuZCBiaXQgbGVuZ3RoXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRPdXRwdXRMZW5ndGgoaW5wdXRMZW5ndGg4KSB7XG4gIHJldHVybiAoaW5wdXRMZW5ndGg4ICsgNjQgPj4+IDkgPDwgNCkgKyAxNCArIDE7XG59XG4vKlxuICogQ2FsY3VsYXRlIHRoZSBNRDUgb2YgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aC5cbiAqL1xuXG5cbmZ1bmN0aW9uIHdvcmRzVG9NZDUoeCwgbGVuKSB7XG4gIC8qIGFwcGVuZCBwYWRkaW5nICovXG4gIHhbbGVuID4+IDVdIHw9IDB4ODAgPDwgbGVuICUgMzI7XG4gIHhbZ2V0T3V0cHV0TGVuZ3RoKGxlbikgLSAxXSA9IGxlbjtcbiAgbGV0IGEgPSAxNzMyNTg0MTkzO1xuICBsZXQgYiA9IC0yNzE3MzM4Nzk7XG4gIGxldCBjID0gLTE3MzI1ODQxOTQ7XG4gIGxldCBkID0gMjcxNzMzODc4O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMTYpIHtcbiAgICBjb25zdCBvbGRhID0gYTtcbiAgICBjb25zdCBvbGRiID0gYjtcbiAgICBjb25zdCBvbGRjID0gYztcbiAgICBjb25zdCBvbGRkID0gZDtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpXSwgNywgLTY4MDg3NjkzNik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDFdLCAxMiwgLTM4OTU2NDU4Nik7XG4gICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNywgNjA2MTA1ODE5KTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgM10sIDIyLCAtMTA0NDUyNTMzMCk7XG4gICAgYSA9IG1kNWZmKGEsIGIsIGMsIGQsIHhbaSArIDRdLCA3LCAtMTc2NDE4ODk3KTtcbiAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgNV0sIDEyLCAxMjAwMDgwNDI2KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgNl0sIDE3LCAtMTQ3MzIzMTM0MSk7XG4gICAgYiA9IG1kNWZmKGIsIGMsIGQsIGEsIHhbaSArIDddLCAyMiwgLTQ1NzA1OTgzKTtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpICsgOF0sIDcsIDE3NzAwMzU0MTYpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA5XSwgMTIsIC0xOTU4NDE0NDE3KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMTBdLCAxNywgLTQyMDYzKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgMTFdLCAyMiwgLTE5OTA0MDQxNjIpO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyAxMl0sIDcsIDE4MDQ2MDM2ODIpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyAxM10sIDEyLCAtNDAzNDExMDEpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyAxNF0sIDE3LCAtMTUwMjAwMjI5MCk7XG4gICAgYiA9IG1kNWZmKGIsIGMsIGQsIGEsIHhbaSArIDE1XSwgMjIsIDEyMzY1MzUzMjkpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxXSwgNSwgLTE2NTc5NjUxMCk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDZdLCA5LCAtMTA2OTUwMTYzMik7XG4gICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDExXSwgMTQsIDY0MzcxNzcxMyk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaV0sIDIwLCAtMzczODk3MzAyKTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgNV0sIDUsIC03MDE1NTg2OTEpO1xuICAgIGQgPSBtZDVnZyhkLCBhLCBiLCBjLCB4W2kgKyAxMF0sIDksIDM4MDE2MDgzKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTVdLCAxNCwgLTY2MDQ3ODMzNSk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaSArIDRdLCAyMCwgLTQwNTUzNzg0OCk7XG4gICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDldLCA1LCA1Njg0NDY0MzgpO1xuICAgIGQgPSBtZDVnZyhkLCBhLCBiLCBjLCB4W2kgKyAxNF0sIDksIC0xMDE5ODAzNjkwKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgM10sIDE0LCAtMTg3MzYzOTYxKTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpICsgOF0sIDIwLCAxMTYzNTMxNTAxKTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgMTNdLCA1LCAtMTQ0NDY4MTQ2Nyk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDJdLCA5LCAtNTE0MDM3ODQpO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTQsIDE3MzUzMjg0NzMpO1xuICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyAxMl0sIDIwLCAtMTkyNjYwNzczNCk7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDVdLCA0LCAtMzc4NTU4KTtcbiAgICBkID0gbWQ1aGgoZCwgYSwgYiwgYywgeFtpICsgOF0sIDExLCAtMjAyMjU3NDQ2Myk7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDExXSwgMTYsIDE4MzkwMzA1NjIpO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAxNF0sIDIzLCAtMzUzMDk1NTYpO1xuICAgIGEgPSBtZDVoaChhLCBiLCBjLCBkLCB4W2kgKyAxXSwgNCwgLTE1MzA5OTIwNjApO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyA0XSwgMTEsIDEyNzI4OTMzNTMpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTYsIC0xNTU0OTc2MzIpO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAxMF0sIDIzLCAtMTA5NDczMDY0MCk7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDEzXSwgNCwgNjgxMjc5MTc0KTtcbiAgICBkID0gbWQ1aGgoZCwgYSwgYiwgYywgeFtpXSwgMTEsIC0zNTg1MzcyMjIpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAzXSwgMTYsIC03MjI1MjE5NzkpO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyA2XSwgMjMsIDc2MDI5MTg5KTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgOV0sIDQsIC02NDAzNjQ0ODcpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyAxMl0sIDExLCAtNDIxODE1ODM1KTtcbiAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTVdLCAxNiwgNTMwNzQyNTIwKTtcbiAgICBiID0gbWQ1aGgoYiwgYywgZCwgYSwgeFtpICsgMl0sIDIzLCAtOTk1MzM4NjUxKTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpXSwgNiwgLTE5ODYzMDg0NCk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDddLCAxMCwgMTEyNjg5MTQxNSk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTUsIC0xNDE2MzU0OTA1KTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgNV0sIDIxLCAtNTc0MzQwNTUpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyAxMl0sIDYsIDE3MDA0ODU1NzEpO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAzXSwgMTAsIC0xODk0OTg2NjA2KTtcbiAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTBdLCAxNSwgLTEwNTE1MjMpO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxXSwgMjEsIC0yMDU0OTIyNzk5KTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgOF0sIDYsIDE4NzMzMTMzNTkpO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxNV0sIDEwLCAtMzA2MTE3NDQpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTUsIC0xNTYwMTk4MzgwKTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgMTNdLCAyMSwgMTMwOTE1MTY0OSk7XG4gICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDRdLCA2LCAtMTQ1NTIzMDcwKTtcbiAgICBkID0gbWQ1aWkoZCwgYSwgYiwgYywgeFtpICsgMTFdLCAxMCwgLTExMjAyMTAzNzkpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyAyXSwgMTUsIDcxODc4NzI1OSk7XG4gICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDldLCAyMSwgLTM0MzQ4NTU1MSk7XG4gICAgYSA9IHNhZmVBZGQoYSwgb2xkYSk7XG4gICAgYiA9IHNhZmVBZGQoYiwgb2xkYik7XG4gICAgYyA9IHNhZmVBZGQoYywgb2xkYyk7XG4gICAgZCA9IHNhZmVBZGQoZCwgb2xkZCk7XG4gIH1cblxuICByZXR1cm4gW2EsIGIsIGMsIGRdO1xufVxuLypcbiAqIENvbnZlcnQgYW4gYXJyYXkgYnl0ZXMgdG8gYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3Jkc1xuICogQ2hhcmFjdGVycyA+MjU1IGhhdmUgdGhlaXIgaGlnaC1ieXRlIHNpbGVudGx5IGlnbm9yZWQuXG4gKi9cblxuXG5mdW5jdGlvbiBieXRlc1RvV29yZHMoaW5wdXQpIHtcbiAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IGxlbmd0aDggPSBpbnB1dC5sZW5ndGggKiA4O1xuICBjb25zdCBvdXRwdXQgPSBuZXcgVWludDMyQXJyYXkoZ2V0T3V0cHV0TGVuZ3RoKGxlbmd0aDgpKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDg7IGkgKz0gOCkge1xuICAgIG91dHB1dFtpID4+IDVdIHw9IChpbnB1dFtpIC8gOF0gJiAweGZmKSA8PCBpICUgMzI7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufVxuLypcbiAqIEFkZCBpbnRlZ2Vycywgd3JhcHBpbmcgYXQgMl4zMi4gVGhpcyB1c2VzIDE2LWJpdCBvcGVyYXRpb25zIGludGVybmFsbHlcbiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuXG4gKi9cblxuXG5mdW5jdGlvbiBzYWZlQWRkKHgsIHkpIHtcbiAgY29uc3QgbHN3ID0gKHggJiAweGZmZmYpICsgKHkgJiAweGZmZmYpO1xuICBjb25zdCBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTtcbiAgcmV0dXJuIG1zdyA8PCAxNiB8IGxzdyAmIDB4ZmZmZjtcbn1cbi8qXG4gKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuXG4gKi9cblxuXG5mdW5jdGlvbiBiaXRSb3RhdGVMZWZ0KG51bSwgY250KSB7XG4gIHJldHVybiBudW0gPDwgY250IHwgbnVtID4+PiAzMiAtIGNudDtcbn1cbi8qXG4gKiBUaGVzZSBmdW5jdGlvbnMgaW1wbGVtZW50IHRoZSBmb3VyIGJhc2ljIG9wZXJhdGlvbnMgdGhlIGFsZ29yaXRobSB1c2VzLlxuICovXG5cblxuZnVuY3Rpb24gbWQ1Y21uKHEsIGEsIGIsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIHNhZmVBZGQoYml0Um90YXRlTGVmdChzYWZlQWRkKHNhZmVBZGQoYSwgcSksIHNhZmVBZGQoeCwgdCkpLCBzKSwgYik7XG59XG5cbmZ1bmN0aW9uIG1kNWZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgYyB8IH5iICYgZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWdnKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgZCB8IGMgJiB+ZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWhoKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBtZDVpaShhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gIHJldHVybiBtZDVjbW4oYyBeIChiIHwgfmQpLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxudmFyIF9kZWZhdWx0ID0gbWQ1O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG59LHt9XSwyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbmNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG52YXIgX2RlZmF1bHQgPSB7XG4gIHJhbmRvbVVVSURcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbn0se31dLDI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9kZWZhdWx0ID0gJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCc7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbn0se31dLDI2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHBhcnNlKHV1aWQpIHtcbiAgaWYgKCEoMCwgX3ZhbGlkYXRlLmRlZmF1bHQpKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdJbnZhbGlkIFVVSUQnKTtcbiAgfVxuXG4gIGxldCB2O1xuICBjb25zdCBhcnIgPSBuZXcgVWludDhBcnJheSgxNik7IC8vIFBhcnNlICMjIyMjIyMjLS4uLi4tLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFyclswXSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgwLCA4KSwgMTYpKSA+Pj4gMjQ7XG4gIGFyclsxXSA9IHYgPj4+IDE2ICYgMHhmZjtcbiAgYXJyWzJdID0gdiA+Pj4gOCAmIDB4ZmY7XG4gIGFyclszXSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0jIyMjLS4uLi4tLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbNF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoOSwgMTMpLCAxNikpID4+PiA4O1xuICBhcnJbNV0gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0jIyMjLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzZdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDE0LCAxOCksIDE2KSkgPj4+IDg7XG4gIGFycls3XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLS4uLi4tIyMjIy0uLi4uLi4uLi4uLi5cblxuICBhcnJbOF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTksIDIzKSwgMTYpKSA+Pj4gODtcbiAgYXJyWzldID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0uLi4uLSMjIyMjIyMjIyMjI1xuICAvLyAoVXNlIFwiL1wiIHRvIGF2b2lkIDMyLWJpdCB0cnVuY2F0aW9uIHdoZW4gYml0LXNoaWZ0aW5nIGhpZ2gtb3JkZXIgYnl0ZXMpXG5cbiAgYXJyWzEwXSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgyNCwgMzYpLCAxNikpIC8gMHgxMDAwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMV0gPSB2IC8gMHgxMDAwMDAwMDAgJiAweGZmO1xuICBhcnJbMTJdID0gdiA+Pj4gMjQgJiAweGZmO1xuICBhcnJbMTNdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMTRdID0gdiA+Pj4gOCAmIDB4ZmY7XG4gIGFyclsxNV0gPSB2ICYgMHhmZjtcbiAgcmV0dXJuIGFycjtcbn1cblxudmFyIF9kZWZhdWx0ID0gcGFyc2U7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbn0se1wiLi92YWxpZGF0ZS5qc1wiOjM2fV0sMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX2RlZmF1bHQgPSAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbn0se31dLDI4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gcm5nO1xuLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5sZXQgZ2V0UmFuZG9tVmFsdWVzO1xuY29uc3Qgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5cbmZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byk7XG5cbiAgICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufVxufSx7fV0sMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbi8vIEFkYXB0ZWQgZnJvbSBDaHJpcyBWZW5lc3MnIFNIQTEgY29kZSBhdFxuLy8gaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9zaGExLmh0bWxcbmZ1bmN0aW9uIGYocywgeCwgeSwgeikge1xuICBzd2l0Y2ggKHMpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4geCAmIHkgXiB+eCAmIHo7XG5cbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4geCBeIHkgXiB6O1xuXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIHggJiB5IF4geCAmIHogXiB5ICYgejtcblxuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG4gIH1cbn1cblxuZnVuY3Rpb24gUk9UTCh4LCBuKSB7XG4gIHJldHVybiB4IDw8IG4gfCB4ID4+PiAzMiAtIG47XG59XG5cbmZ1bmN0aW9uIHNoYTEoYnl0ZXMpIHtcbiAgY29uc3QgSyA9IFsweDVhODI3OTk5LCAweDZlZDllYmExLCAweDhmMWJiY2RjLCAweGNhNjJjMWQ2XTtcbiAgY29uc3QgSCA9IFsweDY3NDUyMzAxLCAweGVmY2RhYjg5LCAweDk4YmFkY2ZlLCAweDEwMzI1NDc2LCAweGMzZDJlMWYwXTtcblxuICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlcy5wdXNoKG1zZy5jaGFyQ29kZUF0KGkpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoYnl0ZXMpKSB7XG4gICAgLy8gQ29udmVydCBBcnJheS1saWtlIHRvIEFycmF5XG4gICAgYnl0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChieXRlcyk7XG4gIH1cblxuICBieXRlcy5wdXNoKDB4ODApO1xuICBjb25zdCBsID0gYnl0ZXMubGVuZ3RoIC8gNCArIDI7XG4gIGNvbnN0IE4gPSBNYXRoLmNlaWwobCAvIDE2KTtcbiAgY29uc3QgTSA9IG5ldyBBcnJheShOKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IE47ICsraSkge1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50MzJBcnJheSgxNik7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDE2OyArK2opIHtcbiAgICAgIGFycltqXSA9IGJ5dGVzW2kgKiA2NCArIGogKiA0XSA8PCAyNCB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgMV0gPDwgMTYgfCBieXRlc1tpICogNjQgKyBqICogNCArIDJdIDw8IDggfCBieXRlc1tpICogNjQgKyBqICogNCArIDNdO1xuICAgIH1cblxuICAgIE1baV0gPSBhcnI7XG4gIH1cblxuICBNW04gLSAxXVsxNF0gPSAoYnl0ZXMubGVuZ3RoIC0gMSkgKiA4IC8gTWF0aC5wb3coMiwgMzIpO1xuICBNW04gLSAxXVsxNF0gPSBNYXRoLmZsb29yKE1bTiAtIDFdWzE0XSk7XG4gIE1bTiAtIDFdWzE1XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggJiAweGZmZmZmZmZmO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgKytpKSB7XG4gICAgY29uc3QgVyA9IG5ldyBVaW50MzJBcnJheSg4MCk7XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDE2OyArK3QpIHtcbiAgICAgIFdbdF0gPSBNW2ldW3RdO1xuICAgIH1cblxuICAgIGZvciAobGV0IHQgPSAxNjsgdCA8IDgwOyArK3QpIHtcbiAgICAgIFdbdF0gPSBST1RMKFdbdCAtIDNdIF4gV1t0IC0gOF0gXiBXW3QgLSAxNF0gXiBXW3QgLSAxNl0sIDEpO1xuICAgIH1cblxuICAgIGxldCBhID0gSFswXTtcbiAgICBsZXQgYiA9IEhbMV07XG4gICAgbGV0IGMgPSBIWzJdO1xuICAgIGxldCBkID0gSFszXTtcbiAgICBsZXQgZSA9IEhbNF07XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDgwOyArK3QpIHtcbiAgICAgIGNvbnN0IHMgPSBNYXRoLmZsb29yKHQgLyAyMCk7XG4gICAgICBjb25zdCBUID0gUk9UTChhLCA1KSArIGYocywgYiwgYywgZCkgKyBlICsgS1tzXSArIFdbdF0gPj4+IDA7XG4gICAgICBlID0gZDtcbiAgICAgIGQgPSBjO1xuICAgICAgYyA9IFJPVEwoYiwgMzApID4+PiAwO1xuICAgICAgYiA9IGE7XG4gICAgICBhID0gVDtcbiAgICB9XG5cbiAgICBIWzBdID0gSFswXSArIGEgPj4+IDA7XG4gICAgSFsxXSA9IEhbMV0gKyBiID4+PiAwO1xuICAgIEhbMl0gPSBIWzJdICsgYyA+Pj4gMDtcbiAgICBIWzNdID0gSFszXSArIGQgPj4+IDA7XG4gICAgSFs0XSA9IEhbNF0gKyBlID4+PiAwO1xuICB9XG5cbiAgcmV0dXJuIFtIWzBdID4+IDI0ICYgMHhmZiwgSFswXSA+PiAxNiAmIDB4ZmYsIEhbMF0gPj4gOCAmIDB4ZmYsIEhbMF0gJiAweGZmLCBIWzFdID4+IDI0ICYgMHhmZiwgSFsxXSA+PiAxNiAmIDB4ZmYsIEhbMV0gPj4gOCAmIDB4ZmYsIEhbMV0gJiAweGZmLCBIWzJdID4+IDI0ICYgMHhmZiwgSFsyXSA+PiAxNiAmIDB4ZmYsIEhbMl0gPj4gOCAmIDB4ZmYsIEhbMl0gJiAweGZmLCBIWzNdID4+IDI0ICYgMHhmZiwgSFszXSA+PiAxNiAmIDB4ZmYsIEhbM10gPj4gOCAmIDB4ZmYsIEhbM10gJiAweGZmLCBIWzRdID4+IDI0ICYgMHhmZiwgSFs0XSA+PiAxNiAmIDB4ZmYsIEhbNF0gPj4gOCAmIDB4ZmYsIEhbNF0gJiAweGZmXTtcbn1cblxudmFyIF9kZWZhdWx0ID0gc2hhMTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xufSx7fV0sMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5leHBvcnRzLnVuc2FmZVN0cmluZ2lmeSA9IHVuc2FmZVN0cmluZ2lmeTtcblxudmFyIF92YWxpZGF0ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdmFsaWRhdGUuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbmNvbnN0IGJ5dGVUb0hleCA9IFtdO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5cbmZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIHJldHVybiBieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghKDAsIF92YWxpZGF0ZS5kZWZhdWx0KSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cblxuICByZXR1cm4gdXVpZDtcbn1cblxudmFyIF9kZWZhdWx0ID0gc3RyaW5naWZ5O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG59LHtcIi4vdmFsaWRhdGUuanNcIjozNn1dLDMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3JuZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcm5nLmpzXCIpKTtcblxudmFyIF9zdHJpbmdpZnkgPSByZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vICoqYHYxKClgIC0gR2VuZXJhdGUgdGltZS1iYXNlZCBVVUlEKipcbi8vXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuLy8gYW5kIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS91dWlkLmh0bWxcbmxldCBfbm9kZUlkO1xuXG5sZXQgX2Nsb2Nrc2VxOyAvLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcblxuXG5sZXQgX2xhc3RNU2VjcyA9IDA7XG5sZXQgX2xhc3ROU2VjcyA9IDA7IC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQgZm9yIEFQSSBkZXRhaWxzXG5cbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGxldCBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICBjb25zdCBiID0gYnVmIHx8IG5ldyBBcnJheSgxNik7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsZXQgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCBfbm9kZUlkO1xuICBsZXQgY2xvY2tzZXEgPSBvcHRpb25zLmNsb2Nrc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsb2Nrc2VxIDogX2Nsb2Nrc2VxOyAvLyBub2RlIGFuZCBjbG9ja3NlcSBuZWVkIHRvIGJlIGluaXRpYWxpemVkIHRvIHJhbmRvbSB2YWx1ZXMgaWYgdGhleSdyZSBub3RcbiAgLy8gc3BlY2lmaWVkLiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50XG4gIC8vIHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcblxuICBpZiAobm9kZSA9PSBudWxsIHx8IGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICBjb25zdCBzZWVkQnl0ZXMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgX3JuZy5kZWZhdWx0KSgpO1xuXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtzZWVkQnl0ZXNbMF0gfCAweDAxLCBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XV07XG4gICAgfVxuXG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9IC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuXG5cbiAgbGV0IG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IERhdGUubm93KCk7IC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcblxuICBsZXQgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7IC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcblxuICBjb25zdCBkdCA9IG1zZWNzIC0gX2xhc3RNU2VjcyArIChuc2VjcyAtIF9sYXN0TlNlY3MpIC8gMTAwMDA7IC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cblxuICBpZiAoZHQgPCAwICYmIG9wdGlvbnMuY2xvY2tzZXEgPT09IHVuZGVmaW5lZCkge1xuICAgIGNsb2Nrc2VxID0gY2xvY2tzZXEgKyAxICYgMHgzZmZmO1xuICB9IC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcblxuXG4gIGlmICgoZHQgPCAwIHx8IG1zZWNzID4gX2xhc3RNU2VjcykgJiYgb3B0aW9ucy5uc2VjcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbnNlY3MgPSAwO1xuICB9IC8vIFBlciA0LjIuMS4yIFRocm93IGVycm9yIGlmIHRvbyBtYW55IHV1aWRzIGFyZSByZXF1ZXN0ZWRcblxuXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInV1aWQudjEoKTogQ2FuJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjXCIpO1xuICB9XG5cbiAgX2xhc3RNU2VjcyA9IG1zZWNzO1xuICBfbGFzdE5TZWNzID0gbnNlY3M7XG4gIF9jbG9ja3NlcSA9IGNsb2Nrc2VxOyAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcblxuICBtc2VjcyArPSAxMjIxOTI5MjgwMDAwMDsgLy8gYHRpbWVfbG93YFxuXG4gIGNvbnN0IHRsID0gKChtc2VjcyAmIDB4ZmZmZmZmZikgKiAxMDAwMCArIG5zZWNzKSAlIDB4MTAwMDAwMDAwO1xuICBiW2krK10gPSB0bCA+Pj4gMjQgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gMTYgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsICYgMHhmZjsgLy8gYHRpbWVfbWlkYFxuXG4gIGNvbnN0IHRtaCA9IG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjsgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcblxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG5cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7IC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDsgLy8gYGNsb2NrX3NlcV9sb3dgXG5cbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmOyAvLyBgbm9kZWBcblxuICBmb3IgKGxldCBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgfHwgKDAsIF9zdHJpbmdpZnkudW5zYWZlU3RyaW5naWZ5KShiKTtcbn1cblxudmFyIF9kZWZhdWx0ID0gdjE7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbn0se1wiLi9ybmcuanNcIjoyOCxcIi4vc3RyaW5naWZ5LmpzXCI6MzB9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF92ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92MzUuanNcIikpO1xuXG52YXIgX21kID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9tZDUuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5jb25zdCB2MyA9ICgwLCBfdi5kZWZhdWx0KSgndjMnLCAweDMwLCBfbWQuZGVmYXVsdCk7XG52YXIgX2RlZmF1bHQgPSB2MztcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xufSx7XCIuL21kNS5qc1wiOjIzLFwiLi92MzUuanNcIjozM31dLDMzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5VUkwgPSBleHBvcnRzLkROUyA9IHZvaWQgMDtcbmV4cG9ydHMuZGVmYXVsdCA9IHYzNTtcblxudmFyIF9zdHJpbmdpZnkgPSByZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIik7XG5cbnZhciBfcGFyc2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3BhcnNlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpOyAvLyBVVEY4IGVzY2FwZVxuXG4gIGNvbnN0IGJ5dGVzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBieXRlcy5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpKTtcbiAgfVxuXG4gIHJldHVybiBieXRlcztcbn1cblxuY29uc3QgRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnRzLkROUyA9IEROUztcbmNvbnN0IFVSTCA9ICc2YmE3YjgxMS05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0cy5VUkwgPSBVUkw7XG5cbmZ1bmN0aW9uIHYzNShuYW1lLCB2ZXJzaW9uLCBoYXNoZnVuYykge1xuICBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQodmFsdWUsIG5hbWVzcGFjZSwgYnVmLCBvZmZzZXQpIHtcbiAgICB2YXIgX25hbWVzcGFjZTtcblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IHN0cmluZ1RvQnl0ZXModmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlID09PSAnc3RyaW5nJykge1xuICAgICAgbmFtZXNwYWNlID0gKDAsIF9wYXJzZS5kZWZhdWx0KShuYW1lc3BhY2UpO1xuICAgIH1cblxuICAgIGlmICgoKF9uYW1lc3BhY2UgPSBuYW1lc3BhY2UpID09PSBudWxsIHx8IF9uYW1lc3BhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9uYW1lc3BhY2UubGVuZ3RoKSAhPT0gMTYpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignTmFtZXNwYWNlIG11c3QgYmUgYXJyYXktbGlrZSAoMTYgaXRlcmFibGUgaW50ZWdlciB2YWx1ZXMsIDAtMjU1KScpO1xuICAgIH0gLy8gQ29tcHV0ZSBoYXNoIG9mIG5hbWVzcGFjZSBhbmQgdmFsdWUsIFBlciA0LjNcbiAgICAvLyBGdXR1cmU6IFVzZSBzcHJlYWQgc3ludGF4IHdoZW4gc3VwcG9ydGVkIG9uIGFsbCBwbGF0Zm9ybXMsIGUuZy4gYGJ5dGVzID1cbiAgICAvLyBoYXNoZnVuYyhbLi4ubmFtZXNwYWNlLCAuLi4gdmFsdWVdKWBcblxuXG4gICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYgKyB2YWx1ZS5sZW5ndGgpO1xuICAgIGJ5dGVzLnNldChuYW1lc3BhY2UpO1xuICAgIGJ5dGVzLnNldCh2YWx1ZSwgbmFtZXNwYWNlLmxlbmd0aCk7XG4gICAgYnl0ZXMgPSBoYXNoZnVuYyhieXRlcyk7XG4gICAgYnl0ZXNbNl0gPSBieXRlc1s2XSAmIDB4MGYgfCB2ZXJzaW9uO1xuICAgIGJ5dGVzWzhdID0gYnl0ZXNbOF0gJiAweDNmIHwgMHg4MDtcblxuICAgIGlmIChidWYpIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgYnVmW29mZnNldCArIGldID0gYnl0ZXNbaV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWY7XG4gICAgfVxuXG4gICAgcmV0dXJuICgwLCBfc3RyaW5naWZ5LnVuc2FmZVN0cmluZ2lmeSkoYnl0ZXMpO1xuICB9IC8vIEZ1bmN0aW9uI25hbWUgaXMgbm90IHNldHRhYmxlIG9uIHNvbWUgcGxhdGZvcm1zICgjMjcwKVxuXG5cbiAgdHJ5IHtcbiAgICBnZW5lcmF0ZVVVSUQubmFtZSA9IG5hbWU7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICB9IGNhdGNoIChlcnIpIHt9IC8vIEZvciBDb21tb25KUyBkZWZhdWx0IGV4cG9ydCBzdXBwb3J0XG5cblxuICBnZW5lcmF0ZVVVSUQuRE5TID0gRE5TO1xuICBnZW5lcmF0ZVVVSUQuVVJMID0gVVJMO1xuICByZXR1cm4gZ2VuZXJhdGVVVUlEO1xufVxufSx7XCIuL3BhcnNlLmpzXCI6MjYsXCIuL3N0cmluZ2lmeS5qc1wiOjMwfV0sMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfbmF0aXZlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9uYXRpdmUuanNcIikpO1xuXG52YXIgX3JuZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcm5nLmpzXCIpKTtcblxudmFyIF9zdHJpbmdpZnkgPSByZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChfbmF0aXZlLmRlZmF1bHQucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9uYXRpdmUuZGVmYXVsdC5yYW5kb21VVUlEKCk7XG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBjb25zdCBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IF9ybmcuZGVmYXVsdCkoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gKDAsIF9zdHJpbmdpZnkudW5zYWZlU3RyaW5naWZ5KShybmRzKTtcbn1cblxudmFyIF9kZWZhdWx0ID0gdjQ7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbn0se1wiLi9uYXRpdmUuanNcIjoyNCxcIi4vcm5nLmpzXCI6MjgsXCIuL3N0cmluZ2lmeS5qc1wiOjMwfV0sMzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjM1LmpzXCIpKTtcblxudmFyIF9zaGEgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3NoYTEuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5jb25zdCB2NSA9ICgwLCBfdi5kZWZhdWx0KSgndjUnLCAweDUwLCBfc2hhLmRlZmF1bHQpO1xudmFyIF9kZWZhdWx0ID0gdjU7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbn0se1wiLi9zaGExLmpzXCI6MjksXCIuL3YzNS5qc1wiOjMzfV0sMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfcmVnZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JlZ2V4LmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIF9yZWdleC5kZWZhdWx0LnRlc3QodXVpZCk7XG59XG5cbnZhciBfZGVmYXVsdCA9IHZhbGlkYXRlO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG59LHtcIi4vcmVnZXguanNcIjoyN31dLDM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHZlcnNpb24odXVpZCkge1xuICBpZiAoISgwLCBfdmFsaWRhdGUuZGVmYXVsdCkodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE1KSwgMTYpO1xufVxuXG52YXIgX2RlZmF1bHQgPSB2ZXJzaW9uO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG59LHtcIi4vdmFsaWRhdGUuanNcIjozNn1dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vIHZlbmRvclxud2luZG93LkZsaWNraXR5ID0gcmVxdWlyZSgnZmxpY2tpdHknKTtcbndpbmRvdy5VdWlkID0gcmVxdWlyZSgndXVpZCcpO1xucmVxdWlyZSgnbGF6eXNpemVzL3BsdWdpbnMvYmdzZXQvbHMuYmdzZXQnKTtcbnJlcXVpcmUoJ2xhenlzaXplcycpO1xucmVxdWlyZSgnbGF6eXNpemVzL3BsdWdpbnMvcGFyZW50LWZpdC9scy5wYXJlbnQtZml0Jyk7XG5cbi8vIGltcG9ydCBmdW5jdGlvbiB0byByZWdpc3RlciBTd2lwZXIgY3VzdG9tIGVsZW1lbnRzXG53aW5kb3cucmVnaXN0ZXIgPSByZXF1aXJlKCcuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3N3aXBlci1lbGVtZW50LWJ1bmRsZScpO1xuLy8gcmVnaXN0ZXIgU3dpcGVyIGN1c3RvbSBlbGVtZW50c1xud2luZG93LnJlZ2lzdGVyLmRlZmF1bHQ7XG5yZXF1aXJlKCdsYXp5c2l6ZXMnKTtcblxuLy8gbW9kdWxlc1xud2luZG93LlB1YlN1YiA9IHJlcXVpcmUoJy4vc2NyaXB0cy9wdWJzdWInKTtcblxud2luZG93LmRlYm91bmNlID0gZnVuY3Rpb24gKGZuLCB3YWl0KSB7XG5cdGxldCB0O1xuXHRyZXR1cm4gKC4uLmFyZ3MpID0+IHtcblx0XHRjbGVhclRpbWVvdXQodCk7XG5cdFx0dCA9IHNldFRpbWVvdXQoKCkgPT4gZm4uYXBwbHkodGhpcywgYXJncyksIHdhaXQpO1xuXHR9O1xufVxuXG53aW5kb3cudGhyb3R0bGUgPSBmdW5jdGlvbihjYiwgZGVsYXkpIHtcblx0bGV0IHdhaXQgPSBmYWxzZTtcblx0bGV0IHN0b3JlZEFyZ3MgPSBudWxsO1xuXG5cdGZ1bmN0aW9uIGNoZWNrU3RvcmVkQXJncyAoKSB7XG5cdFx0aWYgKHN0b3JlZEFyZ3MgPT0gbnVsbCkge1xuXHRcdFx0d2FpdCA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYiguLi5zdG9yZWRBcmdzKTtcblx0XHRcdHN0b3JlZEFyZ3MgPSBudWxsO1xuXHRcdFx0c2V0VGltZW91dChjaGVja1N0b3JlZEFyZ3MsIGRlbGF5KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gKC4uLmFyZ3MpID0+IHtcblx0XHRpZiAod2FpdCkge1xuXHRcdFx0c3RvcmVkQXJncyA9IGFyZ3M7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y2IoLi4uYXJncyk7XG5cdFx0d2FpdCA9IHRydWU7XG5cdFx0c2V0VGltZW91dChjaGVja1N0b3JlZEFyZ3MsIGRlbGF5KTtcblx0fVxufVxufSx7XCIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3N3aXBlci1lbGVtZW50LWJ1bmRsZVwiOjIwLFwiLi9zY3JpcHRzL3B1YnN1YlwiOjM5LFwiZmxpY2tpdHlcIjo5LFwibGF6eXNpemVzXCI6MTcsXCJsYXp5c2l6ZXMvcGx1Z2lucy9iZ3NldC9scy5iZ3NldFwiOjE4LFwibGF6eXNpemVzL3BsdWdpbnMvcGFyZW50LWZpdC9scy5wYXJlbnQtZml0XCI6MTksXCJ1dWlkXCI6MjJ9XSwzOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0RVZFTlRTOiB7XG5cdFx0Y2FydFVwZGF0ZWQ6ICdjYXJ0LXVwZGF0ZWQnXG5cdH0sXG5cdHN1YnNjcmliZXJzOiB7fSxcblx0c3Vic2NyaWJlOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuXHRcdGlmICh0aGlzLnN1YnNjcmliZXJzW2V2ZW50TmFtZV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW107XG5cdFx0fVxuXG5cdFx0dGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdID0gWy4uLnRoaXMuc3Vic2NyaWJlcnNbZXZlbnROYW1lXSwgY2FsbGJhY2tdO1xuXG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMuc3Vic2NyaWJlcnNbZXZlbnROYW1lXSA9IHRoaXMuc3Vic2NyaWJlcnNbZXZlbnROYW1lXS5maWx0ZXIoKGNiKSA9PiB7XG5cdFx0XHRcdHJldHVybiBjYiAhPT0gY2FsbGJhY2s7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9LFxuXHRwdWJsaXNoOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhKSB7XG5cdFx0aWYgKHRoaXMuc3Vic2NyaWJlcnNbZXZlbnROYW1lXSkge1xuXHRcdFx0dGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG5cdFx0XHRcdGNhbGxiYWNrKGRhdGEpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59XG5cbn0se31dfSx7fSxbMzhdKVxuXG4iLCIvLyBkcmFnXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgIHdpbmRvdyxcbiAgICAgICAgcmVxdWlyZSgnLi9jb3JlJyksXG4gICAgICAgIHJlcXVpcmUoJ3VuaWRyYWdnZXInKSxcbiAgICAgICAgcmVxdWlyZSgnZml6enktdWktdXRpbHMnKSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LkZsaWNraXR5ID0gZmFjdG9yeShcbiAgICAgICAgd2luZG93LFxuICAgICAgICB3aW5kb3cuRmxpY2tpdHksXG4gICAgICAgIHdpbmRvdy5VbmlkcmFnZ2VyLFxuICAgICAgICB3aW5kb3cuZml6enlVSVV0aWxzLFxuICAgICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsXG4gICAgZnVuY3Rpb24gZmFjdG9yeSggd2luZG93LCBGbGlja2l0eSwgVW5pZHJhZ2dlciwgdXRpbHMgKSB7XG5cbi8vIC0tLS0tIGRlZmF1bHRzIC0tLS0tIC8vXG5cbk9iamVjdC5hc3NpZ24oIEZsaWNraXR5LmRlZmF1bHRzLCB7XG4gIGRyYWdnYWJsZTogJz4xJyxcbiAgZHJhZ1RocmVzaG9sZDogMyxcbn0gKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZHJhZyBwcm90b3R5cGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxubGV0IHByb3RvID0gRmxpY2tpdHkucHJvdG90eXBlO1xuT2JqZWN0LmFzc2lnbiggcHJvdG8sIFVuaWRyYWdnZXIucHJvdG90eXBlICk7IC8vIGluaGVyaXQgVW5pZHJhZ2dlclxucHJvdG8udG91Y2hBY3Rpb25WYWx1ZSA9ICcnO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuRmxpY2tpdHkuY3JlYXRlLmRyYWcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5vbiggJ2FjdGl2YXRlJywgdGhpcy5vbkFjdGl2YXRlRHJhZyApO1xuICB0aGlzLm9uKCAndWlDaGFuZ2UnLCB0aGlzLl91aUNoYW5nZURyYWcgKTtcbiAgdGhpcy5vbiggJ2RlYWN0aXZhdGUnLCB0aGlzLm9uRGVhY3RpdmF0ZURyYWcgKTtcbiAgdGhpcy5vbiggJ2NlbGxDaGFuZ2UnLCB0aGlzLnVwZGF0ZURyYWdnYWJsZSApO1xuICB0aGlzLm9uKCAncG9pbnRlckRvd24nLCB0aGlzLmhhbmRsZVBvaW50ZXJEb3duICk7XG4gIHRoaXMub24oICdwb2ludGVyVXAnLCB0aGlzLmhhbmRsZVBvaW50ZXJVcCApO1xuICB0aGlzLm9uKCAncG9pbnRlckRvd24nLCB0aGlzLmhhbmRsZVBvaW50ZXJEb25lICk7XG4gIHRoaXMub24oICdkcmFnU3RhcnQnLCB0aGlzLmhhbmRsZURyYWdTdGFydCApO1xuICB0aGlzLm9uKCAnZHJhZ01vdmUnLCB0aGlzLmhhbmRsZURyYWdNb3ZlICk7XG4gIHRoaXMub24oICdkcmFnRW5kJywgdGhpcy5oYW5kbGVEcmFnRW5kICk7XG4gIHRoaXMub24oICdzdGF0aWNDbGljaycsIHRoaXMuaGFuZGxlU3RhdGljQ2xpY2sgKTtcbiAgLy8gVE9ETyB1cGRhdGVEcmFnZ2FibGUgb24gcmVzaXplPyBpZiBncm91cENlbGxzICYgc2xpZGVzIGNoYW5nZVxufTtcblxucHJvdG8ub25BY3RpdmF0ZURyYWcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5oYW5kbGVzID0gWyB0aGlzLnZpZXdwb3J0IF07XG4gIHRoaXMuYmluZEhhbmRsZXMoKTtcbiAgdGhpcy51cGRhdGVEcmFnZ2FibGUoKTtcbn07XG5cbnByb3RvLm9uRGVhY3RpdmF0ZURyYWcgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy51bmJpbmRIYW5kbGVzKCk7XG4gIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnZ2FibGUnKTtcbn07XG5cbnByb3RvLnVwZGF0ZURyYWdnYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAvLyBkaXNhYmxlIGRyYWdnaW5nIGlmIGxlc3MgdGhhbiAyIHNsaWRlcy4gIzI3OFxuICBpZiAoIHRoaXMub3B0aW9ucy5kcmFnZ2FibGUgPT09ICc+MScgKSB7XG4gICAgdGhpcy5pc0RyYWdnYWJsZSA9IHRoaXMuc2xpZGVzLmxlbmd0aCA+IDE7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5pc0RyYWdnYWJsZSA9IHRoaXMub3B0aW9ucy5kcmFnZ2FibGU7XG4gIH1cbiAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoICdpcy1kcmFnZ2FibGUnLCB0aGlzLmlzRHJhZ2dhYmxlICk7XG59O1xuXG5wcm90by5fdWlDaGFuZ2VEcmFnID0gZnVuY3Rpb24oKSB7XG4gIGRlbGV0ZSB0aGlzLmlzRnJlZVNjcm9sbGluZztcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHBvaW50ZXIgZXZlbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbnByb3RvLmhhbmRsZVBvaW50ZXJEb3duID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICBpZiAoICF0aGlzLmlzRHJhZ2dhYmxlICkge1xuICAgIC8vIHByb2NlZWQgZm9yIHN0YXRpY0NsaWNrXG4gICAgdGhpcy5iaW5kQWN0aXZlUG9pbnRlckV2ZW50cyggZXZlbnQgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgaXNUb3VjaFN0YXJ0ID0gZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnO1xuICBsZXQgaXNUb3VjaFBvaW50ZXIgPSBldmVudC5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJztcbiAgbGV0IGlzRm9jdXNOb2RlID0gZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0Jyk7XG4gIGlmICggIWlzVG91Y2hTdGFydCAmJiAhaXNUb3VjaFBvaW50ZXIgJiYgIWlzRm9jdXNOb2RlICkgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKCAhaXNGb2N1c05vZGUgKSB0aGlzLmZvY3VzKCk7XG4gIC8vIGJsdXJcbiAgaWYgKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSB0aGlzLmVsZW1lbnQgKSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgLy8gc3RvcCBpZiBpdCB3YXMgbW92aW5nXG4gIHRoaXMuZHJhZ1ggPSB0aGlzLng7XG4gIHRoaXMudmlld3BvcnQuY2xhc3NMaXN0LmFkZCgnaXMtcG9pbnRlci1kb3duJyk7XG4gIC8vIHRyYWNrIHNjcm9sbGluZ1xuICB0aGlzLnBvaW50ZXJEb3duU2Nyb2xsID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdzY3JvbGwnLCB0aGlzICk7XG4gIHRoaXMuYmluZEFjdGl2ZVBvaW50ZXJFdmVudHMoIGV2ZW50ICk7XG59O1xuXG4vLyAtLS0tLSBtb3ZlIC0tLS0tIC8vXG5cbnByb3RvLmhhc0RyYWdTdGFydGVkID0gZnVuY3Rpb24oIG1vdmVWZWN0b3IgKSB7XG4gIHJldHVybiBNYXRoLmFicyggbW92ZVZlY3Rvci54ICkgPiB0aGlzLm9wdGlvbnMuZHJhZ1RocmVzaG9sZDtcbn07XG5cbi8vIC0tLS0tIHVwIC0tLS0tIC8vXG5cbnByb3RvLmhhbmRsZVBvaW50ZXJVcCA9IGZ1bmN0aW9uKCkge1xuICBkZWxldGUgdGhpcy5pc1RvdWNoU2Nyb2xsaW5nO1xuICB0aGlzLnZpZXdwb3J0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXBvaW50ZXItZG93bicpO1xufTtcblxucHJvdG8uaGFuZGxlUG9pbnRlckRvbmUgPSBmdW5jdGlvbigpIHtcbiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdzY3JvbGwnLCB0aGlzICk7XG4gIGRlbGV0ZSB0aGlzLnBvaW50ZXJEb3duU2Nyb2xsO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZHJhZ2dpbmcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxucHJvdG8uaGFuZGxlRHJhZ1N0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMuaXNEcmFnZ2FibGUgKSByZXR1cm47XG5cbiAgdGhpcy5kcmFnU3RhcnRQb3NpdGlvbiA9IHRoaXMueDtcbiAgdGhpcy5zdGFydEFuaW1hdGlvbigpO1xuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIHRoaXMgKTtcbn07XG5cbnByb3RvLmhhbmRsZURyYWdNb3ZlID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yICkge1xuICBpZiAoICF0aGlzLmlzRHJhZ2dhYmxlICkgcmV0dXJuO1xuXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgdGhpcy5wcmV2aW91c0RyYWdYID0gdGhpcy5kcmFnWDtcbiAgLy8gcmV2ZXJzZSBpZiByaWdodC10by1sZWZ0XG4gIGxldCBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQgPyAtMSA6IDE7XG4gIC8vIHdyYXAgYXJvdW5kIG1vdmUuICM1ODlcbiAgaWYgKCB0aGlzLmlzV3JhcHBpbmcgKSBtb3ZlVmVjdG9yLnggJT0gdGhpcy5zbGlkZWFibGVXaWR0aDtcbiAgbGV0IGRyYWdYID0gdGhpcy5kcmFnU3RhcnRQb3NpdGlvbiArIG1vdmVWZWN0b3IueCAqIGRpcmVjdGlvbjtcblxuICBpZiAoICF0aGlzLmlzV3JhcHBpbmcgKSB7XG4gICAgLy8gc2xvdyBkcmFnXG4gICAgbGV0IG9yaWdpbkJvdW5kID0gTWF0aC5tYXgoIC10aGlzLnNsaWRlc1swXS50YXJnZXQsIHRoaXMuZHJhZ1N0YXJ0UG9zaXRpb24gKTtcbiAgICBkcmFnWCA9IGRyYWdYID4gb3JpZ2luQm91bmQgPyAoIGRyYWdYICsgb3JpZ2luQm91bmQgKSAqIDAuNSA6IGRyYWdYO1xuICAgIGxldCBlbmRCb3VuZCA9IE1hdGgubWluKCAtdGhpcy5nZXRMYXN0U2xpZGUoKS50YXJnZXQsIHRoaXMuZHJhZ1N0YXJ0UG9zaXRpb24gKTtcbiAgICBkcmFnWCA9IGRyYWdYIDwgZW5kQm91bmQgPyAoIGRyYWdYICsgZW5kQm91bmQgKSAqIDAuNSA6IGRyYWdYO1xuICB9XG5cbiAgdGhpcy5kcmFnWCA9IGRyYWdYO1xuICB0aGlzLmRyYWdNb3ZlVGltZSA9IG5ldyBEYXRlKCk7XG59O1xuXG5wcm90by5oYW5kbGVEcmFnRW5kID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMuaXNEcmFnZ2FibGUgKSByZXR1cm47XG5cbiAgbGV0IHsgZnJlZVNjcm9sbCB9ID0gdGhpcy5vcHRpb25zO1xuICBpZiAoIGZyZWVTY3JvbGwgKSB0aGlzLmlzRnJlZVNjcm9sbGluZyA9IHRydWU7XG4gIC8vIHNldCBzZWxlY3RlZEluZGV4IGJhc2VkIG9uIHdoZXJlIGZsaWNrIHdpbGwgZW5kIHVwXG4gIGxldCBpbmRleCA9IHRoaXMuZHJhZ0VuZFJlc3RpbmdTZWxlY3QoKTtcblxuICBpZiAoIGZyZWVTY3JvbGwgJiYgIXRoaXMuaXNXcmFwcGluZyApIHtcbiAgICAvLyBpZiBmcmVlLXNjcm9sbCAmIG5vdCB3cmFwIGFyb3VuZFxuICAgIC8vIGRvIG5vdCBmcmVlLXNjcm9sbCBpZiBnb2luZyBvdXRzaWRlIG9mIGJvdW5kaW5nIHNsaWRlc1xuICAgIC8vIHNvIGJvdW5kaW5nIHNsaWRlcyBjYW4gYXR0cmFjdCBzbGlkZXIsIGFuZCBrZWVwIGl0IGluIGJvdW5kc1xuICAgIGxldCByZXN0aW5nWCA9IHRoaXMuZ2V0UmVzdGluZ1Bvc2l0aW9uKCk7XG4gICAgdGhpcy5pc0ZyZWVTY3JvbGxpbmcgPSAtcmVzdGluZ1ggPiB0aGlzLnNsaWRlc1swXS50YXJnZXQgJiZcbiAgICAgIC1yZXN0aW5nWCA8IHRoaXMuZ2V0TGFzdFNsaWRlKCkudGFyZ2V0O1xuICB9IGVsc2UgaWYgKCAhZnJlZVNjcm9sbCAmJiBpbmRleCA9PT0gdGhpcy5zZWxlY3RlZEluZGV4ICkge1xuICAgIC8vIGJvb3N0IHNlbGVjdGlvbiBpZiBzZWxlY3RlZCBpbmRleCBoYXMgbm90IGNoYW5nZWRcbiAgICBpbmRleCArPSB0aGlzLmRyYWdFbmRCb29zdFNlbGVjdCgpO1xuICB9XG4gIGRlbGV0ZSB0aGlzLnByZXZpb3VzRHJhZ1g7XG4gIC8vIGFwcGx5IHNlbGVjdGlvblxuICAvLyBIQUNLLCBzZXQgZmxhZyBzbyBkcmFnZ2luZyBzdGF5cyBpbiBjb3JyZWN0IGRpcmVjdGlvblxuICB0aGlzLmlzRHJhZ1NlbGVjdCA9IHRoaXMuaXNXcmFwcGluZztcbiAgdGhpcy5zZWxlY3QoIGluZGV4ICk7XG4gIGRlbGV0ZSB0aGlzLmlzRHJhZ1NlbGVjdDtcbn07XG5cbnByb3RvLmRyYWdFbmRSZXN0aW5nU2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gIGxldCByZXN0aW5nWCA9IHRoaXMuZ2V0UmVzdGluZ1Bvc2l0aW9uKCk7XG4gIC8vIGhvdyBmYXIgYXdheSBmcm9tIHNlbGVjdGVkIHNsaWRlXG4gIGxldCBkaXN0YW5jZSA9IE1hdGguYWJzKCB0aGlzLmdldFNsaWRlRGlzdGFuY2UoIC1yZXN0aW5nWCwgdGhpcy5zZWxlY3RlZEluZGV4ICkgKTtcbiAgLy8gZ2V0IGNsb3NldCByZXN0aW5nIGdvaW5nIHVwIGFuZCBnb2luZyBkb3duXG4gIGxldCBwb3NpdGl2ZVJlc3RpbmcgPSB0aGlzLl9nZXRDbG9zZXN0UmVzdGluZyggcmVzdGluZ1gsIGRpc3RhbmNlLCAxICk7XG4gIGxldCBuZWdhdGl2ZVJlc3RpbmcgPSB0aGlzLl9nZXRDbG9zZXN0UmVzdGluZyggcmVzdGluZ1gsIGRpc3RhbmNlLCAtMSApO1xuICAvLyB1c2UgY2xvc2VyIHJlc3RpbmcgZm9yIHdyYXAtYXJvdW5kXG4gIHJldHVybiBwb3NpdGl2ZVJlc3RpbmcuZGlzdGFuY2UgPCBuZWdhdGl2ZVJlc3RpbmcuZGlzdGFuY2UgP1xuICAgIHBvc2l0aXZlUmVzdGluZy5pbmRleCA6IG5lZ2F0aXZlUmVzdGluZy5pbmRleDtcbn07XG5cbi8qKlxuICogZ2l2ZW4gcmVzdGluZyBYIGFuZCBkaXN0YW5jZSB0byBzZWxlY3RlZCBjZWxsXG4gKiBnZXQgdGhlIGRpc3RhbmNlIGFuZCBpbmRleCBvZiB0aGUgY2xvc2VzdCBjZWxsXG4gKiBAcGFyYW0ge051bWJlcn0gcmVzdGluZ1ggLSBlc3RpbWF0ZWQgcG9zdC1mbGljayByZXN0aW5nIHBvc2l0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gZGlzdGFuY2UgLSBkaXN0YW5jZSB0byBzZWxlY3RlZCBjZWxsXG4gKiBAcGFyYW0ge0ludGVnZXJ9IGluY3JlbWVudCAtICsxIG9yIC0xLCBnb2luZyB1cCBvciBkb3duXG4gKiBAcmV0dXJucyB7T2JqZWN0fSAtIHsgZGlzdGFuY2U6IHtOdW1iZXJ9LCBpbmRleDoge0ludGVnZXJ9IH1cbiAqL1xucHJvdG8uX2dldENsb3Nlc3RSZXN0aW5nID0gZnVuY3Rpb24oIHJlc3RpbmdYLCBkaXN0YW5jZSwgaW5jcmVtZW50ICkge1xuICBsZXQgaW5kZXggPSB0aGlzLnNlbGVjdGVkSW5kZXg7XG4gIGxldCBtaW5EaXN0YW5jZSA9IEluZmluaXR5O1xuICBsZXQgY29uZGl0aW9uID0gdGhpcy5vcHRpb25zLmNvbnRhaW4gJiYgIXRoaXMuaXNXcmFwcGluZyA/XG4gICAgLy8gaWYgY29udGFpbmluZywga2VlcCBnb2luZyBpZiBkaXN0YW5jZSBpcyBlcXVhbCB0byBtaW5EaXN0YW5jZVxuICAgICggZGlzdCwgbWluRGlzdCApID0+IGRpc3QgPD0gbWluRGlzdCA6XG4gICAgKCBkaXN0LCBtaW5EaXN0ICkgPT4gZGlzdCA8IG1pbkRpc3Q7XG5cbiAgd2hpbGUgKCBjb25kaXRpb24oIGRpc3RhbmNlLCBtaW5EaXN0YW5jZSApICkge1xuICAgIC8vIG1lYXN1cmUgZGlzdGFuY2UgdG8gbmV4dCBjZWxsXG4gICAgaW5kZXggKz0gaW5jcmVtZW50O1xuICAgIG1pbkRpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgZGlzdGFuY2UgPSB0aGlzLmdldFNsaWRlRGlzdGFuY2UoIC1yZXN0aW5nWCwgaW5kZXggKTtcbiAgICBpZiAoIGRpc3RhbmNlID09PSBudWxsICkgYnJlYWs7XG5cbiAgICBkaXN0YW5jZSA9IE1hdGguYWJzKCBkaXN0YW5jZSApO1xuICB9XG4gIHJldHVybiB7XG4gICAgZGlzdGFuY2U6IG1pbkRpc3RhbmNlLFxuICAgIC8vIHNlbGVjdGVkIHdhcyBwcmV2aW91cyBpbmRleFxuICAgIGluZGV4OiBpbmRleCAtIGluY3JlbWVudCxcbiAgfTtcbn07XG5cbi8qKlxuICogbWVhc3VyZSBkaXN0YW5jZSBiZXR3ZWVuIHggYW5kIGEgc2xpZGUgdGFyZ2V0XG4gKiBAcGFyYW0ge051bWJlcn0geCAtIGhvcml6b250YWwgcG9zaXRpb25cbiAqIEBwYXJhbSB7SW50ZWdlcn0gaW5kZXggLSBzbGlkZSBpbmRleFxuICogQHJldHVybnMge051bWJlcn0gLSBzbGlkZSBkaXN0YW5jZVxuICovXG5wcm90by5nZXRTbGlkZURpc3RhbmNlID0gZnVuY3Rpb24oIHgsIGluZGV4ICkge1xuICBsZXQgbGVuID0gdGhpcy5zbGlkZXMubGVuZ3RoO1xuICAvLyB3cmFwIGFyb3VuZCBpZiBhdCBsZWFzdCAyIHNsaWRlc1xuICBsZXQgaXNXcmFwQXJvdW5kID0gdGhpcy5vcHRpb25zLndyYXBBcm91bmQgJiYgbGVuID4gMTtcbiAgbGV0IHNsaWRlSW5kZXggPSBpc1dyYXBBcm91bmQgPyB1dGlscy5tb2R1bG8oIGluZGV4LCBsZW4gKSA6IGluZGV4O1xuICBsZXQgc2xpZGUgPSB0aGlzLnNsaWRlc1sgc2xpZGVJbmRleCBdO1xuICBpZiAoICFzbGlkZSApIHJldHVybiBudWxsO1xuXG4gIC8vIGFkZCBkaXN0YW5jZSBmb3Igd3JhcC1hcm91bmQgc2xpZGVzXG4gIGxldCB3cmFwID0gaXNXcmFwQXJvdW5kID8gdGhpcy5zbGlkZWFibGVXaWR0aCAqIE1hdGguZmxvb3IoIGluZGV4L2xlbiApIDogMDtcbiAgcmV0dXJuIHggLSAoIHNsaWRlLnRhcmdldCArIHdyYXAgKTtcbn07XG5cbnByb3RvLmRyYWdFbmRCb29zdFNlbGVjdCA9IGZ1bmN0aW9uKCkge1xuICAvLyBkbyBub3QgYm9vc3QgaWYgbm8gcHJldmlvdXNEcmFnWCBvciBkcmFnTW92ZVRpbWVcbiAgaWYgKCB0aGlzLnByZXZpb3VzRHJhZ1ggPT09IHVuZGVmaW5lZCB8fCAhdGhpcy5kcmFnTW92ZVRpbWUgfHxcbiAgICAvLyBvciBpZiBkcmFnIHdhcyBoZWxkIGZvciAxMDAgbXNcbiAgICBuZXcgRGF0ZSgpIC0gdGhpcy5kcmFnTW92ZVRpbWUgPiAxMDAgKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBsZXQgZGlzdGFuY2UgPSB0aGlzLmdldFNsaWRlRGlzdGFuY2UoIC10aGlzLmRyYWdYLCB0aGlzLnNlbGVjdGVkSW5kZXggKTtcbiAgbGV0IGRlbHRhID0gdGhpcy5wcmV2aW91c0RyYWdYIC0gdGhpcy5kcmFnWDtcbiAgaWYgKCBkaXN0YW5jZSA+IDAgJiYgZGVsdGEgPiAwICkge1xuICAgIC8vIGJvb3N0IHRvIG5leHQgaWYgbW92aW5nIHRvd2FyZHMgdGhlIHJpZ2h0LCBhbmQgcG9zaXRpdmUgdmVsb2NpdHlcbiAgICByZXR1cm4gMTtcbiAgfSBlbHNlIGlmICggZGlzdGFuY2UgPCAwICYmIGRlbHRhIDwgMCApIHtcbiAgICAvLyBib29zdCB0byBwcmV2aW91cyBpZiBtb3ZpbmcgdG93YXJkcyB0aGUgbGVmdCwgYW5kIG5lZ2F0aXZlIHZlbG9jaXR5XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuLy8gLS0tLS0gc2Nyb2xsIC0tLS0tIC8vXG5cbnByb3RvLm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gIGxldCBzY3JvbGwgPSBnZXRTY3JvbGxQb3NpdGlvbigpO1xuICBsZXQgc2Nyb2xsTW92ZVggPSB0aGlzLnBvaW50ZXJEb3duU2Nyb2xsLnggLSBzY3JvbGwueDtcbiAgbGV0IHNjcm9sbE1vdmVZID0gdGhpcy5wb2ludGVyRG93blNjcm9sbC55IC0gc2Nyb2xsLnk7XG4gIC8vIGNhbmNlbCBjbGljay90YXAgaWYgc2Nyb2xsIGlzIHRvbyBtdWNoXG4gIGlmICggTWF0aC5hYnMoIHNjcm9sbE1vdmVYICkgPiAzIHx8IE1hdGguYWJzKCBzY3JvbGxNb3ZlWSApID4gMyApIHtcbiAgICB0aGlzLnBvaW50ZXJEb25lKCk7XG4gIH1cbn07XG5cbi8vIC0tLS0tIHV0aWxzIC0tLS0tIC8vXG5cbmZ1bmN0aW9uIGdldFNjcm9sbFBvc2l0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCxcbiAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXQsXG4gIH07XG59XG5cbi8vIC0tLS0tICAtLS0tLSAvL1xuXG5yZXR1cm4gRmxpY2tpdHk7XG5cbn0gKSApO1xuIiwiLy8gaW1hZ2VzbG9hZGVkXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgIHJlcXVpcmUoJy4vY29yZScpLFxuICAgICAgICByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgZmFjdG9yeShcbiAgICAgICAgd2luZG93LkZsaWNraXR5LFxuICAgICAgICB3aW5kb3cuaW1hZ2VzTG9hZGVkLFxuICAgICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsXG4gICAgZnVuY3Rpb24gZmFjdG9yeSggRmxpY2tpdHksIGltYWdlc0xvYWRlZCApIHtcblxuRmxpY2tpdHkuY3JlYXRlLmltYWdlc0xvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLm9uKCAnYWN0aXZhdGUnLCB0aGlzLmltYWdlc0xvYWRlZCApO1xufTtcblxuRmxpY2tpdHkucHJvdG90eXBlLmltYWdlc0xvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aGlzLm9wdGlvbnMuaW1hZ2VzTG9hZGVkICkgcmV0dXJuO1xuXG4gIGxldCBvbkltYWdlc0xvYWRlZFByb2dyZXNzID0gKCBpbnN0YW5jZSwgaW1hZ2UgKSA9PiB7XG4gICAgbGV0IGNlbGwgPSB0aGlzLmdldFBhcmVudENlbGwoIGltYWdlLmltZyApO1xuICAgIHRoaXMuY2VsbFNpemVDaGFuZ2UoIGNlbGwgJiYgY2VsbC5lbGVtZW50ICk7XG4gICAgaWYgKCAhdGhpcy5vcHRpb25zLmZyZWVTY3JvbGwgKSB0aGlzLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCgpO1xuICB9O1xuICBpbWFnZXNMb2FkZWQoIHRoaXMuc2xpZGVyICkub24oICdwcm9ncmVzcycsIG9uSW1hZ2VzTG9hZGVkUHJvZ3Jlc3MgKTtcbn07XG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG4iLCIvKiFcbiAqIEZsaWNraXR5IHYzLjAuMFxuICogVG91Y2gsIHJlc3BvbnNpdmUsIGZsaWNrYWJsZSBjYXJvdXNlbHNcbiAqXG4gKiBMaWNlbnNlZCBHUEx2MyBmb3Igb3BlbiBzb3VyY2UgdXNlXG4gKiBvciBGbGlja2l0eSBDb21tZXJjaWFsIExpY2Vuc2UgZm9yIGNvbW1lcmNpYWwgdXNlXG4gKlxuICogaHR0cHM6Ly9mbGlja2l0eS5tZXRhZml6enkuY29cbiAqIENvcHlyaWdodCAyMDE1LTIwMjIgTWV0YWZpenp5XG4gKi9cblxuaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICBjb25zdCBGbGlja2l0eSA9IHJlcXVpcmUoJy4vY29yZScpO1xuICByZXF1aXJlKCcuL2RyYWcnKTtcbiAgcmVxdWlyZSgnLi9wcmV2LW5leHQtYnV0dG9uJyk7XG4gIHJlcXVpcmUoJy4vcGFnZS1kb3RzJyk7XG4gIHJlcXVpcmUoJy4vcGxheWVyJyk7XG4gIHJlcXVpcmUoJy4vYWRkLXJlbW92ZS1jZWxsJyk7XG4gIHJlcXVpcmUoJy4vbGF6eWxvYWQnKTtcbiAgcmVxdWlyZSgnLi9pbWFnZXNsb2FkZWQnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IEZsaWNraXR5O1xufVxuIiwiLy8gbGF6eWxvYWRcbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgICAgcmVxdWlyZSgnLi9jb3JlJyksXG4gICAgICAgIHJlcXVpcmUoJ2Zpenp5LXVpLXV0aWxzJyksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIGZhY3RvcnkoXG4gICAgICAgIHdpbmRvdy5GbGlja2l0eSxcbiAgICAgICAgd2luZG93LmZpenp5VUlVdGlscyxcbiAgICApO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiBmYWN0b3J5KCBGbGlja2l0eSwgdXRpbHMgKSB7XG5cbmNvbnN0IGxhenlBdHRyID0gJ2RhdGEtZmxpY2tpdHktbGF6eWxvYWQnO1xuY29uc3QgbGF6eVNyY0F0dHIgPSBgJHtsYXp5QXR0cn0tc3JjYDtcbmNvbnN0IGxhenlTcmNzZXRBdHRyID0gYCR7bGF6eUF0dHJ9LXNyY3NldGA7XG5jb25zdCBpbWdTZWxlY3RvciA9IGBpbWdbJHtsYXp5QXR0cn1dLCBpbWdbJHtsYXp5U3JjQXR0cn1dLCBgICtcbiAgYGltZ1ske2xhenlTcmNzZXRBdHRyfV0sIHNvdXJjZVske2xhenlTcmNzZXRBdHRyfV1gO1xuXG5GbGlja2l0eS5jcmVhdGUubGF6eUxvYWQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5vbiggJ3NlbGVjdCcsIHRoaXMubGF6eUxvYWQgKTtcblxuICB0aGlzLmhhbmRsZUxhenlMb2FkQ29tcGxldGUgPSB0aGlzLm9uTGF6eUxvYWRDb21wbGV0ZS5iaW5kKCB0aGlzICk7XG59O1xuXG5sZXQgcHJvdG8gPSBGbGlja2l0eS5wcm90b3R5cGU7XG5cbnByb3RvLmxhenlMb2FkID0gZnVuY3Rpb24oKSB7XG4gIGxldCB7IGxhenlMb2FkIH0gPSB0aGlzLm9wdGlvbnM7XG4gIGlmICggIWxhenlMb2FkICkgcmV0dXJuO1xuXG4gIC8vIGdldCBhZGphY2VudCBjZWxscywgdXNlIGxhenlMb2FkIG9wdGlvbiBmb3IgYWRqYWNlbnQgY291bnRcbiAgbGV0IGFkakNvdW50ID0gdHlwZW9mIGxhenlMb2FkID09ICdudW1iZXInID8gbGF6eUxvYWQgOiAwO1xuICAvLyBsYXp5IGxvYWQgaW1hZ2VzXG4gIHRoaXMuZ2V0QWRqYWNlbnRDZWxsRWxlbWVudHMoIGFkakNvdW50IClcbiAgICAubWFwKCBnZXRDZWxsTGF6eUltYWdlcyApXG4gICAgLmZsYXQoKVxuICAgIC5mb3JFYWNoKCAoIGltZyApID0+IG5ldyBMYXp5TG9hZGVyKCBpbWcsIHRoaXMuaGFuZGxlTGF6eUxvYWRDb21wbGV0ZSApICk7XG59O1xuXG5mdW5jdGlvbiBnZXRDZWxsTGF6eUltYWdlcyggY2VsbEVsZW0gKSB7XG4gIC8vIGNoZWNrIGlmIGNlbGwgZWxlbWVudCBpcyBsYXp5IGltYWdlXG4gIGlmICggY2VsbEVsZW0ubWF0Y2hlcygnaW1nJykgKSB7XG4gICAgbGV0IGNlbGxBdHRyID0gY2VsbEVsZW0uZ2V0QXR0cmlidXRlKCBsYXp5QXR0ciApO1xuICAgIGxldCBjZWxsU3JjQXR0ciA9IGNlbGxFbGVtLmdldEF0dHJpYnV0ZSggbGF6eVNyY0F0dHIgKTtcbiAgICBsZXQgY2VsbFNyY3NldEF0dHIgPSBjZWxsRWxlbS5nZXRBdHRyaWJ1dGUoIGxhenlTcmNzZXRBdHRyICk7XG4gICAgaWYgKCBjZWxsQXR0ciB8fCBjZWxsU3JjQXR0ciB8fCBjZWxsU3Jjc2V0QXR0ciApIHtcbiAgICAgIHJldHVybiBjZWxsRWxlbTtcbiAgICB9XG4gIH1cbiAgLy8gc2VsZWN0IGxhenkgaW1hZ2VzIGluIGNlbGxcbiAgcmV0dXJuIFsgLi4uY2VsbEVsZW0ucXVlcnlTZWxlY3RvckFsbCggaW1nU2VsZWN0b3IgKSBdO1xufVxuXG5wcm90by5vbkxhenlMb2FkQ29tcGxldGUgPSBmdW5jdGlvbiggaW1nLCBldmVudCApIHtcbiAgbGV0IGNlbGwgPSB0aGlzLmdldFBhcmVudENlbGwoIGltZyApO1xuICBsZXQgY2VsbEVsZW0gPSBjZWxsICYmIGNlbGwuZWxlbWVudDtcbiAgdGhpcy5jZWxsU2l6ZUNoYW5nZSggY2VsbEVsZW0gKTtcblxuICB0aGlzLmRpc3BhdGNoRXZlbnQoICdsYXp5TG9hZCcsIGV2ZW50LCBjZWxsRWxlbSApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gTGF6eUxvYWRlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vKipcbiAqIGNsYXNzIHRvIGhhbmRsZSBsb2FkaW5nIGltYWdlc1xuICogQHBhcmFtIHtJbWFnZX0gaW1nIC0gSW1hZ2UgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZSAtIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIExhenlMb2FkZXIoIGltZywgb25Db21wbGV0ZSApIHtcbiAgdGhpcy5pbWcgPSBpbWc7XG4gIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGU7XG4gIHRoaXMubG9hZCgpO1xufVxuXG5MYXp5TG9hZGVyLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IHV0aWxzLmhhbmRsZUV2ZW50O1xuXG5MYXp5TG9hZGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG4gIC8vIGdldCBzcmMgJiBzcmNzZXRcbiAgbGV0IHNyYyA9IHRoaXMuaW1nLmdldEF0dHJpYnV0ZSggbGF6eUF0dHIgKSB8fFxuICAgIHRoaXMuaW1nLmdldEF0dHJpYnV0ZSggbGF6eVNyY0F0dHIgKTtcbiAgbGV0IHNyY3NldCA9IHRoaXMuaW1nLmdldEF0dHJpYnV0ZSggbGF6eVNyY3NldEF0dHIgKTtcbiAgLy8gc2V0IHNyYyAmIHNlcnNldFxuICB0aGlzLmltZy5zcmMgPSBzcmM7XG4gIGlmICggc3Jjc2V0ICkgdGhpcy5pbWcuc2V0QXR0cmlidXRlKCAnc3Jjc2V0Jywgc3Jjc2V0ICk7XG4gIC8vIHJlbW92ZSBhdHRyXG4gIHRoaXMuaW1nLnJlbW92ZUF0dHJpYnV0ZSggbGF6eUF0dHIgKTtcbiAgdGhpcy5pbWcucmVtb3ZlQXR0cmlidXRlKCBsYXp5U3JjQXR0ciApO1xuICB0aGlzLmltZy5yZW1vdmVBdHRyaWJ1dGUoIGxhenlTcmNzZXRBdHRyICk7XG59O1xuXG5MYXp5TG9hZGVyLnByb3RvdHlwZS5vbmxvYWQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMuY29tcGxldGUoIGV2ZW50LCAnZmxpY2tpdHktbGF6eWxvYWRlZCcgKTtcbn07XG5cbkxhenlMb2FkZXIucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMuY29tcGxldGUoIGV2ZW50LCAnZmxpY2tpdHktbGF6eWVycm9yJyApO1xufTtcblxuTGF6eUxvYWRlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiggZXZlbnQsIGNsYXNzTmFtZSApIHtcbiAgLy8gdW5iaW5kIGV2ZW50c1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xuICBsZXQgbWVkaWFFbGVtID0gdGhpcy5pbWcucGFyZW50Tm9kZS5tYXRjaGVzKCdwaWN0dXJlJykgPyB0aGlzLmltZy5wYXJlbnROb2RlIDogdGhpcy5pbWc7XG4gIG1lZGlhRWxlbS5jbGFzc0xpc3QuYWRkKCBjbGFzc05hbWUgKTtcblxuICB0aGlzLm9uQ29tcGxldGUoIHRoaXMuaW1nLCBldmVudCApO1xufTtcblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cbkZsaWNraXR5LkxhenlMb2FkZXIgPSBMYXp5TG9hZGVyO1xuXG5yZXR1cm4gRmxpY2tpdHk7XG5cbn0gKSApO1xuIiwiLy8gcGFnZSBkb3RzXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgIHJlcXVpcmUoJy4vY29yZScpLFxuICAgICAgICByZXF1aXJlKCdmaXp6eS11aS11dGlscycpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICBmYWN0b3J5KFxuICAgICAgICB3aW5kb3cuRmxpY2tpdHksXG4gICAgICAgIHdpbmRvdy5maXp6eVVJVXRpbHMsXG4gICAgKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gZmFjdG9yeSggRmxpY2tpdHksIHV0aWxzICkge1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQYWdlRG90cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBQYWdlRG90cygpIHtcbiAgLy8gY3JlYXRlIGhvbGRlciBlbGVtZW50XG4gIHRoaXMuaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRoaXMuaG9sZGVyLmNsYXNzTmFtZSA9ICdmbGlja2l0eS1wYWdlLWRvdHMnO1xuICAvLyBjcmVhdGUgZG90cywgYXJyYXkgb2YgZWxlbWVudHNcbiAgdGhpcy5kb3RzID0gW107XG59XG5cblBhZ2VEb3RzLnByb3RvdHlwZS5zZXREb3RzID0gZnVuY3Rpb24oIHNsaWRlc0xlbmd0aCApIHtcbiAgLy8gZ2V0IGRpZmZlcmVuY2UgYmV0d2VlbiBudW1iZXIgb2Ygc2xpZGVzIGFuZCBudW1iZXIgb2YgZG90c1xuICBsZXQgZGVsdGEgPSBzbGlkZXNMZW5ndGggLSB0aGlzLmRvdHMubGVuZ3RoO1xuICBpZiAoIGRlbHRhID4gMCApIHtcbiAgICB0aGlzLmFkZERvdHMoIGRlbHRhICk7XG4gIH0gZWxzZSBpZiAoIGRlbHRhIDwgMCApIHtcbiAgICB0aGlzLnJlbW92ZURvdHMoIC1kZWx0YSApO1xuICB9XG59O1xuXG5QYWdlRG90cy5wcm90b3R5cGUuYWRkRG90cyA9IGZ1bmN0aW9uKCBjb3VudCApIHtcbiAgbGV0IG5ld0RvdHMgPSBuZXcgQXJyYXkoIGNvdW50ICkuZmlsbCgpXG4gICAgLm1hcCggKCBpdGVtLCBpICkgPT4ge1xuICAgICAgbGV0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgZG90LnNldEF0dHJpYnV0ZSggJ3R5cGUnLCAnYnV0dG9uJyApO1xuICAgICAgbGV0IG51bSA9IGkgKyAxICsgdGhpcy5kb3RzLmxlbmd0aDtcbiAgICAgIGRvdC5jbGFzc05hbWUgPSAnZmxpY2tpdHktcGFnZS1kb3QnO1xuICAgICAgZG90LnRleHRDb250ZW50ID0gYFZpZXcgc2xpZGUgJHtudW19YDtcbiAgICAgIHJldHVybiBkb3Q7XG4gICAgfSApO1xuXG4gIHRoaXMuaG9sZGVyLmFwcGVuZCggLi4ubmV3RG90cyApO1xuICB0aGlzLmRvdHMgPSB0aGlzLmRvdHMuY29uY2F0KCBuZXdEb3RzICk7XG59O1xuXG5QYWdlRG90cy5wcm90b3R5cGUucmVtb3ZlRG90cyA9IGZ1bmN0aW9uKCBjb3VudCApIHtcbiAgLy8gcmVtb3ZlIGZyb20gdGhpcy5kb3RzIGNvbGxlY3Rpb25cbiAgbGV0IHJlbW92ZURvdHMgPSB0aGlzLmRvdHMuc3BsaWNlKCB0aGlzLmRvdHMubGVuZ3RoIC0gY291bnQsIGNvdW50ICk7XG4gIC8vIHJlbW92ZSBmcm9tIERPTVxuICByZW1vdmVEb3RzLmZvckVhY2goICggZG90ICkgPT4gZG90LnJlbW92ZSgpICk7XG59O1xuXG5QYWdlRG90cy5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbiggaW5kZXggKSB7XG4gIC8vIHJlbW92ZSBzZWxlY3RlZCBjbGFzcyBvbiBwcmV2aW91c1xuICBpZiAoIHRoaXMuc2VsZWN0ZWREb3QgKSB7XG4gICAgdGhpcy5zZWxlY3RlZERvdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1zZWxlY3RlZCcpO1xuICAgIHRoaXMuc2VsZWN0ZWREb3QucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnKTtcbiAgfVxuICAvLyBkb24ndCBwcm9jZWVkIGlmIG5vIGRvdHNcbiAgaWYgKCAhdGhpcy5kb3RzLmxlbmd0aCApIHJldHVybjtcblxuICB0aGlzLnNlbGVjdGVkRG90ID0gdGhpcy5kb3RzWyBpbmRleCBdO1xuICB0aGlzLnNlbGVjdGVkRG90LmNsYXNzTGlzdC5hZGQoJ2lzLXNlbGVjdGVkJyk7XG4gIHRoaXMuc2VsZWN0ZWREb3Quc2V0QXR0cmlidXRlKCAnYXJpYS1jdXJyZW50JywgJ3N0ZXAnICk7XG59O1xuXG5GbGlja2l0eS5QYWdlRG90cyA9IFBhZ2VEb3RzO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBGbGlja2l0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5PYmplY3QuYXNzaWduKCBGbGlja2l0eS5kZWZhdWx0cywge1xuICBwYWdlRG90czogdHJ1ZSxcbn0gKTtcblxuRmxpY2tpdHkuY3JlYXRlLnBhZ2VEb3RzID0gZnVuY3Rpb24oKSB7XG4gIGlmICggIXRoaXMub3B0aW9ucy5wYWdlRG90cyApIHJldHVybjtcblxuICB0aGlzLnBhZ2VEb3RzID0gbmV3IFBhZ2VEb3RzKCk7XG4gIHRoaXMuaGFuZGxlUGFnZURvdHNDbGljayA9IHRoaXMub25QYWdlRG90c0NsaWNrLmJpbmQoIHRoaXMgKTtcbiAgLy8gZXZlbnRzXG4gIHRoaXMub24oICdhY3RpdmF0ZScsIHRoaXMuYWN0aXZhdGVQYWdlRG90cyApO1xuICB0aGlzLm9uKCAnc2VsZWN0JywgdGhpcy51cGRhdGVTZWxlY3RlZFBhZ2VEb3RzICk7XG4gIHRoaXMub24oICdjZWxsQ2hhbmdlJywgdGhpcy51cGRhdGVQYWdlRG90cyApO1xuICB0aGlzLm9uKCAncmVzaXplJywgdGhpcy51cGRhdGVQYWdlRG90cyApO1xuICB0aGlzLm9uKCAnZGVhY3RpdmF0ZScsIHRoaXMuZGVhY3RpdmF0ZVBhZ2VEb3RzICk7XG59O1xuXG5sZXQgcHJvdG8gPSBGbGlja2l0eS5wcm90b3R5cGU7XG5cbnByb3RvLmFjdGl2YXRlUGFnZURvdHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wYWdlRG90cy5zZXREb3RzKCB0aGlzLnNsaWRlcy5sZW5ndGggKTtcbiAgdGhpcy5mb2N1c2FibGVFbGVtcy5wdXNoKCAuLi50aGlzLnBhZ2VEb3RzLmRvdHMgKTtcbiAgdGhpcy5wYWdlRG90cy5ob2xkZXIuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgdGhpcy5oYW5kbGVQYWdlRG90c0NsaWNrICk7XG4gIHRoaXMuZWxlbWVudC5hcHBlbmQoIHRoaXMucGFnZURvdHMuaG9sZGVyICk7XG59O1xuXG5wcm90by5vblBhZ2VEb3RzQ2xpY2sgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIGxldCBpbmRleCA9IHRoaXMucGFnZURvdHMuZG90cy5pbmRleE9mKCBldmVudC50YXJnZXQgKTtcbiAgaWYgKCBpbmRleCA9PT0gLTEgKSByZXR1cm47IC8vIG9ubHkgZG90IGNsaWNrc1xuXG4gIHRoaXMudWlDaGFuZ2UoKTtcbiAgdGhpcy5zZWxlY3QoIGluZGV4ICk7XG59O1xuXG5wcm90by51cGRhdGVTZWxlY3RlZFBhZ2VEb3RzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucGFnZURvdHMudXBkYXRlU2VsZWN0ZWQoIHRoaXMuc2VsZWN0ZWRJbmRleCApO1xufTtcblxucHJvdG8udXBkYXRlUGFnZURvdHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wYWdlRG90cy5kb3RzLmZvckVhY2goICggZG90ICkgPT4ge1xuICAgIHV0aWxzLnJlbW92ZUZyb20oIHRoaXMuZm9jdXNhYmxlRWxlbXMsIGRvdCApO1xuICB9ICk7XG4gIHRoaXMucGFnZURvdHMuc2V0RG90cyggdGhpcy5zbGlkZXMubGVuZ3RoICk7XG4gIHRoaXMuZm9jdXNhYmxlRWxlbXMucHVzaCggLi4udGhpcy5wYWdlRG90cy5kb3RzICk7XG59O1xuXG5wcm90by5kZWFjdGl2YXRlUGFnZURvdHMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wYWdlRG90cy5ob2xkZXIucmVtb3ZlKCk7XG4gIHRoaXMucGFnZURvdHMuaG9sZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdjbGljaycsIHRoaXMuaGFuZGxlUGFnZURvdHNDbGljayApO1xufTtcblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cbkZsaWNraXR5LlBhZ2VEb3RzID0gUGFnZURvdHM7XG5cbnJldHVybiBGbGlja2l0eTtcblxufSApICk7XG4iLCIvLyBwbGF5ZXIgJiBhdXRvUGxheVxuKCBmdW5jdGlvbiggd2luZG93LCBmYWN0b3J5ICkge1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCByZXF1aXJlKCcuL2NvcmUnKSApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgZmFjdG9yeSggd2luZG93LkZsaWNraXR5ICk7XG4gIH1cblxufSggdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uIGZhY3RvcnkoIEZsaWNraXR5ICkge1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQbGF5ZXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gUGxheWVyKCBhdXRvUGxheSwgb25UaWNrICkge1xuICB0aGlzLmF1dG9QbGF5ID0gYXV0b1BsYXk7XG4gIHRoaXMub25UaWNrID0gb25UaWNrO1xuICB0aGlzLnN0YXRlID0gJ3N0b3BwZWQnO1xuICAvLyB2aXNpYmlsaXR5IGNoYW5nZSBldmVudCBoYW5kbGVyXG4gIHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlID0gdGhpcy52aXNpYmlsaXR5Q2hhbmdlLmJpbmQoIHRoaXMgKTtcbiAgdGhpcy5vblZpc2liaWxpdHlQbGF5ID0gdGhpcy52aXNpYmlsaXR5UGxheS5iaW5kKCB0aGlzICk7XG59XG5cbi8vIHN0YXJ0IHBsYXlcblBsYXllci5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIHRoaXMuc3RhdGUgPT09ICdwbGF5aW5nJyApIHJldHVybjtcblxuICAvLyBkbyBub3QgcGxheSBpZiBwYWdlIGlzIGhpZGRlbiwgc3RhcnQgcGxheWluZyB3aGVuIHBhZ2UgaXMgdmlzaWJsZVxuICBsZXQgaXNQYWdlSGlkZGVuID0gZG9jdW1lbnQuaGlkZGVuO1xuICBpZiAoIGlzUGFnZUhpZGRlbiApIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMub25WaXNpYmlsaXR5UGxheSApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuc3RhdGUgPSAncGxheWluZyc7XG4gIC8vIGxpc3RlbiB0byB2aXNpYmlsaXR5IGNoYW5nZVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlICk7XG4gIC8vIHN0YXJ0IHRpY2tpbmdcbiAgdGhpcy50aWNrKCk7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnRpY2sgPSBmdW5jdGlvbigpIHtcbiAgLy8gZG8gbm90IHRpY2sgaWYgbm90IHBsYXlpbmdcbiAgaWYgKCB0aGlzLnN0YXRlICE9PSAncGxheWluZycgKSByZXR1cm47XG5cbiAgLy8gZGVmYXVsdCB0byAzIHNlY29uZHNcbiAgbGV0IHRpbWUgPSB0eXBlb2YgdGhpcy5hdXRvUGxheSA9PSAnbnVtYmVyJyA/IHRoaXMuYXV0b1BsYXkgOiAzMDAwO1xuICAvLyBIQUNLOiByZXNldCB0aWNrcyBpZiBzdG9wcGVkIGFuZCBzdGFydGVkIHdpdGhpbiBpbnRlcnZhbFxuICB0aGlzLmNsZWFyKCk7XG4gIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoICgpID0+IHtcbiAgICB0aGlzLm9uVGljaygpO1xuICAgIHRoaXMudGljaygpO1xuICB9LCB0aW1lICk7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zdGF0ZSA9ICdzdG9wcGVkJztcbiAgdGhpcy5jbGVhcigpO1xuICAvLyByZW1vdmUgdmlzaWJpbGl0eSBjaGFuZ2UgZXZlbnRcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3Zpc2liaWxpdHljaGFuZ2UnLCB0aGlzLm9uVmlzaWJpbGl0eUNoYW5nZSApO1xufTtcblxuUGxheWVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICBjbGVhclRpbWVvdXQoIHRoaXMudGltZW91dCApO1xufTtcblxuUGxheWVyLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIHRoaXMuc3RhdGUgPT09ICdwbGF5aW5nJyApIHtcbiAgICB0aGlzLnN0YXRlID0gJ3BhdXNlZCc7XG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnVucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgLy8gcmUtc3RhcnQgcGxheSBpZiBwYXVzZWRcbiAgaWYgKCB0aGlzLnN0YXRlID09PSAncGF1c2VkJyApIHRoaXMucGxheSgpO1xufTtcblxuLy8gcGF1c2UgaWYgcGFnZSB2aXNpYmlsaXR5IGlzIGhpZGRlbiwgdW5wYXVzZSBpZiB2aXNpYmxlXG5QbGF5ZXIucHJvdG90eXBlLnZpc2liaWxpdHlDaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgbGV0IGlzUGFnZUhpZGRlbiA9IGRvY3VtZW50LmhpZGRlbjtcbiAgdGhpc1sgaXNQYWdlSGlkZGVuID8gJ3BhdXNlJyA6ICd1bnBhdXNlJyBdKCk7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnZpc2liaWxpdHlQbGF5ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucGxheSgpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMub25WaXNpYmlsaXR5UGxheSApO1xufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRmxpY2tpdHkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuT2JqZWN0LmFzc2lnbiggRmxpY2tpdHkuZGVmYXVsdHMsIHtcbiAgcGF1c2VBdXRvUGxheU9uSG92ZXI6IHRydWUsXG59ICk7XG5cbkZsaWNraXR5LmNyZWF0ZS5wbGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKCB0aGlzLm9wdGlvbnMuYXV0b1BsYXksICgpID0+IHtcbiAgICB0aGlzLm5leHQoIHRydWUgKTtcbiAgfSApO1xuXG4gIHRoaXMub24oICdhY3RpdmF0ZScsIHRoaXMuYWN0aXZhdGVQbGF5ZXIgKTtcbiAgdGhpcy5vbiggJ3VpQ2hhbmdlJywgdGhpcy5zdG9wUGxheWVyICk7XG4gIHRoaXMub24oICdwb2ludGVyRG93bicsIHRoaXMuc3RvcFBsYXllciApO1xuICB0aGlzLm9uKCAnZGVhY3RpdmF0ZScsIHRoaXMuZGVhY3RpdmF0ZVBsYXllciApO1xufTtcblxubGV0IHByb3RvID0gRmxpY2tpdHkucHJvdG90eXBlO1xuXG5wcm90by5hY3RpdmF0ZVBsYXllciA9IGZ1bmN0aW9uKCkge1xuICBpZiAoICF0aGlzLm9wdGlvbnMuYXV0b1BsYXkgKSByZXR1cm47XG5cbiAgdGhpcy5wbGF5ZXIucGxheSgpO1xuICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNlZW50ZXInLCB0aGlzICk7XG59O1xuXG4vLyBQbGF5ZXIgQVBJLCBkb24ndCBoYXRlIHRoZSAuLi4gdGhhbmtzIEkga25vdyB3aGVyZSB0aGUgZG9vciBpc1xuXG5wcm90by5wbGF5UGxheWVyID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucGxheWVyLnBsYXkoKTtcbn07XG5cbnByb3RvLnN0b3BQbGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wbGF5ZXIuc3RvcCgpO1xufTtcblxucHJvdG8ucGF1c2VQbGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wbGF5ZXIucGF1c2UoKTtcbn07XG5cbnByb3RvLnVucGF1c2VQbGF5ZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wbGF5ZXIudW5wYXVzZSgpO1xufTtcblxucHJvdG8uZGVhY3RpdmF0ZVBsYXllciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnBsYXllci5zdG9wKCk7XG4gIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2VlbnRlcicsIHRoaXMgKTtcbn07XG5cbi8vIC0tLS0tIG1vdXNlZW50ZXIvbGVhdmUgLS0tLS0gLy9cblxuLy8gcGF1c2UgYXV0by1wbGF5IG9uIGhvdmVyXG5wcm90by5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCAhdGhpcy5vcHRpb25zLnBhdXNlQXV0b1BsYXlPbkhvdmVyICkgcmV0dXJuO1xuXG4gIHRoaXMucGxheWVyLnBhdXNlKCk7XG4gIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2VsZWF2ZScsIHRoaXMgKTtcbn07XG5cbi8vIHJlc3VtZSBhdXRvLXBsYXkgb24gaG92ZXIgb2ZmXG5wcm90by5vbm1vdXNlbGVhdmUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wbGF5ZXIudW5wYXVzZSgpO1xuICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNlbGVhdmUnLCB0aGlzICk7XG59O1xuXG4vLyAtLS0tLSAgLS0tLS0gLy9cblxuRmxpY2tpdHkuUGxheWVyID0gUGxheWVyO1xuXG5yZXR1cm4gRmxpY2tpdHk7XG5cbn0gKSApO1xuIiwiLy8gc2xpZGVcbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LkZsaWNraXR5ID0gd2luZG93LkZsaWNraXR5IHx8IHt9O1xuICAgIHdpbmRvdy5GbGlja2l0eS5TbGlkZSA9IGZhY3RvcnkoKTtcbiAgfVxuXG59KCB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gZmFjdG9yeSgpIHtcblxuZnVuY3Rpb24gU2xpZGUoIGJlZ2luTWFyZ2luLCBlbmRNYXJnaW4sIGNlbGxBbGlnbiApIHtcbiAgdGhpcy5iZWdpbk1hcmdpbiA9IGJlZ2luTWFyZ2luO1xuICB0aGlzLmVuZE1hcmdpbiA9IGVuZE1hcmdpbjtcbiAgdGhpcy5jZWxsQWxpZ24gPSBjZWxsQWxpZ247XG4gIHRoaXMuY2VsbHMgPSBbXTtcbiAgdGhpcy5vdXRlcldpZHRoID0gMDtcbiAgdGhpcy5oZWlnaHQgPSAwO1xufVxuXG5sZXQgcHJvdG8gPSBTbGlkZS5wcm90b3R5cGU7XG5cbnByb3RvLmFkZENlbGwgPSBmdW5jdGlvbiggY2VsbCApIHtcbiAgdGhpcy5jZWxscy5wdXNoKCBjZWxsICk7XG4gIHRoaXMub3V0ZXJXaWR0aCArPSBjZWxsLnNpemUub3V0ZXJXaWR0aDtcbiAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCggY2VsbC5zaXplLm91dGVySGVpZ2h0LCB0aGlzLmhlaWdodCApO1xuICAvLyBmaXJzdCBjZWxsIHN0dWZmXG4gIGlmICggdGhpcy5jZWxscy5sZW5ndGggPT09IDEgKSB7XG4gICAgdGhpcy54ID0gY2VsbC54OyAvLyB4IGNvbWVzIGZyb20gZmlyc3QgY2VsbFxuICAgIHRoaXMuZmlyc3RNYXJnaW4gPSBjZWxsLnNpemVbIHRoaXMuYmVnaW5NYXJnaW4gXTtcbiAgfVxufTtcblxucHJvdG8udXBkYXRlVGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG4gIGxldCBsYXN0Q2VsbCA9IHRoaXMuZ2V0TGFzdENlbGwoKTtcbiAgbGV0IGxhc3RNYXJnaW4gPSBsYXN0Q2VsbCA/IGxhc3RDZWxsLnNpemVbIHRoaXMuZW5kTWFyZ2luIF0gOiAwO1xuICBsZXQgc2xpZGVXaWR0aCA9IHRoaXMub3V0ZXJXaWR0aCAtICggdGhpcy5maXJzdE1hcmdpbiArIGxhc3RNYXJnaW4gKTtcbiAgdGhpcy50YXJnZXQgPSB0aGlzLnggKyB0aGlzLmZpcnN0TWFyZ2luICsgc2xpZGVXaWR0aCAqIHRoaXMuY2VsbEFsaWduO1xufTtcblxucHJvdG8uZ2V0TGFzdENlbGwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2VsbHNbIHRoaXMuY2VsbHMubGVuZ3RoIC0gMSBdO1xufTtcblxucHJvdG8uc2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY2VsbHMuZm9yRWFjaCggKCBjZWxsICkgPT4gY2VsbC5zZWxlY3QoKSApO1xufTtcblxucHJvdG8udW5zZWxlY3QgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jZWxscy5mb3JFYWNoKCAoIGNlbGwgKSA9PiBjZWxsLnVuc2VsZWN0KCkgKTtcbn07XG5cbnByb3RvLmdldENlbGxFbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5jZWxscy5tYXAoICggY2VsbCApID0+IGNlbGwuZWxlbWVudCApO1xufTtcblxucmV0dXJuIFNsaWRlO1xuXG59ICkgKTtcbiIsIi8qIVxuICogSW5maW5pdGUgU2Nyb2xsIHYyLjAuNFxuICogbWVhc3VyZSBzaXplIG9mIGVsZW1lbnRzXG4gKiBNSVQgbGljZW5zZVxuICovXG5cbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHtcbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICB3aW5kb3cuZ2V0U2l6ZSA9IGZhY3RvcnkoKTtcbiAgfVxuXG59ICkoIHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeSgpIHtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vLyBnZXQgYSBudW1iZXIgZnJvbSBhIHN0cmluZywgbm90IGEgcGVyY2VudGFnZVxuZnVuY3Rpb24gZ2V0U3R5bGVTaXplKCB2YWx1ZSApIHtcbiAgbGV0IG51bSA9IHBhcnNlRmxvYXQoIHZhbHVlICk7XG4gIC8vIG5vdCBhIHBlcmNlbnQgbGlrZSAnMTAwJScsIGFuZCBhIG51bWJlclxuICBsZXQgaXNWYWxpZCA9IHZhbHVlLmluZGV4T2YoJyUnKSA9PSAtMSAmJiAhaXNOYU4oIG51bSApO1xuICByZXR1cm4gaXNWYWxpZCAmJiBudW07XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIG1lYXN1cmVtZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5sZXQgbWVhc3VyZW1lbnRzID0gW1xuICAncGFkZGluZ0xlZnQnLFxuICAncGFkZGluZ1JpZ2h0JyxcbiAgJ3BhZGRpbmdUb3AnLFxuICAncGFkZGluZ0JvdHRvbScsXG4gICdtYXJnaW5MZWZ0JyxcbiAgJ21hcmdpblJpZ2h0JyxcbiAgJ21hcmdpblRvcCcsXG4gICdtYXJnaW5Cb3R0b20nLFxuICAnYm9yZGVyTGVmdFdpZHRoJyxcbiAgJ2JvcmRlclJpZ2h0V2lkdGgnLFxuICAnYm9yZGVyVG9wV2lkdGgnLFxuICAnYm9yZGVyQm90dG9tV2lkdGgnLFxuXTtcblxubGV0IG1lYXN1cmVtZW50c0xlbmd0aCA9IG1lYXN1cmVtZW50cy5sZW5ndGg7XG5cbmZ1bmN0aW9uIGdldFplcm9TaXplKCkge1xuICBsZXQgc2l6ZSA9IHtcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDAsXG4gICAgaW5uZXJXaWR0aDogMCxcbiAgICBpbm5lckhlaWdodDogMCxcbiAgICBvdXRlcldpZHRoOiAwLFxuICAgIG91dGVySGVpZ2h0OiAwLFxuICB9O1xuICBtZWFzdXJlbWVudHMuZm9yRWFjaCggKCBtZWFzdXJlbWVudCApID0+IHtcbiAgICBzaXplWyBtZWFzdXJlbWVudCBdID0gMDtcbiAgfSApO1xuICByZXR1cm4gc2l6ZTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZ2V0U2l6ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBnZXRTaXplKCBlbGVtICkge1xuICAvLyB1c2UgcXVlcnlTZWxldG9yIGlmIGVsZW0gaXMgc3RyaW5nXG4gIGlmICggdHlwZW9mIGVsZW0gPT0gJ3N0cmluZycgKSBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggZWxlbSApO1xuXG4gIC8vIGRvIG5vdCBwcm9jZWVkIG9uIG5vbi1vYmplY3RzXG4gIGxldCBpc0VsZW1lbnQgPSBlbGVtICYmIHR5cGVvZiBlbGVtID09ICdvYmplY3QnICYmIGVsZW0ubm9kZVR5cGU7XG4gIGlmICggIWlzRWxlbWVudCApIHJldHVybjtcblxuICBsZXQgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG5cbiAgLy8gaWYgaGlkZGVuLCBldmVyeXRoaW5nIGlzIDBcbiAgaWYgKCBzdHlsZS5kaXNwbGF5ID09ICdub25lJyApIHJldHVybiBnZXRaZXJvU2l6ZSgpO1xuXG4gIGxldCBzaXplID0ge307XG4gIHNpemUud2lkdGggPSBlbGVtLm9mZnNldFdpZHRoO1xuICBzaXplLmhlaWdodCA9IGVsZW0ub2Zmc2V0SGVpZ2h0O1xuXG4gIGxldCBpc0JvcmRlckJveCA9IHNpemUuaXNCb3JkZXJCb3ggPSBzdHlsZS5ib3hTaXppbmcgPT0gJ2JvcmRlci1ib3gnO1xuXG4gIC8vIGdldCBhbGwgbWVhc3VyZW1lbnRzXG4gIG1lYXN1cmVtZW50cy5mb3JFYWNoKCAoIG1lYXN1cmVtZW50ICkgPT4ge1xuICAgIGxldCB2YWx1ZSA9IHN0eWxlWyBtZWFzdXJlbWVudCBdO1xuICAgIGxldCBudW0gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xuICAgIC8vIGFueSAnYXV0bycsICdtZWRpdW0nIHZhbHVlIHdpbGwgYmUgMFxuICAgIHNpemVbIG1lYXN1cmVtZW50IF0gPSAhaXNOYU4oIG51bSApID8gbnVtIDogMDtcbiAgfSApO1xuXG4gIGxldCBwYWRkaW5nV2lkdGggPSBzaXplLnBhZGRpbmdMZWZ0ICsgc2l6ZS5wYWRkaW5nUmlnaHQ7XG4gIGxldCBwYWRkaW5nSGVpZ2h0ID0gc2l6ZS5wYWRkaW5nVG9wICsgc2l6ZS5wYWRkaW5nQm90dG9tO1xuICBsZXQgbWFyZ2luV2lkdGggPSBzaXplLm1hcmdpbkxlZnQgKyBzaXplLm1hcmdpblJpZ2h0O1xuICBsZXQgbWFyZ2luSGVpZ2h0ID0gc2l6ZS5tYXJnaW5Ub3AgKyBzaXplLm1hcmdpbkJvdHRvbTtcbiAgbGV0IGJvcmRlcldpZHRoID0gc2l6ZS5ib3JkZXJMZWZ0V2lkdGggKyBzaXplLmJvcmRlclJpZ2h0V2lkdGg7XG4gIGxldCBib3JkZXJIZWlnaHQgPSBzaXplLmJvcmRlclRvcFdpZHRoICsgc2l6ZS5ib3JkZXJCb3R0b21XaWR0aDtcblxuICAvLyBvdmVyd3JpdGUgd2lkdGggYW5kIGhlaWdodCBpZiB3ZSBjYW4gZ2V0IGl0IGZyb20gc3R5bGVcbiAgbGV0IHN0eWxlV2lkdGggPSBnZXRTdHlsZVNpemUoIHN0eWxlLndpZHRoICk7XG4gIGlmICggc3R5bGVXaWR0aCAhPT0gZmFsc2UgKSB7XG4gICAgc2l6ZS53aWR0aCA9IHN0eWxlV2lkdGggK1xuICAgICAgLy8gYWRkIHBhZGRpbmcgYW5kIGJvcmRlciB1bmxlc3MgaXQncyBhbHJlYWR5IGluY2x1ZGluZyBpdFxuICAgICAgKCBpc0JvcmRlckJveCA/IDAgOiBwYWRkaW5nV2lkdGggKyBib3JkZXJXaWR0aCApO1xuICB9XG5cbiAgbGV0IHN0eWxlSGVpZ2h0ID0gZ2V0U3R5bGVTaXplKCBzdHlsZS5oZWlnaHQgKTtcbiAgaWYgKCBzdHlsZUhlaWdodCAhPT0gZmFsc2UgKSB7XG4gICAgc2l6ZS5oZWlnaHQgPSBzdHlsZUhlaWdodCArXG4gICAgICAvLyBhZGQgcGFkZGluZyBhbmQgYm9yZGVyIHVubGVzcyBpdCdzIGFscmVhZHkgaW5jbHVkaW5nIGl0XG4gICAgICAoIGlzQm9yZGVyQm94ID8gMCA6IHBhZGRpbmdIZWlnaHQgKyBib3JkZXJIZWlnaHQgKTtcbiAgfVxuXG4gIHNpemUuaW5uZXJXaWR0aCA9IHNpemUud2lkdGggLSAoIHBhZGRpbmdXaWR0aCArIGJvcmRlcldpZHRoICk7XG4gIHNpemUuaW5uZXJIZWlnaHQgPSBzaXplLmhlaWdodCAtICggcGFkZGluZ0hlaWdodCArIGJvcmRlckhlaWdodCApO1xuXG4gIHNpemUub3V0ZXJXaWR0aCA9IHNpemUud2lkdGggKyBtYXJnaW5XaWR0aDtcbiAgc2l6ZS5vdXRlckhlaWdodCA9IHNpemUuaGVpZ2h0ICsgbWFyZ2luSGVpZ2h0O1xuXG4gIHJldHVybiBzaXplO1xufVxuXG5yZXR1cm4gZ2V0U2l6ZTtcblxufSApO1xuIiwiLyohXG4gKiBpbWFnZXNMb2FkZWQgdjUuMC4wXG4gKiBKYXZhU2NyaXB0IGlzIGFsbCBsaWtlIFwiWW91IGltYWdlcyBhcmUgZG9uZSB5ZXQgb3Igd2hhdD9cIlxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHdpbmRvdywgcmVxdWlyZSgnZXYtZW1pdHRlcicpICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICB3aW5kb3cuaW1hZ2VzTG9hZGVkID0gZmFjdG9yeSggd2luZG93LCB3aW5kb3cuRXZFbWl0dGVyICk7XG4gIH1cblxufSApKCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsXG4gICAgZnVuY3Rpb24gZmFjdG9yeSggd2luZG93LCBFdkVtaXR0ZXIgKSB7XG5cbmxldCAkID0gd2luZG93LmpRdWVyeTtcbmxldCBjb25zb2xlID0gd2luZG93LmNvbnNvbGU7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGhlbHBlcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLy8gdHVybiBlbGVtZW50IG9yIG5vZGVMaXN0IGludG8gYW4gYXJyYXlcbmZ1bmN0aW9uIG1ha2VBcnJheSggb2JqICkge1xuICAvLyB1c2Ugb2JqZWN0IGlmIGFscmVhZHkgYW4gYXJyYXlcbiAgaWYgKCBBcnJheS5pc0FycmF5KCBvYmogKSApIHJldHVybiBvYmo7XG5cbiAgbGV0IGlzQXJyYXlMaWtlID0gdHlwZW9mIG9iaiA9PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqLmxlbmd0aCA9PSAnbnVtYmVyJztcbiAgLy8gY29udmVydCBub2RlTGlzdCB0byBhcnJheVxuICBpZiAoIGlzQXJyYXlMaWtlICkgcmV0dXJuIFsgLi4ub2JqIF07XG5cbiAgLy8gYXJyYXkgb2Ygc2luZ2xlIGluZGV4XG4gIHJldHVybiBbIG9iaiBdO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBpbWFnZXNMb2FkZWQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuLyoqXG4gKiBAcGFyYW0ge1tBcnJheSwgRWxlbWVudCwgTm9kZUxpc3QsIFN0cmluZ119IGVsZW1cbiAqIEBwYXJhbSB7W09iamVjdCwgRnVuY3Rpb25dfSBvcHRpb25zIC0gaWYgZnVuY3Rpb24sIHVzZSBhcyBjYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbn0gb25BbHdheXMgLSBjYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0ltYWdlc0xvYWRlZH1cbiAqL1xuZnVuY3Rpb24gSW1hZ2VzTG9hZGVkKCBlbGVtLCBvcHRpb25zLCBvbkFsd2F5cyApIHtcbiAgLy8gY29lcmNlIEltYWdlc0xvYWRlZCgpIHdpdGhvdXQgbmV3LCB0byBiZSBuZXcgSW1hZ2VzTG9hZGVkKClcbiAgaWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgSW1hZ2VzTG9hZGVkICkgKSB7XG4gICAgcmV0dXJuIG5ldyBJbWFnZXNMb2FkZWQoIGVsZW0sIG9wdGlvbnMsIG9uQWx3YXlzICk7XG4gIH1cbiAgLy8gdXNlIGVsZW0gYXMgc2VsZWN0b3Igc3RyaW5nXG4gIGxldCBxdWVyeUVsZW0gPSBlbGVtO1xuICBpZiAoIHR5cGVvZiBlbGVtID09ICdzdHJpbmcnICkge1xuICAgIHF1ZXJ5RWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGVsZW0gKTtcbiAgfVxuICAvLyBiYWlsIGlmIGJhZCBlbGVtZW50XG4gIGlmICggIXF1ZXJ5RWxlbSApIHtcbiAgICBjb25zb2xlLmVycm9yKGBCYWQgZWxlbWVudCBmb3IgaW1hZ2VzTG9hZGVkICR7cXVlcnlFbGVtIHx8IGVsZW19YCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5lbGVtZW50cyA9IG1ha2VBcnJheSggcXVlcnlFbGVtICk7XG4gIHRoaXMub3B0aW9ucyA9IHt9O1xuICAvLyBzaGlmdCBhcmd1bWVudHMgaWYgbm8gb3B0aW9ucyBzZXRcbiAgaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PSAnZnVuY3Rpb24nICkge1xuICAgIG9uQWx3YXlzID0gb3B0aW9ucztcbiAgfSBlbHNlIHtcbiAgICBPYmplY3QuYXNzaWduKCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMgKTtcbiAgfVxuXG4gIGlmICggb25BbHdheXMgKSB0aGlzLm9uKCAnYWx3YXlzJywgb25BbHdheXMgKTtcblxuICB0aGlzLmdldEltYWdlcygpO1xuICAvLyBhZGQgalF1ZXJ5IERlZmVycmVkIG9iamVjdFxuICBpZiAoICQgKSB0aGlzLmpxRGVmZXJyZWQgPSBuZXcgJC5EZWZlcnJlZCgpO1xuXG4gIC8vIEhBQ0sgY2hlY2sgYXN5bmMgdG8gYWxsb3cgdGltZSB0byBiaW5kIGxpc3RlbmVyc1xuICBzZXRUaW1lb3V0KCB0aGlzLmNoZWNrLmJpbmQoIHRoaXMgKSApO1xufVxuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZFbWl0dGVyLnByb3RvdHlwZSApO1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmdldEltYWdlcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmltYWdlcyA9IFtdO1xuXG4gIC8vIGZpbHRlciAmIGZpbmQgaXRlbXMgaWYgd2UgaGF2ZSBhbiBpdGVtIHNlbGVjdG9yXG4gIHRoaXMuZWxlbWVudHMuZm9yRWFjaCggdGhpcy5hZGRFbGVtZW50SW1hZ2VzLCB0aGlzICk7XG59O1xuXG5jb25zdCBlbGVtZW50Tm9kZVR5cGVzID0gWyAxLCA5LCAxMSBdO1xuXG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gZWxlbVxuICovXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEVsZW1lbnRJbWFnZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgLy8gZmlsdGVyIHNpYmxpbmdzXG4gIGlmICggZWxlbS5ub2RlTmFtZSA9PT0gJ0lNRycgKSB7XG4gICAgdGhpcy5hZGRJbWFnZSggZWxlbSApO1xuICB9XG4gIC8vIGdldCBiYWNrZ3JvdW5kIGltYWdlIG9uIGVsZW1lbnRcbiAgaWYgKCB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCA9PT0gdHJ1ZSApIHtcbiAgICB0aGlzLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzKCBlbGVtICk7XG4gIH1cblxuICAvLyBmaW5kIGNoaWxkcmVuXG4gIC8vIG5vIG5vbi1lbGVtZW50IG5vZGVzLCAjMTQzXG4gIGxldCB7IG5vZGVUeXBlIH0gPSBlbGVtO1xuICBpZiAoICFub2RlVHlwZSB8fCAhZWxlbWVudE5vZGVUeXBlcy5pbmNsdWRlcyggbm9kZVR5cGUgKSApIHJldHVybjtcblxuICBsZXQgY2hpbGRJbWdzID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcbiAgLy8gY29uY2F0IGNoaWxkRWxlbXMgdG8gZmlsdGVyRm91bmQgYXJyYXlcbiAgZm9yICggbGV0IGltZyBvZiBjaGlsZEltZ3MgKSB7XG4gICAgdGhpcy5hZGRJbWFnZSggaW1nICk7XG4gIH1cblxuICAvLyBnZXQgY2hpbGQgYmFja2dyb3VuZCBpbWFnZXNcbiAgaWYgKCB0eXBlb2YgdGhpcy5vcHRpb25zLmJhY2tncm91bmQgPT0gJ3N0cmluZycgKSB7XG4gICAgbGV0IGNoaWxkcmVuID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCApO1xuICAgIGZvciAoIGxldCBjaGlsZCBvZiBjaGlsZHJlbiApIHtcbiAgICAgIHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMoIGNoaWxkICk7XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCByZVVSTCA9IC91cmxcXCgoWydcIl0pPyguKj8pXFwxXFwpL2dpO1xuXG5JbWFnZXNMb2FkZWQucHJvdG90eXBlLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gIGxldCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcbiAgLy8gRmlyZWZveCByZXR1cm5zIG51bGwgaWYgaW4gYSBoaWRkZW4gaWZyYW1lIGh0dHBzOi8vYnVnemlsLmxhLzU0ODM5N1xuICBpZiAoICFzdHlsZSApIHJldHVybjtcblxuICAvLyBnZXQgdXJsIGluc2lkZSB1cmwoXCIuLi5cIilcbiAgbGV0IG1hdGNoZXMgPSByZVVSTC5leGVjKCBzdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgKTtcbiAgd2hpbGUgKCBtYXRjaGVzICE9PSBudWxsICkge1xuICAgIGxldCB1cmwgPSBtYXRjaGVzICYmIG1hdGNoZXNbMl07XG4gICAgaWYgKCB1cmwgKSB7XG4gICAgICB0aGlzLmFkZEJhY2tncm91bmQoIHVybCwgZWxlbSApO1xuICAgIH1cbiAgICBtYXRjaGVzID0gcmVVUkwuZXhlYyggc3R5bGUuYmFja2dyb3VuZEltYWdlICk7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtJbWFnZX0gaW1nXG4gKi9cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkSW1hZ2UgPSBmdW5jdGlvbiggaW1nICkge1xuICBsZXQgbG9hZGluZ0ltYWdlID0gbmV3IExvYWRpbmdJbWFnZSggaW1nICk7XG4gIHRoaXMuaW1hZ2VzLnB1c2goIGxvYWRpbmdJbWFnZSApO1xufTtcblxuSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRCYWNrZ3JvdW5kID0gZnVuY3Rpb24oIHVybCwgZWxlbSApIHtcbiAgbGV0IGJhY2tncm91bmQgPSBuZXcgQmFja2dyb3VuZCggdXJsLCBlbGVtICk7XG4gIHRoaXMuaW1hZ2VzLnB1c2goIGJhY2tncm91bmQgKTtcbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wcm9ncmVzc2VkQ291bnQgPSAwO1xuICB0aGlzLmhhc0FueUJyb2tlbiA9IGZhbHNlO1xuICAvLyBjb21wbGV0ZSBpZiBubyBpbWFnZXNcbiAgaWYgKCAhdGhpcy5pbWFnZXMubGVuZ3RoICkge1xuICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1zdHlsZSAqL1xuICBsZXQgb25Qcm9ncmVzcyA9ICggaW1hZ2UsIGVsZW0sIG1lc3NhZ2UgKSA9PiB7XG4gICAgLy8gSEFDSyAtIENocm9tZSB0cmlnZ2VycyBldmVudCBiZWZvcmUgb2JqZWN0IHByb3BlcnRpZXMgaGF2ZSBjaGFuZ2VkLiAjODNcbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICB0aGlzLnByb2dyZXNzKCBpbWFnZSwgZWxlbSwgbWVzc2FnZSApO1xuICAgIH0gKTtcbiAgfTtcblxuICB0aGlzLmltYWdlcy5mb3JFYWNoKCBmdW5jdGlvbiggbG9hZGluZ0ltYWdlICkge1xuICAgIGxvYWRpbmdJbWFnZS5vbmNlKCAncHJvZ3Jlc3MnLCBvblByb2dyZXNzICk7XG4gICAgbG9hZGluZ0ltYWdlLmNoZWNrKCk7XG4gIH0gKTtcbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiggaW1hZ2UsIGVsZW0sIG1lc3NhZ2UgKSB7XG4gIHRoaXMucHJvZ3Jlc3NlZENvdW50Kys7XG4gIHRoaXMuaGFzQW55QnJva2VuID0gdGhpcy5oYXNBbnlCcm9rZW4gfHwgIWltYWdlLmlzTG9hZGVkO1xuICAvLyBwcm9ncmVzcyBldmVudFxuICB0aGlzLmVtaXRFdmVudCggJ3Byb2dyZXNzJywgWyB0aGlzLCBpbWFnZSwgZWxlbSBdICk7XG4gIGlmICggdGhpcy5qcURlZmVycmVkICYmIHRoaXMuanFEZWZlcnJlZC5ub3RpZnkgKSB7XG4gICAgdGhpcy5qcURlZmVycmVkLm5vdGlmeSggdGhpcywgaW1hZ2UgKTtcbiAgfVxuICAvLyBjaGVjayBpZiBjb21wbGV0ZWRcbiAgaWYgKCB0aGlzLnByb2dyZXNzZWRDb3VudCA9PT0gdGhpcy5pbWFnZXMubGVuZ3RoICkge1xuICAgIHRoaXMuY29tcGxldGUoKTtcbiAgfVxuXG4gIGlmICggdGhpcy5vcHRpb25zLmRlYnVnICYmIGNvbnNvbGUgKSB7XG4gICAgY29uc29sZS5sb2coIGBwcm9ncmVzczogJHttZXNzYWdlfWAsIGltYWdlLCBlbGVtICk7XG4gIH1cbn07XG5cbkltYWdlc0xvYWRlZC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgbGV0IGV2ZW50TmFtZSA9IHRoaXMuaGFzQW55QnJva2VuID8gJ2ZhaWwnIDogJ2RvbmUnO1xuICB0aGlzLmlzQ29tcGxldGUgPSB0cnVlO1xuICB0aGlzLmVtaXRFdmVudCggZXZlbnROYW1lLCBbIHRoaXMgXSApO1xuICB0aGlzLmVtaXRFdmVudCggJ2Fsd2F5cycsIFsgdGhpcyBdICk7XG4gIGlmICggdGhpcy5qcURlZmVycmVkICkge1xuICAgIGxldCBqcU1ldGhvZCA9IHRoaXMuaGFzQW55QnJva2VuID8gJ3JlamVjdCcgOiAncmVzb2x2ZSc7XG4gICAgdGhpcy5qcURlZmVycmVkWyBqcU1ldGhvZCBdKCB0aGlzICk7XG4gIH1cbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG5mdW5jdGlvbiBMb2FkaW5nSW1hZ2UoIGltZyApIHtcbiAgdGhpcy5pbWcgPSBpbWc7XG59XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdkVtaXR0ZXIucHJvdG90eXBlICk7XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgLy8gSWYgY29tcGxldGUgaXMgdHJ1ZSBhbmQgYnJvd3NlciBzdXBwb3J0cyBuYXR1cmFsIHNpemVzLFxuICAvLyB0cnkgdG8gY2hlY2sgZm9yIGltYWdlIHN0YXR1cyBtYW51YWxseS5cbiAgbGV0IGlzQ29tcGxldGUgPSB0aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO1xuICBpZiAoIGlzQ29tcGxldGUgKSB7XG4gICAgLy8gcmVwb3J0IGJhc2VkIG9uIG5hdHVyYWxXaWR0aFxuICAgIHRoaXMuY29uZmlybSggdGhpcy5pbWcubmF0dXJhbFdpZHRoICE9PSAwLCAnbmF0dXJhbFdpZHRoJyApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIElmIG5vbmUgb2YgdGhlIGNoZWNrcyBhYm92ZSBtYXRjaGVkLCBzaW11bGF0ZSBsb2FkaW5nIG9uIGRldGFjaGVkIGVsZW1lbnQuXG4gIHRoaXMucHJveHlJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAvLyBhZGQgY3Jvc3NPcmlnaW4gYXR0cmlidXRlLiAjMjA0XG4gIGlmICggdGhpcy5pbWcuY3Jvc3NPcmlnaW4gKSB7XG4gICAgdGhpcy5wcm94eUltYWdlLmNyb3NzT3JpZ2luID0gdGhpcy5pbWcuY3Jvc3NPcmlnaW47XG4gIH1cbiAgdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLnByb3h5SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgdGhpcyApO1xuICAvLyBiaW5kIHRvIGltYWdlIGFzIHdlbGwgZm9yIEZpcmVmb3guICMxOTFcbiAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgdGhpcy5wcm94eUltYWdlLnNyYyA9IHRoaXMuaW1nLmN1cnJlbnRTcmMgfHwgdGhpcy5pbWcuc3JjO1xufTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5nZXRJc0ltYWdlQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgLy8gY2hlY2sgZm9yIG5vbi16ZXJvLCBub24tdW5kZWZpbmVkIG5hdHVyYWxXaWR0aFxuICAvLyBmaXhlcyBTYWZhcmkrSW5maW5pdGVTY3JvbGwrTWFzb25yeSBidWcgaW5maW5pdGUtc2Nyb2xsIzY3MVxuICByZXR1cm4gdGhpcy5pbWcuY29tcGxldGUgJiYgdGhpcy5pbWcubmF0dXJhbFdpZHRoO1xufTtcblxuTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oIGlzTG9hZGVkLCBtZXNzYWdlICkge1xuICB0aGlzLmlzTG9hZGVkID0gaXNMb2FkZWQ7XG4gIGxldCB7IHBhcmVudE5vZGUgfSA9IHRoaXMuaW1nO1xuICAvLyBlbWl0IHByb2dyZXNzIHdpdGggcGFyZW50IDxwaWN0dXJlPiBvciBzZWxmIDxpbWc+XG4gIGxldCBlbGVtID0gcGFyZW50Tm9kZS5ub2RlTmFtZSA9PT0gJ1BJQ1RVUkUnID8gcGFyZW50Tm9kZSA6IHRoaXMuaW1nO1xuICB0aGlzLmVtaXRFdmVudCggJ3Byb2dyZXNzJywgWyB0aGlzLCBlbGVtLCBtZXNzYWdlIF0gKTtcbn07XG5cbi8vIC0tLS0tIGV2ZW50cyAtLS0tLSAvL1xuXG4vLyB0cmlnZ2VyIHNwZWNpZmllZCBoYW5kbGVyIGZvciBldmVudCB0eXBlXG5Mb2FkaW5nSW1hZ2UucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICBsZXQgbWV0aG9kID0gJ29uJyArIGV2ZW50LnR5cGU7XG4gIGlmICggdGhpc1sgbWV0aG9kIF0gKSB7XG4gICAgdGhpc1sgbWV0aG9kIF0oIGV2ZW50ICk7XG4gIH1cbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY29uZmlybSggdHJ1ZSwgJ29ubG9hZCcgKTtcbiAgdGhpcy51bmJpbmRFdmVudHMoKTtcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNvbmZpcm0oIGZhbHNlLCAnb25lcnJvcicgKTtcbiAgdGhpcy51bmJpbmRFdmVudHMoKTtcbn07XG5cbkxvYWRpbmdJbWFnZS5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMucHJveHlJbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZCcsIHRoaXMgKTtcbiAgdGhpcy5wcm94eUltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbn07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEJhY2tncm91bmQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuZnVuY3Rpb24gQmFja2dyb3VuZCggdXJsLCBlbGVtZW50ICkge1xuICB0aGlzLnVybCA9IHVybDtcbiAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgdGhpcy5pbWcgPSBuZXcgSW1hZ2UoKTtcbn1cblxuLy8gaW5oZXJpdCBMb2FkaW5nSW1hZ2UgcHJvdG90eXBlXG5CYWNrZ3JvdW5kLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIExvYWRpbmdJbWFnZS5wcm90b3R5cGUgKTtcblxuQmFja2dyb3VuZC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCB0aGlzICk7XG4gIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoICdlcnJvcicsIHRoaXMgKTtcbiAgdGhpcy5pbWcuc3JjID0gdGhpcy51cmw7XG4gIC8vIGNoZWNrIGlmIGltYWdlIGlzIGFscmVhZHkgY29tcGxldGVcbiAgbGV0IGlzQ29tcGxldGUgPSB0aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO1xuICBpZiAoIGlzQ29tcGxldGUgKSB7XG4gICAgdGhpcy5jb25maXJtKCB0aGlzLmltZy5uYXR1cmFsV2lkdGggIT09IDAsICduYXR1cmFsV2lkdGgnICk7XG4gICAgdGhpcy51bmJpbmRFdmVudHMoKTtcbiAgfVxufTtcblxuQmFja2dyb3VuZC5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdsb2FkJywgdGhpcyApO1xuICB0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCAnZXJyb3InLCB0aGlzICk7XG59O1xuXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oIGlzTG9hZGVkLCBtZXNzYWdlICkge1xuICB0aGlzLmlzTG9hZGVkID0gaXNMb2FkZWQ7XG4gIHRoaXMuZW1pdEV2ZW50KCAncHJvZ3Jlc3MnLCBbIHRoaXMsIHRoaXMuZWxlbWVudCwgbWVzc2FnZSBdICk7XG59O1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBqUXVlcnkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuSW1hZ2VzTG9hZGVkLm1ha2VKUXVlcnlQbHVnaW4gPSBmdW5jdGlvbiggalF1ZXJ5ICkge1xuICBqUXVlcnkgPSBqUXVlcnkgfHwgd2luZG93LmpRdWVyeTtcbiAgaWYgKCAhalF1ZXJ5ICkgcmV0dXJuO1xuXG4gIC8vIHNldCBsb2NhbCB2YXJpYWJsZVxuICAkID0galF1ZXJ5O1xuICAvLyAkKCkuaW1hZ2VzTG9hZGVkKClcbiAgJC5mbi5pbWFnZXNMb2FkZWQgPSBmdW5jdGlvbiggb3B0aW9ucywgb25BbHdheXMgKSB7XG4gICAgbGV0IGluc3RhbmNlID0gbmV3IEltYWdlc0xvYWRlZCggdGhpcywgb3B0aW9ucywgb25BbHdheXMgKTtcbiAgICByZXR1cm4gaW5zdGFuY2UuanFEZWZlcnJlZC5wcm9taXNlKCAkKCB0aGlzICkgKTtcbiAgfTtcbn07XG4vLyB0cnkgbWFraW5nIHBsdWdpblxuSW1hZ2VzTG9hZGVkLm1ha2VKUXVlcnlQbHVnaW4oKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbnJldHVybiBJbWFnZXNMb2FkZWQ7XG5cbn0gKTtcbiIsIihmdW5jdGlvbih3aW5kb3csIGZhY3RvcnkpIHtcblx0dmFyIGxhenlTaXplcyA9IGZhY3Rvcnkod2luZG93LCB3aW5kb3cuZG9jdW1lbnQsIERhdGUpO1xuXHR3aW5kb3cubGF6eVNpemVzID0gbGF6eVNpemVzO1xuXHRpZih0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKXtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGxhenlTaXplcztcblx0fVxufSh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID9cbiAgICAgIHdpbmRvdyA6IHt9LCBcbi8qKlxuICogaW1wb3J0KFwiLi90eXBlcy9nbG9iYWxcIilcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KFwiLi90eXBlcy9sYXp5c2l6ZXMtY29uZmlnXCIpLkxhenlTaXplc0NvbmZpZ1BhcnRpYWwgfSBMYXp5U2l6ZXNDb25maWdQYXJ0aWFsXG4gKi9cbmZ1bmN0aW9uIGwod2luZG93LCBkb2N1bWVudCwgRGF0ZSkgeyAvLyBQYXNzIGluIHRoZSB3aW5kb3cgRGF0ZSBmdW5jdGlvbiBhbHNvIGZvciBTU1IgYmVjYXVzZSB0aGUgRGF0ZSBjbGFzcyBjYW4gYmUgbG9zdFxuXHQndXNlIHN0cmljdCc7XG5cdC8qanNoaW50IGVxbnVsbDp0cnVlICovXG5cblx0dmFyIGxhenlzaXplcyxcblx0XHQvKipcblx0XHQgKiBAdHlwZSB7IExhenlTaXplc0NvbmZpZ1BhcnRpYWwgfVxuXHRcdCAqL1xuXHRcdGxhenlTaXplc0NmZztcblxuXHQoZnVuY3Rpb24oKXtcblx0XHR2YXIgcHJvcDtcblxuXHRcdHZhciBsYXp5U2l6ZXNEZWZhdWx0cyA9IHtcblx0XHRcdGxhenlDbGFzczogJ2xhenlsb2FkJyxcblx0XHRcdGxvYWRlZENsYXNzOiAnbGF6eWxvYWRlZCcsXG5cdFx0XHRsb2FkaW5nQ2xhc3M6ICdsYXp5bG9hZGluZycsXG5cdFx0XHRwcmVsb2FkQ2xhc3M6ICdsYXp5cHJlbG9hZCcsXG5cdFx0XHRlcnJvckNsYXNzOiAnbGF6eWVycm9yJyxcblx0XHRcdC8vc3RyaWN0Q2xhc3M6ICdsYXp5c3RyaWN0Jyxcblx0XHRcdGF1dG9zaXplc0NsYXNzOiAnbGF6eWF1dG9zaXplcycsXG5cdFx0XHRmYXN0TG9hZGVkQ2xhc3M6ICdscy1pcy1jYWNoZWQnLFxuXHRcdFx0aWZyYW1lTG9hZE1vZGU6IDAsXG5cdFx0XHRzcmNBdHRyOiAnZGF0YS1zcmMnLFxuXHRcdFx0c3Jjc2V0QXR0cjogJ2RhdGEtc3Jjc2V0Jyxcblx0XHRcdHNpemVzQXR0cjogJ2RhdGEtc2l6ZXMnLFxuXHRcdFx0Ly9wcmVsb2FkQWZ0ZXJMb2FkOiBmYWxzZSxcblx0XHRcdG1pblNpemU6IDQwLFxuXHRcdFx0Y3VzdG9tTWVkaWE6IHt9LFxuXHRcdFx0aW5pdDogdHJ1ZSxcblx0XHRcdGV4cEZhY3RvcjogMS41LFxuXHRcdFx0aEZhYzogMC44LFxuXHRcdFx0bG9hZE1vZGU6IDIsXG5cdFx0XHRsb2FkSGlkZGVuOiB0cnVlLFxuXHRcdFx0cmljVGltZW91dDogMCxcblx0XHRcdHRocm90dGxlRGVsYXk6IDEyNSxcblx0XHR9O1xuXG5cdFx0bGF6eVNpemVzQ2ZnID0gd2luZG93LmxhenlTaXplc0NvbmZpZyB8fCB3aW5kb3cubGF6eXNpemVzQ29uZmlnIHx8IHt9O1xuXG5cdFx0Zm9yKHByb3AgaW4gbGF6eVNpemVzRGVmYXVsdHMpe1xuXHRcdFx0aWYoIShwcm9wIGluIGxhenlTaXplc0NmZykpe1xuXHRcdFx0XHRsYXp5U2l6ZXNDZmdbcHJvcF0gPSBsYXp5U2l6ZXNEZWZhdWx0c1twcm9wXTtcblx0XHRcdH1cblx0XHR9XG5cdH0pKCk7XG5cblx0aWYgKCFkb2N1bWVudCB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRpbml0OiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdC8qKlxuXHRcdFx0ICogQHR5cGUgeyBMYXp5U2l6ZXNDb25maWdQYXJ0aWFsIH1cblx0XHRcdCAqL1xuXHRcdFx0Y2ZnOiBsYXp5U2l6ZXNDZmcsXG5cdFx0XHQvKipcblx0XHRcdCAqIEB0eXBlIHsgdHJ1ZSB9XG5cdFx0XHQgKi9cblx0XHRcdG5vU3VwcG9ydDogdHJ1ZSxcblx0XHR9O1xuXHR9XG5cblx0dmFyIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cblx0dmFyIHN1cHBvcnRQaWN0dXJlID0gd2luZG93LkhUTUxQaWN0dXJlRWxlbWVudDtcblxuXHR2YXIgX2FkZEV2ZW50TGlzdGVuZXIgPSAnYWRkRXZlbnRMaXN0ZW5lcic7XG5cblx0dmFyIF9nZXRBdHRyaWJ1dGUgPSAnZ2V0QXR0cmlidXRlJztcblxuXHQvKipcblx0ICogVXBkYXRlIHRvIGJpbmQgdG8gd2luZG93IGJlY2F1c2UgJ3RoaXMnIGJlY29tZXMgbnVsbCBkdXJpbmcgU1NSXG5cdCAqIGJ1aWxkcy5cblx0ICovXG5cdHZhciBhZGRFdmVudExpc3RlbmVyID0gd2luZG93W19hZGRFdmVudExpc3RlbmVyXS5iaW5kKHdpbmRvdyk7XG5cblx0dmFyIHNldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dDtcblxuXHR2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBzZXRUaW1lb3V0O1xuXG5cdHZhciByZXF1ZXN0SWRsZUNhbGxiYWNrID0gd2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2s7XG5cblx0dmFyIHJlZ1BpY3R1cmUgPSAvXnBpY3R1cmUkL2k7XG5cblx0dmFyIGxvYWRFdmVudHMgPSBbJ2xvYWQnLCAnZXJyb3InLCAnbGF6eWluY2x1ZGVkJywgJ19sYXp5bG9hZGVkJ107XG5cblx0dmFyIHJlZ0NsYXNzQ2FjaGUgPSB7fTtcblxuXHR2YXIgZm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0gZWxlIHtFbGVtZW50fVxuXHQgKiBAcGFyYW0gY2xzIHtzdHJpbmd9XG5cdCAqL1xuXHR2YXIgaGFzQ2xhc3MgPSBmdW5jdGlvbihlbGUsIGNscykge1xuXHRcdGlmKCFyZWdDbGFzc0NhY2hlW2Nsc10pe1xuXHRcdFx0cmVnQ2xhc3NDYWNoZVtjbHNdID0gbmV3IFJlZ0V4cCgnKFxcXFxzfF4pJytjbHMrJyhcXFxcc3wkKScpO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVnQ2xhc3NDYWNoZVtjbHNdLnRlc3QoZWxlW19nZXRBdHRyaWJ1dGVdKCdjbGFzcycpIHx8ICcnKSAmJiByZWdDbGFzc0NhY2hlW2Nsc107XG5cdH07XG5cblx0LyoqXG5cdCAqIEBwYXJhbSBlbGUge0VsZW1lbnR9XG5cdCAqIEBwYXJhbSBjbHMge3N0cmluZ31cblx0ICovXG5cdHZhciBhZGRDbGFzcyA9IGZ1bmN0aW9uKGVsZSwgY2xzKSB7XG5cdFx0aWYgKCFoYXNDbGFzcyhlbGUsIGNscykpe1xuXHRcdFx0ZWxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoZWxlW19nZXRBdHRyaWJ1dGVdKCdjbGFzcycpIHx8ICcnKS50cmltKCkgKyAnICcgKyBjbHMpO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQHBhcmFtIGVsZSB7RWxlbWVudH1cblx0ICogQHBhcmFtIGNscyB7c3RyaW5nfVxuXHQgKi9cblx0dmFyIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWxlLCBjbHMpIHtcblx0XHR2YXIgcmVnO1xuXHRcdGlmICgocmVnID0gaGFzQ2xhc3MoZWxlLGNscykpKSB7XG5cdFx0XHRlbGUuc2V0QXR0cmlidXRlKCdjbGFzcycsIChlbGVbX2dldEF0dHJpYnV0ZV0oJ2NsYXNzJykgfHwgJycpLnJlcGxhY2UocmVnLCAnICcpKTtcblx0XHR9XG5cdH07XG5cblx0dmFyIGFkZFJlbW92ZUxvYWRFdmVudHMgPSBmdW5jdGlvbihkb20sIGZuLCBhZGQpe1xuXHRcdHZhciBhY3Rpb24gPSBhZGQgPyBfYWRkRXZlbnRMaXN0ZW5lciA6ICdyZW1vdmVFdmVudExpc3RlbmVyJztcblx0XHRpZihhZGQpe1xuXHRcdFx0YWRkUmVtb3ZlTG9hZEV2ZW50cyhkb20sIGZuKTtcblx0XHR9XG5cdFx0bG9hZEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGV2dCl7XG5cdFx0XHRkb21bYWN0aW9uXShldnQsIGZuKTtcblx0XHR9KTtcblx0fTtcblxuXHQvKipcblx0ICogQHBhcmFtIGVsZW0geyBFbGVtZW50IH1cblx0ICogQHBhcmFtIG5hbWUgeyBzdHJpbmcgfVxuXHQgKiBAcGFyYW0gZGV0YWlsIHsgYW55IH1cblx0ICogQHBhcmFtIG5vQnViYmxlcyB7IGJvb2xlYW4gfVxuXHQgKiBAcGFyYW0gbm9DYW5jZWxhYmxlIHsgYm9vbGVhbiB9XG5cdCAqIEByZXR1cm5zIHsgQ3VzdG9tRXZlbnQgfVxuXHQgKi9cblx0dmFyIHRyaWdnZXJFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIG5hbWUsIGRldGFpbCwgbm9CdWJibGVzLCBub0NhbmNlbGFibGUpe1xuXHRcdHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXG5cdFx0aWYoIWRldGFpbCl7XG5cdFx0XHRkZXRhaWwgPSB7fTtcblx0XHR9XG5cblx0XHRkZXRhaWwuaW5zdGFuY2UgPSBsYXp5c2l6ZXM7XG5cblx0XHRldmVudC5pbml0RXZlbnQobmFtZSwgIW5vQnViYmxlcywgIW5vQ2FuY2VsYWJsZSk7XG5cblx0XHRldmVudC5kZXRhaWwgPSBkZXRhaWw7XG5cblx0XHRlbGVtLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHRcdHJldHVybiBldmVudDtcblx0fTtcblxuXHR2YXIgdXBkYXRlUG9seWZpbGwgPSBmdW5jdGlvbiAoZWwsIGZ1bGwpe1xuXHRcdHZhciBwb2x5ZmlsbDtcblx0XHRpZiggIXN1cHBvcnRQaWN0dXJlICYmICggcG9seWZpbGwgPSAod2luZG93LnBpY3R1cmVmaWxsIHx8IGxhenlTaXplc0NmZy5wZikgKSApe1xuXHRcdFx0aWYoZnVsbCAmJiBmdWxsLnNyYyAmJiAhZWxbX2dldEF0dHJpYnV0ZV0oJ3NyY3NldCcpKXtcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKCdzcmNzZXQnLCBmdWxsLnNyYyk7XG5cdFx0XHR9XG5cdFx0XHRwb2x5ZmlsbCh7cmVldmFsdWF0ZTogdHJ1ZSwgZWxlbWVudHM6IFtlbF19KTtcblx0XHR9IGVsc2UgaWYoZnVsbCAmJiBmdWxsLnNyYyl7XG5cdFx0XHRlbC5zcmMgPSBmdWxsLnNyYztcblx0XHR9XG5cdH07XG5cblx0dmFyIGdldENTUyA9IGZ1bmN0aW9uIChlbGVtLCBzdHlsZSl7XG5cdFx0cmV0dXJuIChnZXRDb21wdXRlZFN0eWxlKGVsZW0sIG51bGwpIHx8IHt9KVtzdHlsZV07XG5cdH07XG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSBlbGVtIHsgRWxlbWVudCB9XG5cdCAqIEBwYXJhbSBwYXJlbnQgeyBFbGVtZW50IH1cblx0ICogQHBhcmFtIFt3aWR0aF0ge251bWJlcn1cblx0ICogQHJldHVybnMge251bWJlcn1cblx0ICovXG5cdHZhciBnZXRXaWR0aCA9IGZ1bmN0aW9uKGVsZW0sIHBhcmVudCwgd2lkdGgpe1xuXHRcdHdpZHRoID0gd2lkdGggfHwgZWxlbS5vZmZzZXRXaWR0aDtcblxuXHRcdHdoaWxlKHdpZHRoIDwgbGF6eVNpemVzQ2ZnLm1pblNpemUgJiYgcGFyZW50ICYmICFlbGVtLl9sYXp5c2l6ZXNXaWR0aCl7XG5cdFx0XHR3aWR0aCA9ICBwYXJlbnQub2Zmc2V0V2lkdGg7XG5cdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gd2lkdGg7XG5cdH07XG5cblx0dmFyIHJBRiA9IChmdW5jdGlvbigpe1xuXHRcdHZhciBydW5uaW5nLCB3YWl0aW5nO1xuXHRcdHZhciBmaXJzdEZucyA9IFtdO1xuXHRcdHZhciBzZWNvbmRGbnMgPSBbXTtcblx0XHR2YXIgZm5zID0gZmlyc3RGbnM7XG5cblx0XHR2YXIgcnVuID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciBydW5GbnMgPSBmbnM7XG5cblx0XHRcdGZucyA9IGZpcnN0Rm5zLmxlbmd0aCA/IHNlY29uZEZucyA6IGZpcnN0Rm5zO1xuXG5cdFx0XHRydW5uaW5nID0gdHJ1ZTtcblx0XHRcdHdhaXRpbmcgPSBmYWxzZTtcblxuXHRcdFx0d2hpbGUocnVuRm5zLmxlbmd0aCl7XG5cdFx0XHRcdHJ1bkZucy5zaGlmdCgpKCk7XG5cdFx0XHR9XG5cblx0XHRcdHJ1bm5pbmcgPSBmYWxzZTtcblx0XHR9O1xuXG5cdFx0dmFyIHJhZkJhdGNoID0gZnVuY3Rpb24oZm4sIHF1ZXVlKXtcblx0XHRcdGlmKHJ1bm5pbmcgJiYgIXF1ZXVlKXtcblx0XHRcdFx0Zm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZucy5wdXNoKGZuKTtcblxuXHRcdFx0XHRpZighd2FpdGluZyl7XG5cdFx0XHRcdFx0d2FpdGluZyA9IHRydWU7XG5cdFx0XHRcdFx0KGRvY3VtZW50LmhpZGRlbiA/IHNldFRpbWVvdXQgOiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUpKHJ1bik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0cmFmQmF0Y2guX2xzRmx1c2ggPSBydW47XG5cblx0XHRyZXR1cm4gcmFmQmF0Y2g7XG5cdH0pKCk7XG5cblx0dmFyIHJBRkl0ID0gZnVuY3Rpb24oZm4sIHNpbXBsZSl7XG5cdFx0cmV0dXJuIHNpbXBsZSA/XG5cdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0ckFGKGZuKTtcblx0XHRcdH0gOlxuXHRcdFx0ZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIHRoYXQgPSB0aGlzO1xuXHRcdFx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHRcdFx0ckFGKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0Zm4uYXBwbHkodGhhdCwgYXJncyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdDtcblx0fTtcblxuXHR2YXIgdGhyb3R0bGUgPSBmdW5jdGlvbihmbil7XG5cdFx0dmFyIHJ1bm5pbmc7XG5cdFx0dmFyIGxhc3RUaW1lID0gMDtcblx0XHR2YXIgZ0RlbGF5ID0gbGF6eVNpemVzQ2ZnLnRocm90dGxlRGVsYXk7XG5cdFx0dmFyIHJJQ1RpbWVvdXQgPSBsYXp5U2l6ZXNDZmcucmljVGltZW91dDtcblx0XHR2YXIgcnVuID0gZnVuY3Rpb24oKXtcblx0XHRcdHJ1bm5pbmcgPSBmYWxzZTtcblx0XHRcdGxhc3RUaW1lID0gRGF0ZS5ub3coKTtcblx0XHRcdGZuKCk7XG5cdFx0fTtcblx0XHR2YXIgaWRsZUNhbGxiYWNrID0gcmVxdWVzdElkbGVDYWxsYmFjayAmJiBySUNUaW1lb3V0ID4gNDkgP1xuXHRcdFx0ZnVuY3Rpb24oKXtcblx0XHRcdFx0cmVxdWVzdElkbGVDYWxsYmFjayhydW4sIHt0aW1lb3V0OiBySUNUaW1lb3V0fSk7XG5cblx0XHRcdFx0aWYocklDVGltZW91dCAhPT0gbGF6eVNpemVzQ2ZnLnJpY1RpbWVvdXQpe1xuXHRcdFx0XHRcdHJJQ1RpbWVvdXQgPSBsYXp5U2l6ZXNDZmcucmljVGltZW91dDtcblx0XHRcdFx0fVxuXHRcdFx0fSA6XG5cdFx0XHRyQUZJdChmdW5jdGlvbigpe1xuXHRcdFx0XHRzZXRUaW1lb3V0KHJ1bik7XG5cdFx0XHR9LCB0cnVlKVxuXHRcdDtcblxuXHRcdHJldHVybiBmdW5jdGlvbihpc1ByaW9yaXR5KXtcblx0XHRcdHZhciBkZWxheTtcblxuXHRcdFx0aWYoKGlzUHJpb3JpdHkgPSBpc1ByaW9yaXR5ID09PSB0cnVlKSl7XG5cdFx0XHRcdHJJQ1RpbWVvdXQgPSAzMztcblx0XHRcdH1cblxuXHRcdFx0aWYocnVubmluZyl7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0cnVubmluZyA9ICB0cnVlO1xuXG5cdFx0XHRkZWxheSA9IGdEZWxheSAtIChEYXRlLm5vdygpIC0gbGFzdFRpbWUpO1xuXG5cdFx0XHRpZihkZWxheSA8IDApe1xuXHRcdFx0XHRkZWxheSA9IDA7XG5cdFx0XHR9XG5cblx0XHRcdGlmKGlzUHJpb3JpdHkgfHwgZGVsYXkgPCA5KXtcblx0XHRcdFx0aWRsZUNhbGxiYWNrKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZXRUaW1lb3V0KGlkbGVDYWxsYmFjaywgZGVsYXkpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH07XG5cblx0Ly9iYXNlZCBvbiBodHRwOi8vbW9kZXJuamF2YXNjcmlwdC5ibG9nc3BvdC5kZS8yMDEzLzA4L2J1aWxkaW5nLWJldHRlci1kZWJvdW5jZS5odG1sXG5cdHZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0XHR2YXIgdGltZW91dCwgdGltZXN0YW1wO1xuXHRcdHZhciB3YWl0ID0gOTk7XG5cdFx0dmFyIHJ1biA9IGZ1bmN0aW9uKCl7XG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdGZ1bmMoKTtcblx0XHR9O1xuXHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuXG5cdFx0XHRpZiAobGFzdCA8IHdhaXQpIHtcblx0XHRcdFx0c2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0KHJlcXVlc3RJZGxlQ2FsbGJhY2sgfHwgcnVuKShydW4pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHR0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXG5cdFx0XHRpZiAoIXRpbWVvdXQpIHtcblx0XHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH07XG5cblx0dmFyIGxvYWRlciA9IChmdW5jdGlvbigpe1xuXHRcdHZhciBwcmVsb2FkRWxlbXMsIGlzQ29tcGxldGVkLCByZXNldFByZWxvYWRpbmdUaW1lciwgbG9hZE1vZGUsIHN0YXJ0ZWQ7XG5cblx0XHR2YXIgZUx2VywgZWx2SCwgZUx0b3AsIGVMbGVmdCwgZUxyaWdodCwgZUxib3R0b20sIGlzQm9keUhpZGRlbjtcblxuXHRcdHZhciByZWdJbWcgPSAvXmltZyQvaTtcblx0XHR2YXIgcmVnSWZyYW1lID0gL15pZnJhbWUkL2k7XG5cblx0XHR2YXIgc3VwcG9ydFNjcm9sbCA9ICgnb25zY3JvbGwnIGluIHdpbmRvdykgJiYgISgvKGdsZXxpbmcpYm90Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKTtcblxuXHRcdHZhciBzaHJpbmtFeHBhbmQgPSAwO1xuXHRcdHZhciBjdXJyZW50RXhwYW5kID0gMDtcblxuXHRcdHZhciBpc0xvYWRpbmcgPSAwO1xuXHRcdHZhciBsb3dSdW5zID0gLTE7XG5cblx0XHR2YXIgcmVzZXRQcmVsb2FkaW5nID0gZnVuY3Rpb24oZSl7XG5cdFx0XHRpc0xvYWRpbmctLTtcblx0XHRcdGlmKCFlIHx8IGlzTG9hZGluZyA8IDAgfHwgIWUudGFyZ2V0KXtcblx0XHRcdFx0aXNMb2FkaW5nID0gMDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGlzVmlzaWJsZSA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cdFx0XHRpZiAoaXNCb2R5SGlkZGVuID09IG51bGwpIHtcblx0XHRcdFx0aXNCb2R5SGlkZGVuID0gZ2V0Q1NTKGRvY3VtZW50LmJvZHksICd2aXNpYmlsaXR5JykgPT0gJ2hpZGRlbic7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBpc0JvZHlIaWRkZW4gfHwgIShnZXRDU1MoZWxlbS5wYXJlbnROb2RlLCAndmlzaWJpbGl0eScpID09ICdoaWRkZW4nICYmIGdldENTUyhlbGVtLCAndmlzaWJpbGl0eScpID09ICdoaWRkZW4nKTtcblx0XHR9O1xuXG5cdFx0dmFyIGlzTmVzdGVkVmlzaWJsZSA9IGZ1bmN0aW9uKGVsZW0sIGVsZW1FeHBhbmQpe1xuXHRcdFx0dmFyIG91dGVyUmVjdDtcblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtO1xuXHRcdFx0dmFyIHZpc2libGUgPSBpc1Zpc2libGUoZWxlbSk7XG5cblx0XHRcdGVMdG9wIC09IGVsZW1FeHBhbmQ7XG5cdFx0XHRlTGJvdHRvbSArPSBlbGVtRXhwYW5kO1xuXHRcdFx0ZUxsZWZ0IC09IGVsZW1FeHBhbmQ7XG5cdFx0XHRlTHJpZ2h0ICs9IGVsZW1FeHBhbmQ7XG5cblx0XHRcdHdoaWxlKHZpc2libGUgJiYgKHBhcmVudCA9IHBhcmVudC5vZmZzZXRQYXJlbnQpICYmIHBhcmVudCAhPSBkb2N1bWVudC5ib2R5ICYmIHBhcmVudCAhPSBkb2NFbGVtKXtcblx0XHRcdFx0dmlzaWJsZSA9ICgoZ2V0Q1NTKHBhcmVudCwgJ29wYWNpdHknKSB8fCAxKSA+IDApO1xuXG5cdFx0XHRcdGlmKHZpc2libGUgJiYgZ2V0Q1NTKHBhcmVudCwgJ292ZXJmbG93JykgIT0gJ3Zpc2libGUnKXtcblx0XHRcdFx0XHRvdXRlclJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdFx0dmlzaWJsZSA9IGVMcmlnaHQgPiBvdXRlclJlY3QubGVmdCAmJlxuXHRcdFx0XHRcdFx0ZUxsZWZ0IDwgb3V0ZXJSZWN0LnJpZ2h0ICYmXG5cdFx0XHRcdFx0XHRlTGJvdHRvbSA+IG91dGVyUmVjdC50b3AgLSAxICYmXG5cdFx0XHRcdFx0XHRlTHRvcCA8IG91dGVyUmVjdC5ib3R0b20gKyAxXG5cdFx0XHRcdFx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2aXNpYmxlO1xuXHRcdH07XG5cblx0XHR2YXIgY2hlY2tFbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGVMbGVuLCBpLCByZWN0LCBhdXRvTG9hZEVsZW0sIGxvYWRlZFNvbWV0aGluZywgZWxlbUV4cGFuZCwgZWxlbU5lZ2F0aXZlRXhwYW5kLCBlbGVtRXhwYW5kVmFsLFxuXHRcdFx0XHRiZWZvcmVFeHBhbmRWYWwsIGRlZmF1bHRFeHBhbmQsIHByZWxvYWRFeHBhbmQsIGhGYWM7XG5cdFx0XHR2YXIgbGF6eWxvYWRFbGVtcyA9IGxhenlzaXplcy5lbGVtZW50cztcblxuXHRcdFx0aWYoKGxvYWRNb2RlID0gbGF6eVNpemVzQ2ZnLmxvYWRNb2RlKSAmJiBpc0xvYWRpbmcgPCA4ICYmIChlTGxlbiA9IGxhenlsb2FkRWxlbXMubGVuZ3RoKSl7XG5cblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdFx0bG93UnVucysrO1xuXG5cdFx0XHRcdGZvcig7IGkgPCBlTGxlbjsgaSsrKXtcblxuXHRcdFx0XHRcdGlmKCFsYXp5bG9hZEVsZW1zW2ldIHx8IGxhenlsb2FkRWxlbXNbaV0uX2xhenlSYWNlKXtjb250aW51ZTt9XG5cblx0XHRcdFx0XHRpZighc3VwcG9ydFNjcm9sbCB8fCAobGF6eXNpemVzLnByZW1hdHVyZVVudmVpbCAmJiBsYXp5c2l6ZXMucHJlbWF0dXJlVW52ZWlsKGxhenlsb2FkRWxlbXNbaV0pKSl7dW52ZWlsRWxlbWVudChsYXp5bG9hZEVsZW1zW2ldKTtjb250aW51ZTt9XG5cblx0XHRcdFx0XHRpZighKGVsZW1FeHBhbmRWYWwgPSBsYXp5bG9hZEVsZW1zW2ldW19nZXRBdHRyaWJ1dGVdKCdkYXRhLWV4cGFuZCcpKSB8fCAhKGVsZW1FeHBhbmQgPSBlbGVtRXhwYW5kVmFsICogMSkpe1xuXHRcdFx0XHRcdFx0ZWxlbUV4cGFuZCA9IGN1cnJlbnRFeHBhbmQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFkZWZhdWx0RXhwYW5kKSB7XG5cdFx0XHRcdFx0XHRkZWZhdWx0RXhwYW5kID0gKCFsYXp5U2l6ZXNDZmcuZXhwYW5kIHx8IGxhenlTaXplc0NmZy5leHBhbmQgPCAxKSA/XG5cdFx0XHRcdFx0XHRcdGRvY0VsZW0uY2xpZW50SGVpZ2h0ID4gNTAwICYmIGRvY0VsZW0uY2xpZW50V2lkdGggPiA1MDAgPyA1MDAgOiAzNzAgOlxuXHRcdFx0XHRcdFx0XHRsYXp5U2l6ZXNDZmcuZXhwYW5kO1xuXG5cdFx0XHRcdFx0XHRsYXp5c2l6ZXMuX2RlZkV4ID0gZGVmYXVsdEV4cGFuZDtcblxuXHRcdFx0XHRcdFx0cHJlbG9hZEV4cGFuZCA9IGRlZmF1bHRFeHBhbmQgKiBsYXp5U2l6ZXNDZmcuZXhwRmFjdG9yO1xuXHRcdFx0XHRcdFx0aEZhYyA9IGxhenlTaXplc0NmZy5oRmFjO1xuXHRcdFx0XHRcdFx0aXNCb2R5SGlkZGVuID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0aWYoY3VycmVudEV4cGFuZCA8IHByZWxvYWRFeHBhbmQgJiYgaXNMb2FkaW5nIDwgMSAmJiBsb3dSdW5zID4gMiAmJiBsb2FkTW9kZSA+IDIgJiYgIWRvY3VtZW50LmhpZGRlbil7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRFeHBhbmQgPSBwcmVsb2FkRXhwYW5kO1xuXHRcdFx0XHRcdFx0XHRsb3dSdW5zID0gMDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihsb2FkTW9kZSA+IDEgJiYgbG93UnVucyA+IDEgJiYgaXNMb2FkaW5nIDwgNil7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRFeHBhbmQgPSBkZWZhdWx0RXhwYW5kO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudEV4cGFuZCA9IHNocmlua0V4cGFuZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihiZWZvcmVFeHBhbmRWYWwgIT09IGVsZW1FeHBhbmQpe1xuXHRcdFx0XHRcdFx0ZUx2VyA9IGlubmVyV2lkdGggKyAoZWxlbUV4cGFuZCAqIGhGYWMpO1xuXHRcdFx0XHRcdFx0ZWx2SCA9IGlubmVySGVpZ2h0ICsgZWxlbUV4cGFuZDtcblx0XHRcdFx0XHRcdGVsZW1OZWdhdGl2ZUV4cGFuZCA9IGVsZW1FeHBhbmQgKiAtMTtcblx0XHRcdFx0XHRcdGJlZm9yZUV4cGFuZFZhbCA9IGVsZW1FeHBhbmQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmVjdCA9IGxhenlsb2FkRWxlbXNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHRcdFx0XHRpZiAoKGVMYm90dG9tID0gcmVjdC5ib3R0b20pID49IGVsZW1OZWdhdGl2ZUV4cGFuZCAmJlxuXHRcdFx0XHRcdFx0KGVMdG9wID0gcmVjdC50b3ApIDw9IGVsdkggJiZcblx0XHRcdFx0XHRcdChlTHJpZ2h0ID0gcmVjdC5yaWdodCkgPj0gZWxlbU5lZ2F0aXZlRXhwYW5kICogaEZhYyAmJlxuXHRcdFx0XHRcdFx0KGVMbGVmdCA9IHJlY3QubGVmdCkgPD0gZUx2VyAmJlxuXHRcdFx0XHRcdFx0KGVMYm90dG9tIHx8IGVMcmlnaHQgfHwgZUxsZWZ0IHx8IGVMdG9wKSAmJlxuXHRcdFx0XHRcdFx0KGxhenlTaXplc0NmZy5sb2FkSGlkZGVuIHx8IGlzVmlzaWJsZShsYXp5bG9hZEVsZW1zW2ldKSkgJiZcblx0XHRcdFx0XHRcdCgoaXNDb21wbGV0ZWQgJiYgaXNMb2FkaW5nIDwgMyAmJiAhZWxlbUV4cGFuZFZhbCAmJiAobG9hZE1vZGUgPCAzIHx8IGxvd1J1bnMgPCA0KSkgfHwgaXNOZXN0ZWRWaXNpYmxlKGxhenlsb2FkRWxlbXNbaV0sIGVsZW1FeHBhbmQpKSl7XG5cdFx0XHRcdFx0XHR1bnZlaWxFbGVtZW50KGxhenlsb2FkRWxlbXNbaV0pO1xuXHRcdFx0XHRcdFx0bG9hZGVkU29tZXRoaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGlmKGlzTG9hZGluZyA+IDkpe2JyZWFrO31cblx0XHRcdFx0XHR9IGVsc2UgaWYoIWxvYWRlZFNvbWV0aGluZyAmJiBpc0NvbXBsZXRlZCAmJiAhYXV0b0xvYWRFbGVtICYmXG5cdFx0XHRcdFx0XHRpc0xvYWRpbmcgPCA0ICYmIGxvd1J1bnMgPCA0ICYmIGxvYWRNb2RlID4gMiAmJlxuXHRcdFx0XHRcdFx0KHByZWxvYWRFbGVtc1swXSB8fCBsYXp5U2l6ZXNDZmcucHJlbG9hZEFmdGVyTG9hZCkgJiZcblx0XHRcdFx0XHRcdChwcmVsb2FkRWxlbXNbMF0gfHwgKCFlbGVtRXhwYW5kVmFsICYmICgoZUxib3R0b20gfHwgZUxyaWdodCB8fCBlTGxlZnQgfHwgZUx0b3ApIHx8IGxhenlsb2FkRWxlbXNbaV1bX2dldEF0dHJpYnV0ZV0obGF6eVNpemVzQ2ZnLnNpemVzQXR0cikgIT0gJ2F1dG8nKSkpKXtcblx0XHRcdFx0XHRcdGF1dG9Mb2FkRWxlbSA9IHByZWxvYWRFbGVtc1swXSB8fCBsYXp5bG9hZEVsZW1zW2ldO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGF1dG9Mb2FkRWxlbSAmJiAhbG9hZGVkU29tZXRoaW5nKXtcblx0XHRcdFx0XHR1bnZlaWxFbGVtZW50KGF1dG9Mb2FkRWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIHRocm90dGxlZENoZWNrRWxlbWVudHMgPSB0aHJvdHRsZShjaGVja0VsZW1lbnRzKTtcblxuXHRcdHZhciBzd2l0Y2hMb2FkaW5nQ2xhc3MgPSBmdW5jdGlvbihlKXtcblx0XHRcdHZhciBlbGVtID0gZS50YXJnZXQ7XG5cblx0XHRcdGlmIChlbGVtLl9sYXp5Q2FjaGUpIHtcblx0XHRcdFx0ZGVsZXRlIGVsZW0uX2xhenlDYWNoZTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXNldFByZWxvYWRpbmcoZSk7XG5cdFx0XHRhZGRDbGFzcyhlbGVtLCBsYXp5U2l6ZXNDZmcubG9hZGVkQ2xhc3MpO1xuXHRcdFx0cmVtb3ZlQ2xhc3MoZWxlbSwgbGF6eVNpemVzQ2ZnLmxvYWRpbmdDbGFzcyk7XG5cdFx0XHRhZGRSZW1vdmVMb2FkRXZlbnRzKGVsZW0sIHJhZlN3aXRjaExvYWRpbmdDbGFzcyk7XG5cdFx0XHR0cmlnZ2VyRXZlbnQoZWxlbSwgJ2xhenlsb2FkZWQnKTtcblx0XHR9O1xuXHRcdHZhciByYWZlZFN3aXRjaExvYWRpbmdDbGFzcyA9IHJBRkl0KHN3aXRjaExvYWRpbmdDbGFzcyk7XG5cdFx0dmFyIHJhZlN3aXRjaExvYWRpbmdDbGFzcyA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0cmFmZWRTd2l0Y2hMb2FkaW5nQ2xhc3Moe3RhcmdldDogZS50YXJnZXR9KTtcblx0XHR9O1xuXG5cdFx0dmFyIGNoYW5nZUlmcmFtZVNyYyA9IGZ1bmN0aW9uKGVsZW0sIHNyYyl7XG5cdFx0XHR2YXIgbG9hZE1vZGUgPSBlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1sb2FkLW1vZGUnKSB8fCBsYXp5U2l6ZXNDZmcuaWZyYW1lTG9hZE1vZGU7XG5cblx0XHRcdC8vIGxvYWRNb2RlIGNhbiBiZSBhbHNvIGEgc3RyaW5nIVxuXHRcdFx0aWYgKGxvYWRNb2RlID09IDApIHtcblx0XHRcdFx0ZWxlbS5jb250ZW50V2luZG93LmxvY2F0aW9uLnJlcGxhY2Uoc3JjKTtcblx0XHRcdH0gZWxzZSBpZiAobG9hZE1vZGUgPT0gMSkge1xuXHRcdFx0XHRlbGVtLnNyYyA9IHNyYztcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGhhbmRsZVNvdXJjZXMgPSBmdW5jdGlvbihzb3VyY2Upe1xuXHRcdFx0dmFyIGN1c3RvbU1lZGlhO1xuXG5cdFx0XHR2YXIgc291cmNlU3Jjc2V0ID0gc291cmNlW19nZXRBdHRyaWJ1dGVdKGxhenlTaXplc0NmZy5zcmNzZXRBdHRyKTtcblxuXHRcdFx0aWYoIChjdXN0b21NZWRpYSA9IGxhenlTaXplc0NmZy5jdXN0b21NZWRpYVtzb3VyY2VbX2dldEF0dHJpYnV0ZV0oJ2RhdGEtbWVkaWEnKSB8fCBzb3VyY2VbX2dldEF0dHJpYnV0ZV0oJ21lZGlhJyldKSApe1xuXHRcdFx0XHRzb3VyY2Uuc2V0QXR0cmlidXRlKCdtZWRpYScsIGN1c3RvbU1lZGlhKTtcblx0XHRcdH1cblxuXHRcdFx0aWYoc291cmNlU3Jjc2V0KXtcblx0XHRcdFx0c291cmNlLnNldEF0dHJpYnV0ZSgnc3Jjc2V0Jywgc291cmNlU3Jjc2V0KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGxhenlVbnZlaWwgPSByQUZJdChmdW5jdGlvbiAoZWxlbSwgZGV0YWlsLCBpc0F1dG8sIHNpemVzLCBpc0ltZyl7XG5cdFx0XHR2YXIgc3JjLCBzcmNzZXQsIHBhcmVudCwgaXNQaWN0dXJlLCBldmVudCwgZmlyZXNMb2FkO1xuXG5cdFx0XHRpZighKGV2ZW50ID0gdHJpZ2dlckV2ZW50KGVsZW0sICdsYXp5YmVmb3JldW52ZWlsJywgZGV0YWlsKSkuZGVmYXVsdFByZXZlbnRlZCl7XG5cblx0XHRcdFx0aWYoc2l6ZXMpe1xuXHRcdFx0XHRcdGlmKGlzQXV0byl7XG5cdFx0XHRcdFx0XHRhZGRDbGFzcyhlbGVtLCBsYXp5U2l6ZXNDZmcuYXV0b3NpemVzQ2xhc3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSgnc2l6ZXMnLCBzaXplcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c3Jjc2V0ID0gZWxlbVtfZ2V0QXR0cmlidXRlXShsYXp5U2l6ZXNDZmcuc3Jjc2V0QXR0cik7XG5cdFx0XHRcdHNyYyA9IGVsZW1bX2dldEF0dHJpYnV0ZV0obGF6eVNpemVzQ2ZnLnNyY0F0dHIpO1xuXG5cdFx0XHRcdGlmKGlzSW1nKSB7XG5cdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHRcdGlzUGljdHVyZSA9IHBhcmVudCAmJiByZWdQaWN0dXJlLnRlc3QocGFyZW50Lm5vZGVOYW1lIHx8ICcnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZpcmVzTG9hZCA9IGRldGFpbC5maXJlc0xvYWQgfHwgKCgnc3JjJyBpbiBlbGVtKSAmJiAoc3Jjc2V0IHx8IHNyYyB8fCBpc1BpY3R1cmUpKTtcblxuXHRcdFx0XHRldmVudCA9IHt0YXJnZXQ6IGVsZW19O1xuXG5cdFx0XHRcdGFkZENsYXNzKGVsZW0sIGxhenlTaXplc0NmZy5sb2FkaW5nQ2xhc3MpO1xuXG5cdFx0XHRcdGlmKGZpcmVzTG9hZCl7XG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHJlc2V0UHJlbG9hZGluZ1RpbWVyKTtcblx0XHRcdFx0XHRyZXNldFByZWxvYWRpbmdUaW1lciA9IHNldFRpbWVvdXQocmVzZXRQcmVsb2FkaW5nLCAyNTAwKTtcblx0XHRcdFx0XHRhZGRSZW1vdmVMb2FkRXZlbnRzKGVsZW0sIHJhZlN3aXRjaExvYWRpbmdDbGFzcywgdHJ1ZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihpc1BpY3R1cmUpe1xuXHRcdFx0XHRcdGZvckVhY2guY2FsbChwYXJlbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NvdXJjZScpLCBoYW5kbGVTb3VyY2VzKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKHNyY3NldCl7XG5cdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsIHNyY3NldCk7XG5cdFx0XHRcdH0gZWxzZSBpZihzcmMgJiYgIWlzUGljdHVyZSl7XG5cdFx0XHRcdFx0aWYocmVnSWZyYW1lLnRlc3QoZWxlbS5ub2RlTmFtZSkpe1xuXHRcdFx0XHRcdFx0Y2hhbmdlSWZyYW1lU3JjKGVsZW0sIHNyYyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGVsZW0uc3JjID0gc3JjO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGlzSW1nICYmIChzcmNzZXQgfHwgaXNQaWN0dXJlKSl7XG5cdFx0XHRcdFx0dXBkYXRlUG9seWZpbGwoZWxlbSwge3NyYzogc3JjfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYoZWxlbS5fbGF6eVJhY2Upe1xuXHRcdFx0XHRkZWxldGUgZWxlbS5fbGF6eVJhY2U7XG5cdFx0XHR9XG5cdFx0XHRyZW1vdmVDbGFzcyhlbGVtLCBsYXp5U2l6ZXNDZmcubGF6eUNsYXNzKTtcblxuXHRcdFx0ckFGKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdC8vIFBhcnQgb2YgdGhpcyBjYW4gYmUgcmVtb3ZlZCBhcyBzb29uIGFzIHRoaXMgZml4IGlzIG9sZGVyOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03NzMxICgyMDE1KVxuXHRcdFx0XHR2YXIgaXNMb2FkZWQgPSBlbGVtLmNvbXBsZXRlICYmIGVsZW0ubmF0dXJhbFdpZHRoID4gMTtcblxuXHRcdFx0XHRpZiggIWZpcmVzTG9hZCB8fCBpc0xvYWRlZCl7XG5cdFx0XHRcdFx0aWYgKGlzTG9hZGVkKSB7XG5cdFx0XHRcdFx0XHRhZGRDbGFzcyhlbGVtLCBsYXp5U2l6ZXNDZmcuZmFzdExvYWRlZENsYXNzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3dpdGNoTG9hZGluZ0NsYXNzKGV2ZW50KTtcblx0XHRcdFx0XHRlbGVtLl9sYXp5Q2FjaGUgPSB0cnVlO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdGlmICgnX2xhenlDYWNoZScgaW4gZWxlbSkge1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgZWxlbS5fbGF6eUNhY2hlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIDkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChlbGVtLmxvYWRpbmcgPT0gJ2xhenknKSB7XG5cdFx0XHRcdFx0aXNMb2FkaW5nLS07XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRydWUpO1xuXHRcdH0pO1xuXG5cdFx0LyoqXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gZWxlbSB7IEVsZW1lbnQgfVxuXHRcdCAqL1xuXHRcdHZhciB1bnZlaWxFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW0pe1xuXHRcdFx0aWYgKGVsZW0uX2xhenlSYWNlKSB7cmV0dXJuO31cblx0XHRcdHZhciBkZXRhaWw7XG5cblx0XHRcdHZhciBpc0ltZyA9IHJlZ0ltZy50ZXN0KGVsZW0ubm9kZU5hbWUpO1xuXG5cdFx0XHQvL2FsbG93IHVzaW5nIHNpemVzPVwiYXV0b1wiLCBidXQgZG9uJ3QgdXNlLiBpdCdzIGludmFsaWQuIFVzZSBkYXRhLXNpemVzPVwiYXV0b1wiIG9yIGEgdmFsaWQgdmFsdWUgZm9yIHNpemVzIGluc3RlYWQgKGkuZS46IHNpemVzPVwiODB2d1wiKVxuXHRcdFx0dmFyIHNpemVzID0gaXNJbWcgJiYgKGVsZW1bX2dldEF0dHJpYnV0ZV0obGF6eVNpemVzQ2ZnLnNpemVzQXR0cikgfHwgZWxlbVtfZ2V0QXR0cmlidXRlXSgnc2l6ZXMnKSk7XG5cdFx0XHR2YXIgaXNBdXRvID0gc2l6ZXMgPT0gJ2F1dG8nO1xuXG5cdFx0XHRpZiggKGlzQXV0byB8fCAhaXNDb21wbGV0ZWQpICYmIGlzSW1nICYmIChlbGVtW19nZXRBdHRyaWJ1dGVdKCdzcmMnKSB8fCBlbGVtLnNyY3NldCkgJiYgIWVsZW0uY29tcGxldGUgJiYgIWhhc0NsYXNzKGVsZW0sIGxhenlTaXplc0NmZy5lcnJvckNsYXNzKSAmJiBoYXNDbGFzcyhlbGVtLCBsYXp5U2l6ZXNDZmcubGF6eUNsYXNzKSl7cmV0dXJuO31cblxuXHRcdFx0ZGV0YWlsID0gdHJpZ2dlckV2ZW50KGVsZW0sICdsYXp5dW52ZWlscmVhZCcpLmRldGFpbDtcblxuXHRcdFx0aWYoaXNBdXRvKXtcblx0XHRcdFx0IGF1dG9TaXplci51cGRhdGVFbGVtKGVsZW0sIHRydWUsIGVsZW0ub2Zmc2V0V2lkdGgpO1xuXHRcdFx0fVxuXG5cdFx0XHRlbGVtLl9sYXp5UmFjZSA9IHRydWU7XG5cdFx0XHRpc0xvYWRpbmcrKztcblxuXHRcdFx0bGF6eVVudmVpbChlbGVtLCBkZXRhaWwsIGlzQXV0bywgc2l6ZXMsIGlzSW1nKTtcblx0XHR9O1xuXG5cdFx0dmFyIGFmdGVyU2Nyb2xsID0gZGVib3VuY2UoZnVuY3Rpb24oKXtcblx0XHRcdGxhenlTaXplc0NmZy5sb2FkTW9kZSA9IDM7XG5cdFx0XHR0aHJvdHRsZWRDaGVja0VsZW1lbnRzKCk7XG5cdFx0fSk7XG5cblx0XHR2YXIgYWx0TG9hZG1vZGVTY3JvbGxMaXN0bmVyID0gZnVuY3Rpb24oKXtcblx0XHRcdGlmKGxhenlTaXplc0NmZy5sb2FkTW9kZSA9PSAzKXtcblx0XHRcdFx0bGF6eVNpemVzQ2ZnLmxvYWRNb2RlID0gMjtcblx0XHRcdH1cblx0XHRcdGFmdGVyU2Nyb2xsKCk7XG5cdFx0fTtcblxuXHRcdHZhciBvbmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFx0aWYoaXNDb21wbGV0ZWQpe3JldHVybjt9XG5cdFx0XHRpZihEYXRlLm5vdygpIC0gc3RhcnRlZCA8IDk5OSl7XG5cdFx0XHRcdHNldFRpbWVvdXQob25sb2FkLCA5OTkpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblxuXHRcdFx0aXNDb21wbGV0ZWQgPSB0cnVlO1xuXG5cdFx0XHRsYXp5U2l6ZXNDZmcubG9hZE1vZGUgPSAzO1xuXG5cdFx0XHR0aHJvdHRsZWRDaGVja0VsZW1lbnRzKCk7XG5cblx0XHRcdGFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGFsdExvYWRtb2RlU2Nyb2xsTGlzdG5lciwgdHJ1ZSk7XG5cdFx0fTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRfOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRzdGFydGVkID0gRGF0ZS5ub3coKTtcblxuXHRcdFx0XHRsYXp5c2l6ZXMuZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxhenlTaXplc0NmZy5sYXp5Q2xhc3MpO1xuXHRcdFx0XHRwcmVsb2FkRWxlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxhenlTaXplc0NmZy5sYXp5Q2xhc3MgKyAnICcgKyBsYXp5U2l6ZXNDZmcucHJlbG9hZENsYXNzKTtcblxuXHRcdFx0XHRhZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aHJvdHRsZWRDaGVja0VsZW1lbnRzLCB0cnVlKTtcblxuXHRcdFx0XHRhZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aHJvdHRsZWRDaGVja0VsZW1lbnRzLCB0cnVlKTtcblxuXHRcdFx0XHRhZGRFdmVudExpc3RlbmVyKCdwYWdlc2hvdycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0aWYgKGUucGVyc2lzdGVkKSB7XG5cdFx0XHRcdFx0XHR2YXIgbG9hZGluZ0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBsYXp5U2l6ZXNDZmcubG9hZGluZ0NsYXNzKTtcblxuXHRcdFx0XHRcdFx0aWYgKGxvYWRpbmdFbGVtZW50cy5sZW5ndGggJiYgbG9hZGluZ0VsZW1lbnRzLmZvckVhY2gpIHtcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRsb2FkaW5nRWxlbWVudHMuZm9yRWFjaCggZnVuY3Rpb24gKGltZykge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGltZy5jb21wbGV0ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR1bnZlaWxFbGVtZW50KGltZyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIpe1xuXHRcdFx0XHRcdG5ldyBNdXRhdGlvbk9ic2VydmVyKCB0aHJvdHRsZWRDaGVja0VsZW1lbnRzICkub2JzZXJ2ZSggZG9jRWxlbSwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSwgYXR0cmlidXRlczogdHJ1ZX0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkb2NFbGVtW19hZGRFdmVudExpc3RlbmVyXSgnRE9NTm9kZUluc2VydGVkJywgdGhyb3R0bGVkQ2hlY2tFbGVtZW50cywgdHJ1ZSk7XG5cdFx0XHRcdFx0ZG9jRWxlbVtfYWRkRXZlbnRMaXN0ZW5lcl0oJ0RPTUF0dHJNb2RpZmllZCcsIHRocm90dGxlZENoZWNrRWxlbWVudHMsIHRydWUpO1xuXHRcdFx0XHRcdHNldEludGVydmFsKHRocm90dGxlZENoZWNrRWxlbWVudHMsIDk5OSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhyb3R0bGVkQ2hlY2tFbGVtZW50cywgdHJ1ZSk7XG5cblx0XHRcdFx0Ly8sICdmdWxsc2NyZWVuY2hhbmdlJ1xuXHRcdFx0XHRbJ2ZvY3VzJywgJ21vdXNlb3ZlcicsICdjbGljaycsICdsb2FkJywgJ3RyYW5zaXRpb25lbmQnLCAnYW5pbWF0aW9uZW5kJ10uZm9yRWFjaChmdW5jdGlvbihuYW1lKXtcblx0XHRcdFx0XHRkb2N1bWVudFtfYWRkRXZlbnRMaXN0ZW5lcl0obmFtZSwgdGhyb3R0bGVkQ2hlY2tFbGVtZW50cywgdHJ1ZSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmKCgvZCR8XmMvLnRlc3QoZG9jdW1lbnQucmVhZHlTdGF0ZSkpKXtcblx0XHRcdFx0XHRvbmxvYWQoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25sb2FkKTtcblx0XHRcdFx0XHRkb2N1bWVudFtfYWRkRXZlbnRMaXN0ZW5lcl0oJ0RPTUNvbnRlbnRMb2FkZWQnLCB0aHJvdHRsZWRDaGVja0VsZW1lbnRzKTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KG9ubG9hZCwgMjAwMDApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYobGF6eXNpemVzLmVsZW1lbnRzLmxlbmd0aCl7XG5cdFx0XHRcdFx0Y2hlY2tFbGVtZW50cygpO1xuXHRcdFx0XHRcdHJBRi5fbHNGbHVzaCgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm90dGxlZENoZWNrRWxlbWVudHMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGNoZWNrRWxlbXM6IHRocm90dGxlZENoZWNrRWxlbWVudHMsXG5cdFx0XHR1bnZlaWw6IHVudmVpbEVsZW1lbnQsXG5cdFx0XHRfYUxTTDogYWx0TG9hZG1vZGVTY3JvbGxMaXN0bmVyLFxuXHRcdH07XG5cdH0pKCk7XG5cblxuXHR2YXIgYXV0b1NpemVyID0gKGZ1bmN0aW9uKCl7XG5cdFx0dmFyIGF1dG9zaXplc0VsZW1zO1xuXG5cdFx0dmFyIHNpemVFbGVtZW50ID0gckFGSXQoZnVuY3Rpb24oZWxlbSwgcGFyZW50LCBldmVudCwgd2lkdGgpe1xuXHRcdFx0dmFyIHNvdXJjZXMsIGksIGxlbjtcblx0XHRcdGVsZW0uX2xhenlzaXplc1dpZHRoID0gd2lkdGg7XG5cdFx0XHR3aWR0aCArPSAncHgnO1xuXG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSgnc2l6ZXMnLCB3aWR0aCk7XG5cblx0XHRcdGlmKHJlZ1BpY3R1cmUudGVzdChwYXJlbnQubm9kZU5hbWUgfHwgJycpKXtcblx0XHRcdFx0c291cmNlcyA9IHBhcmVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc291cmNlJyk7XG5cdFx0XHRcdGZvcihpID0gMCwgbGVuID0gc291cmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG5cdFx0XHRcdFx0c291cmNlc1tpXS5zZXRBdHRyaWJ1dGUoJ3NpemVzJywgd2lkdGgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmKCFldmVudC5kZXRhaWwuZGF0YUF0dHIpe1xuXHRcdFx0XHR1cGRhdGVQb2x5ZmlsbChlbGVtLCBldmVudC5kZXRhaWwpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8qKlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGVsZW0ge0VsZW1lbnR9XG5cdFx0ICogQHBhcmFtIGRhdGFBdHRyXG5cdFx0ICogQHBhcmFtIFt3aWR0aF0geyBudW1iZXIgfVxuXHRcdCAqL1xuXHRcdHZhciBnZXRTaXplRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtLCBkYXRhQXR0ciwgd2lkdGgpe1xuXHRcdFx0dmFyIGV2ZW50O1xuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblxuXHRcdFx0aWYocGFyZW50KXtcblx0XHRcdFx0d2lkdGggPSBnZXRXaWR0aChlbGVtLCBwYXJlbnQsIHdpZHRoKTtcblx0XHRcdFx0ZXZlbnQgPSB0cmlnZ2VyRXZlbnQoZWxlbSwgJ2xhenliZWZvcmVzaXplcycsIHt3aWR0aDogd2lkdGgsIGRhdGFBdHRyOiAhIWRhdGFBdHRyfSk7XG5cblx0XHRcdFx0aWYoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpe1xuXHRcdFx0XHRcdHdpZHRoID0gZXZlbnQuZGV0YWlsLndpZHRoO1xuXG5cdFx0XHRcdFx0aWYod2lkdGggJiYgd2lkdGggIT09IGVsZW0uX2xhenlzaXplc1dpZHRoKXtcblx0XHRcdFx0XHRcdHNpemVFbGVtZW50KGVsZW0sIHBhcmVudCwgZXZlbnQsIHdpZHRoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIHVwZGF0ZUVsZW1lbnRzU2l6ZXMgPSBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIGk7XG5cdFx0XHR2YXIgbGVuID0gYXV0b3NpemVzRWxlbXMubGVuZ3RoO1xuXHRcdFx0aWYobGVuKXtcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdFx0Zm9yKDsgaSA8IGxlbjsgaSsrKXtcblx0XHRcdFx0XHRnZXRTaXplRWxlbWVudChhdXRvc2l6ZXNFbGVtc1tpXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGRlYm91bmNlZFVwZGF0ZUVsZW1lbnRzU2l6ZXMgPSBkZWJvdW5jZSh1cGRhdGVFbGVtZW50c1NpemVzKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRfOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRhdXRvc2l6ZXNFbGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobGF6eVNpemVzQ2ZnLmF1dG9zaXplc0NsYXNzKTtcblx0XHRcdFx0YWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVib3VuY2VkVXBkYXRlRWxlbWVudHNTaXplcyk7XG5cdFx0XHR9LFxuXHRcdFx0Y2hlY2tFbGVtczogZGVib3VuY2VkVXBkYXRlRWxlbWVudHNTaXplcyxcblx0XHRcdHVwZGF0ZUVsZW06IGdldFNpemVFbGVtZW50XG5cdFx0fTtcblx0fSkoKTtcblxuXHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCl7XG5cdFx0aWYoIWluaXQuaSAmJiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXtcblx0XHRcdGluaXQuaSA9IHRydWU7XG5cdFx0XHRhdXRvU2l6ZXIuXygpO1xuXHRcdFx0bG9hZGVyLl8oKTtcblx0XHR9XG5cdH07XG5cblx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdGlmKGxhenlTaXplc0NmZy5pbml0KXtcblx0XHRcdGluaXQoKTtcblx0XHR9XG5cdH0pO1xuXG5cdGxhenlzaXplcyA9IHtcblx0XHQvKipcblx0XHQgKiBAdHlwZSB7IExhenlTaXplc0NvbmZpZ1BhcnRpYWwgfVxuXHRcdCAqL1xuXHRcdGNmZzogbGF6eVNpemVzQ2ZnLFxuXHRcdGF1dG9TaXplcjogYXV0b1NpemVyLFxuXHRcdGxvYWRlcjogbG9hZGVyLFxuXHRcdGluaXQ6IGluaXQsXG5cdFx0dVA6IHVwZGF0ZVBvbHlmaWxsLFxuXHRcdGFDOiBhZGRDbGFzcyxcblx0XHRyQzogcmVtb3ZlQ2xhc3MsXG5cdFx0aEM6IGhhc0NsYXNzLFxuXHRcdGZpcmU6IHRyaWdnZXJFdmVudCxcblx0XHRnVzogZ2V0V2lkdGgsXG5cdFx0ckFGOiByQUYsXG5cdH07XG5cblx0cmV0dXJuIGxhenlzaXplcztcbn1cbikpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdywgZmFjdG9yeSkge1xuXHR2YXIgZ2xvYmFsSW5zdGFsbCA9IGZ1bmN0aW9uKCl7XG5cdFx0ZmFjdG9yeSh3aW5kb3cubGF6eVNpemVzKTtcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbGF6eXVudmVpbHJlYWQnLCBnbG9iYWxJbnN0YWxsLCB0cnVlKTtcblx0fTtcblxuXHRmYWN0b3J5ID0gZmFjdG9yeS5iaW5kKG51bGwsIHdpbmRvdywgd2luZG93LmRvY3VtZW50KTtcblxuXHRpZih0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKXtcblx0XHRmYWN0b3J5KHJlcXVpcmUoJ2xhenlzaXplcycpKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShbJ2xhenlzaXplcyddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmKHdpbmRvdy5sYXp5U2l6ZXMpIHtcblx0XHRnbG9iYWxJbnN0YWxsKCk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xhenl1bnZlaWxyZWFkJywgZ2xvYmFsSW5zdGFsbCwgdHJ1ZSk7XG5cdH1cbn0od2luZG93LCBmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCBsYXp5U2l6ZXMpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZighd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3JldHVybjt9XG5cblx0dmFyIGxhenlTaXplc0NmZyA9IGxhenlTaXplcy5jZmc7XG5cdHZhciByZWdXaGl0ZSA9IC9cXHMrL2c7XG5cdHZhciByZWdTcGxpdFNldCA9IC9cXHMqXFx8XFxzK3xcXHMrXFx8XFxzKi9nO1xuXHR2YXIgcmVnU291cmNlID0gL14oLis/KSg/OlxccytcXFtcXHMqKC4rPylcXHMqXFxdKSg/OlxccytcXFtcXHMqKC4rPylcXHMqXFxdKT8kLztcblx0dmFyIHJlZ1R5cGUgPSAvXlxccypcXCgqXFxzKnR5cGVcXHMqOlxccyooLis/KVxccypcXCkqXFxzKiQvO1xuXHR2YXIgcmVnQmdVcmxFc2NhcGUgPSAvXFwofFxcKXwnLztcblx0dmFyIGFsbG93ZWRCYWNrZ3JvdW5kU2l6ZSA9IHtjb250YWluOiAxLCBjb3ZlcjogMX07XG5cdHZhciBwcm94eVdpZHRoID0gZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIHdpZHRoID0gbGF6eVNpemVzLmdXKGVsZW0sIGVsZW0ucGFyZW50Tm9kZSk7XG5cblx0XHRpZighZWxlbS5fbGF6eXNpemVzV2lkdGggfHwgd2lkdGggPiBlbGVtLl9sYXp5c2l6ZXNXaWR0aCl7XG5cdFx0XHRlbGVtLl9sYXp5c2l6ZXNXaWR0aCA9IHdpZHRoO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbS5fbGF6eXNpemVzV2lkdGg7XG5cdH07XG5cdHZhciBnZXRCZ1NpemUgPSBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgYmdTaXplO1xuXG5cdFx0YmdTaXplID0gKGdldENvbXB1dGVkU3R5bGUoZWxlbSkgfHwge2dldFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uKCl7fX0pLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQtc2l6ZScpO1xuXG5cdFx0aWYoIWFsbG93ZWRCYWNrZ3JvdW5kU2l6ZVtiZ1NpemVdICYmIGFsbG93ZWRCYWNrZ3JvdW5kU2l6ZVtlbGVtLnN0eWxlLmJhY2tncm91bmRTaXplXSl7XG5cdFx0XHRiZ1NpemUgPSBlbGVtLnN0eWxlLmJhY2tncm91bmRTaXplO1xuXHRcdH1cblxuXHRcdHJldHVybiBiZ1NpemU7XG5cdH07XG5cdHZhciBzZXRUeXBlT3JNZWRpYSA9IGZ1bmN0aW9uKHNvdXJjZSwgbWF0Y2gpe1xuXHRcdGlmKG1hdGNoKXtcblx0XHRcdHZhciB0eXBlTWF0Y2ggPSBtYXRjaC5tYXRjaChyZWdUeXBlKTtcblx0XHRcdGlmKHR5cGVNYXRjaCAmJiB0eXBlTWF0Y2hbMV0pe1xuXHRcdFx0XHRzb3VyY2Uuc2V0QXR0cmlidXRlKCd0eXBlJywgdHlwZU1hdGNoWzFdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNvdXJjZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbGF6eVNpemVzQ2ZnLmN1c3RvbU1lZGlhW21hdGNoXSB8fCBtYXRjaCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHR2YXIgY3JlYXRlUGljdHVyZSA9IGZ1bmN0aW9uKHNldHMsIGVsZW0sIGltZyl7XG5cdFx0dmFyIHBpY3R1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwaWN0dXJlJyk7XG5cdFx0dmFyIHNpemVzID0gZWxlbS5nZXRBdHRyaWJ1dGUobGF6eVNpemVzQ2ZnLnNpemVzQXR0cik7XG5cdFx0dmFyIHJhdGlvID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmF0aW8nKTtcblx0XHR2YXIgb3B0aW11bXggPSBlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1vcHRpbXVteCcpO1xuXG5cdFx0aWYoZWxlbS5fbGF6eWJnc2V0ICYmIGVsZW0uX2xhenliZ3NldC5wYXJlbnROb2RlID09IGVsZW0pe1xuXHRcdFx0ZWxlbS5yZW1vdmVDaGlsZChlbGVtLl9sYXp5YmdzZXQpO1xuXHRcdH1cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbWcsICdfbGF6eWJnc2V0Jywge1xuXHRcdFx0dmFsdWU6IGVsZW0sXG5cdFx0XHR3cml0YWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtLCAnX2xhenliZ3NldCcsIHtcblx0XHRcdHZhbHVlOiBwaWN0dXJlLFxuXHRcdFx0d3JpdGFibGU6IHRydWVcblx0XHR9KTtcblxuXHRcdHNldHMgPSBzZXRzLnJlcGxhY2UocmVnV2hpdGUsICcgJykuc3BsaXQocmVnU3BsaXRTZXQpO1xuXG5cdFx0cGljdHVyZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGltZy5jbGFzc05hbWUgPSBsYXp5U2l6ZXNDZmcubGF6eUNsYXNzO1xuXG5cdFx0aWYoc2V0cy5sZW5ndGggPT0gMSAmJiAhc2l6ZXMpe1xuXHRcdFx0c2l6ZXMgPSAnYXV0byc7XG5cdFx0fVxuXG5cdFx0c2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHNldCl7XG5cdFx0XHR2YXIgbWF0Y2g7XG5cdFx0XHR2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG5cblx0XHRcdGlmKHNpemVzICYmIHNpemVzICE9ICdhdXRvJyl7XG5cdFx0XHRcdHNvdXJjZS5zZXRBdHRyaWJ1dGUoJ3NpemVzJywgc2l6ZXMpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZigobWF0Y2ggPSBzZXQubWF0Y2gocmVnU291cmNlKSkpe1xuXHRcdFx0XHRzb3VyY2Uuc2V0QXR0cmlidXRlKGxhenlTaXplc0NmZy5zcmNzZXRBdHRyLCBtYXRjaFsxXSk7XG5cblx0XHRcdFx0c2V0VHlwZU9yTWVkaWEoc291cmNlLCBtYXRjaFsyXSk7XG5cdFx0XHRcdHNldFR5cGVPck1lZGlhKHNvdXJjZSwgbWF0Y2hbM10pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c291cmNlLnNldEF0dHJpYnV0ZShsYXp5U2l6ZXNDZmcuc3Jjc2V0QXR0ciwgc2V0KTtcblx0XHRcdH1cblxuXHRcdFx0cGljdHVyZS5hcHBlbmRDaGlsZChzb3VyY2UpO1xuXHRcdH0pO1xuXG5cdFx0aWYoc2l6ZXMpe1xuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZShsYXp5U2l6ZXNDZmcuc2l6ZXNBdHRyLCBzaXplcyk7XG5cdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZShsYXp5U2l6ZXNDZmcuc2l6ZXNBdHRyKTtcblx0XHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCdzaXplcycpO1xuXHRcdH1cblx0XHRpZihvcHRpbXVteCl7XG5cdFx0XHRpbWcuc2V0QXR0cmlidXRlKCdkYXRhLW9wdGltdW14Jywgb3B0aW11bXgpO1xuXHRcdH1cblx0XHRpZihyYXRpbykge1xuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZSgnZGF0YS1yYXRpbycsIHJhdGlvKTtcblx0XHR9XG5cblx0XHRwaWN0dXJlLmFwcGVuZENoaWxkKGltZyk7XG5cblx0XHRlbGVtLmFwcGVuZENoaWxkKHBpY3R1cmUpO1xuXHR9O1xuXG5cdHZhciBwcm94eUxvYWQgPSBmdW5jdGlvbihlKXtcblx0XHRpZighZS50YXJnZXQuX2xhenliZ3NldCl7cmV0dXJuO31cblxuXHRcdHZhciBpbWFnZSA9IGUudGFyZ2V0O1xuXHRcdHZhciBlbGVtID0gaW1hZ2UuX2xhenliZ3NldDtcblx0XHR2YXIgYmcgPSBpbWFnZS5jdXJyZW50U3JjIHx8IGltYWdlLnNyYztcblxuXG5cdFx0aWYoYmcpe1xuXHRcdFx0dmFyIHVzZVNyYyA9IHJlZ0JnVXJsRXNjYXBlLnRlc3QoYmcpID8gSlNPTi5zdHJpbmdpZnkoYmcpIDogYmc7XG5cdFx0XHR2YXIgZXZlbnQgPSBsYXp5U2l6ZXMuZmlyZShlbGVtLCAnYmdzZXRwcm94eScsIHtcblx0XHRcdFx0c3JjOiBiZyxcblx0XHRcdFx0dXNlU3JjOiB1c2VTcmMsXG5cdFx0XHRcdGZ1bGxTcmM6IG51bGwsXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpe1xuXHRcdFx0XHRlbGVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGV2ZW50LmRldGFpbC5mdWxsU3JjIHx8ICd1cmwoJyArIGV2ZW50LmRldGFpbC51c2VTcmMgKyAnKSc7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYoaW1hZ2UuX2xhenliZ3NldExvYWRpbmcpe1xuXHRcdFx0bGF6eVNpemVzLmZpcmUoZWxlbSwgJ19sYXp5bG9hZGVkJywge30sIGZhbHNlLCB0cnVlKTtcblx0XHRcdGRlbGV0ZSBpbWFnZS5fbGF6eWJnc2V0TG9hZGluZztcblx0XHR9XG5cdH07XG5cblx0YWRkRXZlbnRMaXN0ZW5lcignbGF6eWJlZm9yZXVudmVpbCcsIGZ1bmN0aW9uKGUpe1xuXHRcdHZhciBzZXQsIGltYWdlLCBlbGVtO1xuXG5cdFx0aWYoZS5kZWZhdWx0UHJldmVudGVkIHx8ICEoc2V0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWJnc2V0JykpKXtyZXR1cm47fVxuXG5cdFx0ZWxlbSA9IGUudGFyZ2V0O1xuXHRcdGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cblx0XHRpbWFnZS5hbHQgPSAnJztcblxuXHRcdGltYWdlLl9sYXp5YmdzZXRMb2FkaW5nID0gdHJ1ZTtcblx0XHRlLmRldGFpbC5maXJlc0xvYWQgPSB0cnVlO1xuXG5cdFx0Y3JlYXRlUGljdHVyZShzZXQsIGVsZW0sIGltYWdlKTtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdGxhenlTaXplcy5sb2FkZXIudW52ZWlsKGltYWdlKTtcblxuXHRcdFx0bGF6eVNpemVzLnJBRihmdW5jdGlvbigpe1xuXHRcdFx0XHRsYXp5U2l6ZXMuZmlyZShpbWFnZSwgJ19sYXp5bG9hZGVkJywge30sIHRydWUsIHRydWUpO1xuXHRcdFx0XHRpZihpbWFnZS5jb21wbGV0ZSkge1xuXHRcdFx0XHRcdHByb3h5TG9hZCh7dGFyZ2V0OiBpbWFnZX0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9KTtcblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcHJveHlMb2FkLCB0cnVlKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbGF6eWJlZm9yZXNpemVzJywgZnVuY3Rpb24oZSl7XG5cdFx0aWYoZS5kZXRhaWwuaW5zdGFuY2UgIT0gbGF6eVNpemVzKXtyZXR1cm47fVxuXHRcdGlmKGUudGFyZ2V0Ll9sYXp5YmdzZXQgJiYgZS5kZXRhaWwuZGF0YUF0dHIpe1xuXHRcdFx0dmFyIGVsZW0gPSBlLnRhcmdldC5fbGF6eWJnc2V0O1xuXHRcdFx0dmFyIGJnU2l6ZSA9IGdldEJnU2l6ZShlbGVtKTtcblxuXHRcdFx0aWYoYWxsb3dlZEJhY2tncm91bmRTaXplW2JnU2l6ZV0pe1xuXHRcdFx0XHRlLnRhcmdldC5fbGF6eXNpemVzUGFyZW50Rml0ID0gYmdTaXplO1xuXG5cdFx0XHRcdGxhenlTaXplcy5yQUYoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRlLnRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyZW50LWZpdCcsIGJnU2l6ZSk7XG5cdFx0XHRcdFx0aWYoZS50YXJnZXQuX2xhenlzaXplc1BhcmVudEZpdCl7XG5cdFx0XHRcdFx0XHRkZWxldGUgZS50YXJnZXQuX2xhenlzaXplc1BhcmVudEZpdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSwgdHJ1ZSk7XG5cblx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xhenliZWZvcmVzaXplcycsIGZ1bmN0aW9uKGUpe1xuXHRcdGlmKGUuZGVmYXVsdFByZXZlbnRlZCB8fCAhZS50YXJnZXQuX2xhenliZ3NldCB8fCBlLmRldGFpbC5pbnN0YW5jZSAhPSBsYXp5U2l6ZXMpe3JldHVybjt9XG5cdFx0ZS5kZXRhaWwud2lkdGggPSBwcm94eVdpZHRoKGUudGFyZ2V0Ll9sYXp5YmdzZXQpO1xuXHR9KTtcbn0pKTtcbiIsIihmdW5jdGlvbih3aW5kb3csIGZhY3RvcnkpIHtcblx0aWYoIXdpbmRvdykge3JldHVybjt9XG5cdHZhciBnbG9iYWxJbnN0YWxsID0gZnVuY3Rpb24oKXtcblx0XHRmYWN0b3J5KHdpbmRvdy5sYXp5U2l6ZXMpO1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsYXp5dW52ZWlscmVhZCcsIGdsb2JhbEluc3RhbGwsIHRydWUpO1xuXHR9O1xuXG5cdGZhY3RvcnkgPSBmYWN0b3J5LmJpbmQobnVsbCwgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpO1xuXG5cdGlmKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpe1xuXHRcdGZhY3RvcnkocmVxdWlyZSgnbGF6eXNpemVzJykpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKFsnbGF6eXNpemVzJ10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYod2luZG93LmxhenlTaXplcykge1xuXHRcdGdsb2JhbEluc3RhbGwoKTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbGF6eXVudmVpbHJlYWQnLCBnbG9iYWxJbnN0YWxsLCB0cnVlKTtcblx0fVxufSh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID9cblx0d2luZG93IDogMCwgZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgbGF6eVNpemVzKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRpZighd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3JldHVybjt9XG5cblx0dmFyIHJlZ0Rlc2NyaXB0b3JzID0gL1xccysoXFxkKykod3xoKVxccysoXFxkKykod3xoKS87XG5cdHZhciByZWdDc3NGaXQgPSAvcGFyZW50LWZpdFtcIiddKlxccyo6XFxzKltcIiddKihjb250YWlufGNvdmVyfHdpZHRoKS87XG5cdHZhciByZWdDc3NPYmplY3QgPSAvcGFyZW50LWNvbnRhaW5lcltcIiddKlxccyo6XFxzKltcIiddKiguKz8pKD89KFxcc3wkfCx8J3xcInw7KSkvO1xuXHR2YXIgcmVnUGljdHVyZSA9IC9ecGljdHVyZSQvaTtcblx0dmFyIGNmZyA9IGxhenlTaXplcy5jZmc7XG5cblx0dmFyIGdldENTUyA9IGZ1bmN0aW9uIChlbGVtKXtcblx0XHRyZXR1cm4gKGdldENvbXB1dGVkU3R5bGUoZWxlbSwgbnVsbCkgfHwge30pO1xuXHR9O1xuXG5cdHZhciBwYXJlbnRGaXQgPSB7XG5cblx0XHRnZXRQYXJlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudFNlbCl7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbWVudDtcblx0XHRcdHZhciBwYXJlbnROb2RlID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXG5cdFx0XHRpZigoIXBhcmVudFNlbCB8fCBwYXJlbnRTZWwgPT0gJ3ByZXYnKSAmJiBwYXJlbnROb2RlICYmIHJlZ1BpY3R1cmUudGVzdChwYXJlbnROb2RlLm5vZGVOYW1lIHx8ICcnKSl7XG5cdFx0XHRcdHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdGlmKHBhcmVudFNlbCAhPSAnc2VsZicpe1xuXHRcdFx0XHRpZihwYXJlbnRTZWwgPT0gJ3ByZXYnKXtcblx0XHRcdFx0XHRwYXJlbnQgPSBlbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cdFx0XHRcdH0gZWxzZSBpZihwYXJlbnRTZWwgJiYgKHBhcmVudE5vZGUuY2xvc2VzdCB8fCB3aW5kb3cualF1ZXJ5KSl7XG5cdFx0XHRcdFx0cGFyZW50ID0gKHBhcmVudE5vZGUuY2xvc2VzdCA/XG5cdFx0XHRcdFx0XHRcdHBhcmVudE5vZGUuY2xvc2VzdChwYXJlbnRTZWwpIDpcblx0XHRcdFx0XHRcdFx0alF1ZXJ5KHBhcmVudE5vZGUpLmNsb3Nlc3QocGFyZW50U2VsKVswXSkgfHxcblx0XHRcdFx0XHRcdHBhcmVudE5vZGVcblx0XHRcdFx0XHQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cGFyZW50ID0gcGFyZW50Tm9kZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcGFyZW50O1xuXHRcdH0sXG5cblx0XHRnZXRGaXQ6IGZ1bmN0aW9uKGVsZW1lbnQpe1xuXHRcdFx0dmFyIHRtcE1hdGNoLCBwYXJlbnRPYmo7XG5cdFx0XHR2YXIgY3NzID0gZ2V0Q1NTKGVsZW1lbnQpO1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3MuY29udGVudCB8fCBjc3MuZm9udEZhbWlseTtcblx0XHRcdHZhciBvYmogPSB7XG5cdFx0XHRcdGZpdDogZWxlbWVudC5fbGF6eXNpemVzUGFyZW50Rml0IHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudC1maXQnKVxuXHRcdFx0fTtcblxuXHRcdFx0aWYoIW9iai5maXQgJiYgY29udGVudCAmJiAodG1wTWF0Y2ggPSBjb250ZW50Lm1hdGNoKHJlZ0Nzc0ZpdCkpKXtcblx0XHRcdFx0b2JqLmZpdCA9IHRtcE1hdGNoWzFdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihvYmouZml0KXtcblx0XHRcdFx0cGFyZW50T2JqID0gZWxlbWVudC5fbGF6eXNpemVzUGFyZW50Q29udGFpbmVyIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudC1jb250YWluZXInKTtcblxuXHRcdFx0XHRpZighcGFyZW50T2JqICYmIGNvbnRlbnQgJiYgKHRtcE1hdGNoID0gY29udGVudC5tYXRjaChyZWdDc3NPYmplY3QpKSl7XG5cdFx0XHRcdFx0cGFyZW50T2JqID0gdG1wTWF0Y2hbMV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRvYmoucGFyZW50ID0gcGFyZW50Rml0LmdldFBhcmVudChlbGVtZW50LCBwYXJlbnRPYmopO1xuXG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9iai5maXQgPSBjc3Mub2JqZWN0Rml0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH0sXG5cblx0XHRnZXRJbWFnZVJhdGlvOiBmdW5jdGlvbihlbGVtZW50KXtcblx0XHRcdHZhciBpLCBzcmNzZXQsIG1lZGlhLCByYXRpbywgbWF0Y2gsIHdpZHRoLCBoZWlnaHQ7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXHRcdFx0dmFyIGVsZW1lbnRzID0gcGFyZW50ICYmIHJlZ1BpY3R1cmUudGVzdChwYXJlbnQubm9kZU5hbWUgfHwgJycpID9cblx0XHRcdFx0XHRwYXJlbnQucXVlcnlTZWxlY3RvckFsbCgnc291cmNlLCBpbWcnKSA6XG5cdFx0XHRcdFx0W2VsZW1lbnRdXG5cdFx0XHRcdDtcblxuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudHNbaV07XG5cdFx0XHRcdHNyY3NldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGNmZy5zcmNzZXRBdHRyKSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3Jjc2V0JykgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGZzcmNzZXQnKSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1yaXNyY3NldCcpIHx8ICcnO1xuXHRcdFx0XHRtZWRpYSA9IGVsZW1lbnQuX2xzTWVkaWEgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ21lZGlhJyk7XG5cdFx0XHRcdG1lZGlhID0gY2ZnLmN1c3RvbU1lZGlhW2VsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1lZGlhJykgfHwgbWVkaWFdIHx8IG1lZGlhO1xuXG5cdFx0XHRcdGlmKHNyY3NldCAmJiAoIW1lZGlhIHx8ICh3aW5kb3cubWF0Y2hNZWRpYSAmJiBtYXRjaE1lZGlhKG1lZGlhKSB8fCB7fSkubWF0Y2hlcyApKXtcblx0XHRcdFx0XHRyYXRpbyA9IHBhcnNlRmxvYXQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXNwZWN0cmF0aW8nKSk7XG5cblx0XHRcdFx0XHRpZiAoIXJhdGlvKSB7XG5cdFx0XHRcdFx0XHRtYXRjaCA9IHNyY3NldC5tYXRjaChyZWdEZXNjcmlwdG9ycyk7XG5cblx0XHRcdFx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRpZihtYXRjaFsyXSA9PSAndycpe1xuXHRcdFx0XHRcdFx0XHRcdHdpZHRoID0gbWF0Y2hbMV07XG5cdFx0XHRcdFx0XHRcdFx0aGVpZ2h0ID0gbWF0Y2hbM107XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0d2lkdGggPSBtYXRjaFszXTtcblx0XHRcdFx0XHRcdFx0XHRoZWlnaHQgPSBtYXRjaFsxXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0d2lkdGggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnd2lkdGgnKTtcblx0XHRcdFx0XHRcdFx0aGVpZ2h0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByYXRpbztcblx0XHR9LFxuXG5cdFx0Y2FsY3VsYXRlU2l6ZTogZnVuY3Rpb24oZWxlbWVudCwgd2lkdGgpe1xuXHRcdFx0dmFyIGRpc3BsYXlSYXRpbywgaGVpZ2h0LCBpbWFnZVJhdGlvLCByZXRXaWR0aDtcblx0XHRcdHZhciBmaXRPYmogPSB0aGlzLmdldEZpdChlbGVtZW50KTtcblx0XHRcdHZhciBmaXQgPSBmaXRPYmouZml0O1xuXHRcdFx0dmFyIGZpdEVsZW0gPSBmaXRPYmoucGFyZW50O1xuXG5cdFx0XHRpZihmaXQgIT0gJ3dpZHRoJyAmJiAoKGZpdCAhPSAnY29udGFpbicgJiYgZml0ICE9ICdjb3ZlcicpIHx8ICEoaW1hZ2VSYXRpbyA9IHRoaXMuZ2V0SW1hZ2VSYXRpbyhlbGVtZW50KSkpKXtcblx0XHRcdFx0cmV0dXJuIHdpZHRoO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihmaXRFbGVtKXtcblx0XHRcdFx0d2lkdGggPSBmaXRFbGVtLmNsaWVudFdpZHRoO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zml0RWxlbSA9IGVsZW1lbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldFdpZHRoID0gd2lkdGg7XG5cblx0XHRcdGlmKGZpdCA9PSAnd2lkdGgnKXtcblx0XHRcdFx0cmV0V2lkdGggPSB3aWR0aDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhlaWdodCA9IGZpdEVsZW0uY2xpZW50SGVpZ2h0O1xuXG5cdFx0XHRcdGlmKChkaXNwbGF5UmF0aW8gPSAgd2lkdGggLyBoZWlnaHQpICYmICgoZml0ID09ICdjb3ZlcicgJiYgZGlzcGxheVJhdGlvIDwgaW1hZ2VSYXRpbykgfHwgKGZpdCA9PSAnY29udGFpbicgJiYgZGlzcGxheVJhdGlvID4gaW1hZ2VSYXRpbykpKXtcblx0XHRcdFx0XHRyZXRXaWR0aCA9IHdpZHRoICogKGltYWdlUmF0aW8gLyBkaXNwbGF5UmF0aW8pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXRXaWR0aDtcblx0XHR9XG5cdH07XG5cblx0bGF6eVNpemVzLnBhcmVudEZpdCA9IHBhcmVudEZpdDtcblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdsYXp5YmVmb3Jlc2l6ZXMnLCBmdW5jdGlvbihlKXtcblx0XHRpZihlLmRlZmF1bHRQcmV2ZW50ZWQgfHwgZS5kZXRhaWwuaW5zdGFuY2UgIT0gbGF6eVNpemVzKXtyZXR1cm47fVxuXG5cdFx0dmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcblx0XHRlLmRldGFpbC53aWR0aCA9IHBhcmVudEZpdC5jYWxjdWxhdGVTaXplKGVsZW1lbnQsIGUuZGV0YWlsLndpZHRoKTtcblx0fSk7XG59KSk7XG4iLCIvKiFcbiAqIFVuaWRyYWdnZXIgdjMuMC4xXG4gKiBEcmFnZ2FibGUgYmFzZSBjbGFzc1xuICogTUlUIGxpY2Vuc2VcbiAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3csIGZhY3RvcnkgKSB7XG4gIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICBpZiAoIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgIHdpbmRvdyxcbiAgICAgICAgcmVxdWlyZSgnZXYtZW1pdHRlcicpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICB3aW5kb3cuVW5pZHJhZ2dlciA9IGZhY3RvcnkoXG4gICAgICAgIHdpbmRvdyxcbiAgICAgICAgd2luZG93LkV2RW1pdHRlcixcbiAgICApO1xuICB9XG5cbn0oIHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiBmYWN0b3J5KCB3aW5kb3csIEV2RW1pdHRlciApIHtcblxuZnVuY3Rpb24gVW5pZHJhZ2dlcigpIHt9XG5cbi8vIGluaGVyaXQgRXZFbWl0dGVyXG5sZXQgcHJvdG8gPSBVbmlkcmFnZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2RW1pdHRlci5wcm90b3R5cGUgKTtcblxuLy8gLS0tLS0gYmluZCBzdGFydCAtLS0tLSAvL1xuXG4vLyB0cmlnZ2VyIGhhbmRsZXIgbWV0aG9kcyBmb3IgZXZlbnRzXG5wcm90by5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgbGV0IG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlO1xuICBpZiAoIHRoaXNbIG1ldGhvZCBdICkge1xuICAgIHRoaXNbIG1ldGhvZCBdKCBldmVudCApO1xuICB9XG59O1xuXG5sZXQgc3RhcnRFdmVudCwgYWN0aXZlRXZlbnRzO1xuaWYgKCAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgKSB7XG4gIC8vIEhBQ0sgcHJlZmVyIFRvdWNoIEV2ZW50cyBhcyB5b3UgY2FuIHByZXZlbnREZWZhdWx0IG9uIHRvdWNoc3RhcnQgdG9cbiAgLy8gZGlzYWJsZSBzY3JvbGwgaW4gaU9TICYgbW9iaWxlIENocm9tZSBtZXRhZml6enkvZmxpY2tpdHkjMTE3N1xuICBzdGFydEV2ZW50ID0gJ3RvdWNoc3RhcnQnO1xuICBhY3RpdmVFdmVudHMgPSBbICd0b3VjaG1vdmUnLCAndG91Y2hlbmQnLCAndG91Y2hjYW5jZWwnIF07XG59IGVsc2UgaWYgKCB3aW5kb3cuUG9pbnRlckV2ZW50ICkge1xuICAvLyBQb2ludGVyIEV2ZW50c1xuICBzdGFydEV2ZW50ID0gJ3BvaW50ZXJkb3duJztcbiAgYWN0aXZlRXZlbnRzID0gWyAncG9pbnRlcm1vdmUnLCAncG9pbnRlcnVwJywgJ3BvaW50ZXJjYW5jZWwnIF07XG59IGVsc2Uge1xuICAvLyBtb3VzZSBldmVudHNcbiAgc3RhcnRFdmVudCA9ICdtb3VzZWRvd24nO1xuICBhY3RpdmVFdmVudHMgPSBbICdtb3VzZW1vdmUnLCAnbW91c2V1cCcgXTtcbn1cblxuLy8gcHJvdG90eXBlIHNvIGl0IGNhbiBiZSBvdmVyd3JpdGVhYmxlIGJ5IEZsaWNraXR5XG5wcm90by50b3VjaEFjdGlvblZhbHVlID0gJ25vbmUnO1xuXG5wcm90by5iaW5kSGFuZGxlcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9iaW5kSGFuZGxlcyggJ2FkZEV2ZW50TGlzdGVuZXInLCB0aGlzLnRvdWNoQWN0aW9uVmFsdWUgKTtcbn07XG5cbnByb3RvLnVuYmluZEhhbmRsZXMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fYmluZEhhbmRsZXMoICdyZW1vdmVFdmVudExpc3RlbmVyJywgJycgKTtcbn07XG5cbi8qKlxuICogQWRkIG9yIHJlbW92ZSBzdGFydCBldmVudFxuICogQHBhcmFtIHtTdHJpbmd9IGJpbmRNZXRob2QgLSBhZGRFdmVudExpc3RlbmVyIG9yIHJlbW92ZUV2ZW50TGlzdGVuZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSB0b3VjaEFjdGlvbiAtIHZhbHVlIGZvciB0b3VjaC1hY3Rpb24gQ1NTIHByb3BlcnR5XG4gKi9cbnByb3RvLl9iaW5kSGFuZGxlcyA9IGZ1bmN0aW9uKCBiaW5kTWV0aG9kLCB0b3VjaEFjdGlvbiApIHtcbiAgdGhpcy5oYW5kbGVzLmZvckVhY2goICggaGFuZGxlICkgPT4ge1xuICAgIGhhbmRsZVsgYmluZE1ldGhvZCBdKCBzdGFydEV2ZW50LCB0aGlzICk7XG4gICAgaGFuZGxlWyBiaW5kTWV0aG9kIF0oICdjbGljaycsIHRoaXMgKTtcbiAgICAvLyB0b3VjaC1hY3Rpb246IG5vbmUgdG8gb3ZlcnJpZGUgYnJvd3NlciB0b3VjaCBnZXN0dXJlcy4gbWV0YWZpenp5L2ZsaWNraXR5IzU0MFxuICAgIGlmICggd2luZG93LlBvaW50ZXJFdmVudCApIGhhbmRsZS5zdHlsZS50b3VjaEFjdGlvbiA9IHRvdWNoQWN0aW9uO1xuICB9ICk7XG59O1xuXG5wcm90by5iaW5kQWN0aXZlUG9pbnRlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICBhY3RpdmVFdmVudHMuZm9yRWFjaCggKCBldmVudE5hbWUgKSA9PiB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgdGhpcyApO1xuICB9ICk7XG59O1xuXG5wcm90by51bmJpbmRBY3RpdmVQb2ludGVyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gIGFjdGl2ZUV2ZW50cy5mb3JFYWNoKCAoIGV2ZW50TmFtZSApID0+IHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCB0aGlzICk7XG4gIH0gKTtcbn07XG5cbi8vIC0tLS0tIGV2ZW50IGhhbmRsZXIgaGVscGVycyAtLS0tLSAvL1xuXG4vLyB0cmlnZ2VyIG1ldGhvZCB3aXRoIG1hdGNoaW5nIHBvaW50ZXJcbnByb3RvLndpdGhQb2ludGVyID0gZnVuY3Rpb24oIG1ldGhvZE5hbWUsIGV2ZW50ICkge1xuICBpZiAoIGV2ZW50LnBvaW50ZXJJZCA9PT0gdGhpcy5wb2ludGVySWRlbnRpZmllciApIHtcbiAgICB0aGlzWyBtZXRob2ROYW1lIF0oIGV2ZW50LCBldmVudCApO1xuICB9XG59O1xuXG4vLyB0cmlnZ2VyIG1ldGhvZCB3aXRoIG1hdGNoaW5nIHRvdWNoXG5wcm90by53aXRoVG91Y2ggPSBmdW5jdGlvbiggbWV0aG9kTmFtZSwgZXZlbnQgKSB7XG4gIGxldCB0b3VjaDtcbiAgZm9yICggbGV0IGNoYW5nZWRUb3VjaCBvZiBldmVudC5jaGFuZ2VkVG91Y2hlcyApIHtcbiAgICBpZiAoIGNoYW5nZWRUb3VjaC5pZGVudGlmaWVyID09PSB0aGlzLnBvaW50ZXJJZGVudGlmaWVyICkge1xuICAgICAgdG91Y2ggPSBjaGFuZ2VkVG91Y2g7XG4gICAgfVxuICB9XG4gIGlmICggdG91Y2ggKSB0aGlzWyBtZXRob2ROYW1lIF0oIGV2ZW50LCB0b3VjaCApO1xufTtcblxuLy8gLS0tLS0gc3RhcnQgZXZlbnQgLS0tLS0gLy9cblxucHJvdG8ub25tb3VzZWRvd24gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMucG9pbnRlckRvd24oIGV2ZW50LCBldmVudCApO1xufTtcblxucHJvdG8ub250b3VjaHN0YXJ0ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLnBvaW50ZXJEb3duKCBldmVudCwgZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0gKTtcbn07XG5cbnByb3RvLm9ucG9pbnRlcmRvd24gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMucG9pbnRlckRvd24oIGV2ZW50LCBldmVudCApO1xufTtcblxuLy8gbm9kZXMgdGhhdCBoYXZlIHRleHQgZmllbGRzXG5jb25zdCBjdXJzb3JOb2RlcyA9IFsgJ1RFWFRBUkVBJywgJ0lOUFVUJywgJ1NFTEVDVCcsICdPUFRJT04nIF07XG4vLyBpbnB1dCB0eXBlcyB0aGF0IGRvIG5vdCBoYXZlIHRleHQgZmllbGRzXG5jb25zdCBjbGlja1R5cGVzID0gWyAncmFkaW8nLCAnY2hlY2tib3gnLCAnYnV0dG9uJywgJ3N1Ym1pdCcsICdpbWFnZScsICdmaWxlJyBdO1xuXG4vKipcbiAqIGFueSB0aW1lIHlvdSBzZXQgYGV2ZW50LCBwb2ludGVyYCBpdCByZWZlcnMgdG86XG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICogQHBhcmFtIHtFdmVudCB8IFRvdWNofSBwb2ludGVyXG4gKi9cbnByb3RvLnBvaW50ZXJEb3duID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICAvLyBkaXNtaXNzIG11bHRpLXRvdWNoIHRhcHMsIHJpZ2h0IGNsaWNrcywgYW5kIGNsaWNrcyBvbiB0ZXh0IGZpZWxkc1xuICBsZXQgaXNDdXJzb3JOb2RlID0gY3Vyc29yTm9kZXMuaW5jbHVkZXMoIGV2ZW50LnRhcmdldC5ub2RlTmFtZSApO1xuICBsZXQgaXNDbGlja1R5cGUgPSBjbGlja1R5cGVzLmluY2x1ZGVzKCBldmVudC50YXJnZXQudHlwZSApO1xuICBsZXQgaXNPa2F5RWxlbWVudCA9ICFpc0N1cnNvck5vZGUgfHwgaXNDbGlja1R5cGU7XG4gIGxldCBpc09rYXkgPSAhdGhpcy5pc1BvaW50ZXJEb3duICYmICFldmVudC5idXR0b24gJiYgaXNPa2F5RWxlbWVudDtcbiAgaWYgKCAhaXNPa2F5ICkgcmV0dXJuO1xuXG4gIHRoaXMuaXNQb2ludGVyRG93biA9IHRydWU7XG4gIC8vIHNhdmUgcG9pbnRlciBpZGVudGlmaWVyIHRvIG1hdGNoIHVwIHRvdWNoIGV2ZW50c1xuICB0aGlzLnBvaW50ZXJJZGVudGlmaWVyID0gcG9pbnRlci5wb2ludGVySWQgIT09IHVuZGVmaW5lZCA/XG4gICAgLy8gcG9pbnRlcklkIGZvciBwb2ludGVyIGV2ZW50cywgdG91Y2guaW5kZW50aWZpZXIgZm9yIHRvdWNoIGV2ZW50c1xuICAgIHBvaW50ZXIucG9pbnRlcklkIDogcG9pbnRlci5pZGVudGlmaWVyO1xuICAvLyB0cmFjayBwb3NpdGlvbiBmb3IgbW92ZVxuICB0aGlzLnBvaW50ZXJEb3duUG9pbnRlciA9IHtcbiAgICBwYWdlWDogcG9pbnRlci5wYWdlWCxcbiAgICBwYWdlWTogcG9pbnRlci5wYWdlWSxcbiAgfTtcblxuICB0aGlzLmJpbmRBY3RpdmVQb2ludGVyRXZlbnRzKCk7XG4gIHRoaXMuZW1pdEV2ZW50KCAncG9pbnRlckRvd24nLCBbIGV2ZW50LCBwb2ludGVyIF0gKTtcbn07XG5cbi8vIC0tLS0tIG1vdmUgLS0tLS0gLy9cblxucHJvdG8ub25tb3VzZW1vdmUgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMucG9pbnRlck1vdmUoIGV2ZW50LCBldmVudCApO1xufTtcblxucHJvdG8ub25wb2ludGVybW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy53aXRoUG9pbnRlciggJ3BvaW50ZXJNb3ZlJywgZXZlbnQgKTtcbn07XG5cbnByb3RvLm9udG91Y2htb3ZlID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLndpdGhUb3VjaCggJ3BvaW50ZXJNb3ZlJywgZXZlbnQgKTtcbn07XG5cbnByb3RvLnBvaW50ZXJNb3ZlID0gZnVuY3Rpb24oIGV2ZW50LCBwb2ludGVyICkge1xuICBsZXQgbW92ZVZlY3RvciA9IHtcbiAgICB4OiBwb2ludGVyLnBhZ2VYIC0gdGhpcy5wb2ludGVyRG93blBvaW50ZXIucGFnZVgsXG4gICAgeTogcG9pbnRlci5wYWdlWSAtIHRoaXMucG9pbnRlckRvd25Qb2ludGVyLnBhZ2VZLFxuICB9O1xuICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJNb3ZlJywgWyBldmVudCwgcG9pbnRlciwgbW92ZVZlY3RvciBdICk7XG4gIC8vIHN0YXJ0IGRyYWcgaWYgcG9pbnRlciBoYXMgbW92ZWQgZmFyIGVub3VnaCB0byBzdGFydCBkcmFnXG4gIGxldCBpc0RyYWdTdGFydGluZyA9ICF0aGlzLmlzRHJhZ2dpbmcgJiYgdGhpcy5oYXNEcmFnU3RhcnRlZCggbW92ZVZlY3RvciApO1xuICBpZiAoIGlzRHJhZ1N0YXJ0aW5nICkgdGhpcy5kcmFnU3RhcnQoIGV2ZW50LCBwb2ludGVyICk7XG4gIGlmICggdGhpcy5pc0RyYWdnaW5nICkgdGhpcy5kcmFnTW92ZSggZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgKTtcbn07XG5cbi8vIGNvbmRpdGlvbiBpZiBwb2ludGVyIGhhcyBtb3ZlZCBmYXIgZW5vdWdoIHRvIHN0YXJ0IGRyYWdcbnByb3RvLmhhc0RyYWdTdGFydGVkID0gZnVuY3Rpb24oIG1vdmVWZWN0b3IgKSB7XG4gIHJldHVybiBNYXRoLmFicyggbW92ZVZlY3Rvci54ICkgPiAzIHx8IE1hdGguYWJzKCBtb3ZlVmVjdG9yLnkgKSA+IDM7XG59O1xuXG4vLyAtLS0tLSBkcmFnIC0tLS0tIC8vXG5cbnByb3RvLmRyYWdTdGFydCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcbiAgdGhpcy5pc1ByZXZlbnRpbmdDbGlja3MgPSB0cnVlOyAvLyBzZXQgZmxhZyB0byBwcmV2ZW50IGNsaWNrc1xuICB0aGlzLmVtaXRFdmVudCggJ2RyYWdTdGFydCcsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xufTtcblxucHJvdG8uZHJhZ01vdmUgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIsIG1vdmVWZWN0b3IgKSB7XG4gIHRoaXMuZW1pdEV2ZW50KCAnZHJhZ01vdmUnLCBbIGV2ZW50LCBwb2ludGVyLCBtb3ZlVmVjdG9yIF0gKTtcbn07XG5cbi8vIC0tLS0tIGVuZCAtLS0tLSAvL1xuXG5wcm90by5vbm1vdXNldXAgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMucG9pbnRlclVwKCBldmVudCwgZXZlbnQgKTtcbn07XG5cbnByb3RvLm9ucG9pbnRlcnVwID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICB0aGlzLndpdGhQb2ludGVyKCAncG9pbnRlclVwJywgZXZlbnQgKTtcbn07XG5cbnByb3RvLm9udG91Y2hlbmQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIHRoaXMud2l0aFRvdWNoKCAncG9pbnRlclVwJywgZXZlbnQgKTtcbn07XG5cbnByb3RvLnBvaW50ZXJVcCA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgdGhpcy5wb2ludGVyRG9uZSgpO1xuICB0aGlzLmVtaXRFdmVudCggJ3BvaW50ZXJVcCcsIFsgZXZlbnQsIHBvaW50ZXIgXSApO1xuXG4gIGlmICggdGhpcy5pc0RyYWdnaW5nICkge1xuICAgIHRoaXMuZHJhZ0VuZCggZXZlbnQsIHBvaW50ZXIgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBwb2ludGVyIGRpZG4ndCBtb3ZlIGVub3VnaCBmb3IgZHJhZyB0byBzdGFydFxuICAgIHRoaXMuc3RhdGljQ2xpY2soIGV2ZW50LCBwb2ludGVyICk7XG4gIH1cbn07XG5cbnByb3RvLmRyYWdFbmQgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlOyAvLyByZXNldCBmbGFnXG4gIC8vIHJlLWVuYWJsZSBjbGlja2luZyBhc3luY1xuICBzZXRUaW1lb3V0KCAoKSA9PiBkZWxldGUgdGhpcy5pc1ByZXZlbnRpbmdDbGlja3MgKTtcblxuICB0aGlzLmVtaXRFdmVudCggJ2RyYWdFbmQnLCBbIGV2ZW50LCBwb2ludGVyIF0gKTtcbn07XG5cbi8vIHRyaWdnZXJlZCBvbiBwb2ludGVyIHVwICYgcG9pbnRlciBjYW5jZWxcbnByb3RvLnBvaW50ZXJEb25lID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuaXNQb2ludGVyRG93biA9IGZhbHNlO1xuICBkZWxldGUgdGhpcy5wb2ludGVySWRlbnRpZmllcjtcbiAgdGhpcy51bmJpbmRBY3RpdmVQb2ludGVyRXZlbnRzKCk7XG4gIHRoaXMuZW1pdEV2ZW50KCdwb2ludGVyRG9uZScpO1xufTtcblxuLy8gLS0tLS0gY2FuY2VsIC0tLS0tIC8vXG5cbnByb3RvLm9ucG9pbnRlcmNhbmNlbCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy53aXRoUG9pbnRlciggJ3BvaW50ZXJDYW5jZWwnLCBldmVudCApO1xufTtcblxucHJvdG8ub250b3VjaGNhbmNlbCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgdGhpcy53aXRoVG91Y2goICdwb2ludGVyQ2FuY2VsJywgZXZlbnQgKTtcbn07XG5cbnByb3RvLnBvaW50ZXJDYW5jZWwgPSBmdW5jdGlvbiggZXZlbnQsIHBvaW50ZXIgKSB7XG4gIHRoaXMucG9pbnRlckRvbmUoKTtcbiAgdGhpcy5lbWl0RXZlbnQoICdwb2ludGVyQ2FuY2VsJywgWyBldmVudCwgcG9pbnRlciBdICk7XG59O1xuXG4vLyAtLS0tLSBjbGljayAtLS0tLSAvL1xuXG4vLyBoYW5kbGUgYWxsIGNsaWNrcyBhbmQgcHJldmVudCBjbGlja3Mgd2hlbiBkcmFnZ2luZ1xucHJvdG8ub25jbGljayA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgaWYgKCB0aGlzLmlzUHJldmVudGluZ0NsaWNrcyApIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59O1xuXG4vLyB0cmlnZ2VyZWQgYWZ0ZXIgcG9pbnRlciBkb3duICYgdXAgd2l0aCBuby90aW55IG1vdmVtZW50XG5wcm90by5zdGF0aWNDbGljayA9IGZ1bmN0aW9uKCBldmVudCwgcG9pbnRlciApIHtcbiAgLy8gaWdub3JlIGVtdWxhdGVkIG1vdXNlIHVwIGNsaWNrc1xuICBsZXQgaXNNb3VzZXVwID0gZXZlbnQudHlwZSA9PT0gJ21vdXNldXAnO1xuICBpZiAoIGlzTW91c2V1cCAmJiB0aGlzLmlzSWdub3JpbmdNb3VzZVVwICkgcmV0dXJuO1xuXG4gIHRoaXMuZW1pdEV2ZW50KCAnc3RhdGljQ2xpY2snLCBbIGV2ZW50LCBwb2ludGVyIF0gKTtcblxuICAvLyBzZXQgZmxhZyBmb3IgZW11bGF0ZWQgY2xpY2tzIDMwMG1zIGFmdGVyIHRvdWNoZW5kXG4gIGlmICggaXNNb3VzZXVwICkge1xuICAgIHRoaXMuaXNJZ25vcmluZ01vdXNlVXAgPSB0cnVlO1xuICAgIC8vIHJlc2V0IGZsYWcgYWZ0ZXIgNDAwbXNcbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICBkZWxldGUgdGhpcy5pc0lnbm9yaW5nTW91c2VVcDtcbiAgICB9LCA0MDAgKTtcbiAgfVxufTtcblxuLy8gLS0tLS0gIC0tLS0tIC8vXG5cbnJldHVybiBVbmlkcmFnZ2VyO1xuXG59ICkgKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTklMXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9uaWwuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwYXJzZVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfcGFyc2UuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzdHJpbmdpZnlcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3N0cmluZ2lmeS5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInYxXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF92LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjNcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3YyLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjRcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3YzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjVcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3Y0LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidmFsaWRhdGVcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3ZhbGlkYXRlLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidmVyc2lvblwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdmVyc2lvbi5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF92ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92MS5qc1wiKSk7XG5cbnZhciBfdjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3YzLmpzXCIpKTtcblxudmFyIF92MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjQuanNcIikpO1xuXG52YXIgX3Y0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92NS5qc1wiKSk7XG5cbnZhciBfbmlsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9uaWwuanNcIikpO1xuXG52YXIgX3ZlcnNpb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZlcnNpb24uanNcIikpO1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbnZhciBfc3RyaW5naWZ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIikpO1xuXG52YXIgX3BhcnNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wYXJzZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbi8qXG4gKiBCcm93c2VyLWNvbXBhdGlibGUgSmF2YVNjcmlwdCBNRDVcbiAqXG4gKiBNb2RpZmljYXRpb24gb2YgSmF2YVNjcmlwdCBNRDVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlaW1wL0phdmFTY3JpcHQtTUQ1XG4gKlxuICogQ29weXJpZ2h0IDIwMTEsIFNlYmFzdGlhbiBUc2NoYW5cbiAqIGh0dHBzOi8vYmx1ZWltcC5uZXRcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG4gKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICpcbiAqIEJhc2VkIG9uXG4gKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFJTQSBEYXRhIFNlY3VyaXR5LCBJbmMuIE1ENSBNZXNzYWdlXG4gKiBEaWdlc3QgQWxnb3JpdGhtLCBhcyBkZWZpbmVkIGluIFJGQyAxMzIxLlxuICogVmVyc2lvbiAyLjIgQ29weXJpZ2h0IChDKSBQYXVsIEpvaG5zdG9uIDE5OTkgLSAyMDA5XG4gKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0XG4gKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2VcbiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBtb3JlIGluZm8uXG4gKi9cbmZ1bmN0aW9uIG1kNShieXRlcykge1xuICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShtc2cubGVuZ3RoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlc1tpXSA9IG1zZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtZDVUb0hleEVuY29kZWRBcnJheSh3b3Jkc1RvTWQ1KGJ5dGVzVG9Xb3JkcyhieXRlcyksIGJ5dGVzLmxlbmd0aCAqIDgpKTtcbn1cbi8qXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMgdG8gYW4gYXJyYXkgb2YgYnl0ZXNcbiAqL1xuXG5cbmZ1bmN0aW9uIG1kNVRvSGV4RW5jb2RlZEFycmF5KGlucHV0KSB7XG4gIGNvbnN0IG91dHB1dCA9IFtdO1xuICBjb25zdCBsZW5ndGgzMiA9IGlucHV0Lmxlbmd0aCAqIDMyO1xuICBjb25zdCBoZXhUYWIgPSAnMDEyMzQ1Njc4OWFiY2RlZic7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGgzMjsgaSArPSA4KSB7XG4gICAgY29uc3QgeCA9IGlucHV0W2kgPj4gNV0gPj4+IGkgJSAzMiAmIDB4ZmY7XG4gICAgY29uc3QgaGV4ID0gcGFyc2VJbnQoaGV4VGFiLmNoYXJBdCh4ID4+PiA0ICYgMHgwZikgKyBoZXhUYWIuY2hhckF0KHggJiAweDBmKSwgMTYpO1xuICAgIG91dHB1dC5wdXNoKGhleCk7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgb3V0cHV0IGxlbmd0aCB3aXRoIHBhZGRpbmcgYW5kIGJpdCBsZW5ndGhcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldE91dHB1dExlbmd0aChpbnB1dExlbmd0aDgpIHtcbiAgcmV0dXJuIChpbnB1dExlbmd0aDggKyA2NCA+Pj4gOSA8PCA0KSArIDE0ICsgMTtcbn1cbi8qXG4gKiBDYWxjdWxhdGUgdGhlIE1ENSBvZiBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzLCBhbmQgYSBiaXQgbGVuZ3RoLlxuICovXG5cblxuZnVuY3Rpb24gd29yZHNUb01kNSh4LCBsZW4pIHtcbiAgLyogYXBwZW5kIHBhZGRpbmcgKi9cbiAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCBsZW4gJSAzMjtcbiAgeFtnZXRPdXRwdXRMZW5ndGgobGVuKSAtIDFdID0gbGVuO1xuICBsZXQgYSA9IDE3MzI1ODQxOTM7XG4gIGxldCBiID0gLTI3MTczMzg3OTtcbiAgbGV0IGMgPSAtMTczMjU4NDE5NDtcbiAgbGV0IGQgPSAyNzE3MzM4Nzg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxNikge1xuICAgIGNvbnN0IG9sZGEgPSBhO1xuICAgIGNvbnN0IG9sZGIgPSBiO1xuICAgIGNvbnN0IG9sZGMgPSBjO1xuICAgIGNvbnN0IG9sZGQgPSBkO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2ldLCA3LCAtNjgwODc2OTM2KTtcbiAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgMV0sIDEyLCAtMzg5NTY0NTg2KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMl0sIDE3LCA2MDYxMDU4MTkpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpICsgNF0sIDcsIC0xNzY0MTg4OTcpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA1XSwgMTIsIDEyMDAwODA0MjYpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTcsIC0xNDczMjMxMzQxKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgN10sIDIyLCAtNDU3MDU5ODMpO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNywgMTc3MDAzNTQxNik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDldLCAxMiwgLTE5NTg0MTQ0MTcpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE3LCAtNDIwNjMpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XG4gICAgYSA9IG1kNWZmKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNywgMTgwNDYwMzY4Mik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDEzXSwgMTIsIC00MDM0MTEwMSk7XG4gICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgMTVdLCAyMiwgMTIzNjUzNTMyOSk7XG4gICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA1LCAtMTY1Nzk2NTEwKTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgNl0sIDksIC0xMDY5NTAxNjMyKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpXSwgMjAsIC0zNzM4OTczMDIpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyA1XSwgNSwgLTcwMTU1ODY5MSk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDEwXSwgOSwgMzgwMTYwODMpO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE0LCAtNjYwNDc4MzM1KTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpICsgNF0sIDIwLCAtNDA1NTM3ODQ4KTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgOV0sIDUsIDU2ODQ0NjQzOCk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDE0XSwgOSwgLTEwMTk4MDM2OTApO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAzXSwgMTQsIC0xODczNjM5NjEpO1xuICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyA4XSwgMjAsIDExNjM1MzE1MDEpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxM10sIDUsIC0xNDQ0NjgxNDY3KTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgMl0sIDksIC01MTQwMzc4NCk7XG4gICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNCwgMTczNTMyODQ3Myk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaSArIDEyXSwgMjAsIC0xOTI2NjA3NzM0KTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgNV0sIDQsIC0zNzg1NTgpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyA4XSwgMTEsIC0yMDIyNTc0NDYzKTtcbiAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNiwgMTgzOTAzMDU2Mik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDE0XSwgMjMsIC0zNTMwOTU1Nik7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA0LCAtMTUzMDk5MjA2MCk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDRdLCAxMSwgMTI3Mjg5MzM1Myk7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNiwgLTE1NTQ5NzYzMik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDEwXSwgMjMsIC0xMDk0NzMwNjQwKTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA0LCA2ODEyNzkxNzQpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2ldLCAxMSwgLTM1ODUzNzIyMik7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDNdLCAxNiwgLTcyMjUyMTk3OSk7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDZdLCAyMywgNzYwMjkxODkpO1xuICAgIGEgPSBtZDVoaChhLCBiLCBjLCBkLCB4W2kgKyA5XSwgNCwgLTY0MDM2NDQ4Nyk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDEyXSwgMTEsIC00MjE4MTU4MzUpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE2LCA1MzA3NDI1MjApO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAyXSwgMjMsIC05OTUzMzg2NTEpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2ldLCA2LCAtMTk4NjMwODQ0KTtcbiAgICBkID0gbWQ1aWkoZCwgYSwgYiwgYywgeFtpICsgN10sIDEwLCAxMTI2ODkxNDE1KTtcbiAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTRdLCAxNSwgLTE0MTYzNTQ5MDUpO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyA1XSwgMjEsIC01NzQzNDA1NSk7XG4gICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNiwgMTcwMDQ4NTU3MSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE1LCAtMTA1MTUyMyk7XG4gICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDFdLCAyMSwgLTIwNTQ5MjI3OTkpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNiwgMTg3MzMxMzM1OSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDE1XSwgMTAsIC0zMDYxMTc0NCk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDZdLCAxNSwgLTE1NjAxOTgzODApO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxM10sIDIxLCAxMzA5MTUxNjQ5KTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgNF0sIDYsIC0xNDU1MjMwNzApO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNSwgNzE4Nzg3MjU5KTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgOV0sIDIxLCAtMzQzNDg1NTUxKTtcbiAgICBhID0gc2FmZUFkZChhLCBvbGRhKTtcbiAgICBiID0gc2FmZUFkZChiLCBvbGRiKTtcbiAgICBjID0gc2FmZUFkZChjLCBvbGRjKTtcbiAgICBkID0gc2FmZUFkZChkLCBvbGRkKTtcbiAgfVxuXG4gIHJldHVybiBbYSwgYiwgYywgZF07XG59XG4vKlxuICogQ29udmVydCBhbiBhcnJheSBieXRlcyB0byBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzXG4gKiBDaGFyYWN0ZXJzID4yNTUgaGF2ZSB0aGVpciBoaWdoLWJ5dGUgc2lsZW50bHkgaWdub3JlZC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyhpbnB1dCkge1xuICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgbGVuZ3RoOCA9IGlucHV0Lmxlbmd0aCAqIDg7XG4gIGNvbnN0IG91dHB1dCA9IG5ldyBVaW50MzJBcnJheShnZXRPdXRwdXRMZW5ndGgobGVuZ3RoOCkpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoODsgaSArPSA4KSB7XG4gICAgb3V0cHV0W2kgPj4gNV0gfD0gKGlucHV0W2kgLyA4XSAmIDB4ZmYpIDw8IGkgJSAzMjtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59XG4vKlxuICogQWRkIGludGVnZXJzLCB3cmFwcGluZyBhdCAyXjMyLiBUaGlzIHVzZXMgMTYtYml0IG9wZXJhdGlvbnMgaW50ZXJuYWxseVxuICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy5cbiAqL1xuXG5cbmZ1bmN0aW9uIHNhZmVBZGQoeCwgeSkge1xuICBjb25zdCBsc3cgPSAoeCAmIDB4ZmZmZikgKyAoeSAmIDB4ZmZmZik7XG4gIGNvbnN0IG1zdyA9ICh4ID4+IDE2KSArICh5ID4+IDE2KSArIChsc3cgPj4gMTYpO1xuICByZXR1cm4gbXN3IDw8IDE2IHwgbHN3ICYgMHhmZmZmO1xufVxuLypcbiAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJpdFJvdGF0ZUxlZnQobnVtLCBjbnQpIHtcbiAgcmV0dXJuIG51bSA8PCBjbnQgfCBudW0gPj4+IDMyIC0gY250O1xufVxuLypcbiAqIFRoZXNlIGZ1bmN0aW9ucyBpbXBsZW1lbnQgdGhlIGZvdXIgYmFzaWMgb3BlcmF0aW9ucyB0aGUgYWxnb3JpdGhtIHVzZXMuXG4gKi9cblxuXG5mdW5jdGlvbiBtZDVjbW4ocSwgYSwgYiwgeCwgcywgdCkge1xuICByZXR1cm4gc2FmZUFkZChiaXRSb3RhdGVMZWZ0KHNhZmVBZGQoc2FmZUFkZChhLCBxKSwgc2FmZUFkZCh4LCB0KSksIHMpLCBiKTtcbn1cblxuZnVuY3Rpb24gbWQ1ZmYoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgJiBjIHwgfmIgJiBkLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gbWQ1Z2coYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgJiBkIHwgYyAmIH5kLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gbWQ1aGgoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWlpKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihjIF4gKGIgfCB+ZCksIGEsIGIsIHgsIHMsIHQpO1xufVxuXG52YXIgX2RlZmF1bHQgPSBtZDU7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbmNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG52YXIgX2RlZmF1bHQgPSB7XG4gIHJhbmRvbVVVSURcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfZGVmYXVsdCA9ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gcGFyc2UodXVpZCkge1xuICBpZiAoISgwLCBfdmFsaWRhdGUuZGVmYXVsdCkodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG5cbiAgbGV0IHY7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gUGFyc2UgIyMjIyMjIyMtLi4uLi0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDAsIDgpLCAxNikpID4+PiAyNDtcbiAgYXJyWzFdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMl0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzNdID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLSMjIyMtLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFycls0XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSg5LCAxMyksIDE2KSkgPj4+IDg7XG4gIGFycls1XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLSMjIyMtLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbNl0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE4KSwgMTYpKSA+Pj4gODtcbiAgYXJyWzddID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0jIyMjLS4uLi4uLi4uLi4uLlxuXG4gIGFycls4XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxOSwgMjMpLCAxNikpID4+PiA4O1xuICBhcnJbOV0gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLS4uLi4tIyMjIyMjIyMjIyMjXG4gIC8vIChVc2UgXCIvXCIgdG8gYXZvaWQgMzItYml0IHRydW5jYXRpb24gd2hlbiBiaXQtc2hpZnRpbmcgaGlnaC1vcmRlciBieXRlcylcblxuICBhcnJbMTBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDI0LCAzNiksIDE2KSkgLyAweDEwMDAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzExXSA9IHYgLyAweDEwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMl0gPSB2ID4+PiAyNCAmIDB4ZmY7XG4gIGFyclsxM10gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsxNF0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzE1XSA9IHYgJiAweGZmO1xuICByZXR1cm4gYXJyO1xufVxuXG52YXIgX2RlZmF1bHQgPSBwYXJzZTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9kZWZhdWx0ID0gL14oPzpbMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS01XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBybmc7XG4vLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbmxldCBnZXRSYW5kb21WYWx1ZXM7XG5jb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcblxuZnVuY3Rpb24gcm5nKCkge1xuICAvLyBsYXp5IGxvYWQgc28gdGhhdCBlbnZpcm9ubWVudHMgdGhhdCBuZWVkIHRvIHBvbHlmaWxsIGhhdmUgYSBjaGFuY2UgdG8gZG8gc29cbiAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAvLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbi8vIEFkYXB0ZWQgZnJvbSBDaHJpcyBWZW5lc3MnIFNIQTEgY29kZSBhdFxuLy8gaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9zaGExLmh0bWxcbmZ1bmN0aW9uIGYocywgeCwgeSwgeikge1xuICBzd2l0Y2ggKHMpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4geCAmIHkgXiB+eCAmIHo7XG5cbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4geCBeIHkgXiB6O1xuXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIHggJiB5IF4geCAmIHogXiB5ICYgejtcblxuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG4gIH1cbn1cblxuZnVuY3Rpb24gUk9UTCh4LCBuKSB7XG4gIHJldHVybiB4IDw8IG4gfCB4ID4+PiAzMiAtIG47XG59XG5cbmZ1bmN0aW9uIHNoYTEoYnl0ZXMpIHtcbiAgY29uc3QgSyA9IFsweDVhODI3OTk5LCAweDZlZDllYmExLCAweDhmMWJiY2RjLCAweGNhNjJjMWQ2XTtcbiAgY29uc3QgSCA9IFsweDY3NDUyMzAxLCAweGVmY2RhYjg5LCAweDk4YmFkY2ZlLCAweDEwMzI1NDc2LCAweGMzZDJlMWYwXTtcblxuICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlcy5wdXNoKG1zZy5jaGFyQ29kZUF0KGkpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoYnl0ZXMpKSB7XG4gICAgLy8gQ29udmVydCBBcnJheS1saWtlIHRvIEFycmF5XG4gICAgYnl0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChieXRlcyk7XG4gIH1cblxuICBieXRlcy5wdXNoKDB4ODApO1xuICBjb25zdCBsID0gYnl0ZXMubGVuZ3RoIC8gNCArIDI7XG4gIGNvbnN0IE4gPSBNYXRoLmNlaWwobCAvIDE2KTtcbiAgY29uc3QgTSA9IG5ldyBBcnJheShOKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IE47ICsraSkge1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50MzJBcnJheSgxNik7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDE2OyArK2opIHtcbiAgICAgIGFycltqXSA9IGJ5dGVzW2kgKiA2NCArIGogKiA0XSA8PCAyNCB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgMV0gPDwgMTYgfCBieXRlc1tpICogNjQgKyBqICogNCArIDJdIDw8IDggfCBieXRlc1tpICogNjQgKyBqICogNCArIDNdO1xuICAgIH1cblxuICAgIE1baV0gPSBhcnI7XG4gIH1cblxuICBNW04gLSAxXVsxNF0gPSAoYnl0ZXMubGVuZ3RoIC0gMSkgKiA4IC8gTWF0aC5wb3coMiwgMzIpO1xuICBNW04gLSAxXVsxNF0gPSBNYXRoLmZsb29yKE1bTiAtIDFdWzE0XSk7XG4gIE1bTiAtIDFdWzE1XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggJiAweGZmZmZmZmZmO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgKytpKSB7XG4gICAgY29uc3QgVyA9IG5ldyBVaW50MzJBcnJheSg4MCk7XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDE2OyArK3QpIHtcbiAgICAgIFdbdF0gPSBNW2ldW3RdO1xuICAgIH1cblxuICAgIGZvciAobGV0IHQgPSAxNjsgdCA8IDgwOyArK3QpIHtcbiAgICAgIFdbdF0gPSBST1RMKFdbdCAtIDNdIF4gV1t0IC0gOF0gXiBXW3QgLSAxNF0gXiBXW3QgLSAxNl0sIDEpO1xuICAgIH1cblxuICAgIGxldCBhID0gSFswXTtcbiAgICBsZXQgYiA9IEhbMV07XG4gICAgbGV0IGMgPSBIWzJdO1xuICAgIGxldCBkID0gSFszXTtcbiAgICBsZXQgZSA9IEhbNF07XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDgwOyArK3QpIHtcbiAgICAgIGNvbnN0IHMgPSBNYXRoLmZsb29yKHQgLyAyMCk7XG4gICAgICBjb25zdCBUID0gUk9UTChhLCA1KSArIGYocywgYiwgYywgZCkgKyBlICsgS1tzXSArIFdbdF0gPj4+IDA7XG4gICAgICBlID0gZDtcbiAgICAgIGQgPSBjO1xuICAgICAgYyA9IFJPVEwoYiwgMzApID4+PiAwO1xuICAgICAgYiA9IGE7XG4gICAgICBhID0gVDtcbiAgICB9XG5cbiAgICBIWzBdID0gSFswXSArIGEgPj4+IDA7XG4gICAgSFsxXSA9IEhbMV0gKyBiID4+PiAwO1xuICAgIEhbMl0gPSBIWzJdICsgYyA+Pj4gMDtcbiAgICBIWzNdID0gSFszXSArIGQgPj4+IDA7XG4gICAgSFs0XSA9IEhbNF0gKyBlID4+PiAwO1xuICB9XG5cbiAgcmV0dXJuIFtIWzBdID4+IDI0ICYgMHhmZiwgSFswXSA+PiAxNiAmIDB4ZmYsIEhbMF0gPj4gOCAmIDB4ZmYsIEhbMF0gJiAweGZmLCBIWzFdID4+IDI0ICYgMHhmZiwgSFsxXSA+PiAxNiAmIDB4ZmYsIEhbMV0gPj4gOCAmIDB4ZmYsIEhbMV0gJiAweGZmLCBIWzJdID4+IDI0ICYgMHhmZiwgSFsyXSA+PiAxNiAmIDB4ZmYsIEhbMl0gPj4gOCAmIDB4ZmYsIEhbMl0gJiAweGZmLCBIWzNdID4+IDI0ICYgMHhmZiwgSFszXSA+PiAxNiAmIDB4ZmYsIEhbM10gPj4gOCAmIDB4ZmYsIEhbM10gJiAweGZmLCBIWzRdID4+IDI0ICYgMHhmZiwgSFs0XSA+PiAxNiAmIDB4ZmYsIEhbNF0gPj4gOCAmIDB4ZmYsIEhbNF0gJiAweGZmXTtcbn1cblxudmFyIF9kZWZhdWx0ID0gc2hhMTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuZXhwb3J0cy51bnNhZmVTdHJpbmdpZnkgPSB1bnNhZmVTdHJpbmdpZnk7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuXG5mdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICByZXR1cm4gYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV07XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgY29uc3QgdXVpZCA9IHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoISgwLCBfdmFsaWRhdGUuZGVmYXVsdCkodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbnZhciBfZGVmYXVsdCA9IHN0cmluZ2lmeTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3JuZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcm5nLmpzXCIpKTtcblxudmFyIF9zdHJpbmdpZnkgPSByZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vICoqYHYxKClgIC0gR2VuZXJhdGUgdGltZS1iYXNlZCBVVUlEKipcbi8vXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuLy8gYW5kIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS91dWlkLmh0bWxcbmxldCBfbm9kZUlkO1xuXG5sZXQgX2Nsb2Nrc2VxOyAvLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcblxuXG5sZXQgX2xhc3RNU2VjcyA9IDA7XG5sZXQgX2xhc3ROU2VjcyA9IDA7IC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQgZm9yIEFQSSBkZXRhaWxzXG5cbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGxldCBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICBjb25zdCBiID0gYnVmIHx8IG5ldyBBcnJheSgxNik7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsZXQgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCBfbm9kZUlkO1xuICBsZXQgY2xvY2tzZXEgPSBvcHRpb25zLmNsb2Nrc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsb2Nrc2VxIDogX2Nsb2Nrc2VxOyAvLyBub2RlIGFuZCBjbG9ja3NlcSBuZWVkIHRvIGJlIGluaXRpYWxpemVkIHRvIHJhbmRvbSB2YWx1ZXMgaWYgdGhleSdyZSBub3RcbiAgLy8gc3BlY2lmaWVkLiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50XG4gIC8vIHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcblxuICBpZiAobm9kZSA9PSBudWxsIHx8IGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICBjb25zdCBzZWVkQnl0ZXMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgX3JuZy5kZWZhdWx0KSgpO1xuXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtzZWVkQnl0ZXNbMF0gfCAweDAxLCBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XV07XG4gICAgfVxuXG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9IC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuXG5cbiAgbGV0IG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IERhdGUubm93KCk7IC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcblxuICBsZXQgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7IC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcblxuICBjb25zdCBkdCA9IG1zZWNzIC0gX2xhc3RNU2VjcyArIChuc2VjcyAtIF9sYXN0TlNlY3MpIC8gMTAwMDA7IC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cblxuICBpZiAoZHQgPCAwICYmIG9wdGlvbnMuY2xvY2tzZXEgPT09IHVuZGVmaW5lZCkge1xuICAgIGNsb2Nrc2VxID0gY2xvY2tzZXEgKyAxICYgMHgzZmZmO1xuICB9IC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcblxuXG4gIGlmICgoZHQgPCAwIHx8IG1zZWNzID4gX2xhc3RNU2VjcykgJiYgb3B0aW9ucy5uc2VjcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbnNlY3MgPSAwO1xuICB9IC8vIFBlciA0LjIuMS4yIFRocm93IGVycm9yIGlmIHRvbyBtYW55IHV1aWRzIGFyZSByZXF1ZXN0ZWRcblxuXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInV1aWQudjEoKTogQ2FuJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjXCIpO1xuICB9XG5cbiAgX2xhc3RNU2VjcyA9IG1zZWNzO1xuICBfbGFzdE5TZWNzID0gbnNlY3M7XG4gIF9jbG9ja3NlcSA9IGNsb2Nrc2VxOyAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcblxuICBtc2VjcyArPSAxMjIxOTI5MjgwMDAwMDsgLy8gYHRpbWVfbG93YFxuXG4gIGNvbnN0IHRsID0gKChtc2VjcyAmIDB4ZmZmZmZmZikgKiAxMDAwMCArIG5zZWNzKSAlIDB4MTAwMDAwMDAwO1xuICBiW2krK10gPSB0bCA+Pj4gMjQgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gMTYgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsICYgMHhmZjsgLy8gYHRpbWVfbWlkYFxuXG4gIGNvbnN0IHRtaCA9IG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjsgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcblxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG5cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7IC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDsgLy8gYGNsb2NrX3NlcV9sb3dgXG5cbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmOyAvLyBgbm9kZWBcblxuICBmb3IgKGxldCBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgfHwgKDAsIF9zdHJpbmdpZnkudW5zYWZlU3RyaW5naWZ5KShiKTtcbn1cblxudmFyIF9kZWZhdWx0ID0gdjE7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF92ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92MzUuanNcIikpO1xuXG52YXIgX21kID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9tZDUuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5jb25zdCB2MyA9ICgwLCBfdi5kZWZhdWx0KSgndjMnLCAweDMwLCBfbWQuZGVmYXVsdCk7XG52YXIgX2RlZmF1bHQgPSB2MztcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5VUkwgPSBleHBvcnRzLkROUyA9IHZvaWQgMDtcbmV4cG9ydHMuZGVmYXVsdCA9IHYzNTtcblxudmFyIF9zdHJpbmdpZnkgPSByZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIik7XG5cbnZhciBfcGFyc2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3BhcnNlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpOyAvLyBVVEY4IGVzY2FwZVxuXG4gIGNvbnN0IGJ5dGVzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBieXRlcy5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpKTtcbiAgfVxuXG4gIHJldHVybiBieXRlcztcbn1cblxuY29uc3QgRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnRzLkROUyA9IEROUztcbmNvbnN0IFVSTCA9ICc2YmE3YjgxMS05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0cy5VUkwgPSBVUkw7XG5cbmZ1bmN0aW9uIHYzNShuYW1lLCB2ZXJzaW9uLCBoYXNoZnVuYykge1xuICBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQodmFsdWUsIG5hbWVzcGFjZSwgYnVmLCBvZmZzZXQpIHtcbiAgICB2YXIgX25hbWVzcGFjZTtcblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IHN0cmluZ1RvQnl0ZXModmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlID09PSAnc3RyaW5nJykge1xuICAgICAgbmFtZXNwYWNlID0gKDAsIF9wYXJzZS5kZWZhdWx0KShuYW1lc3BhY2UpO1xuICAgIH1cblxuICAgIGlmICgoKF9uYW1lc3BhY2UgPSBuYW1lc3BhY2UpID09PSBudWxsIHx8IF9uYW1lc3BhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9uYW1lc3BhY2UubGVuZ3RoKSAhPT0gMTYpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignTmFtZXNwYWNlIG11c3QgYmUgYXJyYXktbGlrZSAoMTYgaXRlcmFibGUgaW50ZWdlciB2YWx1ZXMsIDAtMjU1KScpO1xuICAgIH0gLy8gQ29tcHV0ZSBoYXNoIG9mIG5hbWVzcGFjZSBhbmQgdmFsdWUsIFBlciA0LjNcbiAgICAvLyBGdXR1cmU6IFVzZSBzcHJlYWQgc3ludGF4IHdoZW4gc3VwcG9ydGVkIG9uIGFsbCBwbGF0Zm9ybXMsIGUuZy4gYGJ5dGVzID1cbiAgICAvLyBoYXNoZnVuYyhbLi4ubmFtZXNwYWNlLCAuLi4gdmFsdWVdKWBcblxuXG4gICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYgKyB2YWx1ZS5sZW5ndGgpO1xuICAgIGJ5dGVzLnNldChuYW1lc3BhY2UpO1xuICAgIGJ5dGVzLnNldCh2YWx1ZSwgbmFtZXNwYWNlLmxlbmd0aCk7XG4gICAgYnl0ZXMgPSBoYXNoZnVuYyhieXRlcyk7XG4gICAgYnl0ZXNbNl0gPSBieXRlc1s2XSAmIDB4MGYgfCB2ZXJzaW9uO1xuICAgIGJ5dGVzWzhdID0gYnl0ZXNbOF0gJiAweDNmIHwgMHg4MDtcblxuICAgIGlmIChidWYpIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgYnVmW29mZnNldCArIGldID0gYnl0ZXNbaV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWY7XG4gICAgfVxuXG4gICAgcmV0dXJuICgwLCBfc3RyaW5naWZ5LnVuc2FmZVN0cmluZ2lmeSkoYnl0ZXMpO1xuICB9IC8vIEZ1bmN0aW9uI25hbWUgaXMgbm90IHNldHRhYmxlIG9uIHNvbWUgcGxhdGZvcm1zICgjMjcwKVxuXG5cbiAgdHJ5IHtcbiAgICBnZW5lcmF0ZVVVSUQubmFtZSA9IG5hbWU7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICB9IGNhdGNoIChlcnIpIHt9IC8vIEZvciBDb21tb25KUyBkZWZhdWx0IGV4cG9ydCBzdXBwb3J0XG5cblxuICBnZW5lcmF0ZVVVSUQuRE5TID0gRE5TO1xuICBnZW5lcmF0ZVVVSUQuVVJMID0gVVJMO1xuICByZXR1cm4gZ2VuZXJhdGVVVUlEO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX25hdGl2ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbmF0aXZlLmpzXCIpKTtcblxudmFyIF9ybmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JuZy5qc1wiKSk7XG5cbnZhciBfc3RyaW5naWZ5ID0gcmVxdWlyZShcIi4vc3RyaW5naWZ5LmpzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBpZiAoX25hdGl2ZS5kZWZhdWx0LnJhbmRvbVVVSUQgJiYgIWJ1ZiAmJiAhb3B0aW9ucykge1xuICAgIHJldHVybiBfbmF0aXZlLmRlZmF1bHQucmFuZG9tVVVJRCgpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgY29uc3Qgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBfcm5nLmRlZmF1bHQpKCk7IC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcblxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuICgwLCBfc3RyaW5naWZ5LnVuc2FmZVN0cmluZ2lmeSkocm5kcyk7XG59XG5cbnZhciBfZGVmYXVsdCA9IHY0O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjM1LmpzXCIpKTtcblxudmFyIF9zaGEgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3NoYTEuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5jb25zdCB2NSA9ICgwLCBfdi5kZWZhdWx0KSgndjUnLCAweDUwLCBfc2hhLmRlZmF1bHQpO1xudmFyIF9kZWZhdWx0ID0gdjU7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9yZWdleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcmVnZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgX3JlZ2V4LmRlZmF1bHQudGVzdCh1dWlkKTtcbn1cblxudmFyIF9kZWZhdWx0ID0gdmFsaWRhdGU7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF92YWxpZGF0ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdmFsaWRhdGUuanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiB2ZXJzaW9uKHV1aWQpIHtcbiAgaWYgKCEoMCwgX3ZhbGlkYXRlLmRlZmF1bHQpKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdJbnZhbGlkIFVVSUQnKTtcbiAgfVxuXG4gIHJldHVybiBwYXJzZUludCh1dWlkLnNsaWNlKDE0LCAxNSksIDE2KTtcbn1cblxudmFyIF9kZWZhdWx0ID0gdmVyc2lvbjtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIi8vIHZlbmRvclxud2luZG93LkZsaWNraXR5ID0gcmVxdWlyZSgnZmxpY2tpdHknKTtcbndpbmRvdy5VdWlkID0gcmVxdWlyZSgndXVpZCcpO1xucmVxdWlyZSgnbGF6eXNpemVzL3BsdWdpbnMvYmdzZXQvbHMuYmdzZXQnKTtcbnJlcXVpcmUoJ2xhenlzaXplcycpO1xucmVxdWlyZSgnbGF6eXNpemVzL3BsdWdpbnMvcGFyZW50LWZpdC9scy5wYXJlbnQtZml0Jyk7XG5cbi8vIGltcG9ydCBmdW5jdGlvbiB0byByZWdpc3RlciBTd2lwZXIgY3VzdG9tIGVsZW1lbnRzXG53aW5kb3cucmVnaXN0ZXIgPSByZXF1aXJlKCcuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3N3aXBlci1lbGVtZW50LWJ1bmRsZScpO1xuLy8gcmVnaXN0ZXIgU3dpcGVyIGN1c3RvbSBlbGVtZW50c1xud2luZG93LnJlZ2lzdGVyLmRlZmF1bHQ7XG5yZXF1aXJlKCdsYXp5c2l6ZXMnKTtcblxuLy8gbW9kdWxlc1xud2luZG93LlB1YlN1YiA9IHJlcXVpcmUoJy4vc2NyaXB0cy9wdWJzdWInKTtcblxud2luZG93LmRlYm91bmNlID0gZnVuY3Rpb24gKGZuLCB3YWl0KSB7XG5cdGxldCB0O1xuXHRyZXR1cm4gKC4uLmFyZ3MpID0+IHtcblx0XHRjbGVhclRpbWVvdXQodCk7XG5cdFx0dCA9IHNldFRpbWVvdXQoKCkgPT4gZm4uYXBwbHkodGhpcywgYXJncyksIHdhaXQpO1xuXHR9O1xufVxuXG53aW5kb3cudGhyb3R0bGUgPSBmdW5jdGlvbihjYiwgZGVsYXkpIHtcblx0bGV0IHdhaXQgPSBmYWxzZTtcblx0bGV0IHN0b3JlZEFyZ3MgPSBudWxsO1xuXG5cdGZ1bmN0aW9uIGNoZWNrU3RvcmVkQXJncyAoKSB7XG5cdFx0aWYgKHN0b3JlZEFyZ3MgPT0gbnVsbCkge1xuXHRcdFx0d2FpdCA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYiguLi5zdG9yZWRBcmdzKTtcblx0XHRcdHN0b3JlZEFyZ3MgPSBudWxsO1xuXHRcdFx0c2V0VGltZW91dChjaGVja1N0b3JlZEFyZ3MsIGRlbGF5KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gKC4uLmFyZ3MpID0+IHtcblx0XHRpZiAod2FpdCkge1xuXHRcdFx0c3RvcmVkQXJncyA9IGFyZ3M7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y2IoLi4uYXJncyk7XG5cdFx0d2FpdCA9IHRydWU7XG5cdFx0c2V0VGltZW91dChjaGVja1N0b3JlZEFyZ3MsIGRlbGF5KTtcblx0fVxufSIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRFVkVOVFM6IHtcblx0XHRjYXJ0VXBkYXRlZDogJ2NhcnQtdXBkYXRlZCdcblx0fSxcblx0c3Vic2NyaWJlcnM6IHt9LFxuXHRzdWJzY3JpYmU6IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG5cdFx0aWYgKHRoaXMuc3Vic2NyaWJlcnNbZXZlbnROYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLnN1YnNjcmliZXJzW2V2ZW50TmFtZV0gPSBbXTtcblx0XHR9XG5cblx0XHR0aGlzLnN1YnNjcmliZXJzW2V2ZW50TmFtZV0gPSBbLi4udGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdLCBjYWxsYmFja107XG5cblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdID0gdGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdLmZpbHRlcigoY2IpID0+IHtcblx0XHRcdFx0cmV0dXJuIGNiICE9PSBjYWxsYmFjaztcblx0XHRcdH0pO1xuXHRcdH07XG5cdH0sXG5cdHB1Ymxpc2g6IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEpIHtcblx0XHRpZiAodGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdKSB7XG5cdFx0XHR0aGlzLnN1YnNjcmliZXJzW2V2ZW50TmFtZV0uZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcblx0XHRcdFx0Y2FsbGJhY2soZGF0YSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cbn1cbiJdfQ==
